import{_ as l}from"./v2-8cec22d735be76cd4a140ac30513ca49_b-bf62ba59.js";import{_ as i,W as c,X as r,a0 as n,a1 as s,Z as a,a2 as u,$ as t,C as o}from"./framework-c8643d23.js";const d="/Computer-Science-Learn-Notes/assets/java-collections-1-09a4d3a6.webp",k="/Computer-Science-Learn-Notes/assets/throwable-list-53d235eb.webp",m="/Computer-Science-Learn-Notes/assets/collections-list-aac6c2e1.webp",g="data:image/webp;base64,UklGRhwNAABXRUJQVlA4IBANAAAQRwCdASqAAYoAPm0ylkkkIqIhI3C50IANiWdu4W3AscZP1HHdO19C3iz0vf8D+v/1r4AfmD2AOdj5gP4f/Tv1v97f+m/sB7h/189gD+zf2v0kvYA9AD+H/4D//+uJ+33wf/ur+53tlaqh4Z/u3bn/eeic8ve3XLGeq+w36LyF/uv4peZPqo9QL1H/Wd6B0bzAvaf5x/oP7h7HvvHmJ4gH6yf8f10/yHgYfbv9P7AH8/8tb/Q/YP0+/VH/f/zvwJ/zX+u/9n11fYD+6/tJD2rS5btn4OAr7/Hs70x3N+nZ9Ty7V3s8W8XiQt1hTeoGmLPUEwzRsfkP9txaQWcOrebh+gxOVUm6f72gS8MHyIU6qO17HX/NBm2xdpAu2TLeo+5zvhBmyFJyf696Uwoi1jDnMIfere9HIju9+GxbJ9XFHwJ85b5Z1fj2heT6ZWlL/WxYvzqsoEIV5lvVGeyHeLq/V8NkE4IiLkELBs4lfnHEc0FJ3lbwU4nPWY7B07qQWT+MCc+E1qiHWs+LSCzh0TVWc9cLR7GYqj0po/bCJTr6W+wTqQPvqMX/6uP6xfGJ4CanXfMPMoHL/bDn1cUbqv87ZbXCUX6A7VuyJt4DXJDJKNtH8OsF8kBiPTHKyJrRoyFrCrfxQOlOyIpTUELmQNXD7LiCL4enFWS3LFOmfrzaTEYjYtk+rihUhcZPKD71DH0JyelSaw2tIgO4l1yOotHlIR9B4ZGpnQOeWR6MF9OgW3Y5vdEZe1GauLSdxSbBfSsAAP79te57YI6C4xvn8xyK+//ssks8ukwJLOcRpgXe5i5V/r6QHWAie01n/LJAFwa2uUdeT3uZTZX+g7X53EhP8j7k4VrDW6CfmYCVHsi9hSqpEkwKOy/+6ldHKq7w4UO6+eZv03WOiP//CwmmaWrfxEC1UfxGBkIr/AILB4tGH6NFOoLpWzVdrjdW8MrobzgCjo/alaFwkE73uSClwvpXnl47gtNtTocb+JOLGAbA57SSfU06mYIQnLLUsp6h/Hca5IDiPwcL2jh6lLPN+mJMAGp2yQuayPDBO6eKSx3pBerJmp4kq0Y6lsF5qyzjOLqXZlY5e1H4ncTJho0FiTnW478FJBeyf6b7iPhdcSYYoPQ3izrTL+aqSIIg3qp3IQ9FiPY7Y6n9WVWyuIB3hVEF5Eq2PaLqToYfrS7uudfNZEXchXzMxN1VmWr9KdMALWRA5XyZY30Z0dGQeAZaPue5hAAOpoUIkPD/dtWNH6YP6a2TUT6SvLhCL36MKXb4tuiQtfUaSEaJYY3Yw7OqowSHD5/yuOd//Wk8+X0BsSvhqDQ3Yw7QPV6Mki0iy/1y1rQq7vKWZDb4/utqm86leDrjLRUhCh3gfN8Xr5Nzgof34snivS3MW1Jd0/MvdQ4HYH7Iusz2M0zE06nRzt9sUuF8wQmRILHCNQrxCGVroT4/+mZKNAlChQzDAy2qXNOAvmmErXzV+0s3Ax0CdYIsmf4pkv67nC5PT+W63E6u8sQzn3Y5q2KeuaWXfJxPr4Q04nitfAxptlLXrR15VYLKsue4m43aiHJt51wo6gaQKfqlTWCp3LXP2plLv/B5IT6QwPUzVPYjXkjAIFEY6BO8zeVWd5//NAGUva+JuAsmNx//ERxXU18tMHLVxlMj/8aDnHxr/Pcz9/2LLf5nT8bQWogJ3mYUrnQpi1J8vwu2nFwfytDdcwBGgPJQANklAsl75cn8hzE3r1Xj/RgZctHcBoOEEopp/mix8YGlgXUzCrN1L7/vESZ7dQgELVd7btMn0tTKno08BSBBLfkdIkWOsDjK2zSlkj8Lm/RlnuXYtbCkWbXEegbCne7rbVuR0ea16YXsFGDxN7ggsgwGrrqMnbIqBLbWcqPUOBGR/PuEdWKpGOwtEJLIhWPIBAWPOXLSuRv5uIqv+b9CHp8DfppRREvk8h2OEdzOsFBAs+anMjDfCXgQOr1d8mTSQOrgDlxZUHkKaYjHHM15xLEcwrymjkCyZ2qejB+z+uH8KXEjM4jXT4t0rzop5X4E6gCGbUwHC8mNyEgbCilEaRRoptsbt+wGC2frT//cENa+YXXZL8qT5RLqteQLgsk5ImbQeGrWQjMUg/kDauhEXsxuC8vPT8pIl+6RL90iX7qRMFyE1VPdqhSU+r28Y6BM3LhUefdFlt27k02aQhvAuxpZW/1On2SsO4N4olIH90I+B/ovsaCKyxiDo8dvq2me3uMICtl6nVdsU9mdohvlksIo1pP3C4sBqr8vTQiebLvIkQWQy0wNSI0/pOM4nNHDLlL0sU6TClKT5mTwyZS+74FfepAtIvWhD+bp6xUTIq4xvFy5+01ZxoyuLGY3qKAhf3hbM3yVjs0O6DnZpuXHc72lzZc0JOCjal8HMMYmkwL0oy8MD1iU3toFeDxwRKN+4KlPRb3akbfsqKE1rwok9PAafO3mmB/Vl6shAjqPbjqRhwIvZ2Yscxt30ZXFKsvXEtkuXAIs9/6WhIYmXbl/QoD84//Iiblc5B1PUjP59ZLwvaxyZdLM+GsX0idduofN7Z5/gqOft07R0NsAu0zB4Z345vN3Q+1qWr/ayzchRFIB+SLpXtWkQw2qULaOzGlNIvCyU6ZxJ0Wq9Lk16g0jtVPBfQCtagr0Pg1I9L1b/LKlqbSajc2P2eAkySA+l7Jk2vxakpoYPR6iuAwJpsicIZWzQAAHSqaF3PP06cQ5KqaUnxhAV4Wm5X0LmT90psEYTwlfYOtCUHH8TvAPh+OUAXDY85Xyun7Hjnxp0dxGGf+dbYNuDJpjSA/VfqBU0lvrWa7lybNfNbtqIWjP/FSjf/i+Ox4hHzgXVFJlDX4I2hVMlPk73c1TaKsZm6uar1qUKtEib9InAy7/ta3euzfVIQoM5KLuaX8iAo9vMy59Lnt5A0f7e0uI9LYfMYas9ORnvK+dJH5q+JP6T9gzF5XrvfCuNJBk9eh/aDKvBv3+XoVG6sDXWqvH9PuHr/V652E6qR0H8FJKCxEKebagSxlG1OB/6xhWG5bmek6Fp771gZ3VgzXGxDIZHMotAP9cejXNCs0WjM50oO9h6s2de15EWwggAK6yfC2MDkEJLBXypJty0ckAwXbBnlNVvuANmcv7EDbD9xw9VXtPlo2lN6RUNa3BFOCWziRHYMflR246b3gdbMP0wXJ/QaTlUlsfEqWpdnm32FjdCnr4DoXG43551lkgAMbPPi4oSl01NyeXnrnSEFkjwANcmB6ohqZeoskv0U3rlGU90XD2Ib9Hx1tgiq2zc0KMLhS/cuLWd+FOQFWwCnK1XnwBT0TRvSTKlkRXpG7q8pmEam304h1w8IskiNSUvty3gjtnGPZwcSSAK4agBe0ZXs08AO8mNNoVUii3ft9oOGlQ3SfuIgJYxU9Z5R+305gohDveYd7ZMlXe4LitEF2d1yj3dClHWHGbTc6xoCTgK57nseNXivoutUgWOVJM3JVFvSa9FY+PAKdvSa9Fqca7GkfKsa8Jol81xx15S+h65TcIStG/HSU+zwwmYIwD3GCZ9dCIineSTFdjc7TsHTHxOCUGUjZ8FX5hmIfmsuzcFBBo5679lRkY3Xu3YnyA0QPxFoTp9jB8DF4HPbUxylgs7SeMEgAg5oD9KBvqq5cSap/dCPzshQ6b1TiO6YNBSJYFfrncIUxxSj9uniFvr99JE/tAf9yuajSZzlsq0vpYjO69A0ynCaEt4XnJ8MKdXE8Fv+OnS6uRiERHyAfFmhDEJYQ9qxL2DjW6V/BjIKsqUZVPJdB9+FMqmX+eF2MS7RvKrijXtHn9XVEeWErAAei0BUq7TCmM0q0/a5orQX72AOvkECiv34pbHKMoXOixzprpQEUZP1n6KnuDQ5R1zQHJ1erHAZEj0nMF+eM0NcIbcS672VYFl7qEFbWHpO1H8zpAFoJSwLjO15XgV3Vxjdx3IbBHo0wmBV3LeaY2Ml7CFEWScMEBbht+GJT2UgJXfERZocCNoZveJUFjbWG10qx5fnOFvmKqJHZ030d+xh1V5d5j495DOHotLo/aePtUvME9Uoy/I6Wu63oZFiLsaPXXLVCP3Lm6oMJArXWkBT0I78Djt0gpgdMfMHRe1dlgoPA4F0FrcWSlBaJtgPWeVyEAEjbf3aRxwqCXXoIbPxkqUActF9S8ZWQAA2ypxlehCFm1YUmH/0LbvO0t9RWCwOKIxKDJtHkyud7h1r7aKBxfoXJ7KuflgWarVluY/yaeQU9EHzMNq4FP6RDrS/m1cz6hnpT22YNpnWGnAGqdGlfo9pnAzjSNaw2mqNQONkcTxJH0aP5JbRYnPTahNCgn1gmS+2LR/8c19eQsiswBonCMdESOSA1O7UXneBoObw8g3ziGC0q2vw3tudWBdQiBO47jbsN5NfoBe9lkj9RdAcVGR7ULq2AvOvgad2w1epiP/qbRdEMChR2cFI5pVBcAAc2xCAAAAA==",v="/Computer-Science-Learn-Notes/assets/n1ql-query-workflow-86355ff5.webp",h="/Computer-Science-Learn-Notes/assets/n1ql-query-workflow-cover-idx-5bf4be18.webp",b="/Computer-Science-Learn-Notes/assets/deadlock-1-dfedc994.webp",y="/Computer-Science-Learn-Notes/assets/deadlock-2-2f3435d9.webp",f="/Computer-Science-Learn-Notes/assets/partition-sharding-mysql-1-3635fac0.webp",w="/Computer-Science-Learn-Notes/assets/mvcc-1-45990a5f.webp",x="/Computer-Science-Learn-Notes/assets/mvcc-2-f4ee7032.webp",C="/Computer-Science-Learn-Notes/assets/643-04527d4f.webp",S="/Computer-Science-Learn-Notes/assets/641-37b3fcd4.webp",_="/Computer-Science-Learn-Notes/assets/ks-unionIndex-leftmostMatch-2-f55b3a48.webp",T="/Computer-Science-Learn-Notes/assets/640-0f49ccfa.webp",L="/Computer-Science-Learn-Notes/assets/ipv4-head-1fc77695.webp",M="/Computer-Science-Learn-Notes/assets/ping-0-0763aade.webp",A="/Computer-Science-Learn-Notes/assets/ping-1-cd35a2f2.webp",P="/Computer-Science-Learn-Notes/assets/ping-2-9cfbc0aa.webp",R="/Computer-Science-Learn-Notes/assets/ping-3-ac827c99.webp",q="/Computer-Science-Learn-Notes/assets/ping-4-f9d12436.webp",E="/Computer-Science-Learn-Notes/assets/ping-5-75f835bf.webp",j="/Computer-Science-Learn-Notes/assets/virtual-addresses-1-c3cdeb6f.webp",I="/Computer-Science-Learn-Notes/assets/virtual-addresses-2-ec317541.webp",B="/Computer-Science-Learn-Notes/assets/virtual-addresses-3-4ee1db33.webp",O="/Computer-Science-Learn-Notes/assets/red-black-tree-fd56074f.webp",N="/Computer-Science-Learn-Notes/assets/sorted-sets-skiplist-40612da3.webp",H="/Computer-Science-Learn-Notes/assets/91-e69de54e.webp",D="/Computer-Science-Learn-Notes/assets/92-939d089f.webp",J={},F=n("h2",{id:"å‰è¨€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å‰è¨€","aria-hidden":"true"},"#"),s(" å‰è¨€")],-1),z=t(`<h2 id="ğŸ¦java-åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#ğŸ¦java-åŸºç¡€" aria-hidden="true">#</a> ğŸ¦Java åŸºç¡€</h2><h3 id="arraylistçº¿ç¨‹å®‰å…¨å—-æŠŠarraylistå˜æˆçº¿ç¨‹å®‰å…¨æœ‰å“ªäº›æ–¹æ³•-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#arraylistçº¿ç¨‹å®‰å…¨å—-æŠŠarraylistå˜æˆçº¿ç¨‹å®‰å…¨æœ‰å“ªäº›æ–¹æ³•-2023-ç¾å›¢" aria-hidden="true">#</a> ArrayListçº¿ç¨‹å®‰å…¨å—ï¼ŸæŠŠArrayListå˜æˆçº¿ç¨‹å®‰å…¨æœ‰å“ªäº›æ–¹æ³•ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>å°†ArrayListå˜æˆçº¿ç¨‹å®‰å…¨æœ‰å‡ ç§æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨<strong>Collections.synchronizedList()</strong> æ–¹æ³•å°†ArrayListè½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨çš„Listã€‚è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Listï¼Œä½¿ç”¨è¯¥Listæ—¶éœ€è¦åœ¨è®¿é—®å®ƒçš„æ–¹æ³•ä¸Šæ·»åŠ synchronizedå…³é”®å­—ï¼Œä»¥ä¿è¯å¤šçº¿ç¨‹è®¿é—®çš„å®‰å…¨æ€§ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> synchronizedList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>ä½¿ç”¨<strong>CopyOnWriteArrayList</strong>ç±»æ¥ä»£æ›¿ArrayListã€‚CopyOnWriteArrayListæ˜¯ä¸€ç§çº¿ç¨‹å®‰å…¨çš„Listå®ç°ï¼Œå®ƒé€šè¿‡åœ¨å†™æ“ä½œæ—¶å¤åˆ¶æ•´ä¸ªæ•°ç»„æ¥ä¿è¯çº¿ç¨‹å®‰å…¨æ€§ï¼Œåœ¨è¯»æ“ä½œæ—¶ä¸éœ€è¦åŠ é”ï¼Œå› æ­¤å¯ä»¥æé«˜è¯»å–æ•ˆç‡ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">CopyOnWriteArrayList</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CopyOnWriteArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CopyOnWriteArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ä½¿ç”¨<strong>Lockæ¥å£</strong>æ¥å®ç°åŒæ­¥ã€‚å¯ä»¥ä½¿ç”¨ReentrantLockç±»æ¥å®ç°å¯¹ArrayListçš„åŒæ­¥æ“ä½œï¼Œè¯¥ç±»æä¾›äº†ä¸synchronizedç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯å…·æœ‰æ›´é«˜çš„çµæ´»æ€§ã€‚æ¯”å¦‚å¯ä»¥ä½¿ç”¨tryLock()æ–¹æ³•æ¥å°è¯•è·å–é”ï¼Œé¿å…äº†çº¿ç¨‹çš„é•¿æ—¶é—´ç­‰å¾…ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Lock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹ ArrayList çš„æ“ä½œ</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>ä½¿ç”¨<strong>è¯»å†™é”</strong>æ¥å®ç°åŒæ­¥ã€‚å¯ä»¥ä½¿ç”¨ReentrantReadWriteLockç±»æ¥å®ç°å¯¹ArrayListçš„è¯»å†™æ“ä½œçš„åŒæ­¥ã€‚è¯¥ç±»æä¾›äº†è¯»é”å’Œå†™é”ä¸¤ç§é”ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è·å–è¯»é”ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–å†™é”ï¼Œåœ¨å†™æ“ä½œæ—¶éœ€è¦å…ˆè·å–å†™é”ï¼Œä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ReadWriteLock</span> rwLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
rwLock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹ ArrayList çš„è¯»æ“ä½œ</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    rwLock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
rwLock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹ ArrayList çš„å†™æ“ä½œ</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    rwLock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>ä½¿ç”¨ <strong>Vector</strong>: Vector æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œä¸ ArrayList éå¸¸ç›¸ä¼¼ï¼Œå¯ä»¥ä½œä¸ºæ›¿ä»£å“ã€‚ä½†æ˜¯ï¼Œç”±äº Vector çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</li></ol>`,12),U=n("p",null,"å‚è€ƒæ–‡çŒ®ï¼š",-1),G={href:"https://stackoverflow.com/questions/2444005/how-do-i-make-my-arraylist-thread-safe-another-approach-to-problem-in-java",target:"_blank",rel:"noopener noreferrer"},K={href:"https://stackoverflow.com/questions/18983362/how-to-prove-arraylist-is-not-thread-safe-with-a-test",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://stackoverflow.com/questions/300519/arraylist-vs-vectors-in-java-if-thread-safety-isnt-a-concern",target:"_blank",rel:"noopener noreferrer"},V=t('<h3 id="javaä¸­æœ‰å“ªäº›å¸¸ç”¨çš„å®¹å™¨å‘¢-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#javaä¸­æœ‰å“ªäº›å¸¸ç”¨çš„å®¹å™¨å‘¢-2023-é˜¿é‡Œ" aria-hidden="true">#</a> Javaä¸­æœ‰å“ªäº›å¸¸ç”¨çš„å®¹å™¨å‘¢ï¼Ÿï¼ˆ2023 é˜¿é‡Œï¼‰</h3><figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Listæ˜¯æœ‰åºçš„Collectionï¼Œä½¿ç”¨æ­¤æ¥å£èƒ½å¤Ÿç²¾ç¡®çš„æ§åˆ¶æ¯ä¸ªå…ƒç´ çš„æ’å…¥ä½ç½®ï¼Œç”¨æˆ·èƒ½æ ¹æ®ç´¢å¼•è®¿é—®Listä¸­å…ƒç´ ã€‚å¸¸ç”¨çš„å®ç°Listçš„ç±»æœ‰LinkedListï¼ŒArrayListï¼ŒVectorï¼ŒStackã€‚</p><ul><li>ArrayListæ˜¯å®¹é‡å¯å˜çš„éçº¿ç¨‹å®‰å…¨åˆ—è¡¨ï¼Œå…¶åº•å±‚ä½¿ç”¨æ•°ç»„å®ç°ã€‚å½“å‡ ä½•æ‰©å®¹æ—¶ï¼Œä¼šåˆ›å»ºæ›´å¤§çš„æ•°ç»„ï¼Œå¹¶æŠŠåŸæ•°ç»„å¤åˆ¶åˆ°æ–°æ•°ç»„ã€‚ArrayListæ”¯æŒå¯¹å…ƒç´ çš„å¿«é€Ÿéšæœºè®¿é—®ï¼Œä½†æ’å…¥ä¸åˆ é™¤é€Ÿåº¦å¾ˆæ…¢ã€‚</li><li>LinkedListæœ¬è´¨æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä¸ArrayListç›¸æ¯”ï¼Œï¼Œå…¶æ’å…¥å’Œåˆ é™¤é€Ÿåº¦æ›´å¿«ï¼Œä½†éšæœºè®¿é—®é€Ÿåº¦æ›´æ…¢ã€‚</li></ul><p>Setä¸å…è®¸å­˜åœ¨é‡å¤çš„å…ƒç´ ï¼Œä¸Listä¸åŒï¼Œsetä¸­çš„å…ƒç´ æ˜¯æ— åºçš„ã€‚å¸¸ç”¨çš„å®ç°æœ‰HashSetï¼ŒLinkedHashSetå’ŒTreeSetã€‚</p><ul><li>HashSeté€šè¿‡HashMapå®ç°ï¼ŒHashMapçš„Keyå³HashSetå­˜å‚¨çš„å…ƒç´ ï¼Œæ‰€æœ‰Keyéƒ½æ˜¯ç”¨ç›¸åŒçš„Valueï¼Œä¸€ä¸ªåä¸ºPRESENTçš„Objectç±»å‹å¸¸é‡ã€‚ä½¿ç”¨Keyä¿è¯å…ƒç´ å”¯ä¸€æ€§ï¼Œä½†ä¸ä¿è¯æœ‰åºæ€§ã€‚ç”±äºHashSetæ˜¯HashMapå®ç°çš„ï¼Œå› æ­¤çº¿ç¨‹ä¸å®‰å…¨ã€‚</li><li>LinkedHashSetç»§æ‰¿è‡ªHashSetï¼Œé€šè¿‡LinkedHashMapå®ç°ï¼Œä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤å…ƒç´ æ’å…¥é¡ºåºã€‚</li><li>TreeSeté€šè¿‡TreeMapå®ç°çš„ï¼Œæ·»åŠ å…ƒç´ åˆ°é›†åˆæ—¶æŒ‰ç…§æ¯”è¾ƒè§„åˆ™å°†å…¶æ’å…¥åˆé€‚çš„ä½ç½®ï¼Œä¿è¯æ’å…¥åçš„é›†åˆä»ç„¶æœ‰åºã€‚</li></ul><p>Map æ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œå­˜å‚¨é”®ã€å€¼å’Œä¹‹é—´çš„æ˜ å°„ã€‚Key æ— åºï¼Œå”¯ä¸€ï¼›value ä¸è¦æ±‚æœ‰åºï¼Œå…è®¸é‡å¤ã€‚Map æ²¡æœ‰ç»§æ‰¿äº Collection æ¥å£ï¼Œä» Map é›†åˆä¸­æ£€ç´¢å…ƒç´ æ—¶ï¼Œåªè¦ç»™å‡ºé”®å¯¹è±¡ï¼Œå°±ä¼šè¿”å›å¯¹åº”çš„å€¼å¯¹è±¡ã€‚ä¸»è¦å®ç°æœ‰TreeMapã€HashMapã€HashTableã€LinkedHashMapã€ConcurrentHashMap</p><ul><li>HashMapï¼šJDK1.8 ä¹‹å‰ HashMap ç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼ˆâ€œæ‹‰é“¾æ³•â€è§£å†³å†²çªï¼‰ï¼ŒJDK1.8 ä»¥ååœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´</li><li>LinkedHashMapï¼šLinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥å®ƒçš„åº•å±‚ä»ç„¶æ˜¯åŸºäºæ‹‰é“¾å¼æ•£åˆ—ç»“æ„å³ç”±æ•°ç»„å’Œé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»„æˆã€‚å¦å¤–ï¼ŒLinkedHashMap åœ¨ä¸Šé¢ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€æ¡åŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚åŒæ—¶é€šè¿‡å¯¹é“¾è¡¨è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå®ç°äº†è®¿é—®é¡ºåºç›¸å…³é€»è¾‘ã€‚</li><li>HashTableï¼šæ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„</li><li>TreeMapï¼šçº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰</li><li>ConcurrentHashMapï¼šNodeæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘å®ç°ï¼Œçº¿ç¨‹å®‰å…¨çš„ï¼ˆjdk1.8ä»¥å‰Segmenté”ï¼Œ1.8ä»¥åCASé”ï¼‰</li></ul><h3 id="hashmapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„-é‚£æœ‰ä»€ä¹ˆçº¿ç¨‹å®‰å…¨çš„åŠæ³•å—-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#hashmapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„-é‚£æœ‰ä»€ä¹ˆçº¿ç¨‹å®‰å…¨çš„åŠæ³•å—-2023-é˜¿é‡Œ" aria-hidden="true">#</a> HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œé‚£æœ‰ä»€ä¹ˆçº¿ç¨‹å®‰å…¨çš„åŠæ³•å—ï¼Ÿï¼ˆ2023 é˜¿é‡Œï¼‰</h3><p>HashMapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒHashtableå’ŒConcurrentHashMap éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>Hashtableå’ŒCollections.synchronizedMapè¿”å›çš„è£…é¥°å™¨ç±»SynchronizedMapéƒ½æ˜¯é€šè¿‡synchronizedå…³é”®å­—æ¥ä¿è¯å¤šçº¿ç¨‹æ“ä½œçš„çº¿ç¨‹å®‰å…¨ï¼Œä½†ä½¿ç”¨synchronizedä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯é”çš„ç²’åº¦å¤ªå¤§ï¼ŒåŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œå¯¼è‡´å¹¶å‘åº¦ä½ä¸‹ï¼Œå½±å“äº†æ“ä½œçš„æ€§èƒ½ã€‚</p><p>æ¯”å¦‚ï¼šHashtableçš„getå’Œputæ–¹æ³•ï¼Œéƒ½ä½¿ç”¨äº†å…³é”®å­—synchronizedä¿®é¥°ï¼Œè¿™å°±æ„å‘³ç€å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨putæ–¹æ³•æ·»åŠ å…ƒç´ æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹ä¸èƒ½å†åŒæ—¶æ‰§è¡Œputæ·»åŠ å…ƒç´ ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨getæ–¹æ³•è·å–æ•°æ®ã€‚</p><p>ä¸ºäº†è§£å†³synchronizedå¹¶å‘åº¦ä½çš„é—®é¢˜ï¼ŒConcurrentHashMapä½¿ç”¨äº†cas+synchronizedè§£å†³å…±äº«éå†æ“ä½œåŸå­æ€§é—®é¢˜ï¼Œä½¿ç”¨volatileä¿éšœå…±äº«å˜é‡çš„å†…å­˜å¯è§æ€§é—®é¢˜ã€‚</p><h3 id="arraylistçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸äº†è§£å—-å•çº¿ç¨‹æƒ…å†µä¸‹ä¼šå‘ç”Ÿå—-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#arraylistçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸äº†è§£å—-å•çº¿ç¨‹æƒ…å†µä¸‹ä¼šå‘ç”Ÿå—-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> ArrayListçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸äº†è§£å—ï¼Ÿå•çº¿ç¨‹æƒ…å†µä¸‹ä¼šå‘ç”Ÿå—ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>è¿™ç§å¼‚å¸¸é€šå¸¸å‘ç”Ÿåœ¨å¯¹ArrayListè¿›è¡Œéå†æ—¶ï¼ŒåŒæ—¶å°è¯•ä¿®æ”¹å®ƒçš„ç»“æ„ï¼ˆä¾‹å¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ã€‚è¿™ç§å¼‚å¸¸è¢«ç§°ä¸ºConcurrentModificationExceptionã€‚</p><p>åœ¨å•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œè¿™ç§å¼‚å¸¸ä¹Ÿå¯èƒ½å‘ç”Ÿã€‚å½“ä½ åœ¨ä½¿ç”¨è¿­ä»£å™¨éå†ArrayListé›†åˆæ—¶ï¼Œå¦‚æœä½¿ç”¨ArrayListçš„æ–¹æ³•ï¼ˆå¦‚add()æˆ–remove()ï¼‰ä¿®æ”¹äº†é›†åˆçš„ç»“æ„ï¼Œå°±å¯èƒ½è§¦å‘è¿™ä¸ªå¼‚å¸¸ã€‚è¿™æ˜¯å› ä¸ºArrayListçš„å†…éƒ¨å®ç°ä½¿ç”¨äº†ä¸€ä¸ªmodCountå˜é‡æ¥è·Ÿè¸ªç»“æ„ä¿®æ”¹çš„æ¬¡æ•°ã€‚å½“è¿­ä»£å™¨æ£€æµ‹åˆ°modCountå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚</p><p>ä¸ºäº†é¿å…è¿™ç§å¼‚å¸¸ï¼Œä½ å¯ä»¥åœ¨éå†ArrayListæ—¶é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨Iteratorçš„remove()æ–¹æ³•æ¥åˆ é™¤å…ƒç´ ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ArrayListçš„remove()æ–¹æ³•ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿modCountçš„å€¼åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¿æŒä¸€è‡´ã€‚</li><li>å¦‚æœéœ€è¦éå†è¿‡ç¨‹ä¸­æ·»åŠ å…ƒç´ ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ListIteratorï¼Œå®ƒæä¾›äº†add()æ–¹æ³•ï¼Œå…è®¸åœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹åˆ—è¡¨ç»“æ„ã€‚</li><li>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨Java 8çš„Stream APIï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´å®‰å…¨çš„æ–¹å¼æ¥å¤„ç†é›†åˆçš„å¹¶å‘ä¿®æ”¹é—®é¢˜ã€‚</li><li>å¦‚æœä½ ç¡®å®éœ€è¦åœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹ArrayListï¼Œå¯ä»¥è€ƒè™‘å…ˆå¤åˆ¶ä¸€ä¸ªæ–°çš„ArrayListï¼Œç„¶ååœ¨æ–°çš„ArrayListä¸Šè¿›è¡Œä¿®æ”¹ã€‚éå†å®Œæˆåï¼Œå†å°†æ–°çš„ArrayListèµ‹å€¼ç»™åŸæ¥çš„å¼•ç”¨ã€‚è¿™æ ·å¯ä»¥é¿å…åœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹åŸå§‹ArrayListçš„ç»“æ„ã€‚</li></ol>',18),X=n("p",null,"å‚è€ƒï¼š",-1),W={href:"https://stackoverflow.com/questions/602636/why-is-a-concurrentmodificationexception-thrown-and-how-to-debug-it",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://www.javatpoint.com/concurrentmodificationexception-in-java",target:"_blank",rel:"noopener noreferrer"},Z=t(`<h3 id="ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å¹¶å‘ä¿®æ”¹å¼‚å¸¸-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å¹¶å‘ä¿®æ”¹å¼‚å¸¸-2023-å¿«æ‰‹" aria-hidden="true">#</a> ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>åœ¨Javaé›†åˆï¼ˆå¦‚Listã€Setã€Mapï¼‰è¢«ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè¿­ä»£æ“ä½œæ—¶ï¼Œå¦‚æœå¦ä¸€ä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹äº†è¯¥é›†åˆçš„ç»“æ„ï¼ˆå¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´ConcurrentModificationExceptionçš„å‘ç”Ÿ</p><h3 id="é¢å‘è¿‡ç¨‹çš„æ–¹æ³•å­˜åœ¨å“ªäº›é—®é¢˜-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#é¢å‘è¿‡ç¨‹çš„æ–¹æ³•å­˜åœ¨å“ªäº›é—®é¢˜-2023-ç¾å›¢" aria-hidden="true">#</a> é¢å‘è¿‡ç¨‹çš„æ–¹æ³•å­˜åœ¨å“ªäº›é—®é¢˜ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ol><li>å¯ç»´æŠ¤æ€§è¾ƒå·®ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹ä¸»è¦ä¾èµ–äºå‡½æ•°å’Œè¿‡ç¨‹ï¼Œéšç€ä»£ç è§„æ¨¡çš„å¢å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»£ç ç»“æ„å¤æ‚ï¼Œä¸æ˜“ç»´æŠ¤ã€‚</li><li>å¯å¤ç”¨æ€§è¾ƒä½ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹éš¾ä»¥å®ç°æ¨¡å—åŒ–ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥å¤ç”¨ï¼Œè¿›ä¸€æ­¥å¢åŠ å¼€å‘æ—¶é—´å’Œæˆæœ¬ã€‚</li><li>æ‰©å±•æ€§ä¸è¶³ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹åœ¨ä»£ç é€»è¾‘å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¾€å¾€éœ€è¦å¯¹ç¨‹åºè¿›è¡Œå¤§é‡çš„ä¿®æ”¹ï¼Œè¿™æ ·çš„ä»£ç æ‰©å±•æ€§ä¸è¶³ã€‚</li><li>æŠ½è±¡èƒ½åŠ›æœ‰é™ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹ä¸»è¦å…³æ³¨è¿‡ç¨‹å’Œç®—æ³•ï¼Œè€Œä¸æ˜¯æ•°æ®ç»“æ„å’Œå¯¹è±¡ï¼Œè¿™ä½¿å¾—å®ƒåœ¨è¡¨è¾¾ç°å®ä¸–ç•Œçš„å¤æ‚é—®é¢˜æ—¶æŠ½è±¡èƒ½åŠ›æœ‰é™ã€‚</li><li>å°è£…æ€§å·®ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹æ²¡æœ‰æä¾›è‰¯å¥½çš„å°è£…æœºåˆ¶ï¼Œç¨‹åºä¸­çš„æ•°æ®å’Œå¤„ç†è¿‡ç¨‹å®¹æ˜“æš´éœ²ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®å®‰å…¨æ€§å’Œç¨‹åºç¨³å®šæ€§é—®é¢˜ã€‚</li><li>å¼ºè€¦åˆï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„æ–¹æ³•å¾€å¾€å¯¼è‡´ç¨‹åºç»„ä»¶ä¹‹é—´å­˜åœ¨å¼ºè€¦åˆï¼Œå½“ä¸€ä¸ªç»„ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯èƒ½ä¼šå½±å“å…¶ä»–ç»„ä»¶çš„æ­£å¸¸å·¥ä½œã€‚</li></ol><h3 id="é¢å‘è¿‡ç¨‹å¥½å¤„æ˜¯ä»€ä¹ˆ-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#é¢å‘è¿‡ç¨‹å¥½å¤„æ˜¯ä»€ä¹ˆ-2023-ç¾å›¢" aria-hidden="true">#</a> é¢å‘è¿‡ç¨‹å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ul><li>é¢å‘è¿‡ç¨‹ç¼–ç¨‹é‡‡ç”¨è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼ï¼Œå°†é—®é¢˜åˆ†è§£ä¸ºä¸€ä¸ªä¸ªå°çš„æ¨¡å—ï¼Œä¾¿äºç†è§£å’Œç¼–å†™ã€‚</li><li>æ¯ä¸ªæ¨¡å—ç›¸å¯¹ç‹¬ç«‹ï¼Œå‡ºç°é—®é¢˜æ—¶å¯ä»¥å•ç‹¬è°ƒè¯•ï¼Œé™ä½äº†è°ƒè¯•éš¾åº¦ã€‚</li><li>é¢å‘è¿‡ç¨‹ç¼–ç¨‹é€‚åˆè§£å†³ç®€å•ã€é€»è¾‘æ€§å¼ºçš„é—®é¢˜ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå­¦ä¹ æˆæœ¬è¾ƒä½ã€‚</li></ul><h3 id="object-æœ‰å“ªäº›æ–¹æ³•-2023ç™¾åº¦" tabindex="-1"><a class="header-anchor" href="#object-æœ‰å“ªäº›æ–¹æ³•-2023ç™¾åº¦" aria-hidden="true">#</a> object æœ‰å“ªäº›æ–¹æ³•ï¼ˆ2023ç™¾åº¦ï¼‰</h3><p>å½“é¢è¯•å®˜é—®åˆ° Java ä¸­ Object ç±»çš„æ–¹æ³•æ—¶ï¼Œå¦‚æœä½ æ— æ³•è®°ä½æ‰€æœ‰çš„æ–¹æ³•ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹å›ç­”ç­–ç•¥ï¼š</p><ul><li>å¼ºè°ƒ<strong>åŸºæœ¬æ–¹æ³•</strong>ï¼šé¦–å…ˆæåŠæœ€å¸¸ç”¨å’Œæœ€åŸºæœ¬çš„å‡ ä¸ªæ–¹æ³•ï¼Œå¦‚ equals()ã€hashCode()ã€toString()ï¼Œè¿™äº›æ–¹æ³•å‡ ä¹åœ¨æ¯ä¸ªå¯¹è±¡ä¸­éƒ½ä¼šç”¨åˆ°ã€‚ <ul><li>equals(Object obj): æ£€æŸ¥å½“å‰å¯¹è±¡æ˜¯å¦ä¸å¦ä¸€ä¸ªå¯¹è±¡ç›¸ç­‰ã€‚</li><li>hashCode(): è¿”å›å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚</li><li>toString(): è¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li></ul></li><li>æåŠ<strong>é‡è¦çš„æ–¹æ³•</strong>ï¼šæ¥ä¸‹æ¥å¯ä»¥æåŠä¸€äº›è¾ƒä¸ºé‡è¦çš„æ–¹æ³•ï¼Œå¦‚ getClass() ç”¨äºè·å–å¯¹è±¡çš„è¿è¡Œæ—¶ç±»ï¼Œclone() ç”¨äºåˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬ç­‰ã€‚ <ul><li>clone(): åˆ›å»ºå¹¶è¿”å›å½“å‰å¯¹è±¡çš„å‰¯æœ¬ã€‚</li><li>getClass(): è¿”å›å¯¹è±¡çš„è¿è¡Œæ—¶ç±»ã€‚</li></ul></li><li>è°ˆè®º<strong>å¯¹è±¡é—´çš„é€šä¿¡</strong>ï¼šå¼ºè°ƒ wait()ã€notify()ã€notifyAll() è¿™äº›ç”¨äºçº¿ç¨‹é—´é€šä¿¡çš„æ–¹æ³•ï¼Œè¯´æ˜å…¶åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„ä½œç”¨ã€‚ <ul><li>notify(): å”¤é†’åœ¨è¯¥å¯¹è±¡ä¸Šç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ã€‚</li><li>notifyAll(): å”¤é†’åœ¨è¯¥å¯¹è±¡ä¸Šç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚</li><li>wait(): å¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥å¯¹è±¡çš„ notify() æˆ– notifyAll() æ–¹æ³•ã€‚</li></ul></li><li>è°ˆè®º<strong>åƒåœ¾å›æ”¶</strong>ï¼šæåŠ finalize() æ–¹æ³•ï¼Œå®ƒåœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶ä¹‹å‰è°ƒç”¨ï¼Œå¯ä»¥ç”¨äºæ‰§è¡Œä¸€äº›æ¸…ç†æ“ä½œã€‚ <ul><li>finalize(): åœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ä¹‹å‰è°ƒç”¨ã€‚</li></ul></li></ul><h3 id="å¦‚æœè®©ä½ è‡ªå·±å®ç°ä¸€ä¸ª-map-ä½ ä¼šæ€ä¹ˆåš-2023ç™¾åº¦" tabindex="-1"><a class="header-anchor" href="#å¦‚æœè®©ä½ è‡ªå·±å®ç°ä¸€ä¸ª-map-ä½ ä¼šæ€ä¹ˆåš-2023ç™¾åº¦" aria-hidden="true">#</a> å¦‚æœè®©ä½ è‡ªå·±å®ç°ä¸€ä¸ª map ä½ ä¼šæ€ä¹ˆåšï¼ˆ2023ç™¾åº¦ï¼‰</h3><ol><li>å®šä¹‰Mapæ¥å£,åŒ…æ‹¬get,put,remove,size,isEmptyç­‰æ–¹æ³•</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MyMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>å®ç°HashMap,ä½¿ç”¨å“ˆå¸Œè¡¨å’Œé“¾è¡¨è§£å†³hashå†²çª</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyHashMap</span> <span class="token keyword">implements</span> <span class="token class-name">MyMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">LinkedList</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buckets<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">MyHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        buckets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> hash <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> hash <span class="token operator">%</span> buckets<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token class-name">LinkedList</span> list <span class="token operator">=</span> buckets<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span> node <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> node<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// çœç•¥å®ç°...</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// å…¶ä»–æ–¹æ³•çœç•¥...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>å®ç°TreeMap,ä½¿ç”¨çº¢é»‘æ ‘æ’åºå¹¶å­˜å‚¨key-value</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTreeMap</span> <span class="token keyword">implements</span> <span class="token class-name">MyMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span> root<span class="token punctuation">;</span>
    
    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> key<span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value<span class="token punctuation">;</span>
        <span class="token class-name">Node</span> left<span class="token punctuation">;</span>
        <span class="token class-name">Node</span> right<span class="token punctuation">;</span>
        <span class="token comment">// çœç•¥æ„é€ æ–¹æ³•...</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span> node <span class="token operator">=</span> root<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                node <span class="token operator">=</span> node<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                node <span class="token operator">=</span> node<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> node<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// çœç•¥å®ç°...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½œä¸º-map-çš„-key-éœ€è¦é‡å†™å“ªäº›æ–¹æ³•-2023-å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#ä½œä¸º-map-çš„-key-éœ€è¦é‡å†™å“ªäº›æ–¹æ³•-2023-å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> ä½œä¸º map çš„ key éœ€è¦é‡å†™å“ªäº›æ–¹æ³•ï¼Ÿï¼ˆ2023 å®Œç¾ä¸–ç•Œï¼‰</h3><p>é¦–å…ˆï¼Œå…ˆç†è§£é¢è¯•é¢˜çš„æ„æ€ï¼Œå¯ä»¥ç†è§£ä¸ºï¼š<strong>å¦‚æœä½ è¦ç”¨è‡ªå·±çš„ç±»çš„å¯¹è±¡ä½œä¸ºMapçš„é”®ï¼Œä½ éœ€è¦é‡å†™è¿™ä¸ªç±»çš„å“ªäº›æ–¹æ³•ï¼Ÿ</strong></p><ul><li>åœ¨Javaä¸­ï¼ŒMapæ¥å£æ˜¯åŸºäºé”®å€¼å¯¹çš„ï¼Œæ¯ä¸ªé”®éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚Javaä½¿ç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è®¡ç®—å“ˆå¸Œå€¼ï¼Œè¿™ä¸ªå“ˆå¸Œå€¼ç”¨äºç¡®å®šåœ¨Mapå†…éƒ¨å­˜å‚¨ç»“æ„ä¸­çš„ä½ç½®ã€‚åŒæ—¶ï¼ŒJavaä¹Ÿä½¿ç”¨é”®å¯¹è±¡çš„equals()æ–¹æ³•æ¥æ£€æŸ¥ä¸¤ä¸ªé”®æ˜¯å¦ç›¸ç­‰ã€‚</li><li>æ‰€ä»¥ï¼Œå¦‚æœä½ çš„ç±»çš„å¯¹è±¡è¦ä½œä¸ºMapçš„é”®ä½¿ç”¨ï¼Œé‚£ä¹ˆé€šå¸¸éœ€è¦ä½ é‡å†™è¿™ä¸ªç±»çš„hashCode()å’Œequals()æ–¹æ³•ï¼Œä»¥ç¡®ä¿å®ƒä»¬çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚</li><li>å¦‚æœä¸é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆé»˜è®¤çš„hashCode()æ–¹æ³•å°†è¿”å›æ¯ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œequals()æ–¹æ³•å°†ä»…æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºï¼Œæ¯”å¦‚ä¸¤ä¸ªå†…å®¹å®Œå…¨ç›¸åŒä½†å†…å­˜åœ°å€ä¸åŒçš„å¯¹è±¡è¢«è§†ä¸ºä¸åŒçš„é”®ã€‚</li></ul><p>åœ¨Javaä¸­ï¼Œä½œä¸ºMapçš„é”®ï¼ˆkeyï¼‰ï¼Œä½ é€šå¸¸éœ€è¦é‡å†™ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p><ol><li><strong>hashCode()</strong>ï¼šè¿™ä¸ªæ–¹æ³•è¿”å›å¯¹è±¡çš„å“ˆå¸Œç ï¼Œç”¨äºç¡®å®šåœ¨å“ˆå¸Œè¡¨ä¸­çš„å­˜å‚¨ä½ç½®ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡è¢«è®¤ä¸ºç›¸ç­‰ï¼ˆæ ¹æ®equals()æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„hashCode()æ–¹æ³•å¿…é¡»è¿”å›ç›¸åŒçš„å€¼ã€‚</li><li><strong>equals()</strong>ï¼šè¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚åœ¨Javaçš„Mapä¸­ï¼Œå½“æˆ‘ä»¬è°ƒç”¨get(key)æˆ–containsKey(key)æ–¹æ³•æ—¶ï¼ŒMapå®ç°ä¼šç”¨è¿™ä¸ªæ–¹æ³•æ¥æŸ¥æ‰¾ä¸ç»™å®šé”®åŒ¹é…çš„é”®ã€‚</li></ol><p>å½“ä½ åˆ›å»ºè‡ªå®šä¹‰çš„ç±»å¹¶æ‰“ç®—å°†å…¶å®ä¾‹ç”¨ä½œMapçš„é”®æ—¶ï¼Œé€šå¸¸éœ€è¦è¦†ç›–è¿™ä¸¤ä¸ªæ–¹æ³•ä»¥ç¡®ä¿å®ƒä»¬çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚å¦‚æœä¸è¿™æ ·åšï¼ŒMapå¯èƒ½æ— æ³•æ­£ç¡®åœ°æŸ¥æ‰¾ã€æ·»åŠ æˆ–åˆ é™¤é”®å€¼å¯¹ã€‚</p><h3 id="listçš„å®ç°ç±»-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#listçš„å®ç°ç±»-2023-é˜¿é‡Œ" aria-hidden="true">#</a> Listçš„å®ç°ç±»ï¼ˆ2023 é˜¿é‡Œï¼‰</h3><p>Javaä¸­çš„Listæ¥å£æœ‰å¤šä¸ªå®ç°ç±»ï¼Œå¸¸ç”¨çš„åŒ…æ‹¬ï¼š</p><ul><li>ArrayListï¼šåŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œä¼˜åŠ¿åœ¨äºæ”¯æŒéšæœºè®¿é—®å’Œå¿«é€Ÿæ’å…¥/åˆ é™¤å…ƒç´ ï¼Œé€‚ç”¨äºé¢‘ç¹è¯»å–å’Œéå†çš„åœºæ™¯ã€‚</li><li>LinkedListï¼šåŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œä¼˜åŠ¿åœ¨äºæ”¯æŒå¿«é€Ÿæ’å…¥/åˆ é™¤å…ƒç´ ï¼Œé€‚ç”¨äºé¢‘ç¹æ’å…¥/åˆ é™¤å…ƒç´ çš„åœºæ™¯ã€‚</li><li>Vectorï¼šå’ŒArrayListç±»ä¼¼ï¼Œä½†ç”±äºå…¶çº¿ç¨‹å®‰å…¨æ€§ï¼Œé€‚ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒã€‚</li><li>Stackï¼šåŸºäºVectorå®ç°ï¼Œæ˜¯ä¸€ä¸ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºéœ€è¦æŒ‰ç…§åè¿›å…ˆå‡ºé¡ºåºå¤„ç†å…ƒç´ çš„åœºæ™¯ã€‚</li></ul><h3 id="listå’Œsetçš„åŒºåˆ«-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#listå’Œsetçš„åŒºåˆ«-2023-é˜¿é‡Œ" aria-hidden="true">#</a> Listå’ŒSetçš„åŒºåˆ«ï¼ˆ2023 é˜¿é‡Œï¼‰</h3><ol><li>é¡ºåºï¼šListæ˜¯æœ‰åºçš„é›†åˆï¼Œå®ƒå¯ä»¥æŒ‰ç…§å…ƒç´ æ’å…¥çš„é¡ºåºè¿›è¡Œå­˜å‚¨å’Œè®¿é—®ã€‚è€ŒSetæ˜¯æ— åºçš„é›†åˆï¼Œå…ƒç´ åœ¨é›†åˆä¸­çš„ä½ç½®æ˜¯ä¸å›ºå®šçš„ã€‚</li><li>é‡å¤å…ƒç´ ï¼šListå…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ï¼Œå³å¯ä»¥æœ‰å¤šä¸ªç›¸åŒçš„å¯¹è±¡ã€‚Setä¸å…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ï¼Œå³æ¯ä¸ªå¯¹è±¡åœ¨é›†åˆä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</li><li>å®ç°ç±»ï¼šListçš„å¸¸ç”¨å®ç°ç±»æœ‰ArrayListå’ŒLinkedListï¼Œåˆ†åˆ«ä½¿ç”¨æ•°ç»„å’Œé“¾è¡¨ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ã€‚Setçš„å¸¸ç”¨å®ç°ç±»æœ‰HashSetã€LinkedHashSetå’ŒTreeSetï¼Œåˆ†åˆ«åŸºäºå“ˆå¸Œè¡¨ã€é“¾è¡¨+å“ˆå¸Œè¡¨å’Œçº¢é»‘æ ‘å®ç°ã€‚</li><li>æ€§èƒ½ï¼šç”±äºåº•å±‚æ•°æ®ç»“æ„çš„å·®å¼‚ï¼ŒListå’ŒSetåœ¨å¢åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾ç­‰æ“ä½œä¸Šçš„æ€§èƒ½è¡¨ç°æœ‰æ‰€ä¸åŒã€‚ä¾‹å¦‚ï¼ŒArrayListåœ¨éšæœºè®¿é—®å…ƒç´ æ—¶æ€§èƒ½è¾ƒå¥½ï¼Œè€ŒLinkedListåœ¨æ’å…¥å’Œåˆ é™¤å…ƒç´ æ—¶æ€§èƒ½è¾ƒå¥½ã€‚HashSetåœ¨æŸ¥æ‰¾ã€æ·»åŠ å’Œåˆ é™¤å…ƒç´ æ—¶æ€§èƒ½è¾ƒå¥½ï¼Œä½†ä¸ä¿è¯å…ƒç´ é¡ºåºã€‚TreeSetåœ¨ä¿æŒå…ƒç´ æ’åºçš„åŒæ—¶ï¼Œä¹Ÿèƒ½æä¾›è¾ƒå¥½çš„æŸ¥æ‰¾æ€§èƒ½ã€‚</li></ol><blockquote><p>è¡¥å……ï¼š Queue(å®ç°æ’é˜ŸåŠŸèƒ½çš„å«å·æœº): æŒ‰ç‰¹å®šçš„æ’é˜Ÿè§„åˆ™æ¥ç¡®å®šå…ˆåé¡ºåºï¼Œå­˜å‚¨çš„å…ƒç´ æ˜¯æœ‰åºçš„ã€å¯é‡å¤çš„ã€‚ Map(ç”¨ key æ¥æœç´¢çš„ä¸“å®¶): ä½¿ç”¨é”®å€¼å¯¹ï¼ˆkey-valueï¼‰å­˜å‚¨ï¼Œç±»ä¼¼äºæ•°å­¦ä¸Šçš„å‡½æ•° y=f(x)ï¼Œ&quot;x&quot; ä»£è¡¨ keyï¼Œ&quot;y&quot; ä»£è¡¨ valueï¼Œkey æ˜¯æ— åºçš„ã€ä¸å¯é‡å¤çš„ï¼Œvalue æ˜¯æ— åºçš„ã€å¯é‡å¤çš„ï¼Œæ¯ä¸ªé”®æœ€å¤šæ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚</p></blockquote><h3 id="é’ˆå¯¹ä½ è¯´çš„listå’Œsetçš„æ€§è´¨-é‚£ä½ ä¼šç”¨è¿™ä¸¤ç§ç»“æ„è§£å†³å“ªäº›é—®é¢˜-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#é’ˆå¯¹ä½ è¯´çš„listå’Œsetçš„æ€§è´¨-é‚£ä½ ä¼šç”¨è¿™ä¸¤ç§ç»“æ„è§£å†³å“ªäº›é—®é¢˜-2023-é˜¿é‡Œ" aria-hidden="true">#</a> é’ˆå¯¹ä½ è¯´çš„Listå’ŒSetçš„æ€§è´¨ï¼Œé‚£ä½ ä¼šç”¨è¿™ä¸¤ç§ç»“æ„è§£å†³å“ªäº›é—®é¢˜ï¼ˆ2023 é˜¿é‡Œï¼‰</h3><p>Listï¼ˆåˆ—è¡¨ï¼‰é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li>æœ‰åºæ•°æ®ï¼šåˆ—è¡¨ä¸­çš„å…ƒç´ æŒ‰ç…§æ’å…¥é¡ºåºå­˜å‚¨ï¼Œå› æ­¤é€‚ç”¨äºéœ€è¦ä¿æŒå…ƒç´ é¡ºåºçš„åœºæ™¯ã€‚</li><li>å…è®¸é‡å¤å…ƒç´ ï¼šåˆ—è¡¨å…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ï¼Œå› æ­¤é€‚ç”¨äºéœ€è¦ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°çš„åœºæ™¯ã€‚</li><li>éœ€è¦æ ¹æ®ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œï¼šåˆ—è¡¨å…è®¸é€šè¿‡ç´¢å¼•å€¼ç›´æ¥è®¿é—®ã€æ’å…¥æˆ–åˆ é™¤å…ƒç´ ï¼Œé€‚ç”¨äºéœ€è¦é¢‘ç¹è¿›è¡Œè¿™äº›æ“ä½œçš„åœºæ™¯ã€‚</li></ol><p>Setï¼ˆé›†åˆï¼‰é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li>å»é‡ï¼šé›†åˆä¸­çš„å…ƒç´ ä¸èƒ½é‡å¤ï¼Œå› æ­¤é€‚ç”¨äºå»é™¤æ•°æ®ä¸­é‡å¤å…ƒç´ çš„åœºæ™¯ã€‚</li><li>æ— éœ€å…³å¿ƒå…ƒç´ é¡ºåºï¼šé›†åˆä¸­çš„å…ƒç´ æ²¡æœ‰å›ºå®šé¡ºåºï¼Œé€‚ç”¨äºå…ƒç´ é¡ºåºæ— å…³ç´§è¦çš„åœºæ™¯ã€‚</li><li>å¿«é€Ÿåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼šé›†åˆæä¾›äº†é«˜æ•ˆç‡çš„æŸ¥æ‰¾ç®—æ³•ï¼Œé€‚ç”¨äºéœ€è¦å¿«é€Ÿåˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºæ•°æ®é›†ä¸­çš„åœºæ™¯ã€‚</li><li>é›†åˆè¿ç®—ï¼šé›†åˆæ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰è¿ç®—ï¼Œé€‚ç”¨äºéœ€è¦è¿›è¡Œè¿™äº›è¿ç®—çš„åœºæ™¯ã€‚</li></ol><h3 id="javaåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼-é™¤äº†newå’Œåå°„è¿˜æœ‰å…¶ä»–å—-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#javaåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼-é™¤äº†newå’Œåå°„è¿˜æœ‰å…¶ä»–å—-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> Javaåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Œé™¤äº†newå’Œåå°„è¿˜æœ‰å…¶ä»–å—ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li>ä½¿ç”¨ new å…³é”®å­—: è¿™æ˜¯åˆ›å»ºå¯¹è±¡æœ€å¸¸è§çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">MyClass</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä½¿ç”¨ Java åå°„ (Reflection) APIï¼Œä¸»è¦æ˜¯ java.lang.Class ç±»ä¸­çš„ newInstance() æ–¹æ³•æˆ–è€… java.lang.reflect.Constructor ç±»ä¸­çš„ newInstance() æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.MyClass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ä½¿ç”¨ java.lang.Cloneable æ¥å£å’Œ clone() æ–¹æ³•ï¼šè¿™ç§æ–¹æ³•ç”¨äºåˆ›å»ºç°æœ‰å¯¹è±¡çš„å¤åˆ¶å“ã€‚å¯¹è±¡éœ€è¦å®ç° Cloneable æ¥å£ï¼Œå¹¶é‡å†™ clone() æ–¹æ³•ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">MyClass</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> obj1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>ä½¿ç”¨ Java åºåˆ—åŒ– (java.io.Serializable æ¥å£) å’Œååºåˆ—åŒ–ï¼šè¿™ç§æ–¹æ³•é€šå¸¸ç”¨äºåˆ›å»ºç°æœ‰å¯¹è±¡çš„å¤åˆ¶å“ï¼Œä½†å®ƒä¸è°ƒç”¨æ„é€ å™¨ã€‚å¯¹è±¡éœ€è¦å®ç° Serializable æ¥å£ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ObjectOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;data.obj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ObjectInputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;data.obj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>ä½¿ç”¨ java.lang.ClassLoader æˆ–è€… java.lang.Class çš„ defineClass() æ–¹æ³•ï¼šè¿™ç§æ–¹æ³•ç”¨äºä»ä¸€ä¸ªç±»çš„äºŒè¿›åˆ¶åç§°æˆ–è€…å­—èŠ‚ç åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å’Œå¯¹è±¡ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.MyClass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Java9ä»¥åæ¨èçš„å†™æ³•æ˜¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span>clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="hashmap-ä¸ºä»€ä¹ˆè¦è½¬æˆçº¢é»‘æ ‘-ä¸æ˜¯ä¸€å¼€å§‹å°±ç”¨-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#hashmap-ä¸ºä»€ä¹ˆè¦è½¬æˆçº¢é»‘æ ‘-ä¸æ˜¯ä¸€å¼€å§‹å°±ç”¨-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> hashmapï¼Œä¸ºä»€ä¹ˆè¦è½¬æˆçº¢é»‘æ ‘ï¼Œä¸æ˜¯ä¸€å¼€å§‹å°±ç”¨ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>åœ¨Javaä¸­ï¼ŒHashMapä½¿ç”¨äº†é“¾è¡¨å’Œçº¢é»‘æ ‘ä¸¤ç§æ•°æ®ç»“æ„æ¥å­˜å‚¨æ•°æ®ã€‚åŸå› æ˜¯ï¼Œè¿™ä¸¤ç§æ•°æ®ç»“æ„åœ¨ä¸åŒçš„æƒ…å†µä¸‹å„æœ‰ä¼˜ç¼ºç‚¹ã€‚è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹HashMapåœ¨ä½•æ—¶ä»¥åŠä¸ºä»€ä¹ˆä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</p><p><strong>é“¾è¡¨</strong></p><ul><li>ä¼˜ç‚¹ï¼šç›¸æ¯”äºçº¢é»‘æ ‘ï¼Œé“¾è¡¨ç»“æ„æ›´ç®€å•ï¼Œå ç”¨ç©ºé—´è¾ƒå°‘ï¼Œä¸”åœ¨å“ˆå¸Œå†²çªè¾ƒå°‘çš„æƒ…å†µä¸‹å…·æœ‰è‰¯å¥½çš„æ€§èƒ½ã€‚</li><li>ç¼ºç‚¹ï¼šé“¾è¡¨åœ¨å“ˆå¸Œå†²çªè¾ƒå¤šçš„æƒ…å†µä¸‹ï¼ˆå³é“¾è¡¨é•¿åº¦è¾ƒé•¿æ—¶ï¼‰ï¼ŒæŸ¥æ‰¾æ€§èƒ½ä¼šæ˜æ˜¾ä¸‹é™ï¼Œå› ä¸ºéœ€è¦éå†é“¾è¡¨ã€‚</li></ul><p><strong>çº¢é»‘æ ‘</strong></p><ul><li>ä¼˜ç‚¹ï¼šçº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒèƒ½ä¿è¯æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œåœ¨å“ˆå¸Œå†²çªè¾ƒå¤šçš„æƒ…å†µä¸‹æ€§èƒ½æ›´ä¼˜ã€‚</li><li>ç¼ºç‚¹ï¼šç›¸æ¯”äºé“¾è¡¨ï¼Œçº¢é»‘æ ‘ç»“æ„æ›´å¤æ‚ï¼Œå ç”¨ç©ºé—´è¾ƒå¤šï¼Œä¸”åœ¨å“ˆå¸Œå†²çªè¾ƒå°‘çš„æƒ…å†µä¸‹æ€§èƒ½ä¼˜åŠ¿ä¸æ˜æ˜¾ã€‚</li></ul><p>ä¸ºäº†åœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šè¾¾åˆ°ä¸€ä¸ªå¹³è¡¡ï¼ŒJavaçš„HashMapé‡‡ç”¨äº†ä¸€ç§æŠ˜ä¸­çš„ç­–ç•¥ã€‚å®ƒåœ¨åˆå§‹åŒ–æ—¶ä½¿ç”¨é“¾è¡¨ç»“æ„æ¥å­˜å‚¨æ•°æ®ï¼Œä½†å½“é“¾è¡¨é•¿åº¦è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ç»“æ„ã€‚è¿™æ ·ï¼Œå½“å“ˆå¸Œå†²çªè¾ƒå°‘æ—¶ï¼ŒHashMapå¯ä»¥åˆ©ç”¨é“¾è¡¨çš„ç©ºé—´ä¼˜åŠ¿ï¼›è€Œåœ¨å“ˆå¸Œå†²çªè¾ƒå¤šæ—¶ï¼ŒHashMapåˆ™èƒ½ä»çº¢é»‘æ ‘çš„æ—¶é—´æ€§èƒ½ä¸Šå—ç›Šã€‚</p><p>å› æ­¤ï¼Œåœ¨Javaä¸­ï¼ŒHashMapä¸æ˜¯ä¸€å¼€å§‹å°±ä½¿ç”¨çº¢é»‘æ ‘ï¼Œè€Œæ˜¯æ ¹æ®å®é™…æƒ…å†µåŠ¨æ€åœ°é€‰æ‹©å¹¶è½¬æ¢æ•°æ®ç»“æ„ï¼Œä»¥è¾¾åˆ°æœ€ä½³æ€§èƒ½ã€‚</p><h3 id="long-çš„é•¿åº¦å’ŒèŒƒå›´-ä¸ºä»€ä¹ˆè¦å‡-1-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#long-çš„é•¿åº¦å’ŒèŒƒå›´-ä¸ºä»€ä¹ˆè¦å‡-1-2023-å¿«æ‰‹" aria-hidden="true">#</a> Long çš„é•¿åº¦å’ŒèŒƒå›´ï¼Œä¸ºä»€ä¹ˆè¦å‡ 1 ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>å…ˆæ¥å¤ä¹ ä¸€ä¸‹ Java ä¸­çš„ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼š</p><ul><li><p>6 ç§æ•°å­—ç±»å‹ï¼š</p></li><li><ul><li>4 ç§æ•´æ•°å‹ï¼š<code>byte</code>ã€<code>short</code>ã€<code>int</code>ã€<code>long</code></li><li>2 ç§æµ®ç‚¹å‹ï¼š<code>float</code>ã€<code>double</code></li></ul></li><li><p>1 ç§å­—ç¬¦ç±»å‹ï¼š<code>char</code></p></li><li><p>1 ç§å¸ƒå°”å‹ï¼š<code>boolean</code>ã€‚</p></li></ul><p>è¿™ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ä»¥åŠæ‰€å ç©ºé—´çš„å¤§å°å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left;">åŸºæœ¬ç±»å‹</th><th style="text-align:left;">ä½æ•°</th><th style="text-align:left;">å­—èŠ‚</th><th style="text-align:left;">é»˜è®¤å€¼</th><th style="text-align:left;">å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td style="text-align:left;"><code>byte</code></td><td style="text-align:left;">8</td><td style="text-align:left;">1</td><td style="text-align:left;">0</td><td style="text-align:left;">-128 ~ 127</td></tr><tr><td style="text-align:left;"><code>short</code></td><td style="text-align:left;">16</td><td style="text-align:left;">2</td><td style="text-align:left;">0</td><td style="text-align:left;">-32768ï¼ˆ-2^15ï¼‰ ~ 32767ï¼ˆ2^15 - 1ï¼‰</td></tr><tr><td style="text-align:left;"><code>int</code></td><td style="text-align:left;">32</td><td style="text-align:left;">4</td><td style="text-align:left;">0</td><td style="text-align:left;">-2147483648 ~ 2147483647</td></tr><tr><td style="text-align:left;"><code>long</code></td><td style="text-align:left;">64</td><td style="text-align:left;">8</td><td style="text-align:left;">0L</td><td style="text-align:left;">-9223372036854775808ï¼ˆ-2^63ï¼‰ ~ 9223372036854775807ï¼ˆ2^63 -1ï¼‰</td></tr><tr><td style="text-align:left;"><code>char</code></td><td style="text-align:left;">16</td><td style="text-align:left;">2</td><td style="text-align:left;">&#39;u0000&#39;</td><td style="text-align:left;">0 ~ 65535ï¼ˆ2^16 - 1ï¼‰</td></tr><tr><td style="text-align:left;"><code>float</code></td><td style="text-align:left;">32</td><td style="text-align:left;">4</td><td style="text-align:left;">0f</td><td style="text-align:left;">1.4E-45 ~ 3.4028235E38</td></tr><tr><td style="text-align:left;"><code>double</code></td><td style="text-align:left;">64</td><td style="text-align:left;">8</td><td style="text-align:left;">0d</td><td style="text-align:left;">4.9E-324 ~ 1.7976931348623157E308</td></tr><tr><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;">1</td><td style="text-align:left;"></td><td style="text-align:left;">false</td><td style="text-align:left;">trueã€false</td></tr></tbody></table><p>å¯ä»¥çœ‹åˆ°ï¼Œåƒ <code>byte</code>ã€<code>short</code>ã€<code>int</code>ã€<code>long</code>èƒ½è¡¨ç¤ºçš„æœ€å¤§æ­£æ•°éƒ½å‡ 1 äº†ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºæ³•ä¸­ï¼Œæœ€é«˜ä½æ˜¯ç”¨æ¥è¡¨ç¤ºç¬¦å·çš„ï¼ˆ0 è¡¨ç¤ºæ­£æ•°ï¼Œ1 è¡¨ç¤ºè´Ÿæ•°ï¼‰ï¼Œå…¶ä½™ä½è¡¨ç¤ºæ•°å€¼éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬è¦è¡¨ç¤ºæœ€å¤§çš„æ­£æ•°ï¼Œæˆ‘ä»¬éœ€è¦æŠŠé™¤äº†æœ€é«˜ä½ä¹‹å¤–çš„æ‰€æœ‰ä½éƒ½è®¾ä¸º 1ã€‚å¦‚æœæˆ‘ä»¬å†åŠ  1ï¼Œå°±ä¼šå¯¼è‡´æº¢å‡ºï¼Œå˜æˆä¸€ä¸ªè´Ÿæ•°ã€‚</p><p>å¯¹äº <code>boolean</code>ï¼Œå®˜æ–¹æ–‡æ¡£æœªæ˜ç¡®å®šä¹‰ï¼Œå®ƒä¾èµ–äº JVM å‚å•†çš„å…·ä½“å®ç°ã€‚é€»è¾‘ä¸Šç†è§£æ˜¯å ç”¨ 1 ä½ï¼Œä½†æ˜¯å®é™…ä¸­ä¼šè€ƒè™‘è®¡ç®—æœºé«˜æ•ˆå­˜å‚¨å› ç´ ã€‚</p><p>å¦å¤–ï¼ŒJava çš„æ¯ç§åŸºæœ¬ç±»å‹æ‰€å å­˜å‚¨ç©ºé—´çš„å¤§å°ä¸ä¼šåƒå…¶ä»–å¤§å¤šæ•°è¯­è¨€é‚£æ ·éšæœºå™¨ç¡¬ä»¶æ¶æ„çš„å˜åŒ–è€Œå˜åŒ–ã€‚è¿™ç§æ‰€å å­˜å‚¨ç©ºé—´å¤§å°çš„ä¸å˜æ€§æ˜¯ Java ç¨‹åºæ¯”ç”¨å…¶ä»–å¤§å¤šæ•°è¯­è¨€ç¼–å†™çš„ç¨‹åºæ›´å…·å¯ç§»æ¤æ€§çš„åŸå› ä¹‹ä¸€ï¼ˆã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹2.2 èŠ‚æœ‰æåˆ°ï¼‰ã€‚</p><h3 id="java-å¼‚å¸¸çš„å±‚æ¬¡ç»“æ„-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#java-å¼‚å¸¸çš„å±‚æ¬¡ç»“æ„-2023-å¿«æ‰‹" aria-hidden="true">#</a> JAVA å¼‚å¸¸çš„å±‚æ¬¡ç»“æ„ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>Java å¼‚å¸¸ç±»å±‚æ¬¡ç»“æ„å›¾æ¦‚è§ˆï¼š</p><figure><img src="`+k+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨ Java ä¸­ï¼Œæ‰€æœ‰çš„å¼‚å¸¸éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç¥–å…ˆ <code>java.lang</code> åŒ…ä¸­çš„ <code>Throwable</code>ç±»ã€‚<code>Throwable</code> ç±»æœ‰ä¸¤ä¸ªé‡è¦çš„å­ç±»:</p><ul><li><strong><code>Exception</code></strong> :ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ <code>catch</code> æ¥è¿›è¡Œæ•è·ã€‚<code>Exception</code> åˆå¯ä»¥åˆ†ä¸º Checked Exception (å—æ£€æŸ¥å¼‚å¸¸ï¼Œå¿…é¡»å¤„ç†) å’Œ Unchecked Exception (ä¸å—æ£€æŸ¥å¼‚å¸¸ï¼Œå¯ä»¥ä¸å¤„ç†)ã€‚</li><li><strong><code>Error</code></strong>ï¼š<code>Error</code> å±äºç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ ï¼Œæˆ‘ä»¬æ²¡åŠæ³•é€šè¿‡ <code>catch</code> æ¥è¿›è¡Œæ•è·ä¸å»ºè®®é€šè¿‡<code>catch</code>æ•è· ã€‚ä¾‹å¦‚ Java è™šæ‹Ÿæœºè¿è¡Œé”™è¯¯ï¼ˆ<code>Virtual MachineError</code>ï¼‰ã€è™šæ‹Ÿæœºå†…å­˜ä¸å¤Ÿé”™è¯¯(<code>OutOfMemoryError</code>)ã€ç±»å®šä¹‰é”™è¯¯ï¼ˆ<code>NoClassDefFoundError</code>ï¼‰ç­‰ ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒJava è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚</li></ul><h3 id="java-çš„é›†åˆç±»æœ‰äº†è§£ä¹ˆ-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#java-çš„é›†åˆç±»æœ‰äº†è§£ä¹ˆ-2023-å¿«æ‰‹" aria-hidden="true">#</a> JAVA çš„é›†åˆç±»æœ‰äº†è§£ä¹ˆï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>Java é›†åˆï¼Œ ä¹Ÿå«ä½œå®¹å™¨ï¼Œä¸»è¦æ˜¯ç”±ä¸¤å¤§æ¥å£æ´¾ç”Ÿè€Œæ¥ï¼šä¸€ä¸ªæ˜¯ <code>Collection</code>æ¥å£ï¼Œä¸»è¦ç”¨äºå­˜æ”¾å•ä¸€å…ƒç´ ï¼›å¦ä¸€ä¸ªæ˜¯ <code>Map</code> æ¥å£ï¼Œä¸»è¦ç”¨äºå­˜æ”¾é”®å€¼å¯¹ã€‚å¯¹äº<code>Collection</code> æ¥å£ï¼Œä¸‹é¢åˆæœ‰ä¸‰ä¸ªä¸»è¦çš„å­æ¥å£ï¼š<code>List</code>ã€<code>Set</code> å’Œ <code>Queue</code>ã€‚</p><p>Java é›†åˆæ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure><img src="'+m+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ³¨ï¼šå›¾ä¸­åªåˆ—ä¸¾äº†ä¸»è¦çš„ç»§æ‰¿æ´¾ç”Ÿå…³ç³»ï¼Œå¹¶æ²¡æœ‰åˆ—ä¸¾æ‰€æœ‰å…³ç³»ã€‚æ¯”æ–¹çœç•¥äº†<code>AbstractList</code>, <code>NavigableSet</code>ç­‰æŠ½è±¡ç±»ä»¥åŠå…¶ä»–çš„ä¸€äº›è¾…åŠ©ç±»ï¼Œå¦‚æƒ³æ·±å…¥äº†è§£ï¼Œå¯è‡ªè¡ŒæŸ¥çœ‹æºç ã€‚</p><ul><li><code>List</code>(å¯¹ä»˜é¡ºåºçš„å¥½å¸®æ‰‹): å­˜å‚¨çš„å…ƒç´ æ˜¯æœ‰åºçš„ã€å¯é‡å¤çš„ã€‚</li><li><code>Set</code>(æ³¨é‡ç‹¬ä¸€æ— äºŒçš„æ€§è´¨): å­˜å‚¨çš„å…ƒç´ ä¸å¯é‡å¤çš„ã€‚</li><li><code>Queue</code>(å®ç°æ’é˜ŸåŠŸèƒ½çš„å«å·æœº): æŒ‰ç‰¹å®šçš„æ’é˜Ÿè§„åˆ™æ¥ç¡®å®šå…ˆåé¡ºåºï¼Œå­˜å‚¨çš„å…ƒç´ æ˜¯æœ‰åºçš„ã€å¯é‡å¤çš„ã€‚</li><li><code>Map</code>(ç”¨ key æ¥æœç´¢çš„ä¸“å®¶): ä½¿ç”¨é”®å€¼å¯¹ï¼ˆkey-valueï¼‰å­˜å‚¨ï¼Œç±»ä¼¼äºæ•°å­¦ä¸Šçš„å‡½æ•° y=f(x)ï¼Œ&quot;x&quot; ä»£è¡¨ keyï¼Œ&quot;y&quot; ä»£è¡¨ valueï¼Œkey æ˜¯æ— åºçš„ã€ä¸å¯é‡å¤çš„ï¼Œvalue æ˜¯æ— åºçš„ã€å¯é‡å¤çš„ï¼Œæ¯ä¸ªé”®æœ€å¤šæ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚</li></ul><h3 id="try-return-a-fianlly-return-b-è¿™æ¡è¯­å¥è¿”å›å•¥-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#try-return-a-fianlly-return-b-è¿™æ¡è¯­å¥è¿”å›å•¥-2023-å¿«æ‰‹" aria-hidden="true">#</a> try{return â€œaâ€} fianlly{return â€œbâ€}è¿™æ¡è¯­å¥è¿”å›å•¥ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>finallyå—ä¸­çš„returnè¯­å¥ä¼šè¦†ç›–tryå—ä¸­çš„returnè¿”å›ï¼Œå› æ­¤ï¼Œè¯¥è¯­å¥å°†è¿”å›&quot;b&quot;ã€‚</p><h3 id="string-s-new-string-abc-æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ†åˆ«å¯¹åº”å“ªäº›å†…å­˜åŒºåŸŸ-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#string-s-new-string-abc-æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ†åˆ«å¯¹åº”å“ªäº›å†…å­˜åŒºåŸŸ-2023-å¿«æ‰‹" aria-hidden="true">#</a> String s = new Stringï¼ˆâ€œabcâ€ï¼‰æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ†åˆ«å¯¹åº”å“ªäº›å†…å­˜åŒºåŸŸï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªä»£ç ä¸­æœ‰ä¸€ä¸ªnewå…³é”®å­—ï¼Œæˆ‘ä»¬çŸ¥é“<strong>new</strong>æŒ‡ä»¤æ˜¯åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹å¯¹è±¡å¹¶å®ŒæˆåŠ è½½åˆå§‹åŒ–çš„ï¼Œå› æ­¤è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡æ˜¯åœ¨<strong>è¿è¡ŒæœŸ</strong>æ‰èƒ½ç¡®å®šçš„ï¼Œåˆ›å»ºçš„å­—ç¬¦ä¸²å¯¹è±¡æ˜¯åœ¨<strong>å †å†…å­˜ä¸Š</strong>ã€‚</p><p>å…¶æ¬¡ï¼Œåœ¨Stringçš„æ„é€ æ–¹æ³•ä¸­ä¼ é€’äº†ä¸€ä¸ªå­—ç¬¦ä¸²abcï¼Œç”±äºè¿™é‡Œçš„abcæ˜¯è¢«finalä¿®é¥°çš„å±æ€§ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ã€‚åœ¨é¦–æ¬¡æ„å»ºè¿™ä¸ªå¯¹è±¡æ—¶ï¼ŒJVMæ‹¿å­—é¢é‡&quot;abc&quot;å»å­—ç¬¦ä¸²å¸¸é‡æ± è¯•å›¾è·å–å…¶å¯¹åº”Stringå¯¹è±¡çš„å¼•ç”¨ã€‚äºæ˜¯åœ¨å †ä¸­åˆ›å»ºäº†ä¸€ä¸ª&quot;abc&quot;çš„Stringå¯¹è±¡ï¼Œå¹¶å°†å…¶å¼•ç”¨ä¿å­˜åˆ°å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œç„¶åè¿”å›ï¼›</p><p>æ‰€ä»¥ï¼Œ<strong>å¦‚æœabcè¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸¤ä¸ªå¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯abcè¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œä»¥åŠnew Stringè¿™ä¸ªå®ä¾‹å¯¹è±¡ã€‚å¦‚æœabcè¿™å­—ç¬¦ä¸²å¸¸é‡å­˜åœ¨ï¼Œåˆ™åªä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡</strong>ã€‚</p><h3 id="defaultä¿®é¥°ç¬¦å’Œprotetedä¿®é¥°ç¬¦åŒºåˆ«-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#defaultä¿®é¥°ç¬¦å’Œprotetedä¿®é¥°ç¬¦åŒºåˆ«-2023-ç”¨å‹" aria-hidden="true">#</a> Defaultä¿®é¥°ç¬¦å’ŒProtetedä¿®é¥°ç¬¦åŒºåˆ«ï¼ˆ2023 ç”¨å‹ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œè®¿é—®ä¿®é¥°ç¬¦å†³å®šäº†ç±»åŠå…¶æˆå‘˜çš„å¯è§æ€§ã€‚Javaæä¾›äº†å››ç§è®¿é—®çº§åˆ«ï¼Œä½†åœ¨æ­¤æˆ‘ä»¬å°†ä¸“æ³¨äºâ€œé»˜è®¤â€ï¼ˆæ— ä¿®é¥°ç¬¦ï¼‰å’Œâ€œprotectedâ€ä¿®é¥°ç¬¦ã€‚</p><ol><li><p><strong>é»˜è®¤è®¿é—®ä¿®é¥°ç¬¦ï¼ˆæ²¡æœ‰ä¿®é¥°ç¬¦ï¼‰</strong>:</p><ul><li>å½“ä¸€ä¸ªç±»æˆ–å…¶æˆå‘˜æ²¡æœ‰ä½¿ç”¨ä»»ä½•è®¿é—®ä¿®é¥°ç¬¦ï¼Œå®ƒä½¿ç”¨é»˜è®¤è®¿é—®çº§åˆ«ã€‚</li><li>è¿™è¢«ç§°ä¸ºâ€œåŒ…ç§æœ‰â€æˆ–â€œåŒ…é»˜è®¤â€ã€‚</li><li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»æˆ–æˆå‘˜åªèƒ½è¢«å…¶æ‰€åœ¨åŒ…å†…çš„å…¶ä»–ç±»è®¿é—®ã€‚</li><li>å®ƒä»¬ä¸èƒ½è¢«åŒ…å¤–çš„ä»»ä½•ç±»è®¿é—®ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// åœ¨somepackageåŒ…ä¸­</span>
<span class="token keyword">class</span> <span class="token class-name">DefaultModifierClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">defaultMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;This is a default method&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ç±»<code>DefaultModifierClass</code>åŠå…¶æ–¹æ³•<code>defaultMethod</code>åªèƒ½åœ¨<code>somepackage</code>åŒ…ä¸­è¢«è®¿é—®ã€‚</p></li><li><p><strong>protected è®¿é—®ä¿®é¥°ç¬¦</strong>:</p><ul><li>å½“ç±»æˆ–å…¶æˆå‘˜ä½¿ç”¨protectedä¿®é¥°ç¬¦æ—¶ï¼Œå®ƒå¯ä»¥è¢«å…¶æ‰€åœ¨åŒ…ä¸­çš„æ‰€æœ‰ç±»è®¿é—®ã€‚</li><li>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè¿˜å¯ä»¥è¢«å¤–éƒ¨åŒ…ä¸­çš„å­ç±»è®¿é—®ï¼Œä½†åªèƒ½é€šè¿‡å­ç±»å¯¹è±¡æ¥è®¿é—®ã€‚</li><li>ä¸èƒ½ç›´æ¥è¢«å¤–éƒ¨åŒ…ä¸­çš„å…¶ä»–ç±»è®¿é—®ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// åœ¨somepackageåŒ…ä¸­</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProtectedModifierClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">protectedMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;This is a protected method&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ProtectedModifierClass</code>ä¸­çš„<code>protectedMethod</code>æ–¹æ³•å¯ä»¥åœ¨<code>somepackage</code>ä¸­çš„ä»»ä½•åœ°æ–¹è¢«è®¿é—®ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åœ¨å…¶ä»–åŒ…ä¸­çš„<code>ProtectedModifierClass</code>çš„å­ç±»ä¸­è¢«è®¿é—®ã€‚</p></li></ol><h3 id="è‡ªå®šä¹‰æ’åºæ€ä¹ˆå®ç°-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ’åºæ€ä¹ˆå®ç°-2023-ç”¨å‹" aria-hidden="true">#</a> è‡ªå®šä¹‰æ’åºæ€ä¹ˆå®ç°ï¼Ÿï¼ˆ2023 ç”¨å‹ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œå®ç°è‡ªå®šä¹‰æ’åºå¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p><ol><li>å®ç°Comparableæ¥å£ï¼šè¯¥æ¥å£å®šä¹‰äº†ä¸€ä¸ªcompareToæ–¹æ³•ï¼Œç”¨äºå®šä¹‰å¯¹è±¡ä¹‹é—´çš„æ¯”è¾ƒè§„åˆ™ã€‚è‡ªå®šä¹‰çš„ç±»éœ€è¦å®ç°Comparableæ¥å£ï¼Œå¹¶åœ¨compareToæ–¹æ³•ä¸­å®ç°æ¯”è¾ƒé€»è¾‘ã€‚ç„¶åå¯ä»¥ä½¿ç”¨Arrays.sort()æˆ–Collections.sort()è¿›è¡Œæ’åºã€‚</li><li>å®ç°Comparatoræ¥å£ï¼šComparatoræ¥å£å®šä¹‰äº†ä¸€ä¸ªcompareæ–¹æ³•ï¼Œç”¨äºå®šä¹‰å¯¹è±¡ä¹‹é—´çš„æ¯”è¾ƒè§„åˆ™ã€‚è‡ªå®šä¹‰çš„ç±»å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ç°Comparatoræ¥å£çš„æ¯”è¾ƒå™¨ç±»ï¼Œåœ¨æ¯”è¾ƒå™¨ç±»ä¸­å®ç°compareæ–¹æ³•ã€‚ç„¶åå¯ä»¥ä½¿ç”¨Arrays.sort()æˆ–Collections.sort()å¹¶ä¼ å…¥æ¯”è¾ƒå™¨å¯¹è±¡è¿›è¡Œæ’åºã€‚</li></ol><p>ä¸‹é¢æ˜¯ä½¿ç”¨å®ç°Comparableæ¥å£å’ŒComparatoræ¥å£çš„ç¤ºä¾‹ä»£ç ï¼š</p><p>ä½¿ç”¨å®ç°Comparableæ¥å£çš„æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token comment">// æ„é€ å‡½æ•°å’Œgetter/setteræ–¹æ³•çœç•¥</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Person</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">==</span> other<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">,</span> other<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨Arrays.sort()è¿›è¡Œæ’åº</span>
<span class="token class-name">Person</span><span class="token punctuation">[</span><span class="token punctuation">]</span> people <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
people<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
people<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
people<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Charlie&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨å®ç°Comparatoræ¥å£çš„æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonAgeComparator</span> <span class="token keyword">implements</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Person</span> p1<span class="token punctuation">,</span> <span class="token class-name">Person</span> p2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨Collections.sort()è¿›è¡Œæ’åº</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> people <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
people<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
people<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
people<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Charlie&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PersonAgeComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šæ˜¯ä¸¤ç§å¸¸ç”¨çš„å®ç°è‡ªå®šä¹‰æ’åºçš„æ–¹æ³•ã€‚é€šè¿‡å®ç°Comparableæ¥å£æˆ–å®ç°Comparatoræ¥å£ï¼Œå¯ä»¥æ ¹æ®è‡ªå®šä¹‰çš„æ¯”è¾ƒè§„åˆ™å¯¹å¯¹è±¡è¿›è¡Œæ’åºã€‚</p><h3 id="arraylistçš„addallæ–¹æ³•-å¦‚æœå®¹é‡ä¸º1-addallä¸€ä¸ªå®¹é‡ä¸º100000çš„æ•°ç»„-æ€ä¹ˆæ‰©å®¹-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#arraylistçš„addallæ–¹æ³•-å¦‚æœå®¹é‡ä¸º1-addallä¸€ä¸ªå®¹é‡ä¸º100000çš„æ•°ç»„-æ€ä¹ˆæ‰©å®¹-2023-ç”¨å‹" aria-hidden="true">#</a> arraylistçš„addAllæ–¹æ³•ï¼Œå¦‚æœå®¹é‡ä¸º1ï¼ŒaddAllä¸€ä¸ªå®¹é‡ä¸º100000çš„æ•°ç»„ï¼Œæ€ä¹ˆæ‰©å®¹ï¼Ÿï¼ˆ2023 ç”¨å‹ï¼‰</h3><p>åœ¨ Java çš„ <code>ArrayList</code> ç±»ä¸­ï¼Œå½“ä½ ä½¿ç”¨ <code>addAll</code> æ–¹æ³•æ·»åŠ ä¸€ä¸ªå¤§é‡å…ƒç´ çš„é›†åˆæ—¶ï¼Œå†…éƒ¨ä¼šè¿›è¡ŒåŠ¨æ€æ•°ç»„æ‰©å®¹ã€‚è¿™ä¸ªè¿‡ç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p><ol><li><strong>æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹</strong>ï¼šé¦–å…ˆï¼Œä¼šæ£€æŸ¥å½“å‰çš„ <code>ArrayList</code> æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥å®¹çº³æ–°å¢çš„å…ƒç´ ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚</li><li><strong>è®¡ç®—æ–°çš„å®¹é‡</strong>ï¼š<code>ArrayList</code> çš„æ‰©å®¹æœºåˆ¶é€šå¸¸æ˜¯ï¼šæ–°çš„å®¹é‡ = <code>(æ—§å®¹é‡ * 3)/2 + 1</code>ã€‚ç„¶è€Œï¼Œåœ¨è°ƒç”¨ <code>addAll</code> çš„æƒ…å†µä¸‹ï¼Œå¦‚æœéœ€è¦æ·»åŠ çš„å…ƒç´ æ•°é‡æ¯”è¿™ä¸ªæ‰©å®¹åçš„æ–°å®¹é‡è¿˜è¦å¤§ï¼Œé‚£ä¹ˆæ–°å®¹é‡å°†ä¼šè®¾ä¸ºéœ€è¦æ·»åŠ çš„å…ƒç´ æ•°é‡ã€‚</li><li><strong>åˆ†é…æ–°æ•°ç»„å¹¶å¤åˆ¶å…ƒç´ </strong>ï¼šæ ¹æ®è®¡ç®—å‡ºçš„æ–°å®¹é‡ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å†…éƒ¨æ•°ç»„ã€‚ç„¶åï¼Œæ—§æ•°ç»„çš„å…ƒç´ ä¼šè¢«å¤åˆ¶åˆ°è¿™ä¸ªæ–°æ•°ç»„ä¸­ã€‚</li><li><strong>æ·»åŠ æ–°å…ƒç´ </strong>ï¼šæ–°çš„å…ƒç´ ä¼šè¢«æ·»åŠ åˆ°æ–°æ•°ç»„ä¸­çš„é€‚å½“ä½ç½®ã€‚</li></ol><p>å‡è®¾åˆå§‹å®¹é‡ä¸º1ï¼Œç„¶åä½ ä½¿ç”¨ <code>addAll</code> æ·»åŠ ä¸€ä¸ªå®¹é‡ä¸º 100,000 çš„æ•°ç»„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>ArrayList</code> ä¼šé¦–å…ˆè®¡ç®—éœ€è¦å¤šå¤§çš„æ–°å®¹é‡æ‰èƒ½å­˜å‚¨æ‰€æœ‰æ–°æ·»åŠ çš„å…ƒç´ ï¼Œå³æœ€å°éœ€è¦ 100,001 çš„å®¹é‡ã€‚ç„¶åï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªè¿™ä¹ˆå¤§çš„æ–°æ•°ç»„ï¼Œå¹¶æŠŠæ—§æ•°ç»„å’Œæ–°æ·»åŠ çš„æ•°ç»„ä¸­çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°è¿™ä¸ªæ–°æ•°ç»„ä¸­ã€‚</p><p>è¿™æ ·çš„æ‰©å®¹æœºåˆ¶é€šå¸¸æ˜¯ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ã€‚é€šè¿‡ä¸€æ¬¡æ€§åˆ†é…ä¸€ä¸ªè¶³å¤Ÿå¤§çš„æ•°ç»„ï¼Œ<code>ArrayList</code> å‡å°‘äº†å¤šæ¬¡æ‰©å®¹å’Œæ•°ç»„å¤åˆ¶çš„éœ€è¦ï¼Œä»è€Œæé«˜äº†æ•ˆç‡ã€‚</p><p>è¯·æ³¨æ„ï¼Œæ‰©å®¹æ“ä½œæ˜¯æœ‰ä»£ä»·çš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°æ•°ç»„çš„å¤åˆ¶ã€‚å› æ­¤ï¼Œåœ¨åˆå§‹åŒ– <code>ArrayList</code> æ—¶ï¼Œå¦‚æœä½ å·²ç»çŸ¥é“ä¼šå­˜å‚¨å¤§é‡çš„å…ƒç´ ï¼Œæœ€å¥½é€šè¿‡æ„é€ å‡½æ•°æŒ‡å®šä¸€ä¸ªè¶³å¤Ÿå¤§çš„åˆå§‹å®¹é‡ï¼Œä»¥å‡å°‘åç»­çš„æ‰©å®¹æ“ä½œã€‚</p><h3 id="æšä¸¾ç±»-å¯ä»¥newå‡ºæ¥ä¹ˆ-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#æšä¸¾ç±»-å¯ä»¥newå‡ºæ¥ä¹ˆ-2023-ç”¨å‹" aria-hidden="true">#</a> æšä¸¾ç±»ï¼Œå¯ä»¥newå‡ºæ¥ä¹ˆï¼ˆ2023 ç”¨å‹ï¼‰</h3><p>Javaæšä¸¾ç±»æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œç”¨äºå®šä¹‰ä¸€ç»„å›ºå®šçš„å¸¸é‡ã€‚æšä¸¾ç±»çš„å®ä¾‹åœ¨å®šä¹‰æ—¶å°±å·²ç»å›ºå®šï¼Œæ— éœ€ä½¿ç”¨newæ“ä½œç¬¦è¿›è¡Œå®ä¾‹åŒ–ã€‚</p><p>æšä¸¾ç±»çš„å®ä¾‹å¿…é¡»æ”¾åœ¨ç¬¬ä¸€è¡Œæ˜¾ç¤ºï¼Œæ¯ä¸ªå®ä¾‹éƒ½æ˜¯public static finalä¿®é¥°çš„ï¼Œæœ€ç»ˆä»¥åˆ†å·ç»“æŸã€‚åœ¨Javaä¸­ï¼Œæšä¸¾ç±»çš„å®šä¹‰æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">DayOfWeek</span> <span class="token punctuation">{</span>
    <span class="token constant">SUNDAY</span><span class="token punctuation">,</span> <span class="token constant">MONDAY</span><span class="token punctuation">,</span> <span class="token constant">TUESDAY</span><span class="token punctuation">,</span> <span class="token constant">WEDNESDAY</span><span class="token punctuation">,</span> <span class="token constant">THURSDAY</span><span class="token punctuation">,</span> <span class="token constant">FRIDAY</span><span class="token punctuation">,</span> <span class="token constant">SATURDAY</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒDayOfWeekæ˜¯ä¸€ä¸ªæšä¸¾ç±»ï¼Œå®ƒåŒ…å«äº†ä¸€å‘¨çš„æ‰€æœ‰å¤©æ•°ã€‚è¿™äº›æšä¸¾å®ä¾‹SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAYéƒ½æ˜¯DayOfWeekç±»çš„å®ä¾‹ï¼Œå¯ä»¥é€šè¿‡DayOfWeek.SUNDAYç­‰æ–¹å¼è¿›è¡Œè®¿é—®ã€‚</p><p>æšä¸¾ç±»çš„å®ä¾‹åœ¨ç¼–è¯‘æ—¶å³å·²ç¡®å®šï¼Œæ— æ³•é€šè¿‡newæ“ä½œç¬¦å†æ¬¡å®ä¾‹åŒ–ã€‚æšä¸¾ç±»ä¸­çš„æ„é€ å‡½æ•°é»˜è®¤ä¸ºç§æœ‰åŒ–ï¼Œä¸å…è®¸è¢«å¤–éƒ¨è°ƒç”¨ã€‚</p><h3 id="javaæŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•æŠ½è±¡å­—æ®µä¹‹é—´çš„å› æœå…³ç³»-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#javaæŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•æŠ½è±¡å­—æ®µä¹‹é—´çš„å› æœå…³ç³»-2023-ç”¨å‹" aria-hidden="true">#</a> JavaæŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•æŠ½è±¡å­—æ®µä¹‹é—´çš„å› æœå…³ç³»ï¼Ÿï¼ˆ2023 ç”¨å‹ï¼‰</h3><p>åœ¨Javaä¸­ï¼ŒæŠ½è±¡ç±»ã€æŠ½è±¡æ–¹æ³•å’Œâ€œæŠ½è±¡å­—æ®µâ€ä¹‹é—´çš„å…³ç³»å¹¶ä¸æ˜¯çœŸæ­£çš„å› æœå…³ç³»ï¼Œä½†å®ƒä»¬æ˜¯ç´§å¯†ç›¸å…³çš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥æ¾„æ¸…å„è‡ªçš„å®šä¹‰å’Œæ¦‚å¿µï¼š</p><ol><li><p><strong>æŠ½è±¡ç±» (Abstract Class)</strong>ï¼šä¸èƒ½è¢«å®ä¾‹åŒ–çš„ç±»ã€‚å®ƒå¯èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•å’Œå…·ä½“æ–¹æ³•ã€‚å®ƒé€šå¸¸ä½œä¸ºå…¶ä»–ç±»çš„åŸºç±»ï¼Œå¹¶ç”±å­ç±»æä¾›å®ç°ã€‚åˆ›å»ºæŠ½è±¡ç±»çš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ä¸ªé€šç”¨çš„ã€ä¸èƒ½è¢«å®ä¾‹åŒ–çš„åŸºç¡€æ¡†æ¶ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... å…¶ä»–ä»£ç </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>æŠ½è±¡æ–¹æ³• (Abstract Method)</strong>ï¼šåœ¨æŠ½è±¡ç±»ä¸­å£°æ˜ä½†æ²¡æœ‰å®ç°çš„æ–¹æ³•ã€‚å­ç±»ç»§æ‰¿æŠ½è±¡ç±»æ—¶ï¼Œå¿…é¡»å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼Œé™¤éå­ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Javaå®é™…ä¸Šå¹¶æ²¡æœ‰â€œæŠ½è±¡å­—æ®µâ€çš„æ¦‚å¿µã€‚å½“æˆ‘ä»¬åœ¨æŠ½è±¡ç±»ä¸­å£°æ˜å­—æ®µæ—¶ï¼Œè¿™äº›å­—æ®µéƒ½æ˜¯å…·æœ‰å®é™…å­˜å‚¨å€¼çš„å­—æ®µï¼Œå³ä½¿å®ƒä»¬åœ¨æŠ½è±¡ç±»ä¸­ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥åœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰å­—æ®µå¹¶æœŸæœ›å­ç±»æä¾›å…·ä½“çš„å€¼æˆ–ä½¿ç”¨ã€‚</p></li></ol><p>å…³ç³»æ€»ç»“ï¼š</p><ul><li>ä¸€ä¸ªç±»å¦‚æœæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å¿…é¡»è¢«å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚</li><li>æŠ½è±¡ç±»å¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³•ã€‚</li><li>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œä½†å®ƒå¯ä»¥æœ‰æ„é€ æ–¹æ³•ï¼Œè¿™é€šå¸¸ç”¨äºå­ç±»è°ƒç”¨ã€‚</li><li>æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨å­ç±»ä¸­è¢«å®ç°ï¼Œé™¤éå­ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚</li><li>æŠ½è±¡ç±»å¯ä»¥æœ‰å­—æ®µï¼ˆæˆå‘˜å˜é‡ï¼‰ï¼Œè¿™äº›å­—æ®µä¸æ˜¯æŠ½è±¡çš„ï¼Œå¹¶ä¸”å¯ä»¥è¢«å­ç±»ä½¿ç”¨æˆ–é‡å†™ã€‚</li></ul><p>è¿™ç§è®¾è®¡ä½¿å¾—Javaèƒ½å¤Ÿå¼ºåˆ¶å®ç°æŸäº›æ–¹æ³•ï¼Œè€Œä¸ä»…ä»…æ˜¯æä¾›ä¸€ä¸ªæ¥å£çš„æ¡†æ¶ï¼Œè¿™ä¸ºé¢å‘å¯¹è±¡è®¾è®¡æä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§ã€‚</p><h3 id="å¤šçº¿ç¨‹ä¸‹å¦‚ä½•ä¿è¯hashsetçš„å®‰å…¨æ€§-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#å¤šçº¿ç¨‹ä¸‹å¦‚ä½•ä¿è¯hashsetçš„å®‰å…¨æ€§-2023-ç”¨å‹" aria-hidden="true">#</a> å¤šçº¿ç¨‹ä¸‹å¦‚ä½•ä¿è¯HashSetçš„å®‰å…¨æ€§ï¼Ÿï¼ˆ2023 ç”¨å‹ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œ<code>HashSet</code> æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ª<code>HashSet</code>ï¼Œè€Œæ²¡æœ‰é€‚å½“çš„åŒæ­¥ï¼Œé‚£ä¹ˆå®ƒçš„è¡Œä¸ºæ˜¯ä¸ç¡®å®šçš„ã€‚è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä¿è¯ <code>HashSet</code> çš„å®‰å…¨æ€§ï¼Œæ‚¨å¯ä»¥è€ƒè™‘ä»¥ä¸‹æ–¹æ³•ï¼š</p><ol><li><p><strong>ä½¿ç”¨<code>Collections.synchronizedSet()</code></strong>: Java çš„ <code>Collections</code> ç±»æä¾›äº†ä¸€ä¸ª <code>synchronizedSet()</code> æ–¹æ³•ï¼Œå¯ä»¥å°†ç»™å®šçš„é›†åˆåŒ…è£…æˆçº¿ç¨‹å®‰å…¨çš„é›†åˆã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨è¿™ç§æ–¹å¼æ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿­ä»£è¿™ä¸ªé›†åˆä»ç„¶éœ€è¦å¤–éƒ¨åŒæ­¥ï¼Œå› ä¸ºå¯èƒ½åœ¨è¿­ä»£æœŸé—´å…¶ä»–çº¿ç¨‹è¿›è¡Œäº†ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">synchronized</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> item <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ä½¿ç”¨<code>ConcurrentHashMap</code> ä¸ºåŸºç¡€çš„ <code>Set</code></strong>: <code>ConcurrentHashMap</code> æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Mapå®ç°ã€‚è™½ç„¶å®ƒæ˜¯ä¸€ä¸ªMapï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Setï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">newSetFromMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ ·å¾—åˆ°çš„ <code>Set</code> æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”å®ƒçš„å¹¶å‘æ€§èƒ½é€šå¸¸æ¯” <code>synchronizedSet</code> æ›´å¥½ã€‚</p></li><li><p><strong>ä½¿ç”¨ <code>CopyOnWriteArraySet</code></strong>: å¦‚æœä½ é¢„è®¡é›†åˆçš„å†™æ“ä½œç›¸å¯¹è¾ƒå°‘ï¼Œè€Œè¯»æ“ä½œéå¸¸é¢‘ç¹ï¼Œé‚£ä¹ˆ <code>CopyOnWriteArraySet</code> å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚è¿™ä¸ªé›†åˆåœ¨æ¯æ¬¡å†™æ“ä½œæ—¶éƒ½ä¼šå¤åˆ¶ä¸€ä»½æ•°æ®ï¼Œä»è€Œç¡®ä¿è¯»æ“ä½œæ°¸è¿œä¸ä¼šå—åˆ°å¹¶å‘ä¿®æ”¹çš„å¹²æ‰°ã€‚ä½†æ˜¯ï¼Œå¦‚æœå†™æ“ä½œéå¸¸é¢‘ç¹ï¼Œæ€§èƒ½å¯èƒ½ä¼šå—åˆ°å¾ˆå¤§çš„å½±å“ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CopyOnWriteArraySet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><strong>æ‰‹åŠ¨åŒæ­¥</strong>: ä½ å¯ä»¥é€‰æ‹©ä¸º <code>HashSet</code> æ“ä½œæ·»åŠ è‡ªå·±çš„åŒæ­¥æœºåˆ¶ã€‚ä½†è¿™é€šå¸¸æ˜¯ä¸æ¨èçš„ï¼Œå› ä¸ºå®¹æ˜“å‡ºé”™ã€‚</p></li></ol><h3 id="çº¿ç¨‹æ± çš„-blockingqueue-æœ‰ä»€ä¹ˆéœ€è¦ç‰¹åˆ«æ³¨æ„çš„-é•¿åº¦æº¢å‡ºç›¸å…³-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± çš„-blockingqueue-æœ‰ä»€ä¹ˆéœ€è¦ç‰¹åˆ«æ³¨æ„çš„-é•¿åº¦æº¢å‡ºç›¸å…³-2023-å¾—ç‰©" aria-hidden="true">#</a> çº¿ç¨‹æ± çš„ BlockingQueue æœ‰ä»€ä¹ˆéœ€è¦ç‰¹åˆ«æ³¨æ„çš„ï¼ˆé•¿åº¦æº¢å‡ºç›¸å…³ï¼‰ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>Javaçº¿ç¨‹æ± ä¸­çš„BlockingQueueæ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œå®ƒåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å®ç°äº†çº¿ç¨‹å®‰å…¨å’Œé˜»å¡çš„åŠŸèƒ½ã€‚åœ¨ä½¿ç”¨Javaçº¿ç¨‹æ± ä¸­çš„BlockingQueueæ—¶ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p><ol><li>ç±»å‹é€‰æ‹©ï¼šJavaçº¿ç¨‹æ± æä¾›äº†ä¸åŒç±»å‹çš„BlockingQueueï¼Œä¾‹å¦‚ArrayBlockingQueueã€LinkedBlockingQueueç­‰ï¼Œä¸åŒçš„ç±»å‹é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚éœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„BlockingQueueç±»å‹ã€‚</li><li>ğŸŒŸ å®¹é‡é™åˆ¶ï¼šçº¿ç¨‹æ± çš„BlockingQueueå¯ä»¥è®¾ç½®å®¹é‡ä¸Šé™ï¼Œè¿™æ˜¯ä¸ºäº†æ§åˆ¶ä»»åŠ¡çš„æ’é˜Ÿå’Œæ‰§è¡Œã€‚éœ€è¦æ ¹æ®å®é™…æƒ…å†µåˆç†è®¾ç½®é˜Ÿåˆ—çš„å®¹é‡ï¼Œé¿å…ä»»åŠ¡ç§¯å‹è¿‡å¤šæˆ–è€…é˜Ÿåˆ—æº¢å‡ºã€‚ï¼ˆé«˜è´Ÿè½½æƒ…å†µä¸‹ï¼Œå¦‚æœé˜Ÿåˆ—è¿‡é•¿ï¼Œå¯èƒ½ä¼šç§¯ç´¯å¤§é‡çš„ä»»åŠ¡ï¼Œè¿™æ ·ä¼šå ç”¨å¤§é‡çš„å†…å­˜ã€‚è®¾ç½®è¿‡å¤§çš„é˜Ÿåˆ—å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºæˆ–è€…èµ„æºè¿‡åº¦å ç”¨ã€‚ï¼‰</li><li>é˜»å¡æœºåˆ¶ï¼šå½“BlockingQueueå·²æ»¡æ—¶ï¼Œæ–°çš„ä»»åŠ¡å°†è¢«é˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰ç©ºä½™ä½ç½®ã€‚åŒæ ·ï¼Œå½“BlockingQueueä¸ºç©ºæ—¶ï¼Œè·å–ä»»åŠ¡çš„æ“ä½œä¹Ÿä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æœ‰æ–°ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ã€‚éœ€è¦æ³¨æ„å¤„ç†å¥½é˜»å¡æœºåˆ¶ï¼Œé¿å…å‡ºç°æ­»é”æˆ–çº¿ç¨‹é¥¥é¥¿ç­‰é—®é¢˜ã€‚</li><li><strong>å†…å­˜ä½¿ç”¨</strong>: é«˜è´Ÿè½½æƒ…å†µä¸‹ï¼Œå¦‚æœé˜Ÿåˆ—è¿‡é•¿ï¼Œå¯èƒ½ä¼šç§¯ç´¯å¤§é‡çš„ä»»åŠ¡ï¼Œè¿™æ ·ä¼šå ç”¨å¤§é‡çš„å†…å­˜ã€‚</li></ol><p>å¼•å…¥ä¸“é—¨çš„ç›‘æ§ä½“ç³»å¯ä»¥å¸®åŠ©ä½ äº†è§£é˜Ÿåˆ—çš„ä½¿ç”¨çŠ¶æ€ï¼Œä¾‹å¦‚é˜Ÿåˆ—é•¿åº¦ã€å¤„ç†é€Ÿåº¦ç­‰ï¼Œè¿™æ ·å¯ä»¥åŠæ—¶è¿›è¡Œè°ƒæ•´ã€‚</p><h3 id="concurrenthashmap-ä¸ºä»€ä¹ˆ-key-å’Œ-value-ä¸èƒ½ä¸º-null-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#concurrenthashmap-ä¸ºä»€ä¹ˆ-key-å’Œ-value-ä¸èƒ½ä¸º-null-2023-ç¾å›¢" aria-hidden="true">#</a> ConcurrentHashMap ä¸ºä»€ä¹ˆ key å’Œ value ä¸èƒ½ä¸º nullï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>è®¾è®¡ConcurrentHashMapçš„ä½œè€…æ˜¯è¿™æ ·å›ç­”çš„ï¼š<code>The main reason that nulls aren&#39;t allowed in ConcurrentMaps (ConcurrentHashMaps, ConcurrentSkipListMaps) is that ambiguities that may be just barely tolerable in non-concurrent maps can&#39;t be accommodated. The main one is that if map.get(key) returns null, you can&#39;t detect whether the key explicitly maps to null vs the key isn&#39;t mapped. In a non-concurrent map, you can check this via map.contains(key), but in a concurrent one, the map might have changed between calls.</code></p><p>ä¸»è¦åŸå› æ˜¯å¹¶å‘æ˜ å°„ï¼ˆConcurrentMapsï¼ŒConcurrentHashMapsï¼ŒConcurrentSkipListMapsï¼‰ä¸å…è®¸ä½¿ç”¨nullçš„åŸå› æ˜¯ï¼Œåœ¨éå¹¶å‘æ˜ å°„ä¸­å¯èƒ½å‹‰å¼ºå¯ä»¥å®¹å¿çš„æ­§ä¹‰æ— æ³•é€‚åº”ã€‚ä¸»è¦çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœmap.get(key)è¿”å›nullï¼Œä½ æ— æ³•æ£€æµ‹åˆ°è¯¥é”®æ˜¯æ˜¾å¼æ˜ å°„åˆ°nullè¿˜æ˜¯è¯¥é”®æœªæ˜ å°„ï¼ˆæ„æ€æ˜¯ï¼šå¦‚æœmapå¯ä»¥ä¿å­˜nullï¼Œåˆ™æ— æ³•åˆ¤æ–­getè¿”å›nullï¼Œæ˜¯å› ä¸ºè¯¥å€¼æ²¡æœ‰é”®ï¼Œè¿˜æ˜¯å› ä¸ºè¯¥å€¼ä¸ºnullï¼‰ã€‚åœ¨éå¹¶å‘æ˜ å°„ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡map.contains(key)æ¥æ£€æŸ¥æ­¤é—®é¢˜ï¼Œä½†åœ¨å¹¶å‘æ˜ å°„ä¸­ï¼Œè°ƒç”¨ä¹‹é—´å¯èƒ½ä¼šæ›´æ”¹æ˜ å°„ã€‚</p>`,119),$=n("p",null,"å‚è€ƒï¼š",-1),nn={href:"https://stackoverflow.com/questions/698638/why-does-concurrenthashmap-prevent-null-keys-and-values",target:"_blank",rel:"noopener noreferrer"},sn=t(`<p>å¦‚æœä¸ç†è§£åˆ™è¿›ä¸€æ­¥è§£é‡Šï¼šå½“ <code>map.get(key)</code> è¿”å› <code>null</code> æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ç¡®å®šè¿™ä¸ª <code>null</code> æ˜¯å› ä¸ºé”®å€¼å®é™…ä¸Šè¢«æ˜ å°„ä¸º <code>null</code>ï¼Œè¿˜æ˜¯å› ä¸ºè¿™ä¸ªé”®åœ¨æ˜ å°„ä¸­ä¸å­˜åœ¨ã€‚åœ¨ä¸€ä¸ªéå¹¶å‘çš„ <code>HashMap</code> ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡é¢å¤–è°ƒç”¨ <code>map.contains(key)</code> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»è€Œç¡®è®¤è¿™ä¸ªé”®æ˜¯å¦çœŸçš„å­˜åœ¨äºæ˜ å°„ä¸­ã€‚ç„¶è€Œï¼Œåœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œè¿™ç§é¢å¤–çš„æ£€æŸ¥å¹¶ä¸å¯é ï¼Œå› ä¸ºæ˜ å°„å¯èƒ½åœ¨ <code>get</code> å’Œ <code>contains</code> è°ƒç”¨ä¹‹é—´è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ <code>contains</code> è¿”å› <code>true</code>ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•ä¿è¯é”®ä»ç„¶å­˜åœ¨äºæ˜ å°„ä¸­ï¼Œæˆ–è€…å…¶å€¼æ²¡æœ‰è¢«æ”¹å˜ã€‚è¿™æ ·çš„ä¸ç¡®å®šæ€§åœ¨å¹¶å‘ç¯å¢ƒä¸­å¯èƒ½å¯¼è‡´ä¸¥é‡çš„é—®é¢˜æˆ–bugã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>ConcurrentHashMap</code> ç®€å•åœ°ç¦æ­¢äº† <code>null</code> å€¼ï¼Œè¿™æ · <code>get</code> æ–¹æ³•è¿”å› <code>null</code> å°±å”¯ä¸€åœ°è¡¨ç¤ºè¯¥é”®åœ¨æ˜ å°„ä¸­ä¸å­˜åœ¨ã€‚è¿™æ¶ˆé™¤äº†æ½œåœ¨çš„æ­§ä¹‰ï¼Œå¹¶ä½¿å¾—ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</p><h3 id="hashmapåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜-ä¼šäº§ç”Ÿæ­»é”å—-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#hashmapåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜-ä¼šäº§ç”Ÿæ­»é”å—-2023-å¾—ç‰©" aria-hidden="true">#</a> HashMapåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜ï¼Ÿä¼šäº§ç”Ÿæ­»é”å—ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼ŒHashMapå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><ol><li>æ•°æ®ä¸ä¸€è‡´ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹HashMapï¼Œå¯èƒ½å¯¼è‡´æ•°æ®çŠ¶æ€ä¸ä¸€è‡´ã€‚</li><li>æ­»å¾ªç¯ï¼šåœ¨æ‰©å®¹ï¼ˆrehashingï¼‰çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å°è¯•å¯¹åŒä¸€ä¸ªé”®è¿›è¡Œæ’å…¥ï¼Œå¯èƒ½ä¼šé€ æˆé“¾è¡¨è½¬ä¸ºç¯å½¢ï¼Œä»è€Œå¯¼è‡´æ­»å¾ªç¯ã€‚</li><li>ç»“æ„ä¸ä¸€è‡´ï¼šä¸€ä¸ªçº¿ç¨‹åœ¨éå†HashMapçš„å…ƒç´ æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†HashMapçš„ç»“æ„ï¼ˆæ¯”å¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ï¼Œå¯èƒ½ä¼šæŠ›å‡º<code>ConcurrentModificationException</code>ã€‚</li></ol><p>è‡³äºæ­»é”ï¼ŒHashMapæœ¬èº«çš„æ“ä½œé€šå¸¸ä¸ä¼šå¯¼è‡´æ­»é”ï¼Œå› ä¸ºå®ƒä¸æ¶‰åŠå¤šä¸ªèµ„æºçš„é”å®šã€‚ç„¶è€Œï¼Œåœ¨ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯æˆ–å¤æ‚çš„æ“ä½œåºåˆ—ä¸­ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½äº§ç”Ÿæ­»é”ï¼Œä½†è¿™é€šå¸¸æ˜¯ç”±äºåº”ç”¨é€»è¾‘ï¼Œè€ŒéHashMapæœ¬èº«é€ æˆçš„ã€‚å¦‚æœéœ€è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œå»ºè®®ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ï¼Œå¦‚<code>ConcurrentHashMap</code>ã€‚</p><p>å¯¹äºä¼šå˜æˆç¯çŠ¶çš„æƒ…å†µï¼Œåœ¨Javaçš„HashMapå®ç°ä¸­ï¼Œæœ‰ä¸€ä¸ªè½¬ç§»ï¼ˆtransferï¼‰çš„æ“ä½œï¼Œè¯¥æ“ä½œåœ¨HashMapæ‰©å®¹æ—¶è¿›è¡Œã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å°è¯•è¿›è¡Œè¿™ä¸ªæ“ä½œå¹¶ä¸”æ²¡æœ‰åˆé€‚çš„åŒæ­¥æœºåˆ¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´é“¾è¡¨å½¢æˆä¸€ä¸ªç¯ï¼Œä»è€Œä½¿å¾—HashMapè¿›å…¥ä¸€ä¸ªæ— é™å¾ªç¯çŠ¶æ€ã€‚</p><p>è¿™ä¸ªé—®é¢˜åœ¨JDK 1.7ä¸­å°¤ä¸ºæ˜æ˜¾ï¼Œå› ä¸ºåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œé“¾è¡¨æ²¡æœ‰ä¼˜åŒ–ä¸ºçº¢é»‘æ ‘ï¼ˆJDK 1.8ä¹‹åå¯¹è¿™ç‚¹è¿›è¡Œäº†ä¼˜åŒ–ï¼‰ã€‚</p><p>ä¸‹é¢çš„ä»£ç æ®µæ˜¯ä¸€ä¸ªç®€åŒ–ç¤ºä¾‹ï¼Œå¹¶ä¸æ˜¯å®é™…HashMapæºç ã€‚ä½†å®ƒå¯ä»¥ç”¨æ¥è¯´æ˜åœ¨ä¸åŒæ­¥çš„ç¯å¢ƒä¸‹å¦‚ä½•å¯èƒ½å¯¼è‡´ä¸€ä¸ªå¾ªç¯é“¾è¡¨ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> key<span class="token punctuation">;</span>
    <span class="token keyword">int</span> value<span class="token punctuation">;</span>
    <span class="token class-name">Node</span> next<span class="token punctuation">;</span>

    <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleHashMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SimpleHashMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        table <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">[</span>initialCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>
        size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;=</span> table<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">0.75</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å‡è®¾è´Ÿè½½å› å­ä¸º0.75</span>
            <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token function">indexFor</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> table<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Node</span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        table<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        size<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newTable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">[</span>table<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">transfer</span><span class="token punctuation">(</span>newTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        table <span class="token operator">=</span> newTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span> node <span class="token operator">:</span> table<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// ä¸‹é¢çš„ä»£ç åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ²¡æœ‰è€ƒè™‘æ‰€æœ‰çš„ç»†èŠ‚ã€‚</span>
                <span class="token comment">// å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œè¿™ä¸€æ®µä»£ç ï¼Œå¯èƒ½ä¼šå¯¼è‡´é“¾è¡¨çš„ç¯å½¢ç»“æ„ã€‚</span>
                <span class="token keyword">int</span> newIndex <span class="token operator">=</span> <span class="token function">indexFor</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">,</span> newTable<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Node</span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">,</span> node<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> newTable<span class="token punctuation">[</span>newIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
                newTable<span class="token punctuation">[</span>newIndex<span class="token punctuation">]</span> <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">indexFor</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> key <span class="token operator">%</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç®€åŒ–çš„HashMapå®ç°åœ¨<code>put</code>æ–¹æ³•ä¸­åŒ…å«ä¸€ä¸ª<code>resize</code>æ“ä½œï¼Œè¯¥æ“ä½œä¼šåœ¨HashMapè¾¾åˆ°æŸä¸ªè´Ÿè½½å› å­æ—¶è¢«è§¦å‘ã€‚</p><p>å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ<code>transfer</code>æ–¹æ³•ï¼Œå¹¶ä¸”å°è¯•ä¿®æ”¹ç›¸åŒçš„é“¾è¡¨ï¼Œç”±äºæ²¡æœ‰é€‚å½“çš„åŒæ­¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿™äº›é“¾è¡¨é¡¹äº’ç›¸å¼•ç”¨ï¼Œå½¢æˆä¸€ä¸ªç¯ã€‚</p><p>è¦æ³¨æ„ï¼Œè¿™ä¸ªä¾‹å­åªæ˜¯ä¸ºäº†æ¼”ç¤ºå¯èƒ½çš„é—®é¢˜ï¼Œå¹¶ä¸æ˜¯å®é™…çš„HashMapå®ç°ã€‚åœ¨å®é™…çš„JDKå®ç°ä¸­ï¼Œè¿™ç§é—®é¢˜å¯èƒ½æ›´éš¾ä»¥å¤ç°ï¼Œä½†ç†è®ºä¸Šæ˜¯å¯èƒ½çš„ã€‚</p><h3 id="å‡è®¾æœ‰ä¸ªhashmapä¸Šé”put-getä¸ä¸Šé”ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜å—-ä¸ºä»€ä¹ˆ-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#å‡è®¾æœ‰ä¸ªhashmapä¸Šé”put-getä¸ä¸Šé”ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜å—-ä¸ºä»€ä¹ˆ-2023-å¿«æ‰‹" aria-hidden="true">#</a> å‡è®¾æœ‰ä¸ªhashmapä¸Šé”putï¼Œgetä¸ä¸Šé”ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>è¿™æ ·çš„åšæ³•ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å½“ä½ å¯¹HashMapè¿›è¡Œputæ“ä½œä¸Šé”ï¼Œä½†getæ“ä½œä¸ä¸Šé”æ—¶ï¼Œä»¥ä¸‹å‡ ç§æƒ…å†µå¯èƒ½å‘ç”Ÿï¼š</p><ol><li>æ•°æ®ä¸ä¸€è‡´ï¼šä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¿›è¡Œputæ“ä½œï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹åœ¨è¿›è¡Œgetæ“ä½œï¼Œè¿™å¯èƒ½å¯¼è‡´getæ“ä½œè¿”å›ä¸€ä¸ªä¸ä¸€è‡´æˆ–è€…é”™è¯¯çš„æ•°æ®ã€‚</li><li>å†…éƒ¨ç»“æ„é—®é¢˜ï¼šHashMapåœ¨æ‰©å®¹æˆ–è€…é‡æ–°å“ˆå¸Œæ—¶ï¼Œå…¶å†…éƒ¨æ•°æ®ç»“æ„ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦‚æœåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­è¿›è¡Œgetæ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¯é¢„æ–™çš„è¡Œä¸ºæˆ–é”™è¯¯ã€‚</li><li>å¯è§æ€§ï¼šå¦‚æœä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†ä¸€ä¸ªå…ƒç´ ï¼Œä½†è¿™ä¸ªä¿®æ”¹æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°ï¼ˆå› ä¸ºæ²¡æœ‰é€‚å½“çš„å†…å­˜å±éšœï¼‰ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹è·å–åˆ°çš„å°†æ˜¯ä¸€ä¸ªè¿‡æœŸæˆ–ä¸æ­£ç¡®çš„å€¼ã€‚</li></ol><h2 id="ğŸ•-å¹¶å‘ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#ğŸ•-å¹¶å‘ç¼–ç¨‹" aria-hidden="true">#</a> ğŸ• å¹¶å‘ç¼–ç¨‹</h2><h3 id="javaçš„çº¿ç¨‹æ± æœ‰å“ªäº›-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#javaçš„çº¿ç¨‹æ± æœ‰å“ªäº›-2023-é˜¿é‡Œ" aria-hidden="true">#</a> Javaçš„çº¿ç¨‹æ± æœ‰å“ªäº›ï¼Ÿï¼ˆ2023 é˜¿é‡Œï¼‰</h3><ul><li>ScheduledThreadPoolï¼šå¯ä»¥è®¾ç½®å®šæœŸçš„æ‰§è¡Œä»»åŠ¡ï¼Œå®ƒæ”¯æŒå®šæ—¶æˆ–å‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡ï¼Œæ¯”å¦‚æ¯éš” 10 ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ï¼Œæˆ‘é€šè¿‡è¿™ä¸ªå®ç°ç±»è®¾ç½®å®šæœŸæ‰§è¡Œä»»åŠ¡çš„ç­–ç•¥ã€‚</li><li>FixedThreadPoolï¼šå®ƒçš„æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é™¤äº†åˆå§‹é˜¶æ®µéœ€è¦ä» 0 å¼€å§‹å¢åŠ å¤–ï¼Œä¹‹åçš„çº¿ç¨‹æ•°é‡å°±æ˜¯å›ºå®šçš„ï¼Œå°±ç®—ä»»åŠ¡æ•°è¶…è¿‡çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± ä¹Ÿä¸ä¼šå†åˆ›å»ºæ›´å¤šçš„çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼Œè€Œæ˜¯ä¼šæŠŠè¶…å‡ºçº¿ç¨‹å¤„ç†èƒ½åŠ›çš„ä»»åŠ¡æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­è¿›è¡Œç­‰å¾…ã€‚è€Œä¸”å°±ç®—ä»»åŠ¡é˜Ÿåˆ—æ»¡äº†ï¼Œåˆ°äº†æœ¬è¯¥ç»§ç»­å¢åŠ çº¿ç¨‹æ•°çš„æ—¶å€™ï¼Œç”±äºå®ƒçš„æœ€å¤§çº¿ç¨‹æ•°å’Œæ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•å†å¢åŠ æ–°çš„çº¿ç¨‹äº†ã€‚</li><li>CachedThreadPoolï¼šå¯ä»¥ç§°ä½œå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå®ƒçš„ç‰¹ç‚¹åœ¨äºçº¿ç¨‹æ•°æ˜¯å‡ ä¹å¯ä»¥æ— é™å¢åŠ çš„ï¼ˆå®é™…æœ€å¤§å¯ä»¥è¾¾åˆ° Integer.MAX_VALUEï¼Œä¸º 2^31-1ï¼Œè¿™ä¸ªæ•°éå¸¸å¤§ï¼Œæ‰€ä»¥åŸºæœ¬ä¸å¯èƒ½è¾¾åˆ°ï¼‰ï¼Œè€Œå½“çº¿ç¨‹é—²ç½®æ—¶è¿˜å¯ä»¥å¯¹çº¿ç¨‹è¿›è¡Œå›æ”¶ã€‚ä¹Ÿå°±æ˜¯è¯´è¯¥çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡ä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œå½“ç„¶å®ƒä¹Ÿæœ‰ä¸€ä¸ªç”¨äºå­˜å‚¨æäº¤ä»»åŠ¡çš„é˜Ÿåˆ—ï¼Œä½†è¿™ä¸ªé˜Ÿåˆ—æ˜¯ SynchronousQueueï¼Œé˜Ÿåˆ—çš„å®¹é‡ä¸º0ï¼Œå®é™…ä¸å­˜å‚¨ä»»ä½•ä»»åŠ¡ï¼Œå®ƒåªè´Ÿè´£å¯¹ä»»åŠ¡è¿›è¡Œä¸­è½¬å’Œä¼ é€’ï¼Œæ‰€ä»¥æ•ˆç‡æ¯”è¾ƒé«˜ã€‚</li><li>SingleThreadExecutorï¼šå®ƒä¼šä½¿ç”¨å”¯ä¸€çš„çº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼ŒåŸç†å’Œ FixedThreadPool æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™é‡Œçº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œå¦‚æœçº¿ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡çš„è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œçº¿ç¨‹æ± ä¹Ÿä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œåç»­çš„ä»»åŠ¡ã€‚è¿™ç§çº¿ç¨‹æ± ç”±äºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥éå¸¸é€‚åˆç”¨äºæ‰€æœ‰ä»»åŠ¡éƒ½éœ€è¦æŒ‰è¢«æäº¤çš„é¡ºåºä¾æ¬¡æ‰§è¡Œçš„åœºæ™¯ï¼Œè€Œå‰å‡ ç§çº¿ç¨‹æ± ä¸ä¸€å®šèƒ½å¤Ÿä¿éšœä»»åŠ¡çš„æ‰§è¡Œé¡ºåºç­‰äºè¢«æäº¤çš„é¡ºåºï¼Œå› ä¸ºå®ƒä»¬æ˜¯å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œçš„ã€‚</li><li>SingleThreadScheduledExecutorï¼šå®ƒå®é™…å’Œ ScheduledThreadPool çº¿ç¨‹æ± éå¸¸ç›¸ä¼¼ï¼Œå®ƒåªæ˜¯ ScheduledThreadPool çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œå†…éƒ¨åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚</li></ul><h3 id="çº¿ç¨‹æ± é˜Ÿåˆ—çš„åº•å±‚-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± é˜Ÿåˆ—çš„åº•å±‚-2023-ç¾å›¢" aria-hidden="true">#</a> çº¿ç¨‹æ± é˜Ÿåˆ—çš„åº•å±‚ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>Javaçº¿ç¨‹æ± çš„åº•å±‚åŸç†ä¸»è¦åŸºäºä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šçº¿ç¨‹å¤ç”¨å’Œä»»åŠ¡é˜Ÿåˆ—ã€‚</p><ol><li><strong>çº¿ç¨‹å¤ç”¨</strong>: åˆ›å»ºçº¿ç¨‹æ˜¯ä¸€ä¸ªæ˜‚è´µçš„æ“ä½œï¼Œçº¿ç¨‹æ± é€šè¿‡å¤ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹æ¥é™ä½èµ„æºæ¶ˆè€—ã€‚è¿™æ ·ï¼Œå¤šä¸ªä»»åŠ¡å¯ä»¥åœ¨é¢„å…ˆåˆ›å»ºçš„çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ä¸ªä»»åŠ¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</li><li><strong>ä»»åŠ¡é˜Ÿåˆ—</strong>: å½“æ‰€æœ‰çº¿ç¨‹éƒ½åœ¨å¿™ç¢ŒçŠ¶æ€æ—¶ï¼Œæ–°æ¥çš„ä»»åŠ¡ä¼šè¢«æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…çº¿ç¨‹ç©ºé—²åå†æ‰§è¡Œã€‚</li></ol><p>å…·ä½“æ“ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>å½“ä¸€ä¸ªæ–°ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± æ—¶ï¼Œçº¿ç¨‹æ± é¦–å…ˆä¼šåˆ¤æ–­æ˜¯å¦æœ‰ç©ºé—²çº¿ç¨‹å¯ç”¨ã€‚å¦‚æœæœ‰ï¼Œç›´æ¥åœ¨ç©ºé—²çº¿ç¨‹ä¸Šæ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</li><li>å¦‚æœæ²¡æœ‰ç©ºé—²çº¿ç¨‹ï¼Œä½†æ˜¯çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°è¿˜æœªè¾¾åˆ°æœ€å¤§å€¼ï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šåˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</li><li>å¦‚æœæ‰€æœ‰çº¿ç¨‹éƒ½åœ¨å¿™ç¢ŒçŠ¶æ€ï¼Œå¹¶ä¸”çº¿ç¨‹æ•°å·²è¾¾æœ€å¤§å€¼ï¼Œè¯¥ä»»åŠ¡å°±ä¼šè¢«æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</li><li>çº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹å®Œæˆä»»åŠ¡åä¼šæ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œçœ‹æ˜¯å¦æœ‰ç­‰å¾…çš„ä»»åŠ¡ã€‚å¦‚æœæœ‰ï¼Œå®ƒä»¬ä¼šä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œã€‚</li><li>åœ¨ä¸€äº›é…ç½®ä¸‹ï¼Œå¦‚æœçº¿ç¨‹é•¿æ—¶é—´å¤„äºç©ºé—²çŠ¶æ€ï¼Œå®ƒå¯èƒ½ä¼šè¢«ç»ˆæ­¢ï¼Œä»¥é‡Šæ”¾èµ„æºã€‚</li></ol><p>è¿™æ ·ï¼Œçº¿ç¨‹æ± æ—¢å¯ä»¥å¤ç”¨çº¿ç¨‹ï¼Œå‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ï¼Œä¹Ÿèƒ½æœ‰æ•ˆåœ°ç®¡ç†å’Œè°ƒåº¦ä»»åŠ¡ã€‚å¸¸ç”¨çš„Javaçº¿ç¨‹æ± å®ç°æœ‰<code>ExecutorService</code>æ¥å£å’Œå…¶å®ç°ç±»ï¼Œå¦‚<code>ThreadPoolExecutor</code>å’Œ<code>ScheduledThreadPoolExecutor</code>ã€‚</p><h3 id="çº¿ç¨‹æ± çš„é˜Ÿåˆ—åˆåˆ†å“ªå‡ ç§å‘¢-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± çš„é˜Ÿåˆ—åˆåˆ†å“ªå‡ ç§å‘¢-2023-ç¾å›¢" aria-hidden="true">#</a> çº¿ç¨‹æ± çš„é˜Ÿåˆ—åˆåˆ†å“ªå‡ ç§å‘¢ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>é¦–å…ˆçœ‹ä¸€ä¸‹çº¿ç¨‹æ± å‚æ•°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token keyword">int</span> corePoolSize<span class="token punctuation">,</span> <span class="token comment">//çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°é‡</span>
                      <span class="token keyword">int</span> maximumPoolSize<span class="token punctuation">,</span> <span class="token comment">//çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°</span>
                      <span class="token keyword">long</span> keepAliveTime<span class="token punctuation">,</span> <span class="token comment">//å½“çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œå¤šä½™çš„ç©ºé—²çº¿ç¨‹å­˜æ´»çš„æœ€é•¿æ—¶é—´</span>
                      <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token comment">//æ—¶é—´å•ä½</span>
                      <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> workQueue<span class="token punctuation">,</span> <span class="token comment">//ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨æ¥å‚¨å­˜ç­‰å¾…æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—</span>
                      <span class="token class-name">ThreadFactory</span> threadFactory<span class="token punctuation">,</span> <span class="token comment">//çº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä¸€èˆ¬é»˜è®¤å³å¯</span>
                      <span class="token class-name">RejectedExecutionHandler</span> handler <span class="token comment">//æ‹’ç»ç­–ç•¥ï¼Œå½“æäº¤çš„ä»»åŠ¡è¿‡å¤šè€Œä¸èƒ½åŠæ—¶å¤„ç†æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®šåˆ¶ç­–ç•¥æ¥å¤„ç†ä»»åŠ¡</span>
                         <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¢ç©¶çš„å°±æ˜¯<code>BlockingQueue&lt;Runnable&gt; workQueue</code>ç±»å‹ï¼š</p><ol><li><strong>ArrayBlockingQueue</strong>: åŸºäºæ•°ç»„ç»“æ„çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œéœ€è¦é¢„å…ˆè®¾å®šå…¶å®¹é‡ã€‚</li><li><strong>LinkedBlockingQueue</strong>: åŸºäºé“¾è¡¨ç»“æ„çš„é˜»å¡é˜Ÿåˆ—ï¼Œå¯ä»¥æ˜¯æœ‰ç•Œçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ— ç•Œçš„ï¼ˆç†è®ºä¸Šï¼Œç›´åˆ°å†…å­˜è€—å°½ï¼‰ã€‚</li><li><strong>PriorityBlockingQueue</strong>: ä¸€ä¸ªå…·æœ‰ä¼˜å…ˆçº§çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚</li><li><strong>SynchronousQueue</strong>: ä¸€ä¸ªæ²¡æœ‰å­˜å‚¨ç©ºé—´çš„é˜»å¡é˜Ÿåˆ—ï¼Œæ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰å¾…ä¸€ä¸ªç›¸åº”çš„åˆ é™¤æ“ä½œã€‚</li><li><strong>DelayedQueue</strong>: ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼Œåªæœ‰å½“ä»»åŠ¡åˆ°è¾¾æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´æ—¶æ‰èƒ½ä»é˜Ÿåˆ—ä¸­æå–ã€‚</li></ol><p>ä¸åŒç±»å‹çš„é˜Ÿåˆ—æœ‰å„è‡ªçš„é€‚ç”¨åœºæ™¯å’Œä¼˜ç¼ºç‚¹ã€‚ä¾‹å¦‚ï¼Œ<code>ArrayBlockingQueue</code>å’Œ<code>LinkedBlockingQueue</code>é€šå¸¸ç”¨äºå­˜å‚¨å¤§é‡çš„ä»»åŠ¡ï¼Œè€Œ<code>SynchronousQueue</code>é€šå¸¸ç”¨äºç›´æ¥å°†ä»»åŠ¡ä¼ é€’ç»™å·¥ä½œçº¿ç¨‹ã€‚</p><h3 id="çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥èƒ½è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å—-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥èƒ½è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å—-2023-é˜¿é‡Œ" aria-hidden="true">#</a> çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥èƒ½è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å—ï¼Ÿï¼ˆ2023 é˜¿é‡Œï¼‰</h3><p>Javaçº¿ç¨‹æ± æ‹’ç»ç­–ç•¥æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>RejecttedExecutionHandler</code>æ¥å£æ¥å®šä¹‰ä½ è‡ªå·±çš„æ‹’ç»ç­–ç•¥ã€‚è¯¥æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•æ‹’ç»æ‰§è¡Œï¼ˆRunnable rï¼ŒThreadPoolExecatoræ‰§è¡Œå™¨ï¼‰ï¼Œå½“æ‰§è¡Œå™¨æ— æ³•æ‰§è¡Œä»»åŠ¡æ—¶è°ƒç”¨ã€‚ä½ å¯ä»¥å®ç°è¿™ä¸ªæ–¹æ³•æ¥å®šä¹‰ä½ è‡ªå·±çš„æ‹’ç»ç­–ç•¥ã€‚</p><p>ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomRejectedExecutionHandler</span> <span class="token keyword">implements</span> <span class="token class-name">RejectedExecutionHandler</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rejectedExecution</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> r<span class="token punctuation">,</span> <span class="token class-name">ThreadPoolExecutor</span> executor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Your custom rejection policy here</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">ThreadPoolExecutor</span> executor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>
        corePoolSize<span class="token punctuation">,</span>
        maxPoolSize<span class="token punctuation">,</span>
        keepAliveTime<span class="token punctuation">,</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CustomRejectedExecutionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="çº¿ç¨‹æ± é…ç½®æ— ç•Œé˜Ÿåˆ—äº†ä¹‹å-æ‹’ç»ç­–ç•¥æ€ä¹ˆæ-ä»€ä¹ˆæ—¶å€™ç”¨åˆ°æ— ç•Œå¯¹åˆ—-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± é…ç½®æ— ç•Œé˜Ÿåˆ—äº†ä¹‹å-æ‹’ç»ç­–ç•¥æ€ä¹ˆæ-ä»€ä¹ˆæ—¶å€™ç”¨åˆ°æ— ç•Œå¯¹åˆ—-2023-å¿«æ‰‹" aria-hidden="true">#</a> çº¿ç¨‹æ± é…ç½®æ— ç•Œé˜Ÿåˆ—äº†ä¹‹åï¼Œæ‹’ç»ç­–ç•¥æ€ä¹ˆæï¼Œä»€ä¹ˆæ—¶å€™ç”¨åˆ°æ— ç•Œå¯¹åˆ—ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>çº¿ç¨‹æ± é…ç½®æ— ç•Œé˜Ÿåˆ—äº†ä¹‹åï¼Œæ‹’ç»ç­–ç•¥å…¶å®å°±å¤±å»äº†æ„ä¹‰ï¼Œå› ä¸ºæ— è®ºæœ‰å¤šå°‘ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ï¼Œéƒ½ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œï¼Œä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ã€‚ä¸è¿‡ï¼Œè¿™æ ·å¯èƒ½å †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´ OOMã€‚å› æ­¤ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨è¯¯è§£é˜Ÿåˆ—ã€‚</p><p>å‡è®¾ä¸æ˜¯æ— ç•Œé˜Ÿåˆ—çš„è¯ï¼Œå¦‚æœå½“å‰åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°é‡å¹¶ä¸”é˜Ÿåˆ—ä¹Ÿå·²ç»è¢«æ”¾æ»¡äº†ä»»åŠ¡æ—¶ï¼Œ<code>ThreadPoolTaskExecutor</code> å®šä¹‰ä¸€äº›æ‹’ç»ç­–ç•¥:</p><ul><li><code>ThreadPoolExecutor.AbortPolicy</code>ï¼šæŠ›å‡º <code>RejectedExecutionException</code>æ¥æ‹’ç»æ–°ä»»åŠ¡çš„å¤„ç†ã€‚</li><li><code>ThreadPoolExecutor.CallerRunsPolicy</code>ï¼šè°ƒç”¨æ‰§è¡Œè‡ªå·±çš„çº¿ç¨‹è¿è¡Œä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥åœ¨è°ƒç”¨<code>execute</code>æ–¹æ³•çš„çº¿ç¨‹ä¸­è¿è¡Œ(<code>run</code>)è¢«æ‹’ç»çš„ä»»åŠ¡ï¼Œå¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡ã€‚å› æ­¤è¿™ç§ç­–ç•¥ä¼šé™ä½å¯¹äºæ–°ä»»åŠ¡æäº¤é€Ÿåº¦ï¼Œå½±å“ç¨‹åºçš„æ•´ä½“æ€§èƒ½ã€‚å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥æ‰¿å—æ­¤å»¶è¿Ÿå¹¶ä¸”ä½ è¦æ±‚ä»»ä½•ä¸€ä¸ªä»»åŠ¡è¯·æ±‚éƒ½è¦è¢«æ‰§è¡Œçš„è¯ï¼Œä½ å¯ä»¥é€‰æ‹©è¿™ä¸ªç­–ç•¥ã€‚</li><li><code>ThreadPoolExecutor.DiscardPolicy</code>ï¼šä¸å¤„ç†æ–°ä»»åŠ¡ï¼Œç›´æ¥ä¸¢å¼ƒæ‰ã€‚</li><li><code>ThreadPoolExecutor.DiscardOldestPolicy</code>ï¼šæ­¤ç­–ç•¥å°†ä¸¢å¼ƒæœ€æ—©çš„æœªå¤„ç†çš„ä»»åŠ¡è¯·æ±‚ã€‚</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>Spring é€šè¿‡ <code>ThreadPoolTaskExecutor</code> æˆ–è€…æˆ‘ä»¬ç›´æ¥é€šè¿‡ <code>ThreadPoolExecutor</code> çš„æ„é€ å‡½æ•°åˆ›å»ºçº¿ç¨‹æ± çš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬ä¸æŒ‡å®š <code>RejectedExecutionHandler</code> é¥±å’Œç­–ç•¥çš„è¯æ¥é…ç½®çº¿ç¨‹æ± çš„æ—¶å€™é»˜è®¤ä½¿ç”¨çš„æ˜¯ <code>ThreadPoolExecutor.AbortPolicy</code>ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>ThreadPoolExecutor</code> å°†æŠ›å‡º <code>RejectedExecutionException</code> æ¥æ‹’ç»æ–°æ¥çš„ä»»åŠ¡ ï¼Œè¿™ä»£è¡¨ä½ å°†ä¸¢å¤±å¯¹è¿™ä¸ªä»»åŠ¡çš„å¤„ç†ã€‚å¯¹äºå¯ä¼¸ç¼©çš„åº”ç”¨ç¨‹åºï¼Œå»ºè®®ä½¿ç”¨ <code>ThreadPoolExecutor.CallerRunsPolicy</code>ã€‚å½“æœ€å¤§æ± è¢«å¡«æ»¡æ—¶ï¼Œæ­¤ç­–ç•¥ä¸ºæˆ‘ä»¬æä¾›å¯ä¼¸ç¼©é˜Ÿåˆ—ï¼ˆè¿™ä¸ªç›´æ¥æŸ¥çœ‹ <code>ThreadPoolExecutor</code> çš„æ„é€ å‡½æ•°æºç å°±å¯ä»¥çœ‹å‡ºï¼Œæ¯”è¾ƒç®€å•çš„åŸå› ï¼Œè¿™é‡Œå°±ä¸è´´ä»£ç äº†ï¼‰ã€‚</p><h3 id="ä½¿ç”¨å¤šçº¿ç¨‹è¦æ³¨æ„å“ªäº›é—®é¢˜-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å¤šçº¿ç¨‹è¦æ³¨æ„å“ªäº›é—®é¢˜-2023-ç¾å›¢" aria-hidden="true">#</a> ä½¿ç”¨å¤šçº¿ç¨‹è¦æ³¨æ„å“ªäº›é—®é¢˜ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>ä½¿ç”¨å¤šçº¿ç¨‹æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸€æ•°æ®æ—¶ï¼Œå¦‚æœä¸è¿›è¡Œæ­£ç¡®çš„åŒæ­¥æ§åˆ¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚éœ€è¦é€šè¿‡ä½¿ç”¨synchronizedï¼ŒLockï¼Œvolatileç­‰æœºåˆ¶æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li><li><strong>æ­»é”</strong>ï¼šæ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›å¹²æ¶‰é‚£ä»–ä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æˆ‘ä»¬åº”é¿å…åœ¨ä»£ç ä¸­äº§ç”Ÿæ­»é”ã€‚</li><li><strong>æ´»é”</strong>ï¼šæ´»é”æŒ‡çš„æ˜¯çº¿ç¨‹è™½ç„¶æ²¡æœ‰è¢«é˜»å¡ï¼Œä½†æ˜¯ç”±äºæŸç§æ¡ä»¶æ²¡æœ‰è¢«æ»¡è¶³ï¼Œå§‹ç»ˆæ— æ³•å‘å‰æ‰§è¡Œï¼Œå°±åƒåœ¨åŸåœ°è¸æ­¥ã€‚</li><li><strong>é¥¥é¥¿</strong>ï¼šç”±äºçº¿ç¨‹çš„ä¼˜å…ˆçº§è®¾ç½®ä¸åˆç†æˆ–è€…é”æœºåˆ¶ä¸å…¬å¹³ï¼Œå¯¼è‡´æŸäº›çº¿ç¨‹å§‹ç»ˆæ— æ³•è·å–åˆ°CPUèµ„æºæˆ–è€…é”èµ„æºï¼Œä»è€Œæ— æ³•è¿›è¡Œå·¥ä½œã€‚</li><li><strong>èµ„æºæ¶ˆè€—</strong>ï¼šæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå ç”¨ä¸€å®šçš„å†…å­˜èµ„æºï¼Œè¿‡å¤šçš„çº¿ç¨‹å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºæ¶ˆè€—è¿‡å¤§ã€‚åŒæ—¶ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä¹Ÿä¼šæ¶ˆè€—CPUèµ„æºï¼Œè¿‡å¤šçš„çº¿ç¨‹ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´CPUè´Ÿè½½è¿‡å¤§ã€‚</li><li><strong>æ•°æ®å…±äº«å’Œå¯è§æ€§</strong>ï¼šå¤šçº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®ï¼Œéœ€è¦ä¿è¯ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„ä¿®æ”¹å¯¹å…¶ä»–çº¿ç¨‹å¯è§ï¼Œå¯ä»¥ä½¿ç”¨volatileæˆ–è€…Atomicç±»æ¥ä¿è¯ã€‚</li><li><strong>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šéœ€è¦åˆç†çš„åˆ›å»ºã€å¯åŠ¨ã€æš‚åœã€æ¢å¤ã€ç»ˆæ­¢çº¿ç¨‹ï¼Œä¸åˆç†çš„ç®¡ç†å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºé”™è¯¯æˆ–è€…èµ„æºæ³„æ¼ã€‚</li><li><strong>çº¿ç¨‹å¼‚å¸¸å¤„ç†</strong>ï¼šçº¿ç¨‹ä¸­çš„æœªæ•è·å¼‚å¸¸ä¼šå¯¼è‡´çº¿ç¨‹ç»ˆæ­¢ï¼Œè€Œä¸”è¿™ä¸ªå¼‚å¸¸ä¸èƒ½è¢«å¤–éƒ¨æ•è·ã€‚éœ€è¦ä¸ºçº¿ç¨‹è®¾ç½®UncaughtExceptionHandleræ¥å¤„ç†æœªæ•è·çš„å¼‚å¸¸ã€‚</li></ol><h3 id="ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§æœ‰å“ªäº›æ–¹æ¡ˆå‘¢-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§æœ‰å“ªäº›æ–¹æ¡ˆå‘¢-2023-ç¾å›¢" aria-hidden="true">#</a> ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§æœ‰å“ªäº›æ–¹æ¡ˆå‘¢ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼š</p><ol><li><strong>åŒæ­¥è¯­å¥å—(Synchronized Blocks)</strong>ï¼šåœ¨Javaä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨synchronizedå…³é”®å­—å¯¹ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ–¹æ³•è¿›è¡Œé”å®šï¼Œæ¥ä¿è¯åœ¨ä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å¯¹è±¡æˆ–è€…æ–¹æ³•ï¼Œä»è€Œé¿å…æ•°æ®çš„ä¸ä¸€è‡´ã€‚</li><li><strong>Volatileå…³é”®å­—</strong>ï¼švolatileå…³é”®å­—å¯ä»¥ä¿è¯å˜é‡çš„å¯è§æ€§ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»ä¸»å­˜ä¸­è¯»å–æ–°å€¼ã€‚</li><li><strong>åŸå­ç±»ï¼ˆAtomic Classesï¼‰</strong>ï¼šJavaæä¾›äº†ä¸€ç»„åŸå­ç±»ï¼ˆå¦‚AtomicIntegerã€AtomicLongç­‰ï¼‰ï¼Œå®ƒä»¬ä½¿ç”¨äº†é«˜æ•ˆçš„æœºå™¨çº§æŒ‡ä»¤æ¥ä¿è¯åŸå­æ€§æ“ä½œï¼Œä»è€Œé¿å…äº†å¤æ‚çš„åŒæ­¥ã€‚</li><li><strong>Lockæ¥å£å’Œç›¸å…³ç±»</strong>ï¼šJavaå¹¶å‘åº“æä¾›äº†æ˜¾å¼çš„é”æœºåˆ¶ï¼ŒåŒ…æ‹¬ReentrantLockã€ReadWriteLockç­‰ï¼Œå¯ä»¥æä¾›æ¯”synchronizedæ›´çµæ´»çš„é”å®šæœºåˆ¶ã€‚</li><li><strong>å¹¶å‘é›†åˆï¼ˆConcurrent Collectionsï¼‰</strong>ï¼šJavaæä¾›äº†ä¸€ç»„å¹¶å‘é›†åˆç±»ï¼ˆå¦‚ConcurrentHashMapã€CopyOnWriteArrayListç­‰ï¼‰ï¼Œå®ƒä»¬å†…éƒ¨å·²ç»å®ç°äº†å¹¶å‘æ§åˆ¶ï¼Œå¯ä»¥åœ¨å¹¶å‘ç¯å¢ƒä¸­å®‰å…¨ä½¿ç”¨ã€‚</li><li><strong>äº‹åŠ¡ï¼ˆTransactionsï¼‰</strong>ï¼šåœ¨æ•°æ®åº“å’ŒæŸäº›æ”¯æŒäº‹åŠ¡çš„ç³»ç»Ÿä¸­ï¼Œå¯ä»¥é€šè¿‡äº‹åŠ¡æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚Javaä¸­çš„JPAå’ŒSpringç­‰æ¡†æ¶æä¾›äº†å¯¹äº‹åŠ¡çš„æ”¯æŒã€‚</li></ol><p>ä»¥ä¸Šå°±æ˜¯åœ¨Javaä¸­ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ä¸€äº›å¸¸ç”¨æ–¹æ¡ˆï¼Œé€‰æ‹©å“ªç§æ–¹æ¡ˆå–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚</p><h3 id="æ€ä¹ˆè·å–å­çº¿ç¨‹çš„è¿”å›å€¼-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆè·å–å­çº¿ç¨‹çš„è¿”å›å€¼-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> æ€ä¹ˆè·å–å­çº¿ç¨‹çš„è¿”å›å€¼ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œè‹¥è¦è·å–å­çº¿ç¨‹çš„è¿”å›å€¼ï¼Œå¯ä»¥ä½¿ç”¨Callableæ¥å£å’ŒFutureç±»ã€‚Callableæ¥å£å…è®¸ä½ å®šä¹‰ä¸€ä¸ªè¿”å›å€¼çš„ä»»åŠ¡ï¼Œè€ŒFutureç±»åˆ™ä»£è¡¨è¿™ä¸ªä»»åŠ¡çš„ç»“æœã€‚ä¸ºäº†è·å–å­çº¿ç¨‹çš„è¿”å›å€¼ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªå®ç°Callableæ¥å£çš„ç±»ï¼Œå¹¶é‡å†™call()æ–¹æ³•ã€‚ç„¶åï¼Œå°†è¿™ä¸ªCallableå¯¹è±¡æäº¤ç»™ExecutorServiceï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªFutureå¯¹è±¡ã€‚é€šè¿‡è°ƒç”¨Futureå¯¹è±¡çš„get()æ–¹æ³•ï¼Œä¸»çº¿ç¨‹å¯ä»¥ç­‰å¾…å¹¶è·å–å­çº¿ç¨‹çš„è¿”å›å€¼ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutionException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Future</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorService</span> executor <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
                <span class="token comment">// è¿™é‡Œå†™ä½ çš„å­çº¿ç¨‹é€»è¾‘ï¼Œå¹¶è¿”å›ç»“æœ</span>
                <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result <span class="token operator">+=</span> i<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¸»çº¿ç¨‹ç­‰å¾…å¹¶è·å–å­çº¿ç¨‹çš„è¿”å›å€¼</span>
            <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹çš„è¿”å›å€¼: &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> <span class="token operator">|</span> <span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            executor<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å­çº¿ç¨‹æŠ›å¼‚å¸¸-ä¸»çº¿ç¨‹-try-catch-æ˜¯å¦å¯ä»¥è·å–åˆ°å¼‚å¸¸-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#å­çº¿ç¨‹æŠ›å¼‚å¸¸-ä¸»çº¿ç¨‹-try-catch-æ˜¯å¦å¯ä»¥è·å–åˆ°å¼‚å¸¸-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> å­çº¿ç¨‹æŠ›å¼‚å¸¸ï¼Œä¸»çº¿ç¨‹ try-catch æ˜¯å¦å¯ä»¥è·å–åˆ°å¼‚å¸¸ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>ç­”æ¡ˆï¼šå¯ä»¥ã€‚</p><p>å½“ä½¿ç”¨ Callable å’Œ Future æ—¶ï¼Œå¦‚æœå­çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œä¸»çº¿ç¨‹å¯ä»¥é€šè¿‡è°ƒç”¨ Future.get() æ–¹æ³•æ—¶æ•è·å¼‚å¸¸æ¥è·å–å®ƒã€‚Future.get() æ–¹æ³•å¯ä»¥æŠ›å‡ºä¸€ä¸ª ExecutionExceptionï¼Œè¿™ä¸ªå¼‚å¸¸åŒ…è£…äº†å­çº¿ç¨‹æŠ›å‡ºçš„çœŸå®å¼‚å¸¸ã€‚è¦è·å–å­çº¿ç¨‹çš„å¼‚å¸¸ï¼Œä½ å¯ä»¥åœ¨ä¸»çº¿ç¨‹çš„ try-catch è¯­å¥ä¸­æ•è· ExecutionExceptionï¼Œç„¶åè°ƒç”¨ getCause() æ–¹æ³•æ¥è·å–å­çº¿ç¨‹çš„å¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutionException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Future</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorService</span> executor <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
                <span class="token comment">// è¿™é‡Œæ•…æ„æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¸»çº¿ç¨‹ç­‰å¾…å¹¶è·å–å­çº¿ç¨‹çš„è¿”å›å€¼</span>
            <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å–å¹¶å¤„ç†å­çº¿ç¨‹æŠ›å‡ºçš„å¼‚å¸¸</span>
            <span class="token class-name">Throwable</span> cause <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹æŠ›å‡ºçš„å¼‚å¸¸: &quot;</span> <span class="token operator">+</span> cause<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            executor<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="atomicintegeræ˜¯æ€ä¹ˆæ›´æ–°ä¿è¯åŸå­æ€§çš„-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#atomicintegeræ˜¯æ€ä¹ˆæ›´æ–°ä¿è¯åŸå­æ€§çš„-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> AtomicIntegeræ˜¯æ€ä¹ˆæ›´æ–°ä¿è¯åŸå­æ€§çš„ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>AtomicInteger æ˜¯ Java å¹¶å‘åŒ… java.util.concurrent.atomic ä¸­çš„ä¸€ä¸ªç±»ï¼Œå®ƒç”¨äºæ‰§è¡ŒåŸå­æ“ä½œã€‚åŸå­æ“ä½œæ˜¯ä¸€ç§ä¸å¯ä¸­æ–­çš„æ“ä½œï¼Œæ— è®ºåœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦è¿™ä¸ªæ“ä½œå¼€å§‹ï¼Œå°±ä¼šè¿è¡Œåˆ°ç»“æŸï¼Œä¸ä¼šå‡ºç°ä¸­é—´æ€ã€‚è¿™æ˜¯ä¸€ç§é¿å…å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜çš„å¸¸ç”¨æ‰‹æ®µã€‚</p><p>AtomicInteger åœ¨å†…éƒ¨é€šè¿‡å¾ˆä½çº§çš„åŸå­ç¡¬ä»¶æŒ‡ä»¤ç›´æ¥æ”¯æŒåŸå­æ€§ã€‚ä¸»è¦ä½¿ç”¨äº†ä¸€ç§åä¸ºâ€œCompare and Swapâ€ï¼ˆCASï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼‰çš„ç®—æ³•æ¥å®ç°åŸå­æ€§ã€‚è¿™ç§ç®—æ³•ä½¿ç”¨ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ªå†…å­˜ä½ç½® Vã€é¢„æœŸçš„åŸå§‹å€¼ A å’Œæ–°å€¼ Bã€‚è¯¥ç®—æ³•ä»…å½“å†…å­˜ä½ç½® V çš„å½“å‰å€¼ä¸é¢„æœŸçš„åŸå§‹å€¼ A ç›¸åŒ¹é…æ—¶ï¼Œæ‰ä¼šå°†å†…å­˜ä½ç½® V çš„å€¼æ›´æ–°ä¸ºæ–°å€¼ Bã€‚å¦‚æœå†…å­˜ä½ç½® V çš„å½“å‰å€¼ä¸é¢„æœŸå€¼ A ä¸åŒ¹é…ï¼Œé‚£ä¹ˆæ“ä½œä¼šå¤±è´¥ï¼Œé€šå¸¸è¿™ä¸ªæ“ä½œä¼šåœ¨ä¸€ä¸ªå¾ªç¯ä¸­è¿›è¡Œï¼Œç›´åˆ°æ“ä½œæˆåŠŸã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> expect<span class="token punctuation">,</span> <span class="token keyword">int</span> update<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> unsafe<span class="token punctuation">.</span><span class="token function">compareAndSwapInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> valueOffset<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>AtomicInteger çš„æºç ä¸­,ä½¿ç”¨ Unsafe ç±»çš„ CAS æ“ä½œæ¥å®ç°:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Unsafe</span> unsafe <span class="token operator">=</span> <span class="token class-name">Unsafe</span><span class="token punctuation">.</span><span class="token function">getUnsafe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> valueOffset<span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        valueOffset <span class="token operator">=</span> unsafe<span class="token punctuation">.</span>objectFieldOffset
            <span class="token punctuation">(</span><span class="token class-name">AtomicInteger</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> unsafe<span class="token punctuation">.</span><span class="token function">getAndAddInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> valueOffset<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>unsafe.getAndAddInt() æ–¹æ³•å®ç°äº† CAS,å®ƒä¼šè·å–å½“å‰å€¼,åŠ  1,å¹¶æ¯”è¾ƒå½“å‰å€¼æ˜¯å¦æ”¹å˜,å¦‚æœæ²¡æœ‰æ”¹å˜åˆ™æ›´æ–°,å¦åˆ™é‡æ–°è·å–å€¼ã€‚</p><p>æ‰€ä»¥ AtomicInteger é€šè¿‡ CAS æ— é”æ“ä½œå®ç°äº†çº¿ç¨‹å®‰å…¨çš„é€’å¢æ“ä½œã€‚</p><h3 id="futureæŠ›å‡ºçš„ä¸¤ä¸ªå¼‚å¸¸çš„å¯¹æ¯”-éƒ½æœ‰ä»€ä¹ˆç”¨-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#futureæŠ›å‡ºçš„ä¸¤ä¸ªå¼‚å¸¸çš„å¯¹æ¯”-éƒ½æœ‰ä»€ä¹ˆç”¨-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> FutureæŠ›å‡ºçš„ä¸¤ä¸ªå¼‚å¸¸çš„å¯¹æ¯”ï¼Œéƒ½æœ‰ä»€ä¹ˆç”¨ï¼Ÿï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œ<code>Future</code>æ¥å£åœ¨å…¶æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šæŠ›å‡ºä»¥ä¸‹å¼‚å¸¸ï¼š</p><ol><li><p><strong>InterruptedException</strong>ï¼šå½“çº¿ç¨‹åœ¨ç­‰å¾…ã€ç¡çœ æˆ–å…¶ä»–å ç”¨æ—¶é—´çš„æ“ä½œä¸­è¢«ä¸­æ–­æ—¶å¯èƒ½ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œ<code>Future.get()</code>æ–¹æ³•ä¼šåœ¨ç­‰å¾…è®¡ç®—å®Œæˆæ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ï¼Œå¦‚æœçº¿ç¨‹åœ¨ç­‰å¾…è¿‡ç¨‹ä¸­è¢«ä¸­æ–­ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle exception</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ExecutionException</strong>ï¼šå¦‚æœ<code>Future</code>çš„è®¡ç®—æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆ<code>Future.get()</code>æ–¹æ³•ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚è¿™ä¸ªå¼‚å¸¸çš„åŸå› å¯ä»¥é€šè¿‡<code>ExecutionException.getCause()</code>è·å¾—ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Throwable</span> cause <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// handle exception</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>TimeoutException</strong>ï¼šå½“<code>Future.get(long timeout, TimeUnit unit)</code>åœ¨è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰å¾—åˆ°ç»“æœæ—¶ï¼Œä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">TimeoutException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle exception</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>CancellationException</strong>ï¼šå½“å°è¯•å–å›å·²ç»å–æ¶ˆçš„ä»»åŠ¡çš„ç»“æœæ—¶ï¼Œä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
future<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CancellationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle exception</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>è¯·æ³¨æ„ï¼Œè¿™äº›å¼‚å¸¸éƒ½å¿…é¡»è¢«æ•è·å’Œå¤„ç†ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯<code>java.lang.Exception</code>çš„å­ç±»ï¼Œæ˜¯å·²æ£€æŸ¥çš„å¼‚å¸¸ã€‚</p>`,66),an=n("p",null,"å‚è€ƒï¼š",-1),en={href:"https://stackoverflow.com/questions/2665569/in-what-cases-does-future-get-throw-executionexception-or-interruptedexception",target:"_blank",rel:"noopener noreferrer"},tn={href:"https://stackoverflow.com/questions/2248131/handling-exceptions-from-java-executorservice-tasks",target:"_blank",rel:"noopener noreferrer"},on={href:"https://www.baeldung.com/java-future",target:"_blank",rel:"noopener noreferrer"},pn={href:"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html",target:"_blank",rel:"noopener noreferrer"},ln=t('<h3 id="çº¿ç¨‹æ± ä»»åŠ¡æäº¤-æ¯”å¦‚è°ƒç”¨executeæˆ–submit-apiä¹‹åçš„æµç¨‹æœ‰äº†è§£å—-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± ä»»åŠ¡æäº¤-æ¯”å¦‚è°ƒç”¨executeæˆ–submit-apiä¹‹åçš„æµç¨‹æœ‰äº†è§£å—-2023-å½±çŸ³360" aria-hidden="true">#</a> çº¿ç¨‹æ± ä»»åŠ¡æäº¤ï¼Œæ¯”å¦‚è°ƒç”¨executeæˆ–submit APIä¹‹åçš„æµç¨‹æœ‰äº†è§£å—ï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œçº¿ç¨‹æ± æ˜¯ä¸€ä¸ªåœ¨åå°è¿è¡Œçš„çº¿ç¨‹é›†åˆï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡Œå¹¶å‘ä»»åŠ¡ã€‚å½“æˆ‘ä»¬åœ¨çº¿ç¨‹æ± ä¸­è°ƒç”¨<code>execute</code>æˆ–<code>submit</code>æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹æ± ä¼šå¤„ç†ä»»åŠ¡çš„è°ƒåº¦å’Œæ‰§è¡Œã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€è¦çš„æµç¨‹æè¿°ï¼š</p><ol><li><strong>ä»»åŠ¡æäº¤</strong>ï¼šå½“ä¸€ä¸ªæ–°ä»»åŠ¡é€šè¿‡<code>execute()</code>æˆ–<code>submit()</code>æ–¹æ³•æäº¤åˆ°çº¿ç¨‹æ± æ—¶ï¼Œçº¿ç¨‹æ± é¦–å…ˆä¼šåˆ¤æ–­å½“å‰æ´»è·ƒçš„çº¿ç¨‹æ•°é‡æ˜¯å¦å°äº<code>corePoolSize</code>ï¼ˆæ ¸å¿ƒçº¿ç¨‹æ•°ï¼‰ã€‚</li><li><strong>ä»»åŠ¡åˆ†é…</strong>ï¼š <ul><li>å¦‚æœå°äº<code>corePoolSize</code>ï¼Œçº¿ç¨‹æ± ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œå³ä½¿å…¶ä»–çº¿ç¨‹æ˜¯ç©ºé—²çš„ã€‚</li><li>å¦‚æœå¤§äºæˆ–ç­‰äº<code>corePoolSize</code>ï¼Œçº¿ç¨‹æ± ä¼šå°è¯•å°†ä»»åŠ¡æ·»åŠ åˆ°å·¥ä½œé˜Ÿåˆ—ï¼ˆ<code>workQueue</code>ï¼‰ã€‚</li><li>å¦‚æœå·¥ä½œé˜Ÿåˆ—å·²æ»¡ï¼Œä¸”æ´»è·ƒçº¿ç¨‹æ•°é‡å°äº<code>maximumPoolSize</code>ï¼ˆæœ€å¤§çº¿ç¨‹æ•°ï¼‰ï¼Œçº¿ç¨‹æ± ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªä»»åŠ¡ã€‚</li><li>å¦‚æœå·¥ä½œé˜Ÿåˆ—å·²æ»¡ï¼Œä¸”æ´»è·ƒçº¿ç¨‹æ•°é‡ç­‰äº<code>maximumPoolSize</code>ï¼Œçº¿ç¨‹æ± ä¼šæ ¹æ®å…¶é¥±å’Œç­–ç•¥ï¼ˆ<code>RejectedExecutionHandler</code>ï¼‰æ¥å¤„ç†è¿™ä¸ªä»»åŠ¡ã€‚</li></ul></li><li><strong>ä»»åŠ¡æ‰§è¡Œ</strong>ï¼šçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä»å·¥ä½œé˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œã€‚å¦‚æœçº¿ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡æ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œå°†ä¼šè¢«çº¿ç¨‹æ± æ•è·ï¼Œå¹¶æ ¹æ®å…·ä½“çš„æƒ…å†µå†³å®šæ˜¯å¦éœ€è¦æ›¿æ¢è¿™ä¸ªçº¿ç¨‹ã€‚</li><li><strong>ä»»åŠ¡å®Œæˆ</strong>ï¼šå½“ä¸€ä¸ªä»»åŠ¡å®Œæˆæ—¶ï¼Œçº¿ç¨‹ä¼šè¿”å›åˆ°çº¿ç¨‹æ± å¹¶ä¿æŒç©ºé—²çŠ¶æ€ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªä»»åŠ¡çš„åˆ†é…ã€‚</li></ol><p>è¯·æ³¨æ„ï¼Œ<code>execute()</code>æ–¹æ³•å’Œ<code>submit()</code>æ–¹æ³•æœ‰ä¸€äº›åŒºåˆ«ï¼š</p><ul><li><code>execute()</code>æ–¹æ³•ç”¨äºæäº¤æ²¡æœ‰è¿”å›å€¼çš„ä»»åŠ¡ï¼Œæ‰€ä»¥å®ƒä¸ä¼šè¿”å›ä»»ä½•ä¸œè¥¿ã€‚</li><li><code>submit()</code>æ–¹æ³•ç”¨äºæäº¤éœ€è¦è¿”å›å€¼çš„ä»»åŠ¡ã€‚å®ƒè¿”å›ä¸€ä¸ª<code>Future</code>å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ª<code>Future</code>å¯¹è±¡å¯ä»¥è·å–ä»»åŠ¡çš„ç»“æœã€‚</li></ul><h3 id="aqsé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ€ä¹ˆçŸ¥é“é”è¢«é‡Šæ”¾äº†-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#aqsé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ€ä¹ˆçŸ¥é“é”è¢«é‡Šæ”¾äº†-2023-ç¾å›¢" aria-hidden="true">#</a> AQSé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ€ä¹ˆçŸ¥é“é”è¢«é‡Šæ”¾äº†ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>AQS ä½¿ç”¨ä¸€ä¸ª int æˆå‘˜å˜é‡æ¥è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œå¹¶åŸºäºä¸€ä¸ª FIFO é˜Ÿåˆ—æ¥ç®¡ç†é‚£äº›å°è¯•è·å–èµ„æºä½†å¤±è´¥çš„çº¿ç¨‹ã€‚</p><p>å½“çº¿ç¨‹å°è¯•è·å–èµ„æºä½†å¤±è´¥æ—¶ï¼Œå®ƒä¼šè¢«åŒ…è£…æˆä¸€ä¸ªèŠ‚ç‚¹ï¼ˆNodeï¼‰å¹¶åŠ å…¥åˆ° AQS çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾æ¥ï¼ˆprevï¼‰å’Œä¸€ä¸ªæŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹çš„é“¾æ¥ï¼ˆnextï¼‰ï¼Œè¿™å½¢æˆäº†ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚</p><p>é‚£ä¹ˆï¼Œä¸€ä¸ªèŠ‚ç‚¹ï¼ˆçº¿ç¨‹ï¼‰å¦‚ä½•çŸ¥é“é”å·²ç»è¢«é‡Šæ”¾äº†å‘¢ï¼Ÿè¿™ä¸»è¦æ˜¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å®ç°çš„ï¼š</p><ol><li><strong>çŠ¶æ€å˜é‡</strong>ï¼šAQS ä¸­çš„çŠ¶æ€å˜é‡æ˜¯ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ã€‚å½“ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”æ—¶ï¼Œå®ƒä¼šå°è¯•å°†çŠ¶æ€å˜é‡è®¾ä¸º 0 æˆ–ç›¸åº”çš„å€¼ã€‚ä»»ä½•å°è¯•è·å–é”çš„çº¿ç¨‹éƒ½ä¼šé¦–å…ˆæ£€æŸ¥è¿™ä¸ªçŠ¶æ€å˜é‡ã€‚</li><li><strong>å‰é©±èŠ‚ç‚¹</strong>ï¼šå½“ä¸€ä¸ªçº¿ç¨‹å°è¯•è·å–é”å¹¶å¤±è´¥æ—¶ï¼Œå®ƒä¼šè¢«æ”¾åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”é€šå¸¸ä¼šè¿›å…¥ä¼‘çœ æ¨¡å¼ã€‚å½“å®ƒå‰é¢çš„èŠ‚ç‚¹ï¼ˆå®ƒçš„å‰é©±ï¼‰æˆåŠŸè·å–å¹¶éšåé‡Šæ”¾é”æ—¶ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„çº¿ç¨‹ä¼šè¢«å”¤é†’ã€‚è¿™æ˜¯é€šè¿‡å‰é©±èŠ‚ç‚¹ç›´æ¥å”¤é†’å…¶åç»§èŠ‚ç‚¹çš„çº¿ç¨‹æ¥å®ç°çš„ã€‚</li><li><strong>LockSupport</strong>ï¼šAQS ä½¿ç”¨ <code>LockSupport.park()</code> å’Œ <code>LockSupport.unpark(thread)</code> æ–¹æ³•æ¥æŒ‚èµ·å’Œå”¤é†’çº¿ç¨‹ã€‚å½“ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½è·å–é”æ—¶ï¼Œå®ƒä¼šè¢«æŒ‚èµ·ï¼ˆå³è°ƒç”¨ <code>LockSupport.park()</code>ï¼‰ã€‚å½“é”è¢«é‡Šæ”¾æ—¶ï¼Œç›¸åº”çš„çº¿ç¨‹ï¼ˆé€šå¸¸æ˜¯ç­‰å¾…é˜Ÿåˆ—ä¸­çš„å¤´éƒ¨çº¿ç¨‹ï¼‰ä¼šè¢«å”¤é†’ï¼Œå³è°ƒç”¨ <code>LockSupport.unpark(thread)</code>ã€‚</li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå½“é”è¢«é‡Šæ”¾æ—¶ï¼Œæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹çŸ¥æ™“è¿™ä¸ªå˜åŒ–æ˜¯é€šè¿‡æ£€æŸ¥çŠ¶æ€å˜é‡ã€å‰é©±èŠ‚ç‚¹çš„é€šçŸ¥ï¼Œä»¥åŠ <code>LockSupport</code> çš„æŒ‚èµ·/å”¤é†’æœºåˆ¶æ¥å®ç°çš„ã€‚</p><h2 id="ğŸƒ-å¸¸ç”¨æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#ğŸƒ-å¸¸ç”¨æ¡†æ¶" aria-hidden="true">#</a> ğŸƒ å¸¸ç”¨æ¡†æ¶</h2><h3 id="mybatisè¿ç”¨äº†å“ªäº›å¸¸è§çš„è®¾è®¡æ¨¡å¼-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#mybatisè¿ç”¨äº†å“ªäº›å¸¸è§çš„è®¾è®¡æ¨¡å¼-2023-ç¾å›¢" aria-hidden="true">#</a> MyBatisè¿ç”¨äº†å“ªäº›å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ul><li><strong>å·¥å‚æ¨¡å¼</strong>ï¼Œå·¥å‚æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ SqlSessionFactory</li><li><strong>å»ºé€ è€…æ¨¡å¼</strong>ï¼Œå»ºé€ è€…æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ SqlSessionFactoryBuilder</li><li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼Œå•ä¾‹æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ ErrorContext</li><li><strong>é€‚é…å™¨æ¨¡å¼</strong>ï¼Œé€‚é…å™¨æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ Log</li><li><strong>ä»£ç†æ¨¡å¼</strong>ï¼Œä»£ç†æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ MapperProxyFactory</li><li><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ï¼Œæ¨¡æ¿æ–¹æ³•åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ BaseExecutor</li><li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼Œè£…é¥°å™¨æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ Cache</li><li><strong>è¿­ä»£å™¨æ¨¡å¼</strong>ï¼Œå¦‚è¿­ä»£å™¨æ¨¡å¼Properties tyTokenizerï¼›</li><li><strong>ç»„åˆæ¨¡å¼</strong>ï¼Œå¦‚SqlNodeå’Œæ¯ä¸ªå­ç±»ChooseSqlNodeï¼›</li></ul>',14),cn=n("p",null,"å‚è€ƒæ–‡çŒ®ï¼š",-1),rn={href:"https://programming.vip/docs/6200e8e7b682c.html",target:"_blank",rel:"noopener noreferrer"},un={href:"https://programming.vip/docs/mybatis-design-pattern.html",target:"_blank",rel:"noopener noreferrer"},dn=t('<h3 id="mybatisä¸­åˆ›å»ºäº†ä¸€ä¸ªmapperæ¥å£-åœ¨å†™ä¸€ä¸ªxmlæ–‡ä»¶-javaçš„æ¥å£æ˜¯è¦å®ç°çš„-ä¸ºä»€ä¹ˆè¿™æ²¡æœ‰å®ç°å‘¢-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#mybatisä¸­åˆ›å»ºäº†ä¸€ä¸ªmapperæ¥å£-åœ¨å†™ä¸€ä¸ªxmlæ–‡ä»¶-javaçš„æ¥å£æ˜¯è¦å®ç°çš„-ä¸ºä»€ä¹ˆè¿™æ²¡æœ‰å®ç°å‘¢-2023-ç¾å›¢" aria-hidden="true">#</a> MyBatisä¸­åˆ›å»ºäº†ä¸€ä¸ªMapperæ¥å£ï¼Œåœ¨å†™ä¸€ä¸ªxmlæ–‡ä»¶ï¼Œjavaçš„æ¥å£æ˜¯è¦å®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¿™æ²¡æœ‰å®ç°å‘¢ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>MyBatisä¸­çš„Mapperæ¥å£å¹¶ä¸éœ€è¦å®ç°ï¼Œå®ƒåªæ˜¯å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ç­¾åã€‚MyBatisä¼šæ ¹æ®Mapperæ¥å£ä¸­çš„æ–¹æ³•åã€å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ï¼Œè‡ªåŠ¨ç”Ÿæˆå®ç°æ–¹æ³•ã€‚å› æ­¤ï¼ŒMapperæ¥å£ä¸­çš„æ–¹æ³•ä¸éœ€è¦å®ç°ï¼Œä¹Ÿä¸éœ€è¦åœ¨è¯¥æ¥å£ä¸­ç¼–å†™ä»»ä½•æ–¹æ³•ä½“ã€‚</p><p>ç›¸åï¼Œä½ éœ€è¦ç¼–å†™ä¸€ä¸ªä¸Mapperæ¥å£åŒåçš„XMLæ–‡ä»¶ï¼Œæ¥å®ç°è¿™äº›æ–¹æ³•çš„å…·ä½“SQLæ“ä½œã€‚è¿™æ ·ï¼Œå½“ä½ åœ¨Javaä»£ç ä¸­è°ƒç”¨Mapperæ¥å£ä¸­çš„æ–¹æ³•æ—¶ï¼ŒMyBatisä¼šè‡ªåŠ¨å°†è¯¥æ–¹æ³•æ˜ å°„åˆ°å¯¹åº”çš„XMLæ–‡ä»¶ä¸­çš„SQLè¯­å¥ï¼Œå¹¶æ‰§è¡Œè¯¥è¯­å¥ã€‚</p><h3 id="ä¸ä¼ ç»Ÿçš„jdbcç›¸æ¯”-mybatisçš„ä¼˜ç‚¹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ä¸ä¼ ç»Ÿçš„jdbcç›¸æ¯”-mybatisçš„ä¼˜ç‚¹-2023-ç¾å›¢" aria-hidden="true">#</a> ä¸ä¼ ç»Ÿçš„JDBCç›¸æ¯”ï¼ŒMyBatisçš„ä¼˜ç‚¹ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>åœ¨é¢è¯•ä¸­ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹çš„æ–¹å¼æ¥å›ç­”ï¼š</p><ol><li>é¦–å…ˆï¼Œæˆ‘è®¤ä¸ºæœ€å¤§çš„ä¼˜ç‚¹æ˜¯MyBatisæä¾›äº†æ›´é«˜çš„<strong>çµæ´»æ€§</strong>ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ç¼–å†™SQLï¼Œè¿™æ ·å¯ä»¥å……åˆ†åˆ©ç”¨æ•°æ®åº“çš„ç‰¹æ€§å¹¶ä¸”æ›´å¥½åœ°æ§åˆ¶æŸ¥è¯¢ã€‚</li><li>å…¶æ¬¡ï¼ŒMyBatisä½¿æˆ‘ä»¬<strong>æ— éœ€æ‰‹åŠ¨</strong>è½¬æ¢æ•°æ®ï¼Œå®ƒèƒ½è‡ªåŠ¨å°†ç»“æœé›†æ˜ å°„åˆ°Javaå¯¹è±¡ï¼Œè¿™å¤§å¤§ç®€åŒ–äº†ç¼–ç¨‹å·¥ä½œã€‚</li><li>æ­¤å¤–ï¼ŒMyBatisæ”¯æŒ<strong>åŠ¨æ€SQL</strong>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨åŠ¨æ€å…ƒç´ ï¼Œå¦‚ifã€chooseç­‰ï¼Œä»è€Œèƒ½å¤Ÿåˆ›å»ºæ›´å¤æ‚çš„æŸ¥è¯¢ã€‚</li><li>é™¤æ­¤ä¹‹å¤–ï¼ŒMyBatiså°†SQLè¯­å¥æ”¾åœ¨<strong>XMLæ–‡ä»¶æˆ–æ³¨è§£</strong>ä¸­ï¼Œå®ç°äº†SQLä¸Javaä»£ç çš„åˆ†ç¦»ï¼Œè¿™ä½¿å¾—ä»£ç æ›´åŠ æ˜“äºç»´æŠ¤ã€‚</li><li>MyBatisä¹Ÿèƒ½<strong>æ›´å¥½åœ°å¤„ç†ä¸€å¯¹å¤šã€å¤šå¯¹å¤š</strong>ç­‰å¤æ‚å…³ç³»ã€‚</li><li>æœ€åï¼ŒMyBatisæä¾›äº†<strong>ä¸€äº›JDBCæ— æ³•æä¾›çš„ç‰¹æ€§</strong>ï¼Œå¦‚å»¶è¿ŸåŠ è½½ï¼Œè¿™å¯¹äºæ€§èƒ½ä¼˜åŒ–æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li></ol><h3 id="jdbcè¿æ¥æ•°æ®åº“çš„æ­¥éª¤-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#jdbcè¿æ¥æ•°æ®åº“çš„æ­¥éª¤-2023-ç¾å›¢" aria-hidden="true">#</a> JDBCè¿æ¥æ•°æ®åº“çš„æ­¥éª¤ï¼ˆ2023 ç¾å›¢ï¼‰</h3>',7),kn=n("ol",null,[n("li",null,[n("strong",null,"åŠ è½½æ•°æ®åº“é©±åŠ¨ç¨‹åº"),s('ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½æ•°æ®åº“é©±åŠ¨ã€‚è¿™å¯ä»¥é€šè¿‡ Class.forName() æ–¹æ³•å®ç°ï¼Œä¾‹å¦‚ Class.forName("com.mysql.jdbc.Driver")ã€‚')]),n("li",null,[n("strong",null,"å»ºç«‹æ•°æ®åº“è¿æ¥"),s('ï¼šä½¿ç”¨DriverManager.getConnection()æ–¹æ³•å»ºç«‹ä¸æ•°æ®åº“çš„è¿æ¥ï¼Œéœ€è¦æŒ‡å®šæ•°æ®åº“çš„URLã€ç”¨æˆ·åå’Œå¯†ç ï¼Œä¾‹å¦‚ï¼šConnection conn = DriverManager.getConnection("jdbc:mysql://localhost/mydatabase", "username", "password");')]),n("li",null,[n("strong",null,"åˆ›å»ºStatementå¯¹è±¡"),s("ï¼šä½¿ç”¨Connectionå¯¹è±¡çš„createStatement()æ–¹æ³•åˆ›å»ºä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨äºæ‰§è¡ŒSQLè¯­å¥ï¼Œä¾‹å¦‚ï¼šStatement stmt = conn.createStatement();")]),n("li",null,[n("strong",null,"æ‰§è¡ŒSQLè¯­å¥"),s('ï¼šä½¿ç”¨Statementå¯¹è±¡çš„executeQuery()æˆ–executeUpdate()æ–¹æ³•æ‰§è¡ŒSQLè¯­å¥ï¼Œä¾‹å¦‚ï¼šResultSet rs = stmt.executeQuery("SELECT * FROM mytable");')]),n("li",{String:"",name:"",class:'rsgetString("name"); rsgetInt("age");',int:"",age:""},[n("strong",null,"å¤„ç†æŸ¥è¯¢ç»“æœ"),s("ï¼šå¦‚æœæ‰§è¡Œçš„æ˜¯æŸ¥è¯¢è¯­å¥ï¼Œéœ€è¦ä½¿ç”¨ResultSetå¯¹è±¡æ¥å¤„ç†æŸ¥è¯¢ç»“æœï¼Œä¾‹å¦‚ï¼šwhile (rs.next())")]),n("li",null,[n("strong",null,"å…³é—­æ•°æ®åº“è¿æ¥"),s("ï¼šåœ¨ç¨‹åºç»“æŸæ—¶ï¼Œéœ€è¦ä½¿ç”¨Connectionå¯¹è±¡çš„close()æ–¹æ³•å…³é—­æ•°æ®åº“è¿æ¥ï¼Œä¾‹å¦‚ï¼šconn.close();")])],-1),mn=t(`<h3 id="æ€ä¹ˆç†è§£springioc-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆç†è§£springioc-2023-ç¾å›¢" aria-hidden="true">#</a> æ€ä¹ˆç†è§£SpringIocï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p><strong>IoCï¼ˆInversion of Controlï¼‰æ˜¯â€œæ§åˆ¶åè½¬â€</strong> çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒã€‚IoCæ˜¯å°†ä½ è®¾è®¡å¥½çš„å¯¹è±¡äº¤ç»™å®¹å™¨æ§åˆ¶ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„åœ¨ä½ çš„å¯¹è±¡å†…éƒ¨ç›´æ¥æ§åˆ¶ã€‚å¦‚ä½•ç†è§£å¥½IoCå‘¢ï¼Ÿå¯ä»¥ä»ä»¥ä¸‹å‡ ç‚¹æ¥çœ‹ï¼š</p><ol><li><strong>æ§åˆ¶åè½¬</strong>ï¼šä¼ ç»Ÿçš„ç¨‹åºæ˜¯ç”±æˆ‘ä»¬è‡ªå·±åœ¨å¯¹è±¡å†…éƒ¨é€šè¿‡newè¿›è¡Œåˆ›å»ºå¯¹è±¡ï¼Œæ˜¯ç”±ç¨‹åºæ§åˆ¶å¯¹è±¡çš„åˆ›å»ºã€‚åœ¨Springæ¡†æ¶ä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºæ˜¯ç”±Springå®¹å™¨æ¥è¿›è¡Œçš„ï¼Œå®ƒè´Ÿè´£æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‰€è°“â€œæ§åˆ¶åè½¬â€å°±æ˜¯æŠŠä¼ ç»Ÿçš„æœ‰æˆ‘ä»¬è‡ªå·±æ§åˆ¶çš„å¯¹è±¡åˆ›å»ºè¿‡ç¨‹äº¤ç»™Springæ¡†æ¶æ¥åšã€‚</li><li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šIoCçš„ä¸€ä¸ªé‡è¦çš„å…·ä½“å®ç°æ–¹æ³•æ˜¯DIï¼ˆDependency Injectionï¼‰ï¼Œä¹Ÿå«ä½œä¾èµ–æ³¨å…¥ã€‚åœ¨æˆ‘ä»¬è®¾è®¡å¥½çš„å¯¹è±¡ä¸­ä¼šæœ‰ä¸€äº›å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼ˆå³ä¾èµ–ï¼‰ï¼Œå¦‚æœæ²¡æœ‰Springå®¹å™¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¾ˆå¤šå¤æ‚çš„æ–¹æ³•æ¥ç®¡ç†è¿™äº›ä¾èµ–ã€‚è€Œæœ‰äº†Springå®¹å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰Springè¿™äº›ä¾èµ–å³å¯ï¼ŒSpringä¼šè‡ªåŠ¨æŠŠè¿™äº›ä¾èµ–æ³¨å…¥åˆ°å¯¹è±¡ä¸­ã€‚</li><li><strong>å®¹å™¨</strong>ï¼šåœ¨Springçš„IoCä¸‹ï¼ŒSpringå®¹å™¨æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è§’è‰²ï¼Œå®ƒåŒ…å«å¹¶ç®¡ç†äº†åº”ç”¨ä¸­å®šä¹‰çš„å„ç§ç»„ä»¶ï¼Œè´Ÿè´£å®ä¾‹åŒ–ã€é…ç½®ã€è£…é…å¯¹è±¡ï¼Œç®¡ç†å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</li><li><strong>å‡è½»è€¦åˆ</strong>ï¼šé€šè¿‡IoCï¼Œå¯¹è±¡é—´çš„è€¦åˆåº¦å¯ä»¥é™ä½ï¼Œå¯¹è±¡åªéœ€è¦å…³æ³¨è‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…¶ä»–å¯¹è±¡æ˜¯å¦‚ä½•åˆ›å»ºå’Œç®¡ç†çš„ï¼Œå¤§å¤§å¢å¼ºäº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</li><li><strong>æä¾›é…ç½®</strong>ï¼šSpringå®¹å™¨å¯ä»¥ä½¿ç”¨XMLã€Javaæ³¨è§£ã€Javaä»£ç ç­‰å¤šç§æ–¹å¼æ¥è¿›è¡Œé…ç½®ï¼Œæä¾›äº†éå¸¸å¤§çš„çµæ´»æ€§ã€‚</li></ol><h3 id="å¦‚æœè®©ä½ è®¾è®¡ä¸€ä¸ªspringioc-ä½ è§‰å¾—ä¼šä»å“ªäº›æ–¹é¢è€ƒè™‘è¿™ä¸ªè®¾è®¡-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¦‚æœè®©ä½ è®¾è®¡ä¸€ä¸ªspringioc-ä½ è§‰å¾—ä¼šä»å“ªäº›æ–¹é¢è€ƒè™‘è¿™ä¸ªè®¾è®¡-2023-ç¾å›¢" aria-hidden="true">#</a> å¦‚æœè®©ä½ è®¾è®¡ä¸€ä¸ªSpringIocï¼Œä½ è§‰å¾—ä¼šä»å“ªäº›æ–¹é¢è€ƒè™‘è¿™ä¸ªè®¾è®¡ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ul><li>Beançš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šéœ€è¦è®¾è®¡Beançš„åˆ›å»ºã€åˆå§‹åŒ–ã€é”€æ¯ç­‰ç”Ÿå‘½å‘¨æœŸç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼å’Œå•ä¾‹æ¨¡å¼æ¥å®ç°ã€‚</li><li>ä¾èµ–æ³¨å…¥ï¼šéœ€è¦å®ç°ä¾èµ–æ³¨å…¥çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å±æ€§æ³¨å…¥ã€æ„é€ å‡½æ•°æ³¨å…¥ã€æ–¹æ³•æ³¨å…¥ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åå°„æœºåˆ¶å’ŒXMLé…ç½®æ–‡ä»¶æ¥å®ç°ã€‚</li><li>Beançš„ä½œç”¨åŸŸï¼šéœ€è¦æ”¯æŒå¤šç§Beanä½œç”¨åŸŸï¼Œæ¯”å¦‚å•ä¾‹ã€åŸå‹ã€ä¼šè¯ã€è¯·æ±‚ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Mapæ¥å­˜å‚¨ä¸åŒä½œç”¨åŸŸçš„Beanå®ä¾‹ã€‚</li><li>AOPåŠŸèƒ½çš„æ”¯æŒï¼šéœ€è¦æ”¯æŒAOPåŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€ä»£ç†æœºåˆ¶å’Œåˆ‡é¢ç¼–ç¨‹æ¥å®ç°ã€‚</li><li>å¼‚å¸¸å¤„ç†ï¼šéœ€è¦è€ƒè™‘å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬Beanåˆ›å»ºå¼‚å¸¸ã€ä¾èµ–æ³¨å…¥å¼‚å¸¸ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨try-catchæœºåˆ¶æ¥å¤„ç†å¼‚å¸¸ã€‚</li><li>é…ç½®æ–‡ä»¶åŠ è½½ï¼šéœ€è¦æ”¯æŒä»ä¸åŒçš„é…ç½®æ–‡ä»¶ä¸­åŠ è½½Beançš„ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨XMLã€æ³¨è§£æˆ–è€…Javaé…ç½®ç±»æ¥å®ç°ã€‚</li></ul><h3 id="springç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ‰©å±•ç‚¹-è¿™äº›æœ‰äº†è§£å—-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#springç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ‰©å±•ç‚¹-è¿™äº›æœ‰äº†è§£å—-2023-ç¾å›¢" aria-hidden="true">#</a> Springç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ‰©å±•ç‚¹ï¼Œè¿™äº›æœ‰äº†è§£å—ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ol><li>BeanFactoryPostProcessorï¼šå…è®¸åœ¨Springå®¹å™¨å®ä¾‹åŒ–beanä¹‹å‰ä¿®æ”¹beançš„å®šä¹‰ã€‚å¸¸ç”¨äºä¿®æ”¹beanå±æ€§æˆ–æ”¹å˜beançš„ä½œç”¨åŸŸã€‚</li><li>BeanPostProcessorï¼šå¯ä»¥åœ¨beanå®ä¾‹åŒ–ã€é…ç½®ä»¥åŠåˆå§‹åŒ–ä¹‹åå¯¹å…¶è¿›è¡Œé¢å¤–å¤„ç†ã€‚å¸¸ç”¨äºä»£ç†beanã€ä¿®æ”¹beanå±æ€§ç­‰ã€‚</li><li>PropertySourceï¼šç”¨äºå®šä¹‰ä¸åŒçš„å±æ€§æºï¼Œå¦‚æ–‡ä»¶ã€æ•°æ®åº“ç­‰ï¼Œä»¥ä¾¿åœ¨Springåº”ç”¨ä¸­ä½¿ç”¨ã€‚</li><li>ImportSelectorå’ŒImportBeanDefinitionRegistrarï¼šç”¨äºæ ¹æ®æ¡ä»¶åŠ¨æ€æ³¨å†Œbeanå®šä¹‰ï¼Œå®ç°é…ç½®ç±»çš„æ¨¡å—åŒ–ã€‚</li><li>Spring MVCä¸­çš„HandlerInterceptorï¼šç”¨äºæ‹¦æˆªå¤„ç†è¯·æ±‚ï¼Œå¯ä»¥åœ¨è¯·æ±‚å¤„ç†å‰ã€å¤„ç†ä¸­å’Œå¤„ç†åæ‰§è¡Œç‰¹å®šé€»è¾‘ã€‚</li><li>Spring MVCä¸­çš„ControllerAdviceï¼šç”¨äºå…¨å±€å¤„ç†æ§åˆ¶å™¨çš„å¼‚å¸¸ã€æ•°æ®ç»‘å®šå’Œæ•°æ®æ ¡éªŒã€‚</li><li>Spring Bootçš„è‡ªåŠ¨é…ç½®ï¼šé€šè¿‡åˆ›å»ºè‡ªå®šä¹‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¯ä»¥å®ç°å¯¹æ¡†æ¶å’Œç¬¬ä¸‰æ–¹åº“çš„è‡ªåŠ¨é…ç½®ã€‚</li><li>è‡ªå®šä¹‰æ³¨è§£ï¼šåˆ›å»ºè‡ªå®šä¹‰æ³¨è§£ï¼Œç”¨äºå®ç°ç‰¹å®šåŠŸèƒ½æˆ–çº¦å®šï¼Œå¦‚æƒé™æ§åˆ¶ã€æ—¥å¿—è®°å½•ç­‰ã€‚</li></ol><h3 id="å¤§è‡´äº†è§£springmvcçš„å¤„ç†æµç¨‹å—-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¤§è‡´äº†è§£springmvcçš„å¤„ç†æµç¨‹å—-2023-ç¾å›¢" aria-hidden="true">#</a> å¤§è‡´äº†è§£SpringMVCçš„å¤„ç†æµç¨‹å—ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ol><li><strong>æ¥æ”¶è¯·æ±‚</strong>ï¼šç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletã€‚</li><li><strong>æŸ¥æ‰¾å¤„ç†å™¨æ˜ å°„</strong>ï¼šDispatcherServletæ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ã€‚</li><li><strong>å¤„ç†å™¨æ˜ å°„è¿”å›å¤„ç†å™¨æ‰§è¡Œé“¾</strong>ï¼šHandlerMappingæ ¹æ®è¯·æ±‚çš„URLæ‰¾åˆ°å¯¹åº”çš„Controllerå¹¶è¿”å›ä¸€ä¸ªHandlerExecutionChainå¯¹è±¡ï¼ˆåŒ…å«ä¸€ä¸ªHandlerå¤„ç†å™¨ï¼ˆé¡µé¢æ§åˆ¶å™¨ï¼‰å¯¹è±¡ï¼Œå¤šä¸ªHandlerInterceptoræ‹¦æˆªå™¨å¯¹è±¡ï¼‰ã€‚</li><li><strong>è°ƒç”¨å¤„ç†å™¨é€‚é…å™¨</strong>ï¼šDispatcherServleté€šè¿‡HandlerAdapterè¿›è¡Œå¤šç±»å‹çš„é¡µé¢æ§åˆ¶å™¨çš„é€‚é…ï¼Œè°ƒç”¨å¯¹åº”çš„Controllerï¼ˆå¤„ç†å™¨ï¼‰ã€‚</li><li><strong>Controlleræ‰§è¡Œä¸šåŠ¡é€»è¾‘</strong>ï¼šControllerå¼€å§‹æ‰§è¡Œé¡µé¢æ§åˆ¶å™¨çš„å¤„ç†æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡ï¼ˆæ¨¡å‹å’Œè§†å›¾ï¼‰ã€‚</li><li><strong>è§†å›¾è§£æ</strong>ï¼šDispatcherServleté€šè¿‡è§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆå®é™…è§†å›¾/é¡µé¢ï¼‰ï¼Œå¹¶å°†ModelAndViewå¯¹è±¡ä¸­çš„æ¨¡å‹æ•°æ®å¡«å……åˆ°requeståŸŸå¯¹è±¡ä¸­ã€‚</li><li><strong>è¿”å›è§†å›¾</strong>ï¼šDispatcherServletæŠŠè¿”å›çš„è§†å›¾å¯¹è±¡è¿”å›ç»™ç”¨æˆ·ã€‚</li></ol><h3 id="springaopä¸»è¦æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#springaopä¸»è¦æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜-2023-ç¾å›¢" aria-hidden="true">#</a> SpringAOPä¸»è¦æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜ï¼ˆ2023 ç¾å›¢ï¼‰</h3><ol><li>ä»£ç åˆ†ç¦»ï¼šåœ¨è®¸å¤šåº”ç”¨ç¨‹åºä¸­ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä½ éœ€è¦åœ¨å¤šä¸ªæ–¹æ³•æˆ–å¯¹è±¡ä¸­é‡å¤ç›¸åŒçš„ä»£ç å—ï¼Œæ¯”å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€æƒé™æ£€æŸ¥ç­‰ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä»£ç ä¸æ˜¯çœŸæ­£çš„åˆ†ç¦»ï¼Œå„éƒ¨åˆ†åŠŸèƒ½æ¨¡å—çš„èŒè´£å¹¶ä¸æ¸…æ™°ã€‚é€šè¿‡ä½¿ç”¨AOPï¼Œä½ å¯ä»¥æŠŠè¿™äº›ä»£ç é›†ä¸­åœ¨ä¸€èµ·ï¼Œç„¶ååº”ç”¨åˆ°ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ï¼Œå®ç°&quot;æ¨ªåˆ‡å…³æ³¨ç‚¹&quot;ï¼ˆcross-cutting concernsï¼‰çš„æœ‰æ•ˆç®¡ç†ã€‚</li><li>ç»´æŠ¤æ€§ï¼šå¦‚æœä½ éœ€è¦ä¿®æ”¹ä¸€äº›é‡å¤çš„ä»£ç ï¼ˆæ¯”å¦‚æ›´æ”¹æ—¥å¿—è®°å½•çš„æ ¼å¼ï¼‰ï¼Œä½ å¯èƒ½éœ€è¦åœ¨å¤šä¸ªä½ç½®è¿›è¡Œæ›´æ”¹ã€‚ä½¿ç”¨AOPï¼Œä½ åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹æ›´æ”¹ï¼Œå‡å°‘äº†å‡ºé”™çš„å¯èƒ½æ€§ï¼Œæé«˜äº†ä»£ç çš„ç»´æŠ¤æ€§ã€‚</li><li>å¯è¯»æ€§ï¼šAOPå¯ä»¥ä½¿å¾—ä»£ç çš„å¯è¯»æ€§å¢å¼ºã€‚å› ä¸ºé‡å¤çš„ã€å›ºå®šçš„ä»£ç è¢«åˆ†ç¦»å‡ºæ¥ï¼Œä¸šåŠ¡ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç†è§£ã€‚</li><li>å¯é‡ç”¨æ€§ï¼šç”±äºAOPèƒ½å°†æ¨ªåˆ‡å…³æ³¨ç‚¹æŠ½è±¡æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—å¯ä»¥åœ¨å¤šä¸ªåº”ç”¨ä¸­é‡ç”¨ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼ŒSpring AOPèƒ½å¤Ÿè®©å¼€å‘è€…æ›´å¥½åœ°å…³æ³¨ä¸šåŠ¡é€»è¾‘çš„å¼€å‘ï¼Œè€Œå°†è¯¸å¦‚æ—¥å¿—è®°å½•ã€å®‰å…¨æ§åˆ¶ã€äº‹åŠ¡å¤„ç†ç­‰å…¬å…±ä»»åŠ¡æŠ½è±¡å’Œé›†ä¸­å¤„ç†ï¼Œä»è€Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§å’Œå¯é‡ç”¨æ€§ã€‚</p><h3 id="ğŸ”¥-springaopçš„åŸç†äº†è§£å—-2023-ç¾å›¢ã€2023-å®Œç¾ä¸–ç•Œã€2023-å½±çŸ³360ã€2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-springaopçš„åŸç†äº†è§£å—-2023-ç¾å›¢ã€2023-å®Œç¾ä¸–ç•Œã€2023-å½±çŸ³360ã€2023-å¿«æ‰‹" aria-hidden="true">#</a> ğŸ”¥ SpringAOPçš„åŸç†äº†è§£å—ï¼ˆ2023 ç¾å›¢ã€2023 å®Œç¾ä¸–ç•Œã€2023 å½±çŸ³360ã€2023 å¿«æ‰‹ï¼‰</h3><h4 id="åºè¨€" tabindex="-1"><a class="header-anchor" href="#åºè¨€" aria-hidden="true">#</a> åºè¨€</h4><p>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå…è®¸å¼€å‘äººå‘˜å®šä¹‰è·¨å¤šä¸ªæ–¹æ³•å’Œç±»çš„å…³æ³¨ç‚¹ã€‚AOP çš„ä¸»è¦ç›®çš„æ˜¯å°†ç¨‹åºä¸­åˆ†æ•£çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚æ—¥å¿—ã€å®‰å…¨ç­‰ï¼‰æ¨¡å—åŒ–ï¼Œå¹¶èƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä»£ç çš„æƒ…å†µä¸‹ï¼Œå°†è¿™äº›åŠŸèƒ½æ’å…¥åˆ°ç¨‹åºçš„ä¸åŒéƒ¨åˆ†ã€‚</p><h4 id="æ ¸å¿ƒæ¦‚å¿µå’ŒåŸåˆ™" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒæ¦‚å¿µå’ŒåŸåˆ™" aria-hidden="true">#</a> æ ¸å¿ƒæ¦‚å¿µå’ŒåŸåˆ™</h4><ol><li><strong>åˆ‡é¢ï¼ˆAspectï¼‰</strong>: åˆ‡é¢æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªæˆ–å¤šä¸ªâ€œå…³æ³¨ç‚¹â€æˆ–â€œäº¤å‰å…³æ³¨ç‚¹â€ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯æˆ‘ä»¬æƒ³è¦å®ç°çš„åŠŸèƒ½æˆ–è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œæ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†å’Œå®‰å…¨æ€§éƒ½å¯ä»¥æ˜¯åˆ‡é¢ã€‚</li><li><strong>è¿æ¥ç‚¹ï¼ˆJoin Pointï¼‰</strong>: è¿æ¥ç‚¹æ˜¯ç¨‹åºä¸­çš„æŸä¸ªç‰¹å®šä½ç½®ï¼Œå¦‚æ–¹æ³•æ‰§è¡Œã€å¼‚å¸¸å¤„ç†ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›ä½ç½®æ’å…¥åˆ‡é¢çš„ä»£ç ã€‚åœ¨Spring AOPä¸­ï¼Œè¿æ¥ç‚¹ä¸»è¦æ˜¯æŒ‡æ–¹æ³•æ‰§è¡Œã€‚</li><li><strong>é€šçŸ¥ï¼ˆAdviceï¼‰</strong>: é€šçŸ¥æ˜¯åˆ‡é¢åœ¨ç‰¹å®šçš„è¿æ¥ç‚¹æ‰§è¡Œçš„ä»£ç ç‰‡æ®µã€‚Spring AOPåŒ…æ‹¬ä»¥ä¸‹äº”ç§ç±»å‹çš„é€šçŸ¥ï¼š <ul><li><strong>å‰ç½®é€šçŸ¥ï¼ˆBefore adviceï¼‰</strong>: åœ¨è¿æ¥ç‚¹ä¹‹å‰æ‰§è¡Œã€‚</li><li><strong>åç½®é€šçŸ¥ï¼ˆAfter returning adviceï¼‰</strong>: åœ¨è¿æ¥ç‚¹æˆåŠŸæ‰§è¡Œåæ‰§è¡Œã€‚</li><li><strong>å¼‚å¸¸é€šçŸ¥ï¼ˆAfter throwing adviceï¼‰</strong>: å¦‚æœåœ¨è¿æ¥ç‚¹æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œã€‚</li><li><strong>æœ€ç»ˆé€šçŸ¥ï¼ˆAfter (finally) adviceï¼‰</strong>: åœ¨è¿æ¥ç‚¹æ‰§è¡Œåï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œã€‚</li><li><strong>ç¯ç»•é€šçŸ¥ï¼ˆAround adviceï¼‰</strong>: åœ¨è¿æ¥ç‚¹å‰åéƒ½å¯ä»¥æ‰§è¡Œã€‚</li></ul></li><li><strong>åˆ‡ç‚¹ï¼ˆPointcutï¼‰</strong>: åˆ‡ç‚¹æ˜¯ä¸€ç»„è¡¨è¾¾å¼ï¼Œç”¨äºæŒ‡å®šå“ªäº›è¿æ¥ç‚¹éœ€è¦è¢«é€šçŸ¥ã€‚å®ƒå‘Šè¯‰AOPæ¡†æ¶åœ¨ä½•å¤„åº”ç”¨é€šçŸ¥ã€‚</li><li><strong>ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰</strong>: ç›®æ ‡å¯¹è±¡æ˜¯åŒ…å«è¿æ¥ç‚¹çš„å¯¹è±¡ã€‚Spring AOPä»£ç†çš„ç›®æ ‡å¯¹è±¡é€šå¸¸æ˜¯ä¸€ä¸ªè¢«ä»£ç†çš„å¯¹è±¡ã€‚</li><li><strong>ä»£ç†ï¼ˆProxyï¼‰</strong>: AOPä»£ç†æ˜¯ç”¨äºå®ç°åˆ‡é¢çš„å¯¹è±¡ã€‚åœ¨Springä¸­ï¼ŒAOPä»£ç†å¯ä»¥æ˜¯JDKåŠ¨æ€ä»£ç†æˆ–CGLIBä»£ç†ã€‚</li><li><strong>ç»‡å…¥ï¼ˆWeavingï¼‰</strong>: ç»‡å…¥æ˜¯å°†åˆ‡é¢æ’å…¥åˆ°ç›®æ ‡å¯¹è±¡ä¸­ä»¥åˆ›å»ºä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚è¿™å¯ä»¥åœ¨ç¼–è¯‘æ—¶ã€åŠ è½½æ—¶æˆ–è¿è¡Œæ—¶å®Œæˆã€‚</li></ol><h4 id="æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤" aria-hidden="true">#</a> æ­¥éª¤</h4><ol><li><strong>å®šä¹‰åˆ‡é¢</strong>: åˆ›å»ºä¸€ä¸ªç±»ï¼Œå¹¶åœ¨è¯¥ç±»ä¸­å®šä¹‰éœ€è¦æ³¨å…¥çš„å…³æ³¨ç‚¹ã€‚</li><li><strong>å®šä¹‰é€šçŸ¥</strong>: åœ¨åˆ‡é¢ç±»ä¸­ï¼Œå®šä¹‰ä¸€äº›æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨Spring AOPçš„æ³¨è§£æ¥æ ‡æ³¨è¿™äº›æ–¹æ³•æ˜¯å“ªç§ç±»å‹çš„é€šçŸ¥ã€‚</li><li><strong>å®šä¹‰åˆ‡ç‚¹</strong>: ä½¿ç”¨<code>@Pointcut</code>æ³¨è§£å®šä¹‰è¡¨è¾¾å¼ï¼ŒæŒ‡å®šåœ¨å“ªäº›æ–¹æ³•ä¸Šåº”ç”¨é€šçŸ¥ã€‚</li><li><strong>åº”ç”¨åˆ‡é¢</strong>: ä½¿ç”¨Springçš„é…ç½®ï¼ˆXMLæˆ–Javaï¼‰æ¥å¯ç”¨AOPå¹¶åº”ç”¨åˆ‡é¢ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼ŒSpring AOPæä¾›äº†ä¸€ç§å¼ºå¤§è€Œçµæ´»çš„æ–¹å¼æ¥å¢åŠ å…³æ³¨ç‚¹æˆ–è¡Œä¸ºï¼Œè€Œæ— éœ€ä¿®æ”¹åŸå§‹ä»£ç ã€‚è¿™å¤§å¤§ç®€åŒ–äº†ä¾‹å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†å’Œå®‰å…¨æ€§ç­‰äº¤å‰å…³æ³¨ç‚¹çš„å®ç°ã€‚å¸Œæœ›è¿™ä¸ªè§£é‡Šæœ‰åŠ©äºæ‚¨äº†è§£Spring AOPçš„åŸºæœ¬åŸåˆ™ï¼å¦‚æœæ‚¨æœ‰è¿›ä¸€æ­¥çš„é—®é¢˜æˆ–éœ€è¦è¯¦ç»†çš„ç¤ºä¾‹ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼</p><blockquote><p>é¢è¯•çš„æ—¶å€™å¯ä»¥è¿™æ ·å›ç­”ï¼š ğŸ™‹â€â™‚ï¸ &quot;Spring AOP æ˜¯ä¸€ç§é¢å‘åˆ‡é¢ç¼–ç¨‹çš„å®ç°ï¼Œå®ƒé€šè¿‡åŠ¨æ€ä»£ç†æ–¹å¼è§£è€¦äº†ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡ã€‚å…¶ä¸»è¦ç»„æˆéƒ¨åˆ†åŒ…æ‹¬ JoinPointï¼ˆç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸ªç‰¹å®šç‚¹ï¼Œå¦‚æ–¹æ³•è°ƒç”¨ï¼‰ï¼ŒPointCutï¼ˆä¸€ç»„å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æˆ–è§„åˆ™å®šä¹‰çš„ JoinPointï¼‰ï¼ŒAdviceï¼ˆåœ¨ç‰¹å®šçš„ JoinPoint æ‰§è¡Œçš„ä»£ç ï¼‰ï¼Œå’Œ Aspectï¼ˆåŒ…å« Advice å’Œ PointCut çš„æ¨¡å—ï¼‰ã€‚ Spring AOP æ ¹æ®ç›®æ ‡å¯¹è±¡æ˜¯å¦å®ç°æ¥å£æ¥é€‰æ‹©ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†è¿˜æ˜¯ CGLIB ä»£ç†ã€‚å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼ŒSpring AOP å°±ä¼šç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦åˆ™ä¼šç”¨ CGLIB ä»£ç†ã€‚è¿™æ ·ï¼Œåœ¨è¿è¡Œæ—¶ï¼ŒSpring AOP å¯ä»¥åŠ¨æ€åœ°å°† Advice åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡ï¼Œå®ç°ç³»ç»ŸæœåŠ¡å’Œä¸šåŠ¡é€»è¾‘çš„è§£è€¦ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€äº›é€šç”¨çš„ç³»ç»ŸæœåŠ¡ï¼ˆæ¯”å¦‚äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—ã€å®‰å…¨ç­‰ï¼‰æŠ½è±¡å‡ºæ¥ï¼Œä»è€Œä½¿ä¸šåŠ¡ä»£ç æ›´ç®€æ´ã€æ›´æ˜“äºç»´æŠ¤å’Œå¤ç”¨ã€‚&quot;</p></blockquote><h3 id="æ‹¦æˆªå™¨æœ‰å‡ ä¸ªæ–¹æ³•-åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ-å¯¹æ¯”è¿‡æ»¤å™¨-2023-å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#æ‹¦æˆªå™¨æœ‰å‡ ä¸ªæ–¹æ³•-åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ-å¯¹æ¯”è¿‡æ»¤å™¨-2023-å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> æ‹¦æˆªå™¨æœ‰å‡ ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œå¯¹æ¯”è¿‡æ»¤å™¨ï¼ˆ2023 å®Œç¾ä¸–ç•Œï¼‰</h3><p>æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨æ˜¯Webå¼€å‘ä¸­å¸¸ç”¨çš„ä¸¤ç§å¤„ç†æ–¹æ³•ã€‚è¿™é‡Œæˆ‘å‡è®¾ä½ æŒ‡çš„æ˜¯Spring MVCæ‹¦æˆªå™¨å’ŒJava Servletè¿‡æ»¤å™¨ã€‚ æ‹¦æˆªå™¨ (Interceptor) åœ¨Spring MVCä¸­é€šå¸¸æœ‰3ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)</code>: åœ¨è¯·æ±‚è¢«å¤„ç†ä¹‹å‰è°ƒç”¨ã€‚å¦‚æœè¿”å›trueï¼Œå¤„ç†æµç¨‹ç»§ç»­ï¼›å¦‚æœè¿”å›falseï¼Œå¤„ç†æµç¨‹ç»“æŸï¼Œä¸ä¼šè°ƒç”¨åç»­çš„æ‹¦æˆªå™¨å’Œå¤„ç†å™¨ã€‚</li><li><code>postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</code>: åœ¨è¯·æ±‚è¢«å¤„ç†ä¹‹åï¼Œè§†å›¾è¢«æ¸²æŸ“ä¹‹å‰è°ƒç”¨ã€‚å¯ä»¥é€šè¿‡å®ƒæ¥ä¿®æ”¹æ•°æ®æ¨¡å‹å’Œè§†å›¾æˆ–è¿›è¡Œå…¶ä»–å¤„ç†ã€‚</li><li><code>afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</code>: åœ¨è¯·æ±‚å¤„ç†å®Œæ¯•åï¼ˆè§†å›¾æ¸²æŸ“åï¼‰è°ƒç”¨ï¼Œé€šå¸¸ç”¨äºè¿›è¡Œèµ„æºæ¸…ç†ç­‰å·¥ä½œã€‚</li></ul><p>è¿‡æ»¤å™¨ (Filter) åœ¨Java Servlet APIä¸­é€šå¸¸æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š</p><ul><li>init(FilterConfig filterConfig): åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œåˆ›å»ºFilterå¯¹è±¡æ—¶è°ƒç”¨ã€‚</li><li>doFilter(ServletRequest request, ServletResponse response, FilterChain chain): æ¯æ¬¡åœ¨è¿‡æ»¤è¯·æ±‚æ—¶è°ƒç”¨ã€‚å¯ä»¥è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œç„¶åä½¿ç”¨chain.doFilter(request, response);å°†è¯·æ±‚ä¼ é€’åˆ°é“¾ä¸­çš„ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨æˆ–èµ„æºï¼ˆservletæˆ–é™æ€å†…å®¹ï¼‰ã€‚</li><li>destroy(): åœ¨æœåŠ¡å™¨å…³é—­æ—¶ï¼Œé”€æ¯Filterå¯¹è±¡æ—¶è°ƒç”¨ã€‚</li></ul><p>æ¯”è¾ƒï¼š</p><ul><li>ç›¸è¾ƒäºè¿‡æ»¤å™¨ï¼Œæ‹¦æˆªå™¨æ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚æ‹¦æˆªå™¨æ˜¯åŸºäºJavaçš„åå°„æœºåˆ¶çš„ï¼Œå®ƒåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å°†é€»è¾‘æ’å…¥åˆ°æ–¹æ³•è°ƒç”¨ä¸­ï¼Œè€Œä¸éœ€è¦æ”¹å˜æºç ã€‚æ­¤å¤–ï¼Œæ‹¦æˆªå™¨å¯ä»¥è·å¾—Springå®¹å™¨ä¸­çš„å„ç§beanï¼Œä»è€Œæœ‰æ›´å¤šçš„æ“ä½œã€‚</li><li>è¿‡æ»¤å™¨åˆ™ä¸»è¦ç”¨äºè¯·æ±‚çš„è¿‡æ»¤å¤„ç†ï¼ŒåŒ…æ‹¬æ—¥å¿—è®°å½•ã€è¯·æ±‚å‹ç¼©ã€å®‰å…¨æ£€æŸ¥ã€ç”¨æˆ·ç™»å½•æ ¡éªŒç­‰ã€‚å®ƒçš„è¿è¡Œé€Ÿåº¦ä¸€èˆ¬æ¯”æ‹¦æˆªå™¨å¿«ï¼Œä½†åŠŸèƒ½ä¸Šä¸å¦‚æ‹¦æˆªå™¨å¼ºå¤§ã€‚</li></ul><h3 id="å¯¼å…¥ä¸€ä¸ª-jar-åŒ…æ€ä¹ˆè®©-springboot-çŸ¥é“å“ªäº›éœ€è¦è‡ªåŠ¨é…ç½®-2023-å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥ä¸€ä¸ª-jar-åŒ…æ€ä¹ˆè®©-springboot-çŸ¥é“å“ªäº›éœ€è¦è‡ªåŠ¨é…ç½®-2023-å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> å¯¼å…¥ä¸€ä¸ª jar åŒ…æ€ä¹ˆè®© springboot çŸ¥é“å“ªäº›éœ€è¦è‡ªåŠ¨é…ç½®ï¼ˆ2023 å®Œç¾ä¸–ç•Œï¼‰</h3><p>Spring Bootè‡ªåŠ¨é…ç½®æ˜¯é€šè¿‡@EnableAutoConfigurationæ³¨è§£å®ç°çš„ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯é€šè¿‡æŸ¥æ‰¾å¹¶åŠ è½½META-INF/spring.factoriesé…ç½®æ–‡ä»¶æ¥å®Œæˆçš„ã€‚ å¦‚æœä½ æƒ³è¦å°†ä½ çš„jaråŒ…åœ¨Spring Booté¡¹ç›®ä¸­è¿›è¡Œè‡ªåŠ¨é…ç½®ï¼Œä½ éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>åœ¨ä½ çš„jaråŒ…ä¸­åˆ›å»ºä¸€ä¸ªspring.factoriesæ–‡ä»¶ï¼Œå¹¶å°†å…¶æ”¾å…¥META-INFç›®å½•ä¸‹</li><li>åœ¨spring.factoriesæ–‡ä»¶ä¸­æ·»åŠ ä½ çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œæ ¼å¼å¦‚ä¸‹</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\
com.yourpackage.YourAutoConfigurationClass
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ç¡®ä¿ä½ çš„AutoConfigurationç±»ä½¿ç”¨äº†@Configurationï¼Œå¹¶åœ¨éœ€è¦çš„beanä¸Šä½¿ç”¨äº†@Beanæ³¨è§£ã€‚</li></ol><p>è¿™æ ·ï¼Œå½“Spring Booté¡¹ç›®å¯åŠ¨æ—¶ï¼Œå®ƒä¼šè¯»å–META-INF/spring.factoriesæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨é…ç½®é‚£äº›beanã€‚</p><p>è¯·æ³¨æ„ï¼Œä½ çš„AutoConfigurationç±»åº”è¯¥å°½å¯èƒ½çš„&quot;å¹‚ç­‰&quot;ï¼Œæ„å‘³ç€å¤šæ¬¡è¿è¡Œç»“æœåº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”åº”è¯¥å¯¹å·²æœ‰çš„Beanæœ‰æ‰€å°Šé‡ï¼Œå¦‚æœå®¹å™¨ä¸­å·²ç»å­˜åœ¨äº†ä½ è¦åˆ›å»ºçš„Beanï¼Œä½ åº”è¯¥é¿å…å†æ¬¡åˆ›å»ºã€‚</p><p>å¦å¤–ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨@Conditionalæ³¨è§£ä»¥é¿å…åœ¨ä¸éœ€è¦çš„æƒ…å†µä¸‹åˆ›å»ºbeanã€‚</p><h3 id="spring-ioc-ä¸­çš„-factorybeanå’Œbeanfactory-2023-äº¬ä¸œ" tabindex="-1"><a class="header-anchor" href="#spring-ioc-ä¸­çš„-factorybeanå’Œbeanfactory-2023-äº¬ä¸œ" aria-hidden="true">#</a> Spring IOC ä¸­çš„ FactoryBeanå’ŒBeanFactoryï¼Ÿï¼ˆ2023 äº¬ä¸œï¼‰</h3><p>BeanFactory</p><ol><li><strong>èŒè´£</strong>ï¼š<code>BeanFactory</code> æ˜¯ Spring çš„æ ¸å¿ƒæ¥å£ï¼Œè´Ÿè´£ç®¡ç†å®¹å™¨ä¸­çš„ Beanã€‚å®ƒç»´æŠ¤ç€ Bean çš„å®šä¹‰ä»¥åŠä¾èµ–å…³ç³»ï¼Œè¿˜è´Ÿè´£åˆ›å»ºå’Œè£…é… Beanã€‚</li><li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š<code>BeanFactory</code> è´Ÿè´£æ•´ä¸ª Bean çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬ Bean çš„åˆ›å»ºã€åˆå§‹åŒ–ã€ä¾èµ–æ³¨å…¥ã€é”€æ¯ç­‰ã€‚</li><li><strong>é…ç½®</strong>ï¼šé€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬å¾ˆå°‘ç›´æ¥ä½¿ç”¨ <code>BeanFactory</code>ï¼Œæ›´å¤šæƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <code>ApplicationContext</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„å®¹å™¨ï¼Œä¹Ÿæ˜¯ <code>BeanFactory</code> çš„ä¸€ä¸ªå­æ¥å£ã€‚</li><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé€šå¸¸åœ¨å°å‹åº”ç”¨æˆ–è€…èµ„æºå—é™çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç›´æ¥ä½¿ç”¨ <code>BeanFactory</code>ã€‚</li></ol><p>FactoryBean</p><ol><li><strong>èŒè´£</strong>ï¼š<code>FactoryBean</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Beanï¼Œç”¨äºç”Ÿæˆå…¶ä»– Bean å®ä¾‹ã€‚é€šå¸¸å½“åˆ›å»ºæŸä¸ª Bean éœ€è¦å¤æ‚çš„åˆå§‹åŒ–é€»è¾‘æ—¶ï¼Œä¼šä½¿ç”¨ <code>FactoryBean</code>ã€‚</li><li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š<code>FactoryBean</code> è‡ªèº«ä¹Ÿæ˜¯ä¸€ä¸ª Beanï¼Œå› æ­¤å®ƒä¹Ÿæ˜¯ç”± <code>BeanFactory</code> ç®¡ç†çš„ã€‚å½“å…¶ä»– Bean ä¾èµ–äºç”± <code>FactoryBean</code> åˆ›å»ºçš„ Bean æ—¶ï¼Œ<code>FactoryBean.getObject()</code> æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œç”¨äºç”Ÿæˆé‚£ä¸ª Beanã€‚</li><li><strong>é…ç½®</strong>ï¼š<code>FactoryBean</code> é€šå¸¸åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ï¼Œå°±åƒå…¶ä»–æ™®é€šçš„ Bean ä¸€æ ·ã€‚</li><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<code>FactoryBean</code> åœ¨ Spring æ¡†æ¶è‡ªèº«å’Œç¬¬ä¸‰æ–¹åº“ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œç”¨äºç”Ÿæˆå¦‚ <code>JdbcTemplate</code>ã€<code>SessionFactory</code> ç­‰å¤æ‚å¯¹è±¡ã€‚</li></ol><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹FactoryBeançš„æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">FactoryBean</span> <span class="token punctuation">{</span>
    <span class="token class-name">T</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>getObject() â€“ è¿”å›å·¥å‚ç”Ÿæˆçš„å¯¹è±¡ï¼Œè¿™æ˜¯ Spring å®¹å™¨å°†ä½¿ç”¨çš„å¯¹è±¡</li><li>getObjectType() â€“ è¿”å›æ­¤ FactoryBean ç”Ÿæˆçš„å¯¹è±¡çš„ç±»å‹</li><li>isSingleton() â€“ è¡¨ç¤ºæ­¤ FactoryBean ç”Ÿæˆçš„å¯¹è±¡æ˜¯å¦æ˜¯å•ä¾‹</li></ul><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å®ç°ä¸€ä¸ªç¤ºä¾‹ FactoryBeanã€‚æˆ‘ä»¬å°†å®ç°ä¸€ä¸ª ToolFactory æ¥ç”Ÿæˆ Tool ç±»å‹çš„å¯¹è±¡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tool</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>

    <span class="token comment">// standard constructors, getters and setters</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å·¥å…·å·¥å‚æœ¬èº«ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ToolFactory</span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tool</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> factoryId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> toolId<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Tool</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tool</span><span class="token punctuation">(</span>toolId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Tool</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// standard setters and getters</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒToolFactoryæ˜¯ä¸€ä¸ªFactoryBeanï¼Œå®ƒå¯ä»¥äº§ç”ŸToolå¯¹è±¡ã€‚</p><p>æµ‹è¯• Tool å¯¹è±¡æ˜¯å¦æ­£ç¡®æ³¨å…¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">FactoryBeanAppConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FactoryBeanJavaConfigTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Tool</span> tool<span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;&amp;tool&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">ToolFactory</span> toolFactory<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testConstructWorkerByJava</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>tool<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>toolFactory<span class="token punctuation">.</span><span class="token function">getFactoryId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token number">7070</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Spring æä¾› AbstractFactoryBean ä½œä¸º FactoryBean å®ç°çš„ç®€å•æ¨¡æ¿è¶…ç±»ã€‚æœ‰äº†è¿™ä¸ªåŸºç±»ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ›´æ–¹ä¾¿åœ°å®ç°åˆ›å»ºå•ä¾‹æˆ–åŸå‹å¯¹è±¡çš„å·¥å‚ beanã€‚</p><p>è®©æˆ‘ä»¬å®ç°ä¸€ä¸ª SingleToolFactory å’Œ NonSingleToolFactory æ¥å±•ç¤ºå¦‚ä½•å°† AbstractFactoryBean ç”¨äºå•ä¾‹å’ŒåŸå‹ç±»å‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleToolFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tool</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> factoryId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> toolId<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Tool</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Tool</span> <span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tool</span><span class="token punctuation">(</span>toolId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// standard setters and getters</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æ˜¯éå•ä¾‹å®ç°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NonSingleToolFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tool</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> factoryId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> toolId<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">NonSingleToolFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setSingleton</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Tool</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Tool</span> <span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tool</span><span class="token punctuation">(</span>toolId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// standard setters and getters</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥æµ‹è¯• Worker å¯¹è±¡çš„å±æ€§æ˜¯å¦æŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸæ³¨å…¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;classpath:factorybean-abstract-spring-ctx.xml&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AbstractFactoryBeanTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;singleTool&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Tool</span> tool1<span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;singleTool&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Tool</span> tool2<span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;nonSingleTool&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Tool</span> tool3<span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;nonSingleTool&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Tool</span> tool4<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSingleToolFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>tool1<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertTrue</span><span class="token punctuation">(</span>tool1 <span class="token operator">==</span> tool2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testNonSingleToolFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>tool3<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>tool4<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertTrue</span><span class="token punctuation">(</span>tool3 <span class="token operator">!=</span> tool4<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ FactoryBean æ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ï¼Œå¯ä»¥å°è£…å¤æ‚çš„æ„é€ é€»è¾‘æˆ–ä½¿åœ¨ Spring ä¸­é…ç½®é«˜åº¦å¯é…ç½®çš„å¯¹è±¡å˜å¾—æ›´å®¹æ˜“ã€‚</p>`,59),gn=n("p",null,"å‚è€ƒï¼š",-1),vn={href:"https://www.baeldung.com/spring-factorybean",target:"_blank",rel:"noopener noreferrer"},hn={href:"https://howtodoinjava.com/spring-core/how-to-create-beans-using-spring-factorybean/",target:"_blank",rel:"noopener noreferrer"},bn={href:"https://www.cnblogs.com/yichunguo/p/13922189.html",target:"_blank",rel:"noopener noreferrer"},yn={href:"https://www.cnblogs.com/jingzh/p/16711876.html",target:"_blank",rel:"noopener noreferrer"},fn=t(`<h3 id="spring-bootå¯åŠ¨æ—¶è¿›è¡Œåˆå§‹åŒ–çš„æ“ä½œ-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#spring-bootå¯åŠ¨æ—¶è¿›è¡Œåˆå§‹åŒ–çš„æ“ä½œ-2023-å¾—ç‰©" aria-hidden="true">#</a> Spring Bootå¯åŠ¨æ—¶è¿›è¡Œåˆå§‹åŒ–çš„æ“ä½œï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>ä¸€ç§å¸¸è§çš„æ–¹å¼æ˜¯é€šè¿‡å®ç°<code>ApplicationRunner</code>æ¥å£æˆ–<code>CommandLineRunner</code>æ¥å£æ¥å®ç°åˆå§‹åŒ–æ“ä½œã€‚è¿™ä¸¤ä¸ªæ¥å£åœ¨Spring Bootä¸­ä¸“é—¨ç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨åæ‰§è¡Œåˆå§‹åŒ–ä»»åŠ¡ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»ï¼Œå¹¶å®ç°å…¶ä¸­ä¸€ä¸ªæ¥å£çš„<code>run</code>æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ç¼–å†™åˆå§‹åŒ–é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­åŠ è½½é…ç½®æ–‡ä»¶ã€åˆå§‹åŒ–æ•°æ®åº“è¿æ¥ç­‰ã€‚è¿™æ ·ï¼Œåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨åï¼ŒSpring Bootä¼šè‡ªåŠ¨è°ƒç”¨è¿™äº›åˆå§‹åŒ–æ–¹æ³•ã€‚</p><ol><li><code>ApplicationRunner</code>æ¥å£ï¼šè¯¥æ¥å£æä¾›äº†ä¸€ä¸ª<code>run</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨Spring Bootåº”ç”¨ç¨‹åºå®Œå…¨å¯åŠ¨åæ‰§è¡Œã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ç°<code>ApplicationRunner</code>æ¥å£çš„Beanï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™åˆå§‹åŒ–é€»è¾‘ã€‚ä¾‹å¦‚ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">ApplicationArguments</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">ApplicationRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApplicationRunner</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationRunner</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ApplicationArguments</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åº”ç”¨ç¨‹åºå¯åŠ¨å®Œæˆï¼Œè¿›è¡Œåˆå§‹åŒ–æ“ä½œ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><code>CommandLineRunner</code>æ¥å£ï¼šä¸<code>ApplicationRunner</code>ç±»ä¼¼ï¼Œä½†å®ƒæ¥å—å‘½ä»¤è¡Œå‚æ•°ä½œä¸ºæ–¹æ³•å‚æ•°ã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ç°<code>CommandLineRunner</code>æ¥å£çš„Beanï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™åˆå§‹åŒ–é€»è¾‘ã€‚ä¾‹å¦‚ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">CommandLineRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCommandLineRunner</span> <span class="token keyword">implements</span> <span class="token class-name">CommandLineRunner</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åº”ç”¨ç¨‹åºå¯åŠ¨å®Œæˆï¼Œè¿›è¡Œåˆå§‹åŒ–æ“ä½œ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨æ³¨è§£<code>@PostConstruct</code>æ¥æ ‡è®°ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨Springå®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨ä¾èµ–æ³¨å…¥å®Œæˆåè‡ªåŠ¨æ‰§è¡Œã€‚é€šè¿‡åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™åˆå§‹åŒ–é€»è¾‘ï¼Œå¯ä»¥å®ç°åœ¨Spring Bootå¯åŠ¨æ—¶è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚</p><h2 id="ğŸ¬-mysql" tabindex="-1"><a class="header-anchor" href="#ğŸ¬-mysql" aria-hidden="true">#</a> ğŸ¬ MySQL</h2><h3 id="å¯é‡å¤è¯»å’Œå·²æäº¤è¯»éš”ç¦»çº§åˆ«è¡¨ç°çš„ç°è±¡æ˜¯ä»€ä¹ˆ-åŒºåˆ«æ˜¯ä»€ä¹ˆæ ·çš„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¯é‡å¤è¯»å’Œå·²æäº¤è¯»éš”ç¦»çº§åˆ«è¡¨ç°çš„ç°è±¡æ˜¯ä»€ä¹ˆ-åŒºåˆ«æ˜¯ä»€ä¹ˆæ ·çš„-2023-ç¾å›¢" aria-hidden="true">#</a> å¯é‡å¤è¯»å’Œå·²æäº¤è¯»éš”ç¦»çº§åˆ«è¡¨ç°çš„ç°è±¡æ˜¯ä»€ä¹ˆï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ul><li>è¯»æäº¤ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡æäº¤ä¹‹åï¼Œå®ƒåšçš„å˜æ›´æ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°ï¼Œä¼šæœ‰ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜ã€‚</li><li>å¯é‡å¤è¯»ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œä¸€ç›´è·Ÿè¿™ä¸ªäº‹åŠ¡å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼ŒMySQL InnoDB å¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼Œè§£å†³äº†ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼Œå¹¶ä¸”ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…å¹»è¯»ç°è±¡çš„å‘ç”Ÿã€‚</li></ul><h3 id="æ•°æ®åº“å¼•æ“çŸ¥é“å“ªäº›-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“å¼•æ“çŸ¥é“å“ªäº›-2023-ç¾å›¢" aria-hidden="true">#</a> æ•°æ®åº“å¼•æ“çŸ¥é“å“ªäº›ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>MySQL å¸¸è§çš„å­˜å‚¨å¼•æ“ InnoDBã€MyISAM å’Œ Memory åˆ†åˆ«æ”¯æŒçš„ç´¢å¼•ç±»å‹ã€‚</p><h3 id="æ•°æ®æ–‡ä»¶å¤§ä½“åˆ†æˆå“ªå‡ ç§æ•°æ®æ–‡ä»¶-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æ–‡ä»¶å¤§ä½“åˆ†æˆå“ªå‡ ç§æ•°æ®æ–‡ä»¶-2023-ç¾å›¢" aria-hidden="true">#</a> æ•°æ®æ–‡ä»¶å¤§ä½“åˆ†æˆå“ªå‡ ç§æ•°æ®æ–‡ä»¶ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>æˆ‘ä»¬æ¯åˆ›å»ºä¸€ä¸ª databaseï¼ˆæ•°æ®åº“ï¼‰ éƒ½ä¼šåœ¨ /var/lib/mysql/ ç›®å½•é‡Œé¢åˆ›å»ºä¸€ä¸ªä»¥ database ä¸ºåçš„ç›®å½•ï¼Œç„¶åä¿å­˜è¡¨ç»“æ„å’Œè¡¨æ•°æ®çš„æ–‡ä»¶éƒ½ä¼šå­˜æ”¾åœ¨è¿™ä¸ªç›®å½•é‡Œã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªåä¸º my_test çš„ databaseï¼Œè¯¥ database é‡Œæœ‰ä¸€å¼ åä¸º t_order æ•°æ®åº“è¡¨ã€‚ <img src="`+g+'" alt="" loading="lazy"> ç„¶åï¼Œæˆ‘ä»¬è¿›å…¥ /var/lib/mysql/my_test ç›®å½•ï¼Œçœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆæ–‡ä»¶ï¼Ÿ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root <span class="token operator">~</span><span class="token punctuation">]</span>#ls <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">/</span>my_test\ndb<span class="token punctuation">.</span>opt  \nt_order<span class="token punctuation">.</span>frm  \nt_order<span class="token punctuation">.</span>ibd\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå…±æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«ä»£è¡¨ç€ï¼š</p><ul><li>db.optï¼Œç”¨æ¥å­˜å‚¨å½“å‰æ•°æ®åº“çš„é»˜è®¤å­—ç¬¦é›†å’Œå­—ç¬¦æ ¡éªŒè§„åˆ™ã€‚</li><li>t_order.frm ï¼Œt_order çš„è¡¨ç»“æ„ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ã€‚åœ¨ MySQL ä¸­å»ºç«‹ä¸€å¼ è¡¨éƒ½ä¼šç”Ÿæˆä¸€ä¸ª.frm æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”¨æ¥ä¿å­˜æ¯ä¸ªè¡¨çš„å…ƒæ•°æ®ä¿¡æ¯çš„ï¼Œä¸»è¦åŒ…å«è¡¨ç»“æ„å®šä¹‰ã€‚</li><li>t_order.ibdï¼Œt_order çš„è¡¨æ•°æ®ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ã€‚è¡¨æ•°æ®æ—¢å¯ä»¥å­˜åœ¨å…±äº«è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆæ–‡ä»¶åï¼šibdata1ï¼‰é‡Œï¼Œä¹Ÿå¯ä»¥å­˜æ”¾åœ¨ç‹¬å è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆæ–‡ä»¶åï¼šè¡¨åå­—.ibdï¼‰ã€‚è¿™ä¸ªè¡Œä¸ºæ˜¯ç”±å‚æ•° innodb_file_per_table æ§åˆ¶çš„ï¼Œè‹¥è®¾ç½®äº†å‚æ•° innodb_file_per_table ä¸º 1ï¼Œåˆ™ä¼šå°†å­˜å‚¨çš„æ•°æ®ã€ç´¢å¼•ç­‰ä¿¡æ¯å•ç‹¬å­˜å‚¨åœ¨ä¸€ä¸ªç‹¬å è¡¨ç©ºé—´ï¼Œä» MySQL 5.6.6 ç‰ˆæœ¬å¼€å§‹ï¼Œå®ƒçš„é»˜è®¤å€¼å°±æ˜¯ 1 äº†ï¼Œå› æ­¤ä»è¿™ä¸ªç‰ˆæœ¬ä¹‹åï¼Œ MySQL ä¸­æ¯ä¸€å¼ è¡¨çš„æ•°æ®éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ .ibd æ–‡ä»¶ã€‚</li></ul><h3 id="å¯¹ä¸€ä¸ªæ…¢sqlæ€ä¹ˆå»æ’æŸ¥-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¯¹ä¸€ä¸ªæ…¢sqlæ€ä¹ˆå»æ’æŸ¥-2023-ç¾å›¢" aria-hidden="true">#</a> å¯¹ä¸€ä¸ªæ…¢sqlæ€ä¹ˆå»æ’æŸ¥ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>å¯é€šè¿‡å¼€å¯mysqlçš„æ…¢æ—¥å¿—æŸ¥è¯¢ï¼Œè®¾ç½®å¥½æ—¶é—´é˜ˆå€¼ï¼Œè¿›è¡Œæ•è·</p><h3 id="ç´¢å¼•å­—æ®µæ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ç´¢å¼•å­—æ®µæ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½-2023-ç¾å›¢" aria-hidden="true">#</a> ç´¢å¼•å­—æ®µæ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½ï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>ç´¢å¼•è¶Šå¤šï¼Œåœ¨å†™å…¥é¢‘ç¹çš„åœºæ™¯ä¸‹ï¼Œå¯¹äºB+æ ‘çš„ç»´æŠ¤æ‰€ä»˜å‡ºçš„æ€§èƒ½æ¶ˆè€—ä¹Ÿä¼šè¶Šå¤§</p><h3 id="ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•-2023-å¿«æ‰‹" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><blockquote><p>è¿™ä¸ªå…¶å®åœ¨2022å¹´çš„å¤§å‚é¢è¯•ä¸­å‡ºç°è¿‡ï¼Œä½†æ˜¯æ˜¯ä»¥èšç°‡ç´¢å¼•å½¢å¼æé—®å‡ºç°</p></blockquote><p><strong>è¦†ç›–ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–æœºåˆ¶</strong>ã€‚åœ¨è¦†ç›–ç´¢å¼•ä¸­ï¼Œç´¢å¼•æœ¬èº«åŒ…å«äº†æŸ¥è¯¢æ‰€éœ€è¦çš„æ‰€æœ‰æ•°æ®ï¼Œå› æ­¤åœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿå¯ä»¥åªè®¿é—®ç´¢å¼•ï¼Œè€Œä¸éœ€è¦å†è®¿é—®æ•°æ®è¡Œã€‚è¿™æ ·å¯ä»¥æ˜¾è‘—æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œå› ä¸ºè®¿é—®ç´¢å¼•é€šå¸¸æ¯”è®¿é—®æ•°æ®è¡Œè¦å¿«ã€‚ï¼ˆåœ¨ç´¢å¼• B+Tree çš„å¶å­èŠ‚ç‚¹ä¸Šéƒ½èƒ½æ‰¾å¾—åˆ°çš„é‚£äº›ç´¢å¼•ï¼Œä»äºŒçº§ç´¢å¼•ä¸­æŸ¥è¯¢å¾—åˆ°è®°å½•ï¼Œè€Œä¸éœ€è¦é€šè¿‡èšç°‡ç´¢å¼•æŸ¥è¯¢è·å¾—ï¼Œå¯ä»¥é¿å…å›è¡¨çš„æ“ä½œï¼‰</p><blockquote><p>è¦†ç›–ç´¢å¼•ä¸èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„ä¸»è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å­˜å‚¨å’Œè®¿é—®æ–¹å¼ï¼š</p><ul><li>è¦†ç›–ç´¢å¼•ï¼šå®ƒè¢«ç§°ä¸ºâ€œè¦†ç›–â€ï¼Œå› ä¸ºåªéœ€ä½¿ç”¨ç´¢å¼•å³å¯æ»¡è¶³æŸ¥è¯¢ï¼Œè€Œæ— éœ€è®¿é—®è¡¨æ•°æ®æœ¬èº«ã€‚è¿™å¯ä»¥ä½¿æŸ¥è¯¢æ›´å¿«ï¼Œå› ä¸ºå®ƒé¿å…äº†è®¿é—®è¡¨æ•°æ®çš„éœ€è¦ï¼Œè€Œæ˜¯ä½¿ç”¨é€šå¸¸æ›´å°ã€æ›´ç´§å‡‘çš„ç´¢å¼•æ•°æ®</li><li>èšç°‡ç´¢å¼•ï¼šåœ¨èšç°‡ç´¢å¼•ä¸­ï¼Œæ•°æ®è¡Œå®é™…ä¸Šè¢«å­˜å‚¨åœ¨ç´¢å¼•ä¸­ï¼Œå› æ­¤æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚ç´¢å¼•çš„é¡ºåºä¸ç£ç›˜ä¸Šè¡Œçš„ç‰©ç†é¡ºåºç›¸åŒã€‚èšç°‡ç´¢å¼•å¯ä»¥å¿«é€ŸæŸ¥æ‰¾æŒ‡å®šçš„æ•°æ®è¡Œï¼Œä½†å¦‚æœä½ éœ€è¦åœ¨åŒä¸€è¡¨ä¸Šæ‰§è¡Œè®¸å¤šä¸åŒçš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå—åˆ°é™åˆ¶ï¼Œå› ä¸ºæ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚</li><li>éèšç°‡ç´¢å¼•ï¼šéèšç°‡ç´¢å¼•æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç»“æ„ï¼Œä¸æ•°æ®è¡Œåˆ†å¼€å­˜å‚¨ã€‚éèšç°‡ç´¢å¼•åŒ…å«ç´¢å¼•é”®å€¼å’Œä¸€ä¸ªæŒ‡å‘æ¯ä¸ªæ•°æ®è¡Œå®é™…ä½ç½®çš„æŒ‡é’ˆã€‚åœ¨éèšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾æ•°æ®éœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼šé¦–å…ˆåœ¨ç´¢å¼•ä¸­æŸ¥æ‰¾ï¼Œç„¶åä½¿ç”¨ç´¢å¼•ä¸­çš„æŒ‡é’ˆè®¿é—®æ•°æ®è¡Œã€‚å› æ­¤ï¼Œéèšç°‡ç´¢å¼•çš„æŸ¥è¯¢é€šå¸¸æ¯”èšç°‡ç´¢å¼•è¦æ…¢ä¸€äº›ã€‚</li></ul></blockquote><p>è¦†ç›–ç´¢å¼•å¯ä»¥çœ‹ä½œæ˜¯éèšç°‡ç´¢å¼•çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œå®ƒä¸ä»…åŒ…å«ç´¢å¼•é”®å€¼å’Œæ•°æ®è¡Œçš„æŒ‡é’ˆï¼Œè¿˜åŒ…å«æŸ¥è¯¢æ‰€éœ€çš„å…¶ä»–åˆ—çš„æ•°æ®ã€‚æ‰€ä»¥ï¼Œå¦‚æœæŸ¥è¯¢å¯ä»¥è¢«ä¸€ä¸ªè¦†ç›–ç´¢å¼•æ»¡è¶³ï¼Œé‚£ä¹ˆæŸ¥è¯¢é€Ÿåº¦å°±ä¼šæ¯”ä¸€èˆ¬çš„éèšç°‡ç´¢å¼•è¦å¿«ï¼Œå› ä¸ºæ•°æ®åº“ç³»ç»Ÿä¸éœ€è¦å†è®¿é—®æ•°æ®è¡Œï¼Œæ‰€æœ‰éœ€è¦çš„æ•°æ®éƒ½åœ¨ç´¢å¼•ä¸­ã€‚ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„å¥½å¤„å°±æ˜¯ï¼Œä¸éœ€è¦æŸ¥è¯¢å‡ºåŒ…å«æ•´è¡Œè®°å½•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œä¹Ÿå°±å‡å°‘äº†å¤§é‡çš„ I/O æ“ä½œã€‚</p><p>ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„ä¾‹å­:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>\n  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>idx_name_age<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span>\n\n<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œ (name, age) ç»„æˆäº†ä¸€ä¸ªå¤åˆç´¢å¼• idx_name_age,æŸ¥è¯¢åªéœ€è¦nameå’Œageä¸¤åˆ—,æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•,æ•°æ®åº“åªéœ€è¦æ‰«æç´¢å¼•,ä¸éœ€è¦è®¿é—®è¡¨æ•°æ®,æ‰€ä»¥æŸ¥è¯¢æ•ˆç‡é«˜ã€‚</p><p>å…·ä½“æŸ¥è¯¢ä¸ºï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæŸ¥è¯¢åªéœ€è¦nameå’Œageä¸¤ä¸ªå­—æ®µ,è€Œidx_name_ageç´¢å¼•ä¸­å°±åŒ…å«è¿™ä¸¤ä¸ªå­—æ®µ,æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•ã€‚ è¦†ç›–ç´¢å¼•çš„æŸ¥è¯¢è¯­å¥åº”è¯¥æ˜¯:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> \n    idx_name_age<span class="token punctuation">.</span>name<span class="token punctuation">,</span> \n    idx_name_age<span class="token punctuation">.</span>age\n<span class="token keyword">FROM</span> tbl_user \n<span class="token keyword">WHERE</span> idx_name_age<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> idx_name_age<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä»idx_name_ageç´¢å¼•ä¸­é€‰å–éœ€è¦çš„å­—æ®µ,è€Œä¸å†è®¿é—®è¡¨æ•°æ®,æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ã€‚ æ‰€ä»¥,ä¸€ä¸ªæŸ¥è¯¢è¦ä½¿ç”¨è¦†ç›–ç´¢å¼•,éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶:</p><ol><li>æŸ¥è¯¢æ‰€éœ€è¦çš„å­—æ®µéƒ½å­˜åœ¨äºæŸä¸ªç´¢å¼•ä¸­</li><li>æŸ¥è¯¢è¯­å¥ç›´æ¥ä»è¯¥ç´¢å¼•ä¸­é€‰å–å­—æ®µ,è€Œä¸å†è®¿é—®è¡¨æ•°æ®</li></ol><p>æ²¡ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„ä¾‹å­:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>\n  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>idx_name_age<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">)</span>  \n<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span>\n\n<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œè™½ç„¶æœ‰(name, age)çš„ç´¢å¼•,ä½†æ˜¯ç”±äºæŸ¥è¯¢éœ€è¦çš„addresså­—æ®µä¸åœ¨è¯¥ç´¢å¼•ä¸­,æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢æ— æ³•ä½¿ç”¨è¦†ç›–ç´¢å¼•,éœ€è¦è®¿é—®è¡¨æ•°æ®è·å–addresså­—æ®µ,æŸ¥è¯¢æ•ˆç‡è¾ƒä½ã€‚</p><p>å›¾ç¤ºï¼š åœ¨æ²¡æœ‰ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œæ•°æ®åº“æŸ¥è¯¢æ•°æ®æ˜¯è¿™æ ·ï¼š <img src="'+v+'" alt="" loading="lazy"></p><p>ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•é¿å…äº†ä»æ•°æ®æœåŠ¡ä¸­è·å–æ•°æ®çš„é¢å¤–æ­¥éª¤ã€‚è¿™å¯¼è‡´äº†ç›¸å½“å¤§çš„æ€§èƒ½æ”¹è¿›ã€‚ <img src="'+h+'" alt="" loading="lazy"></p>',41),wn=n("p",null,"å‚è€ƒæ–‡çŒ®ï¼š",-1),xn={href:"https://stackoverflow.com/questions/62137/what-is-a-covered-index",target:"_blank",rel:"noopener noreferrer"},Cn={href:"https://xiaolincoding.com/mysql/index/index_interview.html#%E6%8C%89%E5%AD%97%E6%AE%B5%E4%B8%AA%E6%95%B0%E5%88%86%E7%B1%BB",target:"_blank",rel:"noopener noreferrer"},Sn={href:"https://stackoverflow.com/questions/609343/what-are-covering-indexes-and-covered-queries-in-sql-server",target:"_blank",rel:"noopener noreferrer"},_n={href:"https://docs.couchbase.com/server/current/n1ql/n1ql-language-reference/covering-indexes.html",target:"_blank",rel:"noopener noreferrer"},Tn={href:"https://www.red-gate.com/simple-talk/databases/sql-server/learn/using-covering-indexes-to-improve-query-performance/",target:"_blank",rel:"noopener noreferrer"},Ln=n("h3",{id:"mysqlçš„éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ-mysqlæ˜¯å¦‚ä½•å®ç°çš„-2023-é˜¿é‡Œ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#mysqlçš„éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ-mysqlæ˜¯å¦‚ä½•å®ç°çš„-2023-é˜¿é‡Œ","aria-hidden":"true"},"#"),s(" mysqlçš„éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ?mysqlæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿï¼ˆ2023 é˜¿é‡Œï¼‰")],-1),Mn=n("p",null,"MySQL InnoDB å¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«è™½ç„¶æ˜¯ã€Œå¯é‡å¤è¯»ã€ï¼Œä½†æ˜¯å®ƒå¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…å¹»è¯»ç°è±¡ï¼ˆå¹¶ä¸æ˜¯å®Œå…¨è§£å†³äº†ï¼‰ï¼Œè§£å†³çš„æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š",-1),An=n("ul",null,[n("li",null,[s("é’ˆå¯¹"),n("strong",null,"å¿«ç…§è¯»"),s("ï¼ˆæ™®é€š select è¯­å¥ï¼‰ï¼Œæ˜¯é€šè¿‡ MVCC æ–¹å¼è§£å†³äº†å¹»è¯»ï¼Œå› ä¸ºå¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œä¸€ç›´è·Ÿè¿™ä¸ªäº‹åŠ¡å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œå³ä½¿ä¸­é€”æœ‰å…¶ä»–äº‹åŠ¡æ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ˜¯æŸ¥è¯¢ä¸å‡ºæ¥è¿™æ¡æ•°æ®çš„ï¼Œæ‰€ä»¥å°±å¾ˆå¥½äº†é¿å…å¹»è¯»é—®é¢˜ã€‚")]),n("li",null,[s("é’ˆå¯¹"),n("strong",null,"å½“å‰è¯»"),s("ï¼ˆselect ... for update ç­‰è¯­å¥ï¼‰ï¼Œæ˜¯é€šè¿‡ next-key lockï¼ˆè®°å½•é”+é—´éš™é”ï¼‰æ–¹å¼è§£å†³äº†å¹»è¯»ï¼Œå› ä¸ºå½“æ‰§è¡Œ select ... for update è¯­å¥çš„æ—¶å€™ï¼Œä¼šåŠ ä¸Š next-key lockï¼Œå¦‚æœæœ‰å…¶ä»–äº‹åŠ¡åœ¨ next-key lock é”èŒƒå›´å†…æ’å…¥äº†ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ’å…¥è¯­å¥å°±ä¼šè¢«é˜»å¡ï¼Œæ— æ³•æˆåŠŸæ’å…¥ï¼Œæ‰€ä»¥å°±å¾ˆå¥½äº†é¿å…å¹»è¯»é—®é¢˜ã€‚")]),n("li")],-1),Pn={href:"https://xiaolincoding.com/mysql/transaction/mvcc.html",target:"_blank",rel:"noopener noreferrer"},Rn=t(`<h3 id="mysqlä¸­delete-å’Œ-truncate-çš„åŒºåˆ«-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#mysqlä¸­delete-å’Œ-truncate-çš„åŒºåˆ«-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> MySQLä¸­delete å’Œ truncate çš„åŒºåˆ«ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li><strong>å‘½ä»¤ç±»å‹</strong>ï¼šDELETEæ˜¯ä¸€ä¸ªDMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰å‘½ä»¤ï¼Œè€ŒTRUNCATEæ˜¯ä¸€ä¸ªDDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰å‘½ä»¤ã€‚</li><li><strong>åˆ é™¤çš„æ•°æ®èŒƒå›´</strong>ï¼šDELETEå¯ä»¥åˆ é™¤è¡¨ä¸­çš„ä¸€è¡Œæˆ–å¤šè¡Œï¼ŒTRUNCATEåˆ™ä¼šåˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰è¡Œã€‚</li><li><strong>æ˜¯å¦å¯ä»¥æ’¤é”€</strong>ï¼šDELETEå‘½ä»¤æ‰§è¡Œåï¼Œä½ å¯ä»¥ä½¿ç”¨ROLLBACKå‘½ä»¤æ’¤é”€æ›´æ”¹ï¼Œè€ŒTRUNCATEæ‰§è¡Œåæ— æ³•æ’¤é”€ã€‚</li><li><strong>æ—¥å¿—è®°å½•</strong>ï¼šDELETEå‘½ä»¤åœ¨åˆ é™¤è¡Œæ—¶ä¼šè®°å½•è¡Œçš„æ—¥å¿—ï¼Œè€ŒTRUNCATEå‘½ä»¤åœ¨åˆ é™¤æ•°æ®æ—¶ä¸è®°å½•ä»»ä½•æ—¥å¿—ã€‚</li><li><strong>æ€§èƒ½</strong>ï¼šTRUNCATEå‘½ä»¤æ¯”DELETEå‘½ä»¤å¿«ï¼Œå› ä¸ºå®ƒä¸è®°å½•ä»»ä½•æ—¥å¿—ã€‚</li><li><strong>è§¦å‘å™¨è¡Œä¸º</strong>ï¼šå¦‚æœä½ åœ¨è¡¨ä¸Šè®¾ç½®äº†è§¦å‘å™¨ï¼Œé‚£ä¹ˆDELETEå‘½ä»¤ä¼šè§¦å‘å®ƒï¼Œè€ŒTRUNCATEå‘½ä»¤ä¸ä¼šã€‚</li><li><strong>å‚ç…§å®Œæ•´æ€§çº¦æŸ</strong>ï¼šTRUNCATEæ˜¯ä¸èƒ½åœ¨å‚ç…§å®Œæ•´æ€§çº¦æŸå­˜åœ¨çš„æƒ…å†µä¸‹ä½¿ç”¨çš„ï¼Œå³ï¼Œå¦‚æœå­˜åœ¨å¤–é”®çº¦æŸï¼Œä¸èƒ½ä½¿ç”¨TRUNCATEã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯è”åˆç´¢å¼•-ä¸ºä»€ä¹ˆè¦å»ºè”åˆç´¢å¼•-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯è”åˆç´¢å¼•-ä¸ºä»€ä¹ˆè¦å»ºè”åˆç´¢å¼•-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯è”åˆç´¢å¼•ï¼Œä¸ºä»€ä¹ˆè¦å»ºè”åˆç´¢å¼•ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>è”åˆç´¢å¼•æ˜¯æ•°æ®åº“ä¸­ä¸€ç§ç‰¹æ®Šç±»å‹çš„ç´¢å¼•ï¼Œå®ƒåŸºäºä¸¤ä¸ªæˆ–å¤šä¸ªåˆ—çš„å€¼è¿›è¡Œåˆ›å»ºã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ ç»å¸¸åœ¨WHEREå­å¥ä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªåˆ—è¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦ä½¿ç”¨è”åˆç´¢å¼•ã€‚</p><p>è”åˆç´¢å¼•çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå®ƒå¯ä»¥æå¤§åœ°æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚å¦‚æœä½ çš„æŸ¥è¯¢é€šå¸¸ä¼šæ¶‰åŠåˆ°å¤šä¸ªåˆ—ï¼Œé‚£ä¹ˆä½¿ç”¨è”åˆç´¢å¼•å¯èƒ½ä¼šæ¯”ä½¿ç”¨å¤šä¸ªå•åˆ—ç´¢å¼•æ›´é«˜æ•ˆã€‚åŒæ—¶ï¼Œå› ä¸ºç´¢å¼•æœ¬èº«ä¼šå ç”¨å­˜å‚¨ç©ºé—´ï¼Œè”åˆç´¢å¼•æ¯”å¤šä¸ªå•åˆ—ç´¢å¼•éœ€è¦æ›´å°‘çš„å­˜å‚¨ç©ºé—´ã€‚</p><p>ä¾‹å¦‚ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªäººå‘˜è¡¨ï¼Œå®ƒæœ‰ä¸¤ä¸ªå­—æ®µï¼šåå­—ï¼ˆFirstNameï¼‰å’Œå§“æ°ï¼ˆLastNameï¼‰ã€‚ä½ ç»å¸¸è¿è¡Œå¦‚ä¸‹æŸ¥è¯¢æ¥æŸ¥æ‰¾ç‰¹å®šçš„å…¨åï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> People <span class="token keyword">WHERE</span> FirstName <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> LastName <span class="token operator">=</span> <span class="token string">&#39;Doe&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä½ åˆ†åˆ«ä¸º FirstName å’Œ LastName åˆ›å»ºç´¢å¼•ï¼ŒMySQL éœ€è¦é¦–å…ˆåœ¨ FirstName ç´¢å¼•ä¸­æ‰¾åˆ°æ‰€æœ‰åä¸º &#39;John&#39; çš„äººï¼Œç„¶ååœ¨ LastName ç´¢å¼•ä¸­æ‰¾åˆ°æ‰€æœ‰å§“ä¸º &#39;Doe&#39; çš„äººï¼Œæœ€åå¯¹è¿™ä¸¤ä¸ªç»“æœé›†è¿›è¡Œäº¤é›†æ“ä½œã€‚è¿™å¯èƒ½éœ€è¦å¤§é‡çš„æ—¶é—´å’Œè®¡ç®—èµ„æºï¼Œç‰¹åˆ«æ˜¯åœ¨è¡¨éå¸¸å¤§çš„æ—¶å€™ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸ºè¿™ä¸¤åˆ—åˆ›å»ºä¸€ä¸ªè”åˆç´¢å¼•ï¼Œé‚£ä¹ˆ MySQL å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªç´¢å¼•æ¥æ‰¾åˆ°æ‰€æœ‰åä¸º &#39;John&#39; å¹¶ä¸”å§“ä¸º &#39;Doe&#39; çš„äººï¼Œæ— éœ€é¢å¤–çš„äº¤é›†æ“ä½œã€‚è¿™æ ·æŸ¥è¯¢çš„æ•ˆç‡å°±ä¼šå¤§å¤§æé«˜ã€‚</p><p>åˆ›å»ºè”åˆç´¢å¼•çš„SQLå‘½ä»¤å¯èƒ½å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_firstname_lastname <span class="token keyword">ON</span> People <span class="token punctuation">(</span>FirstName<span class="token punctuation">,</span> LastName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ çš„æŸ¥è¯¢å¯ä»¥ç›´æ¥åˆ©ç”¨è¿™ä¸ªè”åˆç´¢å¼•ï¼Œå¤§å¤§æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p><h3 id="sql-explain-ä¼šè¾“å‡ºå“ªäº›ä¿¡æ¯-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#sql-explain-ä¼šè¾“å‡ºå“ªäº›ä¿¡æ¯-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> SQL explain ä¼šè¾“å‡ºå“ªäº›ä¿¡æ¯ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ul><li>IDï¼šè¡¨ç¤ºæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ä¸­æ¯ä¸ªæ“ä½œçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li><li>Select Typeï¼šè¡¨ç¤ºæŸ¥è¯¢ä¸­çš„å­æŸ¥è¯¢æˆ–è€…è¡¨çš„ç±»å‹ï¼Œå¦‚ SIMPLEï¼ˆæ— å­æŸ¥è¯¢æˆ–è€… UNIONï¼‰ã€PRIMARYï¼ˆæœ€å¤–å±‚æŸ¥è¯¢ï¼‰ã€SUBQUERYã€DERIVED ç­‰ã€‚</li><li>Tableï¼šè¡¨ç¤ºæ­£åœ¨è®¿é—®çš„è¡¨çš„åç§°ã€‚</li><li>Typeï¼šè¡¨ç¤ºè¿æ¥ç±»å‹ï¼Œå¦‚ ALLï¼ˆå…¨è¡¨æ‰«æï¼‰ã€indexï¼ˆå…¨ç´¢å¼•æ‰«æï¼‰ã€rangeï¼ˆèŒƒå›´æ‰«æï¼‰ã€refï¼ˆä½¿ç”¨éå”¯ä¸€ç´¢å¼•é”®æˆ–è€…å”¯ä¸€ç´¢å¼•é”®çš„ä¸€éƒ¨åˆ†è¿›è¡ŒæŸ¥æ‰¾ç­‰ï¼‰ã€‚</li><li>Possible Keysï¼šè¡¨ç¤ºæŸ¥è¯¢å¯èƒ½ä½¿ç”¨çš„ç´¢å¼•ã€‚</li><li>Keyï¼šè¡¨ç¤ºå®é™…ä½¿ç”¨çš„ç´¢å¼•ã€‚</li><li>Key Lengthï¼šè¡¨ç¤ºä½¿ç”¨çš„ç´¢å¼•çš„é•¿åº¦ã€‚</li><li>Refï¼šè¡¨ç¤ºå“ªäº›åˆ—æˆ–è€…å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼ã€‚</li><li>Rowsï¼šä¼°è®¡è¦æ£€æŸ¥çš„è¡Œæ•°ã€‚</li><li>Filteredï¼šè¡¨ç¤ºè¿”å›çš„è¡Œæ•°å æ‰«æè¡Œæ•°çš„ç™¾åˆ†æ¯”ï¼ˆåŸºäºæ¡ä»¶è¿‡æ»¤ï¼‰ã€‚</li><li>Extraï¼šåŒ…å«æœ‰å…³æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’çš„å…¶ä»–ä¿¡æ¯ï¼Œå¦‚ Using filesortã€Using temporaryã€Using index ç­‰ã€‚</li></ul>`,14),qn=n("p",null,"å‚è€ƒï¼š",-1),En={href:"https://dev.mysql.com/doc/refman/8.0/en/explain-output.html",target:"_blank",rel:"noopener noreferrer"},jn={href:"https://stackoverflow.com/questions/44629837/understanding-output-of-explain-mysql-command",target:"_blank",rel:"noopener noreferrer"},In=t(`<h3 id="sql-æ€ä¹ˆæ‰‹åŠ¨åŠ é”-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#sql-æ€ä¹ˆæ‰‹åŠ¨åŠ é”-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> sql æ€ä¹ˆæ‰‹åŠ¨åŠ é”ï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>åœ¨ SQL ä¸­æ‰‹åŠ¨åŠ é”é€šå¸¸æ˜¯é€šè¿‡ä½¿ç”¨æ˜¾å¼é”å®šè¯­å¥æ¥å®ç°çš„ã€‚åœ¨ MySQL ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ LOCK TABLES å’Œ UNLOCK TABLES è¯­å¥æ¥æ‰‹åŠ¨åŠ é”å’Œè§£é”ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><ol><li>è¯»é”ï¼ˆRead Lockï¼‰ï¼šç»™ä¸€ä¸ªè¡¨åŠ è¯»é”ï¼Œå¯ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥è¡¨è¿›è¡Œå†™æ“ä½œï¼Œä½†å…è®¸å…¶ä»–äº‹åŠ¡è¿›è¡Œè¯»æ“ä½œã€‚è¦ç»™ä¸€ä¸ªè¡¨åŠ è¯»é”ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­å¥ï¼š</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span> table_name <span class="token keyword">READ</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œ<code>table_name</code> æ˜¯ä½ è¦åŠ é”çš„è¡¨çš„åç§°ã€‚</p><ol start="2"><li>å†™é”ï¼ˆWrite Lockï¼‰ï¼šç»™ä¸€ä¸ªè¡¨åŠ å†™é”ï¼Œå¯ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥è¡¨è¿›è¡Œè¯»ã€å†™æ“ä½œã€‚è¦ç»™ä¸€ä¸ªè¡¨åŠ å†™é”ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­å¥ï¼š</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span> table_name <span class="token keyword">WRITE</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ä½¿ç”¨ LOCK TABLES å¯¹è¡¨è¿›è¡Œæ˜¾å¼é”å®šåï¼Œä½ éœ€è¦ä½¿ç”¨ UNLOCK TABLES è¯­å¥æ¥é‡Šæ”¾é”ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">UNLOCK</span> <span class="token keyword">TABLES</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¯·æ³¨æ„ï¼Œè¿™ç§æ‰‹åŠ¨åŠ é”æ–¹å¼ä¸»è¦é€‚ç”¨äº MyISAM å­˜å‚¨å¼•æ“ï¼Œå› ä¸º MyISAM ä¸æ”¯æŒäº‹åŠ¡ã€‚å¯¹äºæ”¯æŒäº‹åŠ¡çš„å­˜å‚¨å¼•æ“ï¼ˆå¦‚ InnoDBï¼‰ï¼Œä½ é€šå¸¸åº”è¯¥ä½¿ç”¨äº‹åŠ¡æ¥å®ç°å¹¶å‘æ§åˆ¶å’Œé”å®šã€‚</p><p>åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ SELECT ... FOR UPDATE æˆ– SELECT ... LOCK IN SHARE MODE è¯­å¥æ¥é”å®šè¡Œã€‚ä¾‹å¦‚ï¼š</p><ol><li>è¡Œé” - FOR UPDATEï¼šç»™ä¸€ä¸ªæˆ–å¤šä¸ªè¡ŒåŠ æ’ä»–é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¿™äº›è¡Œè¿›è¡Œè¯»ã€å†™æ“ä½œã€‚</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> condition <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span>
<span class="token comment">-- è¿›è¡Œå…¶ä»–æ“ä½œ</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>è¡Œé” - LOCK IN SHARE MODEï¼šç»™ä¸€ä¸ªæˆ–å¤šä¸ªè¡ŒåŠ å…±äº«é”ï¼Œå…è®¸å…¶ä»–äº‹åŠ¡å¯¹è¿™äº›è¡Œè¿›è¡Œè¯»æ“ä½œï¼Œä½†é˜»æ­¢å…¶ä»–äº‹åŠ¡è¿›è¡Œå†™æ“ä½œã€‚</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> condition <span class="token keyword">LOCK</span> <span class="token operator">IN</span> <span class="token keyword">SHARE</span> <span class="token keyword">MODE</span><span class="token punctuation">;</span>
<span class="token comment">-- è¿›è¡Œå…¶ä»–æ“ä½œ</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä½¿ç”¨è¡Œé”æ—¶ï¼Œè¯·ç¡®ä¿ä½ çš„æ“ä½œåœ¨äº‹åŠ¡ä¸­è¿›è¡Œï¼Œå¹¶åœ¨å®Œæˆæ“ä½œåæäº¤äº‹åŠ¡ã€‚è¿™å°†é‡Šæ”¾é”å¹¶ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚</p><h3 id="ä»‹ç»ä¸€äº›-mysql-åº•å±‚ç»“æ„-2023-èš‚èšé‡‘æœ" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»ä¸€äº›-mysql-åº•å±‚ç»“æ„-2023-èš‚èšé‡‘æœ" aria-hidden="true">#</a> ä»‹ç»ä¸€äº› mysql åº•å±‚ç»“æ„ï¼Ÿï¼ˆ2023 èš‚èšé‡‘æœï¼‰</h3><ol><li><strong>å­˜å‚¨å¼•æ“ï¼ˆStorage Enginesï¼‰</strong>ï¼šMySQL æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œæ¯ç§å¼•æ“éƒ½æœ‰å…¶ç‰¹å®šçš„ç‰¹æ€§å’Œç”¨é€”ã€‚ä¾‹å¦‚ï¼ŒInnoDB æ˜¯æ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é”å®šçš„å­˜å‚¨å¼•æ“ï¼Œè€Œ MyISAM åˆ™æ˜¯ä¸€ä¸ªç®€å•ã€é«˜æ€§èƒ½çš„å¼•æ“ï¼Œé€‚ç”¨äºåªè¯»æˆ–è¯»å†™æ¯”è¾ƒä½çš„åœºæ™¯ã€‚é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“å¯¹äºæ•°æ®åº“æ€§èƒ½å’Œå¯é æ€§è‡³å…³é‡è¦ã€‚</li><li><strong>æœåŠ¡å™¨å±‚ï¼ˆServer Layerï¼‰</strong>ï¼šæœåŠ¡å™¨å±‚è´Ÿè´£å¤„ç†å®¢æˆ·ç«¯è¿æ¥ã€æŸ¥è¯¢ç¼“å­˜ã€æŸ¥è¯¢åˆ†æã€æŸ¥è¯¢ä¼˜åŒ–å’Œæ‰§è¡Œç­‰ä»»åŠ¡ã€‚å®ƒæä¾›äº†è®¸å¤šåŠŸèƒ½ï¼Œå¦‚å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ï¼Œä»¥å¸®åŠ©ç”¨æˆ·æ›´é«˜æ•ˆåœ°ç®¡ç†å’Œä½¿ç”¨æ•°æ®åº“ã€‚</li><li><strong>ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰</strong>ï¼šç¼“å†²æ± æ˜¯ InnoDB å­˜å‚¨å¼•æ“ç”¨äºç¼“å­˜æ•°æ®å’Œç´¢å¼•çš„å†…å­˜åŒºåŸŸã€‚ç¼“å†²æ± çš„å¤§å°å’Œç®¡ç†å¯¹äºæ•°æ®åº“æ€§èƒ½è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥å‡å°‘ç£ç›˜ I/Oï¼Œä»è€Œæé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚</li><li><strong>æ—¥å¿—ï¼ˆLogsï¼‰</strong>ï¼šMySQL ä½¿ç”¨å¤šç§æ—¥å¿—æ¥è®°å½•æ•°æ®åº“æ´»åŠ¨å’Œè¾…åŠ©æ¢å¤ã€‚ä¾‹å¦‚ï¼ŒäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinary Logï¼‰è®°å½•äº†æ•°æ®åº“æ›´æ”¹çš„å†å²ï¼Œå¯ä»¥ç”¨äºæ•°æ®å¤åˆ¶å’Œæ¢å¤ã€‚è€Œ InnoDB çš„é‡åšæ—¥å¿—ï¼ˆRedo Logï¼‰åˆ™è®°å½•äº†å¯¹æ•°æ®çš„ä¿®æ”¹æ“ä½œï¼Œç”¨äºç¡®ä¿äº‹åŠ¡çš„æŒä¹…æ€§å’Œæ•°æ®åº“åœ¨å´©æºƒåçš„æ¢å¤ã€‚</li><li><strong>ç´¢å¼•ï¼ˆIndexesï¼‰</strong>ï¼šç´¢å¼•æ˜¯æ•°æ®åº“ä¸­ç”¨äºåŠ é€ŸæŸ¥è¯¢çš„æ•°æ®ç»“æ„ã€‚MySQL æ”¯æŒå¤šç§ç´¢å¼•ç±»å‹ï¼Œå¦‚ B-Treeã€å“ˆå¸Œç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ç­‰ã€‚åˆç†åœ°ä½¿ç”¨ç´¢å¼•å¯ä»¥å¤§å¹…æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œä½†è¿‡å¤šçš„ç´¢å¼•å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ“ä½œå˜æ…¢ã€‚</li><li><strong>é”å®šï¼ˆLockingï¼‰</strong>ï¼šä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§å’Œå¹¶å‘æ§åˆ¶ï¼ŒMySQL ä½¿ç”¨å„ç§é”å®šæœºåˆ¶ï¼Œå¦‚è¡¨é”ã€è¡Œé”ã€å…ƒæ•°æ®é”ç­‰ã€‚é”å®šç­–ç•¥çš„é€‰æ‹©å’Œå®ç°å¯¹äºæ•°æ®åº“æ€§èƒ½å’Œå¹¶å‘å¤„ç†èƒ½åŠ›è‡³å…³é‡è¦ã€‚</li><li><strong>äº‹åŠ¡ï¼ˆTransactionsï¼‰</strong>ï¼šäº‹åŠ¡æ˜¯ä¸€ç»„åŸå­æ€§çš„æ•°æ®åº“æ“ä½œï¼Œå®ƒä»¬è¦ä¹ˆå…¨éƒ¨æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œã€‚äº‹åŠ¡å¯ä»¥å¸®åŠ©ç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œå¹¶å‘æ§åˆ¶ã€‚InnoDB å­˜å‚¨å¼•æ“æä¾›äº†å¯¹äº‹åŠ¡çš„æ”¯æŒï¼ŒåŒ…æ‹¬æäº¤ã€å›æ»šã€éš”ç¦»çº§åˆ«ç­‰åŠŸèƒ½ã€‚</li></ol>`,18),Bn=n("p",null,"å‚è€ƒï¼š",-1),On={href:"https://dev.mysql.com/doc/refman/8.0/en/system-schema.html",target:"_blank",rel:"noopener noreferrer"},Nn=t('<h3 id="mysqlä¸­-ä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#mysqlä¸­-ä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> mysqlä¸­ï¼Œä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>åœ¨MySQLä¸­ï¼Œ**ä¸»é”®ç´¢å¼•ï¼ˆPrimary Keyï¼‰<strong>å’Œ</strong>å”¯ä¸€ç´¢å¼•ï¼ˆUnique Keyï¼‰**éƒ½æ˜¯ä¸¤ç§éå¸¸é‡è¦çš„ç´¢å¼•ç±»å‹ï¼Œå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ç†è§£ï¼š</p><ol><li><strong>å”¯ä¸€æ€§</strong>ï¼šä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•éƒ½ä¿è¯äº†ç´¢å¼•åˆ—çš„å”¯ä¸€æ€§ã€‚æ¢å¥è¯è¯´ï¼Œä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•éƒ½è¦æ±‚ç´¢å¼•åˆ—çš„å€¼å”¯ä¸€ï¼Œä¸èƒ½æœ‰é‡å¤çš„å€¼ã€‚</li><li><strong>éç©ºæ€§</strong>ï¼šä¸»é”®ç´¢å¼•è¦æ±‚ç´¢å¼•åˆ—çš„å€¼å¿…é¡»æ˜¯éç©ºçš„ï¼Œè€Œå”¯ä¸€ç´¢å¼•åˆ™å…è®¸ç´¢å¼•åˆ—çš„å€¼ä¸ºNULLã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ åœ¨ä¸€åˆ—ä¸Šå®šä¹‰äº†ä¸»é”®ç´¢å¼•ï¼Œé‚£ä¹ˆä½ ä¸èƒ½åœ¨è¿™åˆ—ä¸Šæ’å…¥NULLå€¼ï¼›è€Œå¦‚æœä½ åœ¨ä¸€åˆ—ä¸Šå®šä¹‰äº†å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨è¿™åˆ—ä¸Šæ’å…¥NULLå€¼ã€‚</li><li><strong>æ•°é‡</strong>ï¼šåœ¨ä¸€ä¸ªè¡¨ä¸­ï¼Œä¸»é”®ç´¢å¼•åªèƒ½æœ‰ä¸€ä¸ªï¼Œè€Œå”¯ä¸€ç´¢å¼•å¯ä»¥æœ‰å¤šä¸ªã€‚</li><li><strong>è‡ªåŠ¨å¢é•¿</strong>ï¼šä¸»é”®å¯ä»¥è‡ªåŠ¨å¢é•¿ï¼Œä½†æ˜¯å”¯ä¸€ç´¢å¼•ä¸èƒ½ã€‚</li><li><strong>é›†ç¾¤ç´¢å¼•</strong>ï¼šåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸»é”®ç´¢å¼•æ˜¯é›†ç¾¤ç´¢å¼•ï¼ˆClustered Indexï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®è®°å½•æ˜¯æŒ‰ç…§ä¸»é”®çš„é¡ºåºæ¥å­˜å‚¨çš„ã€‚å¦‚æœä¸€ä¸ªè¡¨æ²¡æœ‰æ˜ç¡®å®šä¹‰ä¸»é”®ï¼ŒInnoDBä¼šé€‰æ‹©ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ä½œä¸ºä¸»é”®ï¼Œå¦‚æœæ²¡æœ‰å”¯ä¸€ç´¢å¼•ï¼ŒInnoDBä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª6å­—èŠ‚çš„ROWIDä½œä¸ºä¸»é”®ã€‚</li></ol><p>è¿™äº›åŒºåˆ«è®©ä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•åœ¨æ•°æ®åº“è®¾è®¡å’Œä¼˜åŒ–ä¸­å‘æŒ¥ä¸åŒçš„ä½œç”¨ã€‚</p><h3 id="ä¸€ä¸ªè”åˆç´¢å¼•-a-b-c-æŸ¥è¯¢-a-c-èƒ½ç”¨åˆ°ç´¢å¼•å—-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªè”åˆç´¢å¼•-a-b-c-æŸ¥è¯¢-a-c-èƒ½ç”¨åˆ°ç´¢å¼•å—-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> ä¸€ä¸ªè”åˆç´¢å¼•ï¼ˆa, b, cï¼‰ï¼ŒæŸ¥è¯¢ï¼ˆa, cï¼‰ï¼Œèƒ½ç”¨åˆ°ç´¢å¼•å—ï¼Ÿï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>åœ¨MySQLä¸­ï¼Œä½¿ç”¨è”åˆç´¢å¼•ï¼ˆæ¯”å¦‚ç´¢å¼•(a, b, c)ï¼‰æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æŒ‰ç…§ç´¢å¼•çš„é¡ºåºä½¿ç”¨åˆ—ã€‚è¿™æ˜¯ç”±MySQLçš„ç´¢å¼•ç­–ç•¥å†³å®šçš„ï¼Œç§°ä¸ºæœ€å·¦å‰ç¼€åŸåˆ™æˆ–æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ã€‚</p><p>å¯¹äºæŸ¥è¯¢(a, c)ï¼Œåªæœ‰åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«â€œaâ€å­—æ®µï¼Œå¹¶ä¸”&quot;b&quot;å­—æ®µä¹Ÿåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­æ—¶ï¼Œ&quot;c&quot;æ‰èƒ½ç”¨åˆ°ç´¢å¼•ã€‚è¿™æ˜¯å› ä¸ºåœ¨è”åˆç´¢å¼•(a, b, c)ä¸­ï¼Œâ€œc&quot;æ˜¯ç¬¬ä¸‰ä¸ªå­—æ®µï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­ä¸åŒ…å«&quot;bâ€ï¼Œé‚£ä¹ˆç´¢å¼•åœ¨&quot;b&quot;ä¹‹åçš„éƒ¨åˆ†éƒ½ä¸èƒ½ä½¿ç”¨ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä½ çš„æŸ¥è¯¢æ¡ä»¶æ˜¯(a, c)ï¼Œé‚£ä¹ˆMySQLåªèƒ½ä½¿ç”¨åˆ°&quot;a&quot;çš„éƒ¨åˆ†ç´¢å¼•ï¼Œä¸èƒ½åˆ©ç”¨åˆ°&quot;c&quot;çš„éƒ¨åˆ†ç´¢å¼•ï¼Œå³ä¾¿&quot;c&quot;åœ¨ç´¢å¼•ä¸­ã€‚</p><p>ä¸ºäº†ä½¿æŸ¥è¯¢æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ç´¢å¼•ï¼Œä½ å¯ä»¥è€ƒè™‘è°ƒæ•´ç´¢å¼•æˆ–æŸ¥è¯¢çš„è®¾è®¡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è”åˆç´¢å¼•(a, c)ï¼Œæˆ–è€…åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«&quot;b&quot;å­—æ®µã€‚</p><h3 id="äº‹åŠ¡åŸå­æ€§æ˜¯æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡åŸå­æ€§æ˜¯æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" aria-hidden="true">#</a> äº‹åŠ¡åŸå­æ€§æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>MySQLçš„äº‹åŠ¡åŸå­æ€§ä¸»è¦é€šè¿‡Undo Logï¼ˆæ’¤é”€æ—¥å¿—ï¼‰æ¥å®ç°çš„ã€‚</p><p>å½“è¿›è¡Œä¸€æ¬¡äº‹åŠ¡æ“ä½œæ—¶ï¼ŒMySQLä¼šé¦–å…ˆåœ¨Undo Logä¸­è®°å½•ä¸‹äº‹åŠ¡æ“ä½œå‰çš„æ•°æ®çŠ¶æ€ã€‚å¦‚æœäº‹åŠ¡æˆåŠŸæ‰§è¡Œå¹¶æäº¤ï¼ŒUndo Logä¸­çš„è®°å½•å°±å¯ä»¥è¢«åˆ é™¤ã€‚ä½†å¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œæˆ–è€…ç”¨æˆ·æ‰§è¡Œäº†ROLLBACKæ“ä½œï¼ŒMySQLå°±ä¼šåˆ©ç”¨Undo Logä¸­çš„ä¿¡æ¯å°†æ•°æ®æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œä»è€Œå®ç°äº‹åŠ¡çš„åŸå­æ€§ã€‚</p><p>è¿™å°±æ„å‘³ç€ï¼Œäº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå¦‚æœéƒ¨åˆ†æ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ä¹Ÿä¼šè¢«æ’¤é”€ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><h3 id="äº‹åŠ¡çš„éš”ç¦»æ€§æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡çš„éš”ç¦»æ€§æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" aria-hidden="true">#</a> äº‹åŠ¡çš„éš”ç¦»æ€§æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>MySQLçš„äº‹åŠ¡éš”ç¦»æ€§ä¸»è¦é€šè¿‡é”æœºåˆ¶å’Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰æ¥å®ç°ã€‚</p><ol><li>é”æœºåˆ¶ï¼šåŒ…æ‹¬è¡Œé”å’Œè¡¨é”ã€‚è¡Œé”å¯ä»¥ç²¾ç¡®åˆ°æ•°æ®åº“è¡¨ä¸­çš„æŸä¸€è¡Œï¼Œè€Œè¡¨é”åˆ™ä¼šé”å®šæ•´ä¸ªæ•°æ®è¡¨ã€‚å½“ä¸€ä¸ªäº‹åŠ¡åœ¨æ“ä½œæŸä¸ªæ•°æ®é¡¹æ—¶ï¼Œä¼šå¯¹å…¶åŠ é”ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å¯¹åŒä¸€æ•°æ®é¡¹çš„å¹¶å‘æ“ä½œï¼Œä»è€Œå®ç°éš”ç¦»æ€§ã€‚</li><li>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰ï¼šè¿™æ˜¯InnoDBå­˜å‚¨å¼•æ“ç‰¹æœ‰çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå¯ä»¥åœ¨ä¸åŠ é”çš„æƒ…å†µä¸‹åˆ›å»ºæ•°æ®åœ¨æŸä¸€æ—¶é—´ç‚¹çš„å¿«ç…§ã€‚åœ¨è¯»å–æ•°æ®æ—¶ï¼ŒMVCCä¼šè¿”å›è¯¥æ—¶é—´ç‚¹çš„æ•°æ®ç‰ˆæœ¬ï¼Œå³ä½¿è¯¥æ•°æ®åæ¥è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚è¿™æ ·ï¼Œæ¯ä¸ªäº‹åŠ¡éƒ½æœ‰è‡ªå·±çš„æ•°æ®è§†å›¾ï¼Œå½¼æ­¤ä¹‹é—´ä¸ä¼šäº’ç›¸å½±å“ï¼Œå®ç°äº†éš”ç¦»æ€§ã€‚</li></ol><p>æ­¤å¤–ï¼ŒMySQLè¿˜æä¾›äº†å››ç§éš”ç¦»çº§åˆ«ï¼ˆè¯»æœªæäº¤ã€è¯»å·²æäº¤ã€å¯é‡å¤è¯»ã€ä¸²è¡ŒåŒ–ï¼‰ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼Œä»¥åœ¨å¹¶å‘æ€§å’Œæ•°æ®ä¸€è‡´æ€§ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p><h3 id="äº‹åŠ¡ä¸€è‡´æ€§æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡ä¸€è‡´æ€§æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" aria-hidden="true">#</a> äº‹åŠ¡ä¸€è‡´æ€§æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>MySQLå®ç°äº‹åŠ¡ä¸€è‡´æ€§ä¸»è¦ä¾èµ–äºå…¶InnoDBå­˜å‚¨å¼•æ“çš„ACIDå±æ€§ï¼Œå…¶ä¸­Cä»£è¡¨ä¸€è‡´æ€§(Consistency)ã€‚å…·ä½“æ¥è¯´ï¼Œä»¥ä¸‹æ˜¯MySQLå¦‚ä½•å®ç°äº‹åŠ¡ä¸€è‡´æ€§çš„ä¸€äº›æ–¹å¼ï¼š</p><ol><li><strong>ä½¿ç”¨é”æœºåˆ¶</strong>ï¼šInnoDBå­˜å‚¨å¼•æ“æ”¯æŒè¡Œçº§é”å’Œè¡¨çº§é”ï¼Œé€šè¿‡é”æœºåˆ¶æ¥æ§åˆ¶å¹¶å‘äº‹åŠ¡çš„è®¿é—®å†²çªï¼Œç¡®ä¿æ¯ä¸ªäº‹åŠ¡éƒ½åœ¨ä¸€è‡´æ€§çš„çŠ¶æ€ä¸‹æ‰§è¡Œã€‚</li><li><strong>ä½¿ç”¨MVCC</strong>ï¼šInnoDBå­˜å‚¨å¼•æ“é€šè¿‡MVCCæ¥å®ç°è¯»å·²æäº¤å’Œå¯é‡å¤è¯»ä¸¤ä¸ªéš”ç¦»çº§åˆ«ï¼Œä¿è¯äº†äº‹åŠ¡çš„ä¸€è‡´æ€§è§†å›¾ï¼Œå³åœ¨äº‹åŠ¡å¼€å§‹æ—¶ç”Ÿæˆä¸€ä¸ªå¿«ç…§ï¼Œäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®éƒ½æ˜¯è¿™ä¸ªå¿«ç…§ä¸­çš„æ•°æ®ã€‚</li><li><strong>ä½¿ç”¨Undoæ—¥å¿—</strong>ï¼šInnoDBå­˜å‚¨å¼•æ“åœ¨ä¿®æ”¹æ•°æ®å‰ï¼Œä¼šå…ˆå°†åŸå§‹æ•°æ®ä¿å­˜åœ¨Undoæ—¥å¿—ä¸­ï¼Œå¦‚æœäº‹åŠ¡å¤±è´¥æˆ–è€…éœ€è¦å›æ»šï¼Œå°±å¯ä»¥åˆ©ç”¨Undoæ—¥å¿—å°†æ•°æ®æ¢å¤åˆ°åŸå§‹çŠ¶æ€ï¼Œä»è€Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li><li><strong>ä½¿ç”¨Redoæ—¥å¿—</strong>ï¼šRedoæ—¥å¿—ç”¨äºä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ï¼Œä½†ä¹Ÿé—´æ¥ä¿è¯äº†ä¸€è‡´æ€§ã€‚å› ä¸ºåœ¨ç³»ç»Ÿå´©æºƒæ¢å¤æ—¶ï¼Œå¯ä»¥é€šè¿‡Redoæ—¥å¿—æ¥é‡åšå·²æäº¤çš„äº‹åŠ¡ï¼Œä¿è¯è¿™äº›äº‹åŠ¡çš„ä¿®æ”¹èƒ½å¤ŸæŒä¹…ä¿å­˜ã€‚</li></ol><h3 id="äº‹åŠ¡çš„æŒä¹…æ€§æ€ä¹ˆå®ç°çš„-é€šè¿‡2023-ç¾å›¢é¢è¯•é¢˜æ€è€ƒè¡¥å……" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡çš„æŒä¹…æ€§æ€ä¹ˆå®ç°çš„-é€šè¿‡2023-ç¾å›¢é¢è¯•é¢˜æ€è€ƒè¡¥å……" aria-hidden="true">#</a> äº‹åŠ¡çš„æŒä¹…æ€§æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆé€šè¿‡2023 ç¾å›¢é¢è¯•é¢˜æ€è€ƒè¡¥å……ï¼‰</h3><p>MySQLå®ç°äº‹åŠ¡æŒä¹…æ€§ä¸»è¦ä¾èµ–äºå…¶ä½¿ç”¨çš„å­˜å‚¨å¼•æ“ï¼Œæ¯”å¦‚InnoDBã€‚ä»¥ä¸‹æ˜¯InnoDBå¦‚ä½•å®ç°äº‹åŠ¡æŒä¹…æ€§çš„ä¸€äº›æ–¹å¼ï¼š</p><ol><li><strong>é‡åšæ—¥å¿—ï¼ˆRedo Logsï¼‰</strong>ï¼šInnoDBå¼•æ“æœ‰ä¸€ç»„é‡åšæ—¥å¿—æ–‡ä»¶ï¼Œäº‹åŠ¡æäº¤å‰ï¼Œä¼šå…ˆå°†æ›´æ”¹å†™å…¥åˆ°é‡åšæ—¥å¿—ä¸­ï¼Œå¹¶ä¿è¯è¿™äº›æ—¥å¿—è¢«å†™å…¥åˆ°ç£ç›˜ã€‚è¿™ç§æœºåˆ¶å°±æ˜¯æ‰€è°“çš„é¢„å†™å¼æ—¥å¿—ï¼ˆWrite-Ahead Loggingï¼ŒWALï¼‰ã€‚æ¯ä¸ªé‡åšæ—¥å¿—éƒ½åŒ…å«äº†äº‹åŠ¡çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠè¿™ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ã€‚</li><li><strong>åˆ·æ–°ç¼“å†²æ± ï¼ˆFlush Buffer Poolï¼‰</strong>ï¼šå½“äº‹åŠ¡æäº¤æ—¶ï¼ŒInnoDBå¼•æ“åªæ˜¯å°†æ›´æ”¹å†™å…¥äº†é‡åšæ—¥å¿—ï¼Œå¹¶æ²¡æœ‰ç«‹å³å†™å…¥åˆ°ç£ç›˜çš„æ•°æ®æ–‡ä»¶ä¸­ã€‚å®é™…çš„å†™å…¥è¿‡ç¨‹æ˜¯åœ¨åå°ä»¥ä¸€å®šçš„é¢‘ç‡è¿›è¡Œçš„ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åˆ·æ–°ç¼“å†²æ± ã€‚</li><li><strong>å´©æºƒæ¢å¤ï¼ˆCrash Recoveryï¼‰</strong>ï¼šå¦‚æœæ•°æ®åº“åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å´©æºƒï¼ŒInnoDBå¯ä»¥ä½¿ç”¨é‡åšæ—¥å¿—æ¥æ¢å¤æ•°æ®åˆ°ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚åœ¨é‡å¯è¿‡ç¨‹ä¸­ï¼ŒInnoDBä¼šæ£€æŸ¥é‡åšæ—¥å¿—ï¼Œå¹¶å°†æ‰€æœ‰æœªå®Œæˆçš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åº”ç”¨åˆ°æ•°æ®æ–‡ä»¶ä¸­ï¼ŒåŒæ—¶å–æ¶ˆæ‰€æœ‰æœªæäº¤çš„äº‹åŠ¡ã€‚</li></ol><p>è¿™äº›æœºåˆ¶å…±åŒç¡®ä¿äº†MySQLäº‹åŠ¡çš„æŒä¹…æ€§ï¼Œå³ä½¿åœ¨ç³»ç»Ÿå´©æºƒåï¼Œå·²æäº¤çš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ä¹Ÿèƒ½è¢«æ­£ç¡®åœ°æ¢å¤ã€‚</p>',24),Hn={href:"https://javaguide.cn/database/mysql/mysql-logs.html#%E5%88%B7%E7%9B%98%E6%97%B6%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"},Dn=t('<h3 id="äº‹åŠ¡çš„è¿™å››ä¸ªç‰¹æ€§æ˜¯æ€ä¹ˆå®ç°çš„-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡çš„è¿™å››ä¸ªç‰¹æ€§æ˜¯æ€ä¹ˆå®ç°çš„-2023-é˜¿é‡Œ" aria-hidden="true">#</a> äº‹åŠ¡çš„è¿™å››ä¸ªç‰¹æ€§æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ(2023 é˜¿é‡Œ)</h3><ul><li>æŒä¹…æ€§æ˜¯é€šè¿‡ redo log ï¼ˆé‡åšæ—¥å¿—ï¼‰æ¥ä¿è¯çš„ï¼›</li><li>åŸå­æ€§æ˜¯é€šè¿‡ undo logï¼ˆå›æ»šæ—¥å¿—ï¼‰ æ¥ä¿è¯çš„ï¼›</li><li>éš”ç¦»æ€§æ˜¯é€šè¿‡ MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ æˆ–é”æœºåˆ¶æ¥ä¿è¯çš„ï¼›</li><li>ä¸€è‡´æ€§åˆ™æ˜¯é€šè¿‡æŒä¹…æ€§+åŸå­æ€§+éš”ç¦»æ€§æ¥ä¿è¯ï¼›</li></ul><h3 id="mysqlæ­»é”çš„æ¡ˆä¾‹-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#mysqlæ­»é”çš„æ¡ˆä¾‹-2023-é˜¿é‡Œ" aria-hidden="true">#</a> MySQLæ­»é”çš„æ¡ˆä¾‹(2023 é˜¿é‡Œ)</h3><p><code>t_order</code> è¡¨é‡Œç°åœ¨å·²ç»æœ‰äº† 6 æ¡è®°å½•ï¼Œå…¶ä¸­ id å­—æ®µä¸ºä¸»é”®ç´¢å¼•ï¼Œorder_no å­—æ®µæ™®é€šç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯éå”¯ä¸€ç´¢å¼•ï¼š</p><figure><img src="'+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æœ‰ä¸¤äº‹åŠ¡ï¼Œä¸€ä¸ªäº‹åŠ¡è¦æ’å…¥è®¢å• 1007 ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡è¦æ’å…¥è®¢å• 1008ï¼Œå› ä¸ºéœ€è¦å¯¹è®¢å•åšå¹‚ç­‰æ€§æ ¡éªŒï¼Œæ‰€ä»¥ä¸¤ä¸ªäº‹åŠ¡å…ˆè¦æŸ¥è¯¢è¯¥è®¢å•æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨æ‰æ’å…¥è®°å½•ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><figure><img src="'+y+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªäº‹åŠ¡éƒ½é™·å…¥äº†ç­‰å¾…çŠ¶æ€ï¼ŒåŸå› ï¼š</p><ul><li>T1: äº‹åŠ¡ a åœ¨æ‰§è¡Œ select id from t_order where order_no = 1007 for updateï¼Œä¼šåœ¨äºŒçº§ç´¢å¼•ï¼ˆINDEX_NAME : index_orderï¼‰ä¸ŠåŠ çš„æ˜¯ X å‹çš„ next-key é”ï¼Œé”èŒƒå›´æ˜¯<code>(1006, +âˆ]</code>ã€‚</li><li>T2: äº‹åŠ¡ b åœ¨æ‰§è¡Œ select id from t_order where order_no = 1008 for updateï¼Œä¼šåœ¨äºŒçº§ç´¢å¼•ï¼ˆINDEX_NAME : index_orderï¼‰ä¸ŠåŠ çš„æ˜¯ X å‹çš„ next-key é”ï¼Œé”èŒƒå›´æ˜¯<code>(1006, +âˆ]</code>ã€‚</li><li>T3ï¼šäº‹åŠ¡ a å¾€äº‹åŠ¡ A next-key é”çš„èŒƒå›´ (1006, +âˆ] é‡Œæ’å…¥ id = 1007 çš„è®°å½•å°±ä¼šè¢«é”ä½ï¼šå› ä¸ºå½“æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ’å…¥è¯­å¥æ—¶ï¼Œä¼šåœ¨æ’å…¥é—´éš™ä¸Šè·å–æ’å…¥æ„å‘é”ï¼Œè€Œæ’å…¥æ„å‘é”ä¸é—´éš™é”æ˜¯å†²çªçš„ï¼Œæ‰€ä»¥å½“å…¶å®ƒäº‹åŠ¡æŒæœ‰è¯¥é—´éš™çš„é—´éš™é”æ—¶ï¼Œéœ€è¦ç­‰å¾…å…¶å®ƒäº‹åŠ¡é‡Šæ”¾é—´éš™é”ä¹‹åï¼Œæ‰èƒ½è·å–åˆ°æ’å…¥æ„å‘é”</li><li>T4ï¼šäº‹åŠ¡ b å¾€äº‹åŠ¡ a next-key é”çš„èŒƒå›´ (1006, +âˆ] é‡Œæ’å…¥ id = 1008 çš„è®°å½•å°±ä¼šè¢«é”ä½ï¼ŒåŸå› ä¹Ÿæ˜¯ä¸€æ ·ï¼Œç”³è¯·æ’å…¥æ„å‘é”çš„æ—¶å€™é˜»å¡äº†ã€‚</li></ul><p>æ¡ˆä¾‹ä¸­çš„äº‹åŠ¡ A å’Œäº‹åŠ¡ B åœ¨æ‰§è¡Œå®Œå <code>select ... for update</code> è¯­å¥åï¼Œéƒ½æŒæœ‰èŒƒå›´ä¸º<code>(1006,+âˆ]</code>çš„next-key é”ï¼Œè€Œæ¥ä¸‹æ¥çš„æ’å…¥æ“ä½œä¸ºäº†è·å–åˆ°æ’å…¥æ„å‘é”ï¼Œéƒ½åœ¨ç­‰å¾…å¯¹æ–¹äº‹åŠ¡çš„é—´éš™é”é‡Šæ”¾ï¼Œäºæ˜¯å°±é€ æˆäº†å¾ªç¯ç­‰å¾…ï¼Œå¯¼è‡´æ­»é”ã€‚</p><h3 id="mysqlåˆ†åº“åˆ†è¡¨ä¹‹åæ€ä¹ˆç¡®ä¿æ¯ä¸ªè¡¨çš„idéƒ½æ˜¯å”¯ä¸€çš„-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#mysqlåˆ†åº“åˆ†è¡¨ä¹‹åæ€ä¹ˆç¡®ä¿æ¯ä¸ªè¡¨çš„idéƒ½æ˜¯å”¯ä¸€çš„-2023-é˜¿é‡Œ" aria-hidden="true">#</a> MySQLåˆ†åº“åˆ†è¡¨ä¹‹åæ€ä¹ˆç¡®ä¿æ¯ä¸ªè¡¨çš„idéƒ½æ˜¯å”¯ä¸€çš„ï¼Ÿï¼ˆ2023 é˜¿é‡Œï¼‰</h3><p>å¯ä»¥ä½¿ç”¨é›ªèŠ±ç®—æ³•ç®—æ³•æ¥ç”Ÿæˆåˆ†å¸ƒå¼ idï¼Œ<strong>å®ƒä¼šç”Ÿæˆä¸€ä¸ª <code>64 bit</code> çš„æ•´æ•°</strong>ï¼Œå¯ä»¥ä¿è¯ä¸åŒè¿›ç¨‹ä¸»é”®çš„ä¸é‡å¤æ€§ï¼Œä»¥åŠç›¸åŒè¿›ç¨‹ä¸»é”®çš„æœ‰åºæ€§ã€‚</p><figure><img src="'+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå®ƒé¦–å…ˆæ˜¯é€šè¿‡æ—¶é—´ä½ä¿è¯ä¸é‡å¤ï¼Œå¦‚æœæ—¶é—´ç›¸åŒåˆ™æ˜¯é€šè¿‡åºåˆ—ä½ä¿è¯ã€‚åŒæ—¶ç”±äºæ—¶é—´ä½æ˜¯å•è°ƒé€’å¢çš„ï¼Œä¸”å„ä¸ªæœåŠ¡å™¨å¦‚æœå¤§ä½“åšäº†æ—¶é—´åŒæ­¥ï¼Œé‚£ä¹ˆç”Ÿæˆçš„ä¸»é”®åœ¨åˆ†å¸ƒå¼ç¯å¢ƒå¯ä»¥è®¤ä¸ºæ˜¯æ€»ä½“æœ‰åºçš„ï¼Œè¿™å°±ä¿è¯äº†å¯¹ç´¢å¼•å­—æ®µçš„æ’å…¥çš„é«˜æ•ˆæ€§ã€‚</p><p>ä½†æ˜¯é›ªèŠ±ç®—æ³•æœ‰ç¼ºç‚¹ï¼Œé›ªèŠ±ç®—æ³•æ˜¯å¼ºä¾èµ–äºæ—¶é—´çš„ï¼Œè€Œå¦‚æœæœºå™¨æ—¶é—´å‘ç”Ÿå›æ‹¨ï¼Œæœ‰å¯èƒ½ä¼šç”Ÿæˆé‡å¤çš„ IDã€‚å¯ä»¥ç”¨ç¾å›¢æä¾›çš„åˆ†å¸ƒå¼ ID è§£å†³æ–¹æ¡ˆ Leafï¼Œä»–æ˜¯ä¸ä¾èµ–æ—¶é—´æˆ³çš„</p><h3 id="mvccçš„éš”ç¦»æœºåˆ¶ä»‹ç»ä¸€ä¸‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#mvccçš„éš”ç¦»æœºåˆ¶ä»‹ç»ä¸€ä¸‹-2023-ç¾å›¢" aria-hidden="true">#</a> MVCCçš„éš”ç¦»æœºåˆ¶ä»‹ç»ä¸€ä¸‹ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ul><li>Read View ä¸­å››ä¸ªå­—æ®µä½œç”¨ï¼›</li><li>èšç°‡ç´¢å¼•è®°å½•ä¸­ä¸¤ä¸ªè·Ÿäº‹åŠ¡æœ‰å…³çš„éšè—åˆ—ï¼›</li></ul><p>é‚£ Read View åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p><figure><img src="'+w+'" alt="mvcc-1" tabindex="0" loading="lazy"><figcaption>mvcc-1</figcaption></figure><p>Read View æœ‰å››ä¸ªé‡è¦çš„å­—æ®µï¼š</p><ul><li>m_ids ï¼šæŒ‡çš„æ˜¯åœ¨åˆ›å»º Read View æ—¶ï¼Œå½“å‰æ•°æ®åº“ä¸­ã€Œæ´»è·ƒäº‹åŠ¡ã€çš„<strong>äº‹åŠ¡ id åˆ—è¡¨</strong>ï¼Œæ³¨æ„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œ<strong>â€œæ´»è·ƒäº‹åŠ¡â€æŒ‡çš„å°±æ˜¯ï¼Œå¯åŠ¨äº†ä½†è¿˜æ²¡æäº¤çš„äº‹åŠ¡</strong>ã€‚</li><li>min_trx_id ï¼šæŒ‡çš„æ˜¯åœ¨åˆ›å»º Read View æ—¶ï¼Œå½“å‰æ•°æ®åº“ä¸­ã€Œæ´»è·ƒäº‹åŠ¡ã€ä¸­äº‹åŠ¡ <strong>id æœ€å°çš„äº‹åŠ¡</strong>ï¼Œä¹Ÿå°±æ˜¯ m_ids çš„æœ€å°å€¼ã€‚</li><li>max_trx_id ï¼šè¿™ä¸ªå¹¶ä¸æ˜¯ m_ids çš„æœ€å¤§å€¼ï¼Œè€Œæ˜¯<strong>åˆ›å»º Read View æ—¶å½“å‰æ•°æ®åº“ä¸­åº”è¯¥ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„ id å€¼</strong>ï¼Œä¹Ÿå°±æ˜¯å…¨å±€äº‹åŠ¡ä¸­æœ€å¤§çš„äº‹åŠ¡ id å€¼ + 1ï¼›</li><li>creator_trx_id ï¼šæŒ‡çš„æ˜¯<strong>åˆ›å»ºè¯¥ Read View çš„äº‹åŠ¡çš„äº‹åŠ¡ id</strong>ã€‚</li></ul><p>çŸ¥é“äº† Read View çš„å­—æ®µï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£èšç°‡ç´¢å¼•è®°å½•ä¸­çš„ä¸¤ä¸ªéšè—åˆ—ã€‚</p><p>å‡è®¾åœ¨è´¦æˆ·ä½™é¢è¡¨æ’å…¥ä¸€æ¡å°æ—ä½™é¢ä¸º 100 ä¸‡çš„è®°å½•ï¼Œç„¶åæˆ‘æŠŠè¿™ä¸¤ä¸ªéšè—åˆ—ä¹Ÿç”»å‡ºæ¥ï¼Œè¯¥è®°å½•çš„æ•´ä¸ªç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><figure><img src="'+x+'" alt="mvcc-2" tabindex="0" loading="lazy"><figcaption>mvcc-2</figcaption></figure><p>å¯¹äºä½¿ç”¨ InnoDB å­˜å‚¨å¼•æ“çš„æ•°æ®åº“è¡¨ï¼Œå®ƒçš„èšç°‡ç´¢å¼•è®°å½•ä¸­éƒ½åŒ…å«ä¸‹é¢ä¸¤ä¸ªéšè—åˆ—ï¼š</p><ul><li>trx_idï¼Œå½“ä¸€ä¸ªäº‹åŠ¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œå°±ä¼š<strong>æŠŠè¯¥äº‹åŠ¡çš„äº‹åŠ¡ id è®°å½•åœ¨ trx_id éšè—åˆ—é‡Œ</strong>ï¼›</li><li>roll_pointerï¼Œæ¯æ¬¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šæŠŠæ—§ç‰ˆæœ¬çš„è®°å½•å†™å…¥åˆ° undo æ—¥å¿—ä¸­ï¼Œç„¶å<strong>è¿™ä¸ªéšè—åˆ—æ˜¯ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ¯ä¸€ä¸ªæ—§ç‰ˆæœ¬è®°å½•</strong>ï¼Œäºæ˜¯å°±å¯ä»¥é€šè¿‡å®ƒæ‰¾åˆ°ä¿®æ”¹å‰çš„è®°å½•ã€‚</li></ul><p>åœ¨åˆ›å»º Read View åï¼Œæˆ‘ä»¬å¯ä»¥å°†è®°å½•ä¸­çš„ trx_id åˆ’åˆ†è¿™ä¸‰ç§æƒ…å†µï¼š</p><figure><img src="'+C+`" alt="mvcc-3" tabindex="0" loading="lazy"><figcaption>mvcc-3</figcaption></figure><p>ä¸€ä¸ªäº‹åŠ¡å»è®¿é—®è®°å½•çš„æ—¶å€™ï¼Œé™¤äº†è‡ªå·±çš„æ›´æ–°è®°å½•æ€»æ˜¯å¯è§ä¹‹å¤–ï¼Œè¿˜æœ‰è¿™å‡ ç§æƒ…å†µï¼š</p><ul><li><p>å¦‚æœè®°å½•çš„ trx_id å€¼å°äº Read View ä¸­çš„ <code>min_trx_id</code> å€¼ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬çš„è®°å½•æ˜¯åœ¨åˆ›å»º Read View <strong>å‰</strong>å·²ç»æäº¤çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡<strong>å¯è§</strong>ã€‚</p></li><li><p>å¦‚æœè®°å½•çš„ trx_id å€¼å¤§äºç­‰äº Read View ä¸­çš„ <code>max_trx_id</code> å€¼ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬çš„è®°å½•æ˜¯åœ¨åˆ›å»º Read View <strong>å</strong>æ‰å¯åŠ¨çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡<strong>ä¸å¯è§</strong>ã€‚</p></li><li><p>å¦‚æœè®°å½•çš„ trx_id å€¼åœ¨ Read View çš„ min_trx_idå’Œmax_trx_idä¹‹é—´ï¼Œéœ€è¦åˆ¤æ–­ trx_id æ˜¯å¦åœ¨ m_ids åˆ—è¡¨ä¸­ï¼š</p></li><li><ul><li>å¦‚æœè®°å½•çš„ trx_id <strong>åœ¨</strong> <code>m_ids</code> åˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºç”Ÿæˆè¯¥ç‰ˆæœ¬è®°å½•çš„æ´»è·ƒäº‹åŠ¡ä¾ç„¶æ´»è·ƒç€ï¼ˆè¿˜æ²¡æäº¤äº‹åŠ¡ï¼‰ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡<strong>ä¸å¯è§</strong>ã€‚</li><li>å¦‚æœè®°å½•çš„ trx_id <strong>ä¸åœ¨</strong> <code>m_ids</code>åˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºç”Ÿæˆè¯¥ç‰ˆæœ¬è®°å½•çš„æ´»è·ƒäº‹åŠ¡å·²ç»è¢«æäº¤ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡<strong>å¯è§</strong>ã€‚</li></ul></li></ul><p><strong>è¿™ç§é€šè¿‡ã€Œç‰ˆæœ¬é“¾ã€æ¥æ§åˆ¶å¹¶å‘äº‹åŠ¡è®¿é—®åŒä¸€ä¸ªè®°å½•æ—¶çš„è¡Œä¸ºå°±å« MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ã€‚</strong></p><h3 id="æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼-å¯ä»¥åèŒƒå¼å—-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼-å¯ä»¥åèŒƒå¼å—-2023-ç¾å›¢" aria-hidden="true">#</a> æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼ï¼Œå¯ä»¥åèŒƒå¼å—ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼æ˜¯æ•°æ®åº“è®¾è®¡çš„åŸºæœ¬åŸåˆ™ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ol><li><strong>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰</strong> ï¼šæ•°æ®è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒï¼Œä¹Ÿå°±æ˜¯å±æ€§å€¼æ˜¯åŸå­æ€§çš„ã€‚</li><li><strong>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰</strong>ï¼šåœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚æ•°æ®è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½ä¸ä¸»é”®ç›¸å…³ï¼Œä¹Ÿå°±æ˜¯è¯´éä¸»é”®åˆ—å¿…é¡»å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œä¸èƒ½åªä¾èµ–ä¸»é”®çš„ä¸€éƒ¨åˆ†ï¼ˆé’ˆå¯¹è”åˆä¸»é”®ï¼‰ã€‚</li><li><strong>ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰</strong>ï¼šåœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚ä¸€ä¸ªæ•°æ®è¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶ä»–è¡¨ä¸­å·²åŒ…å«çš„éä¸»é”®ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œéä¸»é”®åˆ—å¿…é¡»ç›´æ¥ä¾èµ–äºä¸»é”®ï¼Œä¸èƒ½å­˜åœ¨ä¼ é€’ä¾èµ–ã€‚</li></ol><blockquote><p>ä¼ é€’ä¾èµ–è¿›æ­¥ä¸€è§£é‡Šï¼šåœ¨ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªéä¸»é”®åˆ—Bï¼Œå®ƒä¸ç›´æ¥ä¾èµ–äºè¯¥è¡¨çš„ä¸»é”®åˆ—Aï¼Œè€Œæ˜¯ä¾èµ–äºå¦ä¸€ä¸ªéä¸»é”®åˆ—Cï¼Œè€Œè¿™ä¸ªéä¸»é”®åˆ—Cåˆä¾èµ–äºä¸»é”®åˆ—Aï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´ï¼Œéä¸»é”®åˆ—Bå¯¹ä¸»é”®åˆ—Aå­˜åœ¨ä¼ é€’ä¾èµ–ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«å­¦ç”ŸIDï¼ˆä¸»é”®ï¼‰ã€å­¦ç”Ÿå§“åã€ç­çº§åç§°å’Œç­ä¸»ä»»å§“åçš„è¡¨ã€‚åœ¨è¿™ä¸ªè¡¨ä¸­ï¼Œå­¦ç”Ÿå§“åç›´æ¥ä¾èµ–äºå­¦ç”ŸIDï¼Œç­çº§åç§°ä¹Ÿç›´æ¥ä¾èµ–äºå­¦ç”ŸIDï¼Œä½†æ˜¯ç­ä¸»ä»»å§“åå¹¶ä¸ç›´æ¥ä¾èµ–äºå­¦ç”ŸIDï¼Œè€Œæ˜¯ä¾èµ–äºç­çº§åç§°ï¼ˆå› ä¸ºä¸€ä¸ªç­çº§å¯¹åº”ä¸€ä¸ªç­ä¸»ä»»ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´ï¼Œç­ä¸»ä»»å§“åå¯¹å­¦ç”ŸIDå­˜åœ¨ä¼ é€’ä¾èµ–ã€‚</p><p>ä¸ºäº†æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ï¼Œæˆ‘ä»¬éœ€è¦æ¶ˆé™¤è¿™ç§ä¼ é€’ä¾èµ–ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸè¡¨æ‹†åˆ†ä¸ºä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªè¡¨åŒ…å«å­¦ç”ŸIDã€å­¦ç”Ÿå§“åå’Œç­çº§åç§°ï¼Œå¦ä¸€ä¸ªè¡¨åŒ…å«ç­çº§åç§°å’Œç­ä¸»ä»»å§“åã€‚è¿™æ ·ï¼Œæ¯ä¸ªè¡¨ä¸­çš„éä¸»é”®åˆ—éƒ½ç›´æ¥ä¾èµ–äºä¸»é”®ï¼Œä¸å­˜åœ¨ä¼ é€’ä¾èµ–ï¼Œä»è€Œæ»¡è¶³ç¬¬ä¸‰èŒƒå¼ã€‚</p></blockquote><p>å…³äºåèŒƒå¼ï¼Œæ˜¯çš„ï¼Œæ•°æ®åº“è®¾è®¡å¯ä»¥åèŒƒå¼ã€‚åèŒƒå¼è®¾è®¡æ˜¯ä¸ºäº†ä¼˜åŒ–æ•°æ®åº“æ€§èƒ½ï¼Œé€šè¿‡å¢åŠ å†—ä½™æ•°æ®æˆ–è€…ç»„åˆæ•°æ®ï¼Œå‡å°‘å¤æ‚çš„æ•°æ®æŸ¥è¯¢ï¼Œæé«˜æ•°æ®è¯»å–æ€§èƒ½ã€‚</p><blockquote><p>åèŒƒå¼ï¼šæ˜¯æ•°æ®åº“è®¾è®¡ä¸­çš„ä¸€ç§ç­–ç•¥ï¼Œé€šè¿‡å¼•å…¥æ•°æ®å†—ä½™æˆ–åˆå¹¶è¡¨æ¥ä¼˜åŒ–è¯»å–æ€§èƒ½ï¼Œä½†å¯èƒ½ä¼šå¢åŠ æ•°æ®ç®¡ç†çš„å¤æ‚æ€§å’Œæ•°æ®ä¸€è‡´æ€§çš„é£é™©ã€‚</p><p>åœ¨ç†æƒ³çš„èŒƒå¼è®¾è®¡ä¸­ï¼Œä¸ºäº†å‡å°‘æ•°æ®å†—ä½™å’Œé¿å…æ•°æ®å¼‚å¸¸ï¼ˆå¦‚æ’å…¥å¼‚å¸¸ã€æ›´æ–°å¼‚å¸¸å’Œåˆ é™¤å¼‚å¸¸ï¼‰ï¼Œä¸€èˆ¬ä¼šå°†æ•°æ®åˆ†è§£åˆ°å¤šä¸ªç›¸å…³çš„è¡¨ä¸­ã€‚ç„¶è€Œï¼Œè¿™ç§è®¾è®¡å¯èƒ½ä¼šå¯¼è‡´æŸ¥è¯¢æ€§èƒ½é™ä½ï¼Œå› ä¸ºéœ€è¦æ‰§è¡Œå¤šè¡¨è¿æ¥æ“ä½œä»¥è·å–æ‰€éœ€çš„æ•°æ®ã€‚</p><p>åèŒƒå¼è®¾è®¡é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼˜åŒ–è¯»å–æ€§èƒ½ï¼š</p><ol><li><strong>æ•°æ®å†—ä½™</strong>ï¼šåœ¨å¤šä¸ªè¡¨ä¸­å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œä»¥å‡å°‘å¤šè¡¨è¿æ¥æ“ä½œã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ•°æ®æ›´æ–°æ›´å¤æ‚ï¼Œå› ä¸ºéœ€è¦åœ¨å¤šä¸ªä½ç½®æ›´æ–°ç›¸åŒçš„æ•°æ®ã€‚</li><li><strong>æ•°æ®é¢„è®¡ç®—</strong>ï¼šå°†ç»å¸¸éœ€è¦è®¡ç®—çš„æ•°æ®é¢„å…ˆè®¡ç®—å¹¶å­˜å‚¨èµ·æ¥ï¼Œå¦‚æ€»æ•°ã€å¹³å‡æ•°ç­‰ã€‚</li><li><strong>è¡¨åˆå¹¶</strong>ï¼šå°†å¤šä¸ªè¡¨åˆå¹¶ä¸ºä¸€ä¸ªè¡¨ï¼Œä»¥å‡å°‘å¤šè¡¨è¿æ¥æ“ä½œã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ•°æ®å†—ä½™ï¼Œä½†å¯ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</li></ol><p>è™½ç„¶åèŒƒå¼è®¾è®¡å¯ä»¥ä¼˜åŒ–è¯»å–æ€§èƒ½ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥æ•°æ®ç®¡ç†çš„å¤æ‚æ€§å’Œæ•°æ®ä¸€è‡´æ€§çš„é£é™©ã€‚å› æ­¤ï¼Œæ˜¯å¦ä½¿ç”¨åèŒƒå¼è®¾è®¡éœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œæ€§èƒ½éœ€æ±‚è¿›è¡Œæƒè¡¡ã€‚</p></blockquote><h3 id="mysqlä¸­-ä»€ä¹ˆæ ·çš„æ•°æ®ä¸æ¨èåŠ ç´¢å¼•-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#mysqlä¸­-ä»€ä¹ˆæ ·çš„æ•°æ®ä¸æ¨èåŠ ç´¢å¼•-2023-å½±çŸ³360" aria-hidden="true">#</a> MySQLä¸­ï¼Œä»€ä¹ˆæ ·çš„æ•°æ®ä¸æ¨èåŠ ç´¢å¼•ï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><ol><li><strong>ä½åŸºæ•°åˆ—</strong>ï¼šå¦‚æœåˆ—çš„å€¼å¤§å¤šæ•°éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¾‹å¦‚æ€§åˆ«åˆ—ï¼ˆåªæœ‰ç”·ã€å¥³ä¸¤ç§å€¼ï¼‰ï¼Œé‚£ä¹ˆå¯¹è¿™ç§åˆ—æ·»åŠ ç´¢å¼•å¯èƒ½å¹¶ä¸é«˜æ•ˆã€‚</li><li><strong>é¢‘ç¹å˜åŒ–çš„åˆ—</strong>ï¼šå¦‚æœæŸä¸ªåˆ—çš„æ•°æ®é¢‘ç¹å˜åŠ¨ï¼Œé‚£ä¹ˆæ¯æ¬¡æ•°æ®å˜åŠ¨æ—¶ç´¢å¼•éƒ½éœ€è¦é‡å»ºï¼Œè¿™ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li><li><strong>å¤§æ–‡æœ¬åˆ—</strong>ï¼šå¯¹äºéå¸¸é•¿çš„æ–‡æœ¬ï¼Œå»ºç«‹ç´¢å¼•å¯èƒ½ä¼šéå¸¸è€—è´¹èµ„æºã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å…¨æ–‡ç´¢å¼•æˆ–è€…å…¶ä»–æœç´¢å¼•æ“è§£å†³æ–¹æ¡ˆã€‚</li><li><strong>å†—ä½™ç´¢å¼•</strong>ï¼šå¦‚æœå·²ç»æœ‰äº†ä¸€ä¸ªå¤šåˆ—ç´¢å¼•ï¼Œä¾‹å¦‚ <code>(A, B, C)</code>ï¼Œé‚£ä¹ˆå¯¹äº <code>A</code> åˆ—çš„å•ç‹¬ç´¢å¼•å¯èƒ½å°±æ˜¯å†—ä½™çš„ï¼Œå› ä¸º <code>(A, B, C)</code> å·²ç»åŒ…å«äº† <code>A</code> çš„ç´¢å¼•ã€‚</li><li><strong>å­˜å‚¨å¼€é”€</strong>ï¼šæ¯ä¸ªç´¢å¼•éƒ½éœ€è¦å ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ã€‚å¦‚æœæœ‰å¤ªå¤šçš„ç´¢å¼•ï¼Œä¸ä»…ä¼šæµªè´¹å­˜å‚¨ç©ºé—´ï¼Œè¿˜å¯èƒ½å¯¼è‡´é¢å¤–çš„I/Oå¼€é”€ã€‚</li><li><strong>æ’å…¥ã€åˆ é™¤ã€æ›´æ–°æ“ä½œ</strong>ï¼šç´¢å¼•è™½ç„¶å¯ä»¥åŠ é€ŸæŸ¥è¯¢ï¼Œä½†ä¹Ÿä¼šå‡æ…¢æ’å…¥ã€åˆ é™¤å’Œæ›´æ–°æ“ä½œçš„é€Ÿåº¦ï¼Œå› ä¸ºæ¯æ¬¡è¿™äº›æ“ä½œå‘ç”Ÿæ—¶ï¼Œç´¢å¼•ä¹Ÿéœ€è¦æ›´æ–°ã€‚</li></ol><p>å½“ç„¶ï¼Œæ˜¯å¦ä¸ºæŸåˆ—æ·»åŠ ç´¢å¼•è¿˜éœ€è¦æ ¹æ®å®é™…çš„æŸ¥è¯¢éœ€æ±‚ã€æ•°æ®åˆ†å¸ƒå’Œä¸šåŠ¡åœºæ™¯æ¥å†³å®šã€‚åœ¨å†³å®šåŠ ç´¢å¼•ä¹‹å‰ï¼Œæœ€å¥½è¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œåˆ†æï¼Œç¡®ä¿ç´¢å¼•èƒ½å¸¦æ¥é¢„æœŸçš„æ•ˆæœã€‚</p><h3 id="æ•°æ®åº“è‡ªå¢id-å½“idå€¼å¤§äºmaxintæ—¶-æ•°æ®åº“å¦‚ä½•åš-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“è‡ªå¢id-å½“idå€¼å¤§äºmaxintæ—¶-æ•°æ®åº“å¦‚ä½•åš-2023-å¿«æ‰‹" aria-hidden="true">#</a> æ•°æ®åº“è‡ªå¢idï¼Œå½“idå€¼å¤§äºMAXINTæ—¶ï¼Œæ•°æ®åº“å¦‚ä½•åš ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><ul><li>åšåˆ†åº“åˆ†è¡¨ä¹‹ç±»çš„ä¼˜åŒ–äº†</li><li>è°ƒæ•´æ•°æ®ç±»å‹ï¼Œä¿®æ”¹ä¸ºBIGINTæ•°æ®ç±»å‹ï¼Œä½†æ˜¯è¦æ³¨æ„æ•°æ®å¤ªå¤šï¼ŒDDLæ‰§è¡Œæ—¶é•¿é—®é¢˜</li></ul><h3 id="äº†è§£è¿‡å‰ç¼€ç´¢å¼•å—-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#äº†è§£è¿‡å‰ç¼€ç´¢å¼•å—-2023-å¿«æ‰‹" aria-hidden="true">#</a> äº†è§£è¿‡å‰ç¼€ç´¢å¼•å—ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>ä½¿ç”¨å‰ç¼€ç´¢å¼•æ˜¯ä¸ºäº†å‡å°ç´¢å¼•å­—æ®µå¤§å°ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªç´¢å¼•é¡µä¸­å­˜å‚¨çš„ç´¢å¼•å€¼ï¼Œæœ‰æ•ˆæé«˜ç´¢å¼•çš„æŸ¥è¯¢é€Ÿåº¦ã€‚åœ¨ä¸€äº›å¤§å­—ç¬¦ä¸²çš„å­—æ®µä½œä¸ºç´¢å¼•æ—¶ï¼Œä½¿ç”¨å‰ç¼€ç´¢å¼•å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡å°ç´¢å¼•é¡¹çš„å¤§å°ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªåŒ…å«ç”¨æˆ·åçš„MySQLè¡¨<code>users</code>ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> users <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹<code>username</code>å­—æ®µåˆ›å»ºå®Œæ•´ç´¢å¼•å¯èƒ½ä¼šå ç”¨è¾ƒå¤šç©ºé—´ã€‚å¦‚æœçŸ¥é“å¤§å¤šæ•°æŸ¥è¯¢åªä¼šä½¿ç”¨ç”¨æˆ·åçš„å‰å‡ ä¸ªå­—ç¬¦ï¼Œå¯ä»¥åˆ›å»ºå‰ç¼€ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œä¸º<code>username</code>å­—æ®µçš„å‰4ä¸ªå­—ç¬¦åˆ›å»ºç´¢å¼•ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> users <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> idx_username_prefix<span class="token punctuation">(</span>username<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¹‹åï¼Œä»¥ä¸‹æŸ¥è¯¢å°†ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œä»è€Œæ›´å¿«åœ°è¿”å›ç»“æœï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> username <span class="token operator">LIKE</span> <span class="token string">&#39;John%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½†æ˜¯ï¼Œåƒè¿™æ ·çš„æŸ¥è¯¢å°†æ— æ³•ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> username <span class="token operator">LIKE</span> <span class="token string">&#39;%John&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‰ç¼€ç´¢å¼•å‡å°‘äº†ç´¢å¼•çš„å¤§å°ï¼Œä½†ä¹Ÿæœ‰å±€é™æ€§ï¼š</p><ul><li>order by å°±æ— æ³•ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼›</li><li>æ— æ³•æŠŠå‰ç¼€ç´¢å¼•ç”¨ä½œè¦†ç›–ç´¢å¼•ï¼›</li></ul><h3 id="ä»‹ç»ä¸€ä¸‹è”åˆç´¢å¼•-æœ€å·¦åŒ¹é…åŸåˆ™æ˜¯ä»€ä¹ˆ-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»ä¸€ä¸‹è”åˆç´¢å¼•-æœ€å·¦åŒ¹é…åŸåˆ™æ˜¯ä»€ä¹ˆ-2023-å¿«æ‰‹" aria-hidden="true">#</a> ä»‹ç»ä¸€ä¸‹è”åˆç´¢å¼•ï¼Ÿæœ€å·¦åŒ¹é…åŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>é€šè¿‡å°†å¤šä¸ªå­—æ®µç»„åˆæˆä¸€ä¸ªç´¢å¼•ï¼Œè¯¥ç´¢å¼•å°±è¢«ç§°ä¸ºè”åˆç´¢å¼•ã€‚</p><p>æ¯”å¦‚ï¼Œå°†å•†å“è¡¨ä¸­çš„ product_no å’Œ name å­—æ®µç»„åˆæˆè”åˆç´¢å¼•<code>(product_no, name)</code>ï¼Œåˆ›å»ºè”åˆç´¢å¼•çš„æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_product_no_name <span class="token keyword">ON</span> product<span class="token punctuation">(</span>product_no<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è”åˆç´¢å¼•<code>(product_no, name)</code> çš„ B+Tree ç¤ºæ„å›¾å¦‚ä¸‹ï¼ˆå›¾ä¸­å¶å­èŠ‚ç‚¹ä¹‹é—´æˆ‘ç”»äº†å•å‘é“¾è¡¨ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯åŒå‘é“¾è¡¨ï¼ŒåŸå›¾æˆ‘æ‰¾ä¸åˆ°äº†ï¼Œä¿®æ”¹ä¸äº†ï¼Œå·ä¸ªæ‡’æˆ‘ä¸é‡ç”»äº†ï¼Œå¤§å®¶è„‘è¡¥æˆåŒå‘é“¾è¡¨å°±è¡Œï¼‰ã€‚</p><figure><img src="`+S+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè”åˆç´¢å¼•çš„éå¶å­èŠ‚ç‚¹ç”¨ä¸¤ä¸ªå­—æ®µçš„å€¼ä½œä¸º B+Tree çš„ key å€¼ã€‚å½“åœ¨è”åˆç´¢å¼•æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå…ˆæŒ‰ product_no å­—æ®µæ¯”è¾ƒï¼Œåœ¨ product_no ç›¸åŒçš„æƒ…å†µä¸‹å†æŒ‰ name å­—æ®µæ¯”è¾ƒã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè”åˆç´¢å¼•æŸ¥è¯¢çš„ B+Tree æ˜¯å…ˆæŒ‰ product_no è¿›è¡Œæ’åºï¼Œç„¶åå† product_no ç›¸åŒçš„æƒ…å†µå†æŒ‰ name å­—æ®µæ’åºã€‚</p><p>å› æ­¤ï¼Œä½¿ç”¨è”åˆç´¢å¼•æ—¶ï¼Œå­˜åœ¨<strong>æœ€å·¦åŒ¹é…åŸåˆ™</strong>ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§æœ€å·¦ä¼˜å…ˆçš„æ–¹å¼è¿›è¡Œç´¢å¼•çš„åŒ¹é…ã€‚åœ¨ä½¿ç”¨è”åˆç´¢å¼•è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œå¦‚æœä¸éµå¾ªã€Œæœ€å·¦åŒ¹é…åŸåˆ™ã€ï¼Œè”åˆç´¢å¼•ä¼šå¤±æ•ˆï¼Œè¿™æ ·å°±æ— æ³•åˆ©ç”¨åˆ°ç´¢å¼•å¿«é€ŸæŸ¥è¯¢çš„ç‰¹æ€§äº†ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœåˆ›å»ºäº†ä¸€ä¸ª <code>(a, b, c)</code> è”åˆç´¢å¼•ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶æ˜¯ä»¥ä¸‹è¿™å‡ ç§ï¼Œå°±å¯ä»¥åŒ¹é…ä¸Šè”åˆç´¢å¼•ï¼š</p><ul><li>where a=1ï¼›</li><li>where a=1 and b=2 and c=3ï¼›</li><li>where a=1 and b=2ï¼›</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºæœ‰æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼Œæ‰€ä»¥ a å­—æ®µåœ¨ where å­å¥çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶æ˜¯ä»¥ä¸‹è¿™å‡ ç§ï¼Œå› ä¸ºä¸ç¬¦åˆæœ€å·¦åŒ¹é…åŸåˆ™ï¼Œæ‰€ä»¥å°±æ— æ³•åŒ¹é…ä¸Šè”åˆç´¢å¼•ï¼Œè”åˆç´¢å¼•å°±ä¼šå¤±æ•ˆ:</p><ul><li>where b=2ï¼›</li><li>where c=3ï¼›</li><li>where b=2 and c=3ï¼›</li></ul><p>ä¸Šé¢è¿™äº›æŸ¥è¯¢æ¡ä»¶ä¹‹æ‰€ä»¥ä¼šå¤±æ•ˆï¼Œæ˜¯å› ä¸º<code>(a, b, c)</code> è”åˆç´¢å¼•ï¼Œæ˜¯å…ˆæŒ‰ a æ’åºï¼Œåœ¨ a ç›¸åŒçš„æƒ…å†µå†æŒ‰ b æ’åºï¼Œåœ¨ b ç›¸åŒçš„æƒ…å†µå†æŒ‰ c æ’åºã€‚æ‰€ä»¥ï¼Œ<strong>b å’Œ c æ˜¯å…¨å±€æ— åºï¼Œå±€éƒ¨ç›¸å¯¹æœ‰åºçš„</strong>ï¼Œè¿™æ ·åœ¨æ²¡æœ‰éµå¾ªæœ€å·¦åŒ¹é…åŸåˆ™çš„æƒ…å†µä¸‹ï¼Œæ˜¯æ— æ³•åˆ©ç”¨åˆ°ç´¢å¼•çš„ã€‚</p><p>æˆ‘è¿™é‡Œä¸¾è”åˆç´¢å¼•ï¼ˆaï¼Œbï¼‰çš„ä¾‹å­ï¼Œè¯¥è”åˆç´¢å¼•çš„ B+ Tree å¦‚ä¸‹ï¼ˆå›¾ä¸­å¶å­èŠ‚ç‚¹ä¹‹é—´æˆ‘ç”»äº†å•å‘é“¾è¡¨ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯åŒå‘é“¾è¡¨ï¼ŒåŸå›¾æˆ‘æ‰¾ä¸åˆ°äº†ï¼Œä¿®æ”¹ä¸äº†ï¼Œå·ä¸ªæ‡’æˆ‘ä¸é‡ç”»äº†ï¼Œå¤§å®¶è„‘è¡¥æˆåŒå‘é“¾è¡¨å°±è¡Œï¼‰ã€‚</p><figure><img src="'+_+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œa æ˜¯å…¨å±€æœ‰åºçš„ï¼ˆ1, 2, 2, 3, 4, 5, 6, 7 ,8ï¼‰ï¼Œè€Œ b æ˜¯å…¨å±€æ˜¯æ— åºçš„ï¼ˆ12ï¼Œ7ï¼Œ8ï¼Œ2ï¼Œ3ï¼Œ8ï¼Œ10ï¼Œ5ï¼Œ2ï¼‰ã€‚å› æ­¤ï¼Œç›´æ¥æ‰§è¡Œ<code>where b = 2</code>è¿™ç§æŸ¥è¯¢æ¡ä»¶æ²¡æœ‰åŠæ³•åˆ©ç”¨è”åˆç´¢å¼•çš„ï¼Œ<strong>åˆ©ç”¨ç´¢å¼•çš„å‰ææ˜¯ç´¢å¼•é‡Œçš„ key æ˜¯æœ‰åºçš„</strong>ã€‚</p><p>åªæœ‰åœ¨ a ç›¸åŒçš„æƒ…å†µæ‰ï¼Œb æ‰æ˜¯æœ‰åºçš„ï¼Œæ¯”å¦‚ a ç­‰äº 2 çš„æ—¶å€™ï¼Œb çš„å€¼ä¸ºï¼ˆ7ï¼Œ8ï¼‰ï¼Œè¿™æ—¶å°±æ˜¯æœ‰åºçš„ï¼Œè¿™ä¸ªæœ‰åºçŠ¶æ€æ˜¯å±€éƒ¨çš„ï¼Œå› æ­¤ï¼Œæ‰§è¡Œ<code>where a = 2 and b = 7</code>æ˜¯ a å’Œ b å­—æ®µèƒ½ç”¨åˆ°è”åˆç´¢å¼•çš„ï¼Œä¹Ÿå°±æ˜¯è”åˆç´¢å¼•ç”Ÿæ•ˆäº†ã€‚</p><p>è”åˆç´¢å¼•æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œ<strong>å¹¶ä¸æ˜¯æŸ¥è¯¢è¿‡ç¨‹ä½¿ç”¨äº†è”åˆç´¢å¼•æŸ¥è¯¢ï¼Œå°±ä»£è¡¨è”åˆç´¢å¼•ä¸­çš„æ‰€æœ‰å­—æ®µéƒ½ç”¨åˆ°äº†è”åˆç´¢å¼•è¿›è¡Œç´¢å¼•æŸ¥è¯¢</strong>ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½å­˜åœ¨éƒ¨åˆ†å­—æ®µç”¨åˆ°è”åˆç´¢å¼•çš„ B+Treeï¼Œéƒ¨åˆ†å­—æ®µæ²¡æœ‰ç”¨åˆ°è”åˆç´¢å¼•çš„ B+Tree çš„æƒ…å†µã€‚</p><p>è¿™ç§ç‰¹æ®Šæƒ…å†µå°±å‘ç”Ÿåœ¨èŒƒå›´æŸ¥è¯¢ã€‚è”åˆç´¢å¼•çš„æœ€å·¦åŒ¹é…åŸåˆ™ä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°ã€ŒèŒƒå›´æŸ¥è¯¢ã€å°±ä¼šåœæ­¢åŒ¹é…ã€‚<strong>ä¹Ÿå°±æ˜¯èŒƒå›´æŸ¥è¯¢çš„å­—æ®µå¯ä»¥ç”¨åˆ°è”åˆç´¢å¼•ï¼Œä½†æ˜¯åœ¨èŒƒå›´æŸ¥è¯¢å­—æ®µçš„åé¢çš„å­—æ®µæ— æ³•ç”¨åˆ°è”åˆç´¢å¼•</strong>ã€‚</p><h3 id="mysqlçš„ç´¢å¼•ä¸ºä»€ä¹ˆæ˜¯b-æ ‘-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#mysqlçš„ç´¢å¼•ä¸ºä»€ä¹ˆæ˜¯b-æ ‘-2023-å¾—ç‰©" aria-hidden="true">#</a> MySQLçš„ç´¢å¼•ä¸ºä»€ä¹ˆæ˜¯b+æ ‘ï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>å› ä¸º B+ æ ‘å…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š</p><ol><li><strong>æŸ¥è¯¢æ•ˆç‡ç¨³å®š</strong>: B+ æ ‘çš„é«˜åº¦è¾ƒçŸ®ï¼Œå› æ­¤æŸ¥è¯¢æ—¶éœ€è¦çš„ç£ç›˜ I/O æ“ä½œæ¬¡æ•°è¾ƒå°‘ã€‚è¿™æœ‰åŠ©äºå®ç°æ›´é«˜çš„æŸ¥è¯¢é€Ÿåº¦å’Œæ›´ç¨³å®šçš„æ€§èƒ½ã€‚</li><li><strong>èŒƒå›´æŸ¥è¯¢æ–¹ä¾¿</strong>: B+ æ ‘çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½ä½äºåŒä¸€å±‚ï¼Œå¹¶ä¸”é€šè¿‡æŒ‡é’ˆè¿æ¥ï¼Œè¿™ä½¿å¾—èŒƒå›´æŸ¥è¯¢æ›´åŠ é«˜æ•ˆã€‚</li><li><strong>æ›´é€‚åˆç£ç›˜</strong>: æ•°æ®åº“å­˜å‚¨é€šå¸¸ä¾èµ–äºç£ç›˜ï¼Œè€Œç£ç›˜çš„ I/O æ“ä½œé€šå¸¸å…·æœ‰é«˜æˆæœ¬ã€‚B+ æ ‘å…è®¸æ›´æœ‰æ•ˆåœ°è¯»å–æ•°æ®å—ï¼Œå‡å°‘äº† I/O æ“ä½œã€‚</li><li><strong>é«˜æ‰‡å‡ºç‡</strong>: ç”±äº B+ æ ‘èŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤§é‡å­èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œæ ‘çš„é«˜åº¦ç›¸å¯¹è¾ƒä½ï¼Œè¿™è¿›ä¸€æ­¥å‡å°‘äº†æŸ¥è¯¢éœ€è¦çš„ç£ç›˜ I/O æ“ä½œæ¬¡æ•°ã€‚</li><li><strong>é€‚åº”æ€§å¼º</strong>: B+ æ ‘å¯ä»¥å®¹æ˜“åœ°æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œï¼Œè€Œä¸”èƒ½è‡ªåŠ¨å¹³è¡¡ï¼Œè¿™æ˜¯æ•°æ®åº“ç³»ç»Ÿä¸­éå¸¸éœ€è¦çš„ç‰¹æ€§ã€‚</li><li><strong>æ•°æ®å±€éƒ¨æ€§</strong>: B+ æ ‘æœ‰åŠ©äºå®ç°æ•°æ®çš„å±€éƒ¨æ€§åŸç†ï¼Œå³ç»å¸¸ä¸€èµ·ä½¿ç”¨çš„æ•°æ®ä¹Ÿåº”è¯¥ä¸€èµ·å­˜å‚¨ã€‚è¿™æœ‰åŠ©äºæé«˜ç¼“å­˜å’Œç£ç›˜ I/O æ•ˆç‡ã€‚</li><li><strong>æ˜“äºç»´æŠ¤</strong>: B+ æ ‘æ˜“äºåˆ†è£‚å’Œåˆå¹¶ï¼Œè¿™æ ·åœ¨æ•°æ®æ’å…¥å’Œåˆ é™¤æ—¶èƒ½ä¿æŒè‰¯å¥½çš„å¹³è¡¡æ€§ã€‚</li><li><strong>å¤šè·¯å¤ç”¨</strong>: åœ¨å¤šç”¨æˆ·æˆ–å¹¶å‘ç¯å¢ƒä¸‹ï¼ŒB+ æ ‘èƒ½æ›´å¥½åœ°æ”¯æŒå¤šè·¯å¤ç”¨ã€‚</li></ol><h3 id="ä¸€ä¸ªsqlè¯­å¥-åˆ¤æ–­æ˜¯å¦ç”¨äº†ç´¢å¼•-æ˜¯å¦å›è¡¨-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªsqlè¯­å¥-åˆ¤æ–­æ˜¯å¦ç”¨äº†ç´¢å¼•-æ˜¯å¦å›è¡¨-2023-å¾—ç‰©" aria-hidden="true">#</a> ä¸€ä¸ªsqlè¯­å¥ï¼Œåˆ¤æ–­æ˜¯å¦ç”¨äº†ç´¢å¼•ï¼Œæ˜¯å¦å›è¡¨ï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p><code>EXPLAIN</code></p><h3 id="mysqlçš„æ­»é”é—®é¢˜-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#mysqlçš„æ­»é”é—®é¢˜-2023-å¾—ç‰©" aria-hidden="true">#</a> mysqlçš„æ­»é”é—®é¢˜ï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>MySQLåœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯èƒ½ä¼šå‡ºç°æ­»é”é—®é¢˜ï¼š</p><ol><li>å¹¶å‘è¯»å†™å†²çªï¼šå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶è¯»å–å’Œå†™å…¥åŒä¸€è¡Œæ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ­»é”é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡Aå…ˆè·å–äº†é”å¹¶è¯»å–äº†æŸä¸€è¡Œæ•°æ®ï¼ŒåŒæ—¶äº‹åŠ¡Bä¹Ÿéœ€è¦è¯»å–è¯¥è¡Œæ•°æ®ï¼Œä½†äº‹åŠ¡Aè¿˜æœªé‡Šæ”¾é”ï¼Œå¯¼è‡´äº‹åŠ¡Bæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œä»è€Œå¯èƒ½å¯¼è‡´æ­»é”ã€‚</li><li>åŠ é”é¡ºåºä¸ä¸€è‡´ï¼šå½“äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è·å–é”çš„é¡ºåºä¸ä¸€è‡´æ—¶ï¼Œä¹Ÿå¯èƒ½ä¼šå¯¼è‡´æ­»é”ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡Aå…ˆé”ä½äº†è¡¨Açš„æŸä¸€è¡Œï¼Œç„¶åæƒ³è¦é”ä½è¡¨Bçš„æŸä¸€è¡Œï¼›è€Œäº‹åŠ¡Bå…ˆé”ä½äº†è¡¨Bçš„æŸä¸€è¡Œï¼Œç„¶åæƒ³è¦é”ä½è¡¨Açš„æŸä¸€è¡Œã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªäº‹åŠ¡å¯èƒ½ä¼šå› ä¸ºäº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”è€Œå‘ç”Ÿæ­»é”ã€‚</li><li>é«˜å¹¶å‘åœºæ™¯ï¼šå½“æœ‰å¤§é‡å¹¶å‘çš„äº‹åŠ¡åŒæ—¶è¯·æ±‚é”èµ„æºæ—¶ï¼Œå¯èƒ½å¢åŠ äº†å‘ç”Ÿæ­»é”çš„æ¦‚ç‡ã€‚ç‰¹åˆ«æ˜¯åœ¨æ•°æ®åº“è®¾è®¡ä¸åˆç†æˆ–åº”ç”¨ç¨‹åºå¹¶å‘æ§åˆ¶ä¸å½“çš„æƒ…å†µä¸‹ï¼Œæ­»é”çš„å‘ç”Ÿå¯èƒ½æ›´ä¸ºé¢‘ç¹ã€‚</li><li>é”è¶…æ—¶è®¾ç½®ä¸åˆç†ï¼šå¦‚æœåœ¨äº‹åŠ¡ä¸­è®¾ç½®äº†è¿‡é•¿çš„é”è¶…æ—¶æ—¶é—´ï¼Œé‚£ä¹ˆåœ¨å¹¶å‘é‡è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´äº‹åŠ¡æŒæœ‰é”çš„æ—¶é—´è¿‡é•¿ï¼Œä»è€Œå¢åŠ äº†æ­»é”å‘ç”Ÿçš„å¯èƒ½æ€§ã€‚</li></ol><p>è§£å†³MySQLæ­»é”é—®é¢˜çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ–¹æ³•ï¼š</p><ol><li>æ­»é”æ£€æµ‹å’Œå¤„ç†: MySQLçš„InnoDBå­˜å‚¨å¼•æ“å¯ä»¥è‡ªåŠ¨æ£€æµ‹æ­»é”ï¼Œå¹¶å›æ»šå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡ï¼Œé‡Šæ”¾èµ„æºï¼Œä½¿å…¶ä»–äº‹åŠ¡èƒ½å¤Ÿç»§ç»­æ‰§è¡Œã€‚åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ç›‘æ§é”™è¯¯æ—¥å¿—æ¥è·å–æœ‰å…³æ­»é”çš„ä¿¡æ¯ï¼Œå¹¶é‡‡å–é€‚å½“çš„æªæ–½æ¥å¤„ç†ã€‚</li><li>ä¼˜åŒ–äº‹åŠ¡å’Œé”ç­–ç•¥: åœ¨è®¾è®¡æ•°æ®åº“æ¶æ„æ—¶ï¼Œåº”è¯¥åˆç†è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€é”çš„ç²’åº¦å’ŒåŠ é”é¡ºåºã€‚ä¾‹å¦‚ï¼Œå°½é‡ä½¿ç”¨è¾ƒä½çš„éš”ç¦»çº§åˆ«ï¼Œå‡å°‘é”çš„æŒæœ‰æ—¶é—´ï¼Œä»¥åŠç¡®ä¿æ‰€æœ‰äº‹åŠ¡åŠ é”çš„é¡ºåºä¸€è‡´ã€‚</li><li>æé«˜å¹¶å‘èƒ½åŠ›: é€šè¿‡å¢åŠ ç¡¬ä»¶èµ„æºï¼ˆä¾‹å¦‚å†…å­˜ã€ç£ç›˜ï¼‰æˆ–è€…ä¼˜åŒ–æŸ¥è¯¢è¯­å¥çš„æ€§èƒ½ï¼Œå¯ä»¥æé«˜æ•°æ®åº“çš„å¹¶å‘èƒ½åŠ›ï¼Œä»è€Œå‡å°‘å‘ç”Ÿæ­»é”çš„å¯èƒ½æ€§ã€‚</li><li>å‡å°‘äº‹åŠ¡æ—¶é—´: å°½é‡åœ¨äº‹åŠ¡å†…å®Œæˆå°½å¯èƒ½å°‘çš„å·¥ä½œï¼Œå‡å°‘äº‹åŠ¡çš„æŒæœ‰æ—¶é—´ï¼Œä»¥ä¾¿å…¶ä»–äº‹åŠ¡èƒ½å¤Ÿæ›´å¿«åœ°è·å¾—æ‰€éœ€çš„é”èµ„æºã€‚</li><li>è®¾ç½®è¶…æ—¶æ—¶é—´ï¼šMySQLçš„InnoDBå­˜å‚¨å¼•æ“é€šè¿‡å‚æ•°innodb_lock_wait_timeoutæ¥è®¾ç½®é”ç­‰å¾…çš„æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´åä¼šæŠ¥é”™å¹¶é‡Šæ”¾é”èµ„æºã€‚é»˜è®¤çš„è¶…æ—¶æ—¶é—´æ˜¯50ç§’ã€‚é€šè¿‡é€‚å½“è°ƒæ•´è¿™ä¸ªè¶…æ—¶æ—¶é—´ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘æ­»é”å‘ç”Ÿçš„å¯èƒ½æ€§ã€‚</li></ol><h3 id="æ‰‹å†™ä¸ªsqlæ­»é”-å¦‚æœå­—æ®µéç´¢å¼•ä¼šå‘ç”Ÿæ­»é”å—-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™ä¸ªsqlæ­»é”-å¦‚æœå­—æ®µéç´¢å¼•ä¼šå‘ç”Ÿæ­»é”å—-2023-å¿«æ‰‹" aria-hidden="true">#</a> æ‰‹å†™ä¸ªsqlæ­»é”ï¼Œå¦‚æœå­—æ®µéç´¢å¼•ä¼šå‘ç”Ÿæ­»é”å—ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>SQLæ­»é”é€šå¸¸å‘ç”Ÿåœ¨ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªäº‹åŠ¡ç›¸äº’ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”æ—¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„MySQLç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•äº§ç”Ÿä¸€ä¸ªæ­»é”ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º<code>students</code>çš„è¡¨ï¼Œè¯¥è¡¨æœ‰<code>id</code>å’Œ<code>name</code>ä¸¤ä¸ªå­—æ®µã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> students <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;Alice&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;Bob&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªå¹¶å‘çš„äº‹åŠ¡ï¼š</p><p>äº‹åŠ¡1ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> students <span class="token keyword">SET</span> name<span class="token operator">=</span><span class="token string">&#39;Charlie&#39;</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">-- äº‹åŠ¡1åœ¨è¿™é‡Œæš‚åœï¼Œç­‰å¾…äº‹åŠ¡2</span>
<span class="token keyword">UPDATE</span> students <span class="token keyword">SET</span> name<span class="token operator">=</span><span class="token string">&#39;David&#39;</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>äº‹åŠ¡2ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> students <span class="token keyword">SET</span> name<span class="token operator">=</span><span class="token string">&#39;Emily&#39;</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">-- äº‹åŠ¡2åœ¨è¿™é‡Œæš‚åœï¼Œç­‰å¾…äº‹åŠ¡1</span>
<span class="token keyword">UPDATE</span> students <span class="token keyword">SET</span> name<span class="token operator">=</span><span class="token string">&#39;Frank&#39;</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸¤ä¸ªäº‹åŠ¡ä¼šé€ æˆæ­»é”ï¼Œå› ä¸ºäº‹åŠ¡1é”å®šäº†<code>id=1</code>çš„è®°å½•ï¼Œè€Œäº‹åŠ¡2é”å®šäº†<code>id=2</code>çš„è®°å½•ã€‚ç„¶åï¼Œå®ƒä»¬éƒ½ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”ã€‚</p><p>å¦‚æœå­—æ®µéç´¢å¼•ä¼šå‘ç”Ÿæ­»é”å—ï¼Ÿ</p><p>å®é™…ä¸Šéç´¢å¼•å­—æ®µå¯èƒ½ä¼šå¢åŠ å‘ç”Ÿæ­»é”çš„æœºä¼šã€‚è¿™æ˜¯å› ä¸ºåœ¨éç´¢å¼•å­—æ®µä¸Šæ‰§è¡Œæ›´æ–°æˆ–è€…é”å®šæ“ä½œé€šå¸¸éœ€è¦å…¨è¡¨æ‰«æï¼Œè¿™å°†é”å®šæ›´å¤šçš„è¡Œã€‚è¿™æ ·ï¼Œä¸å…¶ä»–äº‹åŠ¡çš„é”ç«äº‰å¯èƒ½æ€§å°±æ›´é«˜äº†ï¼Œä»è€Œæ›´å®¹æ˜“å¯¼è‡´æ­»é”ã€‚</p><p>ç„¶è€Œï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œæ˜¯å¦ä¼šå‘ç”Ÿæ­»é”è¿˜å–å†³äºå¾ˆå¤šå…¶ä»–å› ç´ ï¼ŒåŒ…æ‹¬æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„å†…éƒ¨æœºåˆ¶ã€äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œå³ä½¿æ˜¯éç´¢å¼•å­—æ®µä¹Ÿä¸ä¸€å®šæ€»æ˜¯ä¼šå¯¼è‡´æ­»é”ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ç´¢å¼•é€šå¸¸å¯ä»¥å‡å°‘å…¨è¡¨æ‰«æå’Œé”ç«äº‰ï¼Œä»è€Œé™ä½æ­»é”çš„é£é™©ã€‚</p><h2 id="â™¨ï¸-redis" tabindex="-1"><a class="header-anchor" href="#â™¨ï¸-redis" aria-hidden="true">#</a> â™¨ï¸ Redis</h2><h3 id="redis-stringåº•å±‚çš„ç»“æ„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#redis-stringåº•å±‚çš„ç»“æ„-2023-ç¾å›¢" aria-hidden="true">#</a> Redis stringåº•å±‚çš„ç»“æ„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>Redis çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªåŠ¨æ€å­—ç¬¦ä¸²å®ç°ï¼Œå®ƒèƒ½å¤Ÿå®¹çº³ä»»æ„é•¿åº¦çš„äºŒè¿›åˆ¶å®‰å…¨çš„å­—ç¬¦ä¸²ã€‚è¿™æ„å‘³ç€åœ¨ Redis ä¸­ï¼Œä½ ä¸ä»…å¯ä»¥ä¿å­˜ä¾‹å¦‚ &quot;Hello, World!&quot; è¿™æ ·çš„å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥ä¿å­˜ JPEG å›¾åƒæˆ–è€…ä»»ä½•å…¶ä»–äºŒè¿›åˆ¶æ•°æ®ã€‚</p><p>åœ¨åº•å±‚ï¼ŒRedis çš„å­—ç¬¦ä¸²æ˜¯ç”±ä»¥ä¸‹ç»“æ„è¡¨ç¤ºçš„ï¼š</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">sdshdr</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¿å­˜å­—ç¬¦ä¸²é•¿åº¦çš„å­—èŠ‚å¤§å°</span>
    <span class="token keyword">int</span> len<span class="token punctuation">;</span>
    
    <span class="token comment">// ä¿å­˜æœªä½¿ç”¨çš„å­—èŠ‚å¤§å°ï¼Œè¿™æ ·å½“å­—ç¬¦ä¸²éœ€è¦æ‰©å±•æ—¶å¯ä»¥é¿å…ä¸å¿…è¦çš„é‡æ–°åˆ†é…</span>
    <span class="token keyword">int</span> free<span class="token punctuation">;</span>
    
    <span class="token comment">// å®é™…çš„å­—ç¬¦ä¸²æ•°æ®ï¼Œè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„</span>
    <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„ <code>buf</code> å­—æ®µæ˜¯ä¸€ä¸ªæŸ”æ€§æ•°ç»„ï¼ˆflexible array memberï¼‰ã€‚å®é™…çš„æ•°æ®é•¿åº¦æ¯” <code>buf</code> çš„å¤§å°æ›´å¤§ï¼Œè¿™å–å†³äº <code>len</code> å­—æ®µçš„å€¼ã€‚<code>free</code> å­—æ®µè¡¨ç¤º <code>buf</code> åé¢æœ‰å¤šå°‘æœªä½¿ç”¨çš„å­—èŠ‚ï¼Œè¿™ä½¿å¾—å­—ç¬¦ä¸²è¿½åŠ å˜å¾—æ›´åŠ é«˜æ•ˆã€‚</p><p>è¿™ç§åŠ¨æ€å­—ç¬¦ä¸²ç»“æ„æ„å‘³ç€ï¼š</p><ol><li>å­—ç¬¦ä¸²å¯ä»¥åœ¨ä¸é‡æ–°åˆ†é…å†…å­˜çš„æƒ…å†µä¸‹å¢é•¿ï¼Œåªè¦ <code>free</code> å­—æ®µæ‰€ç¤ºçš„æœªä½¿ç”¨ç©ºé—´å…è®¸ã€‚</li><li>å­—ç¬¦ä¸²å¯ä»¥åŒ…å«äºŒè¿›åˆ¶æ•°æ®ï¼Œå› ä¸ºå®ƒä»¬æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ã€‚</li><li>å­—ç¬¦ä¸²å¯ä»¥çŸ¥é“å…¶é•¿åº¦ï¼Œå› ä¸º <code>len</code> å­—æ®µæä¾›äº†è¿™ä¸€ä¿¡æ¯ï¼Œè¿™æ„å‘³ç€å–é•¿åº¦æ˜¯ O(1) æ“ä½œã€‚</li></ol><p>æ³¨æ„ï¼šè¿™é‡Œç»™å‡ºçš„ <code>sdshdr</code> ç»“æ„æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ã€‚åœ¨ä¸åŒçš„ Redis ç‰ˆæœ¬ä¸­ï¼Œä¸ºäº†æ”¯æŒå¤§å­—ç¬¦ä¸²æˆ–ä¼˜åŒ–å­˜å‚¨ï¼Œå¯èƒ½ä¼šæœ‰ä¸åŒçš„å®ç°æˆ–ç»†å¾®çš„å·®åˆ«ã€‚</p><h3 id="redis-åˆ†å¸ƒå¼é”çš„å®ç°-è¿‡æœŸæ—¶é—´æ€æ ·è®¾ç½®çš„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#redis-åˆ†å¸ƒå¼é”çš„å®ç°-è¿‡æœŸæ—¶é—´æ€æ ·è®¾ç½®çš„-2023-ç¾å›¢" aria-hidden="true">#</a> Redis åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿè¿‡æœŸæ—¶é—´æ€æ ·è®¾ç½®çš„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>Redis åˆ†å¸ƒå¼é”é€šå¸¸ä½¿ç”¨ <code>SETNX</code>ï¼ˆSet if Not eXistsï¼‰æˆ–è€… <code>SET</code> å‘½ä»¤é…åˆæŸäº›å‚æ•°æ¥å®ç°ã€‚è¿™ç§é”å¯ä»¥ä¿è¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´çš„äº’æ–¥æ€§ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ Redis å®ç°åˆ†å¸ƒå¼é”çš„åŸºæœ¬æ­¥éª¤ï¼š</p><ol><li><strong>åŠ é”</strong>: <ul><li>ä½¿ç”¨ <code>SETNX lock:key value</code> å°è¯•è®¾ç½®ä¸€ä¸ªé”ã€‚å¦‚æœè¿”å› <code>1</code>ï¼Œè¡¨ç¤ºè·å–é”æˆåŠŸã€‚å¦‚æœè¿”å› <code>0</code>ï¼Œè¡¨ç¤ºå…¶ä»–å®¢æˆ·ç«¯å·²ç»æŒæœ‰è¿™ä¸ªé”ã€‚</li><li>ä¸ºäº†é¿å…æ­»é”ï¼ˆä¾‹å¦‚ï¼ŒæŒæœ‰é”çš„å®¢æˆ·ç«¯å´©æºƒå¯¼è‡´å…¶ä»–å®¢æˆ·ç«¯æ°¸è¿œæ— æ³•è·å–é”ï¼‰ï¼Œä½ éœ€è¦ç»™é”è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ã€‚è¿™å¯ä»¥é€šè¿‡ <code>EXPIRE</code> å‘½ä»¤å®ç°ï¼Œä½†æ›´å®‰å…¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>SET</code> å‘½ä»¤çš„ <code>PX</code> æˆ– <code>EX</code> é€‰é¡¹ã€‚ä¾‹å¦‚ï¼š<code>SET lock:key value NX PX 30000</code> ä¼šå°è¯•è®¾ç½®ä¸€ä¸ªé”ï¼Œå®ƒåœ¨ 30 ç§’åè¿‡æœŸã€‚</li></ul></li><li><strong>æ‰§è¡Œä¸šåŠ¡æ“ä½œ</strong>: <ul><li>å¦‚æœæˆåŠŸè·å¾—é”ï¼Œæ‰§è¡Œéœ€è¦ä¿æŠ¤çš„ä¸šåŠ¡æ“ä½œã€‚</li></ul></li><li><strong>è§£é”</strong>: <ul><li>ä½¿ç”¨ <code>DEL lock:key</code> æ¥é‡Šæ”¾é”ã€‚</li><li>ä¸ºäº†ç¡®ä¿åªæœ‰é”çš„æŒæœ‰è€…å¯ä»¥é‡Šæ”¾é”ï¼ˆé¿å…è¯¯è§£é”ï¼‰ï¼Œé‡Šæ”¾é”çš„æ“ä½œåº”è¯¥æ˜¯åŸå­çš„ã€‚è¿™é€šå¸¸ä½¿ç”¨ Redis çš„ Lua è„šæœ¬å®ç°ã€‚è„šæœ¬ä¼šæ£€æŸ¥é”çš„å€¼æ˜¯å¦ä¸æœŸæœ›ç›¸åŒ¹é…ï¼Œåªæœ‰åœ¨åŒ¹é…çš„æƒ…å†µä¸‹æ‰åˆ é™¤å®ƒã€‚</li></ul></li></ol><p>è®¾ç½®é”çš„è¿‡æœŸæ—¶é—´æ˜¯ä¸€ä¸ªæƒè¡¡ï¼š</p><ul><li><strong>å¤ªçŸ­</strong>ï¼šä¸šåŠ¡æ“ä½œå¯èƒ½æ²¡æœ‰å®Œæˆå°±å·²ç»è¿‡æœŸï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å…¶ä»–å®¢æˆ·ç«¯åœ¨å½“å‰æ“ä½œè¿˜åœ¨è¿›è¡Œæ—¶è·å¾—é”ã€‚</li><li><strong>å¤ªé•¿</strong>ï¼šå¦‚æœæŒæœ‰é”çš„å®¢æˆ·ç«¯å´©æºƒï¼Œå…¶ä»–å®¢æˆ·ç«¯å¯èƒ½éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´æ‰èƒ½è·å–é”ã€‚</li></ul><p>å› æ­¤ï¼Œè®¾ç½®çš„è¿‡æœŸæ—¶é—´åº”è¯¥æ¯”é¢„æœŸçš„ä¸šåŠ¡æ“ä½œæ—¶é—´ç¨å¾®é•¿ä¸€äº›ï¼Œä½†ä¹Ÿä¸å®œè¿‡é•¿ã€‚</p><p>æ³¨æ„ï¼šRedis çš„ <code>Redlock</code> ç®—æ³•æ˜¯ä¸€ä¸ªæ›´å¤æ‚ã€æ›´å¥å£®çš„åˆ†å¸ƒå¼é”å®ç°ã€‚å¦‚æœéœ€è¦åœ¨å¤šä¸ª Redis å®ä¾‹æˆ–é›†ç¾¤ä¹‹é—´å®ç°çœŸæ­£çš„åˆ†å¸ƒå¼é”ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ä¸ªç®—æ³•ã€‚</p><h3 id="redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”-set-nxå‘½ä»¤æœ‰ä»€ä¹ˆé—®é¢˜-å¦‚ä½•è§£å†³-2023å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”-set-nxå‘½ä»¤æœ‰ä»€ä¹ˆé—®é¢˜-å¦‚ä½•è§£å†³-2023å°çº¢ä¹¦" aria-hidden="true">#</a> redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é” set nxå‘½ä»¤æœ‰ä»€ä¹ˆé—®é¢˜ å¦‚ä½•è§£å†³ï¼Ÿï¼ˆ2023å°çº¢ä¹¦ï¼‰</h3><p>Rediså®ç°åˆ†å¸ƒå¼é”çš„åŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨SETå‘½ä»¤çš„NXï¼ˆNot eXistsï¼‰é€‰é¡¹ã€‚NXé€‰é¡¹è¡¨ç¤ºåªæœ‰å½“é”®ä¸å­˜åœ¨æ—¶ï¼Œæ‰ä¼šè®¾ç½®é”®å€¼å¯¹ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½å¤ŸæˆåŠŸåœ°è·å–é”ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SET lock_key some_value NX PX <span class="token number">30000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªå‘½ä»¤å°è¯•è®¾ç½®ä¸€ä¸ªåä¸ºlock_keyçš„é”®ï¼Œå€¼ä¸ºsome_valueï¼Œå¹¶ä¸”ä½¿ç”¨NXé€‰é¡¹ã€‚PXé€‰é¡¹è¡¨ç¤ºè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯30000æ¯«ç§’ï¼ˆ30ç§’ï¼‰ã€‚ ç„¶è€Œï¼Œä½¿ç”¨SET NXå‘½ä»¤å®ç°åˆ†å¸ƒå¼é”å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ol><li>éåŸå­æ“ä½œï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¯èƒ½åœ¨è®¾ç½®é”å’Œè®¾ç½®è¿‡æœŸæ—¶é—´ä¹‹é—´å´©æºƒï¼Œå¯¼è‡´é”æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨SETå‘½ä»¤çš„PXé€‰é¡¹æ¥è§£å†³ï¼Œå®ƒå¯ä»¥åœ¨è®¾ç½®é”çš„åŒæ—¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç¡®ä¿æ“ä½œæ˜¯åŸå­çš„ã€‚</li><li>æ— æ³•è§£å†³é”è¶…æ—¶é—®é¢˜ï¼šå¦‚æœæŒæœ‰é”çš„å®¢æˆ·ç«¯åœ¨é”è¿‡æœŸä¹‹å‰æ²¡æœ‰å®Œæˆä»»åŠ¡ï¼Œå…¶ä»–å®¢æˆ·ç«¯å¯èƒ½ä¼šè·å–åˆ°é”ï¼Œå¯¼è‡´å¹¶å‘é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨è·å–é”æ—¶è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„å€¼ï¼ˆä¾‹å¦‚UUIDï¼‰ï¼Œå¹¶åœ¨é‡Šæ”¾é”æ—¶æ£€æŸ¥è¯¥å€¼ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åªæœ‰é”çš„æŒæœ‰è€…æ‰èƒ½é‡Šæ”¾é”ã€‚</li><li>æ— æ³•è§£å†³é”é‡Šæ”¾é—®é¢˜ï¼šå¦‚æœæŒæœ‰é”çš„å®¢æˆ·ç«¯åœ¨é‡Šæ”¾é”ä¹‹å‰å´©æºƒï¼Œé”å¯èƒ½æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªåå°çº¿ç¨‹å®šæœŸæ£€æŸ¥å¹¶é‡Šæ”¾è¿‡æœŸçš„é”ã€‚</li><li>æ— æ³•å®ç°å…¬å¹³é”ï¼šSET NXå‘½ä»¤æ— æ³•ä¿è¯å…¬å¹³æ€§ï¼Œå³ç­‰å¾…æ—¶é—´æœ€é•¿çš„å®¢æˆ·ç«¯ä¸ä¸€å®šèƒ½å¤Ÿä¼˜å…ˆè·å–é”ã€‚è¦å®ç°å…¬å¹³é”ï¼Œå¯ä»¥ä½¿ç”¨Redisçš„LISTæ•°æ®ç»“æ„ï¼Œå°†ç­‰å¾…é”çš„å®¢æˆ·ç«¯æŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é¡ºåºæ’é˜Ÿã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œè™½ç„¶SET NXå‘½ä»¤å¯ä»¥å®ç°åŸºæœ¬çš„åˆ†å¸ƒå¼é”åŠŸèƒ½ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦è€ƒè™‘æ›´å¤šçš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æˆç†Ÿçš„Redisåˆ†å¸ƒå¼é”åº“ï¼Œå¦‚Redlockã€‚Redlockæä¾›äº†ä¸€ä¸ªæ›´åŠ å¥å£®å’Œå¯é çš„åˆ†å¸ƒå¼é”å®ç°ï¼Œå¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜</li></ol><h3 id="ä»€ä¹ˆæƒ…å†µä½¿ç”¨-redis-åè€Œé™ä½æ€§èƒ½-2023-å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæƒ…å†µä½¿ç”¨-redis-åè€Œé™ä½æ€§èƒ½-2023-å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> ä»€ä¹ˆæƒ…å†µä½¿ç”¨ redis åè€Œé™ä½æ€§èƒ½ï¼ˆ2023 å®Œç¾ä¸–ç•Œï¼‰</h3><ul><li>æ•°æ®é›†è¿‡å¤§ï¼šRedis å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœæ•°æ®é›†è¿‡å¤§ï¼Œè¶…å‡ºäº†æœåŠ¡å™¨å¯ç”¨å†…å­˜çš„é™åˆ¶ï¼Œå°±ä¼šå¯¼è‡´ Redis ä½¿ç”¨äº¤æ¢ç©ºé—´ï¼ˆswap spaceï¼‰æˆ–è€…é¢‘ç¹åœ°ä»ç£ç›˜åŠ è½½æ•°æ®ï¼Œä»è€Œä¸¥é‡å½±å“æ€§èƒ½ã€‚</li><li>å†…å­˜ç¢ç‰‡åŒ–ï¼šå½“ Redis é¢‘ç¹åœ°è¿›è¡Œå†™å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–ã€‚è¿™ä¼šå¯¼è‡´ Redis éœ€è¦æ›´å¤šçš„å†…å­˜æ¥å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œæœ€ç»ˆå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li><li>å¤§é‡çš„é”®è¿‡æœŸæ“ä½œï¼šå½“ Redis ä¸­æœ‰å¤§é‡çš„é”®éœ€è¦è¿‡æœŸå¤„ç†æ—¶ï¼ŒRedis ä¼šæ‰§è¡Œå®šæœŸæ¸…ç†æ“ä½œæ¥åˆ é™¤è¿‡æœŸçš„é”®ã€‚å¦‚æœè¿™ä¸ªæ¸…ç†æ“ä½œè€—æ—¶è¾ƒé•¿ï¼Œä¼šå¯¼è‡´ Redis åœ¨æ‰§è¡Œå…¶ä»–æ“ä½œæ—¶çš„æ€§èƒ½ä¸‹é™ã€‚</li><li>é«˜å¹¶å‘å†™å…¥æ“ä½œï¼šå½“æœ‰å¤§é‡çš„å¹¶å‘å†™å…¥æ“ä½œæ—¶ï¼ŒRedis å¯èƒ½ä¼šå› ä¸ºç«äº‰æ¡ä»¶è€Œé™ä½æ€§èƒ½ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Redis çš„äº‹åŠ¡åŠŸèƒ½æ¥å‡å°‘ç«äº‰å¹¶å‘ã€‚</li><li>å¤æ‚çš„æ•°æ®ç»“æ„æ“ä½œï¼šRedis æä¾›äº†å¤šç§å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå¦‚åˆ—è¡¨ã€é›†åˆå’Œæœ‰åºé›†åˆç­‰ã€‚å½“å¯¹è¿™äº›æ•°æ®ç»“æ„è¿›è¡Œå¤æ‚çš„æ“ä½œæ—¶ï¼Œä¾‹å¦‚å¯¹å¤§å‹åˆ—è¡¨è¿›è¡Œé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æƒ…å†µå¹¶ä¸æ„å‘³ç€ Redis æ€»æ˜¯ä¼šé™ä½æ€§èƒ½ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹å¯èƒ½ä¼šå‡ºç°æ€§èƒ½ä¸‹é™çš„æƒ…å†µã€‚ä¸ºäº†ä¼˜åŒ– Redis çš„æ€§èƒ½ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„æƒ…å†µè¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ï¼Œä¾‹å¦‚å¢åŠ å†…å­˜ã€åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´ã€ä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„ç­‰ã€‚</p>`,122),Jn=n("p",null,"å‚è€ƒèµ„æ–™ï¼š",-1),Fn={href:"https://loadforge.com/guides/troubleshooting-redis-performance-issues",target:"_blank",rel:"noopener noreferrer"},zn={href:"https://severalnines.com/blog/performance-tuning-redis/",target:"_blank",rel:"noopener noreferrer"},Un=t(`<h3 id="rediså¤§keyå¦‚ä½•è§£å†³-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#rediså¤§keyå¦‚ä½•è§£å†³-2023-æ»´æ»´" aria-hidden="true">#</a> Rediså¤§keyå¦‚ä½•è§£å†³ï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>Rediså¤§keyé€šå¸¸æŒ‡çš„æ˜¯å­˜å‚¨åœ¨Redisä¸­çš„æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€é›†åˆã€å“ˆå¸Œè¡¨å’Œæœ‰åºé›†åˆï¼‰çš„æ•°æ®é‡ç‰¹åˆ«å¤§çš„keyã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåˆ—è¡¨ä¸­çš„å…ƒç´ æ•°é‡å·¨å¤§ï¼Œæˆ–è€…ä¸€ä¸ªå“ˆå¸Œè¡¨çš„å­—æ®µæ•°é‡å¾ˆå¤šã€‚è¿™äº›å¤§keyå¯èƒ½ä¼šå¯¼è‡´åœ¨æ‰§è¡ŒæŸäº›æ“ä½œæ—¶æ¶ˆè€—è¿‡å¤šçš„CPUå’Œå†…å­˜èµ„æºï¼Œè¿›è€Œå½±å“Redisçš„æ€§èƒ½ã€‚ ä¾‹å¦‚ï¼šå­—ç¬¦ä¸²(String)ï¼šä¸€ä¸ªå­—ç¬¦ä¸²valueçš„é•¿åº¦éå¸¸å¤§ï¼Œä¾‹å¦‚è¶…è¿‡10KBã€‚</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>SET bigkey <span class="token string">&quot;a very large string.....&quot;</span>  # stringé•¿åº¦éå¸¸å¤§
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ—è¡¨(List)ï¼šåˆ—è¡¨ä¸­çš„å…ƒç´ æ•°é‡éå¸¸å¤šï¼Œä¾‹å¦‚è¶…è¿‡10000ä¸ªã€‚</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>LPUSH bigkey item1 item2 item3 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> item10001  # åˆ—è¡¨å…ƒç´ æ•°é‡éå¸¸å¤š
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“ˆå¸Œ(Hash)ï¼šå“ˆå¸Œä¸­çš„å­—æ®µæ•°é‡éå¸¸å¤šï¼Œä¾‹å¦‚è¶…è¿‡10000ä¸ªã€‚</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>HMSET bigkey field1 value1 field2 value2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> field10001 value10001  # å“ˆå¸Œå­—æ®µæ•°é‡éå¸¸å¤š
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»¥ä¸Šçš„æ•°å€¼ï¼ˆä¾‹å¦‚10KBï¼Œ10000ä¸ªç­‰ï¼‰ä»…ä½œä¸ºå‚è€ƒï¼Œå…·ä½“å®šä¹‰å¤§keyçš„é˜ˆå€¼éœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡å’ŒRedisçš„é…ç½®æ¥å†³å®šã€‚å¦‚æœè¿™äº›keyå¯¹Redisçš„æ€§èƒ½äº§ç”Ÿäº†å½±å“ï¼Œå°±åº”å½“è€ƒè™‘å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯å¤§keyæ€»ç»“</p></blockquote><ul><li>String ç±»å‹çš„å€¼å¤§äº 10 KBï¼›</li><li>Hashã€Listã€Setã€ZSet ç±»å‹çš„å…ƒç´ çš„ä¸ªæ•°è¶…è¿‡ 5000ä¸ªï¼›</li></ul><blockquote><p>å¤§ key ä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</p></blockquote><p>å¤§ key ä¼šå¸¦æ¥ä»¥ä¸‹å››ç§å½±å“ï¼š</p><ul><li><strong>å®¢æˆ·ç«¯è¶…æ—¶é˜»å¡</strong>ã€‚ç”±äº Redis æ‰§è¡Œå‘½ä»¤æ˜¯å•çº¿ç¨‹å¤„ç†ï¼Œç„¶ååœ¨æ“ä½œå¤§ key æ—¶ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šé˜»å¡ Redisï¼Œä»å®¢æˆ·ç«¯è¿™ä¸€è§†è§’çœ‹ï¼Œå°±æ˜¯å¾ˆä¹…å¾ˆä¹…éƒ½æ²¡æœ‰å“åº”ã€‚</li><li><strong>å¼•å‘ç½‘ç»œé˜»å¡</strong>ã€‚æ¯æ¬¡è·å–å¤§ key äº§ç”Ÿçš„ç½‘ç»œæµé‡è¾ƒå¤§ï¼Œå¦‚æœä¸€ä¸ª key çš„å¤§å°æ˜¯ 1 MBï¼Œæ¯ç§’è®¿é—®é‡ä¸º 1000ï¼Œé‚£ä¹ˆæ¯ç§’ä¼šäº§ç”Ÿ 1000MB çš„æµé‡ï¼Œè¿™å¯¹äºæ™®é€šåƒå…†ç½‘å¡çš„æœåŠ¡å™¨æ¥è¯´æ˜¯ç¾éš¾æ€§çš„ã€‚</li><li><strong>é˜»å¡å·¥ä½œçº¿ç¨‹</strong>ã€‚å¦‚æœä½¿ç”¨ del åˆ é™¤å¤§ key æ—¶ï¼Œä¼šé˜»å¡å·¥ä½œçº¿ç¨‹ï¼Œè¿™æ ·å°±æ²¡åŠæ³•å¤„ç†åç»­çš„å‘½ä»¤ã€‚</li><li><strong>å†…å­˜åˆ†å¸ƒä¸å‡</strong>ã€‚é›†ç¾¤æ¨¡å‹åœ¨ slot åˆ†ç‰‡å‡åŒ€æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°æ•°æ®å’ŒæŸ¥è¯¢å€¾æ–œæƒ…å†µï¼Œéƒ¨åˆ†æœ‰å¤§ key çš„ Redis èŠ‚ç‚¹å ç”¨å†…å­˜å¤šï¼ŒQPS ä¹Ÿä¼šæ¯”è¾ƒå¤§ã€‚</li></ul><blockquote><p>å¦‚ä½•æ‰¾åˆ°å¤§ key ï¼Ÿ</p></blockquote><ol><li>redis-cli --bigkeys æŸ¥æ‰¾å¤§key</li></ol><p>å¯ä»¥é€šè¿‡ redis-cli --bigkeys å‘½ä»¤æŸ¥æ‰¾å¤§ keyï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>redis-cli -h 127.0.0.1 -p6379 -a &quot;password&quot; -- bigkeys
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨çš„æ—¶å€™æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æœ€å¥½é€‰æ‹©åœ¨ä»èŠ‚ç‚¹ä¸Šæ‰§è¡Œè¯¥å‘½ä»¤ã€‚å› ä¸ºä¸»èŠ‚ç‚¹ä¸Šæ‰§è¡Œæ—¶ï¼Œä¼šé˜»å¡ä¸»èŠ‚ç‚¹ï¼›</li><li>å¦‚æœæ²¡æœ‰ä»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©åœ¨ Redis å®ä¾‹ä¸šåŠ¡å‹åŠ›çš„ä½å³°é˜¶æ®µè¿›è¡Œæ‰«ææŸ¥è¯¢ï¼Œä»¥å…å½±å“åˆ°å®ä¾‹çš„æ­£å¸¸è¿è¡Œï¼›æˆ–è€…å¯ä»¥ä½¿ç”¨ -i å‚æ•°æ§åˆ¶æ‰«æé—´éš”ï¼Œé¿å…é•¿æ—¶é—´æ‰«æé™ä½ Redis å®ä¾‹çš„æ€§èƒ½ã€‚ è¯¥æ–¹å¼çš„ä¸è¶³ä¹‹å¤„ï¼š</li><li>è¿™ä¸ªæ–¹æ³•åªèƒ½è¿”å›æ¯ç§ç±»å‹ä¸­æœ€å¤§çš„é‚£ä¸ª bigkeyï¼Œæ— æ³•å¾—åˆ°å¤§å°æ’åœ¨å‰ N ä½çš„ bigkeyï¼›</li><li>å¯¹äºé›†åˆç±»å‹æ¥è¯´ï¼Œè¿™ä¸ªæ–¹æ³•åªç»Ÿè®¡é›†åˆå…ƒç´ ä¸ªæ•°çš„å¤šå°‘ï¼Œè€Œä¸æ˜¯å®é™…å ç”¨çš„å†…å­˜é‡ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°å¤šï¼Œå¹¶ä¸ä¸€å®šå ç”¨çš„å†…å­˜å°±å¤šã€‚å› ä¸ºï¼Œæœ‰å¯èƒ½æ¯ä¸ªå…ƒç´ å ç”¨çš„å†…å­˜å¾ˆå°ï¼Œè¿™æ ·çš„è¯ï¼Œå³ä½¿å…ƒç´ ä¸ªæ•°æœ‰å¾ˆå¤šï¼Œæ€»å†…å­˜å¼€é”€ä¹Ÿä¸å¤§ï¼›</li></ul><ol start="2"><li>ä½¿ç”¨ SCAN å‘½ä»¤æŸ¥æ‰¾å¤§ key ä½¿ç”¨ SCAN å‘½ä»¤å¯¹æ•°æ®åº“æ‰«æï¼Œç„¶åç”¨ TYPE å‘½ä»¤è·å–è¿”å›çš„æ¯ä¸€ä¸ª key çš„ç±»å‹ã€‚ å¯¹äº String ç±»å‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ STRLEN å‘½ä»¤è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯å ç”¨çš„å†…å­˜ç©ºé—´å­—èŠ‚æ•°ã€‚ å¯¹äºé›†åˆç±»å‹æ¥è¯´ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è·å¾—å®ƒå ç”¨çš„å†…å­˜å¤§å°ï¼š</li></ol><ul><li>å¦‚æœèƒ½å¤Ÿé¢„å…ˆä»ä¸šåŠ¡å±‚çŸ¥é“é›†åˆå…ƒç´ çš„å¹³å‡å¤§å°ï¼Œé‚£ä¹ˆï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è·å–é›†åˆå…ƒç´ çš„ä¸ªæ•°ï¼Œç„¶åä¹˜ä»¥é›†åˆå…ƒç´ çš„å¹³å‡å¤§å°ï¼Œè¿™æ ·å°±èƒ½è·å¾—é›†åˆå ç”¨çš„å†…å­˜å¤§å°äº†ã€‚List ç±»å‹ï¼šLLEN å‘½ä»¤ï¼›Hash ç±»å‹ï¼šHLEN å‘½ä»¤ï¼›Set ç±»å‹ï¼šSCARD å‘½ä»¤ï¼›Sorted Set ç±»å‹ï¼šZCARD å‘½ä»¤ï¼›</li><li>å¦‚æœä¸èƒ½æå‰çŸ¥é“å†™å…¥é›†åˆçš„å…ƒç´ å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨ MEMORY USAGE å‘½ä»¤ï¼ˆéœ€è¦ Redis 4.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ï¼ŒæŸ¥è¯¢ä¸€ä¸ªé”®å€¼å¯¹å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</li></ul><ol start="3"><li>ä½¿ç”¨ RdbTools å·¥å…·æŸ¥æ‰¾å¤§ key ä½¿ç”¨ RdbTools ç¬¬ä¸‰æ–¹å¼€æºå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥è§£æ Redis å¿«ç…§ï¼ˆRDBï¼‰æ–‡ä»¶ï¼Œæ‰¾åˆ°å…¶ä¸­çš„å¤§ keyã€‚ æ¯”å¦‚ï¼Œä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œå°†å¤§äº 10 kb çš„ key è¾“å‡ºåˆ°ä¸€ä¸ªè¡¨æ ¼æ–‡ä»¶ã€‚</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rdb dump.rdb -c memory --bytes 10240 -f redis.csv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>å¦‚ä½•åˆ é™¤å¤§ key</p></blockquote><p>åˆ é™¤æ“ä½œçš„æœ¬è´¨æ˜¯è¦é‡Šæ”¾é”®å€¼å¯¹å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œä¸è¦å°ç§å†…å­˜çš„é‡Šæ”¾è¿‡ç¨‹ã€‚</p><p>é‡Šæ”¾å†…å­˜åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œä¸ºäº†æ›´åŠ é«˜æ•ˆåœ°ç®¡ç†å†…å­˜ç©ºé—´ï¼Œåœ¨åº”ç”¨ç¨‹åºé‡Šæ”¾å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦æŠŠé‡Šæ”¾æ‰çš„å†…å­˜å—æ’å…¥ä¸€ä¸ªç©ºé—²å†…å­˜å—çš„é“¾è¡¨ï¼Œä»¥ä¾¿åç»­è¿›è¡Œç®¡ç†å’Œå†åˆ†é…ã€‚è¿™ä¸ªè¿‡ç¨‹æœ¬èº«éœ€è¦ä¸€å®šæ—¶é—´ï¼Œè€Œä¸”ä¼šé˜»å¡å½“å‰é‡Šæ”¾å†…å­˜çš„åº”ç”¨ç¨‹åºã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸‹å­é‡Šæ”¾äº†å¤§é‡å†…å­˜ï¼Œç©ºé—²å†…å­˜å—é“¾è¡¨æ“ä½œæ—¶é—´å°±ä¼šå¢åŠ ï¼Œç›¸åº”åœ°å°±ä¼šé€ æˆ Redis ä¸»çº¿ç¨‹çš„é˜»å¡ï¼Œå¦‚æœä¸»çº¿ç¨‹å‘ç”Ÿäº†é˜»å¡ï¼Œå…¶ä»–æ‰€æœ‰è¯·æ±‚å¯èƒ½éƒ½ä¼šè¶…æ—¶ï¼Œè¶…æ—¶è¶Šæ¥è¶Šå¤šï¼Œä¼šé€ æˆ Redis è¿æ¥è€—å°½ï¼Œäº§ç”Ÿå„ç§å¼‚å¸¸ã€‚</p><p>å› æ­¤ï¼Œåˆ é™¤å¤§ key è¿™ä¸€ä¸ªåŠ¨ä½œï¼Œæˆ‘ä»¬è¦å°å¿ƒã€‚å…·ä½“è¦æ€ä¹ˆåšå‘¢ï¼Ÿè¿™é‡Œç»™å‡ºä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>åˆ†æ‰¹æ¬¡åˆ é™¤</li><li>å¼‚æ­¥åˆ é™¤ï¼ˆRedis 4.0ç‰ˆæœ¬ä»¥ä¸Šï¼‰</li></ul><ol><li>åˆ†æ‰¹æ¬¡åˆ é™¤</li></ol><p>å¯¹äºåˆ é™¤å¤§ Hashï¼Œä½¿ç”¨ hscan å‘½ä»¤ï¼Œæ¯æ¬¡è·å– 100 ä¸ªå­—æ®µï¼Œå†ç”¨ hdel å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤ 1 ä¸ªå­—æ®µã€‚</p><p>Pythonä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">del_large_hash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;redis-host1&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>
    large_hash_key <span class="token operator">=</span><span class="token string">&quot;xxx&quot;</span> <span class="token comment">#è¦åˆ é™¤çš„å¤§hashé”®å</span>
    cursor <span class="token operator">=</span> <span class="token string">&#39;0&#39;</span>
    <span class="token keyword">while</span> cursor <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token comment"># ä½¿ç”¨ hscan å‘½ä»¤ï¼Œæ¯æ¬¡è·å– 100 ä¸ªå­—æ®µ</span>
        cursor<span class="token punctuation">,</span> data <span class="token operator">=</span> r<span class="token punctuation">.</span>hscan<span class="token punctuation">(</span>large_hash_key<span class="token punctuation">,</span> cursor<span class="token operator">=</span>cursor<span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> item <span class="token keyword">in</span> data<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># å†ç”¨ hdel å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤1ä¸ªå­—æ®µ</span>
                r<span class="token punctuation">.</span>hdel<span class="token punctuation">(</span>large_hash_key<span class="token punctuation">,</span> item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºåˆ é™¤å¤§ Listï¼Œé€šè¿‡ ltrim å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤å°‘é‡å…ƒç´ ã€‚</p><p>Pythonä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">del_large_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;redis-host1&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>
  large_list_key <span class="token operator">=</span> <span class="token string">&#39;xxx&#39;</span>  <span class="token comment">#è¦åˆ é™¤çš„å¤§listçš„é”®å</span>
  <span class="token keyword">while</span> r<span class="token punctuation">.</span>llen<span class="token punctuation">(</span>large_list_key<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
      <span class="token comment">#æ¯æ¬¡åªåˆ é™¤æœ€å³100ä¸ªå…ƒç´ </span>
      r<span class="token punctuation">.</span>ltrim<span class="token punctuation">(</span>large_list_key<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">101</span><span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºåˆ é™¤å¤§ Setï¼Œä½¿ç”¨ sscan å‘½ä»¤ï¼Œæ¯æ¬¡æ‰«æé›†åˆä¸­ 100 ä¸ªå…ƒç´ ï¼Œå†ç”¨ srem å‘½ä»¤æ¯æ¬¡åˆ é™¤ä¸€ä¸ªé”®ã€‚</p><p>Pythonä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">del_large_set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;redis-host1&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>
  large_set_key <span class="token operator">=</span> <span class="token string">&#39;xxx&#39;</span>   <span class="token comment"># è¦åˆ é™¤çš„å¤§setçš„é”®å</span>
  cursor <span class="token operator">=</span> <span class="token string">&#39;0&#39;</span>
  <span class="token keyword">while</span> cursor <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token comment"># ä½¿ç”¨ sscan å‘½ä»¤ï¼Œæ¯æ¬¡æ‰«æé›†åˆä¸­ 100 ä¸ªå…ƒç´ </span>
    cursor<span class="token punctuation">,</span> data <span class="token operator">=</span> r<span class="token punctuation">.</span>sscan<span class="token punctuation">(</span>large_set_key<span class="token punctuation">,</span> cursor<span class="token operator">=</span>cursor<span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> data<span class="token punctuation">:</span>
      <span class="token comment"># å†ç”¨ srem å‘½ä»¤æ¯æ¬¡åˆ é™¤ä¸€ä¸ªé”®</span>
      r<span class="token punctuation">.</span>srem<span class="token punctuation">(</span>large_size_key<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºåˆ é™¤å¤§ ZSetï¼Œä½¿ç”¨ zremrangebyrank å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤ top 100ä¸ªå…ƒç´ ã€‚</p><p>Pythonä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">del_large_sortedset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;large_sortedset_key&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>
  large_sortedset_key<span class="token operator">=</span><span class="token string">&#39;xxx&#39;</span>
  <span class="token keyword">while</span> r<span class="token punctuation">.</span>zcard<span class="token punctuation">(</span>large_sortedset_key<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token comment"># ä½¿ç”¨ zremrangebyrank å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤ top 100ä¸ªå…ƒç´ </span>
    r<span class="token punctuation">.</span>zremrangebyrank<span class="token punctuation">(</span>large_sortedset_key<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>å¼‚æ­¥åˆ é™¤ ä» Redis 4.0 ç‰ˆæœ¬å¼€å§‹ï¼Œå¯ä»¥é‡‡ç”¨å¼‚æ­¥åˆ é™¤æ³•ï¼Œç”¨ unlink å‘½ä»¤ä»£æ›¿ del æ¥åˆ é™¤ã€‚ è¿™æ · Redis ä¼šå°†è¿™ä¸ª key æ”¾å…¥åˆ°ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹ä¸­è¿›è¡Œåˆ é™¤ï¼Œè¿™æ ·ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ é™¤äº†ä¸»åŠ¨è°ƒç”¨ unlink å‘½ä»¤å®ç°å¼‚æ­¥åˆ é™¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é…ç½®å‚æ•°ï¼Œè¾¾åˆ°æŸäº›æ¡ä»¶çš„æ—¶å€™è‡ªåŠ¨è¿›è¡Œå¼‚æ­¥åˆ é™¤ã€‚ ä¸»è¦æœ‰ 4 ç§åœºæ™¯ï¼Œé»˜è®¤éƒ½æ˜¯å…³é—­çš„ï¼š</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del
noslave-lazy-flush no
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ƒä»¬ä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li>lazyfree-lazy-evictionï¼šè¡¨ç¤ºå½“ Redis è¿è¡Œå†…å­˜è¶…è¿‡ maxmeory æ—¶ï¼Œæ˜¯å¦å¼€å¯ lazy free æœºåˆ¶åˆ é™¤ï¼›</li><li>lazyfree-lazy-expireï¼šè¡¨ç¤ºè®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼ï¼Œå½“è¿‡æœŸä¹‹åæ˜¯å¦å¼€å¯ lazy free æœºåˆ¶åˆ é™¤ï¼›</li><li>lazyfree-lazy-server-delï¼šæœ‰äº›æŒ‡ä»¤åœ¨å¤„ç†å·²å­˜åœ¨çš„é”®æ—¶ï¼Œä¼šå¸¦æœ‰ä¸€ä¸ªéšå¼çš„ del é”®çš„æ“ä½œï¼Œæ¯”å¦‚ rename å‘½ä»¤ï¼Œå½“ç›®æ ‡é”®å·²å­˜åœ¨ï¼ŒRedis ä¼šå…ˆåˆ é™¤ç›®æ ‡é”®ï¼Œå¦‚æœè¿™äº›ç›®æ ‡é”®æ˜¯ä¸€ä¸ª big keyï¼Œå°±ä¼šé€ æˆé˜»å¡åˆ é™¤çš„é—®é¢˜ï¼Œæ­¤é…ç½®è¡¨ç¤ºåœ¨è¿™ç§åœºæ™¯ä¸­æ˜¯å¦å¼€å¯ lazy free æœºåˆ¶åˆ é™¤ï¼›</li><li>slave-lazy-flushï¼šé’ˆå¯¹ slave (ä»èŠ‚ç‚¹) è¿›è¡Œå…¨é‡æ•°æ®åŒæ­¥ï¼Œslave åœ¨åŠ è½½ master çš„ RDB æ–‡ä»¶å‰ï¼Œä¼šè¿è¡Œ flushall æ¥æ¸…ç†è‡ªå·±çš„æ•°æ®ï¼Œå®ƒè¡¨ç¤ºæ­¤æ—¶æ˜¯å¦å¼€å¯ lazy free æœºåˆ¶åˆ é™¤ã€‚</li></ul><p>å»ºè®®å¼€å¯å…¶ä¸­çš„ lazyfree-lazy-evictionã€lazyfree-lazy-expireã€lazyfree-lazy-server-del ç­‰é…ç½®ï¼Œè¿™æ ·å°±å¯ä»¥æœ‰æ•ˆçš„æé«˜ä¸»çº¿ç¨‹çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><blockquote><p>è§£å†³</p></blockquote><ol><li><strong>å¯¹å¤§Keyè¿›è¡Œæ‹†åˆ†</strong>ï¼šå°†ä¸€ä¸ªBig Keyæ‹†åˆ†ä¸ºå¤šä¸ªkey-valueè¿™æ ·çš„å°Keyï¼Œå¹¶ç¡®ä¿æ¯ä¸ªkeyçš„æˆå‘˜æ•°é‡æˆ–è€…å¤§å°åœ¨åˆç†èŒƒå›´å†…ï¼Œç„¶åå†è¿›è¡Œå­˜å‚¨ï¼Œé€šè¿‡getä¸åŒçš„keyæˆ–è€…ä½¿ç”¨mgetæ‰¹é‡è·å–ã€‚</li><li><strong>å¯¹å¤§Keyè¿›è¡Œæ¸…ç†</strong>ï¼šå¯¹Redisä¸­çš„å¤§Keyè¿›è¡Œæ¸…ç†ï¼Œä»Redisä¸­åˆ é™¤æ­¤ç±»æ•°æ®ã€‚Redisè‡ª4.0èµ·æä¾›äº†UNLINKå‘½ä»¤ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿä»¥éé˜»å¡çš„æ–¹å¼ç¼“æ…¢é€æ­¥çš„æ¸…ç†ä¼ å…¥çš„Keyï¼Œé€šè¿‡UNLINKï¼Œä½ å¯ä»¥å®‰å…¨çš„åˆ é™¤å¤§Keyç”šè‡³ç‰¹å¤§Keyã€‚</li><li><strong>ç›‘æ§Redisçš„å†…å­˜ã€ç½‘ç»œå¸¦å®½ã€è¶…æ—¶ç­‰æŒ‡æ ‡</strong>ï¼šé€šè¿‡ç›‘æ§ç³»ç»Ÿå¹¶è®¾ç½®åˆç†çš„Rediså†…å­˜æŠ¥è­¦é˜ˆå€¼æ¥æé†’æˆ‘ä»¬æ­¤æ—¶å¯èƒ½æœ‰å¤§Keyæ­£åœ¨äº§ç”Ÿï¼Œå¦‚ï¼šRediså†…å­˜ä½¿ç”¨ç‡è¶…è¿‡70%ï¼ŒRediså†…å­˜1å°æ—¶å†…å¢é•¿ç‡è¶…è¿‡20%ç­‰ã€‚</li><li><strong>å®šæœŸæ¸…ç†å¤±æ•ˆæ•°æ®</strong>ï¼šå¦‚æœæŸä¸ªKeyæœ‰ä¸šåŠ¡ä¸æ–­ä»¥å¢é‡æ–¹å¼å†™å…¥å¤§é‡çš„æ•°æ®ï¼Œå¹¶ä¸”å¿½ç•¥äº†å…¶æ—¶æ•ˆæ€§ï¼Œè¿™æ ·ä¼šå¯¼è‡´å¤§é‡çš„å¤±æ•ˆæ•°æ®å †ç§¯ã€‚å¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡çš„æ–¹å¼ï¼Œå¯¹å¤±æ•ˆæ•°æ®è¿›è¡Œæ¸…ç†ã€‚</li><li><strong>å‹ç¼©value</strong>ï¼šä½¿ç”¨åºåˆ—åŒ–ã€å‹ç¼©ç®—æ³•å°†keyçš„å¤§å°æ§åˆ¶åœ¨åˆç†èŒƒå›´å†…ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„åºåˆ—åŒ–ã€ååºåˆ—åŒ–éƒ½ä¼šå¸¦æ¥ä¸€å®šçš„æ¶ˆè€—ã€‚å¦‚æœå‹ç¼©åï¼Œvalueè¿˜æ˜¯å¾ˆå¤§ï¼Œé‚£ä¹ˆå¯ä»¥è¿›ä¸€æ­¥å¯¹keyè¿›è¡Œæ‹†åˆ†ã€‚</li></ol>`,49),Gn=n("p",null,"å‚è€ƒï¼š",-1),Kn={href:"https://blog.csdn.net/Weixiaohuai/article/details/125391957",target:"_blank",rel:"noopener noreferrer"},Qn={href:"https://min.news/en/news/a1b1f8acadd9af9be99514da7504de1b.html",target:"_blank",rel:"noopener noreferrer"},Vn={href:"https://www.dragonflydb.io/error-solutions/redis-big-key-problem",target:"_blank",rel:"noopener noreferrer"},Xn={href:"https://xiaolincoding.com/redis/base/redis_interview.html#redis-%E7%9A%84%E5%A4%A7-key-%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86",target:"_blank",rel:"noopener noreferrer"},Wn=n("h3",{id:"ä»€ä¹ˆæ˜¯çƒ­key-å¦‚ä½•è§£å†³çƒ­keyé—®é¢˜-2023-æ»´æ»´-2023-å°çº¢ä¹¦",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä»€ä¹ˆæ˜¯çƒ­key-å¦‚ä½•è§£å†³çƒ­keyé—®é¢˜-2023-æ»´æ»´-2023-å°çº¢ä¹¦","aria-hidden":"true"},"#"),s(" ä»€ä¹ˆæ˜¯çƒ­keyï¼Ÿå¦‚ä½•è§£å†³çƒ­keyé—®é¢˜ï¼ˆ2023 æ»´æ»´ï¼Œ2023 å°çº¢ä¹¦ï¼‰")],-1),Yn=n("blockquote",null,[n("p",null,"å°çº¢ä¹¦çš„é—®æ³•æ˜¯ï¼šRedisä¸­ï¼Œå¦‚æœå•keyè¿‡çƒ­æ€ä¹ˆå¤„ç†ï¼Ÿ")],-1),Zn=n("p",null,"çƒ­keyæ˜¯æŒ‡åœ¨Redisä¸­è¢«é¢‘ç¹è®¿é—®çš„keyã€‚å½“å¤§é‡çš„è¯·æ±‚éƒ½é›†ä¸­åœ¨ä¸€å°éƒ¨åˆ†keyä¸Šæ—¶ï¼Œå°±ä¼šå½¢æˆçƒ­keyã€‚è¿™å¯èƒ½å¯¼è‡´RedisæœåŠ¡å™¨è´Ÿè½½ä¸å‡ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´éƒ¨åˆ†ä¸šåŠ¡ç˜«ç—ªã€‚",-1),$n=n("h4",{id:"å¦‚ä½•å‘ç°çƒ­key",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å¦‚ä½•å‘ç°çƒ­key","aria-hidden":"true"},"#"),s(" å¦‚ä½•å‘ç°çƒ­keyï¼Ÿ")],-1),ns=t("<li>å‡­å€Ÿä¸šåŠ¡ç»éªŒï¼Œé¢„ä¼°çƒ­ Key å‡ºç°ï¼šæ ¹æ®ä¸šåŠ¡ç³»ç»Ÿä¸Šçº¿çš„ä¸€äº›æ´»åŠ¨å’ŒåŠŸèƒ½ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥åœ¨æŸäº›åœºæ™¯ä¸‹æå‰é¢„ä¼°çƒ­ <code>Key</code> çš„å‡ºç°çš„ï¼Œæ¯”å¦‚ä¸šåŠ¡éœ€è¦è¿›è¡Œä¸€åœºå•†å“ç§’æ€æ´»åŠ¨ï¼Œç§’æ€å•†å“ä¿¡æ¯å’Œæ•°é‡ä¸€èˆ¬éƒ½ä¼šç¼“å­˜åˆ° <code>Redis</code> ä¸­ï¼Œè¿™ç§åœºæ™¯ææœ‰å¯èƒ½å‡ºç°çƒ­ <code>Key</code> é—®é¢˜çš„ã€‚</li><li>å®¢æˆ·ç«¯è¿›è¡Œæ”¶é›†ï¼šä¸€èˆ¬æˆ‘ä»¬åœ¨è¿æ¥ <code>Redis</code> æœåŠ¡å™¨æ—¶éƒ½è¦ä½¿ç”¨ä¸“é—¨çš„ SDKï¼ˆæ¯”å¦‚ï¼š<code>Java</code> çš„å®¢æˆ·ç«¯å·¥å…· <code>Jedis</code>ã€<code>Redisson</code>ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®¢æˆ·ç«¯å·¥å…·è¿›è¡Œå°è£…ï¼Œåœ¨å‘é€è¯·æ±‚å‰è¿›è¡Œæ”¶é›†é‡‡é›†ï¼ŒåŒæ—¶å®šæ—¶æŠŠæ”¶é›†åˆ°çš„æ•°æ®ä¸ŠæŠ¥åˆ°ç»Ÿä¸€çš„æœåŠ¡è¿›è¡Œèšåˆè®¡ç®—ã€‚</li><li>åœ¨ä»£ç†å±‚è¿›è¡Œæ”¶é›†ï¼šå¦‚æœæ‰€æœ‰çš„ <code>Redis</code> è¯·æ±‚éƒ½ç»è¿‡ <code>Proxy</code>ï¼ˆä»£ç†ï¼‰çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ”¹åŠ¨ <code>Proxy</code> ä»£ç è¿›è¡Œæ”¶é›†ï¼Œæ€è·¯ä¸å®¢æˆ·ç«¯åŸºæœ¬ç±»ä¼¼ã€‚</li>",3),ss=n("code",null,"Redis",-1),as=n("code",null,"4.0.3",-1),es={href:"https://github.com/redis/redis/pull/4392",target:"_blank",rel:"noopener noreferrer"},ts=n("code",null,"redis-cli --hotkeys",-1),os=n("code",null,"keyspace",-1),ps=n("code",null,"key",-1),ls=n("code",null,"scan + object freq",-1),is=n("code",null,"monitor",-1),cs=n("code",null,"Redis",-1),rs=n("code",null,"redis-cli monitor",-1),us={href:"https://github.com/facebookarchive/redis-faina",target:"_blank",rel:"noopener noreferrer"},ds=n("li",null,[s("Redis èŠ‚ç‚¹æŠ“åŒ…åˆ†æï¼š"),n("code",null,"Redis"),s(" å®¢æˆ·ç«¯ä½¿ç”¨ "),n("code",null,"TCP"),s(" åè®®ä¸æœåŠ¡ç«¯è¿›è¡Œäº¤äº’ï¼Œé€šä¿¡åè®®é‡‡ç”¨çš„æ˜¯ "),n("code",null,"RESP"),s(" åè®®ã€‚è‡ªå·±å†™ç¨‹åºç›‘å¬ç«¯å£ï¼ŒæŒ‰ç…§ "),n("code",null,"RESP"),s(" åè®®è§„åˆ™è§£ææ•°æ®ï¼Œè¿›è¡Œåˆ†æã€‚æˆ–è€…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›æŠ“åŒ…å·¥å…·ï¼Œæ¯”å¦‚ "),n("code",null,"tcpdump"),s(" å·¥å…·ï¼ŒæŠ“å–ä¸€æ®µæ—¶é—´å†…çš„æµé‡è¿›è¡Œè§£æã€‚")],-1),ks=t('<h4 id="å¦‚ä½•è§£å†³çƒ­key" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è§£å†³çƒ­key" aria-hidden="true">#</a> å¦‚ä½•è§£å†³çƒ­keyï¼Ÿ</h4><p>å¸¸ç”¨æ–¹æ¡ˆï¼š</p><ol><li><p><strong>ã€å¼ºåŠ›æ¨èã€‘åˆ†ç‰‡</strong>ï¼šè¿™æ˜¯ä¸€ç§å¸¸è§çš„è§£å†³æ–¹å¼ï¼Œå°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ª Redis å®ä¾‹ä¸­å»ï¼Œè¿™æ ·å¯ä»¥åˆ†æ•£è®¿é—®å‹åŠ›ï¼Œé¿å…å•ä¸ª Redis å®ä¾‹è¢«è¿‡åº¦è®¿é—®ã€‚ä¹‹æ‰€ä»¥å‡ºç°çƒ­ <code>Key</code>ï¼Œæ˜¯å› ä¸ºæœ‰å¤§é‡çš„å¯¹åŒä¸€ä¸ª <code>Key</code> çš„è¯·æ±‚è½åˆ°åŒä¸€ä¸ª <code>Redis</code> å®ä¾‹ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥æœ‰åŠæ³•å°†è¿™äº›è¯·æ±‚æ‰“æ•£åˆ°ä¸åŒçš„å®ä¾‹ä¸Šï¼Œé˜²æ­¢å‡ºç°æµé‡å€¾æ–œçš„æƒ…å†µï¼Œé‚£ä¹ˆçƒ­ <code>Key</code> é—®é¢˜ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•å°†å¯¹æŸä¸ªçƒ­ <code>Key</code> çš„è¯·æ±‚æ‰“æ•£åˆ°ä¸åŒå®ä¾‹ä¸Šå‘¢ï¼Ÿæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡çƒ­ <code>Key</code> å¤‡ä»½çš„æ–¹å¼ï¼ŒåŸºæœ¬çš„æ€è·¯å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»™çƒ­ <code>Key</code> åŠ ä¸Šå‰ç¼€æˆ–è€…åç¼€ï¼ŒæŠŠä¸€ä¸ªçƒ­ <code>Key</code> çš„æ•°é‡å˜æˆ <code>Redis</code> å®ä¾‹ä¸ªæ•° <code>N</code> çš„å€æ•° <code>M</code>ï¼Œä»è€Œç”±è®¿é—®ä¸€ä¸ª <code>Redis</code> <code>Key</code> å˜æˆè®¿é—® <code>N * M</code> ä¸ª <code>Redis</code> <code>Key</code>ã€‚ <code>N * M</code> ä¸ª <code>Redis</code> <code>Key</code> ç»è¿‡åˆ†ç‰‡åˆ†å¸ƒåˆ°ä¸åŒçš„å®ä¾‹ä¸Šï¼Œå°†è®¿é—®é‡å‡æ‘Šåˆ°æ‰€æœ‰å®ä¾‹ã€‚</p></li><li><p>äºŒçº§ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰ï¼šå½“å‡ºç°çƒ­ <code>Key</code> ä»¥åï¼ŒæŠŠçƒ­ <code>Key</code> åŠ è½½åˆ°ç³»ç»Ÿçš„ <code>JVM</code> ä¸­ã€‚åç»­é’ˆå¯¹è¿™äº›çƒ­ <code>Key</code> çš„è¯·æ±‚ï¼Œä¼šç›´æ¥ä» <code>JVM</code> ä¸­è·å–ï¼Œè€Œä¸ä¼šèµ°åˆ° <code>Redis</code> å±‚ã€‚è¿™äº›æœ¬åœ°ç¼“å­˜çš„å·¥å…·å¾ˆå¤šï¼Œæ¯”å¦‚ <code>Ehcache</code>ï¼Œæˆ–è€… <code>Google Guava</code> ä¸­ <code>Cache</code> å·¥å…·ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ <code>HashMap</code> ä½œä¸ºæœ¬åœ°ç¼“å­˜å·¥å…·éƒ½æ˜¯å¯ä»¥çš„ã€‚</p></li></ol><p>å…¶ä»–è§£å†³æ–¹æ¡ˆï¼š</p>',4),ms={href:"https://www.memcached.org/",target:"_blank",rel:"noopener noreferrer"},gs={href:"https://redisson.org/",target:"_blank",rel:"noopener noreferrer"},vs=t('<figure><img src="https://dz2cdn1.dzone.com/storage/temp/11309552-screen-shot-2019-02-19-at-62001-pm.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="2"><li>ä»£ç†+è¯»å†™åˆ†ç¦»+SLBï¼ˆæœåŠ¡å™¨è´Ÿè½½å‡è¡¡ï¼ˆServer Load Balancingï¼‰ï¼‰ï¼š <ol><li>è´Ÿè½½å‡è¡¡åœ¨SLBå±‚å®ç°</li><li>åœ¨ä»£ç†å±‚å®ç°è¯»å†™åˆ†ç¦»å’Œè‡ªåŠ¨è·¯ç”±</li><li>å†™è¯·æ±‚ç”±ä¸»èŠ‚ç‚¹å¤„ç†</li><li>è¯»è¯·æ±‚ç”±ä»èŠ‚ç‚¹å¤„ç†</li><li>HAï¼ˆHigh Availabilityï¼Œäº’è”ç½‘é»‘è¯ï¼‰åœ¨ä»èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹ä¸Šå®ç°</li></ol></li></ol><figure><img src="https://dz2cdn1.dzone.com/storage/temp/11309553-screen-shot-2019-02-19-at-62011-pm.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',3),hs=n("p",null,"å‚è€ƒï¼š",-1),bs={href:"https://dzone.com/articles/redis-hotspot-key-discovery-and-common-solutions",target:"_blank",rel:"noopener noreferrer"},ys={href:"https://dongzl.github.io/2021/01/14/03-Redis-Hot-Key/index.html",target:"_blank",rel:"noopener noreferrer"},fs={href:"https://abhivendrasingh.medium.com/understanding-and-solving-hotkey-and-bigkey-and-issues-in-redis-1198f98b17a5",target:"_blank",rel:"noopener noreferrer"},ws={href:"https://developerknow.com/what-is-the-hot-key-problem-in-redis-how-to-solve-the-hot-key-problem/",target:"_blank",rel:"noopener noreferrer"},xs={href:"https://www.programmersought.com/article/54911114988/",target:"_blank",rel:"noopener noreferrer"},Cs=n("h3",{id:"è®²ä¸‹redisçš„zset-2023-æ»´æ»´",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#è®²ä¸‹redisçš„zset-2023-æ»´æ»´","aria-hidden":"true"},"#"),s(" è®²ä¸‹Redisçš„ZSetï¼ˆ2023 æ»´æ»´ï¼‰")],-1),Ss=n("p",null,"Redisçš„ZSetï¼ˆæœ‰åºé›†åˆï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒä¸æ™®é€šçš„é›†åˆç›¸æ¯”ï¼Œåœ¨å­˜å‚¨æ¯ä¸ªå…ƒç´ æ—¶å…³è”äº†ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ã€‚è¿™ä¸ªåˆ†æ•°ç”¨äºå¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ã€‚å½“å¤šä¸ªå­—ç¬¦ä¸²å…·æœ‰ç›¸åŒåˆ†æ•°æ—¶ï¼Œè¿™äº›å­—ç¬¦ä¸²æŒ‰å­—å…¸é¡ºåºæ’åˆ—ã€‚ä¸€äº›æœ‰åºé›†åˆçš„ç”¨é€”åŒ…æ‹¬ï¼š",-1),_s=n("ul",null,[n("li",null,"æ’è¡Œæ¦œã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æœ‰åºé›†åˆè½»æ¾åœ°ç»´æŠ¤å¤§å‹åœ¨çº¿æ¸¸æˆä¸­å¾—åˆ†æœ€é«˜çš„æœ‰åºåˆ—è¡¨ã€‚"),n("li",null,"é€Ÿç‡é™åˆ¶å™¨ã€‚ç‰¹åˆ«æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æœ‰åºé›†åˆæ„å»ºæ»‘åŠ¨çª—å£é€Ÿç‡é™åˆ¶å™¨ï¼Œä»¥é˜²æ­¢è¿‡å¤šçš„APIè¯·æ±‚ã€‚")],-1),Ts=n("p",null,"ZSetä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªåˆ†æ•°ï¼Œæ ¹æ®åˆ†æ•°çš„å¤§å°å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚ä¸åŒçš„å…ƒç´ å¯ä»¥æœ‰ç›¸åŒçš„åˆ†æ•°ï¼Œä½†æ¯ä¸ªå…ƒç´ åœ¨é›†åˆä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ Rediså†…éƒ¨ä½¿ç”¨äº†è·³è·ƒè¡¨ï¼ˆskip listï¼‰å’Œå‹ç¼©åˆ—è¡¨ï¼ˆziplistï¼‰ä¸¤ç§æ•°æ®ç»“æ„æ¥å®ç°ZSetã€‚è·³è·ƒè¡¨ç”¨äºæä¾›æœ‰åºæ€§ï¼Œè€Œæ•£åˆ—è¡¨ç”¨äºå¿«é€ŸæŸ¥æ‰¾å…ƒç´ ã€‚ Redisçš„ZSetæä¾›äº†é«˜æ•ˆçš„æ“ä½œï¼ŒåŒ…æ‹¬æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚è¿™äº›æ“ä½œçš„æ—¶é—´å¤æ‚åº¦é€šå¸¸ä¸ºO(log N)ï¼Œå…¶ä¸­Næ˜¯ZSetä¸­å…ƒç´ çš„æ•°é‡ã€‚",-1),Ls=n("p",null,"å‚è€ƒï¼š",-1),Ms={href:"https://redis.io/docs/data-types/sorted-sets/",target:"_blank",rel:"noopener noreferrer"},As={href:"https://www.educba.com/redis-zset/",target:"_blank",rel:"noopener noreferrer"},Ps={href:"https://redis.io/commands/zadd/",target:"_blank",rel:"noopener noreferrer"},Rs=t(`<h3 id="zsetçš„èŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#zsetçš„èŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘-2023-æ»´æ»´" aria-hidden="true">#</a> ZSetçš„èŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>Redisçš„ZSetèŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log N + M)ï¼Œå…¶ä¸­Næ˜¯ZSetä¸­çš„å…ƒç´ æ•°é‡ï¼ŒMæ˜¯èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒèŒƒå›´æŸ¥è¯¢æ˜¯é€šè¿‡æŒ‡å®šæœ€å°å’Œæœ€å¤§åˆ†æ•°å€¼æ¥æ£€ç´¢å…ƒç´ ã€‚Rediså†…éƒ¨ä½¿ç”¨è·³è·ƒè¡¨ï¼ˆskip listï¼‰è¿™ç§æœ‰åºæ•°æ®ç»“æ„æ¥å­˜å‚¨ZSetï¼Œå¹¶ä¸”é€šè¿‡è·³è·ƒè¡¨å¯ä»¥é«˜æ•ˆåœ°è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ã€‚</p><p>åœ¨è¿›è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶ï¼ŒRedisé¦–å…ˆä¼šé€šè¿‡äºŒåˆ†æŸ¥æ‰¾åœ¨è·³è·ƒè¡¨ä¸­æ‰¾åˆ°æœ€å°åˆ†æ•°å¤§äºç­‰äºæŒ‡å®šæœ€å°åˆ†æ•°çš„èŠ‚ç‚¹ï¼Œç„¶åä»è¿™ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼ŒæŒ‰ç…§æŒ‡å®šçš„æœ€å¤§åˆ†æ•°éå†è·³è·ƒè¡¨ï¼Œç›´åˆ°æ‰¾åˆ°æœ€åä¸€ä¸ªåˆ†æ•°å°äºç­‰äºæŒ‡å®šæœ€å¤§åˆ†æ•°çš„èŠ‚ç‚¹ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log N)ã€‚</p><p>ç„¶åï¼ŒRedisä¼šä»æ‰¾åˆ°çš„èŠ‚ç‚¹å¼€å§‹å‘åéå†ï¼Œå¹¶æ”¶é›†åœ¨èŒƒå›´å†…çš„å…ƒç´ ï¼Œç›´åˆ°éå†å®Œæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ æˆ–è¾¾åˆ°èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ä¸Šé™ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(M)ï¼Œå…¶ä¸­Mæ˜¯èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒRedisçš„ZSetèŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log N + M)ï¼Œå…¶ä¸­Næ˜¯ZSetä¸­çš„å…ƒç´ æ•°é‡ï¼ŒMæ˜¯èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ã€‚è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ç§å¹³å‡æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼Œå…·ä½“çš„æ€§èƒ½è¿˜å—åˆ°ç¡¬ä»¶ç¯å¢ƒå’Œå®é™…æ•°æ®åˆ†å¸ƒçš„å½±å“ã€‚</p><h3 id="redis-æ‰¹å¤„ç†-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#redis-æ‰¹å¤„ç†-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> redis æ‰¹å¤„ç†ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>Redis æ‰¹å¤„ç†é€šå¸¸æŒ‡çš„æ˜¯é€šè¿‡ä½¿ç”¨ Redis çš„ç®¡é“ (pipeline) åŠŸèƒ½æ¥ä¸€æ¬¡æ€§æ‰§è¡Œå¤šä¸ªå‘½ä»¤ã€‚è¿™æ ·åšå¯ä»¥æé«˜æ•ˆç‡ï¼Œå› ä¸ºå®ƒå‡å°‘äº†å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å¼€é”€ã€‚åœ¨ Redis çš„ç®¡é“ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šä¸€æ¬¡æ€§å‘é€å¤šä¸ªå‘½ä»¤ï¼Œç„¶å Redis æœåŠ¡å™¨ä¾æ¬¡æ‰§è¡Œè¿™äº›å‘½ä»¤å¹¶è¿”å›ç»“æœã€‚</p><p>ä½¿ç”¨ Redis æ‰¹å¤„ç†æ—¶ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>æ‰¹å¤„ç†å¹¶ä¸ä¿è¯åŸå­æ€§ï¼Œè¿™æ„å‘³ç€å¦‚æœç®¡é“ä¸­çš„æŸä¸ªå‘½ä»¤å¤±è´¥ï¼Œå…¶ä»–å‘½ä»¤ä»å¯èƒ½æ‰§è¡ŒæˆåŠŸã€‚å¦‚æœä½ éœ€è¦åŸå­æ€§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Redis çš„äº‹åŠ¡åŠŸèƒ½ã€‚</li><li>ç”±äºç®¡é“ä¸­çš„å‘½ä»¤æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œå› æ­¤å‘½ä»¤ä¹‹é—´å¯èƒ½å­˜åœ¨ä¾èµ–å…³ç³»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡åœ¨æ·»åŠ å‘½ä»¤æ—¶æ£€æŸ¥å‰ä¸€ä¸ªå‘½ä»¤çš„ç»“æœæ¥å¤„ç†è¿™äº›ä¾èµ–å…³ç³»ã€‚</li><li>åœ¨æ·»åŠ å¤§é‡å‘½ä»¤åˆ°ç®¡é“æ—¶ï¼Œè¦æ³¨æ„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œå¯ä»¥åˆ†æ‰¹æ‰§è¡Œç®¡é“ï¼Œä»¥é¿å…ä¸€æ¬¡æ€§æ‰§è¡Œè¿‡å¤šçš„å‘½ä»¤ã€‚</li></ol><p>åœ¨ Java ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Jedis åº“æ¥è¿›è¡Œ Redis æ‰¹å¤„ç†æ“ä½œã€‚Jedis æ˜¯ä¸€ä¸ªç”¨äºæ“ä½œ Redis çš„ Java å®¢æˆ·ç«¯åº“ã€‚è¯·å…ˆç¡®ä¿å·²å°† Jedis æ·»åŠ åˆ°é¡¹ç›®çš„ä¾èµ–ä¸­ã€‚å¦‚æœä½¿ç”¨ Mavenï¼Œå¯ä»¥åœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.7.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¤ºä¾‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Jedis</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Pipeline</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Response</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisBatchExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿æ¥åˆ° Redis æœåŠ¡å™¨</span>
        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºä¸€ä¸ªç®¡é“</span>
        <span class="token class-name">Pipeline</span> pipeline <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">pipelined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å‘ç®¡é“ä¸­æ·»åŠ å‘½ä»¤</span>
        pipeline<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;key1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pipeline<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pipeline<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;key3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// æ‰§è¡Œç®¡é“ä¸­çš„å‘½ä»¤</span>
        pipeline<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è·å–æ‰§è¡Œç»“æœ</span>
        <span class="token class-name">String</span> value1 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;key1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> value2 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> value3 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;key3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è¾“å‡ºç»“æœ</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key1: &quot;</span> <span class="token operator">+</span> value1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key2: &quot;</span> <span class="token operator">+</span> value2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key3: &quot;</span> <span class="token operator">+</span> value3<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å…³é—­è¿æ¥</span>
        jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rdb-forkå­è¿›ç¨‹å»å†™æ—¥å¿—çš„æ—¶å€™-å¦‚æœå®•æœºäº†æ˜¯ä¸æ˜¯æœ‰æ•°æ®å°±ä¸¢å¤±äº†-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#rdb-forkå­è¿›ç¨‹å»å†™æ—¥å¿—çš„æ—¶å€™-å¦‚æœå®•æœºäº†æ˜¯ä¸æ˜¯æœ‰æ•°æ®å°±ä¸¢å¤±äº†-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> RDB forkå­è¿›ç¨‹å»å†™æ—¥å¿—çš„æ—¶å€™ï¼Œå¦‚æœå®•æœºäº†æ˜¯ä¸æ˜¯æœ‰æ•°æ®å°±ä¸¢å¤±äº†ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>æ˜¯çš„ï¼Œå½“Redisä½¿ç”¨RDBæŒä¹…åŒ–ç­–ç•¥æ—¶ï¼Œå¦‚æœRedisæœåŠ¡åœ¨RDBè¿›ç¨‹forkå‡ºå­è¿›ç¨‹å†™RDBæ–‡ä»¶çš„æ—¶å€™å®•æœºï¼Œé‚£ä¹ˆæ­¤æ—¶è¿˜æ²¡æœ‰å†™åˆ°RDBæ–‡ä»¶çš„æ•°æ®å°†ä¼šä¸¢å¤±ã€‚</p><p>Redis RDBçš„å·¥ä½œåŸç†æ˜¯ï¼š</p><ol><li>Redisä¸»è¿›ç¨‹forkå‡ºä¸€ä¸ªå­è¿›ç¨‹</li><li>å­è¿›ç¨‹è´Ÿè´£å°†æ•°æ®åº“å¿«ç…§å†™å…¥åˆ°ç¡¬ç›˜ä¸Šçš„RDBæ–‡ä»¶ä¸­</li><li>å¦‚æœåœ¨æ­¤æœŸé—´Redisä¸»è¿›ç¨‹è¢«killï¼Œé‚£ä¹ˆæ­£åœ¨è¢«å­è¿›ç¨‹å†™å…¥RDBæ–‡ä»¶çš„é‚£éƒ¨åˆ†æ•°æ®å°†ä¸¢å¤±</li><li>RDBæ–‡ä»¶å†™å…¥å®Œæˆåï¼Œå­è¿›ç¨‹é€€å‡ºï¼ŒRedisä¸»è¿›ç¨‹ç»§ç»­æœåŠ¡å®¢æˆ·ç«¯è¯·æ±‚</li></ol><p>æ‰€ä»¥ï¼ŒRDBæŒä¹…åŒ–æœ€å¤§çš„é—®é¢˜å°±æ˜¯å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œè™½ç„¶æ¦‚ç‡å¾ˆå°ï¼Œä½†æ•°æ®ä¾ç„¶å­˜åœ¨ä¸€å®šé£é™©ã€‚</p><h3 id="redisæœåŠ¡å™¨æŒ‚äº†å-redisç¼“å­˜é—®é¢˜è€ƒè™‘è¿‡å—-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#redisæœåŠ¡å™¨æŒ‚äº†å-redisç¼“å­˜é—®é¢˜è€ƒè™‘è¿‡å—-2023-å¿«æ‰‹" aria-hidden="true">#</a> redisæœåŠ¡å™¨æŒ‚äº†åï¼Œredisç¼“å­˜é—®é¢˜è€ƒè™‘è¿‡å—ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>ä»¥ä¸‹æ˜¯ä¸€äº›éœ€è¦è€ƒè™‘çš„å…³é”®ç‚¹ï¼š</p><ol><li><strong>æ•°æ®ä¸¢å¤±</strong>ï¼šå¦‚æœä½ æ²¡æœ‰ä¸ºRedisè®¾ç½®æŒä¹…åŒ–ç­–ç•¥ï¼ˆå¦‚RDBæˆ–AOFï¼‰ï¼Œé‚£ä¹ˆåœ¨Rediså®•æœºåé‡å¯æ—¶ï¼Œå¯èƒ½ä¼šä¸¢å¤±æ•°æ®ã€‚</li><li><strong>é«˜å¯ç”¨æ€§</strong>ï¼šå¯ä»¥ä½¿ç”¨Redis Sentinelæˆ–è€…Redis Clusteræ¥æé«˜Redisçš„é«˜å¯ç”¨æ€§ï¼Œè¿™æ ·å³ä½¿æŸä¸ªRediså®ä¾‹å®•æœºï¼Œç³»ç»Ÿä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œã€‚</li><li><strong>åº”ç”¨ç¨‹åºå¤„ç†</strong>ï¼šåº”ç”¨ç¨‹åºéœ€è¦èƒ½å¤Ÿå¤„ç†Rediså®•æœºçš„æƒ…å†µã€‚è¿™å¯èƒ½åŒ…æ‹¬é‡æ–°è¿æ¥å°è¯•ã€å›é€€åˆ°å…¶ä»–ç¼“å­˜æœºåˆ¶æˆ–ç›´æ¥ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®ã€‚</li><li><strong>ç›‘æ§ä¸æŠ¥è­¦</strong>ï¼šé€šè¿‡ç›‘æ§å·¥å…·å®æ—¶äº†è§£Redisçš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶åœ¨å‡ºç°é—®é¢˜æ—¶è¿…é€Ÿå‘å‡ºæŠ¥è­¦ï¼Œä»¥ä¾¿åŠæ—¶å¤„ç†ã€‚</li><li><strong>å¤‡ä»½ä¸æ¢å¤</strong>ï¼šå®šæœŸå¤‡ä»½Redisæ•°æ®ï¼Œå¹¶ç¡®ä¿åœ¨å‡ºç°é—®é¢˜æ—¶å¯ä»¥å¿«é€Ÿæ¢å¤ã€‚</li></ol><h3 id="redisåˆ‡ç‰‡é›†ç¾¤ä¸­-æ•°æ®é‡å¤šäº†-åŠ å®ä¾‹è¿˜æ˜¯åŠ å†…å­˜-ä¸ºä»€ä¹ˆ-åŠ å®ä¾‹è¦æ³¨æ„ä»€ä¹ˆé—®é¢˜-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#redisåˆ‡ç‰‡é›†ç¾¤ä¸­-æ•°æ®é‡å¤šäº†-åŠ å®ä¾‹è¿˜æ˜¯åŠ å†…å­˜-ä¸ºä»€ä¹ˆ-åŠ å®ä¾‹è¦æ³¨æ„ä»€ä¹ˆé—®é¢˜-2023-å¾—ç‰©" aria-hidden="true">#</a> Redisåˆ‡ç‰‡é›†ç¾¤ä¸­ï¼Œæ•°æ®é‡å¤šäº†ï¼ŒåŠ å®ä¾‹è¿˜æ˜¯åŠ å†…å­˜ï¼Œä¸ºä»€ä¹ˆï¼ŸåŠ å®ä¾‹è¦æ³¨æ„ä»€ä¹ˆé—®é¢˜ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>åŠ å®ä¾‹ï¼ˆæ°´å¹³æ‰©å±•ï¼‰</p><ol><li>ä¼˜ç‚¹ï¼š <ul><li><strong>æ›´å¥½çš„åˆ†å¸ƒè´Ÿè½½</strong>ï¼šæ›´å¤šçš„å®ä¾‹æ„å‘³ç€æ¯ä¸ªå®ä¾‹å¤„ç†çš„è¯·æ±‚æ›´å°‘ã€‚</li><li><strong>æ›´é«˜çš„å¯ç”¨æ€§</strong>ï¼šä¸€ä¸ªå®ä¾‹å‡ºé—®é¢˜ä¸ä¼šå½±å“å…¶ä»–å®ä¾‹ã€‚</li><li><strong>æ›´æ˜“äºç®¡ç†å¤§æ•°æ®é‡</strong>ï¼šé€šè¿‡å¢åŠ å®ä¾‹æ•°ï¼Œä½ å¯ä»¥åœ¨å¤šä¸ªç¡¬ä»¶ä¸Šåˆ†å¸ƒæ•°æ®å’Œè´Ÿè½½ã€‚</li></ul></li><li>ç¼ºç‚¹ï¼š <ul><li><strong>å¤æ‚æ€§å¢åŠ </strong>ï¼šä½ éœ€è¦ç®¡ç†æ›´å¤šçš„å®ä¾‹å’Œå¯èƒ½æ›´å¤æ‚çš„æ•°æ®è·¯ç”±ã€‚</li><li><strong>æˆæœ¬</strong>ï¼šéœ€è¦æ›´å¤šçš„ç¡¬ä»¶å’Œç»´æŠ¤ã€‚</li></ul></li></ol><p>åŠ å†…å­˜ï¼ˆå‚ç›´æ‰©å±•ï¼‰</p><ol><li>ä¼˜ç‚¹ï¼š <ul><li><strong>ç®€å•</strong>ï¼šä½ ä¸éœ€è¦æ”¹å˜ä»£ç æˆ–è€…é‡æ–°é…ç½®ä½ çš„åº”ç”¨ã€‚</li><li><strong>ä½å»¶è¿Ÿ</strong>ï¼šå•ä¸ªå®ä¾‹é€šå¸¸æ¯”å¤šå®ä¾‹åœºæ™¯æœ‰æ›´ä½çš„ç½‘ç»œå»¶è¿Ÿã€‚</li></ul></li><li>ç¼ºç‚¹ï¼š <ul><li><strong>æˆæœ¬é«˜</strong>ï¼šå†…å­˜é€šå¸¸æ¯”å…¶ä»–ç¡¬ä»¶æ›´è´µã€‚</li><li><strong>å¯ç”¨æ€§ä¸‹é™</strong>ï¼šå¦‚æœè¿™ä¸ªå®ä¾‹å‡ºç°é—®é¢˜ï¼Œå¯èƒ½ä¼šå½±å“æ›´å¤šçš„æ•°æ®å’ŒæœåŠ¡ã€‚</li><li><strong>æ‰©å±•æ€§é™åˆ¶</strong>ï¼šå•ä¸ªå®ä¾‹æ€»ä¼šæœ‰å†…å­˜å’Œè®¡ç®—èƒ½åŠ›çš„ä¸Šé™ã€‚</li></ul></li></ol><p>ç»¼åˆè€ƒè™‘</p><ul><li>å¦‚æœä½ å…³å¿ƒ<strong>é«˜å¯ç”¨æ€§ã€åˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡</strong>ï¼Œå¹¶ä¸”éœ€è¦<strong>å¤§è§„æ¨¡æ‰©å±•</strong>ï¼Œé‚£ä¹ˆå¢åŠ å®ä¾‹é€šå¸¸æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</li><li>å¦‚æœä½ çš„åº”ç”¨æ˜¯<strong>å†…å­˜å¯†é›†å‹</strong>è€Œä¸æ˜¯è®¡ç®—å¯†é›†å‹ï¼Œå¹¶ä¸”ä½ æƒ³è¦<strong>æœ€å°åŒ–å»¶è¿Ÿ</strong>ï¼Œé‚£ä¹ˆåŠ å†…å­˜å¯èƒ½æ˜¯æ›´åˆé€‚çš„ã€‚</li><li>åœ¨é€‰æ‹©ä¹‹å‰ï¼Œä¸€å®šè¦<strong>åšæ€§èƒ½å’Œæˆæœ¬çš„è¯„ä¼°</strong>ï¼Œä»¥ä¾¿æ‰¾åˆ°æœ€é€‚åˆä½ éœ€æ±‚çš„æ–¹æ¡ˆã€‚</li><li>æ³¨æ„ä¹Ÿå¯ä»¥<strong>ä¸¤è€…ç»“åˆ</strong>ï¼Œæ—¢å¢åŠ å®ä¾‹ä¹Ÿå¢åŠ æ¯ä¸ªå®ä¾‹çš„å†…å­˜ï¼Œå…·ä½“å–å†³äºä½ çš„éœ€æ±‚å’Œé¢„ç®—ã€‚</li></ul><p>åŠ å®ä¾‹éœ€è¦æ³¨æ„é—®é¢˜ï¼š</p><ol><li>æ•°æ®è¿ç§»ä¸é‡å¹³è¡¡ <ol><li><strong>è¿ç§»è®¡åˆ’</strong>: åœ¨æ·»åŠ æ–°å®ä¾‹åï¼Œç°æœ‰çš„æ•°æ®éœ€è¦è¢«é‡æ–°å¹³è¡¡åˆ°æ–°çš„å®ä¾‹ä¸Šã€‚è¿™ä¸€è¿‡ç¨‹åº”è¯¥äº‹å…ˆè§„åˆ’å¥½ï¼Œä»¥æœ€å°åŒ–å¯¹ä¸šåŠ¡çš„å½±å“ã€‚</li><li><strong>æ•°æ®ä¸€è‡´æ€§</strong>: åœ¨æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­è¦ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±æˆ–è€…é‡å¤ã€‚</li></ol></li><li>èµ„æºå’Œæ€§èƒ½ <ol><li><strong>ç¡¬ä»¶è§„æ ¼</strong>: æ–°åŠ å…¥çš„å®ä¾‹åº”å…·æœ‰ä¸ç°æœ‰å®ä¾‹ç›¸ä¼¼çš„ç¡¬ä»¶è§„æ ¼ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰ï¼Œä»¥ç¡®ä¿æ€§èƒ½çš„ä¸€è‡´æ€§ã€‚</li><li><strong>ç½‘ç»œå»¶è¿Ÿ</strong>: æ–°å®ä¾‹åº”éƒ¨ç½²åœ¨ä¸ç°æœ‰å®ä¾‹ç½‘ç»œå»¶è¿Ÿè¾ƒä½çš„ä½ç½®ï¼Œä»¥é¿å…æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</li></ol></li><li>å¯ç”¨æ€§ä¸å®¹é”™ <ol><li><strong>ä¸»ä»é…ç½®</strong>: å¦‚æœä½¿ç”¨ä¸»ä»é…ç½®ï¼Œç¡®ä¿æ–°å®ä¾‹ä¹Ÿæœ‰ç›¸åº”çš„ä»å®ä¾‹ï¼Œä»¥æä¾›é«˜å¯ç”¨æ€§ã€‚</li><li><strong>æ•°æ®å¤‡ä»½</strong>: åœ¨æ·»åŠ æ–°å®ä¾‹ä¹‹å‰å’Œä¹‹åéƒ½åº”æ‰§è¡Œæ•°æ®å¤‡ä»½æ“ä½œã€‚</li></ol></li><li>é›†ç¾¤é…ç½®å’Œå…ƒæ•°æ® <ol><li><strong>æ›´æ–°é…ç½®</strong>: é›†ç¾¤çš„é…ç½®ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå“ªäº›å®ä¾‹è´Ÿè´£å“ªäº›é”®çš„èŒƒå›´ç­‰ï¼‰éœ€è¦æ›´æ–°ã€‚</li><li><strong>å®¢æˆ·ç«¯æ›´æ–°</strong>: å¦‚æœå®¢æˆ·ç«¯ä»£ç ä¸­ç¡¬ç¼–ç äº†é›†ç¾¤ä¿¡æ¯ï¼Œé‚£ä¹ˆæ·»åŠ æ–°å®ä¾‹åï¼Œå®¢æˆ·ç«¯å¯èƒ½éœ€è¦æ›´æ–°ã€‚</li></ol></li><li>ç›‘æ§ä¸å‘Šè­¦ <ol><li><strong>æ€§èƒ½ç›‘æ§</strong>: åœ¨æ–°å®ä¾‹æ·»åŠ ä¹‹åï¼Œåº”å¢åŠ ç›¸åº”çš„ç›‘æ§ï¼Œä»¥è¿½è¸ªå…¶æ€§èƒ½å’Œå¥åº·çŠ¶å†µã€‚</li><li><strong>å‘Šè­¦è®¾ç½®</strong>: åº”è¯¥ä¸ºæ–°å®ä¾‹è®¾ç½®ç›¸åº”çš„å‘Šè­¦æ¡ä»¶å’Œé˜ˆå€¼ã€‚</li></ol></li><li>æµ‹è¯•ä¸éªŒè¯ <ol><li><strong>åŠŸèƒ½æµ‹è¯•</strong>: åœ¨æ­£å¼æŠ•å…¥ä½¿ç”¨å‰ï¼Œè¦åœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯æ–°å®ä¾‹çš„åŠŸèƒ½å’Œæ€§èƒ½ã€‚</li><li><strong>å›æ»šè®¡åˆ’</strong>: å¦‚æœæ–°å®ä¾‹å‡ºç°é—®é¢˜ï¼Œåº”å‡†å¤‡å¥½ç›¸åº”çš„å›æ»šæ–¹æ¡ˆã€‚</li></ol></li></ol><h3 id="redisçš„ä¸»åº“å´©æºƒäº†ä¼šæ€ä¹ˆæ ·-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#redisçš„ä¸»åº“å´©æºƒäº†ä¼šæ€ä¹ˆæ ·-2023-å¾—ç‰©" aria-hidden="true">#</a> Redisçš„ä¸»åº“å´©æºƒäº†ä¼šæ€ä¹ˆæ ·ï¼ˆ2023 å¾—ç‰©ï¼‰</h3><ol><li><strong>æ•°æ®å¯ç”¨æ€§</strong>ï¼šä¸»åº“å´©æºƒä¼šå¯¼è‡´æ•°æ®ä¸å¯ç”¨ï¼Œç›´åˆ°ä¸»åº“æ¢å¤æˆ–è€…æ‰‹åŠ¨åˆ‡æ¢åˆ°ä¸€ä¸ªå¤‡åº“ï¼ˆSlaveï¼‰ã€‚</li><li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šå¦‚æœä¸»åº“åœ¨å´©æºƒå‰æœ‰å°šæœªåŒæ­¥åˆ°å¤‡åº“çš„å†™æ“ä½œï¼Œè¿™äº›æ•°æ®å¯èƒ½ä¼šä¸¢å¤±ã€‚</li><li><strong>æ€§èƒ½</strong>ï¼šå¤‡åº“é€šå¸¸ç”¨äºè¯»æ“ä½œä»¥å‡è½»ä¸»åº“çš„å‹åŠ›ã€‚ä¸»åº“å´©æºƒå¯èƒ½å¯¼è‡´è¯»æ“ä½œæ€§èƒ½ä¸‹é™ï¼Œå°¤å…¶æ˜¯åœ¨é«˜è¯»å–è´Ÿè½½çš„ç³»ç»Ÿä¸­ã€‚</li></ol><p>è§£å†³ï¼š</p><ol><li><strong>ä¸»ä»åˆ‡æ¢ï¼ˆFailoverï¼‰</strong>ï¼šæ‰‹åŠ¨æˆ–è‡ªåŠ¨å°†ä¸€ä¸ªå¤‡åº“æå‡ä¸ºæ–°çš„ä¸»åº“ã€‚</li><li><strong>å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰</strong>ï¼šRedis Sentinel å¯ä»¥è‡ªåŠ¨æ£€æµ‹ä¸»åº“å´©æºƒï¼Œå¹¶è‡ªåŠ¨é€‰ä¸¾æ–°çš„ä¸»åº“ã€‚</li><li><strong>é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰</strong>ï¼šåœ¨Redisé›†ç¾¤æ¨¡å¼ä¸­ï¼Œæ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªä¸»åº“ä¸­ã€‚ä¸€ä¸ªä¸»åº“çš„å´©æºƒå¯èƒ½åªå½±å“åˆ°è¯¥ä¸»åº“è´Ÿè´£çš„æ•°æ®åˆ†ç‰‡ã€‚</li><li><strong>æŒä¹…åŒ–</strong>ï¼šé€šè¿‡åˆé€‚çš„æŒä¹…åŒ–ç­–ç•¥ï¼ˆå¦‚ RDB å¿«ç…§æˆ– AOF æ—¥å¿—æ–‡ä»¶ï¼‰æ¥æœ€å°åŒ–æ•°æ®ä¸¢å¤±ã€‚</li><li><strong>ç›‘æ§å’ŒæŠ¥è­¦</strong>ï¼šä½¿ç”¨å·¥å…·å¦‚ Prometheusã€Grafana æˆ–å…¶ä»–ç›‘æ§å·¥å…·æ¥åŠæ—¶å‘ç°é—®é¢˜ã€‚</li><li><strong>åº”ç”¨å±‚é‡è¯•å’Œç†”æ–­æœºåˆ¶</strong>ï¼šåº”ç”¨ä»£ç å¯ä»¥è®¾è®¡æˆåœ¨ä¸»åº“å´©æºƒæ—¶å°è¯•é‡æ–°è¿æ¥æˆ–è€…è·¯ç”±åˆ°å¤‡åº“ã€‚</li><li><strong>è´Ÿè½½å‡è¡¡å™¨</strong>ï¼šåœ¨å¤šä¸»æˆ–ä¸»-å¤šä»æ¶æ„ä¸­ï¼Œè´Ÿè½½å‡è¡¡å™¨å¯ä»¥å¸®åŠ©é‡æ–°è·¯ç”±æµé‡ã€‚</li><li><strong>å¤‡ä»½å’Œæ¢å¤</strong>ï¼šå®šæœŸå¤‡ä»½ Redis æ•°æ®ï¼Œå¹¶åœ¨å¿…è¦æ—¶è¿›è¡Œæ¢å¤ã€‚</li></ol><h3 id="redisæ•°æ®æ›´æ–°æˆåŠŸ-mysqlæ›´æ–°å¤±è´¥æ€ä¹ˆåŠ-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#redisæ•°æ®æ›´æ–°æˆåŠŸ-mysqlæ›´æ–°å¤±è´¥æ€ä¹ˆåŠ-2023-ç”¨å‹" aria-hidden="true">#</a> Redisæ•°æ®æ›´æ–°æˆåŠŸï¼ŒMySQLæ›´æ–°å¤±è´¥æ€ä¹ˆåŠï¼Ÿï¼ˆ2023 ç”¨å‹ï¼‰</h3><p><strong>äº‹åŠ¡</strong>ï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ”¯æŒäº‹åŠ¡çš„MySQLç‰ˆæœ¬ï¼ˆä¾‹å¦‚InnoDBï¼‰ï¼Œå¯ä»¥å°è¯•å…ˆåœ¨MySQLä¸­å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿›è¡Œæ•°æ®æ›´æ–°ï¼Œç„¶åæ›´æ–°Redisã€‚å¦‚æœRedisæ›´æ–°å¤±è´¥ï¼Œå¯ä»¥å›æ»šMySQLçš„äº‹åŠ¡ï¼Œç¡®ä¿ä¸¤è€…ä¿æŒä¸€è‡´ã€‚</p><p><strong>è¡¥å¿ç­–ç•¥</strong>ï¼šå¦‚æœRedisæ›´æ–°æˆåŠŸï¼Œè€ŒMySQLæ›´æ–°å¤±è´¥ï¼Œå¯ä»¥è€ƒè™‘å†æ¬¡å°è¯•æ›´æ–°MySQLã€‚å¦‚æœå¤šæ¬¡å°è¯•åMySQLä»ç„¶å¤±è´¥ï¼Œåˆ™å¯ä»¥è®°å½•è¿™ä¸ªå¤±è´¥äº‹ä»¶ï¼Œä»¥ä¾¿ç¨åè¿›è¡Œäººå·¥å¹²é¢„æˆ–é€šè¿‡å…¶ä»–è‡ªåŠ¨åŒ–å·¥å…·è¿›è¡Œä¿®å¤ã€‚</p><p><strong>åŒå†™ä¸€è‡´æ€§ç­–ç•¥</strong>ï¼šä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æˆ–æ—¥å¿—ç³»ç»Ÿï¼Œä¾‹å¦‚Kafkaï¼Œæ¥è®°å½•éœ€è¦åœ¨ä¸¤ä¸ªç³»ç»Ÿä¸­è¿›è¡Œçš„æ›´æ”¹ã€‚ç„¶åï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…æˆ–å·¥ä½œè¿›ç¨‹ä»é˜Ÿåˆ—ä¸­è¯»å–æ›´æ”¹ï¼Œå¹¶ç¡®ä¿å®ƒä»¬åœ¨ä¸¤ä¸ªç³»ç»Ÿä¸­éƒ½è¢«åº”ç”¨ã€‚</p><p><strong>ç¼“å­˜å¤±æ•ˆç­–ç•¥</strong>ï¼šå½“Redisæ•°æ®æ›´æ–°æˆåŠŸè€ŒMySQLæ›´æ–°å¤±è´¥æ—¶ï¼Œå¯ä»¥è®¾ç½®Redisçš„è¿‡æœŸæ—¶é—´è¾ƒçŸ­ï¼Œä½¿å¾—åœ¨æ•°æ®è¿‡æœŸåä»æ•°æ®åº“ä¸­è¯»å–æœ€æ–°çš„å€¼å¹¶å›å¡«åˆ°ç¼“å­˜ä¸­ã€‚è¿™æ ·ï¼Œåœ¨MySQLæ›´æ–°å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œåç»­çš„è¯»è¯·æ±‚ä»å¯ä»¥ä»æ•°æ®åº“è·å–æœ€æ–°å€¼ã€‚</p><h3 id="redisä¿å­˜æ•°æ®æœ‰ä»€ä¹ˆå®‰å…¨æ€§é—®é¢˜-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#redisä¿å­˜æ•°æ®æœ‰ä»€ä¹ˆå®‰å…¨æ€§é—®é¢˜-2023-ç”¨å‹" aria-hidden="true">#</a> Redisä¿å­˜æ•°æ®æœ‰ä»€ä¹ˆå®‰å…¨æ€§é—®é¢˜ï¼Ÿï¼ˆ2023 ç”¨å‹ï¼‰</h3><p>å­˜å‚¨é—®é¢˜ï¼š</p><ol><li><strong>æ˜æ–‡ä¼ è¾“</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒRedis æ•°æ®åœ¨ç½‘ç»œä¸­çš„ä¼ è¾“æ˜¯ä¸åŠ å¯†çš„ã€‚</li><li><strong>æ— èº«ä»½éªŒè¯</strong>ï¼šé»˜è®¤è®¾ç½®ä¸‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¿æ¥åˆ° Redis æœåŠ¡å™¨å¹¶æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ã€‚</li><li><strong>æŒä¹…åŒ–é—®é¢˜</strong>ï¼šRedis æ”¯æŒå¤šç§æŒä¹…åŒ–æœºåˆ¶ï¼Œä½†å¦‚æœé…ç½®ä¸å½“ï¼Œå¯èƒ½å¯¼è‡´æ•æ„Ÿæ•°æ®æ³„æ¼ã€‚</li><li><strong>ä»£ç æ³¨å…¥</strong>ï¼šè™½ç„¶é£é™©è¾ƒä½ï¼Œä½†ç”±äº Redis æ”¯æŒå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¸å½“çš„ä½¿ç”¨è¿˜æ˜¯æœ‰æ³¨å…¥æ”»å‡»çš„é£é™©ã€‚</li><li><strong>é…ç½®é£é™©</strong>ï¼šä¸å½“çš„é…ç½®ï¼ˆæ¯”å¦‚ç»‘å®šæ‰€æœ‰IPåœ°å€æˆ–æ²¡æœ‰è®¾ç½®å¯†ç ï¼‰å¯èƒ½ä¼šå¯¼è‡´å®‰å…¨é—®é¢˜ã€‚</li></ol><p>ä¿å­˜æ–¹å¼é—®é¢˜ï¼š</p><ol><li>RDBå¿«ç…§ï¼šRDBæ˜¯ä¸€ç§å®šæ—¶ä¿å­˜ç­–ç•¥ï¼Œå®ƒä¼šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…åˆ›å»ºæ•°æ®åº“çš„å¿«ç…§ã€‚è¿™ç§æ–¹å¼å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚å¦‚æœåœ¨å¿«ç…§åˆ›å»ºè¿‡ç¨‹ä¸­å‘ç”Ÿç³»ç»Ÿå´©æºƒæˆ–ç¡¬ä»¶æ•…éšœï¼Œé‚£ä¹ˆRediså°†æ— æ³•æ¢å¤åˆ°å‘ç”Ÿæ•…éšœä¹‹å‰çš„é‚£ä¸ªçŠ¶æ€ï¼Œå› ä¸ºåœ¨å¿«ç…§åˆ›å»ºååˆ°æ•…éšœå‘ç”Ÿçš„è¿™æ®µæ—¶é—´å†…çš„æ‰€æœ‰å†™æ“ä½œéƒ½æ²¡æœ‰è¢«è®°å½•ä¸‹æ¥ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥è®¾ç½®å¤šä¸ªRDBå¿«ç…§ï¼Œå¹¶åœ¨ä¸åŒçš„æ—¶é—´é—´éš”ä¸‹æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚</li><li>AOFæ—¥å¿—ï¼šAOFæ—¥å¿—æ˜¯Rediså°†æ¯æ¬¡å†™æ“ä½œéƒ½è®°å½•åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå½“éœ€è¦æ¢å¤æ•°æ®æ—¶ï¼Œåªéœ€è¯»å–è¯¥æ–‡ä»¶å¹¶å°†å†…å®¹é‡æ–°æ‰§è¡Œä¸€éå³å¯ã€‚ç„¶è€Œï¼ŒAOFæ—¥å¿—å¯èƒ½ä¼šå˜å¾—éå¸¸å¤§ï¼Œè¿™å¯èƒ½å¯¼è‡´ç£ç›˜ç©ºé—´ä¸è¶³çš„é—®é¢˜ã€‚æ­¤å¤–ï¼Œå¦‚æœAOFæ—¥å¿—æ–‡ä»¶æŸåæˆ–è€…ä¸¢å¤±ï¼Œé‚£ä¹ˆRediså°†æ— æ³•æ¢å¤æ•°æ®ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œä½ åº”è¯¥å®šæœŸå¯¹AOFæ—¥å¿—è¿›è¡Œå‹ç¼©ï¼Œä»¥å‡å°å…¶å¤§å°;åŒæ—¶ï¼Œç¡®ä¿åœ¨å¤šä¸ªåœ°æ–¹å­˜å‚¨å¤‡ä»½AOFæ—¥å¿—æ–‡ä»¶ï¼Œä»¥é˜²ä¸‡ä¸€ã€‚</li></ol><h3 id="åœ¨åˆ†å¸ƒå¼é”ä¸­-redisä¸­aç”³è¯·é”1min-30s-bèƒ½è·å–è¿™ä¸ªé”å—-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#åœ¨åˆ†å¸ƒå¼é”ä¸­-redisä¸­aç”³è¯·é”1min-30s-bèƒ½è·å–è¿™ä¸ªé”å—-2023-å¾—ç‰©" aria-hidden="true">#</a> åœ¨åˆ†å¸ƒå¼é”ä¸­ï¼ŒRedisä¸­Aç”³è¯·é”1minï¼Œ30s Bèƒ½è·å–è¿™ä¸ªé”å—ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>åœ¨åˆ†å¸ƒå¼é”ä¸­ï¼Œå¦‚æœAå·²ç»æˆåŠŸç”³è¯·äº†ä¸€ä¸ªé”å¹¶è®¾ç½®äº†1åˆ†é’Ÿï¼ˆ60ç§’ï¼‰çš„è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆåœ¨è¿™60ç§’å†…ï¼ŒBæ˜¯ä¸èƒ½è·å–åˆ°è¿™ä¸ªé”çš„ï¼Œé™¤éAä¸»åŠ¨é‡Šæ”¾äº†è¿™ä¸ªé”æˆ–è€…é”å› æŸç§åŸå› æå‰è¿‡æœŸäº†ã€‚</p><p>å¦‚æœAæŒæœ‰çš„é”åœ¨1åˆ†é’Ÿå†…æ²¡æœ‰è¢«é‡Šæ”¾æˆ–è€…è¿‡æœŸï¼Œé‚£ä¹ˆBå¿…é¡»ç­‰åˆ°è¿™1åˆ†é’Ÿè¿‡åæ‰æœ‰å¯èƒ½è·å–åˆ°è¿™ä¸ªé”ã€‚</p><h3 id="redissonåº•å±‚æ˜¯æ€ä¹ˆå®ç°çš„-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#redissonåº•å±‚æ˜¯æ€ä¹ˆå®ç°çš„-2023-å¿«æ‰‹" aria-hidden="true">#</a> redissonåº•å±‚æ˜¯æ€ä¹ˆå®ç°çš„ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>Redissonåº•å±‚çš„å®ç°åŸç†åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>è¿æ¥ç®¡ç†ï¼šRedissoné€šè¿‡è¿æ¥æ± ç®¡ç†ä¸RedisæœåŠ¡å™¨çš„è¿æ¥ï¼Œä½¿ç”¨NIOï¼ˆéé˜»å¡I/Oï¼‰æŠ€æœ¯è¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œæé«˜é€šä¿¡æ•ˆç‡å’Œååé‡ã€‚</li><li>åºåˆ—åŒ–ï¼šRedissoné€šè¿‡åºåˆ—åŒ–æŠ€æœ¯å°†Javaå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµè¿›è¡Œå­˜å‚¨å’Œä¼ è¾“ã€‚å¸¸ç”¨çš„åºåˆ—åŒ–æŠ€æœ¯åŒ…æ‹¬Javaå†…ç½®çš„åºåˆ—åŒ–ï¼ˆSerializableï¼‰å’Œå¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åºåˆ—åŒ–åº“ï¼Œå¦‚FastJsonã€Kryoç­‰ã€‚</li><li>å‘½ä»¤å°è£…ï¼šRedissonå°è£…äº†RedisæœåŠ¡å™¨çš„å„ç§å‘½ä»¤ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æ“ä½œã€å“ˆå¸Œè¡¨æ“ä½œã€åˆ—è¡¨æ“ä½œç­‰ï¼Œä»¥ä¾¿å¼€å‘è€…å¯ä»¥ç›´æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•è¿›è¡Œæ“ä½œã€‚</li><li>åˆ†å¸ƒå¼é”ï¼šRedissonå®ç°äº†åˆ†å¸ƒå¼é”çš„åŠŸèƒ½ï¼Œé€šè¿‡Luaè„šæœ¬åœ¨RedisæœåŠ¡å™¨ä¸Šæ‰§è¡ŒåŠ é”å’Œè§£é”çš„æ“ä½œï¼Œç¡®ä¿åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§å’Œå¹¶å‘æ§åˆ¶ã€‚</li><li>åˆ†å¸ƒå¼å¯¹è±¡ï¼šRedissonæä¾›äº†åˆ†å¸ƒå¼å¯¹è±¡çš„æ”¯æŒï¼Œå¦‚åˆ†å¸ƒå¼é›†åˆã€åˆ†å¸ƒå¼åˆ—è¡¨ã€åˆ†å¸ƒå¼æ˜ å°„ç­‰ã€‚å®ƒä»¬é€šè¿‡å°†æ•°æ®å­˜å‚¨åœ¨RedisæœåŠ¡å™¨ä¸Šï¼Œå®ç°äº†æ•°æ®çš„åˆ†å¸ƒå¼å…±äº«å’ŒååŒæ“ä½œã€‚</li></ol><h2 id="â™»ï¸-jvm" tabindex="-1"><a class="header-anchor" href="#â™»ï¸-jvm" aria-hidden="true">#</a> â™»ï¸ JVM</h2><h3 id="å †æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#å †æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„-2023-å¿«æ‰‹" aria-hidden="true">#</a> å †æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><ol><li><strong>å †çš„åˆ’åˆ†</strong>ï¼šåœ¨JVMä¸­ï¼Œå †è¢«åˆ’åˆ†ä¸ºå¹´è½»ä»£ï¼ˆYoung Generationï¼‰å’Œè€å¹´ä»£ï¼ˆOld Generationï¼‰ã€‚å¹´è½»ä»£åˆè¢«åˆ’åˆ†ä¸ºEdenåŒºå’Œä¸¤ä¸ªSurvivoråŒºï¼ˆS0å’ŒS1ï¼‰ã€‚æ–°åˆ›å»ºçš„å¯¹è±¡é¦–å…ˆåœ¨EdenåŒºåˆ›å»ºï¼Œå½“EdenåŒºæ»¡æ—¶ï¼Œä¼šè§¦å‘Minor GCè¿›è¡Œåƒåœ¾å›æ”¶ã€‚å­˜æ´»çš„å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°SurvivoråŒºï¼Œå½“SurvivoråŒºä¹Ÿæ»¡æ—¶ï¼Œå¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚å½“è€å¹´ä»£æ»¡äº†ï¼Œä¼šè§¦å‘Major GCæˆ–è€…Full GCã€‚</li><li><strong>åƒåœ¾å›æ”¶</strong>ï¼šJVMé€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ä»¥é‡Šæ”¾å†…å­˜ã€‚JVMçš„åƒåœ¾å›æ”¶ç®—æ³•åŒ…æ‹¬æ ‡è®°-æ¸…é™¤ã€å¤åˆ¶ã€æ ‡è®°-æ•´ç†ã€åˆ†ä»£æ”¶é›†ç­‰ã€‚</li><li><strong>å†…å­˜åˆ†é…</strong>ï¼šå½“åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼ŒJVMä¼šåœ¨å †ä¸­ä¸ºå…¶åˆ†é…å†…å­˜ã€‚JVMæœ‰ä¸€ä¸ªæŒ‡é’ˆå«åšTLABï¼ˆThread Local Allocation Bufferï¼‰ï¼Œç”¨äºåœ¨ç‰¹å®šçš„çº¿ç¨‹ä¸­åˆ†é…å¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥é¿å…çº¿ç¨‹ä¹‹é—´çš„ç«äº‰ã€‚å¦‚æœå¯¹è±¡å¾ˆå¤§ï¼Œå¯èƒ½ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…ã€‚</li><li><strong>å †å¤§å°è°ƒæ•´</strong>ï¼šJVMçš„å †å¤§å°å¯ä»¥åŠ¨æ€è°ƒæ•´ï¼Œä»¥é€‚åº”ç¨‹åºçš„éœ€æ±‚ã€‚å¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°è®¾ç½®æœ€å°å †å¤§å°ï¼ˆ-Xmsï¼‰å’Œæœ€å¤§å †å¤§å°ï¼ˆ-Xmxï¼‰ã€‚å¦‚æœç¨‹åºéœ€è¦æ›´å¤šå†…å­˜ï¼Œå †å¯ä»¥æ‰©å±•åˆ°æœ€å¤§å †å¤§å°ï¼›å¦‚æœç¨‹åºéœ€è¦çš„å†…å­˜å‡å°‘ï¼Œå †å¯ä»¥æ”¶ç¼©åˆ°æœ€å°å †å¤§å°ã€‚</li></ol><h3 id="è·¨ä»£å¼•ç”¨é—®é¢˜æ€ä¹ˆè§£å†³-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#è·¨ä»£å¼•ç”¨é—®é¢˜æ€ä¹ˆè§£å†³-2023-å¿«æ‰‹" aria-hidden="true">#</a> è·¨ä»£å¼•ç”¨é—®é¢˜æ€ä¹ˆè§£å†³ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p><strong>è·¨ä»£å¼•ç”¨é—®é¢˜æ˜¯æŒ‡åœ¨JVMå†…å­˜æ¨¡å‹ä¸­ï¼Œå¹´è½»ä»£çš„å¯¹è±¡å¼•ç”¨è€å¹´ä»£çš„å¯¹è±¡ï¼Œæˆ–è€…è€å¹´ä»£çš„å¯¹è±¡å¼•ç”¨å¹´è½»ä»£çš„å¯¹è±¡</strong>ã€‚è¿™åœ¨åƒåœ¾å›æ”¶æ—¶å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºåƒåœ¾å›æ”¶é€šå¸¸ä¼šé’ˆå¯¹å¹´è½»ä»£å’Œè€å¹´ä»£åˆ†åˆ«è¿›è¡Œã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJVMå¼•å…¥äº†ä¸€ä¸ªå«åš <strong>&quot;å¡è¡¨&quot;ï¼ˆCard Tableï¼‰</strong> çš„æ•°æ®ç»“æ„ã€‚å¡è¡¨çš„ä¸»è¦ä½œç”¨æ˜¯å¿«é€Ÿæ‰¾åˆ°è€å¹´ä»£ä¸­è¢«å¹´è½»ä»£å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ï¼Œä»è€Œåœ¨è¿›è¡ŒMinor GCæ—¶ï¼Œå‡å°‘å…¨å †æ‰«æçš„å¼€é”€ã€‚</p><blockquote><p>å¡è¡¨æ¦‚è§ˆï¼šå¡è¡¨æ˜¯Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸­åŠ é€ŸæŸ¥æ‰¾å¼•ç”¨çš„ä¸€ç§è¾…åŠ©æ•°æ®ç»“æ„ã€‚è¡¨ä¸­æ¯ä¸ªæ¡ç›®å¯¹åº”äºJavaå †çš„ä¸€å°éƒ¨åˆ†ï¼Œè¿™é‡Œæˆ‘ç§°ä¸ºå°å—ã€‚å½“è€å¹´ä»£ä¸­çš„ä¸€ä¸ªå¯¹è±¡å†™å…¥/æ›´æ–°å¯¹å¹´è½»ä»£ä¸­çš„ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œè¿™ä¸ªæ“ä½œä¼šé€šè¿‡ä¸€ç§å«åšå†™å±éšœçš„ä¸œè¥¿ã€‚å½“JVMçœ‹åˆ°è¿™äº›å†™å±éšœæ—¶ï¼Œå®ƒä¼šæ›´æ–°å¡ç‰‡è¡¨ä¸­çš„ç›¸åº”æ¡ç›®ã€‚</p><ul><li>å†™å±éšœï¼šåƒåœ¾æ”¶é›†å™¨ç”¨æ¥è·Ÿè¸ªå¯¹è±¡å¼•ç”¨æ›´æ”¹çš„ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€æ®µä»£ç ï¼ˆJVMå®ç°çš„ï¼‰ï¼Œæ¯å½“å¯¹è±¡å¼•ç”¨æ›´æ–°æ—¶å°±ä¼šè¿è¡Œã€‚å†™å±éšœç¡®ä¿åƒåœ¾æ”¶é›†å™¨å¯ä»¥è·Ÿè¸ªå †ä¸­çš„æ‰€æœ‰å¼•ç”¨ï¼Œå¹¶ç¡®å®šå“ªäº›å¯¹è±¡ä»åœ¨ä½¿ç”¨ï¼Œå“ªäº›æ²¡æœ‰ã€‚</li><li>å½“å†™å…¥å±éšœå‘ç°è¯­å¥<code>some_obj.field = other_obj;</code>å°†å¹´è½»æŒ‡é’ˆå­˜å‚¨åœ¨æ—§å¯¹è±¡ä¸­æ—¶ï¼Œå®ƒä¼šè¿™æ ·åšï¼š<code>card_table[(&amp;old_obj - start_of_heap) &gt;&gt; K] = 1;</code></li><li>å…¶ä¸­<code>&amp;old_obj</code>æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªå¹´è½»ä»£æŒ‡é’ˆçš„å¯¹è±¡çš„åœ°å€ï¼ˆå®ƒå·²ç»åœ¨å¯„å­˜å™¨ä¸­ï¼Œå› ä¸ºå®ƒåˆšåˆšè¢«ç¡®å®šå¼•ç”¨æ—§å¯¹è±¡ï¼‰ã€‚ åœ¨æ¬¡è¦GCæœŸé—´ï¼Œåƒåœ¾æ”¶é›†å™¨æŸ¥çœ‹å¡è¡¨ä»¥ç¡®å®šè¦æ‰«æå“ªäº›å †åŒºåŸŸä»¥æŸ¥æ‰¾å¹´è½»æŒ‡é’ˆã€‚ <ul><li>for i from 0 to (heap_size &gt;&gt; K):</li><li>if card_table[i]: scan heap[i &lt;&lt; K .. (i + 1) &lt;&lt; K] for young pointers <img src="`+l+'" alt="card-table" loading="lazy"></li></ul></li></ul></blockquote><p>å¡è¡¨å°†è€å¹´ä»£çš„å†…å­˜åˆ†ä¸ºå¤šä¸ªå°å—ï¼ˆé€šå¸¸ä¸º512å­—èŠ‚ï¼‰ï¼Œæ¯ä¸ªå°å—å¯¹åº”å¡è¡¨ä¸­çš„ä¸€é¡¹ï¼Œå½“è€å¹´ä»£ä¸­çš„æŸä¸ªå°å—å†…å­˜<strong>è¢«ä¿®æ”¹æ—¶</strong>ï¼ˆä¾‹å¦‚å¹´è½»ä»£çš„å¯¹è±¡å¼•ç”¨äº†è¯¥å°å—ä¸­çš„æŸä¸ªå¯¹è±¡ï¼‰ï¼Œå¯¹åº”çš„å¡è¡¨é¡¹å°±è¢«æ ‡è®°ä¸º <strong>&quot;è„ï¼ˆdirtyï¼‰&quot;</strong> ã€‚</p><p>åœ¨è¿›è¡ŒMinor GCï¼ˆæ¸…ç†å¹´è½»ä»£ï¼‰æ—¶ï¼ŒJVMåªéœ€è¦æ£€æŸ¥æ ‡è®°ä¸º&quot;è„&quot;çš„å¡è¡¨é¡¹å¯¹åº”çš„å†…å­˜å—ï¼Œæ‰¾å‡ºè¢«å¹´è½»ä»£å¯¹è±¡å¼•ç”¨çš„è€å¹´ä»£å¯¹è±¡ï¼Œè€Œæ— éœ€æ‰«ææ•´ä¸ªè€å¹´ä»£ã€‚è¿™æ ·å°±å¤§å¤§æé«˜äº†åƒåœ¾å›æ”¶çš„æ•ˆç‡ã€‚</p><p>è‡³äº<strong>è€å¹´ä»£çš„å¯¹è±¡å¼•ç”¨å¹´è½»ä»£çš„å¯¹è±¡ï¼Œè¿™åœ¨JVMçš„åˆ†ä»£å›æ”¶ç­–ç•¥ä¸­æ˜¯ä¸æ¨èçš„ï¼Œå› ä¸ºä¼šå¢åŠ åƒåœ¾å›æ”¶çš„å¤æ‚æ€§</strong>ã€‚å¦‚æœç¡®å®å­˜åœ¨è¿™ç§æƒ…å†µï¼Œä¸€èˆ¬éœ€è¦åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œéå†è€å¹´ä»£æ‰¾åˆ°æ‰€æœ‰å¼•ç”¨å¹´è½»ä»£çš„å¯¹è±¡ï¼Œç¡®ä¿ä¸ä¼šè¯¯åˆ ã€‚</p>',61),qs=n("p",null,"å‚è€ƒæ–‡çŒ®å¦‚ä¸‹ï¼š",-1),Es={href:"https://stackoverflow.com/questions/19154607/how-actually-card-table-and-writer-barrier-work",target:"_blank",rel:"noopener noreferrer"},js={href:"https://tschatzl.github.io/2022/02/15/card-table-card-size.html",target:"_blank",rel:"noopener noreferrer"},Is={href:"https://www.mo4tech.com/jvm-card-table.html",target:"_blank",rel:"noopener noreferrer"},Bs={href:"https://www.cnblogs.com/hongdada/p/12016020.html",target:"_blank",rel:"noopener noreferrer"},Os={href:"http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots.html",target:"_blank",rel:"noopener noreferrer"},Ns=t('<h3 id="å…ƒç©ºé—´è¿˜ä¼šå­˜æ”¾ä»€ä¹ˆä¸œè¥¿-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#å…ƒç©ºé—´è¿˜ä¼šå­˜æ”¾ä»€ä¹ˆä¸œè¥¿-2023-å½±çŸ³360" aria-hidden="true">#</a> å…ƒç©ºé—´è¿˜ä¼šå­˜æ”¾ä»€ä¹ˆä¸œè¥¿ï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><ol><li><strong>ç±»çš„å…ƒæ•°æ®</strong>ï¼šè¿™åŒ…æ‹¬ç±»çš„åå­—ã€æ–¹æ³•ã€å­—æ®µç­‰ä¿¡æ¯ã€‚</li><li><strong>å¸¸é‡æ± </strong>ï¼šåŒ…å«äº†ç±»çš„å­—é¢é‡ï¼ˆå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ï¼‰å’Œä»£ç ä¸­çš„ç¬¦å·å¼•ç”¨ã€‚</li><li><strong>ç±»åŠ è½½å™¨çš„æ•°æ®</strong>ï¼šJavaä¸­çš„æ¯ä¸ªç±»åŠ è½½å™¨ä¹Ÿéƒ½æœ‰ç›¸å…³çš„å…ƒæ•°æ®å­˜å‚¨åœ¨å…ƒç©ºé—´ä¸­ã€‚</li><li><strong>å³æ—¶ç¼–è¯‘å™¨çš„ä¼˜åŒ–æ•°æ®</strong>ï¼šå³æ—¶ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨å…ƒç©ºé—´ä¸­å­˜å‚¨ä¸€äº›æ•°æ®ä»¥æé«˜è¿è¡Œæ—¶çš„æ€§èƒ½ã€‚</li><li><strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong>ï¼šè¿™æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…å«äº†ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚</li></ol><h3 id="å¯¹äºstaticå˜é‡çš„ç†è§£-staticå˜é‡åˆ†é…å†…å­˜çš„æ—¶å€™å‘ç”Ÿåœ¨å“ªä¸ªç¯èŠ‚-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#å¯¹äºstaticå˜é‡çš„ç†è§£-staticå˜é‡åˆ†é…å†…å­˜çš„æ—¶å€™å‘ç”Ÿåœ¨å“ªä¸ªç¯èŠ‚-2023-å½±çŸ³360" aria-hidden="true">#</a> å¯¹äºstaticå˜é‡çš„ç†è§£ï¼Ÿstaticå˜é‡åˆ†é…å†…å­˜çš„æ—¶å€™å‘ç”Ÿåœ¨å“ªä¸ªç¯èŠ‚ï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œ<code>static</code>å…³é”®å­—ç”¨äºä¿®é¥°ç±»çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚å¯¹äºé™æ€å˜é‡ï¼ˆstatic variableï¼‰å’Œé™æ€æ–¹æ³•ï¼ˆstatic methodï¼‰ï¼Œå®ƒä»¬ä¸ä¾èµ–äºä»»ä½•å®ä¾‹ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åè¿›è¡Œè®¿é—®ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³äºé™æ€å˜é‡çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼š</p><ul><li>é™æ€å˜é‡æ˜¯ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„ï¼Œå³ä¸€ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªé™æ€å˜é‡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¿®æ”¹äº†ä¸€ä¸ªé™æ€å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ”¹å˜å¯¹å…¶ä»–æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯å¯è§çš„ã€‚</li><li>é™æ€å˜é‡å­˜åœ¨äºæ–¹æ³•åŒºï¼ˆJava 8ä¹‹å‰ï¼‰æˆ–å…ƒç©ºé—´ï¼ˆJava 8åŠä»¥åï¼‰ï¼Œè€Œä¸æ˜¯å †å†…å­˜ä¸­ã€‚</li><li>é™æ€å˜é‡åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½å­˜å‚¨ç©ºé—´ã€‚</li><li>é™æ€å˜é‡åœ¨ç±»åŠ è½½çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼Œåªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚</li></ul><p>å¯¹äºé™æ€å˜é‡åˆ†é…å†…å­˜ä»¥åŠåˆå§‹åŒ–çš„æ—¶é—´ï¼Œå®ƒä»¬å‘ç”Ÿåœ¨ç±»åŠ è½½çš„â€œåˆå§‹åŒ–â€é˜¶æ®µã€‚ç±»åŠ è½½çš„è¿‡ç¨‹ä¸»è¦åŒ…æ‹¬åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æå’Œåˆå§‹åŒ–äº”ä¸ªé˜¶æ®µï¼š</p><ol><li><strong>åŠ è½½</strong>ï¼šæŸ¥æ‰¾å¹¶åŠ è½½ç±»çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</li><li><strong>éªŒè¯</strong>ï¼šç¡®ä¿è¢«åŠ è½½çš„ç±»ç¬¦åˆJavaè™šæ‹Ÿæœºè§„èŒƒï¼Œæ²¡æœ‰å®‰å…¨é—®é¢˜ã€‚</li><li><strong>å‡†å¤‡</strong>ï¼šä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼Œå¯¹äºç±»å‹ä¸ºintçš„é™æ€å˜é‡ï¼Œå®ƒä¼šè¢«åˆå§‹åŒ–ä¸º0ã€‚</li><li><strong>è§£æ</strong>ï¼šæŠŠç±»ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚</li><li><strong>åˆå§‹åŒ–</strong>ï¼šä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆæ­£ç¡®çš„åˆå§‹å€¼ã€‚è¿™æ˜¯é™æ€å˜é‡çš„åˆå§‹å€¼è¢«èµ‹å€¼çš„åœ°æ–¹ã€‚</li></ol><p>å› æ­¤ï¼Œé™æ€å˜é‡åˆ†é…å†…å­˜å‘ç”Ÿåœ¨â€œå‡†å¤‡â€é˜¶æ®µï¼Œè€Œé™æ€å˜é‡çš„åˆå§‹åŒ–åˆ™å‘ç”Ÿåœ¨â€œåˆå§‹åŒ–â€é˜¶æ®µã€‚</p><h3 id="æ¯æ¬¡å›æ”¶éƒ½è¦ä»gc-rootå¼€å§‹å—-å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸ºgc-root-ç±»åŠ è½½å™¨å¯ä»¥ä½œä¸ºgc-rootå—-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#æ¯æ¬¡å›æ”¶éƒ½è¦ä»gc-rootå¼€å§‹å—-å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸ºgc-root-ç±»åŠ è½½å™¨å¯ä»¥ä½œä¸ºgc-rootå—-2023-å¿«æ‰‹" aria-hidden="true">#</a> æ¯æ¬¡å›æ”¶éƒ½è¦ä»GC ROOTå¼€å§‹å—ï¼Ÿå“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸ºGC rootï¼Ÿç±»åŠ è½½å™¨å¯ä»¥ä½œä¸ºGC rootå—ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>æ˜¯çš„ï¼Œæ¯æ¬¡åƒåœ¾å›æ”¶éƒ½ä¼šä»GC Rootså¼€å§‹ã€‚GC Rootsæ˜¯åƒåœ¾å›æ”¶ç®—æ³•å¼€å§‹å·¥ä½œçš„ä¸€ç»„å¿…è¦çš„&quot;æ ¹&quot;å¯¹è±¡ã€‚</p><p>Javaä¸­å¯ä»¥ä½œä¸ºGC Rootsçš„å¯¹è±¡åŒ…æ‹¬ï¼š</p><ol><li>åœ¨è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³ä¸€èˆ¬è¯´çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚</li></ol><p>åƒåœ¾å›æ”¶å™¨åœ¨å¯¹å †è¿›è¡Œå›æ”¶å‰ï¼Œä¼šå…ˆä»GC Rootså¼€å§‹å¯¹å †ä¸­çš„å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æã€‚åªæœ‰å½“å¯¹è±¡åœ¨GC Rootsåˆ°è¯¥å¯¹è±¡ä¹‹é—´æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾å¯è¾¾æ—¶ï¼ˆæ¢å¥è¯è¯´ï¼ŒGC Rootsåˆ°è¯¥å¯¹è±¡ä¸å¯è¾¾ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡æ‰ä¼šè¢«åˆ¤å®šä¸ºå¯å›æ”¶çš„åƒåœ¾å¯¹è±¡ã€‚</p><p>è¿™ç§é€šè¿‡GC Rootsè¿›è¡Œå¯è¾¾æ€§åˆ†æçš„æ–¹å¼ï¼Œä¿è¯äº†åªæœ‰çœŸæ­£ä¸å†ä½¿ç”¨çš„å¯¹è±¡ä¼šè¢«å›æ”¶ï¼Œä»è€Œé¿å…äº†é”™è¯¯åœ°å›æ”¶ä»åœ¨ä½¿ç”¨çš„å¯¹è±¡ã€‚</p><blockquote><p>ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰å¯ä»¥ä½œä¸ºåƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼ŒGCï¼‰çš„æ ¹ï¼ˆRootsï¼‰ã€‚åœ¨Javaä¸­ï¼ŒGC Roots æ˜¯åƒåœ¾æ”¶é›†å™¨ç”¨æ¥ç¡®å®šå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å®‰å…¨å›æ”¶çš„èµ·å§‹ç‚¹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡ä¸èƒ½ä»GC Rootsç›´æ¥æˆ–è€…é—´æ¥åœ°è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯å¯ä»¥è¢«å›æ”¶çš„ã€‚</p><p>ç±»åŠ è½½å™¨æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„GC Rootã€‚è¿™æ˜¯å› ä¸ºClasså¯¹è±¡é€šå¸¸å­˜å‚¨åœ¨æ°¸ä¹…ä»£ï¼ˆJava 8ä¹‹å‰ï¼‰æˆ–è€…å…ƒç©ºé—´ï¼ˆJava 8ä¹‹åï¼‰ï¼Œå¹¶ä¸”Classå¯¹è±¡åŒ…å«å¯¹å…¶ç±»åŠ è½½å™¨çš„å¼•ç”¨ï¼ŒåŒæ—¶è¿˜ä¼šå¼•ç”¨å®ƒåŠ è½½çš„å…¶ä»–ç±»ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨å®ä¾‹å¯ä»¥è¢«ç›´æ¥æˆ–è€…é—´æ¥è®¿é—®åˆ°ï¼Œåˆ™è¯¥ç±»åŠ è½½å™¨åŠ è½½çš„æ‰€æœ‰ç±»ä»¥åŠè¿™äº›ç±»å®ä¾‹åŒ–çš„å¯¹è±¡éƒ½ä¸èƒ½è¢«åƒåœ¾å›æ”¶ã€‚</p><p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„ç±»åŠ è½½å™¨å†…å­˜æ³„æ¼é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›ä½¿ç”¨äº†å¤šä¸ªç±»åŠ è½½å™¨çš„ç¯å¢ƒä¸­ï¼Œä¾‹å¦‚å„ç§Java EEå®¹å™¨ï¼ŒOSGiç­‰ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´OutOfMemoryErroré”™è¯¯ã€‚</p></blockquote><h3 id="åƒåœ¾å›æ”¶è¿‡ç¨‹å¦‚ä½•åˆ¤æ–­æ¯ä¸ªé˜¶æ®µå·²ç»å®Œæˆ-å¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µ-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾å›æ”¶è¿‡ç¨‹å¦‚ä½•åˆ¤æ–­æ¯ä¸ªé˜¶æ®µå·²ç»å®Œæˆ-å¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µ-2023-å¿«æ‰‹" aria-hidden="true">#</a> åƒåœ¾å›æ”¶è¿‡ç¨‹å¦‚ä½•åˆ¤æ–­æ¯ä¸ªé˜¶æ®µå·²ç»å®Œæˆï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>åƒæ˜¯åƒåœ¾å›æ”¶å™¨å¦‚CMSï¼ˆå¹¶å‘æ ‡è®°æ¸…é™¤ï¼‰å’ŒG1ï¼ˆGarbage-Firstï¼‰åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šé€šè¿‡ä¸€ç³»åˆ—çš„é˜¶æ®µæ¥åˆ¤æ–­ä½•æ—¶å¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p><p>CMSåƒåœ¾å›æ”¶å™¨ï¼š CMSåƒåœ¾å›æ”¶å™¨ä¸»è¦åŒ…å«ä»¥ä¸‹å››ä¸ªé˜¶æ®µï¼š</p><ol><li>åˆå§‹æ ‡è®°ï¼ˆInitial Markï¼‰ï¼šæ ‡è®°GC Rootsèƒ½ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œæ­¤é˜¶æ®µéœ€è¦æš‚åœæ‰€æœ‰çš„å…¶ä»–çº¿ç¨‹ï¼Œä½†æ˜¯æ—¶é—´é€šå¸¸è¾ƒçŸ­ã€‚</li><li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markï¼‰ï¼šè¿›è¡ŒGC Roots Tracingçš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä»GC Rootså¼€å§‹å¯¹å †ä¸­çš„å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ­¤é˜¶æ®µå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</li><li>é‡æ–°æ ‡è®°ï¼ˆRemarkï¼‰ï¼šä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ï¼Œé˜²æ­¢æ•°æ®ä¸ä¸€è‡´ï¼Œæ­¤é˜¶æ®µéœ€è¦æš‚åœæ‰€æœ‰çš„å…¶ä»–çº¿ç¨‹ã€‚</li><li>å¹¶å‘æ¸…é™¤ï¼ˆConcurrent Sweepï¼‰ï¼šæ¸…é™¤ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ­¤é˜¶æ®µå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚ CMSåœ¨æ¯ä¸ªé˜¶æ®µå®Œæˆåä¼šåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚ä¾‹å¦‚ï¼Œåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œå½“æ‰€æœ‰ä»GC Rootså¼€å§‹å¯è¾¾çš„å¯¹è±¡éƒ½è¢«æ ‡è®°åï¼Œå°±å¯ä»¥è¿›å…¥é‡æ–°æ ‡è®°é˜¶æ®µã€‚</li></ol><p>G1åƒåœ¾å›æ”¶å™¨ï¼š G1åƒåœ¾å›æ”¶å™¨å°†å †å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªå°å—ï¼ˆRegionï¼‰ï¼Œæ¯ä¸ªå°å—å¯èƒ½å±äºEdenåŒºã€SurvivoråŒºæˆ–è€…OldåŒºã€‚G1çš„åƒåœ¾å›æ”¶è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p><ol><li>åˆå§‹æ ‡è®°ï¼ˆInitial Markï¼‰ï¼šæ ‡è®°æ‰€æœ‰çš„GC Rootsèƒ½ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œæ­¤é˜¶æ®µéœ€è¦æš‚åœæ‰€æœ‰çš„å…¶ä»–çº¿ç¨‹ã€‚</li><li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markï¼‰ï¼šè¿›è¡ŒGC Roots Tracingçš„è¿‡ç¨‹ï¼Œæ­¤é˜¶æ®µå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</li><li>æœ€ç»ˆæ ‡è®°ï¼ˆFinal Markï¼‰ï¼šä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ï¼Œæ­¤é˜¶æ®µéœ€è¦æš‚åœæ‰€æœ‰çš„å…¶ä»–çº¿ç¨‹ã€‚</li><li>ç­›é€‰å›æ”¶ï¼ˆCleanupï¼‰ï¼šé¦–å…ˆç»Ÿè®¡å„ä¸ªRegionçš„å­˜æ´»å¯¹è±¡ï¼Œå¹¶å¯¹Regionè¿›è¡Œæ’åºï¼Œç„¶åå›æ”¶åƒåœ¾å¯¹è±¡æœ€å¤šçš„Regionã€‚ ç±»ä¼¼åœ°ï¼ŒG1åœ¨æ¯ä¸ªé˜¶æ®µå®Œæˆåä¼šåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚ä¾‹å¦‚ï¼Œåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œå½“æ‰€æœ‰ä»GC Rootså¼€å§‹å¯è¾¾çš„å¯¹è±¡éƒ½è¢«æ ‡è®°åï¼Œå°±å¯ä»¥è¿›å…¥æœ€ç»ˆæ ‡è®°é˜¶æ®µã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼Œåƒåœ¾å›æ”¶å™¨åœ¨æ¯ä¸ªé˜¶æ®µçš„ç»“æŸæ¡ä»¶ä¸»è¦å–å†³äºå½“å‰é˜¶æ®µçš„ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Œä¾‹å¦‚æ˜¯å¦æ‰€æœ‰çš„å¯¹è±¡éƒ½å·²ç»è¢«æ ‡è®°ï¼Œæˆ–è€…æ˜¯å¦æ‰€æœ‰çš„åƒåœ¾éƒ½å·²ç»è¢«æ¸…é™¤ã€‚</p><h3 id="ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿfull-gc-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿfull-gc-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”ŸFULL GCï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>æ¯å½“å †æ»¡æ—¶ï¼Œå°±ä¼šè§¦å‘Full GCã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé¦–å…ˆæ”¶é›†å¹´è½»ä»£ï¼Œç„¶åæ”¶é›†è€å¹´ä»£ã€‚å¦‚æœè€å¹´ä»£å¤ªæ»¡è€Œæ— æ³•æ¥å—å¹´è½»ä»£çš„å†…å®¹ï¼Œåˆ™çœç•¥å¹´è½»ä»£GCï¼Œå¹¶ä½¿ç”¨æ—§ä»£GCä»¥å¹¶è¡Œæˆ–ä¸²è¡Œæ–¹å¼æ”¶é›†å®Œæ•´å †ã€‚</p><p>å¦å¤–ï¼š</p><ol><li>Young Generation å·²æ»¡,è€Œ Old Generation ä¸­åˆæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ´»å¯¹è±¡æ—¶,ä¼šè§¦å‘ full gcã€‚</li><li>å·²ä½¿ç”¨çš„å†…å­˜è¶…è¿‡æœ€å¤§å †å†…å­˜(é€šè¿‡ -Xmx è®¾ç½®)æ—¶,ä¹Ÿä¼šè§¦å‘ full gc ä»¥å›æ”¶å†…å­˜ã€‚</li><li>è°ƒç”¨ System.gc() æ–¹æ³•æ—¶,å¦‚æœ JVM æ£€æµ‹åˆ° Old Generation ä¸­æœ‰è¶³å¤Ÿçš„åƒåœ¾éœ€è¦æ¸…ç†,ä¹Ÿä¼šè§¦å‘ full gcã€‚</li><li>Minor GC å®Œæˆå,å¦‚æœ JVM æ£€æµ‹åˆ° Old Generation ä¸­æœ‰è¶³å¤Ÿçš„åƒåœ¾éœ€è¦æ¸…ç†,ä¹Ÿä¼šè§¦å‘ full gcã€‚</li></ol>',27),Hs=n("p",null,"å‚è€ƒï¼š",-1),Ds={href:"https://stackoverflow.com/questions/24766118/when-is-a-full-gc-triggered",target:"_blank",rel:"noopener noreferrer"},Js=t(`<h3 id="å¯ä»¥åœ¨ä»£ç ä¸­æ•è·oomå¼‚å¸¸å—-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#å¯ä»¥åœ¨ä»£ç ä¸­æ•è·oomå¼‚å¸¸å—-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> å¯ä»¥åœ¨ä»£ç ä¸­æ•è·oomå¼‚å¸¸å—ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>å¯ä»¥é€šè¿‡ä»£ç æ•è· OOM(OutOfMemory)å¼‚å¸¸ã€‚ä¾‹å¦‚:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯èƒ½è§¦å‘ OOM çš„ä»£ç </span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">OutOfMemoryError</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Out of Memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ JVM çš„å¯ç”¨å†…å­˜ä¸è¶³ä»¥æ»¡è¶³åº”ç”¨çš„å†…å­˜éœ€æ±‚æ—¶,ä¼šæŠ›å‡º OOM å¼‚å¸¸ã€‚æ•è·è¿™ä¸ªå¼‚å¸¸å¯ä»¥è®©åº”ç”¨ä¼˜é›…åœ°å¤„ç† OOM é”™è¯¯,è€Œä¸æ˜¯ç›´æ¥å´©æºƒã€‚</p><h3 id="èƒ½ä¸èƒ½è¯´ä¸€ä¸‹å †åŒºå…·ä½“æ€ä¹ˆåˆ’åˆ†-ä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†-2023ç™¾åº¦" tabindex="-1"><a class="header-anchor" href="#èƒ½ä¸èƒ½è¯´ä¸€ä¸‹å †åŒºå…·ä½“æ€ä¹ˆåˆ’åˆ†-ä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†-2023ç™¾åº¦" aria-hidden="true">#</a> èƒ½ä¸èƒ½è¯´ä¸€ä¸‹å †åŒºå…·ä½“æ€ä¹ˆåˆ’åˆ†ï¼Œä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†ï¼ˆ2023ç™¾åº¦ï¼‰</h3><p>Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„å †åŒºï¼ˆHeapï¼‰æ˜¯JVMæ‰€ç®¡ç†çš„æœ€å¤§çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œä¹Ÿæ˜¯Javaå†…å­˜ç®¡ç†ä¸­æœ€å…³é”®çš„éƒ¨åˆ†ã€‚å®ƒä¸»è¦ç”¨äºå­˜æ”¾å„ç§å¯¹è±¡å®ä¾‹ï¼ŒåŒ…æ‹¬Javaç±»çš„å®ä¾‹å’Œæ•°ç»„ã€‚</p><p>å †åŒºçš„å…·ä½“åˆ’åˆ†å¯èƒ½ä¼šéšç€ä¸åŒçš„JVMå®ç°ï¼ˆä¾‹å¦‚HotSpotã€JRockitã€IBM J9ç­‰ï¼‰å’Œç‰ˆæœ¬æœ‰æ‰€ä¸åŒï¼Œä½†ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><strong>æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰</strong>ï¼šæ–°ç”Ÿä»£æ˜¯å †å†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦å­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚æ–°ç”Ÿä»£åˆå¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š <ul><li><strong>EdenåŒº</strong>ï¼šè¿™æ˜¯æ–°ç”Ÿä»£çš„ä¸»è¦éƒ¨åˆ†ï¼Œå¤§éƒ¨åˆ†æ–°åˆ›å»ºçš„å¯¹è±¡é¦–å…ˆåœ¨EdenåŒºåˆ†é…å†…å­˜ã€‚</li><li><strong>SurvivoråŒº</strong>ï¼šSurvivoråŒºåŒ…æ‹¬ä¸¤ä¸ªï¼Œé€šå¸¸ç§°ä¸ºFrom Survivorå’ŒTo Survivorï¼Œç”¨äºå­˜æ”¾ä»EdenåŒºç»è¿‡ä¸€æ¬¡Minor GCåä»ç„¶å­˜æ´»çš„å¯¹è±¡ã€‚</li></ul></li><li><strong>è€å¹´ä»£ï¼ˆOld Generationï¼‰</strong>ï¼šå½“å¯¹è±¡åœ¨æ–°ç”Ÿä»£SurvivoråŒºä¸­ç»å†äº†ä¸€å®šæ¬¡æ•°çš„GCåï¼Œæˆ–è€…EdenåŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œå¯¹è±¡ä¼šè¢«æ™‹å‡åˆ°è€å¹´ä»£ã€‚è€å¹´ä»£çš„ç©ºé—´é€šå¸¸æ¯”æ–°ç”Ÿä»£å¤§ï¼Œç”¨äºå­˜æ”¾é•¿æ—¶é—´å­˜æ´»çš„å¯¹è±¡ã€‚</li><li><strong>æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰/å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰</strong>ï¼šè¿™éƒ¨åˆ†å†…å­˜ç”¨äºå­˜æ”¾JVMåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰æ•°æ®ã€‚åœ¨Java 8ä¹‹åï¼Œæ°¸ä¹…ä»£è¢«ç§»é™¤ï¼Œæ”¹ä¸ºä½¿ç”¨å…ƒç©ºé—´ã€‚</li></ol><p>å †çš„è¿™ç§åˆ’åˆ†æ–¹å¼ä¸»è¦åŸºäºä¸€ä¸ªè§‚å¯Ÿåˆ°çš„ç°è±¡ï¼Œå³å¤§éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½éå¸¸çŸ­ï¼Œå³â€œå¼±ä»£å‡è¯´â€ã€‚åŸºäºæ­¤ï¼ŒJVMé‡‡ç”¨äº†åˆ†ä»£å›æ”¶çš„åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚</p><p>æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡Minor GCæ›´é¢‘ç¹åœ°æ”¶é›†æ–°ç”Ÿä»£åŒºåŸŸã€‚å½“EdenåŒºæ»¡æ—¶ï¼Œä¼šè§¦å‘Minor GCï¼Œæ¸…ç†æ‰é‚£äº›å·²ç»æ­»äº¡çš„å¯¹è±¡ï¼ŒæŠŠä»ç„¶å­˜æ´»çš„å¯¹è±¡ç§»åŠ¨åˆ°SurvivoråŒºï¼Œå¦‚æœSurvivoråŒºä¹Ÿæ»¡äº†ï¼Œå°±ä¼šå°†å¯¹è±¡ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚</p><p>è€å¹´ä»£ä¸­çš„å¯¹è±¡ä¸€èˆ¬å­˜æ´»æ—¶é—´è¾ƒé•¿ï¼Œæˆ–è€…æ˜¯Survivorç©ºé—´æ— æ³•å®¹çº³çš„å¤§å¯¹è±¡ã€‚å› æ­¤ï¼Œç›¸æ¯”äºæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£çš„GCï¼ˆMajor GCæˆ–Full GCï¼‰ä¼šç›¸å¯¹å°‘äº›ï¼Œä½†æ¯æ¬¡GCæ—¶é—´ä¼šæ¯”Minor GCè¦é•¿ï¼Œå› ä¸ºéœ€è¦å¯¹æ•´ä¸ªè€å¹´ä»£è¿›è¡Œæ•´ç†ã€‚</p><p>æ°¸ä¹…ä»£/å…ƒç©ºé—´å­˜æ”¾çš„æ•°æ®ç±»å‹ï¼ˆå¦‚ç±»ä¿¡æ¯ã€å¸¸é‡ï¼‰çš„ç”Ÿå‘½å‘¨æœŸä¸ä¸€èˆ¬çš„Javaå¯¹è±¡æœ‰æ‰€ä¸åŒï¼Œå…¶å†…å­˜ç®¡ç†ä¹Ÿæœ‰ç‰¹æ®Šä¹‹å¤„ï¼Œæ¯”å¦‚ç±»çš„å¸è½½ç­‰æƒ…å†µã€‚</p><p>è¿™ç§å†…å­˜åˆ’åˆ†å’Œç®¡ç†æ–¹å¼èƒ½å¤Ÿæé«˜åƒåœ¾æ”¶é›†çš„æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿå‡è½»äº†Full GCçš„å‹åŠ›ï¼Œæé«˜äº†ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p><h3 id="æ€ä¹ˆé‡Šæ”¾ä¸€ä¸ªç”¨å®Œçš„å¤§å¯¹è±¡çš„å†…å­˜ç©ºé—´-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆé‡Šæ”¾ä¸€ä¸ªç”¨å®Œçš„å¤§å¯¹è±¡çš„å†…å­˜ç©ºé—´-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> æ€ä¹ˆé‡Šæ”¾ä¸€ä¸ªç”¨å®Œçš„å¤§å¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li>æ¶ˆé™¤å¯¹è±¡å¼•ç”¨ï¼šé¦–å…ˆï¼Œä½ éœ€è¦ç¡®ä¿æ²¡æœ‰ä»»ä½•æ´»åŠ¨çš„å¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚è¿™å¯èƒ½æ¶‰åŠå°†ä»»ä½•å˜é‡æŒ‡å‘è¯¥å¯¹è±¡çš„å¼•ç”¨è®¾ç½®ä¸ºnullã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">BigObject</span> bigObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Use bigObject</span>
bigObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// Helps to make bigObject eligible for GC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>è¯·æ±‚ç³»ç»Ÿè¿›è¡Œåƒåœ¾æ”¶é›†ï¼šè™½ç„¶JVMä¼šè‡ªåŠ¨è¿›è¡Œåƒåœ¾æ”¶é›†ï¼Œä½†æ˜¯åœ¨å¤„ç†å¤§å¯¹è±¡æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›å°½æ—©åœ°é‡Šæ”¾å†…å­˜ã€‚ä¸ºæ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨System.gc()æ–¹æ³•æ¥è¯·æ±‚JVMè¿›è¡Œåƒåœ¾æ”¶é›†ã€‚ä½†æ˜¯ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼ŒJVMå¯èƒ½ä¸ä¼šç«‹å³å“åº”ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Suggests JVM to run the garbage collector</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯¹äºå¤§å¯¹è±¡ï¼Œç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¤§å¯¹è±¡å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡ï¼Œè¿™ä¼šå½±å“åƒåœ¾æ”¶é›†çš„æ•ˆç‡å’Œç¨‹åºçš„æ€§èƒ½ã€‚å¦‚æœå¯èƒ½ï¼Œä½ å¯ä»¥å°½é‡å¤ç”¨è¿™äº›å¤§å¯¹è±¡ï¼Œæˆ–è€…ä½¿ç”¨æ± åŒ–ç­‰æŠ€æœ¯æ¥ç®¡ç†è¿™äº›èµ„æºã€‚</p><h3 id="å†™æŸ¥è¯¢è¯­å¥çš„æ—¶å€™åº”è¯¥ä»å“ªäº›æ–¹é¢è€ƒè™‘æ¥æ³¨æ„æ€§èƒ½-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#å†™æŸ¥è¯¢è¯­å¥çš„æ—¶å€™åº”è¯¥ä»å“ªäº›æ–¹é¢è€ƒè™‘æ¥æ³¨æ„æ€§èƒ½-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> å†™æŸ¥è¯¢è¯­å¥çš„æ—¶å€™åº”è¯¥ä»å“ªäº›æ–¹é¢è€ƒè™‘æ¥æ³¨æ„æ€§èƒ½ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li>ä½¿ç”¨ç´¢å¼•ï¼šç´¢å¼•å¯ä»¥æå¤§åœ°æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚ç†è§£ä½ çš„æŸ¥è¯¢æ˜¯å¦‚ä½•ä½¿ç”¨ç´¢å¼•çš„ï¼Œå¹¶ä¸”å°½å¯èƒ½åœ°ä½¿ä½ çš„æŸ¥è¯¢èƒ½å¤Ÿä½¿ç”¨ç´¢å¼•ã€‚</li><li>é¿å…å…¨è¡¨æ‰«æï¼šå°½å¯èƒ½åœ°é¿å…å…¨è¡¨æ‰«æã€‚è¿™é€šå¸¸æ„å‘³ç€ä½ éœ€è¦ä¸ºç»å¸¸ç”¨äºæŸ¥è¯¢çš„åˆ—åˆ›å»ºç´¢å¼•ã€‚</li><li>å‡å°‘è¿”å›çš„æ•°æ®é‡ï¼šåªæŸ¥è¯¢ä½ çœŸæ­£éœ€è¦çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ SELECT * ä¼šè¿”å›æ‰€æœ‰åˆ—ï¼Œè¿™å¯èƒ½ä¼šæµªè´¹å¤§é‡çš„I/Oèµ„æºã€‚å°½å¯èƒ½åªè¿”å›ä½ éœ€è¦çš„åˆ—ã€‚</li><li>è¿‡æ»¤ç»“æœï¼šåœ¨æ•°æ®åº“å±‚é¢è¿‡æ»¤ç»“æœï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨å±‚é¢è¿‡æ»¤ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ WHERE å­å¥è€Œä¸æ˜¯åœ¨åº”ç”¨ä»£ç ä¸­è¿‡æ»¤æ•°æ®ã€‚</li><li>ä¼˜åŒ–è”æ¥ï¼šå¦‚æœéœ€è¦è”æ¥å¤šä¸ªè¡¨ï¼Œç¡®ä¿ä½ æ­£ç¡®åœ°åˆ›å»ºäº†ç´¢å¼•ï¼Œå¹¶å°½å¯èƒ½åœ°å‡å°‘è”æ¥çš„æ•°é‡ã€‚</li><li>ä½¿ç”¨ LIMITï¼šå¦‚æœå¯èƒ½ï¼Œä½¿ç”¨ LIMIT è¯­å¥æ¥é™åˆ¶è¿”å›çš„æ•°æ®é‡ï¼Œç‰¹åˆ«æ˜¯åœ¨åªéœ€è¦ä¸€éƒ¨åˆ†ç»“æœçš„æƒ…å†µä¸‹ã€‚</li><li>é¿å…å¤æ‚çš„å­æŸ¥è¯¢ï¼šå°½å¯èƒ½é¿å…å¤æ‚çš„å­æŸ¥è¯¢ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚æœ‰æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ JOIN æ¥ä»£æ›¿å­æŸ¥è¯¢ã€‚</li><li>åˆ†ææŸ¥è¯¢ï¼šä½¿ç”¨ EXPLAIN è¯­å¥åˆ†æä½ çš„æŸ¥è¯¢ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•åœ¨æ•°æ®åº“ä¸­è¿è¡Œçš„ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ æ‰¾åˆ°å¯èƒ½çš„æ€§èƒ½ç“¶é¢ˆã€‚</li></ol><p>ä»¥ä¸Šåªæ˜¯ä¸€äº›åŸºæœ¬çš„æŒ‡å—ï¼Œæ¯ä¸ªå…·ä½“çš„æƒ…å†µå¯èƒ½ä¼šæœ‰ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥ã€‚</p><h3 id="æ€ä¹ˆæ‰‹åŠ¨è®©-java-è™šæ‹Ÿæœº-oom-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆæ‰‹åŠ¨è®©-java-è™šæ‹Ÿæœº-oom-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> æ€ä¹ˆæ‰‹åŠ¨è®© JAVA è™šæ‹Ÿæœº OOMï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>ä¸ºäº†æ‰‹åŠ¨è®©Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰å†…å­˜æº¢å‡ºï¼ˆOutOfMemoryErrorï¼‰ï¼Œå¯ä»¥å°è¯•åœ¨ä»£ç ä¸­åˆ›å»ºä¸€ä¸ªå¾ˆå¤§çš„å¯¹è±¡æ•°ç»„ï¼Œä»¥å°½å¿«è€—å°½JVMçš„å¯ç”¨å†…å­˜ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OOMExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ¯æ¬¡åˆ†é…1MBçš„å†…å­˜</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> memoryChunk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>memoryChunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Memory allocated: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> memoryChunk<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; MB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¨‹åºä¼šä¸æ–­åˆ†é…1MBçš„å†…å­˜å—ç›´åˆ°JVMè€—å°½å†…å­˜ã€‚ä¸è¿‡è¯·æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸æ˜¯é«˜æ•ˆåœ°è§¦å‘OOMï¼Œå› ä¸ºJVMçš„åƒåœ¾å›æ”¶å™¨å¯èƒ½ä¼šåœ¨æŸä¸ªæ—¶åˆ»é‡Šæ”¾éƒ¨åˆ†å†…å­˜ã€‚ä½†è¿™ä¸ªä¾‹å­é€šå¸¸è¶³ä»¥è§¦å‘ä¸€ä¸ªå†…å­˜æº¢å‡ºé”™è¯¯ã€‚</p><p>åœ¨è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œå¯èƒ½éœ€è¦æ ¹æ®æ‚¨çš„æœºå™¨é™åˆ¶JVMçš„å†…å­˜ã€‚ä¾‹å¦‚ï¼Œè‹¥è¦å°†æœ€å¤§å†…å­˜é™åˆ¶ä¸º256MBï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-Xmx256m</span> OOMExample
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å¦‚æœé¢‘ç¹å‡ºç°full-gcè¯¥æ€ä¹ˆæ’æŸ¥-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#å¦‚æœé¢‘ç¹å‡ºç°full-gcè¯¥æ€ä¹ˆæ’æŸ¥-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> å¦‚æœé¢‘ç¹å‡ºç°Full GCè¯¥æ€ä¹ˆæ’æŸ¥ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>é¢‘ç¹å‡ºç°Full GCçš„åŸå› æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ol><li>å†…å­˜æº¢å‡ºï¼šåº”ç”¨ç¨‹åºç”³è¯·çš„å†…å­˜è¶…è¿‡äº†JVMçš„æœ€å¤§å¯ç”¨å†…å­˜ï¼Œå¯¼è‡´GCçº¿ç¨‹é¢‘ç¹æ‰§è¡ŒFull GCæ¥å›æ”¶å†…å­˜ã€‚å¯ä»¥é€šè¿‡æ£€æŸ¥JVMå¯åŠ¨å‚æ•°ä¸­-Xmxçš„å€¼æ¥ç¡®è®¤æ˜¯å¦å†…å­˜æº¢å‡ºï¼Œå¦‚æœæ˜¯çš„è¯å¯ä»¥é€‚å½“å¢åŠ è¯¥å€¼ã€‚</li><li>è€å¹´ä»£ç©ºé—´ä¸è¶³ï¼šåº”ç”¨ä¸­å¤§é‡å¯¹è±¡å­˜æ´»æ—¶é—´è¾ƒé•¿ï¼Œä½¿å¾—è€å¹´ä»£ç©ºé—´å æ»¡ï¼Œè§¦å‘Full GCã€‚å¯ä»¥é€šè¿‡-Xmså’Œ-Xmxå‚æ•°è°ƒå¤§å¹´è€ä»£å¤§å°(-XXï¼šPermSizeå’Œ-XXï¼šMaxPermSize)ã€‚</li><li>å¹´è½»ä»£å’Œè€å¹´ä»£ç©ºé—´ä¸å¹³è¡¡ï¼šå¦‚æœå¹´è½»ä»£ç©ºé—´è¿‡å°ï¼Œå­˜æ´»å¯¹è±¡è¿‡æ—©æ™‹å‡åˆ°è€å¹´ä»£ï¼Œå¯¼è‡´è€å¹´ä»£ç©ºé—´é¥±å’Œï¼Œè§¦å‘Full GCã€‚å¯ä»¥é€‚å½“å¢åŠ å¹´è½»ä»£å¤§å°(-Xmn)å’Œå‡å°è€å¹´ä»£ç©ºé—´(-XXï¼šPermSize)ã€‚</li><li>åƒåœ¾å¾ªç¯å¼•ç”¨ï¼šåº”ç”¨ä¸­å­˜åœ¨å¯¹è±¡ä¹‹é—´ç›¸äº’å¼•ç”¨ï¼Œå½¢æˆé—­ç¯ï¼Œä½¿å¾—GCæ— æ³•å›æ”¶å®ƒä»¬ã€‚éœ€è¦æ’æŸ¥ä»£ç ï¼Œå‘ç°å¹¶æ‰“ç ´å¾ªç¯å¼•ç”¨ã€‚</li><li>ä»£ç ç¼ºé™·ï¼šåº”ç”¨ä»£ç ä¸­å­˜åœ¨èµ„æºæœªå…³é—­ã€ memcacheè¿æ¥æ³„éœ²ç­‰èµ„æºæ³„éœ²é—®é¢˜ï¼Œåº”æ£€æŸ¥ä»£ç å¹¶ä¿®å¤è¿™äº›é—®é¢˜ã€‚</li></ol><h3 id="full-gcä¼šæ”¶é›†çš„æ˜¯å“ªäº›å¯¹è±¡-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#full-gcä¼šæ”¶é›†çš„æ˜¯å“ªäº›å¯¹è±¡-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> Full GCä¼šæ”¶é›†çš„æ˜¯å“ªäº›å¯¹è±¡ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><ol><li>å¹´è½»ä»£ä¸­çš„å¯¹è±¡ï¼šå¹´è½»ä»£ä¸­æ™‹å‡ä¸åˆ°è€å¹´ä»£çš„å¯¹è±¡å’Œåˆšåˆ›å»ºçš„æ–°å¯¹è±¡ã€‚</li><li>è€å¹´ä»£ä¸­çš„å¯¹è±¡ï¼šå­˜æ´»æ—¶é—´é•¿çš„å¯¹è±¡ã€‚</li><li>æ°¸ä¹…ä»£(JDK8ä»¥ä¸‹)æˆ–å…ƒç©ºé—´(JDK8åŠä»¥ä¸Š)ä¸­çš„å¯¹è±¡ï¼šç±»ä¿¡æ¯ã€å¸¸é‡ã€æ–¹æ³•ç­‰ã€‚</li><li>è™šæ‹Ÿæœºæ ˆä¸­çš„å¯¹è±¡ï¼šè™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­çš„å¯¹è±¡ï¼šæœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li></ol><h3 id="è§£å†³full-gc-æˆ‘ä»¬å¯ä»¥å‡å°‘å¯¹è±¡çš„é¢‘ç¹åˆ›å»º-é‚£ä¹ˆæœ‰ä¸€ä¸ªæˆ‘ä»¬æ¥è¯·æ±‚éœ€æ±‚åˆ›å»ºå¯¹è±¡çš„åœºæ™¯-å¯ä»¥æ€ä¹ˆä¼˜åŒ–-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#è§£å†³full-gc-æˆ‘ä»¬å¯ä»¥å‡å°‘å¯¹è±¡çš„é¢‘ç¹åˆ›å»º-é‚£ä¹ˆæœ‰ä¸€ä¸ªæˆ‘ä»¬æ¥è¯·æ±‚éœ€æ±‚åˆ›å»ºå¯¹è±¡çš„åœºæ™¯-å¯ä»¥æ€ä¹ˆä¼˜åŒ–-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> è§£å†³Full GCï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªæˆ‘ä»¬æ¥è¯·æ±‚éœ€æ±‚åˆ›å»ºå¯¹è±¡çš„åœºæ™¯ï¼Œå¯ä»¥æ€ä¹ˆä¼˜åŒ–ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><ol><li>å¯¹è±¡æ± æŠ€æœ¯ï¼šé‡å¤åˆ©ç”¨å¯¹è±¡ï¼Œé¿å…è¿‡åº¦åˆ›å»ºã€‚æ¯”å¦‚å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œçº¿ç¨‹æ± ç­‰ã€‚</li><li>é€‚å½“å¢åŠ å¹´è½»ä»£ç©ºé—´ï¼š-Xmnå‚æ•°è°ƒå¤§ï¼Œè®©æ›´å¤šå¯¹è±¡åœ¨Minor GCä¸­å°±è¢«å›æ”¶ï¼Œå‡å°‘è¿›å…¥è€å¹´ä»£çš„å¯¹è±¡ã€‚</li><li>é¿å…çŸ­æœŸobject churnï¼šé¿å…å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºå’Œæ¶ˆäº¡ï¼Œå°½é‡é‡å¤ä½¿ç”¨å¯¹è±¡ï¼Œè¿™å¯ä»¥å‡å°‘GCç´¯ç§¯çš„å·¥ä½œã€‚</li><li>é¿å…finalize()æ–¹æ³•ï¼šfinalize()æ–¹æ³•ä¼šå¢åŠ GCçš„å·¥ä½œé‡ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­é¿å…é‡å†™finalize()æ–¹æ³•ã€‚</li><li>é€‚å½“å¢åŠ è€å¹´ä»£ç©ºé—´ï¼š-Xmså’Œ-Xmxå‚æ•°è°ƒå¤§ï¼Œå¢åŠ è€å¹´ä»£çš„ç©ºé—´ï¼Œå‡å°‘Full GCçš„è§¦å‘é¢‘ç‡ã€‚</li><li>JDK8ä¸­ä½¿ç”¨Metaspaceä»£æ›¿æ°¸ä¹…ä»£ï¼š-XXï¼šMetaspaceSizeå’Œ-XXï¼šMaxMetaspaceSizeå‚æ•°æ§åˆ¶ï¼Œé¿å…æ°¸ä¹…ä»£æº¢å‡ºã€‚</li><li>åˆ†ä»£æ”¶é›†å™¨ï¼š-XXï¼š+UseParallelGCå’Œ-XXï¼š+UseParallelOldGCç­‰å‚æ•°é€‰æ‹©åˆ†ä»£æ”¶é›†å™¨ï¼ŒMinor GCå’ŒMajor GCå¯ä»¥å¹¶è¡Œè¿›è¡Œï¼Œæé«˜æ•ˆç‡ã€‚</li><li>æ›¿æ¢Full GCæ”¶é›†å™¨ï¼š-XXï¼š+UseG1GCç­‰å‚æ•°é€‰æ‹©G1ç­‰æ”¶é›†å™¨ï¼Œé¿å…å‡ºç°Stop The Worldçš„Full GCã€‚</li><li>å‡å°‘åƒåœ¾å¾ªç¯å¼•ç”¨ï¼š reviewing your code to reduce circular references can decrease the number of live objects and therefore Full GCsã€‚</li><li>é¿å…ä»£ç ç¼ºé™·ï¼šå¦‚å…³é—­æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶æµç­‰ï¼Œé¿å…èµ„æºæ³„éœ²å¯¼è‡´Full GCã€‚</li></ol><p>è¿™äº›ä¼˜åŒ–æªæ–½å¯ä»¥ä»JVMå‚æ•°è°ƒä¼˜ã€ä»£ç å±‚é¢ä¸Šé˜²æ­¢å¯¹è±¡è¿‡åº¦åˆ›å»ºå’Œå‡å°‘GCå·¥ä½œé‡ï¼Œæœ‰æ•ˆå‡å°‘Full GCçš„é¢‘ç‡ã€‚</p><h3 id="javaçº¿ç¨‹ä¹‹é—´é€šçŸ¥æ€ä¹ˆå¤„ç†-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#javaçº¿ç¨‹ä¹‹é—´é€šçŸ¥æ€ä¹ˆå¤„ç†-2023-å¾—ç‰©" aria-hidden="true">#</a> Javaçº¿ç¨‹ä¹‹é—´é€šçŸ¥æ€ä¹ˆå¤„ç†ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><ol><li><p>ä½¿ç”¨<code>synchronized</code>å…³é”®å­—ï¼Œä½ å¯ä»¥ä¿è¯ä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è®¿é—®åŒæ­¥ä»£ç å—ã€‚è¿™é€šå¸¸ç”¨äºèµ„æºå…±äº«æˆ–è€…ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">myMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åœ¨<code>synchronized</code>ä»£ç å—æˆ–è€…æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>wait()</code>ï¼Œ<code>notify()</code>å’Œ<code>notifyAll()</code>æ–¹æ³•æ¥æ§åˆ¶çº¿ç¨‹çš„æ‰§è¡Œã€‚è¿™äº›æ–¹æ³•å±äºJavaçš„<code>Object</code>ç±»ã€‚</p><ul><li><code>wait()</code>: å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œé‡Šæ”¾é”ã€‚</li><li><code>notify()</code>: å”¤é†’ä¸€ä¸ªåœ¨è¯¥å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„çº¿ç¨‹ã€‚</li><li><code>notifyAll()</code>: å”¤é†’æ‰€æœ‰åœ¨è¯¥å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„çº¿ç¨‹ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">synchronized</span><span class="token punctuation">(</span>sharedObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>conditionNotMet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sharedObject<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Do something</span>
  sharedObject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æˆ–è€… sharedObject.notifyAll();</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Javaæ ‡å‡†åº“ä¸­çš„<code>java.util.concurrent</code>åŒ…æä¾›äº†ä¸€äº›é«˜çº§åŒæ­¥å·¥å…·ï¼Œæ¯”å¦‚<code>Semaphore</code>ã€<code>CountDownLatch</code>ã€<code>CyclicBarrier</code>ç­‰ã€‚</p><ul><li><strong>Semaphore</strong>: æ§åˆ¶åŒæ—¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚</li><li><strong>CountDownLatch</strong>: å…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…ç›´åˆ°ä¸€ç»„æ“ä½œå®Œæˆã€‚</li><li><strong>CyclicBarrier</strong>: å…è®¸ä¸€ç»„çº¿ç¨‹äº’ç›¸ç­‰å¾…ç›´åˆ°æ‰€æœ‰çº¿ç¨‹éƒ½å‡†å¤‡å®Œæ¯•ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Semaphore</span> semaphore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Semaphore</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®</span>

semaphore<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è·å–ä¸€ä¸ªè®¸å¯</span>
<span class="token comment">// critical section</span>
semaphore<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// é‡Šæ”¾ä¸€ä¸ªè®¸å¯</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>é˜»å¡é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸€ç§å¸¸ç”¨çš„çº¿ç¨‹é€šä¿¡æ‰‹æ®µã€‚å®ƒå¯ä»¥ç”¨äºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç”Ÿäº§è€…</span>
queue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;item&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ¶ˆè´¹è€…</span>
<span class="token class-name">String</span> item <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªé˜Ÿåˆ—å½“ä¸­-æœ‰æ‰¹é‡çº¿ç¨‹å»å¤„ç†çš„ä»»åŠ¡-ç„¶åä¸€ä¸ªä»»åŠ¡å¤„ç†å¤±è´¥ä¹‹åè¦ç»ˆæ­¢å…¶ä»–ä»»åŠ¡-è¿™ä¸ªæ€ä¹ˆå¤„ç†-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªé˜Ÿåˆ—å½“ä¸­-æœ‰æ‰¹é‡çº¿ç¨‹å»å¤„ç†çš„ä»»åŠ¡-ç„¶åä¸€ä¸ªä»»åŠ¡å¤„ç†å¤±è´¥ä¹‹åè¦ç»ˆæ­¢å…¶ä»–ä»»åŠ¡-è¿™ä¸ªæ€ä¹ˆå¤„ç†-2023-å¾—ç‰©" aria-hidden="true">#</a> æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªé˜Ÿåˆ—å½“ä¸­ï¼Œæœ‰æ‰¹é‡çº¿ç¨‹å»å¤„ç†çš„ä»»åŠ¡ï¼Œç„¶åä¸€ä¸ªä»»åŠ¡å¤„ç†å¤±è´¥ä¹‹åè¦ç»ˆæ­¢å…¶ä»–ä»»åŠ¡ï¼Œè¿™ä¸ªæ€ä¹ˆå¤„ç†ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><ol><li><strong>å…±äº«çŠ¶æ€æ ‡å¿—</strong>: ä½¿ç”¨ä¸€ä¸ªå…±äº«çš„çŠ¶æ€æ ‡å¿—ï¼ˆæ¯”å¦‚ä¸€ä¸ªå¸ƒå°”å˜é‡ï¼‰ï¼Œä¸€æ—¦ä¸€ä¸ªçº¿ç¨‹å¤±è´¥ï¼Œå°±è®¾ç½®è¿™ä¸ªæ ‡å¿—ã€‚å…¶ä»–çº¿ç¨‹éœ€è¦ä¸æ–­æ£€æŸ¥è¿™ä¸ªæ ‡å¿—ï¼Œå¦‚æœå‘ç°æ ‡å¿—è¢«è®¾ç½®ä¸ºå¤±è´¥ï¼Œå°±è‡ªè¡Œç»ˆæ­¢ã€‚</li><li><strong>çº¿ç¨‹æ± å’ŒFuture</strong>: å¦‚æœä½¿ç”¨çº¿ç¨‹æ± ï¼Œé€šå¸¸æ¯ä¸ªä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ä¼šè¢«å°è£…åœ¨ä¸€ä¸ª<code>Future</code>å¯¹è±¡ä¸­ã€‚ä½ å¯ä»¥é€šè¿‡æ£€æŸ¥è¿™ä¸ª<code>Future</code>å¯¹è±¡æ¥å†³å®šæ˜¯å¦å–æ¶ˆå…¶ä»–ä»»åŠ¡ã€‚</li><li><strong>å¼‚å¸¸å¤„ç†</strong>: è®¾è®¡ä»»åŠ¡ä»£ç ä»¥æŠ›å‡ºç‰¹å®šç±»å‹çš„å¼‚å¸¸è¡¨ç¤ºå¤±è´¥ã€‚æ•è·è¿™äº›å¼‚å¸¸å¹¶åœ¨æ•è·åˆ°å¼‚å¸¸åç»ˆæ­¢å…¶ä»–ä»»åŠ¡ã€‚</li><li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>: ä½¿ç”¨ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ¥å‘é€åœæ­¢ä¿¡å·ç»™å…¶ä»–çº¿ç¨‹ã€‚</li><li><strong>ä¸­æ–­</strong>: åœ¨Javaè¿™æ ·æ”¯æŒçº¿ç¨‹ä¸­æ–­çš„è¯­è¨€é‡Œï¼Œå¯ä»¥è°ƒç”¨çº¿ç¨‹çš„<code>interrupt()</code>æ–¹æ³•æ¥å°è¯•ç»ˆæ­¢å®ƒã€‚ä½†æ³¨æ„ï¼Œçº¿ç¨‹éœ€è¦æ­£ç¡®å¤„ç†ä¸­æ–­æ‰ä¼šå®é™…åœæ­¢ã€‚</li></ol><h3 id="æ–°ç”Ÿä»£é¢‘ç¹minor-gcåŸå› -è§£å†³åŠæ³•-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#æ–°ç”Ÿä»£é¢‘ç¹minor-gcåŸå› -è§£å†³åŠæ³•-2023-å¾—ç‰©" aria-hidden="true">#</a> æ–°ç”Ÿä»£é¢‘ç¹Minor GCåŸå› ï¼Œè§£å†³åŠæ³•ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><ol><li>æ–°ç”Ÿä»£ç©ºé—´è®¾ç½®è¿‡å°</li><li>å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçŸ­ï¼Œå¿«é€Ÿè¿›å…¥æ–°ç”Ÿä»£å¹¶å˜å¾—ä¸å¯è¾¾</li><li>å¤§é‡ä¸´æ—¶å¯¹è±¡çš„åˆ›å»º</li><li>é«˜å¹¶å‘æˆ–è€…é«˜ååé‡çš„åº”ç”¨</li></ol><p>è§£å†³åŠæ³•ï¼š</p><ol><li><strong>å¢åŠ æ–°ç”Ÿä»£å¤§å°</strong>ï¼šé€šè¿‡è°ƒæ•´JVMå‚æ•°ï¼ˆä¾‹å¦‚ï¼Œ<code>-Xmn</code>ï¼‰æ¥å¢å¤§æ–°ç”Ÿä»£ç©ºé—´ã€‚</li><li><strong>å¯¹è±¡æ± åŒ–</strong>ï¼šé‡ç”¨å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸æ–­åˆ›å»ºæ–°å¯¹è±¡ã€‚</li><li><strong>ä»£ç ä¼˜åŒ–</strong>ï¼šå‡å°‘ä¸´æ—¶å¯¹è±¡çš„åˆ›å»ºï¼Œä¼˜åŒ–æ•°æ®ç»“æ„å’Œç®—æ³•ã€‚</li><li><strong>è°ƒä¼˜GCå‚æ•°</strong>ï¼šä½¿ç”¨ä¸åŒçš„åƒåœ¾æ”¶é›†å™¨æˆ–è€…è°ƒæ•´åƒåœ¾æ”¶é›†å™¨çš„å‚æ•°ã€‚</li><li><strong>ç›‘æ§ä¸è¯Šæ–­</strong>ï¼šä½¿ç”¨å·¥å…·ï¼ˆå¦‚JVisualVM, MATç­‰ï¼‰æ¥ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µå’Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚</li><li><strong>å‡å°‘çº¿ç¨‹æ•°æˆ–è¯·æ±‚å¹¶å‘é‡</strong>ï¼šå¦‚æœåº”ç”¨ä¸èƒ½æ‰¿å—é«˜å¹¶å‘ï¼Œé€‚å½“é™ä½å¹¶å‘é‡ã€‚</li><li><strong>ä½¿ç”¨é€‚å½“çš„æ•°æ®ç»“æ„å’Œç¼“å­˜ç­–ç•¥</strong>ï¼šä»¥å‡å°‘ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»ºã€‚</li><li><strong>åˆç†åˆ†é…è€å¹´ä»£å’Œæ–°ç”Ÿä»£çš„æ¯”ä¾‹</strong>ï¼šå¯ä»¥ä½¿ç”¨<code>-XX:NewRatio</code>è¿›è¡Œè°ƒæ•´ã€‚</li></ol><h3 id="é¢‘ç¹full-gc-è€å¹´ä»£gc-çš„åŸå› -è§£å†³åŠæ³•-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#é¢‘ç¹full-gc-è€å¹´ä»£gc-çš„åŸå› -è§£å†³åŠæ³•-2023-å¾—ç‰©" aria-hidden="true">#</a> é¢‘ç¹Full GCï¼ˆè€å¹´ä»£GCï¼‰çš„åŸå› ï¼Ÿè§£å†³åŠæ³•ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><ol><li><strong>è€å¹´ä»£ç©ºé—´ä¸è¶³</strong>ï¼šå½“è€å¹´ä»£ç©ºé—´ä¸è¶³ä»¥å®¹çº³æ–°æ™‹å‡çš„å¯¹è±¡æ—¶ï¼Œä¼šè§¦å‘Full GCã€‚</li><li><strong>å†…å­˜æ³„æ¼</strong>ï¼šé•¿æ—¶é—´è¿è¡Œåï¼Œæ— æ³•å›æ”¶çš„å¯¹è±¡ä¼šä¸æ–­ç´¯ç§¯ã€‚</li><li><strong>å¤§å¯¹è±¡æˆ–é•¿ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡</strong>ï¼šè¿™äº›å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œå¢åŠ äº†GCçš„é¢‘ç‡ã€‚</li><li><strong>ç³»ç»Ÿè°ƒç”¨æˆ–å¤–éƒ¨å› ç´ </strong>ï¼šæ¯”å¦‚ä½¿ç”¨<code>System.gc()</code>æ‰‹åŠ¨è§¦å‘ã€‚</li><li><strong>ä¸åˆé€‚çš„GCç­–ç•¥æˆ–å‚æ•°è®¾ç½®</strong>ï¼šæ¯”å¦‚ä¸åˆé€‚çš„å †å¤§å°æˆ–å…¶ä»–JVMå‚æ•°ã€‚</li></ol><p>è§£å†³åŠæ³•ï¼š</p><ol><li><strong>å¢åŠ è€å¹´ä»£ç©ºé—´</strong>ï¼šä½¿ç”¨JVMå‚æ•°ï¼ˆä¾‹å¦‚ï¼Œ<code>-Xmx</code>ï¼‰å¢åŠ å †å†…å­˜å¤§å°ã€‚</li><li><strong>å†…å­˜æ³„æ¼æ’æŸ¥</strong>ï¼šä½¿ç”¨å†…å­˜åˆ†æå·¥å…·ï¼ˆå¦‚MATã€VisualVMç­‰ï¼‰å®šä½å’Œä¿®å¤å†…å­˜æ³„æ¼ã€‚</li><li><strong>é¿å…å¤§å¯¹è±¡å’Œé•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡</strong>ï¼šä¼˜åŒ–ä»£ç ä»¥å‡å°‘è¿™ç±»å¯¹è±¡æˆ–å»¶é•¿æ–°ç”Ÿä»£å¤§å°ã€‚</li><li><strong>è°ƒä¼˜GCç­–ç•¥å’Œå‚æ•°</strong>ï¼šæ ¹æ®åº”ç”¨éœ€æ±‚é€‰æ‹©åˆé€‚çš„GCç®—æ³•ï¼ˆå¦‚G1ã€CMSç­‰ï¼‰å¹¶è¿›è¡Œå‚æ•°è°ƒä¼˜ã€‚</li><li><strong>é¿å…æ‰‹åŠ¨è§¦å‘GC</strong>ï¼šä¸è¦ä½¿ç”¨<code>System.gc()</code>ã€‚</li><li><strong>åº”ç”¨å±‚é¢çš„ä¼˜åŒ–</strong>ï¼šæ¯”å¦‚ä½¿ç”¨ç¼“å­˜æ¥å‡å°‘æ•°æ®åº“æŸ¥è¯¢ï¼Œä»è€Œå‡å°‘å¯¹è±¡åˆ›å»ºã€‚</li><li><strong>ç›‘æ§å’Œæ—¥å¿—åˆ†æ</strong>ï¼šæŒç»­ç›‘æ§GCæ—¥å¿—å’Œç³»ç»Ÿæ€§èƒ½ï¼Œæ ¹æ®å®é™…æƒ…å†µä½œå‡ºè°ƒæ•´ã€‚</li></ol><h3 id="g1å›æ”¶å™¨-hopå‚æ•°-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#g1å›æ”¶å™¨-hopå‚æ•°-2023-å¿«æ‰‹" aria-hidden="true">#</a> G1å›æ”¶å™¨ hopå‚æ•°ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><h3 id="g1å›æ”¶å™¨å¦‚ä½•å›æ”¶è€å¹´ä»£å¯¹è±¡-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#g1å›æ”¶å™¨å¦‚ä½•å›æ”¶è€å¹´ä»£å¯¹è±¡-2023-å¿«æ‰‹" aria-hidden="true">#</a> G1å›æ”¶å™¨å¦‚ä½•å›æ”¶è€å¹´ä»£å¯¹è±¡ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>æ ¹æ®æˆ‘çš„æœç´¢ç»“æœï¼Œå…³äºJava G1å›æ”¶å™¨å¦‚ä½•å›æ”¶è€å¹´ä»£å¯¹è±¡ï¼Œæœ‰å‡ ä¸ªæ–¹é¢éœ€è¦æ³¨æ„ã€‚</p><p>é¦–å…ˆï¼Œåœ¨G1å›æ”¶å™¨ä¸­ï¼Œè€å¹´ä»£å¯¹è±¡çš„å›æ”¶æ˜¯é€šè¿‡å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤æ¥å®ç°çš„ã€‚G1å›æ”¶å™¨å°†æ•´ä¸ªJavaå †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œæ¯ä¸ªåŒºåŸŸå¯ä»¥å±äºæ–°ç”Ÿä»£æˆ–è€å¹´ä»£ã€‚åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼ŒG1ä¼šæ ¹æ®åƒåœ¾çš„åˆ†å¸ƒæƒ…å†µï¼Œé€‰æ‹©æœ€æœ‰ä»·å€¼çš„åŒºåŸŸè¿›è¡Œå›æ”¶ï¼Œè¿™ä¹ŸåŒ…æ‹¬äº†è€å¹´ä»£çš„åŒºåŸŸã€‚</p><p>å…¶æ¬¡ï¼ŒG1å›æ”¶å™¨é‡‡ç”¨äº†åˆ†ä»£æ”¶é›†çš„ç­–ç•¥ï¼Œå¯ä»¥åŒæ—¶å¤„ç†æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„åƒåœ¾å›æ”¶ã€‚åœ¨å›æ”¶è€å¹´ä»£å¯¹è±¡æ—¶ï¼ŒG1å›æ”¶å™¨æ‰§è¡Œçš„æ“ä½œåŒ…æ‹¬æ ‡è®°ã€æ··åˆå’Œæ¸…é™¤ã€‚é¦–å…ˆï¼ŒG1å›æ”¶å™¨ä¼šå¯¹Javaå †è¿›è¡Œå¹¶å‘æ ‡è®°ï¼Œæ ‡è®°å‡ºè¢«å¼•ç”¨çš„å¯¹è±¡å’Œä¸å¯è¾¾çš„å¯¹è±¡ã€‚ç„¶åï¼ŒG1ä¼šè¿›è¡Œæ··åˆæ”¶é›†ï¼ˆMixed Collectionï¼‰ï¼Œå³åŒæ—¶å›æ”¶æ–°ç”Ÿä»£å’Œéƒ¨åˆ†è€å¹´ä»£çš„å¯¹è±¡ï¼Œå¹¶ç•™ä¸‹ä¸€éƒ¨åˆ†è€å¹´ä»£çš„åŒºåŸŸæœªè¢«å›æ”¶ã€‚æœ€åï¼ŒG1å›æ”¶å™¨ä¼šåœ¨éœ€è¦è¿›è¡Œå…¨å±€åƒåœ¾å›æ”¶æ—¶ï¼Œå¯¹å‰©ä½™çš„è€å¹´ä»£åŒºåŸŸè¿›è¡Œå¹¶å‘æ¸…é™¤ã€‚</p>`,53),Fs={href:"https://docs.oracle.com/en/java/javase/17/gctuning/garbage-first-g1-garbage-collector1.html",target:"_blank",rel:"noopener noreferrer"},zs=t('<p>æ€»ç»“ä¸€ä¸‹ï¼ŒJava G1å›æ”¶å™¨é€šè¿‡å¹¶å‘æ ‡è®°ã€æ··åˆæ”¶é›†å’Œå¹¶å‘æ¸…é™¤ç­‰æ­¥éª¤ï¼Œå®ç°äº†å¯¹è€å¹´ä»£å¯¹è±¡çš„å›æ”¶ã€‚å®ƒé‡‡ç”¨åˆ†ä»£æ”¶é›†çš„ç­–ç•¥ï¼Œå¹¶ç»“åˆäº†ä¸€äº›ä¼˜åŒ–æŠ€æœ¯ï¼Œä»¥è¾¾åˆ°ä½å»¶è¿Ÿã€é«˜æ•ˆç‡çš„åƒåœ¾å›æ”¶ç›®æ ‡ã€‚</p><h2 id="ğŸ“­-ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#ğŸ“­-ä¸­é—´ä»¶" aria-hidden="true">#</a> ğŸ“­ ä¸­é—´ä»¶</h2><h3 id="è¯·æ±‚å¾ˆå¤š-æ¶ˆæ¯å †ç§¯å¤„ç†ä¸è¿‡æ¥äº†å¦‚ä½•åº”å¯¹-2023æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚å¾ˆå¤š-æ¶ˆæ¯å †ç§¯å¤„ç†ä¸è¿‡æ¥äº†å¦‚ä½•åº”å¯¹-2023æ»´æ»´" aria-hidden="true">#</a> è¯·æ±‚å¾ˆå¤šï¼Œæ¶ˆæ¯å †ç§¯å¤„ç†ä¸è¿‡æ¥äº†å¦‚ä½•åº”å¯¹ï¼ˆ2023æ»´æ»´ï¼‰</h3><p>å¦‚æœå‘ç°æ¶ˆæ¯ä¸­é—´ä»¶ä¸­çš„æ¶ˆæ¯æ­£åœ¨å †ç§¯ï¼Œè¿™å¯èƒ½æ„å‘³ç€ç”Ÿäº§è€…ç”Ÿäº§çš„æ¶ˆæ¯é€Ÿåº¦å¤§äºæ¶ˆè´¹è€…çš„æ¶ˆè´¹é€Ÿåº¦ã€‚æœ‰å‡ ç§å¯èƒ½çš„ç­–ç•¥å¯ä»¥ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼š</p><ol><li>æ‰©å±•æ¶ˆæ¯ä¸­é—´ä»¶<strong>é›†ç¾¤</strong>ï¼šè€ƒè™‘å¯¹æ¶ˆæ¯ä¸­é—´ä»¶è¿›è¡Œæ°´å¹³æ‰©å±•ï¼Œæé«˜æ•´ä½“çš„å¤„ç†èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œåœ¨RabbitMQä¸­ï¼Œå¯ä»¥å¢åŠ èŠ‚ç‚¹æ¥å®ç°é›†ç¾¤æ‰©å±•ã€‚</li><li><strong>é™çº§</strong>ï¼šåœ¨é™çº§ç­–ç•¥ä¸­ï¼Œå½“å‘ç°æ¶ˆæ¯å¤„ç†é€Ÿåº¦ä¸è¶³ä»¥åº”å¯¹ç§¯å‹çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥å†³å®šå¯¹æŸäº›ç±»å‹æˆ–ä¼˜å…ˆçº§è¾ƒä½çš„æ¶ˆæ¯è¿›è¡Œé™çº§å¤„ç†ã€‚é™çº§å¤„ç†çš„æ–¹å¼å¯èƒ½åŒ…æ‹¬å‡æ…¢å¤„ç†è¿™äº›æ¶ˆæ¯çš„é€Ÿåº¦ã€æš‚æ—¶å¿½ç•¥è¿™äº›æ¶ˆæ¯ï¼Œæˆ–è€…å°†è¿™äº›æ¶ˆæ¯è½¬ç§»åˆ°ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ç­‰å¾…å¤„ç†ã€‚è¿™æ ·ï¼Œç³»ç»Ÿå¯ä»¥æŠŠæ›´å¤šçš„èµ„æºç”¨äºå¤„ç†é«˜ä¼˜å…ˆçº§çš„æ¶ˆæ¯ã€‚</li><li><strong>ç†”æ–­</strong>ï¼šç†”æ–­æ˜¯ä¸€ç§é˜²æ­¢ç³»ç»Ÿè¿‡è½½å¹¶å¿«é€Ÿå¤±è´¥çš„æœºåˆ¶ï¼Œç±»ä¼¼äºç”µè·¯ä¸­çš„ç†”æ–­å™¨ã€‚å½“å‘ç°æ¶ˆæ¯å¤„ç†ç³»ç»Ÿçš„å‹åŠ›è¿‡å¤§æ—¶ï¼Œå¯ä»¥å¯åŠ¨ç†”æ–­æœºåˆ¶ã€‚è¿™å¯èƒ½æ„å‘³ç€æš‚æ—¶æ‹’ç»æ¥æ”¶æ›´å¤šçš„æ¶ˆæ¯ï¼Œæˆ–è€…å¯¹æ–°åˆ°çš„æ¶ˆæ¯è¿›è¡Œå¿«é€Ÿå¤±è´¥å¤„ç†ï¼ˆä¾‹å¦‚ç«‹å³è¿”å›é”™è¯¯ï¼Œè€Œä¸æ˜¯å°†å…¶æ”¾å…¥é˜Ÿåˆ—ï¼‰ã€‚ä¸€æ—¦å¯åŠ¨äº†ç†”æ–­æœºåˆ¶ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªæœºåˆ¶å»æ£€æµ‹ä½•æ—¶å¯ä»¥â€œé—­åˆâ€ç†”æ–­å™¨ï¼Œä¹Ÿå°±æ˜¯ä½•æ—¶å¯ä»¥æ¢å¤æ­£å¸¸å¤„ç†æ¶ˆæ¯ã€‚è¿™é€šå¸¸æ¶‰åŠåˆ°å¯¹ç³»ç»Ÿçš„è´Ÿè½½å’Œæ€§èƒ½è¿›è¡Œç›‘æ§ï¼Œå¹¶è®¾ç½®åˆé€‚çš„é˜ˆå€¼ã€‚</li></ol><h3 id="æ¶ˆæ¯å †ç§¯æ—¶-ç”¨æˆ·ä»¥ä¸ºå¡äº†-å¤šæ¬¡è¯·æ±‚æ€ä¹ˆå¤„ç†-2023æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯å †ç§¯æ—¶-ç”¨æˆ·ä»¥ä¸ºå¡äº†-å¤šæ¬¡è¯·æ±‚æ€ä¹ˆå¤„ç†-2023æ»´æ»´" aria-hidden="true">#</a> æ¶ˆæ¯å †ç§¯æ—¶ï¼Œç”¨æˆ·ä»¥ä¸ºå¡äº†ï¼Œå¤šæ¬¡è¯·æ±‚æ€ä¹ˆå¤„ç†ï¼ˆ2023æ»´æ»´ï¼‰</h3><p>å½“æ¶ˆæ¯ç§¯ç´¯æ—¶ï¼Œç”¨æˆ·è®¤ä¸ºå®ƒå¡ä½äº†ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Ÿä»¥ä¸‹æ˜¯å¯èƒ½çš„å¤„ç†æ–¹å¼ï¼š</p><ol><li><strong>é™æµç­–ç•¥</strong>ï¼šå¯ä»¥é€šè¿‡é™åˆ¶æ¯ä¸ªç”¨æˆ·åœ¨ç‰¹å®šæ—¶é—´æ®µå†…çš„è¯·æ±‚æ¬¡æ•°æ¥æ§åˆ¶æ¶ˆæ¯çš„ç§¯ç´¯ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç®—æ³•æ¥å®ç°ã€‚</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šå¦‚æœæœåŠ¡å™¨æ— æ³•åŠæ—¶å“åº”æ‰€æœ‰è¯·æ±‚ï¼Œå¯ä»¥è€ƒè™‘å°†è¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œå¹¶é€šè¿‡åå°è¿›ç¨‹å¼‚æ­¥å¤„ç†ã€‚è¿™æ ·ç”¨æˆ·ä¸å¿…ç­‰å¾…è¯·æ±‚å®Œæˆï¼Œå¯ä»¥é™ä½å¡é¡¿çš„æ„Ÿè§‰ã€‚</li><li><strong>åŠ è½½å‡è¡¡</strong>ï¼šé€šè¿‡ä½¿ç”¨å¤šå°æœåŠ¡å™¨æ¥åˆ†æ‹…è´Ÿè½½ï¼Œå¯ä»¥æœ‰æ•ˆåœ°åˆ†æ•£è¯·æ±‚ï¼Œå‡è½»å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ã€‚</li><li><strong>åé¦ˆæœºåˆ¶</strong>ï¼šå¯ä»¥å‘ç”¨æˆ·æä¾›åé¦ˆï¼Œå‘ŠçŸ¥ä»–ä»¬è¯·æ±‚æ­£åœ¨å¤„ç†ä¸­æˆ–åœ¨é˜Ÿåˆ—ä¸­æ’é˜Ÿã€‚è¿™æ ·ï¼Œå³ä½¿æœ‰æ¶ˆæ¯ç§¯ç´¯ï¼Œç”¨æˆ·ä¹Ÿä¼šæ˜ç™½æƒ…å†µå¹¶ç­‰å¾…ã€‚</li><li><strong>ä¼˜åŒ–å¤„ç†é€»è¾‘</strong>ï¼šå¦‚æœé—®é¢˜å‡ºåœ¨å¤„ç†è¯·æ±‚çš„é€»è¾‘ä¸Šï¼Œå¯ä»¥å°è¯•ä¼˜åŒ–ä»£ç ï¼Œæé«˜å¤„ç†é€Ÿåº¦ã€‚</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå¦‚æœæœ‰è¯·æ±‚å¤±è´¥æˆ–å¡ä½ï¼Œåº”æä¾›ç›¸åº”çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå¦‚é‡è¯•ã€è¶…æ—¶ç­‰ï¼Œç¡®ä¿ä¸ä¼šé˜»å¡åç»­çš„è¯·æ±‚ã€‚</li><li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šå¯¹äºä¸€äº›é‡å¤çš„æˆ–è€…è®¡ç®—é‡å¤§çš„è¯·æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¼“å­˜æ¥å‡è½»æœåŠ¡å™¨çš„è´Ÿè½½ã€‚</li></ol><h3 id="esçš„ç´¢å¼•-ç´¢å¼•å­˜å‚¨ç©ºé—´å ç”¨-esç´¢å¼•å’Œb-æ ‘ç´¢å¼•åŒºåˆ«-2023-ç”¨å‹" tabindex="-1"><a class="header-anchor" href="#esçš„ç´¢å¼•-ç´¢å¼•å­˜å‚¨ç©ºé—´å ç”¨-esç´¢å¼•å’Œb-æ ‘ç´¢å¼•åŒºåˆ«-2023-ç”¨å‹" aria-hidden="true">#</a> ESçš„ç´¢å¼•ï¼Ÿç´¢å¼•å­˜å‚¨ç©ºé—´å ç”¨ï¼ŸESç´¢å¼•å’Œb+æ ‘ç´¢å¼•åŒºåˆ«ï¼Ÿï¼ˆ2023 ç”¨å‹ï¼‰</h3><p>ESçš„ç´¢å¼•ï¼š</p><p>Elasticsearchä½¿ç”¨çš„å€’æ’ç´¢å¼•ã€‚åŸºäºå€’æ’ç´¢å¼•æ•°æ®ç»“æ„çš„æ•°æ®å‹ç¼©æŠ€æœ¯ã€‚åœ¨å€’æ’ç´¢å¼•ä¸­ï¼Œæ¯ç¯‡æ–‡æ¡£éƒ½å¯¹åº”ä¸€ä¸ªæ–‡æ¡£ç¼–å·ï¼Œä»¥åŠè‹¥å¹²ä¸ªå•è¯ï¼ˆæˆ–è¯é¡¹ï¼‰å’Œå®ƒä»¬åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„ä½ç½®ï¼Œå°†è¿™äº›ç¼–å·ä»¥åŠä½ç½®ç­‰å…ƒä¿¡æ¯é€šè¿‡ä¸€å®šç®—æ³•å…ˆè¿›è¡Œé¢„å¤„ç†å†è¿›è¡Œå‹ç¼©å­˜å‚¨ï¼Œä»è€Œå¤§å¤§å‡å°äº†å­˜å‚¨ç©ºé—´ï¼Œé™ä½äº†I/Oè¯»å†™çš„æ—¶é—´æˆæœ¬ï¼Œæé«˜äº†ç´¢å¼•çš„æ£€ç´¢æ•ˆç‡ã€‚å€’æ’ç´¢å¼•é‡‡ç”¨äº†å€’åºå’Œè·³è¡¨æŠ€æœ¯ï¼Œå¯ä»¥å¿«é€Ÿå®šä½å¹¶éå†æ–‡æ¡£ï¼Œç„¶åè¿›è¡Œè¯é¡¹åŒ¹é…ï¼Œå‡å°‘äº†æ— æ•ˆéå†ï¼ŒåŒæ—¶ä¹Ÿç¼“è§£äº†å†…éƒ¨èŠ‚ç‚¹å¯èƒ½äº§ç”Ÿçš„ç£ç›˜æˆ–å†…å­˜I/Oå‹åŠ›ã€‚å€’æ’ç´¢å¼•ä¸­è¯é¡¹çš„åŸºæ•°ç›¸å¯¹æ¯”è¾ƒå°ï¼Œéå†æ£€ç´¢æ—¶æ— éœ€éå†æ•´ä¸ªç´¢å¼•ï¼Œå¯ä»¥æ›´åŠ å¿«é€Ÿåœ°æ‰¾åˆ°æ–‡æ¡£ï¼ŒèŠ‚çº¦äº†éå†ç´¢å¼•æ—¶çš„æ—¶é—´å¼€é”€ã€‚</p><p>ç´¢å¼•å­˜å‚¨ç©ºé—´å ç”¨ï¼š</p><p>å€’æ’ç´¢å¼•çš„å­˜å‚¨ç©ºé—´å–å†³äºå¤šä¸ªå› ç´ ï¼ŒåŒ…æ‹¬ç´¢å¼•çš„å¤§å°ã€æ–‡æ¡£çš„æ•°é‡å’Œå­—æ®µçš„ç±»å‹ç­‰ã€‚å€’æ’ç´¢å¼•çš„å­˜å‚¨ç©ºé—´ä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šè¯å…¸å’Œå€’æ’è¡¨ã€‚è¯å…¸å­˜å‚¨äº†æ‰€æœ‰ä¸é‡å¤çš„è¯é¡¹ï¼Œå¹¶ä¸ºæ¯ä¸ªè¯é¡¹åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚è¯å…¸çš„å¤§å°å–å†³äºç´¢å¼•ä¸­çš„ä¸é‡å¤è¯é¡¹æ•°é‡ã€‚å€’æ’è¡¨å­˜å‚¨äº†æ¯ä¸ªè¯é¡¹åœ¨æ–‡æ¡£ä¸­çš„å‡ºç°ä½ç½®ä¿¡æ¯ã€‚å€’æ’è¡¨çš„å¤§å°ä¸æ–‡æ¡£æ•°é‡ã€æ–‡æ¡£é•¿åº¦å’Œè¯é¡¹çš„é¢‘ç‡ç­‰æœ‰å…³ã€‚åœ¨å€’æ’è¡¨ä¸­ï¼Œæ¯ä¸ªè¯é¡¹éƒ½å¯¹åº”ä¸€ä¸ªåŒ…å«è¯¥è¯é¡¹çš„æ–‡æ¡£åˆ—è¡¨ï¼Œè¿™äº›æ–‡æ¡£åˆ—è¡¨è®°å½•äº†è¯é¡¹åœ¨ç›¸åº”æ–‡æ¡£ä¸­å‡ºç°çš„ä½ç½®ã€‚ç»¼åˆæ¥çœ‹ï¼Œå€’æ’ç´¢å¼•çš„å­˜å‚¨ç©ºé—´å ç”¨ä¸»è¦å—ä»¥ä¸‹å‡ ä¸ªå› ç´ å½±å“ï¼š</p><ol><li>æ–‡æ¡£æ•°é‡ï¼šæ–‡æ¡£æ•°é‡è¶Šå¤šï¼Œå€’æ’ç´¢å¼•å ç”¨çš„å­˜å‚¨ç©ºé—´å°±è¶Šå¤§ã€‚</li><li>å­—æ®µç±»å‹ï¼šä¸åŒç±»å‹çš„å­—æ®µåœ¨å€’æ’ç´¢å¼•ä¸­æ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´å¯èƒ½ä¼šæœ‰æ‰€å·®å¼‚ã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬ç±»å‹çš„å­—æ®µå¯èƒ½éœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´æ¥å­˜å‚¨è¯é¡¹ä¿¡æ¯ã€‚</li><li>è¯é¡¹é‡å¤æ€§ï¼šå¦‚æœä¸€ä¸ªè¯é¡¹åœ¨å¤šä¸ªæ–‡æ¡£ä¸­é¢‘ç¹å‡ºç°ï¼Œå€’æ’ç´¢å¼•ä¼šå ç”¨æ›´å¤šçš„å­˜å‚¨ç©ºé—´æ¥è®°å½•è¿™äº›æ–‡æ¡£åˆ—è¡¨ã€‚</li></ol><p>ESç´¢å¼•å’Œb+æ ‘ç´¢å¼•åŒºåˆ«ï¼š</p><ol><li>æ•°æ®ç»“æ„ï¼šå€’æ’ç´¢å¼•æ˜¯ä¸€ç§åŸºäºè¯é¡¹çš„æ•°æ®ç»“æ„ï¼Œå®ƒå°†æ–‡æ¡£ä¸­çš„æ¯ä¸ªè¯é¡¹ä¸å…¶æ‰€åœ¨çš„æ–‡æ¡£è¿›è¡Œå…³è”ã€‚è€ŒB+Treeç´¢å¼•åˆ™æ˜¯ä¸€ç§æ ‘çŠ¶ç»“æ„ï¼Œæ ¹æ®ç´¢å¼•é”®å€¼æ„å»ºæœ‰åºçš„ç´¢å¼•æ ‘ã€‚</li><li>å­˜å‚¨æ–¹å¼ï¼šå€’æ’ç´¢å¼•ä»¥æ–‡æ¡£ä¸ºå•ä½å­˜å‚¨è¯é¡¹ä¿¡æ¯ï¼Œæ¯ä¸ªè¯é¡¹æŒ‡å‘åŒ…å«å®ƒçš„æ–‡æ¡£åˆ—è¡¨ã€‚è€ŒB+Treeç´¢å¼•æ˜¯å°†ç´¢å¼•é”®å€¼ä¸å¯¹åº”çš„æ•°æ®è®°å½•è¿›è¡Œå…³è”ã€‚</li><li>é€‚ç”¨èŒƒå›´ï¼šå€’æ’ç´¢å¼•é€‚åˆå¤„ç†æ–‡æœ¬ç±»æ•°æ®ï¼Œå°¤å…¶åœ¨å…¨æ–‡æœç´¢å’Œå…³é”®å­—åŒ¹é…æ–¹é¢å…·æœ‰å‡ºè‰²çš„æ€§èƒ½ã€‚è€ŒB+Treeç´¢å¼•é€‚ç”¨äºæ›´ä¸€èˆ¬çš„æ•°æ®ç»“æ„ï¼Œå¸¸è§äºå…³ç³»å‹æ•°æ®åº“çš„ç´¢å¼•å®ç°ã€‚</li><li>æ£€ç´¢æ•ˆç‡ï¼šç”±äºå€’æ’ç´¢å¼•çš„å­˜å‚¨ç»“æ„å’Œæœç´¢ç®—æ³•çš„ä¼˜åŒ–ï¼Œå®ƒåœ¨å¤„ç†å¤§è§„æ¨¡æ–‡æœ¬æ•°æ®æ—¶é€šå¸¸å…·æœ‰æ›´é«˜çš„æ£€ç´¢æ•ˆç‡ã€‚B+Treeç´¢å¼•åˆ™åœ¨å¤„ç†æ›´å¤šæ ·åŒ–çš„æ•°æ®å’ŒèŒƒå›´æŸ¥è¯¢æ—¶æ›´å…·ä¼˜åŠ¿ã€‚</li></ol>',16),Us=n("p",null,"å‚è€ƒï¼š",-1),Gs={href:"https://www.jianshu.com/p/4aea8af7a9ea",target:"_blank",rel:"noopener noreferrer"},Ks={href:"https://blog.csdn.net/truelove12358/article/details/105577414",target:"_blank",rel:"noopener noreferrer"},Qs={href:"https://juejin.cn/post/7023203644807839780",target:"_blank",rel:"noopener noreferrer"},Vs=t('<h3 id="kafkaæ˜¯åŸºäºç£ç›˜å­˜å‚¨-ä¸ºä»€ä¹ˆé«˜æ€§èƒ½-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#kafkaæ˜¯åŸºäºç£ç›˜å­˜å‚¨-ä¸ºä»€ä¹ˆé«˜æ€§èƒ½-2023-å¾—ç‰©" aria-hidden="true">#</a> kafkaæ˜¯åŸºäºç£ç›˜å­˜å‚¨ï¼Œä¸ºä»€ä¹ˆé«˜æ€§èƒ½ï¼ˆ2023 å¾—ç‰©ï¼‰</h3><ol><li><strong>æ‰¹å¤„ç†å’Œç¼“å†²</strong>: Kafka å°†æ•°æ®åˆ†æ‰¹å­˜å‚¨å’Œå‘é€ï¼Œè¿™æ ·èƒ½å¤Ÿå‡å°‘ç½‘ç»œè°ƒç”¨çš„æ¬¡æ•°å’Œæˆæœ¬ã€‚</li><li><strong>åˆ†å¸ƒå¼æ¶æ„</strong>: Kafka é›†ç¾¤ç”±å¤šä¸ª brokers ç»„æˆï¼Œæ•°æ®å¯ä»¥å¹³è¡Œåœ°å­˜å‚¨å’Œå¤„ç†ï¼Œè¿™å¤§å¤§æé«˜äº†ç³»ç»Ÿçš„ååé‡ã€‚</li><li><strong>åˆ†åŒºå’Œå‰¯æœ¬</strong>: æ¯ä¸ª Kafka ä¸»é¢˜ï¼ˆTopicï¼‰å¯ä»¥è¢«åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼ˆPartitionï¼‰ï¼Œæ¯ä¸ªåˆ†åŒºå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå‰¯æœ¬ã€‚è¿™æ ·èƒ½æä¾›æ•°æ®å†—ä½™ï¼Œä¹Ÿä½¿å¾—å¹¶è¡Œè¯»å†™æˆä¸ºå¯èƒ½ã€‚</li><li><strong>é«˜æ•ˆçš„å­˜å‚¨æ ¼å¼</strong>: Kafka ä½¿ç”¨äº†é«˜æ•ˆçš„æ•°æ®ç»“æ„å’Œå­˜å‚¨æ ¼å¼ï¼ˆä¾‹å¦‚ snappy æˆ– lz4 å‹ç¼©ï¼‰æ¥å‡å°‘ç£ç›˜ I/Oã€‚</li><li><strong>é¡ºåºè¯»å†™</strong>: ç£ç›˜é¡ºåºè¯»å†™é€šå¸¸æ¯”éšæœºè¯»å†™è¦å¿«å¾—å¤šã€‚ç”±äº Kafka çš„æ—¥å¿—ç»“æ„å­˜å‚¨ï¼Œæ•°æ®é€šå¸¸ä»¥é¡ºåºçš„æ–¹å¼å†™å…¥å’Œè¯»å–ã€‚</li><li><strong>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è§£è€¦</strong>: Kafka çš„å‘å¸ƒ-è®¢é˜…æ¨¡å‹å…è®¸ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è§£è€¦ï¼Œä½¿ç³»ç»Ÿå…·æœ‰æ›´å¥½çš„å¯æ‰©å±•æ€§å’Œå®¹é”™æ€§ã€‚</li><li><strong>ä½å»¶è¿Ÿ</strong>: Kafka è®¾è®¡ç”¨äºä¿è¯ä½å»¶è¿Ÿï¼Œé€šè¿‡åœ¨ broker å’Œå®¢æˆ·ç«¯ä¹‹é—´æœ‰æ•ˆåœ°ç§»åŠ¨æ•°æ®ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¤„ç†æ•°åä¸‡æ¡æ¶ˆæ¯/ç§’ã€‚</li><li><strong>æŒä¹…æ€§</strong>: Kafka å¯ä»¥é…ç½®ä¸ºå¤šç§æ•°æ®æŒä¹…æ€§é€‰é¡¹ï¼Œä»ä¸ä¿ç•™æ•°æ®åˆ°æ°¸ä¹…å­˜å‚¨ï¼Œæ ¹æ®éœ€è¦å¯çµæ´»é…ç½®ã€‚</li><li><strong>å®¢æˆ·ç«¯å¤šæ ·æ€§</strong>: Kafka æä¾›äº†å¤šç§è¯­è¨€çš„å®¢æˆ·ç«¯åº“ï¼Œæ˜“äºé›†æˆåˆ°ç°æœ‰çš„æ¶æ„å’Œåº”ç”¨ä¸­ã€‚</li><li><strong>ç›‘æ§å’Œç®¡ç†</strong>: Kafka æœ‰ä¸°å¯Œçš„ç›‘æ§å’Œç®¡ç†å·¥å…·ï¼Œæ–¹ä¾¿å¯¹é›†ç¾¤è¿›è¡Œç»´æŠ¤å’Œä¼˜åŒ–ã€‚</li></ol><h3 id="kafka-ackæœºåˆ¶-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#kafka-ackæœºåˆ¶-2023-å¾—ç‰©" aria-hidden="true">#</a> kafka ackæœºåˆ¶ï¼ˆ2023 å¾—ç‰©ï¼‰</h3>',3),Xs={href:"https://blog.csdn.net/zhouxiaozxx/article/details/120569086",target:"_blank",rel:"noopener noreferrer"},Ws=t('<p>å…·ä½“æ¥è¯´ï¼Œä¸åŒçš„ackå‚æ•°å–å€¼æœ‰ä»¥ä¸‹å«ä¹‰ï¼š</p><ul><li>ack=0ï¼šç”Ÿäº§è€…å‘é€ä¸€æ¬¡æ¶ˆæ¯åå°±ä¸å†è¿›è¡Œä»»ä½•ç¡®è®¤ã€‚è¿™æ„å‘³ç€æ— è®ºæ¶ˆæ¯æ˜¯å¦å‘é€æˆåŠŸï¼Œç”Ÿäº§è€…éƒ½ä¸ä¼šçŸ¥é“ï¼Œå› æ­¤å¯èƒ½ä¼šå‘ç”Ÿæ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µã€‚</li><li>ack=1ï¼šç”Ÿäº§è€…å‘é€æ¶ˆæ¯åéœ€è¦æ¥æ”¶åˆ°åˆ†åŒºçš„leaderå‘é€çš„ç¡®è®¤æ”¶åˆ°çš„å›å¤ã€‚åªæœ‰å½“leaderå‰¯æœ¬æˆåŠŸå†™å…¥æ¶ˆæ¯æ—¶ï¼Œç”Ÿäº§è€…æ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å‘é€æˆåŠŸã€‚è¿™ç§æ¨¡å¼å¯ä»¥æä¾›è¾ƒé«˜çš„å¯é æ€§ï¼Œä½†å¯èƒ½ä¼šç‰ºç‰²éƒ¨åˆ†ååé‡ã€‚</li><li>ack=-1ï¼ˆæˆ–è€…allï¼‰ï¼šç”Ÿäº§è€…å‘é€æ¶ˆæ¯åéœ€è¦ç­‰å¾…leaderå°†æ¶ˆæ¯åŒæ­¥ç»™æ‰€æœ‰çš„followerã€‚åªæœ‰å½“æ‰€æœ‰followeréƒ½æˆåŠŸå¤åˆ¶äº†æ¶ˆæ¯åï¼Œç”Ÿäº§è€…æ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å‘é€æˆåŠŸã€‚è¿™ç§æ¨¡å¼å¯ä»¥æä¾›æœ€é«˜çš„å¯é æ€§ï¼Œä½†å¯èƒ½ä¼šé™ä½ååé‡ã€‚</li></ul><h2 id="ğŸ”—-å¾®æœåŠ¡ã€åˆ†å¸ƒå¼" tabindex="-1"><a class="header-anchor" href="#ğŸ”—-å¾®æœåŠ¡ã€åˆ†å¸ƒå¼" aria-hidden="true">#</a> ğŸ”— å¾®æœåŠ¡ã€åˆ†å¸ƒå¼</h2><h3 id="rpcå¦‚ä½•è¿›è¡Œåºåˆ—åŒ–-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#rpcå¦‚ä½•è¿›è¡Œåºåˆ—åŒ–-2023-é˜¿é‡Œ" aria-hidden="true">#</a> RPCå¦‚ä½•è¿›è¡Œåºåˆ—åŒ–ï¼Ÿï¼ˆ2023 é˜¿é‡Œï¼‰</h3><p>RPCçš„åºåˆ—åŒ–æ˜¯å°†æ•°æ®ç»“æ„æˆ–å¯¹è±¡è½¬æ¢æˆå¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“çš„æ ¼å¼çš„è¿‡ç¨‹ã€‚åºåˆ—åŒ–åçš„æ•°æ®å¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå¹¶åœ¨å¦ä¸€ç«¯ååºåˆ—åŒ–ï¼Œä»¥é‡å»ºåŸå§‹æ•°æ®ç»“æ„æˆ–å¯¹è±¡ã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åºåˆ—åŒ–RPCæ•°æ®ï¼ŒåŒ…æ‹¬ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¦‚Protocol Buffers1ã€JSONã€XMLç­‰ã€‚</p><h3 id="dubbo-çš„è¯·æ±‚å¤„ç†æµç¨‹-2023-å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#dubbo-çš„è¯·æ±‚å¤„ç†æµç¨‹-2023-å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> dubbo çš„è¯·æ±‚å¤„ç†æµç¨‹ï¼ˆ2023 å®Œç¾ä¸–ç•Œï¼‰</h3><p>Dubbo çš„è¯·æ±‚å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æœåŠ¡æ¶ˆè´¹æ–¹(å®¢æˆ·ç«¯)è°ƒç”¨è¿œç¨‹æœåŠ¡çš„ä»£ç†å¯¹è±¡(Proxy)å‘èµ· RPC è°ƒç”¨ã€‚</li><li>Proxy æ¥æ”¶åˆ°è°ƒç”¨å,å°†è°ƒç”¨ä¿¡æ¯è½¬æ¢æˆ Request å¯¹è±¡,ç„¶åå‘é€åˆ° Dubbo çš„æ ¸å¿ƒçº¿ç¨‹æ±  Executor ä¸­ã€‚</li><li>Executor åœ¨çº¿ç¨‹æ± ä¸­é€‰å–ä¸€ä¸ªçº¿ç¨‹,æŠŠ Request å‘ç»™ Dubbo çš„ NIO æœåŠ¡å™¨ NettyServerã€‚</li><li>NettyServer æ”¶åˆ° Request å,é€šè¿‡æ•°æ®åº“æŸ¥è¯¢æ‰¾åˆ°æœåŠ¡æä¾›æ–¹åœ°å€,ç„¶åå°† Request ç¼–ç æˆ Netty çš„ Buffer å¯¹è±¡ã€‚</li><li>NettyServer é€šè¿‡Netty Client è¿æ¥è¿œç¨‹æœåŠ¡æä¾›æ–¹,å¹¶å°†ç¼–ç åçš„ Buffer å¯¹è±¡å‘é€è¿‡å»ã€‚</li><li>æœåŠ¡æä¾›æ–¹ NettyServer æ”¶åˆ° Buffer å,è§£ç æˆ Request å¯¹è±¡ã€‚ç„¶åæŸ¥æ‰¾æœ¬åœ°çš„æœåŠ¡å®ç°å¹¶è°ƒç”¨æœåŠ¡æ–¹æ³•ã€‚</li><li>æœåŠ¡æ–¹æ³•æ‰§è¡Œå®Œæˆå,å°†è¿”å›ç»“æœå°è£…æˆ Response å¯¹è±¡,å¹¶ç¼–ç æˆ Bufferã€‚</li><li>æœåŠ¡æä¾›æ–¹ NettyServer å°† Buffer é€šè¿‡ Netty Client è¿æ¥å‘é€ç»™æœåŠ¡æ¶ˆè´¹æ–¹ NettyServerã€‚</li><li>æœåŠ¡æ¶ˆè´¹æ–¹ NettyServer æ”¶åˆ°Bufferå,è§£ç æˆ Responseã€‚ç„¶åå‘é€ç»™ Executor çº¿ç¨‹æ± ã€‚</li><li>Executor å°† Response è¿”å›ç»™æœ€åˆçš„ Proxy è°ƒç”¨å¤„ã€‚Proxy å¾—åˆ°å“åº”ç»“æœå,è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>æ•´ä¸ª Dubbo RPC è°ƒç”¨è¿‡ç¨‹å®Œæˆã€‚</li></ol><p>æ‰€ä»¥ Dubbo çš„è¯·æ±‚å¤„ç†ä¸»è¦åˆ†ä¸ºå››éƒ¨åˆ†:</p><ol><li>å®¢æˆ·ç«¯ Proxy å‘é€è¯·æ±‚</li><li>æœåŠ¡æ¶ˆè´¹æ–¹æ”¶åˆ°è¯·æ±‚,ç»è¿‡çº¿ç¨‹æ± è½¬å‘ç»™ Netty æœåŠ¡å™¨</li><li>æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡,å°†è¯·æ±‚è½¬å‘ç»™æœåŠ¡æä¾›æ–¹</li><li>æœåŠ¡æä¾›æ–¹æ‰§è¡ŒæœåŠ¡å¹¶è¿”å›å“åº”,å°†å“åº”è¿”å›ç»™æœåŠ¡æ¶ˆè´¹æ–¹å’Œå®¢æˆ·ç«¯ã€‚</li><li>æ•´ä¸ªè¿‡ç¨‹ä¸­,Netty è´Ÿè´£æœåŠ¡å™¨ç½‘ç»œé€šä¿¡,Executor è´Ÿè´£çº¿ç¨‹æ± å’Œè¯·æ±‚è°ƒåº¦,Proxy è´Ÿè´£ä¸å®¢æˆ·ç«¯äº¤äº’ã€‚</li></ol>',10),Ys=n("p",null,"å‚è€ƒï¼š",-1),Zs={href:"https://cn.dubbo.apache.org/zh-cn/docsv2.7/dev/source/service-invoking-process/",target:"_blank",rel:"noopener noreferrer"},$s=t('<h3 id="åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§æ€ä¹ˆä¿è¯çš„-2023-èš‚èšé‡‘æœ" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§æ€ä¹ˆä¿è¯çš„-2023-èš‚èšé‡‘æœ" aria-hidden="true">#</a> åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§æ€ä¹ˆä¿è¯çš„ï¼Ÿï¼ˆ2023 èš‚èšé‡‘æœï¼‰</h3><ol><li><strong>Paxos</strong>ï¼šPaxos æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€è‡´æ€§ç®—æ³•ï¼Œå®ƒè§£å†³äº†åœ¨ä¸€ä¸ªä¸å¯é çš„ç½‘ç»œä¸­è¾¾æˆå…±è¯†çš„é—®é¢˜ã€‚Paxos æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡é€‰ä¸¾ä¸€ä¸ªææ¡ˆçš„é¢†å¯¼è€…ï¼ˆproposerï¼‰å¹¶åœ¨ææ¡ˆçš„å¤§å¤šæ•°æ¥å—è€…ï¼ˆaccepterï¼‰ä¹‹é—´è¾¾æˆå…±è¯†ã€‚</li><li><strong>Raft</strong>ï¼šRaft ç®—æ³•æ˜¯ä¸€ç§æ›´æ˜“äºç†è§£å’Œå®ç°çš„ä¸€è‡´æ€§ç®—æ³•ï¼Œç”¨äºç®¡ç†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤åˆ¶æ—¥å¿—ã€‚Raft é€šè¿‡é€‰ä¸¾é¢†å¯¼è€…å¹¶ç¡®ä¿æ—¥å¿—æ•°æ®åœ¨é›†ç¾¤ä¸­çš„èŠ‚ç‚¹è¾¾æˆä¸€è‡´æ¥å®ç°ä¸€è‡´æ€§ã€‚Raft é€šå¸¸ç”¨äºå®ç°åˆ†å¸ƒå¼æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰ã€‚</li><li><strong>ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰</strong>ï¼šä¸¤é˜¶æ®µæäº¤æ˜¯ä¸€ç§äº‹åŠ¡ç®¡ç†åè®®ï¼Œç”¨äºä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„äº‹åŠ¡ä¸€è‡´æ€§ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œäº‹åŠ¡åè°ƒè€…è¯·æ±‚æ‰€æœ‰å‚ä¸è€…é¢„å¤‡æäº¤ï¼›åœ¨ç¬¬äºŒé˜¶æ®µï¼Œäº‹åŠ¡åè°ƒè€…æ ¹æ®æ‰€æœ‰å‚ä¸è€…çš„åé¦ˆæäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚æ­¤åè®®å­˜åœ¨é˜»å¡é—®é¢˜ï¼Œå› ä¸ºå¦‚æœåè°ƒè€…å®•æœºï¼Œå‚ä¸è€…å¯èƒ½ä¼šä¸€ç›´ç­‰å¾…ã€‚</li><li><strong>ä¸‰é˜¶æ®µæäº¤ï¼ˆ3PCï¼‰</strong>ï¼šä¸‰é˜¶æ®µæäº¤æ˜¯ä¸¤é˜¶æ®µæäº¤çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œé€šè¿‡æ·»åŠ ä¸€ä¸ªâ€œé¢„æäº¤â€é˜¶æ®µæ¥å‡å°‘é˜»å¡é—®é¢˜ã€‚ç„¶è€Œï¼Œè¿™ç§åè®®åœ¨ç½‘ç»œåˆ†åŒºçš„æƒ…å†µä¸‹ä»å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚</li><li><strong>åˆ†å¸ƒå¼å¿«ç…§ç®—æ³•</strong>ï¼šåˆ†å¸ƒå¼å¿«ç…§ç®—æ³•ç”¨äºæ•æ‰åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å…¨å±€çŠ¶æ€ï¼Œä»¥è¯„ä¼°ä¸€è‡´æ€§æˆ–æ£€æµ‹æ­»é”ç­‰é—®é¢˜ã€‚Chandy-Lamport åˆ†å¸ƒå¼å¿«ç…§ç®—æ³•æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å®ç°ã€‚</li><li><strong>å‘é‡æ—¶é’Ÿå’Œç‰ˆæœ¬å‘é‡</strong>ï¼šå‘é‡æ—¶é’Ÿå’Œç‰ˆæœ¬å‘é‡æ˜¯ç”¨äºè·Ÿè¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­äº‹ä»¶ä¹‹é—´çš„å› æœå…³ç³»çš„æ•°æ®ç»“æ„ã€‚å®ƒä»¬å¯ä»¥å¸®åŠ©æ£€æµ‹å†²çªå’Œä¿æŒä¸€è‡´æ€§ã€‚</li><li><strong>Read Repair å’Œ Hinted Handoff</strong>ï¼šè¿™äº›æŠ€æœ¯ç”¨äºæœ€ç»ˆä¸€è‡´æ€§ç³»ç»Ÿï¼ˆå¦‚ Apache Cassandraï¼‰ï¼Œåœ¨èŠ‚ç‚¹æ•…éšœåè¿›è¡Œæ•°æ®ä¿®å¤ä»¥ä¿æŒä¸€è‡´æ€§ã€‚</li></ol><p>å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼šæ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚å’Œåœºæ™¯é€‰æ‹©åˆé€‚çš„ä¸€è‡´æ€§åè®®å’Œç®—æ³•ã€‚åœ¨é€‰æ‹©æ—¶ï¼Œéœ€è¦æƒè¡¡ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ä¹‹é—´çš„å…³ç³»ï¼ˆCAP ç†è®ºï¼‰</p><h3 id="grpc-dirpc-æ»´æ»´è‡ªç ”-ã€thriftå’Œdubboå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰å‹-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#grpc-dirpc-æ»´æ»´è‡ªç ”-ã€thriftå’Œdubboå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰å‹-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> gRPCï¼ŒdiRPCï¼ˆæ»´æ»´è‡ªç ”ï¼‰ã€Thriftå’ŒDubboå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Œå¦‚ä½•é€‰å‹ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>ä¼˜ç¼ºç‚¹ï¼šç•¥ï¼Œçœ‹çœ‹åšå®¢éšä¾¿ç­”å§</p><p>é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿï¼Œå¯ä»¥é€‰æ‹© gRPC æˆ– diRPCã€‚ æœåŠ¡æ²»ç†åŠŸèƒ½ï¼Œæ¨è Dubboã€‚ ç®€å•ã€æ˜“ç”¨ï¼Œå¯ä»¥é€‰æ‹© Thrift æˆ– Dubboã€‚ è·¨è¯­è¨€ï¼Œå¯ä»¥é€‰æ‹© gRPC æˆ– Thriftã€‚</p><h3 id="è®¾è®¡ä¸€ä¸ªrpcæ¡†æ¶éœ€è¦æ³¨æ„ä»€ä¹ˆ-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡ä¸€ä¸ªrpcæ¡†æ¶éœ€è¦æ³¨æ„ä»€ä¹ˆ-2023-ç¾å›¢" aria-hidden="true">#</a> è®¾è®¡ä¸€ä¸ªRPCæ¡†æ¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>éšä¾¿è¯´è¯´å§ï¼Œä¸‹é¢æ˜¯æ¯”è¾ƒå…¨é¢çš„ä¸€äº›æ€»ç»“</p><ol><li><strong>é€šä¿¡åè®®</strong>ï¼š <ul><li><strong>ä¼ è¾“åè®®</strong>ï¼šå¯ä»¥é€‰æ‹©åŸºäºTCPã€HTTP/2ã€UDPç­‰çš„åè®®ã€‚æ¯”å¦‚gRPCåŸºäºHTTP/2ã€‚</li><li><strong>æ•°æ®ç¼–ç /è§£ç </strong>ï¼šé€‰æ‹©ä¸€ä¸ªé«˜æ•ˆä¸”è·¨è¯­è¨€çš„åºåˆ—åŒ–/ååºåˆ—åŒ–æœºåˆ¶ï¼Œå¦‚Protocol Buffersã€Avroã€Thriftã€JSONç­‰ã€‚</li></ul></li><li><strong>æœåŠ¡å‘ç°å’Œæ³¨å†Œ</strong>ï¼š <ul><li>æœåŠ¡æ³¨å†Œï¼šå…è®¸æœåŠ¡æä¾›è€…å°†å…¶å¯ç”¨æœåŠ¡æ³¨å†Œåˆ°æœåŠ¡ç›®å½•ä¸­ã€‚</li><li>æœåŠ¡å‘ç°ï¼šå…è®¸æœåŠ¡æ¶ˆè´¹è€…æŸ¥è¯¢å’ŒæŸ¥æ‰¾æœåŠ¡ç›®å½•ä»¥æ‰¾åˆ°æœåŠ¡æä¾›è€…ã€‚</li></ul></li><li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šæä¾›æœåŠ¡é—´çš„è´Ÿè½½å‡è¡¡æœºåˆ¶ï¼Œå¯ä»¥æ˜¯å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡æˆ–æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ã€‚</li><li><strong>è¶…æ—¶ä¸é‡è¯•ç­–ç•¥</strong>ï¼šä¸ºè°ƒç”¨è®¾ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´ï¼Œå¹¶æ ¹æ®éœ€è¦åˆ¶å®šé‡è¯•ç­–ç•¥ã€‚</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå¦‚ä½•å¤„ç†ç½‘ç»œå¤±è´¥ã€æœåŠ¡ä¸å¯ç”¨ã€æ•°æ®ä¸ä¸€è‡´ç­‰æƒ…å†µã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼š <ul><li><strong>è®¤è¯å’Œæˆæƒ</strong>ï¼šç¡®å®šè°å¯ä»¥è°ƒç”¨æœåŠ¡ï¼Œä»¥åŠä»–ä»¬å¯ä»¥åšä»€ä¹ˆã€‚</li><li><strong>åŠ å¯†</strong>ï¼šåœ¨ä¼ è¾“æ•°æ®æ—¶ï¼Œç¡®ä¿æ•°æ®çš„æœºå¯†æ€§ã€‚</li></ul></li><li><strong>è·Ÿè¸ªå’Œç›‘æ§</strong>ï¼š <ul><li>ä¸ºæœåŠ¡è°ƒç”¨æä¾›æ—¥å¿—ã€ç›‘æ§å’Œè·Ÿè¸ªåŠŸèƒ½ã€‚</li><li>æ”¶é›†å…³äºæœåŠ¡çš„æ€§èƒ½ã€é”™è¯¯ç‡ã€å»¶è¿Ÿç­‰çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li></ul></li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šå…è®¸å¤šç‰ˆæœ¬çš„æœåŠ¡å¹¶è¡Œè¿è¡Œï¼Œç¡®ä¿æ–°æ—§ç‰ˆæœ¬ä¹‹é—´çš„å…¼å®¹æ€§ã€‚</li><li><strong>å®¹é”™å’Œå¤‡ä»½</strong>ï¼šç¡®ä¿ç³»ç»Ÿåœ¨éƒ¨åˆ†å¤±è´¥çš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥è¿è¡Œã€‚</li><li><strong>å¹¶å‘å’Œçº¿ç¨‹æ¨¡å‹</strong>ï¼šå¦‚ä½•å¤„ç†å¤šä¸ªå¹¶å‘çš„æœåŠ¡è°ƒç”¨ï¼Œå¯èƒ½æ¶‰åŠåˆ°çº¿ç¨‹æ± ç®¡ç†ã€äº‹ä»¶é©±åŠ¨æ¨¡å‹ç­‰ã€‚</li><li><strong>æµé‡æ§åˆ¶å’ŒèƒŒå‹</strong>ï¼šé¿å…å› å¤§é‡è¯·æ±‚è€Œå¯¼è‡´çš„æœåŠ¡æˆ–ç½‘ç»œæ‹¥å¡ã€‚</li><li><strong>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å¼€å‘ç»éªŒ</strong>ï¼šç®€åŒ–å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å¼€å‘ï¼Œå¯èƒ½æ¶‰åŠåˆ°ä»£ç ç”Ÿæˆã€å¼€å‘å·¥å…·ç­‰ã€‚</li><li><strong>è·¨è¯­è¨€æ”¯æŒ</strong>ï¼šç¡®ä¿æ¡†æ¶æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œä»¥ä¾¿äºä¸åŒçš„æœåŠ¡å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„äº’æ“ä½œæ€§ã€‚</li><li><strong>æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ</strong>ï¼šä¸ºå¼€å‘è€…æä¾›è¯¦ç»†çš„æ–‡æ¡£å’Œå¼ºå¤§çš„ç¤¾åŒºæ”¯æŒï¼Œå¸®åŠ©ä»–ä»¬æ›´å®¹æ˜“åœ°ä½¿ç”¨å’Œæ‰©å±•æ¡†æ¶ã€‚</li><li><strong>å¯æ‰©å±•æ€§</strong>ï¼šè€ƒè™‘åˆ°æ¡†æ¶çš„æ¨¡å—åŒ–ï¼Œä½¿å¾—æœªæ¥å¯ä»¥å®¹æ˜“åœ°å¢åŠ æ–°åŠŸèƒ½æˆ–æ›¿æ¢ç°æœ‰ç»„ä»¶ã€‚</li></ol><h3 id="ä¸ºä»€ä¹ˆé¡¹ç›®ä¸­ä¸€ä¸ªä½¿ç”¨äº†zookeeperä¸€ä¸ªä½¿ç”¨äº†nacos-æœ‰ä»€ä¹ˆåŒºåˆ«-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆé¡¹ç›®ä¸­ä¸€ä¸ªä½¿ç”¨äº†zookeeperä¸€ä¸ªä½¿ç”¨äº†nacos-æœ‰ä»€ä¹ˆåŒºåˆ«-2023-ç¾å›¢" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆé¡¹ç›®ä¸­ä¸€ä¸ªä½¿ç”¨äº†zookeeperä¸€ä¸ªä½¿ç”¨äº†nacosï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>ä¸»è¦æ˜¯è¯´åŒºåˆ«ï¼Œä¸€ä¸ªæ˜¯AP/CPéƒ½è¡Œ-nacosï¼Œä¸€ä¸ªæ˜¯CP-zookeeperï¼Œè¿˜æœ‰å¯èƒ½æ˜¯é¡¹ç›®å¾ˆè€ï¼Œä»¥å‰æˆ‘å‚ä¸çš„é¡¹ç›®å°±æœ‰Spring Cloud Netflixæ··ç€Alibabaç”¨</p><p>å®ƒä»¬ä¹‹é—´çš„ä¸€äº›åŒºåˆ«ï¼š</p><ol><li><strong>å‡ºç”ŸèƒŒæ™¯</strong>ï¼š <ul><li><strong>ZooKeeper</strong>ï¼šZooKeeper æ˜¯ Apache çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œæœ€åˆç”±é›…è™åˆ›å»ºã€‚å®ƒä¸»è¦è¢«è®¾è®¡ä¸ºä¸€ä¸ªåˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œä¸ºå¤§æ•°æ®åº”ç”¨å¦‚ Hadoop å’Œ HBase æä¾›æœåŠ¡ã€‚</li><li><strong>Nacos</strong>ï¼šNacos æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ›´ç°ä»£çš„é¡¹ç›®ï¼Œä¸»è¦ç”¨äºäº‘åŸç”Ÿç¯å¢ƒã€‚å®ƒé™¤äº†æä¾›æœåŠ¡å‘ç°å’Œé…ç½®ç®¡ç†å¤–ï¼Œè¿˜æ”¯æŒåŠ¨æ€æœåŠ¡ç®¡ç†ã€‚</li></ul></li><li><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼š <ul><li><strong>ZooKeeper</strong>ï¼šè™½ç„¶ ZooKeeper è¢«å¹¿æ³›ç”¨äºæœåŠ¡å‘ç°å’Œé…ç½®ç®¡ç†ï¼Œä½†å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„åè°ƒæœåŠ¡ï¼Œæä¾›çš„åŸå­æ€§æ“ä½œå¯ä»¥å¸®åŠ©å¼€å‘è€…å®ç°åˆ†å¸ƒå¼é”ã€é›†ç¾¤é€‰ä¸¾ç­‰åŠŸèƒ½ã€‚</li><li><strong>Nacos</strong>ï¼šNacos çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒåŠ¨æ€æœåŠ¡ç®¡ç†ã€‚</li></ul></li><li><strong>æ˜“ç”¨æ€§</strong>ï¼š <ul><li><strong>ZooKeeper</strong>ï¼šéœ€è¦ä¸€å®šçš„å­¦ä¹ æ›²çº¿ï¼Œå°¤å…¶æ˜¯å¯¹äºZooKeeperçš„znodeã€watcherç­‰æ¦‚å¿µçš„ç†è§£ã€‚</li><li><strong>Nacos</strong>ï¼šç›¸æ¯”ä¹‹ä¸‹ï¼ŒNacos è®¾è®¡å¾—æ›´åŠ å‹å¥½ï¼Œç•Œé¢ç›´è§‚ï¼Œä½¿ç”¨èµ·æ¥æ›´ç®€å•ã€‚</li></ul></li><li><strong>æ€§èƒ½</strong>ï¼š <ul><li><strong>ZooKeeper</strong>ï¼šä¸ºäº†ä¿è¯å¼ºä¸€è‡´æ€§ï¼ŒZooKeeper ä½¿ç”¨äº† Paxos åè®®å˜ç§çš„ ZAB åè®®ï¼Œå¯èƒ½ä¼šåœ¨æŸäº›åœºæ™¯ä¸‹äº§ç”Ÿæ€§èƒ½ç“¶é¢ˆã€‚</li><li><strong>Nacos</strong>ï¼šæ›´æ³¨é‡å¯ç”¨æ€§å’Œæ€§èƒ½ï¼Œå› æ­¤åœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¼˜äº ZooKeeperã€‚</li></ul></li><li><strong>ç”Ÿæ€</strong>ï¼š <ul><li><strong>ZooKeeper</strong>ï¼šç”±äºå†å²åŸå› ï¼ŒZooKeeper åœ¨å¾ˆå¤šå¤§æ•°æ®æŠ€æœ¯ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œå¦‚ Hadoopã€Kafkaã€HBase ç­‰ã€‚</li><li><strong>Nacos</strong>ï¼šæ›´å€¾å‘äºäº‘åŸç”Ÿåº”ç”¨å’Œå¾®æœåŠ¡æ¶æ„ï¼Œå’Œ Spring Cloudã€Dubbo ç­‰æŠ€æœ¯é›†æˆå¾—å¾ˆå¥½ã€‚</li></ul></li><li><strong>æŒä¹…åŒ–</strong>ï¼š <ul><li><strong>ZooKeeper</strong>ï¼šä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè¿›è¡ŒæŒä¹…åŒ–ã€‚</li><li><strong>Nacos</strong>ï¼šå¯ä»¥ä½¿ç”¨MySQLæ•°æ®åº“è¿›è¡ŒæŒä¹…åŒ–ã€‚</li></ul></li></ol><p>ä¸ºä»€ä¹ˆé¡¹ç›®ä¸­ä¸€ä¸ªä½¿ç”¨äº† ZooKeeperï¼Œä¸€ä¸ªä½¿ç”¨äº† Nacosï¼Œå¯èƒ½æ˜¯åŸºäºä»¥ä¸‹å‡ ç§è€ƒè™‘ï¼š</p><ol><li><strong>é¡¹ç›®å†å²</strong>ï¼šæ—§çš„é¡¹ç›®å¯èƒ½åœ¨ ZooKeeper ç››è¡Œæ—¶æœŸå¼€å§‹ï¼Œè€Œæ–°çš„é¡¹ç›®å¯èƒ½æ›´åå‘äºé€‰æ‹© Nacos è¿™æ ·çš„ç°ä»£è§£å†³æ–¹æ¡ˆã€‚</li><li><strong>åŠŸèƒ½éœ€æ±‚</strong>ï¼šå¦‚æœé¡¹ç›®æ›´å¤šåœ°éœ€è¦åè°ƒæœåŠ¡ï¼Œä¾‹å¦‚åˆ†å¸ƒå¼é”ï¼Œé‚£ä¹ˆ ZooKeeper å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚è€Œå¯¹äºæœåŠ¡å‘ç°å’ŒåŠ¨æ€é…ç½®ç®¡ç†ï¼ŒNacos å¯èƒ½æ›´åˆé€‚ã€‚</li><li><strong>å›¢é˜Ÿç»éªŒ</strong>ï¼šå›¢é˜Ÿå¯¹æŸä¸€æŠ€æœ¯çš„ç†Ÿæ‚‰ç¨‹åº¦å’Œå†å²ç»éªŒä¹Ÿå¯èƒ½å½±å“æŠ€æœ¯é€‰æ‹©ã€‚</li></ol><h3 id="nginxä¸­æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#nginxä¸­æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«-2023-ç¾å›¢" aria-hidden="true">#</a> NGINXä¸­æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>æ­£å‘ä»£ç†ï¼š</p><ol><li><strong>å®¢æˆ·ç«¯çŸ¥æ™“</strong>ï¼šåœ¨æ­£å‘ä»£ç†ä¸­ï¼Œå®¢æˆ·ç«¯æ˜ç¡®çŸ¥é“æœ‰ä¸€ä¸ªä»£ç†åœ¨ä¸­é—´ã€‚</li><li><strong>è¯·æ±‚æµå‘</strong>ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°ä»£ç†æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨å†å‘é€è¯·æ±‚åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚</li><li><strong>ç›®çš„</strong>ï¼šå¸¸ç”¨äºè®¿é—®å—é™èµ„æºï¼ˆä¾‹å¦‚ï¼Œç»•è¿‡åœ°åŸŸé™åˆ¶æˆ–é˜²ç«å¢™ï¼‰ã€‚</li><li><strong>å®‰å…¨æ€§ä¸éšç§</strong>ï¼šå¯æä¾›åŒ¿åè®¿é—®ï¼Œéšè—å®¢æˆ·ç«¯ IPã€‚</li><li><strong>ç¼“å­˜ä¸è¿‡æ»¤</strong>ï¼šå¯ä»¥è¿›è¡Œå†…å®¹è¿‡æ»¤æˆ–è€…æ•°æ®ç¼“å­˜ã€‚</li></ol><p>ç¤ºä¾‹åº”ç”¨ï¼š</p><ul><li>å†…ç½‘è®¿é—®å¤–ç½‘</li><li>è®¿é—®å—é™åˆ¶çš„ç½‘ç«™</li><li>æ•°æ®ç¼“å­˜å’Œç½‘é¡µè¿‡æ»¤ï¼ˆä¾‹å¦‚ï¼Œåœ¨æ•™è‚²æœºæ„æˆ–ä¼ä¸šå†…ï¼‰</li></ul><hr><p>åå‘ä»£ç†ï¼š</p><ol><li><strong>å®¢æˆ·ç«¯ä¸ä¸€å®šçŸ¥æ™“</strong>ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“è¯·æ±‚è¢«ä»£ç†ã€‚</li><li><strong>è¯·æ±‚æµå‘</strong>ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°â€œæœåŠ¡å™¨â€ï¼Œå®é™…ä¸Šæ˜¯åå‘ä»£ç†æ¥æ”¶äº†è¿™äº›è¯·æ±‚ï¼Œç„¶åä»£ç†å†³å®šå°†è¯·æ±‚è·¯ç”±åˆ°å“ªä¸ªåç«¯æœåŠ¡å™¨ã€‚</li><li><strong>ç›®çš„</strong>ï¼šå¸¸ç”¨äºè´Ÿè½½å‡è¡¡ã€ç¼“å­˜é™æ€èµ„æºã€SSL ç»ˆç»“ç­‰ã€‚</li><li><strong>å®‰å…¨æ€§ä¸åŠ é€Ÿ</strong>ï¼šå¯ä»¥æä¾›åº”ç”¨å±‚é˜²ç«å¢™ï¼Œå‡è½»åç«¯æœåŠ¡å™¨çš„å‹åŠ›ã€‚</li><li><strong>é€æ˜æ€§</strong>ï¼šé€šå¸¸å¯¹å®¢æˆ·ç«¯æ˜¯é€æ˜çš„ï¼Œå®¢æˆ·ç«¯é€šå¸¸è®¤ä¸ºè‡ªå·±ç›´æ¥å’Œåç«¯æœåŠ¡å™¨é€šä¿¡ã€‚</li></ol><p>ç¤ºä¾‹åº”ç”¨ï¼š</p><ul><li>è´Ÿè½½å‡è¡¡</li><li>CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰</li><li>Web åº”ç”¨é˜²ç«å¢™</li><li>SSL ç»ˆç»“</li><li>HTTP ç¼“å­˜</li></ul><h3 id="äº†è§£å“ªäº›åˆ†å¸ƒå¼äº‹åŠ¡-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#äº†è§£å“ªäº›åˆ†å¸ƒå¼äº‹åŠ¡-2023-å¿«æ‰‹" aria-hidden="true">#</a> äº†è§£å“ªäº›åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><ol><li>ä¸¤é˜¶æ®µæäº¤ï¼ˆTwo-Phase Commitï¼Œ2PCï¼‰ï¼š2PCæ˜¯ä¸€ç§ç»å…¸çš„åˆ†å¸ƒå¼äº‹åŠ¡åè®®ï¼Œå®ƒé€šè¿‡åè°ƒè€…å’Œå‚ä¸è€…çš„ä¸¤ä¸ªé˜¶æ®µæ¥ç¡®ä¿äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œåè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€äº‹åŠ¡å‡†å¤‡è¯·æ±‚ï¼Œå‚ä¸è€…å°†å‡†å¤‡å¥½çš„äº‹åŠ¡çŠ¶æ€åé¦ˆç»™åè°ƒè€…ã€‚åœ¨ç¬¬äºŒé˜¶æ®µï¼Œåè°ƒè€…æ ¹æ®å‚ä¸è€…çš„åé¦ˆå†³å®šæ˜¯å¦æäº¤æˆ–ä¸­æ­¢äº‹åŠ¡ã€‚2PCçš„ä¸»è¦ç¼ºç‚¹æ˜¯é˜»å¡é—®é¢˜å’Œå•ç‚¹æ•…éšœã€‚</li><li>ä¸‰é˜¶æ®µæäº¤ï¼ˆThree-Phase Commitï¼Œ3PCï¼‰ï¼š3PCæ˜¯å¯¹2PCçš„æ”¹è¿›ï¼Œä¸»è¦è§£å†³äº†2PCçš„é˜»å¡é—®é¢˜ã€‚ä¸2PCä¸åŒï¼Œ3PCå¼•å…¥äº†é¢„æäº¤é˜¶æ®µï¼Œä½¿å¾—å‚ä¸è€…åœ¨å‡†å¤‡å®Œæˆä¹‹åå¯ä»¥ç»§ç»­å¤„ç†å…¶ä»–äº‹åŠ¡ã€‚3PCåœ¨ä¿è¯ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œä¹Ÿå¢åŠ äº†ä¸€å®šçš„å¤æ‚æ€§ã€‚</li><li>è¡¥å¿äº‹åŠ¡ï¼ˆCompensating Transactionï¼‰ï¼šè¡¥å¿äº‹åŠ¡æ˜¯ä¸€ç§åŸºäºè¡¥å¿æœºåˆ¶çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æ–¹æ³•ã€‚åœ¨è¡¥å¿äº‹åŠ¡ä¸­ï¼Œæ¯ä¸ªå‚ä¸è€…æ‰§è¡Œäº‹åŠ¡æ—¶è®°å½•ä¸€äº›å¯ä»¥ç”¨äºå›æ»šæ“ä½œçš„è¡¥å¿æ“ä½œï¼Œå¹¶åœ¨éœ€è¦å›æ»šæ—¶ä¾æ¬¡æ‰§è¡Œè¿™äº›è¡¥å¿æ“ä½œï¼Œå°†ç³»ç»Ÿæ¢å¤åˆ°åŸå§‹çŠ¶æ€ã€‚è¡¥å¿äº‹åŠ¡åœ¨å®¹é”™å’Œæ‰©å±•æ€§æ–¹é¢æœ‰ä¸€å®šä¼˜åŠ¿ï¼Œä½†å¯èƒ½éœ€è¦é¢å¤–çš„å¼€å‘å·¥ä½œã€‚</li><li>Sagaæ¨¡å¼ï¼šSagaæ¨¡å¼æ˜¯ä¸€ç§äº‹ä»¶é©±åŠ¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼ï¼Œå°†å¤æ‚çš„åˆ†å¸ƒå¼äº‹åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå±€éƒ¨äº‹åŠ¡ï¼Œæ¯ä¸ªå±€éƒ¨äº‹åŠ¡è´Ÿè´£å¤„ç†è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€å˜æ›´ï¼Œå¹¶é€šè¿‡å‘å¸ƒå’Œè®¢é˜…äº‹ä»¶çš„æ–¹å¼è¿›è¡Œåè°ƒã€‚Sagaæ¨¡å¼å…·æœ‰è¾ƒå¥½çš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼Œä½†éœ€è¦å¼€å‘äººå‘˜å¯¹ä¸šåŠ¡é€»è¾‘è¿›è¡Œåˆ†è§£å’Œç¼–æ’ã€‚</li></ol><h3 id="è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›-2023-å¾—ç‰©" aria-hidden="true">#</a> è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›ï¼Ÿï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>è´Ÿè½½å‡è¡¡ç®—æ³•æ˜¯ç”¨æ¥åˆ†é…æœåŠ¡å™¨è´Ÿè½½çš„ç®—æ³•ã€‚æ ¹æ®æœç´¢ç»“æœï¼Œè´Ÿè½½å‡è¡¡ç®—æ³•å¯ä»¥åˆ†ä¸ºé™æ€è´Ÿè½½å‡è¡¡ç®—æ³•å’ŒåŠ¨æ€è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚</p><p>é™æ€è´Ÿè½½å‡è¡¡ç®—æ³•åŒ…æ‹¬ï¼š</p><ol><li>è½®è¯¢ç®—æ³•ï¼ˆRound Robinï¼‰ï¼šæŒ‰é¡ºåºå°†è¯·æ±‚åˆ†é…ç»™åç«¯æœåŠ¡å™¨ï¼Œå®ç°å‡è¡¡åˆ†é…ã€‚</li><li>éšæœºç®—æ³•ï¼ˆRandomï¼‰ï¼šæ ¹æ®éšæœºç®—æ³•é€‰æ‹©ä¸€ä¸ªåç«¯æœåŠ¡å™¨ã€‚</li><li>åŠ æƒè½®è¯¢ç®—æ³•ï¼ˆWeighted Round Robinï¼‰ï¼šæ ¹æ®æœåŠ¡å™¨é…ç½®çš„æƒé‡åˆ†é…è¯·æ±‚ï¼Œæƒé‡é«˜çš„æœåŠ¡å™¨å¤„ç†æ›´å¤šçš„è¯·æ±‚ã€‚</li><li>åŠ æƒæœ€å°‘è¿æ¥ç®—æ³•ï¼ˆWeighted Least Connectionsï¼‰ï¼šæ ¹æ®æœåŠ¡å™¨çš„æƒé‡å’Œå½“å‰è¿æ¥æ•°é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æœåŠ¡å™¨è¿›è¡Œåˆ†é…ã€‚</li><li>æºåœ°å€å“ˆå¸Œç®—æ³•ï¼ˆIP Hashï¼‰ï¼šæ ¹æ®å®¢æˆ·ç«¯çš„æºIPåœ°å€è®¡ç®—å“ˆå¸Œå€¼ï¼Œé€‰æ‹©ä¸€ä¸ªå›ºå®šçš„æœåŠ¡å™¨æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚</li></ol><p>åŠ¨æ€è´Ÿè½½å‡è¡¡ç®—æ³•åŒ…æ‹¬ï¼š</p><ol><li>æœ€å°‘è¿æ¥æ•°ç®—æ³•ï¼ˆLeast Connectionsï¼‰ï¼šå°†è¯·æ±‚åˆ†é…ç»™å½“å‰è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨ï¼Œä»¥ä¿è¯è´Ÿè½½å‡è¡¡ã€‚</li><li>æœ€å¿«å“åº”é€Ÿåº¦ç®—æ³•ï¼ˆFastest Responseï¼‰ï¼šæ ¹æ®æœåŠ¡å™¨çš„å“åº”æ—¶é—´é€‰æ‹©æœ€å¿«çš„æœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚ã€‚</li><li>è§‚å¯Ÿæ–¹æ³•ï¼ˆObservation Methodï¼‰ï¼šæ ¹æ®ç³»ç»Ÿè¿è¡ŒçŠ¶æ€è§‚å¯Ÿåç«¯æœåŠ¡å™¨çš„è´Ÿè½½æƒ…å†µï¼Œé€‰æ‹©åˆé€‚çš„æœåŠ¡å™¨è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</li><li>é¢„æµ‹æ³•ï¼ˆPrediction Methodï¼‰ï¼šæ ¹æ®é¢„æµ‹ç®—æ³•é¢„æµ‹åç«¯æœåŠ¡å™¨çš„è´Ÿè½½æƒ…å†µï¼Œé€‰æ‹©åˆé€‚çš„æœåŠ¡å™¨è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</li></ol><h2 id="ğŸŒ-è®¡ç®—æœºç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#ğŸŒ-è®¡ç®—æœºç½‘ç»œ" aria-hidden="true">#</a> ğŸŒ è®¡ç®—æœºç½‘ç»œ</h2><h3 id="æœåŠ¡ç«¯å‡ºç°å¤§é‡-close-wait-çŠ¶æ€-å¯èƒ½çš„æƒ…å†µ-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯å‡ºç°å¤§é‡-close-wait-çŠ¶æ€-å¯èƒ½çš„æƒ…å†µ-2023-ç¾å›¢" aria-hidden="true">#</a> æœåŠ¡ç«¯å‡ºç°å¤§é‡ close_wait çŠ¶æ€ï¼Œå¯èƒ½çš„æƒ…å†µï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p><code>CLOSE_WAIT</code>çŠ¶æ€é€šå¸¸æ„å‘³ç€ä½ çš„ç¨‹åºåœ¨å…³é—­è¿æ¥æ—¶æœ‰ä¸€äº›é—®é¢˜ï¼Œæˆ–è€…è¯´ï¼Œå®ƒæ²¡æœ‰æ­£ç¡®åœ°å…³é—­å¥—æ¥å­—è¿æ¥ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ç¨‹åºæ¥æ”¶åˆ°äº†æœåŠ¡ç«¯çš„å®Œæˆï¼ˆFINï¼‰ä¿¡å·ï¼Œä½†æ˜¯ç¨‹åºè‡ªèº«æ²¡æœ‰æ­£ç¡®åœ°å…³é—­å¥—æ¥å­—ï¼Œæˆ–è€…æ²¡æœ‰åœ¨é€‚å½“çš„æ—¶é—´å†…å…³é—­ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å¤§é‡çš„è¿æ¥å¤„äº<code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</p><p>å¯¼è‡´å¤§é‡CLOSE_WAITçŠ¶æ€çš„å¯èƒ½æƒ…å†µæœ‰å¾ˆå¤šï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½çš„æƒ…å†µï¼š</p><ol><li><strong>åº”ç”¨ç¨‹åºæ•…éšœ</strong>ï¼šåº”ç”¨ç¨‹åºå¯èƒ½æ²¡æœ‰æ­£ç¡®åœ°å…³é—­è¿æ¥ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½åœ¨å®Œæˆæ•°æ®äº¤æ¢åå¿˜è®°å…³é—­è¿æ¥ï¼Œæˆ–è€…åº”ç”¨ç¨‹åºå¯èƒ½ç”±äºé”™è¯¯è€Œæ— æ³•å…³é—­è¿æ¥ã€‚è¿™æ˜¯æœ€å¸¸è§çš„åŸå› ã€‚</li><li><strong>ç½‘ç»œé—®é¢˜</strong>ï¼šå¦‚æœç½‘ç»œç¯å¢ƒä¸ç¨³å®šï¼Œå¯èƒ½å¯¼è‡´éƒ¨åˆ†TCPè¿æ¥æ— æ³•æ­£å¸¸å…³é—­ï¼Œä»è€Œå¯¼è‡´&#39;close_wait&#39;çŠ¶æ€ã€‚ç½‘ç»œæ•…éšœ**ï¼šç½‘ç»œè¿æ¥é—®é¢˜å¯èƒ½ä¼šå¯¼è‡´å¥—æ¥å­—æ— æ³•æ­£ç¡®å…³é—­ï¼Œä»è€Œå¯¼è‡´å¤§é‡çš„CLOSE_WAITçŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œç½‘ç»œå»¶è¿Ÿå¯èƒ½å¯¼è‡´FINåŒ…è¢«å»¶è¿Ÿå‘é€ï¼Œæˆ–è€…ç½‘ç»œä¸¢åŒ…å¯èƒ½å¯¼è‡´FINåŒ…ä¸¢å¤±ï¼Œè¿™éƒ½å¯èƒ½å¯¼è‡´è¿æ¥æ— æ³•æ­£ç¡®å…³é—­ã€‚</li><li><strong>ç³»ç»Ÿèµ„æºä¸è¶³</strong>ï¼šç³»ç»Ÿèµ„æºä¸è¶³å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•åˆ›å»ºæ–°çš„å¥—æ¥å­—ï¼Œæˆ–è€…æ— æ³•ä¸ºæ–°çš„è¿æ¥åˆ†é…è¶³å¤Ÿçš„å†…å­˜ï¼Œè¿™éƒ½å¯èƒ½å¯¼è‡´å¤§é‡çš„<code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</li><li><strong>æœåŠ¡ç«¯è´Ÿè½½è¿‡é«˜</strong>ï¼šæœåŠ¡å™¨è´Ÿè½½è¿‡é«˜å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•åŠæ—¶å¤„ç†æ‰€æœ‰çš„è¿æ¥ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å…³é—­çš„è¿æ¥ä¸Šï¼Œä»è€Œå¯¼è‡´è¿™äº›è¿æ¥é•¿æ—¶é—´å¤„äº<code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</li><li><strong>æœåŠ¡ç«¯ä»£ç ä¸­æœ‰ä¸€ä¸ªbug</strong>ï¼š æœåŠ¡å™¨ä»£ç ä¸­çš„é”™è¯¯å¯èƒ½å¯¼è‡´å®ƒæ„å¤–å…³é—­è¿æ¥ã€‚ è¿™ä¹Ÿå¯èƒ½å¯¼è‡´æ–°è¯·æ±‚å¤„äºç­‰å¾…çŠ¶æ€ã€‚</li><li><strong>æœåŠ¡ç«¯æœ‰ç¡¬ä»¶é—®é¢˜</strong>ï¼š ç¡¬ä»¶é—®é¢˜ï¼ˆå¦‚å†…å­˜æ³„æ¼æˆ–CPUç“¶é¢ˆï¼‰ä¹Ÿå¯èƒ½å¯¼è‡´æœåŠ¡å™¨å…³é—­è¿æ¥ã€‚ è¿™å¯èƒ½å¯¼è‡´æ–°è¯·æ±‚å¤„äºç­‰å¾…çŠ¶æ€ã€‚</li><li><strong>å®¢æˆ·ç«¯é¢‘ç¹æ–­å¼€è¿æ¥</strong>ï¼šå¦‚æœå®¢æˆ·ç«¯é¢‘ç¹åœ°å»ºç«‹å’Œæ–­å¼€è¿æ¥ï¼Œè€ŒæœåŠ¡ç«¯å¤„ç†è¿™äº›è¿æ¥çš„é€Ÿåº¦ä¸å¤Ÿå¿«ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å¤§é‡çš„&#39;close_wait&#39;è¿æ¥ã€‚å¦å¤–ï¼Œå¦‚æœå®¢æˆ·ç«¯é¢‘ç¹åœ°å»ºç«‹å’Œæ–­å¼€è¿æ¥ï¼Œé‚£ä¹ˆå³ä½¿æœåŠ¡ç«¯å¯ä»¥åŠæ—¶å¤„ç†æ‰€æœ‰çš„è¿æ¥ï¼Œä¹Ÿå¯èƒ½ä¼šå› ä¸ºç½‘ç»œå»¶è¿Ÿç­‰é—®é¢˜ï¼Œå¯¼è‡´å¤§é‡çš„<code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</li><li><strong>TCPè¿æ¥æ²¡æœ‰æ­£ç¡®åœ°è¢«ç»“æŸ</strong>ï¼šå½“ä¸€ä¸ªTCPè¿æ¥è¦ç»“æŸæ—¶ï¼Œé€šå¸¸éœ€è¦åŒæ–¹éƒ½å‘é€ä¸€ä¸ªâ€œFINâ€æ•°æ®åŒ…æ¥è¡¨ç¤ºä»–ä»¬ä¸å†å‘é€æ•°æ®ï¼Œå¹¶ç­‰å¾…å¯¹æ–¹çš„ç¡®è®¤ã€‚å…³é—­ç³»ç»Ÿè°ƒç”¨æ˜¯åº”ç”¨ç¨‹åºå‘æ“ä½œç³»ç»Ÿå‘å‡ºçš„æŒ‡ä»¤ï¼Œè¦æ±‚å…³é—­å¥—æ¥å­—å¹¶é‡Šæ”¾èµ„æºã€‚å®¢æˆ·ç«¯çš„â€œFINâ€æ•°æ®åŒ…ï¼Œä½†æ²¡æœ‰è°ƒç”¨å…³é—­ç³»ç»Ÿè°ƒç”¨ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šä¸€ç›´ä¿æŒåœ¨â€œclose_waitâ€çŠ¶æ€ï¼Œç›´åˆ°åº”ç”¨ç¨‹åºå…³é—­å¥—æ¥å­—</li></ol><p>è§£å†³è¿™ç§é—®é¢˜é€šå¸¸éœ€è¦æ‰¾å‡ºå¯¼è‡´å¤§é‡CLOSE_WAITçŠ¶æ€çš„åŸå› ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„ä¿®å¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ˜¯åº”ç”¨ç¨‹åºæ²¡æœ‰æ­£ç¡®å…³é—­è¿æ¥ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦ä¿®æ”¹åº”ç”¨ç¨‹åºçš„ä»£ç ï¼Œç¡®ä¿å®ƒåœ¨å®Œæˆæ•°æ®äº¤æ¢åæ­£ç¡®å…³é—­è¿æ¥ã€‚å¦‚æœæ˜¯ç½‘ç»œé—®é¢˜ï¼Œå¯èƒ½éœ€è¦æ£€æŸ¥å’Œä¿®å¤ç½‘ç»œè¿æ¥ã€‚å¦‚æœæ˜¯ç³»ç»Ÿèµ„æºä¸è¶³ï¼Œå¯èƒ½éœ€è¦å¢åŠ ç³»ç»Ÿèµ„æºæˆ–ä¼˜åŒ–åº”ç”¨ç¨‹åºä»¥å‡å°‘èµ„æºä½¿ç”¨ã€‚å¦‚æœæ˜¯æœåŠ¡å™¨è´Ÿè½½è¿‡é«˜ï¼Œå¯èƒ½éœ€è¦å¢åŠ æœåŠ¡å™¨èµ„æºæˆ–ä¼˜åŒ–æœåŠ¡å™¨é…ç½®æ¥é™ä½è´Ÿè½½ã€‚</p>',39),na=n("p",null,"å‚è€ƒï¼š",-1),sa={href:"https://stackoverflow.com/questions/21033104/close-wait-state-in-server",target:"_blank",rel:"noopener noreferrer"},aa={href:"https://superuser.com/questions/173535/what-are-close-wait-and-time-wait-states",target:"_blank",rel:"noopener noreferrer"},ea={href:"https://learn.microsoft.com/en-us/answers/questions/337518/tcp-connections-locked-in-close-wait-status-with-i",target:"_blank",rel:"noopener noreferrer"},ta={href:"https://www.cnblogs.com/grey-wolf/p/10936657.html",target:"_blank",rel:"noopener noreferrer"},oa={href:"https://juejin.cn/post/6844903734300901390#heading-6",target:"_blank",rel:"noopener noreferrer"},pa={href:"https://www.thegeekdiary.com/high-number-of-connections-is-close_wait-state-in-netstat-command-output/",target:"_blank",rel:"noopener noreferrer"},la=t('<h3 id="httpåè®®çš„æŠ¥æ–‡çš„æ ¼å¼æœ‰äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#httpåè®®çš„æŠ¥æ–‡çš„æ ¼å¼æœ‰äº†è§£å—" aria-hidden="true">#</a> httpåè®®çš„æŠ¥æ–‡çš„æ ¼å¼æœ‰äº†è§£å—ï¼Ÿ</h3><p><img src="'+T+'" alt="" loading="lazy"> HTTP çš„è¯·æ±‚æŠ¥æ–‡åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><p>è¯·æ±‚è¡Œã€é¦–éƒ¨è¡Œã€å®ä½“ä¸»ä½“ã€‚</p><h3 id="http2äº†è§£å—-2023å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#http2äº†è§£å—-2023å°çº¢ä¹¦" aria-hidden="true">#</a> http2äº†è§£å—ï¼Ÿï¼ˆ2023å°çº¢ä¹¦ï¼‰</h3><p>HTTP/2æ˜¯å¯¹ä¸‡ç»´ç½‘ä½¿ç”¨çš„HTTPç½‘ç»œåè®®çš„é‡å¤§ä¿®è®¢ã€‚å®ƒæºè‡ªè¾ƒæ—©çš„å®éªŒæ€§SPDYåè®®ï¼Œæœ€åˆç”±Googleå¼€å‘ã€‚HTTP/2ä¸æ˜¯å¯¹åè®®çš„å½»åº•é‡å†™ï¼›HTTPæ–¹æ³•ã€çŠ¶æ€ç å’Œè¯­ä¹‰å­¦ä¸HTTP/1. xç›¸åŒï¼ˆå¯èƒ½æœ‰ä¸€äº›å°çš„è¡¥å……ï¼‰æ¥è¡¨ç¤ºåè®®ã€‚æ–°çš„äºŒè¿›åˆ¶æˆå¸§æœºåˆ¶çš„å¼•å…¥æ”¹å˜äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ•°æ®äº¤æ¢çš„æ–¹å¼ã€‚è¦æè¿°è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥ç†Ÿæ‚‰HTTP/2æœ¯è¯­ -- <code>Stream</code>ï¼šå·²å»ºç«‹è¿æ¥å†…çš„åŒå‘å­—èŠ‚æµï¼Œå®ƒå¯èƒ½æºå¸¦ä¸€æ¡æˆ–å¤šæ¡æ¶ˆæ¯ã€‚</p><p>æ‚¨è¿˜å¯ä»¥æåˆ°HTTP/2æ—¨åœ¨æé«˜ç½‘ç«™æ€§èƒ½å¹¶å‡å°‘å»¶è¿Ÿã€‚å®ƒé€šè¿‡å¼•å…¥å‡ ä¸ªæ–°åŠŸèƒ½æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚æœåŠ¡å™¨æ¨é€ã€æ ‡å¤´å‹ç¼©å’Œå¤šè·¯å¤ç”¨ã€‚</p>',6),ia=n("p",null,"å‚è€ƒï¼š",-1),ca={href:"https://http2.github.io/",target:"_blank",rel:"noopener noreferrer"},ra={href:"https://en.wikipedia.org/wiki/HTTP/2",target:"_blank",rel:"noopener noreferrer"},ua={href:"https://web.dev/performance-http2/",target:"_blank",rel:"noopener noreferrer"},da={href:"https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference",target:"_blank",rel:"noopener noreferrer"},ka=t('<h3 id="å»ºç«‹-tcp-è¿æ¥å-å®¢æˆ·ç«¯ä¸‹çº¿äº†ä¼šå‘ç”Ÿä»€ä¹ˆ-2023-ç™¾åº¦" tabindex="-1"><a class="header-anchor" href="#å»ºç«‹-tcp-è¿æ¥å-å®¢æˆ·ç«¯ä¸‹çº¿äº†ä¼šå‘ç”Ÿä»€ä¹ˆ-2023-ç™¾åº¦" aria-hidden="true">#</a> å»ºç«‹ TCP è¿æ¥åï¼Œå®¢æˆ·ç«¯ä¸‹çº¿äº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼ˆ2023 ç™¾åº¦ï¼‰</h3><p>TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰è¿æ¥å»ºç«‹åï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸‹çº¿æˆ–æ–­å¼€ï¼Œé‚£ä¹ˆè¿™ä¸ªTCPè¿æ¥å°±ä¼šè¢«ä¸­æ–­ã€‚</p><p>åœ¨TCPåè®®ä¸­ï¼Œä»»ä½•ä¸€æ–¹ï¼ˆå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ï¼‰éƒ½å¯ä»¥ä¸»åŠ¨æ–­å¼€è¿æ¥ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ–­å¼€è¿æ¥ä¼šé€šè¿‡ä¸€ä¸ªå››æ­¥æ¡æ‰‹è¿‡ç¨‹ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰æ¥å®Œæˆã€‚è¿™ä¸ªè¿‡ç¨‹ä¿è¯äº†åŒæ–¹éƒ½èƒ½æ¸…æ¥šåœ°äº†è§£è¿æ¥å·²ç»è¢«å…³é—­ï¼Œè€Œä¸ä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚</p><p>ç„¶è€Œï¼Œå¦‚æœå®¢æˆ·ç«¯çªç„¶ä¸‹çº¿ï¼ˆæ¯”å¦‚å› ä¸ºç½‘ç»œä¸­æ–­ã€ç”µæºåˆ‡æ–­ç­‰åŸå› ï¼‰ï¼ŒæœåŠ¡å™¨å¯èƒ½å¹¶ä¸ä¼šç«‹åˆ»çŸ¥é“è¿™ä¸ªæƒ…å†µã€‚è¿™æ˜¯å› ä¸ºTCPåè®®çš„è®¾è®¡ä½¿å¾—å®ƒèƒ½å¤Ÿåœ¨çŸ­æš‚çš„ç½‘ç»œä¸­æ–­åæ¢å¤è¿æ¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœæœåŠ¡å™¨å°è¯•å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œè¿™äº›æ•°æ®å¯èƒ½ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°è¾¾åˆ°ä¸€å®šçš„é‡è¯•æ¬¡æ•°æˆ–è€…è¶…æ—¶ï¼ŒæœåŠ¡å™¨æ‰ä¼šè®¤ä¸ºè¿æ¥å·²ç»æ–­å¼€ã€‚</p><p>åœ¨å®¢æˆ·ç«¯é‡æ–°ä¸Šçº¿åï¼Œå¦‚æœå®ƒå°è¯•å†æ¬¡å»ºç«‹ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œé‚£ä¹ˆéœ€è¦å®Œå…¨é‡æ–°è¿›è¡ŒTCPçš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹æ¥å»ºç«‹æ–°çš„è¿æ¥ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTCPåè®®æä¾›çš„æ˜¯ä¸€ç§â€œå¯é â€çš„ä¼ è¾“æœåŠ¡ã€‚å³ä½¿åœ¨ç½‘ç»œç¯å¢ƒä¸ç¨³å®šã€ä¸¢åŒ…ç‡é«˜çš„æƒ…å†µä¸‹ï¼ŒTCPä¹Ÿèƒ½ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œæœ‰åºæ€§ã€‚ä½†æ˜¯ï¼Œè¿™ç§å¯é æ€§æ˜¯é€šè¿‡å¤æ‚çš„é”™è¯¯æ£€æµ‹å’Œä¿®å¤æœºåˆ¶ã€ä»¥åŠé‡ä¼ æœºåˆ¶æ¥å®ç°çš„ï¼Œè¿™ä¹Ÿä½¿å¾—TCPåœ¨å¤„ç†æ–­å¼€è¿æ¥å’Œé‡è¿çš„æƒ…å†µæ—¶ç›¸å¯¹å¤æ‚ã€‚</p><h3 id="è®²è®²-arp-icmp-ä»€ä¹ˆæ—¶å€™ä¸ç”¨æŸ¥-arp-è¡¨-icmp-æ˜¯å“ªä¸ªè·¯ç”±å™¨å›å¤çš„-ä»€ä¹ˆåœ°æ–¹ç”¨äº†-icmp-traceroute-æ€ä¹ˆåšçš„-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#è®²è®²-arp-icmp-ä»€ä¹ˆæ—¶å€™ä¸ç”¨æŸ¥-arp-è¡¨-icmp-æ˜¯å“ªä¸ªè·¯ç”±å™¨å›å¤çš„-ä»€ä¹ˆåœ°æ–¹ç”¨äº†-icmp-traceroute-æ€ä¹ˆåšçš„-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> è®²è®² ARPï¼ŒICMP? ä»€ä¹ˆæ—¶å€™ä¸ç”¨æŸ¥ ARP è¡¨? ICMP æ˜¯å“ªä¸ªè·¯ç”±å™¨å›å¤çš„ï¼Œä»€ä¹ˆåœ°æ–¹ç”¨äº† icmpï¼Œtraceroute æ€ä¹ˆåšçš„? ï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p><strong>ARPï¼ˆåœ°å€è§£æåè®®ï¼‰</strong> å’Œ<strong>ICMPï¼ˆå…¬ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰</strong> éƒ½æ˜¯è®¡ç®—æœºç½‘ç»œä¸­ä½¿ç”¨çš„åè®®ï¼ŒARPç”¨äºå°†ç½‘ç»œåœ°å€ï¼ˆå¦‚IPåœ°å€ï¼‰æ˜ å°„åˆ°ç‰©ç†åœ°å€ï¼ˆå¦‚MACåœ°å€ï¼‰ï¼Œè€ŒICMPç”¨äºé”™è¯¯æŠ¥å‘Šå’Œè¯Šæ–­ç›®çš„ï¼Œpingå‘½ä»¤ä¹Ÿä½¿ç”¨ICMPæ¥æµ‹è¯•ä¸¤ä¸ªè®¾å¤‡ä¹‹é—´çš„ç½‘ç»œè¿é€šæ€§ã€‚</p><blockquote><p>åœ°å€è§£æåè®®ï¼ˆè‹±è¯­ï¼šAddress Resolution Protocolï¼Œç¼©å†™ï¼šARPï¼‰æ˜¯ä¸€ä¸ªé€šè¿‡è§£æç½‘ç»œå±‚åœ°å€æ¥æ‰¾å¯»æ•°æ®é“¾è·¯å±‚åœ°å€çš„ç½‘ç»œä¼ è¾“åè®®ï¼Œå®ƒåœ¨IPv4ä¸­æå…¶é‡è¦ã€‚ARPæœ€åˆåœ¨1982å¹´çš„RFC 826ï¼ˆå¾æ±‚æ„è§ç¨¿ï¼‰ä¸­æå‡ºå¹¶çº³å…¥äº’è”ç½‘æ ‡å‡†STD 37ã€‚ARPä¹Ÿå¯èƒ½æŒ‡æ˜¯åœ¨å¤šæ•°æ“ä½œç³»ç»Ÿä¸­ç®¡ç†å…¶ç›¸å…³åœ°å€çš„ä¸€ä¸ªè¿›ç¨‹ã€‚</p></blockquote><blockquote><p>äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼ˆè‹±è¯­ï¼šInternet Control Message Protocolï¼Œç¼©å†™ï¼šICMPï¼‰æ˜¯äº’è”ç½‘åè®®æ—çš„æ ¸å¿ƒåè®®ä¹‹ä¸€ã€‚å®ƒç”¨äºç½‘é™…åè®®ï¼ˆIPï¼‰ä¸­å‘é€æ§åˆ¶æ¶ˆæ¯ï¼Œæä¾›å¯èƒ½å‘ç”Ÿåœ¨é€šä¿¡ç¯å¢ƒä¸­çš„å„ç§é—®é¢˜åé¦ˆã€‚é€šè¿‡è¿™äº›ä¿¡æ¯ï¼Œä½¿ç®¡ç†è€…å¯ä»¥å¯¹æ‰€å‘ç”Ÿçš„é—®é¢˜ä½œå‡ºè¯Šæ–­ï¼Œç„¶åé‡‡å–é€‚å½“çš„æªæ–½è§£å†³ã€‚</p></blockquote><hr><p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œé€šå¸¸åœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹ä¸éœ€è¦æŸ¥ARPï¼ˆåœ°å€è§£æåè®®ï¼‰è¡¨ï¼š</p><ol><li>è·¨ç½‘æ®µé€šä¿¡ï¼šå½“é€šä¿¡åŒæ–¹ä½äºä¸åŒçš„ç½‘ç»œå­ç½‘ä¸­æ—¶ï¼ŒARPè¡¨ä¸èµ·ä½œç”¨ã€‚æ­¤æ—¶ï¼Œæ•°æ®åŒ…éœ€è¦ç»è¿‡è·¯ç”±å™¨è¿›è¡Œè½¬å‘ï¼Œé€šä¿¡åŒæ–¹åªéœ€æŸ¥æ‰¾é»˜è®¤ç½‘å…³çš„MACåœ°å€ï¼Œè€Œä¸éœ€è¦æŸ¥æ‰¾å¯¹æ–¹çš„IPåœ°å€å’ŒMACåœ°å€çš„æ˜ å°„å…³ç³»ã€‚</li><li>éä»¥å¤ªç½‘é“¾è·¯å±‚åè®®ï¼šARPä¸»è¦ç”¨äºè§£æIPv4åœ°å€å’Œä»¥å¤ªç½‘MACåœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å¯¹äºå…¶ä»–é“¾è·¯å±‚åè®®ï¼ˆå¦‚å¸§ä¸­ç»§ã€ATMç­‰ï¼‰æˆ–å…¶ä»–ç½‘ç»œå±‚åè®®ï¼ˆå¦‚IPv6ï¼‰ï¼ŒARPè¡¨å¯èƒ½æ— æ³•ä½¿ç”¨æˆ–ä½¿ç”¨ä¸åŒçš„æœºåˆ¶ã€‚ä¾‹å¦‚ï¼ŒIPv6ä½¿ç”¨é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰è€ŒéARPã€‚</li><li>å·²çŸ¥ç›®æ ‡MACåœ°å€ï¼šåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå‘é€æ–¹å¯èƒ½å·²çŸ¥ç›®æ ‡è®¾å¤‡çš„MACåœ°å€ï¼Œæ­¤æ—¶æ— éœ€æŸ¥æ‰¾ARPè¡¨ã€‚ä¾‹å¦‚ï¼ŒæŸäº›ç‰¹å®šçš„ç½‘ç»œç®¡ç†æˆ–ç›‘æ§åº”ç”¨å¯èƒ½ç›´æ¥å¤„ç†MACåœ°å€ã€‚</li><li>å¹¿æ’­ä¸å¤šæ’­ï¼šå¯¹äºå¹¿æ’­ï¼ˆä¾‹å¦‚IPv4çš„å…¨å±€å¹¿æ’­åœ°å€255.255.255.255ï¼‰æˆ–å¤šæ’­ï¼ˆä¾‹å¦‚IPv6çš„å¤šæ’­åœ°å€ï¼‰ï¼Œæ•°æ®åŒ…å°†å‘é€ç»™ä¸€ç»„è®¾å¤‡è€Œéå•ä¸ªç›®æ ‡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå‘é€æ–¹æ— éœ€æŸ¥æ‰¾ARPè¡¨ï¼Œè€Œæ˜¯å°†æ•°æ®åŒ…å‘é€åˆ°ä¸€ä¸ªç‰¹å®šçš„å¹¿æ’­æˆ–å¤šæ’­MACåœ°å€ä¸Šã€‚</li></ol><p>æ€»ç»“ï¼šåœ¨è·¨ç½‘ç»œå­ç½‘é€šä¿¡ã€ä½¿ç”¨éä»¥å¤ªç½‘é“¾è·¯å±‚åè®®ã€å·²çŸ¥ç›®æ ‡MACåœ°å€ã€æˆ–è¿›è¡Œå¹¿æ’­å’Œå¤šæ’­é€šä¿¡çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸ä¸éœ€è¦æŸ¥æ‰¾ARPè¡¨ã€‚</p><hr><p>å½“æ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¦‚æ— æ³•åˆ°è¾¾ç›®çš„åœ°æˆ–è¶…æ—¶ç­‰ï¼Œé€šå¸¸æ˜¯è·¯ç”±å™¨æˆ–ç›®æ ‡ä¸»æœºå›å¤ICMPæŠ¥æ–‡ã€‚ä¾‹å¦‚ï¼Œå½“æ•°æ®åŒ…æ— æ³•åˆ°è¾¾ç›®æ ‡åœ°å€æ—¶ï¼Œè·¯ç”±å™¨å¯èƒ½ä¼šå‘é€ICMPâ€œç›®æ ‡ä¸å¯è¾¾â€ï¼ˆDestination Unreachableï¼‰æŠ¥æ–‡ï¼›å½“æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­ä¼ è¾“æ—¶é—´è¿‡é•¿æ—¶ï¼Œè·¯ç”±å™¨å¯èƒ½ä¼šå‘é€ICMPâ€œè¶…æ—¶â€ï¼ˆTime Exceededï¼‰æŠ¥æ–‡ã€‚</p><p><strong>traceroute</strong>ï¼ˆWindowsç³»ç»Ÿä¸­çš„tracertï¼‰æ˜¯ä¸€ä¸ªç½‘ç»œè¯Šæ–­å·¥å…·ï¼Œç”¨äºæ˜¾ç¤ºæ•°æ®åŒ…ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºæ‰€ç»è¿‡çš„è·¯ç”±å™¨ã€‚tracerouteçš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><ol><li>å‘é€æ–¹ç”Ÿæˆä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®åŒ…ï¼ˆé€šå¸¸æ˜¯UDPæˆ–ICMP ECHOè¯·æ±‚æŠ¥æ–‡ï¼‰ï¼Œå¹¶å°†å…¶ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼ŒTime to Liveï¼‰è®¾ç½®ä¸º1ã€‚</li><li>å½“ç¬¬ä¸€ä¸ªè·¯ç”±å™¨æ”¶åˆ°è¯¥æ•°æ®åŒ…æ—¶ï¼Œå®ƒä¼šå°†TTLå‡1ã€‚ç”±äºTTLå˜ä¸º0ï¼Œè·¯ç”±å™¨ä¼šä¸¢å¼ƒè¯¥æ•°æ®åŒ…ï¼Œå¹¶å‘å‘é€æ–¹å‘é€ä¸€ä¸ªICMPâ€œè¶…æ—¶â€ï¼ˆTime Exceededï¼‰æŠ¥æ–‡ã€‚</li><li>å‘é€æ–¹æ”¶åˆ°ICMPâ€œè¶…æ—¶â€æŠ¥æ–‡åï¼Œè®°å½•æŠ¥æ–‡ä¸­çš„è·¯ç”±å™¨åœ°å€ï¼Œç„¶åå†ç”Ÿæˆä¸€ä¸ªç›¸åŒçš„æ•°æ®åŒ…ï¼Œä½†å°†TTLè®¾ç½®ä¸º2ã€‚</li><li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œé€æ­¥å¢åŠ TTLå€¼ï¼Œç›´åˆ°å‘é€æ–¹æ”¶åˆ°ç›®æ ‡ä¸»æœºçš„ICMPâ€œç«¯å£ä¸å¯è¾¾â€ï¼ˆPort Unreachableï¼‰æŠ¥æ–‡ï¼ˆå¯¹äºUDPæ•°æ®åŒ…ï¼‰æˆ–ICMP ECHOå“åº”ï¼ˆå¯¹äºICMP ECHOè¯·æ±‚æŠ¥æ–‡ï¼‰ã€‚</li><li>é€šè¿‡åˆ†ææ”¶åˆ°çš„ICMPæŠ¥æ–‡ï¼Œtracerouteå¯ä»¥æ˜¾ç¤ºæ•°æ®åŒ…ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºæ‰€ç»è¿‡çš„æ‰€æœ‰è·¯ç”±å™¨çš„åœ°å€ï¼Œä»¥åŠæ•°æ®åŒ…åœ¨æ¯ä¸ªè·¯ç”±å™¨ä¸Šçš„å¾€è¿”æ—¶é—´ï¼ˆRTTï¼ŒRound-Trip Timeï¼‰ã€‚</li></ol>',18),ma=n("p",null,"å‚è€ƒï¼š",-1),ga={href:"https://www.linux.com/news/ping-icmp-vs-arp/",target:"_blank",rel:"noopener noreferrer"},va={href:"https://nmap.org/book/host-discovery-techniques.html",target:"_blank",rel:"noopener noreferrer"},ha={href:"https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%8E%A7%E5%88%B6%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE",target:"_blank",rel:"noopener noreferrer"},ba={href:"https://zh.wikipedia.org/wiki/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE",target:"_blank",rel:"noopener noreferrer"},ya={href:"https://www.fortinet.com/resources/cyberglossary/what-is-arp",target:"_blank",rel:"noopener noreferrer"},fa={href:"https://www.tutorialspoint.com/arp-table",target:"_blank",rel:"noopener noreferrer"},wa={href:"https://superuser.com/questions/894557/is-there-a-way-to-get-arp-to-list-devices-on-all-subnets-of-a-network",target:"_blank",rel:"noopener noreferrer"},xa={href:"https://obkio.com/blog/traceroutes-what-are-they-and-how-do-they-work/",target:"_blank",rel:"noopener noreferrer"},Ca={href:"https://www.howtogeek.com/134132/how-to-use-traceroute-to-identify-network-problems/",target:"_blank",rel:"noopener noreferrer"},Sa={href:"https://www.fortinet.com/resources/cyberglossary/traceroutes",target:"_blank",rel:"noopener noreferrer"},_a=t('<h3 id="å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥-æœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†-2023-å­—èŠ‚æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥-æœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†-2023-å­—èŠ‚æå‰æ‰¹" aria-hidden="true">#</a> å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†ï¼Ÿï¼ˆ2023 å­—èŠ‚æå‰æ‰¹ï¼‰</h3><p>æœåŠ¡å™¨ç«¯å¤„ç†å¤§é‡å¹¶å‘è¿æ¥çš„æœºåˆ¶ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><strong>å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹</strong>ï¼šæ¯å½“æ¥æ”¶åˆ°æ–°çš„å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨éƒ½ä¼šåˆ†é…ä¸€ä¸ªæ–°çš„è¿›ç¨‹æˆ–çº¿ç¨‹å»å¤„ç†è¿™ä¸ªè¿æ¥ã€‚è¿™å¯ä»¥ç¡®ä¿æœåŠ¡å™¨èƒ½å¤ŸåŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿æ¥æ•°å¤ªå¤šï¼Œè¿‡å¤šçš„çº¿ç¨‹æˆ–è¿›ç¨‹å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºçš„è¿‡åº¦ä½¿ç”¨ï¼Œå½±å“æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</li><li><strong>äº‹ä»¶é©±åŠ¨ï¼ˆEvent-drivenï¼‰æˆ–å¼‚æ­¥I/Oï¼ˆAsync I/Oï¼‰</strong>ï¼šåœ¨è¿™ç§æ¨¡å‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸€æ¬¡æ¥æ”¶å¤šä¸ªè¿æ¥è¯·æ±‚ï¼Œç„¶åé€šè¿‡äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰å¼‚æ­¥åœ°å¤„ç†è¿™äº›è¿æ¥ã€‚è¿™æ ·å¯ä»¥é¿å…ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºæ–°çš„çº¿ç¨‹æˆ–è¿›ç¨‹ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li><li><strong>è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰</strong>ï¼šå¦‚æœæœåŠ¡å™¨æ— æ³•å¤„ç†æ‰€æœ‰çš„å¹¶å‘è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨å°†è¿æ¥è¯·æ±‚åˆ†é…åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šã€‚è¿™å¯ä»¥åˆ†æ•£æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œæé«˜æ•´ä½“çš„å¤„ç†èƒ½åŠ›ã€‚</li></ol><blockquote><p>è¿™é‡Œè¦åŒºåˆ†å‡ºç°äº†å¤§é‡TIME_WAITæˆ–è€…CLOSE_WAIT</p><p>å¤§é‡çš„ <code>TIME_WAIT</code> æˆ– <code>CLOSE_WAIT</code>ï¼Œå®ƒä»¬æ˜¯ TCP è¿æ¥å…³é—­è¿‡ç¨‹ä¸­çš„çŠ¶æ€ã€‚<code>TIME_WAIT</code> è¡¨ç¤ºè¿æ¥å·²è¢«æœ¬åœ°å…³é—­ï¼Œæ­£åœ¨ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿è¿œç¨‹TCPæ¥æ”¶åˆ°è¿æ¥ç»ˆæ­¢çš„é€šçŸ¥ã€‚<code>CLOSE_WAIT</code> åˆ™è¡¨ç¤ºè¿œç¨‹TCPè¿æ¥å…³é—­æˆ–æ¥æ”¶åˆ°äº†è¿æ¥ç»ˆæ­¢çš„é€šçŸ¥ã€‚</p></blockquote><h3 id="ğŸ”¥-http1-1-2-0åŒºåˆ«-2023-çƒ­é—¨é—®é¢˜ä¹‹ä¸€-2023-ç™¾åº¦æå‰æ‰¹-2023-å­—èŠ‚å®¢æˆ·ç«¯-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-http1-1-2-0åŒºåˆ«-2023-çƒ­é—¨é—®é¢˜ä¹‹ä¸€-2023-ç™¾åº¦æå‰æ‰¹-2023-å­—èŠ‚å®¢æˆ·ç«¯-å½±çŸ³360" aria-hidden="true">#</a> ğŸ”¥ HTTP1.1ï¼Œ 2.0åŒºåˆ«ï¼ˆ2023 çƒ­é—¨é—®é¢˜ä¹‹ä¸€ï¼š2023 ç™¾åº¦æå‰æ‰¹ï¼Œ2023 å­—èŠ‚å®¢æˆ·ç«¯ï¼Œå½±çŸ³360ï¼‰</h3><p>HTTP/1.1 å’Œ HTTP/2 æ˜¯ä¸¤ä¸ªä¸åŒçš„åè®®ç‰ˆæœ¬ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬ä¹‹é—´çš„ä¸€äº›ä¸»è¦åŒºåˆ«ï¼š</p><ol><li><strong>ä¼ è¾“æ–¹å¼</strong>ï¼šHTTP/1.1 ä½¿ç”¨åºåˆ—åŒ–çš„æ–‡æœ¬æ•°æ®æ¥ä¼ è¾“è¯·æ±‚å’Œå“åº”ï¼Œè€Œ HTTP/2 ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®å¸§æ¥ä¼ è¾“è¯·æ±‚å’Œå“åº”ã€‚è¿™ç§äºŒè¿›åˆ¶æ ¼å¼èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°ä¼ è¾“æ•°æ®ï¼Œå‡å°‘äº†æ•°æ®ä¼ è¾“çš„å¤§å°å’Œå»¶è¿Ÿã€‚</li><li><strong>å¤šè·¯å¤ç”¨</strong>ï¼šHTTP/1.1 åœ¨ä¸€ä¸ªè¿æ¥ä¸Šåªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè€Œ HTTP/2 æ”¯æŒåœ¨åŒä¸€ä¸ªè¿æ¥ä¸ŠåŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚å’Œå“åº”ã€‚è¿™ç§å¤šè·¯å¤ç”¨çš„ç‰¹æ€§å¯ä»¥å‡å°‘è¿æ¥å»ºç«‹å’Œå…³é—­çš„å¼€é”€ï¼Œæé«˜äº†æ€§èƒ½å’Œæ•ˆç‡ã€‚</li><li><strong>å¤´éƒ¨å‹ç¼©</strong>ï¼šHTTP/2 å¼•å…¥äº†å¤´éƒ¨å‹ç¼©æœºåˆ¶ï¼Œä½¿ç”¨ HPACK ç®—æ³•å¯¹è¯·æ±‚å’Œå“åº”çš„å¤´éƒ¨è¿›è¡Œå‹ç¼©ã€‚è¿™ç§å‹ç¼©æœºåˆ¶å¯ä»¥å‡å°‘æ•°æ®ä¼ è¾“çš„å¤§å°ï¼Œæé«˜ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li><li><strong>æœåŠ¡å™¨æ¨é€</strong>ï¼šHTTP/2 æ”¯æŒæœåŠ¡å™¨ä¸»åŠ¨æ¨é€èµ„æºç»™å®¢æˆ·ç«¯ï¼Œä»¥æé«˜é¡µé¢åŠ è½½æ€§èƒ½ã€‚æœåŠ¡å™¨å¯ä»¥åœ¨å‘é€è¯·æ±‚çš„åŒæ—¶ï¼Œå°†ä¸€äº›å¯èƒ½éœ€è¦çš„èµ„æºä¸»åŠ¨æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯å‘é€é¢å¤–è¯·æ±‚çš„éœ€è¦ã€‚</li><li><strong>æµæ§åˆ¶</strong>ï¼šHTTP/2 å¼•å…¥äº†æµæ§åˆ¶æœºåˆ¶ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ§åˆ¶æ•°æ®æµçš„é€Ÿç‡ï¼Œä»¥é¿å…æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ‹¥å¡å’Œæº¢å‡ºã€‚ æ€»ä½“è€Œè¨€ï¼ŒHTTP/2 ç›¸å¯¹äº HTTP/1.1 æ¥è¯´ï¼Œåœ¨æ€§èƒ½å’Œæ•ˆç‡ä¸Šæœ‰äº†å¾ˆå¤§çš„æå‡ã€‚å®ƒçš„å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ã€æœåŠ¡å™¨æ¨é€ç­‰ç‰¹æ€§ä½¿å¾—ç½‘ç»œä¼ è¾“æ›´åŠ é«˜æ•ˆï¼Œèƒ½å¤Ÿæ›´å¿«åœ°åŠ è½½ç½‘é¡µå’Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</li><li><strong>æµé‡æ§åˆ¶</strong>ï¼šHTTP/1.1 ä½¿ç”¨ TCP å±‚çš„æµé‡æ§åˆ¶æœºåˆ¶ï¼Œè€Œ HTTP/2 åœ¨åº”ç”¨å±‚å®ç°äº†è‡ªå·±çš„æµé‡æ§åˆ¶æœºåˆ¶ã€‚è¿™ä½¿å¾— HTTP/2 å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æ•°æ®çš„ä¼ è¾“é€Ÿç‡ï¼Œé¿å…ç¼“å†²åŒºæº¢å‡ºçš„é—®é¢˜ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼ŒHTTP1.1å’ŒHTTP2.0æ˜¯ç”¨äºåœ¨webæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ è¾“æ•°æ®çš„åè®®ã€‚HTTP2.0æ¯”HTTP1.1æ›´å¿«ã€æ›´å¯é ï¼Œå› ä¸ºå®ƒä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç ã€å¤šè·¯å¤ç”¨å’Œå¹¶å‘ã€‚HTTP1.1ä¸ºæ¯ä¸ªTCPè¿æ¥åŠ è½½ä¸€ä¸ªè¯·æ±‚ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œå»¶è¿Ÿå’Œé¡µé¢åŠ è½½é€Ÿåº¦å‡æ…¢ã€‚HTTP2.0å¯ä»¥å¹¶è¡Œå¤„ç†å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè¿™å¯ä»¥æé«˜webæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚HTTP2.0ä¸HTTP1.1è¯­ä¹‰ï¼ˆå¦‚æ–¹æ³•å’Œå¤´ï¼‰å…¼å®¹ï¼Œå› æ­¤webåº”ç”¨ç¨‹åºä»ç„¶å¯ä»¥ä½¿ç”¨æ–°åè®®æ­£å¸¸è¿è¡Œã€‚</p>',8),Ta=n("p",null,"å‚è€ƒï¼š",-1),La={href:"https://www.cloudflare.com/zh-cn/learning/performance/http2-vs-http1.1/",target:"_blank",rel:"noopener noreferrer"},Ma={href:"https://www.baeldung.com/cs/http-versions",target:"_blank",rel:"noopener noreferrer"},Aa={href:"https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference",target:"_blank",rel:"noopener noreferrer"},Pa=n("h3",{id:"tcp-æ˜¯æ€ä¹ˆå®ç°å¯é ä¼ è¾“çš„-2023-å­—èŠ‚ã€2023-å½±çŸ³360",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#tcp-æ˜¯æ€ä¹ˆå®ç°å¯é ä¼ è¾“çš„-2023-å­—èŠ‚ã€2023-å½±çŸ³360","aria-hidden":"true"},"#"),s(" tcp æ˜¯æ€ä¹ˆå®ç°å¯é ä¼ è¾“çš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ã€2023 å½±çŸ³360ï¼‰")],-1),Ra=n("ul",null,[n("li",null,"åºåˆ—å·ä¸ç¡®è®¤åº”ç­”ï¼šTCPå°†æ¯ä¸ªå‘é€çš„æ•°æ®åŒ…è¿›è¡Œç¼–å·ï¼ˆåºåˆ—å·ï¼‰ï¼Œæ¥æ”¶æ–¹é€šè¿‡å‘é€ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰æ¥å‘ŠçŸ¥å‘é€æ–¹å·²æˆåŠŸæ¥æ”¶åˆ°æ•°æ®ã€‚å¦‚æœå‘é€æ–¹åœ¨ä¸€å®šæ—¶é—´å†…æœªæ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œä¼šè¿›è¡Œè¶…æ—¶é‡ä¼ ã€‚"),n("li",null,"æ•°æ®æ ¡éªŒï¼šTCPä½¿ç”¨æ ¡éªŒå’Œæ¥éªŒè¯æ•°æ®çš„å®Œæ•´æ€§ã€‚æ¥æ”¶æ–¹ä¼šè®¡ç®—æ¥æ”¶åˆ°çš„æ•°æ®çš„æ ¡éªŒå’Œï¼Œå¹¶ä¸å‘é€æ–¹å‘é€çš„æ ¡éªŒå’Œè¿›è¡Œæ¯”è¾ƒï¼Œä»¥æ£€æµ‹æ•°æ®æ˜¯å¦åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ã€‚"),n("li",null,"çª—å£æ§åˆ¶ï¼šTCPä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶æ¥æ§åˆ¶å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´çš„æ•°æ®æµé‡ã€‚å‘é€æ–¹æ ¹æ®æ¥æ”¶æ–¹çš„å¤„ç†èƒ½åŠ›å’Œç½‘ç»œçŠ¶å†µæ¥è°ƒæ•´å‘é€çš„æ•°æ®é‡ï¼Œæ¥æ”¶æ–¹åˆ™é€šè¿‡çª—å£å¤§å°æ¥å‘ŠçŸ¥å‘é€æ–¹å¯ä»¥æ¥æ”¶çš„æ•°æ®é‡ã€‚"),n("li",null,"é‡ä¼ æœºåˆ¶ï¼šå¦‚æœå‘é€æ–¹æœªæ”¶åˆ°ç¡®è®¤åº”ç­”æˆ–æ¥æ”¶æ–¹æ£€æµ‹åˆ°æ•°æ®é”™è¯¯ï¼ŒTCPä¼šè¿›è¡Œé‡ä¼ ã€‚å‘é€æ–¹ä¼šæ ¹æ®è¶…æ—¶æ—¶é—´æˆ–æ¥æ”¶æ–¹çš„å†—ä½™ç¡®è®¤æ¥è§¦å‘é‡ä¼ ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å¯é ä¼ è¾“ã€‚"),n("li",null,"æ‹¥å¡æ§åˆ¶ï¼šTCPä½¿ç”¨æ‹¥å¡æ§åˆ¶ç®—æ³•æ¥é¿å…ç½‘ç»œæ‹¥å¡ã€‚é€šè¿‡åŠ¨æ€è°ƒæ•´å‘é€é€Ÿç‡å’Œçª—å£å¤§å°ï¼ŒTCPå¯ä»¥æ ¹æ®ç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦æ¥è¿›è¡Œé€‚å½“çš„è°ƒæ•´ï¼Œä»¥æé«˜ç½‘ç»œçš„åˆ©ç”¨ç‡å’Œç¨³å®šæ€§ã€‚")],-1),qa={href:"https://xiaolincoding.com/network/3_tcp/tcp_feature.html#_4-2-tcp-%E9%87%8D%E4%BC%A0%E3%80%81%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E3%80%81%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E3%80%81%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6",target:"_blank",rel:"noopener noreferrer"},Ea=t('<h3 id="ipæ•°æ®æŠ¥çš„æŠ¥å¤´æœ‰å“ªäº›å­—æ®µ-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#ipæ•°æ®æŠ¥çš„æŠ¥å¤´æœ‰å“ªäº›å­—æ®µ-2023-å­—èŠ‚" aria-hidden="true">#</a> IPæ•°æ®æŠ¥çš„æŠ¥å¤´æœ‰å“ªäº›å­—æ®µï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><figure><img src="'+L+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="ip-æŠ¥æ–‡çš„ttlæ˜¯ä»€ä¹ˆæ„æ€-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#ip-æŠ¥æ–‡çš„ttlæ˜¯ä»€ä¹ˆæ„æ€-2023-å­—èŠ‚" aria-hidden="true">#</a> IP æŠ¥æ–‡çš„TTLæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><p>æŒ‡å®šæ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­å¯ä»¥ç»è¿‡çš„æœ€å¤§è·¯ç”±å™¨è·³æ•°ã€‚æ¯å½“æ•°æ®æŠ¥ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨æ—¶ï¼Œè¯¥å­—æ®µçš„å€¼ä¼šå‡å°‘1ã€‚å½“TTLçš„å€¼ä¸º0æ—¶ï¼Œè·¯ç”±å™¨å°†ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥å¹¶å‘é€ICMPçš„æ—¶é—´è¶…è¿‡æ¶ˆæ¯ç»™æºä¸»æœºã€‚</p><p>TTLçš„ä¸»è¦ç›®çš„æ˜¯é˜²æ­¢æ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯ï¼Œé¿å…ç”±äºè·¯ç”±ç¯è·¯æˆ–å…¶ä»–é—®é¢˜å¯¼è‡´çš„æ•°æ®æŠ¥æ— æ³•æ­£å¸¸åˆ°è¾¾ç›®çš„åœ°ã€‚é€šè¿‡é™åˆ¶æ•°æ®æŠ¥çš„æœ€å¤§è·³æ•°ï¼ŒTTLå¯ä»¥ç¡®ä¿æ•°æ®æŠ¥åœ¨æœ‰é™çš„æ—¶é—´å†…èƒ½å¤Ÿåˆ°è¾¾ç›®æ ‡ä¸»æœºæˆ–è¢«ä¸¢å¼ƒï¼Œä»¥é¿å…ç½‘ç»œèµ„æºçš„æµªè´¹å’Œå»¶è¿Ÿã€‚</p><h3 id="å¦‚ä½•å®ç°ä¸€ä¸ªå¯é udp-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®ç°ä¸€ä¸ªå¯é udp-2023-ç¾å›¢" aria-hidden="true">#</a> å¦‚ä½•å®ç°ä¸€ä¸ªå¯é UDPï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ol><li><strong>åˆ†åŒ…ä¸ç»„åŒ…</strong>: ç”±äºUDPæœ‰æ•°æ®åŒ…å¤§å°çš„é™åˆ¶ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦å°†å¤§æ•°æ®åˆ‡åˆ†æˆå¤šä¸ªå°æ•°æ®åŒ…è¿›è¡Œå‘é€ï¼Œæ¥æ”¶æ–¹åˆ™éœ€è¦å°†è¿™äº›å°æ•°æ®åŒ…é‡æ–°ç»„è£…ã€‚</li><li><strong>åºåˆ—å·</strong>: å¯¹æ¯ä¸€ä¸ªUDPæ•°æ®åŒ…åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„åºåˆ—å·ï¼Œè¿™æ ·æ¥æ”¶æ–¹å°±å¯ä»¥çŸ¥é“æ˜¯å¦æœ‰æ•°æ®åŒ…ä¸¢å¤±æˆ–æ˜¯æ•°æ®åŒ…åˆ°è¾¾çš„é¡ºåºæ˜¯å¦æ­£ç¡®ã€‚</li><li><strong>ç¡®è®¤ä¸é‡ä¼ </strong>: <ul><li><strong>ç¡®è®¤ï¼ˆACKï¼‰</strong>: å½“æ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œå®ƒåº”è¯¥å‘é€ä¸€ä¸ªç¡®è®¤åŒ…ï¼ˆACKï¼‰ç»™å‘é€æ–¹ã€‚</li><li><strong>è¶…æ—¶ä¸é‡ä¼ </strong>: å‘é€æ–¹éœ€è¦ä¸ºæ¯ä¸ªå·²å‘é€çš„æ•°æ®åŒ…è®¾ç½®ä¸€ä¸ªè¶…æ—¶è®¡æ—¶å™¨ã€‚å¦‚æœåœ¨è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å¯¹åº”çš„ç¡®è®¤åŒ…ï¼Œå‘é€æ–¹åº”é‡ä¼ æ•°æ®åŒ…ã€‚</li></ul></li><li><strong>æ»‘åŠ¨çª—å£</strong>: ä¸ºäº†æ§åˆ¶æ•°æ®åŒ…çš„æµé‡å’Œé¿å…ç½‘ç»œæ‹¥å¡ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªæ»‘åŠ¨çª—å£æœºåˆ¶ã€‚è¿™æ„å‘³ç€å‘é€æ–¹åœ¨ä»»ä½•æ—¶å€™åªèƒ½æœ‰å›ºå®šæ•°é‡çš„æœªè¢«ç¡®è®¤çš„æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­ã€‚</li><li><strong>é¡ºåºæ§åˆ¶</strong>: ç”±äºç½‘ç»œçš„åŸå› ï¼Œæ•°æ®åŒ…å¯èƒ½ä¼šä¹±åºåˆ°è¾¾æ¥æ”¶æ–¹ã€‚æ¥æ”¶æ–¹åº”è¯¥ä½¿ç”¨æ•°æ®åŒ…çš„åºåˆ—å·å¯¹å…¶è¿›è¡Œé‡æ–°æ’åºï¼Œå¹¶ç¡®ä¿ä¸Šå±‚åº”ç”¨æŒ‰æ­£ç¡®çš„é¡ºåºæ¥æ”¶æ•°æ®ã€‚</li><li><strong>é”™è¯¯æ£€æµ‹</strong>: å¯ä»¥ä½¿ç”¨è¯¸å¦‚CRCï¼ˆå¾ªç¯å†—ä½™æ£€æŸ¥ï¼‰è¿™æ ·çš„æŠ€æœ¯æ¥æ£€æŸ¥æ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦è¢«æŸåã€‚</li><li><strong>æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶</strong>: æ ¹æ®ç½‘ç»œçš„çŠ¶æ€å’Œæ¥æ”¶æ–¹çš„å¤„ç†èƒ½åŠ›ï¼ŒåŠ¨æ€åœ°è°ƒæ•´å‘é€é€Ÿç‡ï¼Œé¿å…é€ æˆç½‘ç»œæ‹¥å¡æˆ–æ¥æ”¶æ–¹çš„èµ„æºä¸è¶³ã€‚</li></ol><h3 id="pingå‘½ä»¤æ˜¯ä»€ä¹ˆåè®®-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#pingå‘½ä»¤æ˜¯ä»€ä¹ˆåè®®-2023-ç¾å›¢" aria-hidden="true">#</a> pingå‘½ä»¤æ˜¯ä»€ä¹ˆåè®®ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>icmp åè®®</p><p>åŒä¸ªå­ç½‘ä¸‹çš„ä¸»æœº A å’Œ ä¸»æœº Bï¼Œä¸»æœº A æ‰§è¡Œ<code>ping</code> ä¸»æœº B åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å…¶é—´å‘é€äº†ä»€ä¹ˆï¼Ÿ</p><figure><img src="'+M+'" alt="ping-0" tabindex="0" loading="lazy"><figcaption>ping-0</figcaption></figure><p>ping å‘½ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œæºä¸»æœºé¦–å…ˆä¼šæ„å»ºä¸€ä¸ª <strong>ICMP å›é€è¯·æ±‚æ¶ˆæ¯</strong>æ•°æ®åŒ…ã€‚</p><p>ICMP æ•°æ®åŒ…å†…åŒ…å«å¤šä¸ªå­—æ®µï¼Œæœ€é‡è¦çš„æ˜¯ä¸¤ä¸ªï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯<strong>ç±»å‹</strong>ï¼Œå¯¹äºå›é€è¯·æ±‚æ¶ˆæ¯è€Œè¨€è¯¥å­—æ®µä¸º <code>8</code>ï¼›</li><li>å¦å¤–ä¸€ä¸ªæ˜¯<strong>åºå·</strong>ï¼Œä¸»è¦ç”¨äºåŒºåˆ†è¿ç»­ ping çš„æ—¶å€™å‘å‡ºçš„å¤šä¸ªæ•°æ®åŒ…ã€‚</li></ul><p>æ¯å‘å‡ºä¸€ä¸ªè¯·æ±‚æ•°æ®åŒ…ï¼Œåºå·ä¼šè‡ªåŠ¨åŠ  <code>1</code>ã€‚ä¸ºäº†èƒ½å¤Ÿè®¡ç®—å¾€è¿”æ—¶é—´ <code>RTT</code>ï¼Œå®ƒä¼šåœ¨æŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†æ’å…¥å‘é€æ—¶é—´ã€‚</p><figure><img src="'+A+'" alt="ping-1" tabindex="0" loading="lazy"><figcaption>ping-1</figcaption></figure><p>ç„¶åï¼Œç”± ICMP åè®®å°†è¿™ä¸ªæ•°æ®åŒ…è¿åŒåœ°å€ 192.168.1.2 ä¸€èµ·äº¤ç»™ IP å±‚ã€‚IP å±‚å°†ä»¥ 192.168.1.2 ä½œä¸º<strong>ç›®çš„åœ°å€</strong>ï¼Œæœ¬æœº IP åœ°å€ä½œä¸º<strong>æºåœ°å€</strong>ï¼Œ<strong>åè®®</strong>å­—æ®µè®¾ç½®ä¸º <code>1</code> è¡¨ç¤ºæ˜¯ <code>ICMP</code>åè®®ï¼Œå†åŠ ä¸Šä¸€äº›å…¶ä»–æ§åˆ¶ä¿¡æ¯ï¼Œæ„å»ºä¸€ä¸ª <code>IP</code> æ•°æ®åŒ…ã€‚</p><figure><img src="'+P+'" alt="ping-2" tabindex="0" loading="lazy"><figcaption>ping-2</figcaption></figure><p>æ¥ä¸‹æ¥ï¼Œéœ€è¦åŠ å…¥ <code>MAC</code> å¤´ã€‚å¦‚æœåœ¨æœ¬åœ° ARP æ˜ å°„è¡¨ä¸­æŸ¥æ‰¾å‡º IP åœ°å€ 192.168.1.2 æ‰€å¯¹åº”çš„ MAC åœ°å€ï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦å‘é€ <code>ARP</code> åè®®æŸ¥è¯¢ MAC åœ°å€ï¼Œè·å¾— MAC åœ°å€åï¼Œç”±æ•°æ®é“¾è·¯å±‚æ„å»ºä¸€ä¸ªæ•°æ®å¸§ï¼Œç›®çš„åœ°å€æ˜¯ IP å±‚ä¼ è¿‡æ¥çš„ MAC åœ°å€ï¼Œæºåœ°å€åˆ™æ˜¯æœ¬æœºçš„ MAC åœ°å€ï¼›è¿˜è¦é™„åŠ ä¸Šä¸€äº›æ§åˆ¶ä¿¡æ¯ï¼Œä¾æ®ä»¥å¤ªç½‘çš„ä»‹è´¨è®¿é—®è§„åˆ™ï¼Œå°†å®ƒä»¬ä¼ é€å‡ºå»ã€‚</p><figure><img src="'+R+'" alt="ping-3" tabindex="0" loading="lazy"><figcaption>ping-3</figcaption></figure><p>ä¸»æœº <code>B</code> æ”¶åˆ°è¿™ä¸ªæ•°æ®å¸§åï¼Œå…ˆæ£€æŸ¥å®ƒçš„ç›®çš„ MAC åœ°å€ï¼Œå¹¶å’Œæœ¬æœºçš„ MAC åœ°å€å¯¹æ¯”ï¼Œå¦‚ç¬¦åˆï¼Œåˆ™æ¥æ”¶ï¼Œå¦åˆ™å°±ä¸¢å¼ƒã€‚</p><p>æ¥æ”¶åæ£€æŸ¥è¯¥æ•°æ®å¸§ï¼Œå°† IP æ•°æ®åŒ…ä»å¸§ä¸­æå–å‡ºæ¥ï¼Œäº¤ç»™æœ¬æœºçš„ IP å±‚ã€‚åŒæ ·ï¼ŒIP å±‚æ£€æŸ¥åï¼Œå°†æœ‰ç”¨çš„ä¿¡æ¯æå–åäº¤ç»™ ICMP åè®®ã€‚</p><p>ä¸»æœº <code>B</code> ä¼šæ„å»ºä¸€ä¸ª <strong>ICMP å›é€å“åº”æ¶ˆæ¯</strong>æ•°æ®åŒ…ï¼Œå›é€å“åº”æ•°æ®åŒ…çš„<strong>ç±»å‹</strong>å­—æ®µä¸º <code>0</code>ï¼Œ<strong>åºå·</strong>ä¸ºæ¥æ”¶åˆ°çš„è¯·æ±‚æ•°æ®åŒ…ä¸­çš„åºå·ï¼Œç„¶åå†å‘é€å‡ºå»ç»™ä¸»æœº Aã€‚</p><figure><img src="'+q+'" alt="ping-4" tabindex="0" loading="lazy"><figcaption>ping-4</figcaption></figure><p>åœ¨è§„å®šçš„æ—¶å€™é—´å†…ï¼Œæºä¸»æœºå¦‚æœæ²¡æœ‰æ¥åˆ° ICMP çš„åº”ç­”åŒ…ï¼Œåˆ™è¯´æ˜ç›®æ ‡ä¸»æœºä¸å¯è¾¾ï¼›å¦‚æœæ¥æ”¶åˆ°äº† ICMP å›é€å“åº”æ¶ˆæ¯ï¼Œåˆ™è¯´æ˜ç›®æ ‡ä¸»æœºå¯è¾¾ã€‚</p><p>æ­¤æ—¶ï¼Œæºä¸»æœºä¼šæ£€æŸ¥ï¼Œç”¨å½“å‰æ—¶åˆ»å‡å»è¯¥æ•°æ®åŒ…æœ€åˆä»æºä¸»æœºä¸Šå‘å‡ºçš„æ—¶åˆ»ï¼Œå°±æ˜¯ ICMP æ•°æ®åŒ…çš„æ—¶é—´å»¶è¿Ÿã€‚</p><p>é’ˆå¯¹ä¸Šé¢å‘é€çš„äº‹æƒ…ï¼Œæ€»ç»“æˆäº†å¦‚ä¸‹å›¾ï¼š</p><figure><img src="'+E+'" alt="ping-5" tabindex="0" loading="lazy"><figcaption>ping-5</figcaption></figure><p>å½“ç„¶è¿™åªæ˜¯æœ€ç®€å•çš„ï¼ŒåŒä¸€ä¸ªå±€åŸŸç½‘é‡Œé¢çš„æƒ…å†µã€‚å¦‚æœè·¨ç½‘æ®µçš„è¯ï¼Œè¿˜ä¼šæ¶‰åŠç½‘å…³çš„è½¬å‘ã€è·¯ç”±å™¨çš„è½¬å‘ç­‰ç­‰ã€‚</p><p>ä½†æ˜¯å¯¹äº ICMP çš„å¤´æ¥è®²ï¼Œæ˜¯æ²¡ä»€ä¹ˆå½±å“çš„ã€‚ä¼šå½±å“çš„æ˜¯æ ¹æ®ç›®æ ‡ IP åœ°å€ï¼Œé€‰æ‹©è·¯ç”±çš„ä¸‹ä¸€è·³ï¼Œè¿˜æœ‰æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨åˆ°è¾¾ä¸€ä¸ªæ–°çš„å±€åŸŸç½‘ï¼Œéœ€è¦æ¢ MAC å¤´é‡Œé¢çš„ MAC åœ°å€ã€‚</p><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå¯ä»¥çœ‹å‡º ping è¿™ä¸ªç¨‹åºæ˜¯<strong>ä½¿ç”¨äº† ICMP é‡Œé¢çš„ ECHO REQUESTï¼ˆç±»å‹ä¸º 8 ï¼‰ å’Œ ECHO REPLY ï¼ˆç±»å‹ä¸º 0ï¼‰</strong>ã€‚</p><h3 id="äº†è§£å“ªäº›ç½‘ç»œé”™è¯¯ç å—-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#äº†è§£å“ªäº›ç½‘ç»œé”™è¯¯ç å—-2023-ç¾å›¢" aria-hidden="true">#</a> äº†è§£å“ªäº›ç½‘ç»œé”™è¯¯ç å—?ï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>ä»¥ä¸‹æ˜¯å…¶ä¸­ä¸€äº›å¸¸è§çš„é”™è¯¯ç åŠå…¶å«ä¹‰ï¼š</p><ul><li>400 Bad Requestï¼šè¯·æ±‚æ— æ•ˆæˆ–ä¸å®Œæ•´ã€‚</li><li>401 Unauthorizedï¼šæœªç»æˆæƒï¼Œéœ€è¦èº«ä»½éªŒè¯ã€‚</li><li>403 Forbiddenï¼šæœåŠ¡å™¨æ‹’ç»è¯·æ±‚ï¼Œæ²¡æœ‰è®¿é—®æƒé™ã€‚</li><li>404 Not Foundï¼šè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚</li><li>500 Internal Server Errorï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚</li><li>502 Bad Gatewayï¼šç½‘å…³é”™è¯¯ï¼Œä½œä¸ºä»£ç†æˆ–ç½‘å…³çš„æœåŠ¡å™¨ä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚</li><li>503 Service Unavailableï¼šæœåŠ¡ä¸å¯ç”¨ï¼ŒæœåŠ¡å™¨æš‚æ—¶è¿‡è½½æˆ–ç»´æŠ¤ä¸­ã€‚</li><li>504 Gateway Timeoutï¼šç½‘å…³è¶…æ—¶ï¼Œä½œä¸ºä»£ç†æˆ–ç½‘å…³çš„æœåŠ¡å™¨åœ¨ç­‰å¾…ä¸Šæ¸¸æœåŠ¡å™¨å“åº”æ—¶è¶…æ—¶ã€‚</li><li>505 HTTP Version Not Supportedï¼šä¸æ”¯æŒçš„HTTPåè®®ç‰ˆæœ¬ã€‚</li></ul><h3 id="cookieå’ŒsessionåŒºåˆ«-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#cookieå’ŒsessionåŒºåˆ«-2023-å¿«æ‰‹" aria-hidden="true">#</a> cookieå’ŒsessionåŒºåˆ«ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><ul><li>å­˜å‚¨ä½ç½®ï¼šCookieå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ä¸­ï¼Œè€ŒSessionå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ã€‚</li><li>å®‰å…¨æ€§ï¼šç”±äºCookieå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå› æ­¤å®¹æ˜“å—åˆ°å®‰å…¨æ”»å‡»ï¼Œå¦‚è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰å’Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰ã€‚è€ŒSessionå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¯¹å®¢æˆ·ç«¯ä¸å¯è§ï¼Œç›¸å¯¹æ¥è¯´æ›´å®‰å…¨ã€‚</li><li>å­˜å‚¨å®¹é‡ï¼šCookieçš„å­˜å‚¨å®¹é‡æœ‰é™ï¼Œé€šå¸¸ä¸º4KBå·¦å³ï¼Œè€ŒSessionçš„å­˜å‚¨å®¹é‡è¾ƒå¤§ï¼Œå—é™äºæœåŠ¡å™¨çš„é…ç½®ã€‚</li></ul><h3 id="tcpçš„ç²˜åŒ…ä¸æ‹†åŒ…-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#tcpçš„ç²˜åŒ…ä¸æ‹†åŒ…-2023-å¾—ç‰©" aria-hidden="true">#</a> TCPçš„ç²˜åŒ…ä¸æ‹†åŒ…ï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>TCPçš„ç²˜åŒ…ä¸æ‹†åŒ…æ˜¯åœ¨TCPåè®®ä¸­å¯èƒ½å‡ºç°çš„ä¸€ç§ç°è±¡ã€‚TCPæ˜¯ä¸€ç§é¢å‘å­—èŠ‚æµçš„åè®®ï¼Œæ²¡æœ‰å›ºå®šçš„æ¶ˆæ¯è¾¹ç•Œï¼Œå› æ­¤åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå‘é€æ–¹å‘é€çš„å¤šä¸ªæ•°æ®åŒ…å¯èƒ½ä¼šè¢«ç²˜æˆä¸€åŒ…ä¼ è¾“ï¼ˆç²˜åŒ…ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªæ•°æ®åŒ…å¯èƒ½è¢«æ‹†åˆ†æˆå¤šä¸ªå°åŒ…ä¼ è¾“ï¼ˆæ‹†åŒ…ï¼‰ã€‚</p><p>é€ æˆTCPç²˜åŒ…çš„åŸå› æ˜¯ï¼Œå‘é€æ–¹åœ¨å‘é€æ•°æ®æ—¶ï¼Œä¼šé€šè¿‡ç¼“å†²åŒºè¿›è¡Œä¼˜åŒ–ã€‚å¦‚æœä¸€æ¬¡è¯·æ±‚å‘é€çš„æ•°æ®é‡å°äºç¼“å†²åŒºå¤§å°ï¼Œåˆ™TCPä¼šå°†å¤šä¸ªè¯·æ±‚åˆå¹¶ä¸ºåŒä¸€ä¸ªè¯·æ±‚è¿›è¡Œå‘é€ï¼Œä»è€Œå¯¼è‡´ç²˜åŒ…é—®é¢˜ã€‚è€Œå½“ä¸€æ¬¡è¯·æ±‚å‘é€çš„æ•°æ®é‡è¶…è¿‡ç¼“å†²åŒºå¤§å°æ—¶ï¼ŒTCPä¼šå°†å…¶æ‹†åˆ†ä¸ºå¤šæ¬¡å‘é€ï¼Œå°±ä¼šå‘ç”Ÿæ‹†åŒ…ç°è±¡ã€‚</p><p>ç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜åœ¨æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ä»¥åŠä¼ è¾“å±‚éƒ½æœ‰å¯èƒ½å‘ç”Ÿã€‚ä½†ç”±äºUDPåè®®å…·æœ‰æ¶ˆæ¯ä¿æŠ¤è¾¹ç•Œï¼Œä¸ä¼šå‘ç”Ÿç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜ï¼Œå› æ­¤ç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜ä¸»è¦å‘ç”Ÿåœ¨TCPåè®®ä¸­ã€‚</p><p>å…³äºTCPç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæœ‰ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ã€‚æ¯”å¦‚å¯ä»¥ä½¿ç”¨å®šé•¿åŒ…å’Œå®šç•Œç¬¦åŒ…ï¼Œå³åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥åŒ…é•¿åº¦æˆ–ä½¿ç”¨ç‰¹å®šå­—ç¬¦æ¥æ ‡è¯†åŒ…çš„è¾¹ç•Œã€‚æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨æ¶ˆæ¯å¤´ä¸­çš„é•¿åº¦å­—æ®µè¿›è¡Œå¤„ç†ï¼Œæˆ–è€…ä½¿ç”¨åŸºäºæ—¶é—´çš„ç­–ç•¥è¿›è¡ŒåŒ…çš„åˆ†å‰²å’Œé‡ç»„ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸ºäº†è§£å†³TCPç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶è¿›è¡Œç›¸åº”çš„è°ƒè¯•å’Œä¼˜åŒ–ã€‚</p><p>æ‰€ä»¥ï¼ŒTCPçš„ç²˜åŒ…ä¸æ‹†åŒ…æ˜¯æŒ‡åœ¨TCPåè®®ä¸­å¯èƒ½å‡ºç°çš„æ•°æ®åŒ…ä¼ è¾“ç°è±¡ï¼Œå…¶ä¸­ç²˜åŒ…æ˜¯æŒ‡å¤šä¸ªæ•°æ®åŒ…è¢«ç²˜åˆåœ¨ä¸€èµ·ä¼ è¾“ï¼Œæ‹†åŒ…æ˜¯æŒ‡ä¸€ä¸ªæ•°æ®åŒ…è¢«æ‹†åˆ†æˆå¤šä¸ªå°åŒ…ä¼ è¾“ã€‚è§£å†³TCPç²˜åŒ…ä¸æ‹†åŒ…é—®é¢˜å¯ä»¥é‡‡ç”¨å®šé•¿åŒ…ã€å®šç•Œç¬¦åŒ…ã€é•¿åº¦å­—æ®µç­‰æ–¹æ³•ã€‚</p><h3 id="http-2-æµå¼è¿æ¥æ˜¯æ€ä¹ˆå®ç°çš„-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#http-2-æµå¼è¿æ¥æ˜¯æ€ä¹ˆå®ç°çš„-2023-å¿«æ‰‹" aria-hidden="true">#</a> HTTP 2 æµå¼è¿æ¥æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“ HTTP/1.1 çš„å®ç°æ˜¯åŸºäºè¯·æ±‚-å“åº”æ¨¡å‹çš„ã€‚åŒä¸€ä¸ªè¿æ¥ä¸­ï¼ŒHTTP å®Œæˆä¸€ä¸ªäº‹åŠ¡ï¼ˆè¯·æ±‚ä¸å“åº”ï¼‰ï¼Œæ‰èƒ½å¤„ç†ä¸‹ä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å‘å‡ºè¯·æ±‚ç­‰å¾…å“åº”çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯æ²¡åŠæ³•åšå…¶ä»–äº‹æƒ…çš„ï¼Œå¦‚æœå“åº”è¿Ÿè¿Ÿä¸æ¥ï¼Œé‚£ä¹ˆåç»­çš„è¯·æ±‚æ˜¯æ— æ³•å‘é€çš„ï¼Œä¹Ÿé€ æˆäº†é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚</p><p>è€Œ HTTP/2 å°±å¾ˆç‰›é€¼äº†ï¼Œé€šè¿‡ Stream è¿™ä¸ªè®¾è®¡ï¼Œå¤šä¸ª Stream å¤ç”¨ä¸€æ¡ TCP è¿æ¥ï¼Œè¾¾åˆ°å¹¶å‘çš„æ•ˆæœï¼Œè§£å†³äº† HTTP/1.1 é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ï¼Œæé«˜äº† HTTP ä¼ è¾“çš„ååé‡ã€‚</p><p>ä¸ºäº†ç†è§£ HTTP/2 çš„å¹¶å‘æ˜¯æ€æ ·å®ç°çš„ï¼Œæˆ‘ä»¬å…ˆæ¥ç†è§£ HTTP/2 ä¸­çš„ Streamã€Messageã€Frame è¿™ 3 ä¸ªæ¦‚å¿µã€‚</p><figure><img src="https://camo.githubusercontent.com/eac74b0353c82f43301e48df402dceba83c7cfc652cc1160e62cba22b08042df/68747470733a2f2f63646e2e7869616f6c696e636f64696e672e636f6d2f67682f7869616f6c696e636f6465722f496d616765486f737434406d61696e2f2545372542442539312545372542422539432f68747470322f73747265616d2e706e67" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä½ å¯ä»¥ä»ä¸Šå›¾ä¸­çœ‹åˆ°ï¼š</p><ul><li>1 ä¸ª TCP è¿æ¥åŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ª Streamï¼ŒStream æ˜¯ HTTP/2 å¹¶å‘çš„å…³é”®æŠ€æœ¯ï¼›</li><li>Stream é‡Œå¯ä»¥åŒ…å« 1 ä¸ªæˆ–å¤šä¸ª Messageï¼ŒMessage å¯¹åº” HTTP/1 ä¸­çš„è¯·æ±‚æˆ–å“åº”ï¼Œç”± HTTP å¤´éƒ¨å’ŒåŒ…ä½“æ„æˆï¼›</li><li>Message é‡ŒåŒ…å«ä¸€æ¡æˆ–è€…å¤šä¸ª Frameï¼ŒFrame æ˜¯ HTTP/2 æœ€å°å•ä½ï¼Œä»¥äºŒè¿›åˆ¶å‹ç¼©æ ¼å¼å­˜æ”¾ HTTP/1 ä¸­çš„å†…å®¹ï¼ˆå¤´éƒ¨å’ŒåŒ…ä½“ï¼‰ï¼›</li></ul><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸ªç»“è®ºï¼šå¤šä¸ª Stream è·‘åœ¨ä¸€æ¡ TCP è¿æ¥ï¼ŒåŒä¸€ä¸ª HTTP è¯·æ±‚ä¸å“åº”æ˜¯è·‘åœ¨åŒä¸€ä¸ª Stream ä¸­ï¼ŒHTTP æ¶ˆæ¯å¯ä»¥ç”±å¤šä¸ª Frame æ„æˆï¼Œ ä¸€ä¸ª Frame å¯ä»¥ç”±å¤šä¸ª TCP æŠ¥æ–‡æ„æˆã€‚</p><figure><img src="https://camo.githubusercontent.com/128362dd941849f0b1f34f32e80d8ca2c4c1fdb2cb454be65adc99da2c94470b/68747470733a2f2f63646e2e7869616f6c696e636f64696e672e636f6d2f67682f7869616f6c696e636f6465722f496d616765486f737434406d61696e2f2545372542442539312545372542422539432f68747470322f73747265616d322e706e67" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨ HTTP/2 è¿æ¥ä¸Šï¼Œ<strong>ä¸åŒ Stream çš„å¸§æ˜¯å¯ä»¥ä¹±åºå‘é€çš„ï¼ˆå› æ­¤å¯ä»¥å¹¶å‘ä¸åŒçš„ Stream ï¼‰</strong>ï¼Œå› ä¸ºæ¯ä¸ªå¸§çš„å¤´éƒ¨ä¼šæºå¸¦ Stream ID ä¿¡æ¯ï¼Œæ‰€ä»¥æ¥æ”¶ç«¯å¯ä»¥é€šè¿‡ Stream ID æœ‰åºç»„è£…æˆ HTTP æ¶ˆæ¯ï¼Œè€Œ<strong>åŒä¸€ Stream å†…éƒ¨çš„å¸§å¿…é¡»æ˜¯ä¸¥æ ¼æœ‰åºçš„</strong>ã€‚</p><p>æ¯”å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡ç«¯<strong>å¹¶è¡Œäº¤é”™åœ°</strong>å‘é€äº†ä¸¤ä¸ªå“åº”ï¼š Stream 1 å’Œ Stream 3ï¼Œè¿™ä¸¤ä¸ª Stream éƒ½æ˜¯è·‘åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸Šï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åï¼Œä¼šæ ¹æ®ç›¸åŒçš„ Stream ID æœ‰åºç»„è£…æˆ HTTP æ¶ˆæ¯ã€‚</p><figure><img src="https://camo.githubusercontent.com/27096f135de66a7d4a2f71c3eedba56437cbdb066a1b2b76c5ecf86db236541e/68747470733a2f2f63646e2e7869616f6c696e636f64696e672e636f6d2f67682f7869616f6c696e636f6465722f6e6574776f726b2f687474702f68747470322545352541342539412545382542372541462545352541342538442545372539342541382e6a706567" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨<strong>åŒæ–¹éƒ½å¯ä»¥å»ºç«‹ Stream</strong>ï¼Œå› ä¸ºæœåŠ¡ç«¯å¯ä»¥ä¸»åŠ¨æ¨é€èµ„æºç»™å®¢æˆ·ç«¯ï¼Œ å®¢æˆ·ç«¯å»ºç«‹çš„ Stream å¿…é¡»æ˜¯å¥‡æ•°å·ï¼Œè€ŒæœåŠ¡å™¨å»ºç«‹çš„ Stream å¿…é¡»æ˜¯å¶æ•°å·ã€‚</p><p>æ¯”å¦‚ä¸‹å›¾ï¼ŒStream 1 æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚çš„èµ„æºï¼Œå±äºå®¢æˆ·ç«¯å»ºç«‹çš„ Streamï¼Œæ‰€ä»¥è¯¥ Stream çš„ ID æ˜¯å¥‡æ•°ï¼ˆæ•°å­— 1ï¼‰ï¼›Stream 2 å’Œ 4 éƒ½æ˜¯æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€çš„èµ„æºï¼Œå±äºæœåŠ¡ç«¯å»ºç«‹çš„ Streamï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ª Stream çš„ ID æ˜¯å¶æ•°ï¼ˆæ•°å­— 2 å’Œ 4ï¼‰ã€‚</p><figure><img src="https://camo.githubusercontent.com/dbc0b26395aeefa91d48c1e7dc38d2497096e62e2e6e2e816e9a5caba039c5f6/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f38333434353538316461666534303964386366643263353733623237383161632e706e67" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åŒä¸€ä¸ªè¿æ¥ä¸­çš„ Stream ID æ˜¯ä¸èƒ½å¤ç”¨çš„ï¼Œåªèƒ½é¡ºåºé€’å¢ï¼Œæ‰€ä»¥å½“ Stream ID è€—å°½æ—¶ï¼Œéœ€è¦å‘ä¸€ä¸ªæ§åˆ¶å¸§ <code>GOAWAY</code>ï¼Œç”¨æ¥å…³é—­ TCP è¿æ¥ã€‚</p><p>åœ¨ Nginx ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>http2_max_concurrent_Streams</code> é…ç½®æ¥è®¾ç½® Stream çš„ä¸Šé™ï¼Œé»˜è®¤æ˜¯ 128 ä¸ªã€‚</p><p>HTTP/2 é€šè¿‡ Stream å®ç°çš„å¹¶å‘ï¼Œæ¯” HTTP/1.1 é€šè¿‡ TCP è¿æ¥å®ç°å¹¶å‘è¦ç‰›é€¼çš„å¤šï¼Œ<strong>å› ä¸ºå½“ HTTP/2 å®ç° 100 ä¸ªå¹¶å‘ Stream æ—¶ï¼Œåªéœ€è¦å»ºç«‹ä¸€æ¬¡ TCP è¿æ¥ï¼Œè€Œ HTTP/1.1 éœ€è¦å»ºç«‹ 100 ä¸ª TCP è¿æ¥ï¼Œæ¯ä¸ª TCP è¿æ¥éƒ½è¦ç»è¿‡ TCP æ¡æ‰‹ã€æ…¢å¯åŠ¨ä»¥åŠ TLS æ¡æ‰‹è¿‡ç¨‹ï¼Œè¿™äº›éƒ½æ˜¯å¾ˆè€—æ—¶çš„ã€‚</strong></p><p>HTTP/2 è¿˜å¯ä»¥å¯¹æ¯ä¸ª Stream è®¾ç½®ä¸åŒ<strong>ä¼˜å…ˆçº§</strong>ï¼Œå¸§å¤´ä¸­çš„ã€Œæ ‡å¿—ä½ã€å¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯è®¿é—® HTML/CSS å’Œå›¾ç‰‡èµ„æºæ—¶ï¼Œå¸Œæœ›æœåŠ¡å™¨å…ˆä¼ é€’ HTML/CSSï¼Œå†ä¼ å›¾ç‰‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡è®¾ç½® Stream çš„ä¼˜å…ˆçº§æ¥å®ç°ï¼Œä»¥æ­¤æé«˜ç”¨æˆ·ä½“éªŒã€‚</p><h3 id="ä»€ä¹ˆæ˜¯dnsä¸­é—´äººæ”»å‡»-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯dnsä¸­é—´äººæ”»å‡»-2023-å¿«æ‰‹" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯dnsä¸­é—´äººæ”»å‡»ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>DNSä¸­é—´äººæ”»å‡»ï¼ˆDNS Man-in-the-Middle Attackï¼‰æ˜¯ä¸€ç§ç½‘ç»œå®‰å…¨å¨èƒã€‚æ”»å‡»è€…ä½¿ç”¨å„ç§æŠ€æœ¯æ‰‹æ®µï¼Œæ‹¦æˆªDNSï¼ˆDomain Name Systemï¼‰æŸ¥è¯¢æµé‡å¹¶ç¯¡æ”¹å…¶å†…å®¹ï¼Œä»è€Œä½¿ç”¨æˆ·è¢«å¯¼å‘æ¶æ„ç½‘ç«™æˆ–å—åˆ°å…¶ä»–æ”»å‡»ã€‚è¿™ç§æ”»å‡»ä¼šç ´åæ­£å¸¸çš„DNSè§£æè¿‡ç¨‹ï¼Œå¯¼è‡´ç”¨æˆ·æ— æ³•è®¿é—®æ­£ç¡®çš„ç½‘ç«™ï¼Œæˆ–è€…å‘é”™è¯¯çš„æœåŠ¡å™¨å‘é€æ•æ„Ÿä¿¡æ¯ã€‚</p><p>ä¸­é—´äººæ”»å‡»æ˜¯ä¸€ç§â€œé—´æ¥â€çš„å…¥ä¾µæ”»å‡»ï¼Œé€šè¿‡å°†æ”»å‡»è€…æ§åˆ¶çš„è®¡ç®—æœºæ”¾ç½®åœ¨å—å®³è€…å’Œç›®æ ‡ä¹‹é—´ï¼Œå®ç°æ¶æ„æ“ä½œã€‚åœ¨DNSä¸­é—´äººæ”»å‡»ä¸­ï¼Œæ”»å‡»è€…é€šå¸¸ä¼šæ‹¦æˆªç”¨æˆ·çš„DNSæŸ¥è¯¢è¯·æ±‚ï¼Œç„¶åä¼ªé€ å“åº”ï¼Œè¿”å›é”™è¯¯çš„IPåœ°å€æˆ–é‡å®šå‘ç”¨æˆ·åˆ°æ¶æ„ç«™ç‚¹ã€‚è¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·åœ¨è®¿é—®ç½‘ç«™æ—¶å°±ä¼šè¢«å¯¼å‘æ”»å‡»è€…æ§åˆ¶çš„ç½‘ç«™ï¼Œä»è€Œæš´éœ²äºå„ç§ç½‘ç»œå¨èƒä¹‹ä¸‹ã€‚</p>',65),ja=n("p",null,"å‚è€ƒï¼š",-1),Ia={href:"https://www.fortinet.com/resources/cyberglossary/man-in-the-middle-attack",target:"_blank",rel:"noopener noreferrer"},Ba={href:"https://www.howtogeek.com/668989/what-is-a-man-in-the-middle-attack/",target:"_blank",rel:"noopener noreferrer"},Oa=n("h3",{id:"å¦‚ä½•è§£å†³synæ³›æ´ªæ”»å‡»-2023-å¿«æ‰‹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å¦‚ä½•è§£å†³synæ³›æ´ªæ”»å‡»-2023-å¿«æ‰‹","aria-hidden":"true"},"#"),s(" å¦‚ä½•è§£å†³synæ³›æ´ªæ”»å‡»ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰")],-1),Na=n("p",null,"SYNæ³›æ´ªæ”»å‡»æ˜¯ä¸€ç§å¸¸è§çš„æ‹’ç»æœåŠ¡(Denial of Serviceï¼ŒDoS)æ”»å‡»ï¼Œå®ƒé€šè¿‡å‘é€å¤§é‡ä¼ªé€ çš„TCPè¿æ¥è¯·æ±‚ï¼ˆSYNåŒ…ï¼‰æ¥æ¶ˆè€—ç›®æ ‡æœåŠ¡å™¨çš„èµ„æºï¼Œä½¿å…¶æ— æ³•æ­£å¸¸å·¥ä½œã€‚è§£å†³SYNæ³›æ´ªæ”»å‡»ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹å‡ ç§æªæ–½ï¼š",-1),Ha=n("ol",null,[n("li",null,"è¿‡æ»¤å’Œé˜»æ–­æ¶æ„æµé‡ï¼šä½¿ç”¨é˜²ç«å¢™æˆ–å…¥ä¾µé˜²å¾¡ç³»ç»Ÿ(IDS/IPS)ç­‰å®‰å…¨è®¾å¤‡ï¼Œè¿‡æ»¤å’Œé˜»æ–­æ¥è‡ªæ”»å‡»è€…çš„SYNæ³›æ´ªæ”»å‡»æµé‡ã€‚è¿™äº›è®¾å¤‡å¯ä»¥æ ¹æ®ç½‘ç»œæµé‡çš„è§„åˆ™å’Œè¡Œä¸ºè¿›è¡Œæ£€æµ‹å’Œè¿‡æ»¤ï¼Œæœ‰æ•ˆé˜²æ­¢æ¶æ„æµé‡è¿›å…¥ç½‘ç»œã€‚"),n("li",null,"SYN CookieæŠ€æœ¯ï¼šSYN Cookieæ˜¯ä¸€ç§æŠµå¾¡SYNæ³›æ´ªæ”»å‡»çš„æŠ€æœ¯ï¼Œå®ƒé€šè¿‡åœ¨æœåŠ¡å™¨å“åº”SYNåŒ…æ—¶ï¼Œå°†éƒ¨åˆ†çŠ¶æ€ä¿¡æ¯åµŒå…¥åˆ°æœåŠ¡å™¨ç”Ÿæˆçš„åºåˆ—å·ä¸­ã€‚å½“å®¢æˆ·ç«¯è¿”å›ACKç¡®è®¤æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥é€šè¿‡è§£æåºåˆ—å·è¿˜åŸå‡ºå®Œæ•´çš„è¿æ¥çŠ¶æ€ã€‚è¿™ç§æ–¹æ³•å¯ä»¥å‡è½»æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œå¹¶æœ‰æ•ˆé™ä½SYNæ³›æ´ªæ”»å‡»çš„å½±å“ã€‚"),n("li",null,"åŠ å¼ºç½‘ç»œè®¾å¤‡çš„æ€§èƒ½å’Œå®¹é‡ï¼šé€šè¿‡å‡çº§ç¡¬ä»¶è®¾å¤‡ã€å¢åŠ å¸¦å®½å’ŒåŠ å¼ºæœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›ï¼Œå¯ä»¥æé«˜ç½‘ç»œè®¾å¤‡çš„æ€§èƒ½å’Œå®¹é‡ï¼Œä»è€Œèƒ½å¤Ÿæ›´å¥½åœ°æŠµå¾¡SYNæ³›æ´ªæ”»å‡»ã€‚å¢åŠ è®¾å¤‡çš„å¤„ç†èƒ½åŠ›å’Œå¸¦å®½å¯ä»¥æ‰¿å—æ›´å¤šçš„è¿æ¥è¯·æ±‚ï¼Œå‡å°‘å› æ”»å‡»è€Œå¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨æƒ…å†µã€‚")],-1),Da=n("p",null,"å‚è€ƒï¼š",-1),Ja={href:"https://www.netscout.com/what-is-ddos/syn-flood-attacks",target:"_blank",rel:"noopener noreferrer"},Fa={href:"https://info.support.huawei.com/info-finder/encyclopedia/en/SYN+Flood.html",target:"_blank",rel:"noopener noreferrer"},za=t('<h2 id="ğŸ–¥ï¸-æ“ä½œç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#ğŸ–¥ï¸-æ“ä½œç³»ç»Ÿ" aria-hidden="true">#</a> ğŸ–¥ï¸ æ“ä½œç³»ç»Ÿ</h2><h3 id="ğŸ”¥-è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µå’ŒåŒºåˆ«-2023-çƒ­é—¨é—®é¢˜ä¹‹ä¸€-å¿«æ‰‹ã€å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µå’ŒåŒºåˆ«-2023-çƒ­é—¨é—®é¢˜ä¹‹ä¸€-å¿«æ‰‹ã€å½±çŸ³360" aria-hidden="true">#</a> ğŸ”¥ è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µå’ŒåŒºåˆ«ï¼Ÿï¼ˆ2023 çƒ­é—¨é—®é¢˜ä¹‹ä¸€ï¼šå¿«æ‰‹ã€å½±çŸ³360ï¼‰</h3><p>çœ‹äº†ä¸€éæ’åœ¨å‰é¢çš„ç­”æ¡ˆï¼Œç±»ä¼¼â€**è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½â€œ**è¿™æ ·çš„å›ç­”æ„Ÿè§‰å¤ªæŠ½è±¡ï¼Œéƒ½ä¸å¤ªå®¹æ˜“è®©äººç†è§£ã€‚</p><p>åšä¸ªç®€å•çš„æ¯”å–»ï¼šè¿›ç¨‹=ç«è½¦ï¼Œçº¿ç¨‹=è½¦å¢</p><ul><li>çº¿ç¨‹åœ¨è¿›ç¨‹ä¸‹è¡Œè¿›ï¼ˆå•çº¯çš„è½¦å¢æ— æ³•è¿è¡Œï¼‰</li><li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼ˆä¸€è¾†ç«è½¦å¯ä»¥æœ‰å¤šä¸ªè½¦å¢ï¼‰</li><li>ä¸åŒè¿›ç¨‹é—´æ•°æ®å¾ˆéš¾å…±äº«ï¼ˆä¸€è¾†ç«è½¦ä¸Šçš„ä¹˜å®¢å¾ˆéš¾æ¢åˆ°å¦å¤–ä¸€è¾†ç«è½¦ï¼Œæ¯”å¦‚ç«™ç‚¹æ¢ä¹˜ï¼‰</li><li>åŒä¸€è¿›ç¨‹ä¸‹ä¸åŒçº¿ç¨‹é—´æ•°æ®å¾ˆæ˜“å…±äº«ï¼ˆAè½¦å¢æ¢åˆ°Bè½¦å¢å¾ˆå®¹æ˜“ï¼‰</li><li>è¿›ç¨‹è¦æ¯”çº¿ç¨‹æ¶ˆè€—æ›´å¤šçš„è®¡ç®—æœºèµ„æºï¼ˆé‡‡ç”¨å¤šåˆ—ç«è½¦ç›¸æ¯”å¤šä¸ªè½¦å¢æ›´è€—èµ„æºï¼‰</li><li>è¿›ç¨‹é—´ä¸ä¼šç›¸äº’å½±å“ï¼Œä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰å°†å¯¼è‡´æ•´ä¸ªè¿›ç¨‹æŒ‚æ‰ï¼ˆä¸€åˆ—ç«è½¦ä¸ä¼šå½±å“åˆ°å¦å¤–ä¸€åˆ—ç«è½¦ï¼Œä½†æ˜¯å¦‚æœä¸€åˆ—ç«è½¦ä¸Šä¸­é—´çš„ä¸€èŠ‚è½¦å¢ç€ç«äº†ï¼Œå°†å½±å“åˆ°æ‰€æœ‰è½¦å¢ï¼‰</li><li>è¿›ç¨‹å¯ä»¥æ‹“å±•åˆ°å¤šæœºï¼Œè¿›ç¨‹æœ€å¤šé€‚åˆå¤šæ ¸ï¼ˆä¸åŒç«è½¦å¯ä»¥å¼€åœ¨å¤šä¸ªè½¨é“ä¸Šï¼ŒåŒä¸€ç«è½¦çš„è½¦å¢ä¸èƒ½åœ¨è¡Œè¿›çš„ä¸åŒçš„è½¨é“ä¸Šï¼‰</li><li>è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜åœ°å€å¯ä»¥ä¸Šé”ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨æŸäº›å…±äº«å†…å­˜æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å®ƒç»“æŸï¼Œæ‰èƒ½ä½¿ç”¨è¿™ä¸€å—å†…å­˜ã€‚ï¼ˆæ¯”å¦‚ç«è½¦ä¸Šçš„æ´—æ‰‹é—´ï¼‰ï¼&quot;äº’æ–¥é”&quot;</li><li>è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜åœ°å€å¯ä»¥é™å®šä½¿ç”¨é‡ï¼ˆæ¯”å¦‚ç«è½¦ä¸Šçš„é¤å…ï¼Œæœ€å¤šåªå…è®¸å¤šå°‘äººè¿›å…¥ï¼Œå¦‚æœæ»¡äº†éœ€è¦åœ¨é—¨å£ç­‰ï¼Œç­‰æœ‰äººå‡ºæ¥äº†æ‰èƒ½è¿›å»ï¼‰ï¼â€œä¿¡å·é‡â€</li></ul>',5),Ua={href:"https://www.zhihu.com/question/25532384",target:"_blank",rel:"noopener noreferrer"},Ga=t('<h3 id="ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åŒºåˆ«-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åŒºåˆ«-2023-å½±çŸ³360" aria-hidden="true">#</a> ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åŒºåˆ«ï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><p>Kernel è¿è¡Œåœ¨è¶…çº§æƒé™æ¨¡å¼ï¼ˆSupervisor Modeï¼‰ä¸‹ï¼Œæ‰€ä»¥æ‹¥æœ‰å¾ˆé«˜çš„æƒé™ã€‚æŒ‰ç…§æƒé™ç®¡ç†çš„åŸåˆ™ï¼Œå¤šæ•°åº”ç”¨ç¨‹åºåº”è¯¥è¿è¡Œåœ¨æœ€å°æƒé™ä¸‹ã€‚å› æ­¤ï¼Œå¾ˆå¤šæ“ä½œç³»ç»Ÿï¼Œå°†å†…å­˜åˆ†æˆäº†ä¸¤ä¸ªåŒºåŸŸï¼š</p><ul><li>å†…æ ¸ç©ºé—´ï¼ˆKernal Spaceï¼‰ï¼Œè¿™ä¸ªç©ºé—´åªæœ‰å†…æ ¸ç¨‹åºå¯ä»¥è®¿é—®ï¼›</li><li>ç”¨æˆ·ç©ºé—´ï¼ˆUser Spaceï¼‰ï¼Œè¿™éƒ¨åˆ†å†…å­˜ä¸“é—¨ç»™åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚</li></ul><p>ç”¨æˆ·ç©ºé—´ä¸­çš„ä»£ç è¢«é™åˆ¶äº†åªèƒ½ä½¿ç”¨ä¸€ä¸ªå±€éƒ¨çš„å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬è¯´è¿™äº›ç¨‹åºåœ¨<strong>ç”¨æˆ·æ€ï¼ˆUser Modeï¼‰</strong> æ‰§è¡Œã€‚å†…æ ¸ç©ºé—´ä¸­çš„ä»£ç å¯ä»¥è®¿é—®æ‰€æœ‰å†…å­˜ï¼Œæˆ‘ä»¬ç§°è¿™äº›ç¨‹åºåœ¨<strong>å†…æ ¸æ€ï¼ˆKernal Modeï¼‰</strong> æ‰§è¡Œã€‚</p><p>åˆ’åˆ†æ¥è¯´æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</p><ol><li><strong>æƒé™</strong>ï¼šå†…æ ¸æ¨¡å¼å…·æœ‰è®¿é—®æ‰€æœ‰ç¡¬ä»¶èµ„æºçš„æƒé™ï¼Œè€Œç”¨æˆ·æ¨¡å¼çš„æƒé™åˆ™å—åˆ°é™åˆ¶ã€‚</li><li><strong>åŠŸèƒ½</strong>ï¼šå†…æ ¸æ¨¡å¼ç”¨äºæ‰§è¡Œå…³é”®çš„ç³»ç»Ÿä»»åŠ¡ï¼Œå¦‚è®¾å¤‡ç®¡ç†ã€å†…å­˜ç®¡ç†å’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚ç”¨æˆ·æ¨¡å¼ä¸»è¦ç”¨äºè¿è¡Œåº”ç”¨ç¨‹åºã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šå½“ç¨‹åºåœ¨ç”¨æˆ·æ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼Œå®ƒä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶æˆ–å…¶ä»–å…³é”®èµ„æºï¼Œè¿™ä¸ºç³»ç»Ÿæä¾›äº†ä¸€å±‚ä¿æŠ¤ã€‚å¦‚æœåº”ç”¨ç¨‹åºéœ€è¦è®¿é—®ç¡¬ä»¶æˆ–æ‰§è¡Œå…¶ä»–ç‰¹æƒæ“ä½œï¼Œå®ƒå¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨è¯·æ±‚å†…æ ¸æ¥æ‰§è¡Œã€‚</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨ç”¨æˆ·æ¨¡å¼ä¸‹å‡ºç°çš„é”™è¯¯é€šå¸¸ä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒï¼Œè€Œåœ¨å†…æ ¸æ¨¡å¼ä¸‹å‡ºç°çš„é”™è¯¯å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</li></ol><h3 id="ä¸ºä»€ä¹ˆç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´çš„åˆ‡æ¢ä¼šå½±å“åˆ°çº¿ç¨‹çš„æ‰§è¡Œæ•ˆç‡-çœŸæ­£æ…¢çš„ç‚¹åœ¨å“ªé‡Œ-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´çš„åˆ‡æ¢ä¼šå½±å“åˆ°çº¿ç¨‹çš„æ‰§è¡Œæ•ˆç‡-çœŸæ­£æ…¢çš„ç‚¹åœ¨å“ªé‡Œ-2023-å½±çŸ³360" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´çš„åˆ‡æ¢ä¼šå½±å“åˆ°çº¿ç¨‹çš„æ‰§è¡Œæ•ˆç‡ï¼ŒçœŸæ­£æ…¢çš„ç‚¹åœ¨å“ªé‡Œï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><p>æ¯ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢éƒ½æ¶‰åŠä¿å­˜CPUçš„å½“å‰çŠ¶æ€ï¼ˆåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ã€CPUå¯„å­˜å™¨å’Œè¿›ç¨‹æ§åˆ¶å—ï¼‰ï¼ŒåŠ è½½æ–°è¿›ç¨‹æˆ–çº¿ç¨‹çš„çŠ¶æ€ï¼Œç„¶åæ¢å¤æ–°è¿›ç¨‹æˆ–çº¿ç¨‹çš„æ‰§è¡Œã€‚è¿™éœ€è¦æ—¶é—´å¹¶æ¶ˆè€—CPUèµ„æºï¼Œè¿™ä¼šä½¿ç³»ç»Ÿå˜æ…¢ã€‚</p>',8),Ka={href:"https://blog.netdata.cloud/understanding-context-switching-and-its-impact-on-system-performance/",target:"_blank",rel:"noopener noreferrer"},Qa={href:"https://www.quora.com/Why-is-context-switching-fast-in-a-user-level-thread-and-slow-in-a-kernel-level-thread",target:"_blank",rel:"noopener noreferrer"},Va=t('<h3 id="cpuå’Œå†…å­˜ä¹‹é—´çš„ä¸‰çº§ç¼“å­˜æœ‰äº†è§£å—-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#cpuå’Œå†…å­˜ä¹‹é—´çš„ä¸‰çº§ç¼“å­˜æœ‰äº†è§£å—-2023-å½±çŸ³360" aria-hidden="true">#</a> CPUå’Œå†…å­˜ä¹‹é—´çš„ä¸‰çº§ç¼“å­˜æœ‰äº†è§£å—?ï¼ˆ2023 å½±çŸ³360ï¼‰</h3><h4 id="åºè¨€-1" tabindex="-1"><a class="header-anchor" href="#åºè¨€-1" aria-hidden="true">#</a> åºè¨€</h4><p>è®¡ç®—æœºä¸Šçš„ç¨‹åºå’Œåº”ç”¨ç¨‹åºè¢«è®¾è®¡ä¸ºä¸€ç»„æŒ‡ä»¤ï¼Œç”±ä¸­å¤®å¤„ç†å™¨è§£é‡Šå’Œè¿è¡Œã€‚å½“ä½ è¿è¡Œä¸€ä¸ªç¨‹åºæ—¶ï¼ŒæŒ‡ä»¤ä»ä¸»å­˜å‚¨ï¼ˆä½ çš„ç¡¬ç›˜ï¼‰åˆ°è¾¾ä¸­å¤®å¤„ç†å™¨ã€‚è¿™å°±æ˜¯å†…å­˜å±‚æ¬¡ç»“æ„å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p><p>æ•°æ®é¦–å…ˆè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åè¢«å‘é€åˆ°ä¸­å¤®å¤„ç†å™¨ã€‚ä¸­å¤®å¤„ç†å™¨æ¯ç§’èƒ½å¤Ÿæ‰§è¡Œå¤§é‡çš„æŒ‡ä»¤ã€‚ä¸ºäº†å……åˆ†åˆ©ç”¨å®ƒçš„åŠ›é‡ï¼Œä¸­å¤®å¤„ç†å™¨éœ€è¦è®¿é—®è¶…é«˜é€Ÿå†…å­˜ï¼Œè¿™å°±æ˜¯ä¸­å¤®å¤„ç†å™¨ç¼“å­˜çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p><p>å†…å­˜æ§åˆ¶å™¨ä»RAMä¸­è·å–æ•°æ®å¹¶å°†å…¶å‘é€åˆ°CPUç¼“å­˜ã€‚</p><h4 id="ä¸‰çº§ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#ä¸‰çº§ç¼“å­˜" aria-hidden="true">#</a> ä¸‰çº§ç¼“å­˜</h4><ul><li><strong>L1ç¼“å­˜</strong>ï¼šæ˜¯æœ€å°å’Œæœ€å¿«çš„å†…å­˜çº§åˆ«ã€‚é€šå¸¸ä¸º64KBå¤§å°ï¼Œä½†å¤„ç†å™¨çš„æ¯ä¸ªæ ¸å¿ƒéƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„L1ç¼“å­˜ï¼Œæ‰€ä»¥å››æ ¸CPUçš„æ€»å…±L1ç¼“å­˜å¤§å°ä¸º256KBã€‚å¦‚æœä½ åœ¨ç±»ä¼¼äºCPU-Zçš„å·¥å…·ä¸­æŸ¥çœ‹å†…å­˜è¯¦ç»†ä¿¡æ¯ï¼Œä½ ä¼šæ³¨æ„åˆ°L1ç¼“å­˜è¿˜åˆ†ä¸ºä¸¤ä¸ªæ›´ç»†çš„çº§åˆ«ï¼šL1-Iï¼ˆæŒ‡ä»¤ï¼‰å’ŒL1-Dï¼ˆæ•°æ®ï¼‰ã€‚L1æŒ‡ä»¤ç¼“å­˜å¤„ç†å°†è¦ä¼ é€ç»™å¤„ç†å™¨çš„ä¿¡æ¯ï¼Œè€Œæ•°æ®ç¼“å­˜ä¿å­˜å°†å†™å…¥ä¸»å†…å­˜çš„ä¿¡æ¯ã€‚ä¸€çº§ç¼“å­˜èƒ½å¤Ÿä»¥ä¸CPUçš„æœ€å¤§æ“ä½œé€Ÿåº¦ä¸€æ ·å¿«ç”šè‡³æ›´å¿«åœ°ä¼ è¾“æ•°æ®ï¼Œä½¿å…¶éå¸¸é«˜æ•ˆã€‚å¦‚æœå¤„ç†å™¨åœ¨L1ä¸­æ‰¾ä¸åˆ°æ‰€éœ€çš„æ•°æ®ï¼Œå®ƒå°†åœ¨L2å’ŒL3ç¼“å­˜ä¸­æŸ¥æ‰¾ã€‚</li><li><strong>L2ç¼“å­˜</strong>ï¼šæ˜¯ä¸€ç§æ¬¡çº§å†…å­˜ç¼“å­˜ï¼Œä¹ŸåµŒå…¥åœ¨CPUçš„å„ä¸ªç‹¬ç«‹æ ¸å¿ƒä¸­ã€‚å®ƒé€šå¸¸æ¯”L1æœ‰æ›´å¤šçš„å­˜å‚¨ç©ºé—´ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢ï¼Œå°½ç®¡ä»è¿œå¿«äºå†…å­˜é€Ÿåº¦ã€‚ä¸€äº›é«˜ç«¯å¤„ç†å™¨çš„L2ç¼“å­˜å¯èƒ½æ€»å…±æœ‰32MBï¼Œä½†6-12MBå¯èƒ½æ˜¯å¹³å‡æ°´å¹³ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œè¿™ä¸ªç¼“å­˜å‡åˆ†ç»™æ‰€æœ‰æ ¸å¿ƒä½¿ç”¨ï¼Œä½¿æ¯ä¸ªæ ¸å¿ƒèƒ½å¤Ÿç‹¬ç«‹åœ°è®¿é—®è‡ªå·±çš„ç¼“å­˜ã€‚</li><li><strong>L3ç¼“å­˜</strong>ï¼šä½œä¸ºä¸€ä¸ªå…±äº«å­˜å‚¨æ± ï¼Œæ•´ä¸ªå¤„ç†å™¨éƒ½å¯ä»¥è®¿é—®ã€‚å®ƒæ¯”L1å’ŒL2ç¼“å­˜è¦æ…¢å¾—å¤šï¼Œå¯èƒ½åªæœ‰RAMé€Ÿåº¦çš„ä¸¤å€å¿«ï¼Œä½†å´æ˜¯ä¸‰ä¸ªå†…å­˜çº§åˆ«ä¸­æœ€å¤§çš„ã€‚å¦‚æœCPUåœ¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°å®ƒéœ€è¦çš„æ•°æ®ï¼Œå®ƒå¿…é¡»ä»è¾ƒæ…¢çš„ç³»ç»Ÿå†…å­˜ä¸­è¯·æ±‚æ•°æ®ã€‚è¿™è¢«ç§°ä¸ºç¼“å­˜æœªå‘½ä¸­ã€‚å¼•å…¥L3ç¼“å­˜é™ä½äº†æœªå‘½ä¸­çš„æ¦‚ç‡ï¼Œå› æ­¤æœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚åœ¨åˆšåˆšå¼€å‘æ—¶ï¼ŒL3ç¼“å­˜é€šå¸¸ä½äºä¸»æ¿ä¸Šçš„ä¸€ä¸ªå•ç‹¬èŠ¯ç‰‡ä¸­ã€‚ç°ä»£CPUå‡ ä¹å…¨éƒ¨éƒ½å°†L3ç¼“å­˜é›†æˆåˆ°äº†å†…éƒ¨ä»¥æé«˜æ•ˆç‡ã€‚</li></ul><p>é€šè¿‡cpu-zå¯ä»¥çœ‹åˆ°ä¸‰çº§ç¼“å­˜åˆ†å¸ƒï¼š</p><figure><img src="https://static1.makeuseofimages.com/wordpress/wp-content/uploads/2021/02/cpu-z-caches-tab.png?q=50&amp;fit=crop&amp;w=1500&amp;dpr=1.5" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="cpuç¼“å­˜æ˜¯å¦‚ä½•å·¥ä½œçš„" tabindex="-1"><a class="header-anchor" href="#cpuç¼“å­˜æ˜¯å¦‚ä½•å·¥ä½œçš„" aria-hidden="true">#</a> CPUç¼“å­˜æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h4><p>æ•°æ®ä»RAMæµå‘L3ç¼“å­˜ï¼Œç„¶åæ˜¯L2ï¼Œæœ€åæ˜¯L1ã€‚å½“å¤„ç†å™¨å¯»æ‰¾æ•°æ®è¿›è¡Œæ“ä½œæ—¶ï¼Œé¦–å…ˆå°è¯•åœ¨L1ç¼“å­˜ä¸­æ‰¾åˆ°å®ƒã€‚å¦‚æœCPUæ‰¾åˆ°äº†ï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸ºç¼“å­˜å‘½ä¸­ã€‚ç„¶åç»§ç»­åœ¨L2å’ŒL3ä¸­å¯»æ‰¾ã€‚</p><p>å¦‚æœCPUåœ¨ä»»ä½•å†…å­˜ç¼“å­˜ä¸­æ‰¾ä¸åˆ°æ•°æ®ï¼Œå®ƒå°†å°è¯•ä»ç³»ç»Ÿå†…å­˜ï¼ˆRAMï¼‰ä¸­è®¿é—®å®ƒã€‚å½“å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼Œç§°ä¸ºç¼“å­˜æœªå‘½ä¸­ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“ç¼“å­˜çš„è®¾è®¡æ˜¯ä¸ºäº†åŠ å¿«ä¸»å†…å­˜å’ŒCPUä¹‹é—´ä¿¡æ¯çš„æ¥å›ä¼ è¾“ã€‚ä»å†…å­˜è®¿é—®æ•°æ®æ‰€éœ€çš„æ—¶é—´ç§°ä¸ºâ€œå»¶è¿Ÿâ€ã€‚</p><p>L1ç¼“å­˜å…·æœ‰æœ€ä½çš„å»¶è¿Ÿï¼Œæ˜¯æœ€å¿«ä¸”æœ€æ¥è¿‘æ ¸å¿ƒçš„ï¼Œè€ŒL3å…·æœ‰æœ€é«˜çš„å»¶è¿Ÿã€‚å½“CPUå¿…é¡»ä»ç³»ç»Ÿå†…å­˜ä¸­æ£€ç´¢æ•°æ®æ—¶ï¼Œå†…å­˜ç¼“å­˜å»¶è¿Ÿä¼šå¢åŠ ï¼Œå³å‘ç”Ÿç¼“å­˜æœªå‘½ä¸­ã€‚</p>',14),Xa={href:"https://www.howtogeek.com/891526/l1-vs-l2-vs-l3-cache/",target:"_blank",rel:"noopener noreferrer"},Wa={href:"https://www.makeuseof.com/tag/what-is-cpu-cache/",target:"_blank",rel:"noopener noreferrer"},Ya=t('<h3 id="å¤šæ ¸cpuä¸‹-ä¸‰çº§ç¼“å­˜å¯¹äºæ¯ä¸ªå†…æ ¸æ¥è¯´æ˜¯å…±äº«çš„å—-é‚£ä½ çŸ¥é“å®ƒçš„æ•°æ®å­˜å‚¨ä»¥åŠæŒ‡ä»¤å­˜å‚¨çš„æ–¹å¼æœ‰äº†è§£è¿‡å—-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#å¤šæ ¸cpuä¸‹-ä¸‰çº§ç¼“å­˜å¯¹äºæ¯ä¸ªå†…æ ¸æ¥è¯´æ˜¯å…±äº«çš„å—-é‚£ä½ çŸ¥é“å®ƒçš„æ•°æ®å­˜å‚¨ä»¥åŠæŒ‡ä»¤å­˜å‚¨çš„æ–¹å¼æœ‰äº†è§£è¿‡å—-2023-å½±çŸ³360" aria-hidden="true">#</a> å¤šæ ¸CPUä¸‹ï¼Œä¸‰çº§ç¼“å­˜å¯¹äºæ¯ä¸ªå†…æ ¸æ¥è¯´æ˜¯å…±äº«çš„å—ï¼Ÿé‚£ä½ çŸ¥é“å®ƒçš„æ•°æ®å­˜å‚¨ä»¥åŠæŒ‡ä»¤å­˜å‚¨çš„æ–¹å¼æœ‰äº†è§£è¿‡å—ï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><p>åœ¨å¤šæ ¸CPUä¸­ï¼Œä¸‰çº§ç¼“å­˜ï¼ˆL3ç¼“å­˜ï¼‰é€šå¸¸æ˜¯ä¸ºæ‰€æœ‰å†…æ ¸å…±äº«çš„ï¼Œä½†è¿™å–å†³äºCPUçš„è®¾è®¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒL1å’ŒL2ç¼“å­˜é€šå¸¸æ˜¯æ¯ä¸ªå†…æ ¸ç‹¬ç«‹æ‹¥æœ‰çš„ã€‚</p><p>å…³äºæ•°æ®å­˜å‚¨å’ŒæŒ‡ä»¤å­˜å‚¨ï¼š</p><ol><li><strong>L1ç¼“å­˜</strong>ï¼šè¿™æ˜¯æœ€é è¿‘CPUæ ¸å¿ƒçš„ç¼“å­˜ï¼Œå¹¶ä¸”å…¶è®¿é—®é€Ÿåº¦ä¹Ÿæ˜¯æœ€å¿«çš„ã€‚å®ƒé€šå¸¸åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨æŒ‡ä»¤ï¼ˆç§°ä¸ºI-Cacheï¼‰ï¼Œå¦ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨æ•°æ®ï¼ˆç§°ä¸ºD-Cacheï¼‰ã€‚å› ä¸ºå®ƒä½äºæ ¸å¿ƒæœ€è¿‘ï¼Œæ‰€ä»¥å®ƒçš„å¤§å°ç›¸å¯¹è¾ƒå°ï¼Œä½†è®¿é—®é€Ÿåº¦éå¸¸å¿«ã€‚</li><li><strong>L2ç¼“å­˜</strong>ï¼šL2ç¼“å­˜æ˜¯L1ç¼“å­˜åçš„ç¬¬äºŒå±‚ï¼Œå®ƒçš„å¤§å°é€šå¸¸æ¯”L1ç¼“å­˜å¤§ï¼Œä½†è®¿é—®é€Ÿåº¦ç¨æ…¢ã€‚åœ¨æŸäº›è®¾è®¡ä¸­ï¼ŒL2ç¼“å­˜ä¹Ÿå¯èƒ½è¢«åˆ†ä¸ºæŒ‡ä»¤å’Œæ•°æ®ç¼“å­˜ï¼Œä½†åœ¨å…¶ä»–è®¾è®¡ä¸­ï¼Œå®ƒå¯èƒ½æ˜¯ç»Ÿä¸€çš„ç¼“å­˜ï¼ŒåŒæ—¶å­˜å‚¨æŒ‡ä»¤å’Œæ•°æ®ã€‚</li><li><strong>L3ç¼“å­˜</strong>ï¼šè¿™æ˜¯å¤šæ ¸CPUä¸­ä¸ºæ‰€æœ‰å†…æ ¸å…±äº«çš„ç¼“å­˜å±‚ã€‚å®ƒçš„å¤§å°æ¯”L1å’ŒL2ç¼“å­˜éƒ½è¦å¤§ï¼Œä½†è®¿é—®é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚L3ç¼“å­˜é€šå¸¸æ˜¯ç»Ÿä¸€çš„ç¼“å­˜ï¼Œç”¨äºå­˜å‚¨æŒ‡ä»¤å’Œæ•°æ®ã€‚</li></ol><p>ç¼“å­˜çš„åŸºæœ¬å·¥ä½œåŸç†æ˜¯é¢„å…ˆåŠ è½½æœ€æœ‰å¯èƒ½è¢«CPUæ ¸å¿ƒè®¿é—®çš„æ•°æ®å’ŒæŒ‡ä»¤ï¼Œä»è€Œå‡å°‘ä»ä¸»å†…å­˜ä¸­è·å–æ•°æ®çš„å»¶è¿Ÿã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼ŒCPUä½¿ç”¨äº†å¤æ‚çš„é¢„æµ‹ç®—æ³•æ¥å°è¯•ç¡®å®šå°†æ¥å¯èƒ½éœ€è¦çš„æ•°æ®å’ŒæŒ‡ä»¤ã€‚</p><h3 id="cpuæŒ‡ä»¤é‡æ’åºçš„å¥½å¤„-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#cpuæŒ‡ä»¤é‡æ’åºçš„å¥½å¤„-2023-å½±çŸ³360" aria-hidden="true">#</a> CPUæŒ‡ä»¤é‡æ’åºçš„å¥½å¤„ï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><p>CPUæŒ‡ä»¤é‡æ’åºï¼ˆInstruction Reorderingï¼‰æ˜¯ç°ä»£å¤„ç†å™¨ä¸ºäº†æé«˜æ‰§è¡Œæ•ˆç‡è€Œé‡‡ç”¨çš„ä¸€ç§ä¼˜åŒ–ç­–ç•¥ã€‚å½“æŒ‡ä»¤ä¹‹é—´ä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§æ—¶ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºã€‚è¿™ç§é‡æ’åºå¯ä»¥åœ¨å¤šä¸ªå±‚æ¬¡å‘ç”Ÿï¼Œä¾‹å¦‚ç¼–è¯‘å™¨çº§åˆ«æˆ–å¾®ä½“ç³»ç»“æ„çº§åˆ«ã€‚</p><p>CPUæŒ‡ä»¤é‡æ’åºçš„å¥½å¤„å¦‚ä¸‹ï¼š</p><ol><li><strong>æé«˜æµæ°´çº¿åˆ©ç”¨ç‡</strong>ï¼šç°ä»£CPUä½¿ç”¨æŒ‡ä»¤æµæ°´çº¿æ¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªæŒ‡ä»¤ã€‚å½“æŸäº›æŒ‡ä»¤ï¼ˆå¦‚è®¿å­˜æŒ‡ä»¤ï¼‰éœ€è¦ç­‰å¾…æŸäº›äº‹ä»¶ï¼ˆä¾‹å¦‚ç¼“å­˜å‘½ä¸­ï¼‰æ—¶ï¼Œè€Œå…¶åçš„æŒ‡ä»¤åˆä¸ä¾èµ–äºå®ƒï¼Œé‡æ’åºå¯ä»¥ä½¿åç»­æŒ‡ä»¤ç»§ç»­æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç©ºé—²ç­‰å¾…ï¼Œä»è€Œæé«˜æµæ°´çº¿çš„åˆ©ç”¨ç‡ã€‚</li><li><strong>å‡å°‘å»¶è¿Ÿ</strong>ï¼šæŸäº›æŒ‡ä»¤ï¼Œç‰¹åˆ«æ˜¯å†…å­˜è®¿é—®æŒ‡ä»¤ï¼Œå¯èƒ½éœ€è¦æ•°ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰èƒ½å®Œæˆã€‚é€šè¿‡é‡æ’åºï¼Œå¤„ç†å™¨å¯ä»¥å…ˆæ‰§è¡Œå…¶ä»–ä¸ä¾èµ–çš„æŒ‡ä»¤ï¼Œè€Œä¸æ˜¯ç©ºé—²ç­‰å¾…ï¼Œè¿™æ ·å¯ä»¥æ©ç›–è¿™äº›é«˜å»¶è¿ŸæŒ‡ä»¤çš„å½±å“ã€‚</li><li><strong>ä¼˜åŒ–ç¼“å­˜åˆ©ç”¨</strong>ï¼šé€šè¿‡æŒ‡ä»¤é‡æ’åºï¼Œå¤„ç†å™¨å¯ä»¥è°ƒæ•´å†…å­˜è®¿é—®çš„é¡ºåºï¼Œæå‰é¢„å–æ•°æ®ï¼Œæˆ–ä½¿è¿ç»­çš„å†…å­˜è®¿é—®æ›´ä¸ºé›†ä¸­ï¼Œä»è€Œæ›´æœ‰æ•ˆåœ°åˆ©ç”¨ç¼“å­˜ã€‚</li><li><strong>å¹¶è¡Œæ‰§è¡Œ</strong>ï¼šåœ¨å¤šæ ¸æˆ–å¤šæ‰§è¡Œå•å…ƒçš„CPUä¸­ï¼ŒæŒ‡ä»¤é‡æ’åºå¯ä»¥å¸®åŠ©ç¡®ä¿å„ä¸ªæ‰§è¡Œå•å…ƒéƒ½èƒ½å¾—åˆ°è¶³å¤Ÿçš„å·¥ä½œï¼Œä»è€Œå®ç°çœŸæ­£çš„æŒ‡ä»¤çº§å¹¶è¡Œã€‚</li><li><strong>æ”¹å–„èƒ½æ•ˆ</strong>ï¼šé€šè¿‡å‡å°‘ä¸å¿…è¦çš„ç­‰å¾…å’Œæé«˜æŒ‡ä»¤æ‰§è¡Œçš„å¹¶è¡Œåº¦ï¼Œå¯ä»¥åœ¨è¾ƒçŸ­çš„æ—¶é—´å†…å®Œæˆæ›´å¤šçš„å·¥ä½œï¼Œä»è€Œæé«˜èƒ½æ•ˆã€‚</li></ol><p>ä½†æ˜¯ï¼ŒæŒ‡ä»¤é‡æ’åºä¹Ÿç»™å¤šçº¿ç¨‹ç¼–ç¨‹å¸¦æ¥äº†å¤æ‚æ€§ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šæ‰“ç ´ç¨‹åºå‘˜é¢„æœŸçš„æŒ‡ä»¤æ‰§è¡Œé¡ºåºï¼Œå¯¼è‡´æ•°æ®ç«æ€æˆ–å…¶ä»–å¹¶å‘é—®é¢˜ã€‚ä¸ºäº†æ­£ç¡®åœ°å¤„ç†è¿™äº›é—®é¢˜ï¼Œç¨‹åºå‘˜éœ€è¦ä½¿ç”¨å†…å­˜å±éšœã€é”æˆ–å…¶ä»–åŒæ­¥æœºåˆ¶</p><h3 id="linuxæœ‰å‡ ç§ioæ¨¡å‹-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#linuxæœ‰å‡ ç§ioæ¨¡å‹-2023-é˜¿é‡Œ" aria-hidden="true">#</a> linuxæœ‰å‡ ç§IOæ¨¡å‹ï¼ˆ2023 é˜¿é‡Œï¼‰</h3>',11),Za={href:"https://linyunwen.github.io/2022/01/02/linux-io-model/",target:"_blank",rel:"noopener noreferrer"},$a=t('<h3 id="åˆ†é…ç»™è¿›ç¨‹çš„èµ„æºæœ‰å“ªäº›-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#åˆ†é…ç»™è¿›ç¨‹çš„èµ„æºæœ‰å“ªäº›-2023-æ»´æ»´" aria-hidden="true">#</a> åˆ†é…ç»™è¿›ç¨‹çš„èµ„æºæœ‰å“ªäº›ï¼ˆ2023 æ»´æ»´ï¼‰</h3><ol><li><strong>CPUæ—¶é—´</strong>ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦ä½¿ç”¨CPUæ¥æ‰§è¡Œå…¶æŒ‡ä»¤ã€‚æ“ä½œç³»ç»Ÿé€šè¿‡è¿›ç¨‹è°ƒåº¦ç®—æ³•æ¥å†³å®šå“ªä¸ªè¿›ç¨‹åº”è¯¥å¾—åˆ°CPUæ—¶é—´ã€‚</li><li><strong>å†…å­˜ç©ºé—´</strong>ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦å†…å­˜æ¥å­˜å‚¨å…¶ä»£ç ã€æ•°æ®å’Œè¿è¡Œæ—¶çš„çŠ¶æ€ä¿¡æ¯ã€‚æ“ä½œç³»ç»Ÿé€šè¿‡å†…å­˜ç®¡ç†ç®—æ³•æ¥åˆ†é…å’Œç®¡ç†å†…å­˜èµ„æºã€‚</li><li><strong>I/Oè®¾å¤‡</strong>ï¼šåŒ…æ‹¬ç¡¬ç›˜ã€é¼ æ ‡ã€é”®ç›˜ã€æ‰“å°æœºç­‰ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£ç®¡ç†å’Œè°ƒåº¦è¿›ç¨‹å¯¹è¿™äº›è®¾å¤‡çš„è®¿é—®ã€‚</li><li><strong>æ–‡ä»¶</strong>ï¼šæ–‡ä»¶æ˜¯ä¸€ç§å¸¸è§çš„å­˜å‚¨èµ„æºï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†å’Œæ§åˆ¶è¿›ç¨‹å¯¹æ–‡ä»¶çš„è®¿é—®ã€‚</li><li><strong>ç½‘ç»œ</strong>ï¼šè¿›ç¨‹å¯èƒ½éœ€è¦é€šè¿‡ç½‘ç»œæ¥è¿›è¡Œæ•°æ®ä¼ è¾“å’Œé€šä¿¡ï¼Œæ“ä½œç³»ç»Ÿè´Ÿè´£ç®¡ç†å’Œè°ƒåº¦è¿›ç¨‹å¯¹ç½‘ç»œèµ„æºçš„è®¿é—®ã€‚</li><li><strong>å„ç§è½¯ä»¶å’Œåº“èµ„æº</strong>ï¼šä¾‹å¦‚æ•°æ®åº“ç³»ç»Ÿã€å›¾å½¢å¤„ç†åº“ç­‰ã€‚è¿™äº›éƒ½æ˜¯è¿›ç¨‹å¯èƒ½éœ€è¦ä½¿ç”¨çš„èµ„æºï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†å’Œåˆ†é…ã€‚</li></ol><h3 id="æ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆåšå†…å­˜ç®¡ç†çš„-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#æ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆåšå†…å­˜ç®¡ç†çš„-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> æ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆåšå†…å­˜ç®¡ç†çš„ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†ç¡®å®æ˜¯ä¸€ä¸ªå¤æ‚è€Œæœ‰è¶£çš„è¯é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦åœ¨ä¿æŠ¤ã€å…±äº«ã€è™šæ‹ŸåŒ–å’Œç‰©ç†å†…å­˜ç®¡ç†å››ä¸ªæ–¹é¢è¿›è¡Œå¹³è¡¡ã€‚ä»¥ä¸‹æ˜¯è¿™å››ä¸ªæ–¹é¢çš„è¯¦ç»†è§£é‡Šï¼š</p><ol><li>ä¿æŠ¤ï¼šæ“ä½œç³»ç»Ÿéœ€è¦ä¿è¯æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨å…¶è‡ªå·±çš„å†…å­˜ç©ºé—´ä¸­è¿è¡Œï¼Œä»¥é˜²æ­¢å®ƒä»¬ç›¸äº’å¹²æ‰°ã€‚è¿™é€šå¸¸é€šè¿‡ç¡¬ä»¶æ”¯æŒçš„å†…å­˜ä¿æŠ¤æœºåˆ¶æ¥å®ç°ã€‚</li><li>å…±äº«ï¼šè™½ç„¶å†…å­˜ä¿æŠ¤å¾ˆé‡è¦ï¼Œä½†æœ‰æ—¶å€™ï¼Œä¸åŒçš„è¿›ç¨‹éœ€è¦èƒ½å¤Ÿè®¿é—®å…±äº«çš„å†…å­˜åŒºåŸŸã€‚æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå…è®¸è¿›ç¨‹åœ¨éœ€è¦çš„æ—¶å€™å…±äº«å†…å­˜ã€‚</li><li>è™šæ‹ŸåŒ–ï¼šæ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›äº†ä¸€ç§çœ‹ä¼¼æœ‰å¾ˆå¤§çš„ã€è¿ç»­çš„å†…å­˜ç©ºé—´çš„å¹»è±¡ã€‚è¿™å®é™…ä¸Šæ˜¯é€šè¿‡ä¸€ç§å«åšå†…å­˜è™šæ‹ŸåŒ–çš„æŠ€æœ¯å®ç°çš„ï¼Œè¿™ä½¿å¾—æ¯ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºå®ƒæœ‰è‡ªå·±çš„ç§æœ‰å†…å­˜ï¼Œå°½ç®¡å®é™…ä¸Šç‰©ç†å†…å­˜è¢«æ‰€æœ‰è¿›ç¨‹å…±äº«ã€‚</li><li>ç‰©ç†å†…å­˜ç®¡ç†ï¼šæ“ä½œç³»ç»Ÿéœ€è¦ç®¡ç†ç‰©ç†å†…å­˜ï¼Œè¿™åŒ…æ‹¬å“ªäº›å†…å­˜è¢«ä½¿ç”¨ï¼Œå“ªäº›å†…å­˜æ˜¯ç©ºé—²çš„ï¼Œä»¥åŠå¦‚ä½•åˆ†é…å’Œå›æ”¶å†…å­˜ã€‚</li></ol><p>å¦‚æœéè¦è¯´ä¸€ç§ç®¡ç†ç­–ç•¥ï¼Œæœ‰ä¸€ç§å«åšâ€œjemallocâ€çš„å†…å­˜åˆ†é…ç­–ç•¥ã€‚è¿™ç§ç­–ç•¥æ˜¯ä¸€ç§ç”¨äºå¤„ç†åŠ¨æ€å†…å­˜åˆ†é…çš„æŠ€æœ¯ã€‚åœ¨è¿™ç§ç­–ç•¥ä¸­ï¼Œå†…å­˜è¢«åˆ†æˆä¸åŒå¤§å°çš„å—ï¼Œä¾‹å¦‚16KBï¼Œ32KBï¼Œ64KBç­‰ã€‚è¿™äº›å—æ˜¯2çš„å¹‚ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä½æ“ä½œå¿«é€Ÿåˆ†é…å’Œé‡Šæ”¾ã€‚è¿™ç§ç­–ç•¥çš„å¥½å¤„æ˜¯å®ƒå¯ä»¥å‡å°‘å†…å­˜ç¢ç‰‡ï¼ŒåŒæ—¶è¿˜å¯ä»¥æé«˜å†…å­˜çš„åˆ†é…é€Ÿåº¦ã€‚</p><p>å½“è¿›ç¨‹éœ€è¦æ›´å¤šçš„å†…å­˜æ—¶ï¼Œjemallocä¼šå°è¯•æ‰¾åˆ°æ¯”æ‰€éœ€å†…å­˜å¤§çš„ç¬¬ä¸€ä¸ª2çš„å¹‚çš„å†…å­˜å—ã€‚å¦‚æœè¿™æ ·çš„å—ä¸å­˜åœ¨ï¼Œå®ƒä¼šå°è¯•æ‰¾åˆ°ä¸€ä¸ªæ›´å¤§çš„å—ï¼Œç„¶åå°†è¿™ä¸ªå—åˆ†å‰²æˆä¸¤ä¸ªæ›´å°çš„å—ã€‚å¦‚æœè¿™ä¸ªæ›´å¤§çš„å—ä»ç„¶ä¸è¶³ä»¥æ»¡è¶³éœ€æ±‚ï¼Œå®ƒå°±ä¼šå‘æ“ä½œç³»ç»Ÿè¯·æ±‚æ›´å¤šçš„å†…å­˜ã€‚</p><p>è¿™ç§ç­–ç•¥å…è®¸jemallocåœ¨éœ€è¦çš„æ—¶å€™å¿«é€Ÿæ‰¾åˆ°åˆé€‚å¤§å°çš„å†…å­˜å—ï¼Œè€Œä¸éœ€è¦éå†æ‰€æœ‰çš„ç©ºé—²å†…å­˜å—ã€‚è¿™ä½¿å¾—jemallocåœ¨é¢å¯¹å¤§é‡å°å‹å†…å­˜åˆ†é…è¯·æ±‚æ—¶è¡¨ç°å‡ºè‰²ã€‚</p><h3 id="âœ¨-æ€ä¹ˆå‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ç©ºé—´-2023-å°çº¢ä¹¦-ã€2023çƒ­é—¨é—®é¢˜ã€‘" tabindex="-1"><a class="header-anchor" href="#âœ¨-æ€ä¹ˆå‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ç©ºé—´-2023-å°çº¢ä¹¦-ã€2023çƒ­é—¨é—®é¢˜ã€‘" aria-hidden="true">#</a> âœ¨ æ€ä¹ˆå‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ç©ºé—´ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰ã€2023çƒ­é—¨é—®é¢˜ã€‘</h3><p>brkå’Œmmapç³»ç»Ÿè°ƒç”¨ï¼Œbrkç”³è¯·å †å†…å­˜ï¼Œmmapåˆ†é…æ–‡ä»¶æ˜ å°„åŒºå’ŒåŒ¿åæ˜ å°„åŒº</p><p>è¿›ç¨‹ç¡®å®æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚ brk å’Œ mmap å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜çš„ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨çš„ä¸€äº›è¯¦ç»†ä¿¡æ¯ï¼š</p><ol><li><code>brk</code>ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºæ”¹å˜è¿›ç¨‹å †å¤§å°çš„ç³»ç»Ÿè°ƒç”¨ã€‚å †æ˜¯ç”¨äºåŠ¨æ€å†…å­˜åˆ†é…çš„å†…å­˜åŒºåŸŸï¼ˆå¦‚é€šè¿‡ mallocã€callocã€realloc å’Œ free è¿™æ ·çš„Cåº“å‡½æ•°ï¼‰ã€‚å½“è¿›ç¨‹è°ƒç”¨ brk æ¥æ”¹å˜å †çš„ç»“æŸåœ°å€æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥æ ¹æ®éœ€è¦åˆ†é…æ›´å¤šçš„ç‰©ç†å†…å­˜ç»™è¿›ç¨‹ï¼Œæˆ–è€…å›æ”¶æœªä½¿ç”¨çš„å†…å­˜ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œbrk åªèƒ½ç”¨äºæ”¹å˜å †çš„å¤§å°ï¼Œè€Œä¸èƒ½ç”¨äºæ”¹å˜æ ˆçš„å¤§å°ã€‚</li><li><code>mmap</code>ï¼šè¿™æ˜¯ä¸€ç§æ›´é€šç”¨çš„å†…å­˜ç®¡ç†ç³»ç»Ÿè°ƒç”¨ï¼Œå¯ä»¥ç”¨äºå®ç°å†…å­˜æ˜ å°„ã€‚å†…å­˜æ˜ å°„å¯ä»¥æœ‰å¤šç§ç”¨é€”ï¼Œå¦‚æ–‡ä»¶æ˜ å°„å’Œåˆ›å»ºå…±äº«å†…å­˜ã€‚mmap è¿˜å¯ä»¥åˆ›å»ºåŒ¿åæ˜ å°„ï¼Œè¿™æ˜¯ä¸€ç§æ²¡æœ‰ä¸æ–‡ä»¶ç³»ç»Ÿå…³è”çš„å†…å­˜åŒºåŸŸï¼Œå¯ä»¥ç”¨äºè¿›ç¨‹é—´é€šä¿¡æˆ–è€…æ›¿ä»£ malloc å’Œ free è¿›è¡Œå†…å­˜ç®¡ç†ã€‚mmap è°ƒç”¨å…è®¸è¿›ç¨‹æ˜¾å¼åœ°æ§åˆ¶å†…å­˜çš„åˆ†é¡µè¡Œä¸ºï¼ŒåŒ…æ‹¬é¡µé”™è¯¯å¤„ç†ã€é¢„å–ã€åŒæ­¥å’Œä¿æŠ¤ç­‰ã€‚</li></ol><p>è¿™ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„åŸºæœ¬å†…å­˜ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ç”±è¿›ç¨‹ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è¢«æ›´é«˜çº§çš„å†…å­˜ç®¡ç†åº“ï¼Œå¦‚ jemalloc æˆ–Cåº“çš„ malloc å’Œ free å‡½æ•°æ‰€ä½¿ç”¨ã€‚</p><h3 id="æœ‰æ²¡æœ‰æ›´å¿«çš„ç”³è¯·å†…å­˜æ–¹å¼-å†…å­˜åˆ†é…ä¼˜åŒ–ç­–ç•¥-2023-æ»´æ»´å®ä¹ " tabindex="-1"><a class="header-anchor" href="#æœ‰æ²¡æœ‰æ›´å¿«çš„ç”³è¯·å†…å­˜æ–¹å¼-å†…å­˜åˆ†é…ä¼˜åŒ–ç­–ç•¥-2023-æ»´æ»´å®ä¹ " aria-hidden="true">#</a> æœ‰æ²¡æœ‰æ›´å¿«çš„ç”³è¯·å†…å­˜æ–¹å¼ï¼ˆå†…å­˜åˆ†é…ä¼˜åŒ–ç­–ç•¥ï¼‰ï¼Ÿï¼ˆ2023 æ»´æ»´å®ä¹ ï¼‰</h3><ol><li><strong>å†…å­˜æ± ï¼ˆMemory Poolï¼‰</strong>ï¼šå†…å­˜æ± æ˜¯ä¸€ç§å†…å­˜åˆ†é…ç­–ç•¥ï¼Œé¢„å…ˆåœ¨å †ä¸­åˆ†é…ä¸€å¤§å—å†…å­˜ï¼Œç„¶åç”±åº”ç”¨ç¨‹åºè‡ªè¡Œç®¡ç†è¿™å—å†…å­˜ã€‚å½“éœ€è¦åˆ†é…å†…å­˜æ—¶ï¼Œç›´æ¥ä»å†…å­˜æ± ä¸­å–ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½å»è°ƒç”¨<code>malloc</code>æˆ–<code>new</code>ã€‚åŒæ ·ï¼Œå†…å­˜é‡Šæ”¾æ—¶ï¼Œä¹Ÿæ˜¯è¿”å›åˆ°å†…å­˜æ± ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨<code>free</code>æˆ–<code>delete</code>ã€‚è¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ï¼Œæé«˜å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„æ•ˆç‡ã€‚</li><li><strong>å¯¹è±¡æ± ï¼ˆObject Poolï¼‰</strong>ï¼šå¯¹è±¡æ± æ˜¯å†…å­˜æ± çš„ä¸€ç§åº”ç”¨ï¼Œä¸»è¦ç”¨äºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å°å¯¹è±¡ã€‚å®ƒä¼šé¢„å…ˆåˆ›å»ºä¸€äº›å¯¹è±¡å¹¶ä¿å­˜åœ¨æ± ä¸­ã€‚å½“éœ€è¦å¯¹è±¡æ—¶ï¼Œä»æ± ä¸­è·å–è€Œä¸æ˜¯åˆ›å»ºæ–°çš„å¯¹è±¡ï¼›å½“å¯¹è±¡ä¸å†éœ€è¦æ—¶ï¼Œè¿”å›åˆ°æ± ä¸­è€Œä¸æ˜¯é”€æ¯ã€‚è¿™æ ·å¯ä»¥å‡å°‘å¯¹è±¡åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€ã€‚</li><li><strong>ä½¿ç”¨å®šåˆ¶çš„å†…å­˜åˆ†é…å™¨</strong>ï¼šæœ‰äº›å†…å­˜åˆ†é…å™¨å¯ä»¥é’ˆå¯¹ç‰¹å®šçš„ä½¿ç”¨æ¨¡å¼è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚Googleçš„tcmallocã€Facebookçš„jemallocç­‰ã€‚</li><li><strong>é›¶æ‹·è´ï¼ˆZero Copyï¼‰</strong>ï¼šé›¶æ‹·è´æ˜¯ä¸€ç§å¯ä»¥å‡å°‘CPUå¤åˆ¶æ•°æ®çš„æŠ€æœ¯ã€‚è¿™ç§æŠ€æœ¯ä¸»è¦ç”¨äºç½‘ç»œæ•°æ®ä¼ è¾“ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå†…å­˜åˆ†é…ã€‚é€šè¿‡ç›´æ¥æ“ä½œæ•°æ®çš„åœ°å€ï¼Œè€Œä¸æ˜¯å¤åˆ¶æ•°æ®ï¼Œå¯ä»¥å¤§å¤§æé«˜æ•ˆç‡ã€‚</li></ol><h3 id="ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—-2023-æ»´æ»´å®ä¹ " tabindex="-1"><a class="header-anchor" href="#ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—-2023-æ»´æ»´å®ä¹ " aria-hidden="true">#</a> ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—ï¼Ÿï¼ˆ2023 æ»´æ»´å®ä¹ ï¼‰</h3><p>ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡å¹¶ä¸å®Œå…¨ç›¸åŒã€‚ä¸‹é¢æ˜¯å‡ ä¸ªå¯èƒ½å½±å“æ•ˆç‡çš„å› ç´ ï¼š</p><ol><li><strong>å†…å­˜ç®¡ç†ç­–ç•¥</strong>ï¼šæ“ä½œç³»ç»Ÿå’Œå†…å­˜åˆ†é…åº“ï¼ˆå¦‚glibcä¸­çš„mallocï¼‰é€šå¸¸ä½¿ç”¨ä¸åŒçš„ç­–ç•¥æ¥å¤„ç†å¤§å—å’Œå°å—å†…å­˜çš„åˆ†é…ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå°å—å†…å­˜çš„åˆ†é…ï¼Œå®ƒä»¬å¯èƒ½ä½¿ç”¨åˆ†æ®µåˆ—è¡¨ï¼ˆsegregated listsï¼‰æˆ–ä½å›¾ï¼ˆbitmapsï¼‰ç­‰æ•°æ®ç»“æ„æ¥å¿«é€ŸæŸ¥æ‰¾åˆé€‚çš„ç©ºé—²å—ã€‚å¯¹äºå¤§å—å†…å­˜çš„åˆ†é…ï¼Œå®ƒä»¬å¯èƒ½ä½¿ç”¨æ›´å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå¦‚å¹³è¡¡æ ‘æˆ–å †ï¼Œä»¥ä¾¿åœ¨å¯èƒ½çš„ç©ºé—²å—ä¸­æ‰¾åˆ°æœ€åˆé€‚çš„ä¸€å—ã€‚è¿™äº›ç­–ç•¥çš„åŒºåˆ«å¯èƒ½å¯¼è‡´å¤§å—å’Œå°å—å†…å­˜åˆ†é…çš„æ•ˆç‡ä¸åŒã€‚</li><li><strong>å†…å­˜ç¢ç‰‡åŒ–</strong>ï¼šå¦‚æœé¢‘ç¹åœ°ç”³è¯·å’Œé‡Šæ”¾å°å—å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–ï¼Œå³ç©ºé—²å†…å­˜è¢«åˆ†å‰²æˆè®¸å¤šå°å—ï¼Œè€Œæ— æ³•æ»¡è¶³å¤§å—å†…å­˜çš„åˆ†é…éœ€æ±‚ã€‚åä¹‹ï¼Œå¦‚æœåˆ†é…çš„å†…å­˜å¤§éƒ¨åˆ†æ˜¯å¤§å—å†…å­˜ï¼Œé‚£ä¹ˆå¯èƒ½è¾ƒå°‘é‡åˆ°å†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜ã€‚å› æ­¤ï¼Œå†…å­˜ç¢ç‰‡åŒ–ä¹Ÿå¯èƒ½å½±å“åˆ°å†…å­˜åˆ†é…çš„æ•ˆç‡ã€‚</li><li><strong>é¡µæ•…éšœï¼ˆPage Faultsï¼‰</strong>ï¼šå½“ç”³è¯·ä¸€å—å¤§å†…å­˜å¹¶è®¿é—®å®ƒæ—¶ï¼Œå¯èƒ½ä¼šè§¦å‘æ›´å¤šçš„é¡µæ•…éšœï¼Œå› ä¸ºéœ€è¦åŠ è½½æ›´å¤šçš„ç‰©ç†å†…å­˜é¡µåˆ°å†…å­˜ä¸­ã€‚é¡µæ•…éšœæ˜¯ä¸€ç§æ˜‚è´µçš„æ“ä½œï¼Œä¼šå¢åŠ å†…å­˜åˆ†é…å’Œè®¿é—®çš„å¼€é”€ã€‚</li></ol><p>å› æ­¤ï¼Œç”³è¯·å¤§å—å†…å­˜å’Œå°å—å†…å­˜çš„æ•ˆç‡å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œå®ƒä»¬å–å†³äºè®¸å¤šå› ç´ ï¼ŒåŒ…æ‹¬å†…å­˜ç®¡ç†ç­–ç•¥ã€å†…å­˜ç¢ç‰‡åŒ–ã€é¡µæ•…éšœç­‰ã€‚åœ¨å®é™…çš„ç¼–ç¨‹ä¸­ï¼Œåº”å°½å¯èƒ½é¿å…ä¸å¿…è¦çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾ï¼Œä»¥æé«˜ç¨‹åºçš„æ•ˆç‡å’Œæ€§èƒ½ã€‚</p><h3 id="jvmåˆ†ä»£å†…å­˜ç®¡ç†å’Œæ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†çš„åŒºåˆ«-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#jvmåˆ†ä»£å†…å­˜ç®¡ç†å’Œæ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†çš„åŒºåˆ«-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> jvmåˆ†ä»£å†…å­˜ç®¡ç†å’Œæ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†çš„åŒºåˆ«ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><ol><li>æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†çš„ä¸»è¦ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæŠ½è±¡çš„ã€è¿ç»­çš„åœ°å€ç©ºé—´ç»™æ¯ä¸ªè¿›ç¨‹ï¼Œä¿æŠ¤è¿›ç¨‹ä¹‹é—´çš„å†…å­˜ï¼Œç¡®ä¿è¿›ç¨‹ä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œå¹¶åœ¨ç‰©ç†å†…å­˜æœ‰é™çš„æƒ…å†µä¸‹å°½å¯èƒ½æœ‰æ•ˆåœ°åˆ†é…å’Œå›æ”¶å†…å­˜ã€‚å¦ä¸€æ–¹é¢ï¼ŒJVMçš„å†…å­˜ç®¡ç†çš„ç›®æ ‡æ›´å…³æ³¨äºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚Javaå…·æœ‰è‡ªåŠ¨åƒåœ¾æ”¶é›†ï¼ˆGCï¼‰çš„ç‰¹æ€§ï¼Œå…¶ç›®æ ‡æ˜¯è‡ªåŠ¨è¯†åˆ«å¹¶å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œä»è€Œç®€åŒ–ç¨‹åºå‘˜çš„å·¥ä½œã€‚</li><li>æ“ä½œç³»ç»Ÿé€šå¸¸ä½¿ç”¨ä¸€ç§ç§°ä¸ºè™šæ‹Ÿå†…å­˜çš„æŠ€æœ¯ï¼Œå°†ç‰©ç†å†…å­˜æŠ½è±¡ä¸ºè¿ç»­çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå¹¶é€šè¿‡é¡µè¡¨å’Œç¡¬ä»¶æ”¯æŒå®ç°å¯¹è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„ã€‚å¦ä¸€æ–¹é¢ï¼ŒJVMé‡‡ç”¨äº†åˆ†ä»£æ”¶é›†ç­–ç•¥ï¼Œå°†å†…å­˜åˆ†ä¸ºæ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰ã€è€å¹´ä»£ï¼ˆOld Generationï¼‰å’Œæ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼ŒJava 8ä»¥åè¢«Metaspaceæ›¿ä»£ï¼‰ã€‚è¿™ç§ç­–ç•¥åŸºäºä¸¤ä¸ªè§‚å¯Ÿç»“æœï¼šå¤§éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½å¾ˆçŸ­ï¼Œå°‘æ•°ç”Ÿå‘½å‘¨æœŸé•¿çš„å¯¹è±¡å¯èƒ½ä¼šå­˜æ´»å¾ˆé•¿æ—¶é—´ã€‚å› æ­¤ï¼ŒJVMé€šè¿‡ä½¿ç”¨ä¸åŒçš„åƒåœ¾æ”¶é›†ç®—æ³•å’Œç­–ç•¥æ¥å¤„ç†è¿™äº›ä¸åŒçš„å†…å­˜åŒºåŸŸã€‚</li></ol><p>åœ¨è¿™ä¸¤ä¸ªå±‚æ¬¡çš„å†…å­˜ç®¡ç†ä¹‹é—´è¿˜æœ‰ä¸€å±‚ï¼šJavaè¿è¡Œæ—¶ç¯å¢ƒï¼ˆJREï¼‰ä¼šä»æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ï¼Œç„¶åå°†è¿™äº›å†…å­˜åˆ†é…ç»™JVMä½¿ç”¨ã€‚åœ¨JVMå†…éƒ¨ï¼Œå†…å­˜ä¼šè¢«è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºç”¨äºä¸åŒç›®çš„çš„å„ç§åŒºåŸŸï¼Œå¦‚Javaå †ï¼ˆç”¨äºå­˜å‚¨å¯¹è±¡ï¼‰ã€æ–¹æ³•åŒºï¼ˆç”¨äºå­˜å‚¨ç±»çš„å…ƒæ•°æ®ï¼‰ä»¥åŠå„ç§çº¿ç¨‹æ ˆï¼ˆç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡å’Œæ–¹æ³•è°ƒç”¨çš„ä¸Šä¸‹æ–‡ï¼‰ç­‰ã€‚</p><h3 id="fork-è¯»æ—¶ã€å…±äº«å†™æ—¶çš„æ‹·è´æ˜¯æ€æ ·çš„-2023-æ»´æ»´å®ä¹ " tabindex="-1"><a class="header-anchor" href="#fork-è¯»æ—¶ã€å…±äº«å†™æ—¶çš„æ‹·è´æ˜¯æ€æ ·çš„-2023-æ»´æ»´å®ä¹ " aria-hidden="true">#</a> fork()è¯»æ—¶ã€å…±äº«å†™æ—¶çš„æ‹·è´æ˜¯æ€æ ·çš„ï¼Ÿï¼ˆ2023 æ»´æ»´å®ä¹ ï¼‰</h3><p>åœ¨Linuxä¸­ï¼Œ<code>fork()</code>æ˜¯ä¸€ä¸ªç”¨æ¥åˆ›å»ºæ–°è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ã€‚å½“ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨<code>fork()</code>æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œè¿™ä¸ªæ–°è¿›ç¨‹æ˜¯åŸè¿›ç¨‹çš„å‰¯æœ¬ï¼ŒåŒ…æ‹¬åŸè¿›ç¨‹çš„ä»£ç æ®µã€æ•°æ®æ®µã€å †å’Œæ ˆç­‰ã€‚</p><p>å…·ä½“åˆ°å†…å­˜çš„å¤åˆ¶ï¼ŒLinuxé‡‡ç”¨äº†å†™æ—¶å¤åˆ¶ï¼ˆCopy-on-Writeï¼ŒCOWï¼‰çš„ç­–ç•¥ã€‚è¿™æ˜¯ä¸€ç§å¯ä»¥æé«˜æ€§èƒ½å’Œå†…å­˜åˆ©ç”¨ç‡çš„æŠ€æœ¯ã€‚</p><p>**å†™æ—¶å¤åˆ¶ï¼ˆCOWï¼‰**æ˜¯è¿™æ ·çš„ä¸€ç§ç­–ç•¥ï¼šå½“è¿›è¡Œ<code>fork()</code>æ“ä½œæ—¶ï¼Œå­è¿›ç¨‹å¹¶ä¸ç«‹å³å¤åˆ¶çˆ¶è¿›ç¨‹çš„æ‰€æœ‰å†…å­˜é¡µï¼Œè€Œæ˜¯çˆ¶å­è¿›ç¨‹å…±äº«åŒä¸€ä»½ç‰©ç†å†…å­˜ï¼ŒåŒæ—¶æ ‡è®°è¿™äº›å†…å­˜é¡µä¸ºåªè¯»ã€‚åªæœ‰å½“è¿›ç¨‹è¯•å›¾å†™å…¥è¿™äº›å†…å­˜é¡µæ—¶ï¼Œå†…æ ¸æ‰ä¼šä¸ºå†™å…¥æ“ä½œçš„è¿›ç¨‹åˆ›å»ºè¯¥é¡µçš„ä¸€ä¸ªæ‹·è´ï¼Œç„¶åä¿®æ”¹é¡µè¡¨ä»¥å°†è™šæ‹Ÿå†…å­˜é‡æ–°æ˜ å°„åˆ°æ–°çš„ç‰©ç†å†…å­˜é¡µã€‚è¿™å°±æ˜¯æ‰€è°“çš„&quot;å†™æ—¶å¤åˆ¶&quot;ã€‚</p><p>è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æœå­è¿›ç¨‹å¹¶æ²¡æœ‰ä¿®æ”¹å†…å­˜ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦çœŸæ­£çš„å¤åˆ¶å†…å­˜ï¼Œä»è€ŒèŠ‚çœäº†å¤§é‡çš„å†…å­˜ã€‚åŒæ—¶ï¼Œç”±äºä¸éœ€è¦ç«‹å³å¤åˆ¶æ‰€æœ‰å†…å­˜ï¼Œ<code>fork()</code>æ“ä½œå¯ä»¥æ›´å¿«åœ°å®Œæˆã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æœºåˆ¶åªé€‚ç”¨äºè™šæ‹Ÿå†…å­˜ç³»ç»Ÿï¼Œå¹¶ä¸”éœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒã€‚åœ¨æ²¡æœ‰è¿™ç§æœºåˆ¶çš„ç³»ç»Ÿä¸­ï¼Œ<code>fork()</code>æ“ä½œå¯èƒ½éœ€è¦èŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼Œå¹¶ä¸”ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚</p><h3 id="æ­»é”çš„å¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#æ­»é”çš„å¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> æ­»é”çš„å¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>æ­»é”çš„å¿…è¦æ¡ä»¶é€šå¸¸è¢«å½’ç»“ä¸ºå››ä¸ªåŸºæœ¬æ¡ä»¶ï¼Œå®ƒä»¬éƒ½å¿…é¡»åŒæ—¶æ»¡è¶³æ‰èƒ½å‘ç”Ÿæ­»é”ã€‚è¿™å››ä¸ªæ¡ä»¶ä¹Ÿè¢«ç§°ä¸ºæ­»é”çš„å››ä¸ª&quot;Coffman&quot;æ¡ä»¶ï¼Œå¾—åäº1971å¹´ç”±E.G. Coffman Jr.ç­‰äººåœ¨å…¶è®ºæ–‡ä¸­é¦–æ¬¡æå‡ºã€‚è¿™å››ä¸ªæ¡ä»¶åŒ…æ‹¬ï¼š</p><ol><li><strong>äº’æ–¥</strong>ï¼šèµ„æºè‡³å°‘æœ‰ä¸€ä¸ªæ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ã€‚å¦‚æœå…¶ä»–è¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œé‚£ä¹ˆè¯·æ±‚è¿›ç¨‹å¿…é¡»ç­‰å¾…ç›´åˆ°å æœ‰èµ„æºçš„è¿›ç¨‹å·²ç»é‡Šæ”¾ã€‚</li><li><strong>å æœ‰å¹¶ç­‰å¾…</strong>ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚å ç”¨èµ„æºè€Œè¢«é˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li><strong>éæŠ¢å </strong>ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œå‰ä¸èƒ½è¢«å…¶ä»–è¿›ç¨‹å¼ºè¡Œå‰¥å¤ºï¼Œåªèƒ½ç”±æ‹¥æœ‰èµ„æºçš„è¿›ç¨‹ä¸»åŠ¨é‡Šæ”¾ã€‚</li><li><strong>å¾ªç¯ç­‰å¾…</strong>ï¼šåœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹â€”èµ„æºçš„ç¯å½¢é“¾ï¼Œå³è¿›ç¨‹é›†åˆ{P0, P1, â€¦, Pn}ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼›P1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPnæ­£åœ¨ç­‰å¾…å·²ç»è¢«P0å ç”¨çš„èµ„æºã€‚</li></ol><p>åªæœ‰åœ¨æ»¡è¶³è¿™å››ä¸ªæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œæ‰å¯èƒ½å‡ºç°æ­»é”ã€‚</p><h3 id="topå‘½ä»¤æœ‰å“ªäº›å‚æ•°-è¯´ä¸€ä¸‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#topå‘½ä»¤æœ‰å“ªäº›å‚æ•°-è¯´ä¸€ä¸‹-2023-ç¾å›¢" aria-hidden="true">#</a> topå‘½ä»¤æœ‰å“ªäº›å‚æ•°ï¼Œè¯´ä¸€ä¸‹ï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>topå‘½ä»¤æ˜¯ä¸€ä¸ªç”¨äºå®æ—¶ç›‘æ§ç³»ç»Ÿèµ„æºå’Œè¿›ç¨‹çš„å‘½ä»¤ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºå½“å‰è¿è¡Œçš„è¿›ç¨‹ã€CPUä½¿ç”¨æƒ…å†µã€å†…å­˜ä½¿ç”¨æƒ…å†µç­‰ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„topå‘½ä»¤å‚æ•°ï¼š</p><ol><li>-d &lt;ç§’æ•°&gt;ï¼šæŒ‡å®štopå‘½ä»¤åˆ·æ–°çš„æ—¶é—´é—´éš”ï¼Œé»˜è®¤ä¸º3ç§’ã€‚</li><li>-n &lt;æ¬¡æ•°&gt;ï¼šæŒ‡å®štopå‘½ä»¤æ‰§è¡Œçš„æ¬¡æ•°åè‡ªåŠ¨é€€å‡ºã€‚</li><li>-p &lt;è¿›ç¨‹ID&gt;ï¼šæŒ‡å®šè¦ç›‘æ§çš„è¿›ç¨‹IDã€‚</li><li>-u &lt;ç”¨æˆ·å&gt;ï¼šåªæ˜¾ç¤ºæŒ‡å®šç”¨æˆ·åçš„è¿›ç¨‹ã€‚</li><li>-s &lt;æ’åºå­—æ®µ&gt;ï¼šæŒ‰æŒ‡å®šå­—æ®µå¯¹è¿›ç¨‹è¿›è¡Œæ’åºï¼Œå¸¸è§çš„å­—æ®µæœ‰cpuï¼ˆCPUä½¿ç”¨ç‡ï¼‰ã€memï¼ˆå†…å­˜ä½¿ç”¨ç‡ï¼‰ç­‰ã€‚</li><li>-Hï¼šæ˜¾ç¤ºè¿›ç¨‹çš„å±‚æ¬¡å…³ç³»ã€‚</li><li>-iï¼šåªæ˜¾ç¤ºè¿è¡Œä¸­çš„è¿›ç¨‹ï¼Œä¸æ˜¾ç¤ºåƒµå°¸è¿›ç¨‹ã€‚</li></ol><h3 id="æ€ä¹ˆæ˜¾ç¤ºçº¿ç¨‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆæ˜¾ç¤ºçº¿ç¨‹-2023-ç¾å›¢" aria-hidden="true">#</a> æ€ä¹ˆæ˜¾ç¤ºçº¿ç¨‹ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>åœ¨Linuxä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ˜¾ç¤ºçº¿ç¨‹ï¼š</p><ul><li>topå‘½ä»¤ï¼šåœ¨topå‘½ä»¤çš„é»˜è®¤æ˜¾ç¤ºä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªè¿›ç¨‹çš„çº¿ç¨‹æ•°ï¼ˆThreadsåˆ—ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ‰§è¡Œtopå‘½ä»¤åï¼ŒæŒ‰ä¸‹&quot;Shift + H&quot;é”®å¯ä»¥åˆ‡æ¢åˆ°çº¿ç¨‹è§†å›¾ï¼Œæ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹çš„çº¿ç¨‹ä¿¡æ¯ã€‚</li><li>pså‘½ä»¤ï¼šé€šè¿‡pså‘½ä»¤ç»“åˆé€‰é¡¹æ¥æ˜¾ç¤ºçº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨&quot;ps -eLf&quot;å‘½ä»¤å¯ä»¥æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰çº¿ç¨‹çš„è¯¦ç»†ä¿¡æ¯ã€‚</li></ul><h3 id="è™šæ‹Ÿåœ°å€æ˜¯æ€ä¹ˆè½¬åŒ–åˆ°ç‰©ç†åœ°å€çš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#è™šæ‹Ÿåœ°å€æ˜¯æ€ä¹ˆè½¬åŒ–åˆ°ç‰©ç†åœ°å€çš„-2023-å­—èŠ‚" aria-hidden="true">#</a> è™šæ‹Ÿåœ°å€æ˜¯æ€ä¹ˆè½¬åŒ–åˆ°ç‰©ç†åœ°å€çš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><figure><img src="'+j+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿä¸­çš„å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼ŒMemory Management Unitï¼‰æ¥å®Œæˆçš„ã€‚ä¸‹é¢æ˜¯ä¸€èˆ¬çš„è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€è½¬æ¢è¿‡ç¨‹ï¼š</p><ul><li>ç¨‹åºå‘å‡ºå†…å­˜è®¿é—®è¯·æ±‚æ—¶ï¼Œä½¿ç”¨è™šæ‹Ÿåœ°å€è¿›è¡Œè®¿é—®ã€‚</li><li>è™šæ‹Ÿåœ°å€è¢«ä¼ é€’ç»™MMUè¿›è¡Œå¤„ç†ã€‚</li><li>MMUä¸­çš„åœ°å€æ˜ å°„è¡¨ï¼ˆé¡µè¡¨ï¼‰è¢«ç”¨æ¥å°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ã€‚é¡µè¡¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</li><li>MMUæ ¹æ®é¡µè¡¨ä¸­çš„æ˜ å°„å…³ç³»ï¼Œå°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºå¯¹åº”çš„ç‰©ç†åœ°å€ã€‚</li><li>è½¬æ¢åçš„ç‰©ç†åœ°å€è¢«ä¼ é€’ç»™å†…å­˜ç³»ç»Ÿï¼Œç”¨äºå®é™…çš„å†…å­˜è®¿é—®æ“ä½œã€‚</li></ul><h3 id="é¡µè¡¨æ˜¯æ€ä¹ˆæ„æˆçš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#é¡µè¡¨æ˜¯æ€ä¹ˆæ„æˆçš„-2023-å­—èŠ‚" aria-hidden="true">#</a> é¡µè¡¨æ˜¯æ€ä¹ˆæ„æˆçš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><p>é¡µè¡¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å¤šçº§é¡µè¡¨å°†é¡µè¡¨åˆ†ä¸ºå¤šä¸ªå±‚çº§ï¼Œæ¯ä¸ªå±‚çº§çš„é¡µè¡¨é¡¹å­˜å‚¨ä¸‹ä¸€çº§é¡µè¡¨çš„ç‰©ç†åœ°å€ã€‚é€šè¿‡å¤šçº§ç´¢å¼•ï¼Œå¯ä»¥é€çº§æŸ¥æ‰¾ï¼Œæœ€ç»ˆæ‰¾åˆ°å¯¹åº”çš„ç‰©ç†é¡µã€‚</p><p>å¯¹äº 64 ä½çš„ç³»ç»Ÿï¼Œä¸»è¦æœ‰å››çº§ç›®å½•ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>å…¨å±€é¡µç›®å½•é¡¹ PGD</li><li>ä¸Šå±‚é¡µç›®å½•é¡¹ PUD</li><li>ä¸­é—´é¡µç›®å½•é¡¹ PMD</li><li>é¡µè¡¨é¡¹ PTE</li></ul><figure><img src="'+I+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="å…±äº«å†…å­˜æ˜¯æ€ä¹ˆå®ç°çš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#å…±äº«å†…å­˜æ˜¯æ€ä¹ˆå®ç°çš„-2023-å­—èŠ‚" aria-hidden="true">#</a> å…±äº«å†…å­˜æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><p>å…±äº«å†…å­˜çš„æœºåˆ¶ï¼Œå°±æ˜¯æ‹¿å‡ºä¸€å—è™šæ‹Ÿåœ°å€ç©ºé—´æ¥ï¼Œæ˜ å°„åˆ°ç›¸åŒçš„ç‰©ç†å†…å­˜ä¸­ã€‚è¿™æ ·è¿™ä¸ªè¿›ç¨‹å†™å…¥çš„ä¸œè¥¿ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹é©¬ä¸Šå°±èƒ½çœ‹åˆ°äº†ï¼Œéƒ½ä¸éœ€è¦æ‹·è´æ¥æ‹·è´å»ï¼Œä¼ æ¥ä¼ å»ï¼Œå¤§å¤§æé«˜äº†è¿›ç¨‹é—´é€šä¿¡çš„é€Ÿåº¦ã€‚</p><figure><img src="'+B+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="æ“ä½œç³»ç»ŸåŸå­æ“ä½œæ€ä¹ˆå®ç°çš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#æ“ä½œç³»ç»ŸåŸå­æ“ä½œæ€ä¹ˆå®ç°çš„-2023-å­—èŠ‚" aria-hidden="true">#</a> æ“ä½œç³»ç»ŸåŸå­æ“ä½œæ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><p>æ“ä½œç³»ç»Ÿä¸­çš„åŸå­æ€§æ“ä½œæ˜¯é€šè¿‡ç¡¬ä»¶å’Œè½¯ä»¶çš„æ”¯æŒæ¥å®ç°çš„ã€‚åœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼ŒåŸå­æ€§æ“ä½œéœ€è¦ä¿è¯åœ¨å¤šä¸ªæ ¸å¿ƒä¹‹é—´çš„å¹¶å‘æ‰§è¡Œä¸­çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</p><p>ç¡¬ä»¶å±‚é¢ä¸Šï¼Œç°ä»£å¤„ç†å™¨æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„æŒ‡ä»¤æˆ–æœºåˆ¶æ¥æ”¯æŒåŸå­æ€§æ“ä½œï¼Œä¾‹å¦‚åŸå­äº¤æ¢ï¼ˆatomic exchangeï¼‰ã€åŸå­æ¯”è¾ƒå¹¶äº¤æ¢ï¼ˆatomic compare-and-swapï¼‰ç­‰ã€‚è¿™äº›æŒ‡ä»¤èƒ½å¤Ÿåœ¨æ‰§è¡ŒæœŸé—´ç¦æ­¢ä¸­æ–­æˆ–å…¶ä»–æ ¸å¿ƒçš„å¹²æ‰°ï¼Œç¡®ä¿æ“ä½œçš„åŸå­æ€§ã€‚</p><p>è½¯ä»¶å±‚é¢ä¸Šï¼Œæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€äº›åŸå­æ€§æ“ä½œçš„æ¥å£æˆ–å‡½æ•°ï¼Œä¾‹å¦‚åŸå­æ“ä½œå‡½æ•°ï¼ˆatomic operationï¼‰ï¼Œå®ƒä»¬ä½¿ç”¨äº†ç¡¬ä»¶æä¾›çš„åŸå­æ€§æŒ‡ä»¤æ¥å®ç°åŸå­æ€§æ“ä½œã€‚è¿™äº›å‡½æ•°é€šå¸¸æ˜¯åœ¨å†…æ ¸æ€ä¸‹æ‰§è¡Œï¼Œå¯ä»¥ä¿è¯åœ¨å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹ä¹‹é—´çš„åŸå­æ€§ã€‚</p><p>æ“ä½œç³»ç»Ÿè¿˜å¯ä»¥ä½¿ç”¨é”æœºåˆ¶æ¥å®ç°åŸå­æ€§æ“ä½œã€‚ä¾‹å¦‚ï¼Œäº’æ–¥é”ï¼ˆmutexï¼‰å¯ä»¥ç”¨æ¥ä¿æŠ¤å…±äº«èµ„æºçš„è®¿é—®ï¼Œåªæœ‰æŒæœ‰é”çš„è¿›ç¨‹æˆ–çº¿ç¨‹å¯ä»¥è®¿é—®å…±äº«èµ„æºï¼Œå…¶ä»–è¿›ç¨‹æˆ–çº¿ç¨‹éœ€è¦ç­‰å¾…é”çš„é‡Šæ”¾ã€‚é€šè¿‡é”çš„æœºåˆ¶ï¼Œå¯ä»¥ä¿è¯å¯¹å…±äº«èµ„æºçš„åŸå­æ€§æ“ä½œã€‚</p><h3 id="dockeré•œåƒæ–‡ä»¶æ˜¯æ€æ ·çš„-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#dockeré•œåƒæ–‡ä»¶æ˜¯æ€æ ·çš„-2023-å¿«æ‰‹" aria-hidden="true">#</a> Dockeré•œåƒæ–‡ä»¶æ˜¯æ€æ ·çš„ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>Docker é•œåƒçš„æ–‡ä»¶ç³»ç»Ÿæ˜¯ç”±å¤šä¸ªå±‚æ¬¡ç»„æˆçš„ï¼Œè¿™äº›å±‚æ¬¡æ˜¯å åŠ èµ·æ¥æ„å»ºå‡ºæœ€ç»ˆçš„é•œåƒçš„ã€‚å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Docker å®¹å™¨æ—¶ï¼ŒDocker ä¼šåœ¨å·²æœ‰çš„é•œåƒå±‚ä¹‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„å¯å†™å±‚ï¼Œä¹Ÿå°±æ˜¯å®¹å™¨å±‚ã€‚</p><p>ä»¥ä¸‹æ˜¯ Docker é•œåƒæ–‡ä»¶ç³»ç»Ÿçš„ç‰¹ç‚¹ï¼š</p><ol><li><strong>è”åˆæ–‡ä»¶ç³»ç»Ÿ</strong>ï¼šDocker ä½¿ç”¨è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ Overlay2, AUFS ç­‰ï¼‰æ¥å åŠ å¤šä¸ªå±‚ã€‚æ¯ä¸ªå±‚éƒ½æ˜¯å‰ä¸€ä¸ªå±‚çš„å¢é‡æ›´æ”¹ã€‚</li><li><strong>ä¸å¯å˜æ€§</strong>ï¼šé™¤äº†æœ€ä¸Šé¢çš„å®¹å™¨å±‚ï¼Œæ‰€æœ‰çš„é•œåƒå±‚éƒ½æ˜¯åªè¯»çš„ã€‚</li><li><strong>é‡ç”¨ä¸å…±äº«</strong>ï¼šå¤šä¸ªå®¹å™¨å¯ä»¥å…±äº«ç›¸åŒçš„åº•å±‚é•œåƒå±‚ï¼Œè¿™ä½¿å¾—å®¹å™¨å¯åŠ¨éå¸¸å¿«é€Ÿä¸”èŠ‚çœäº†ç£ç›˜ç©ºé—´ã€‚</li><li><strong>å¢é‡å­˜å‚¨</strong>ï¼šæ¯æ¬¡æˆ‘ä»¬åŸºäºç°æœ‰é•œåƒåˆ›å»ºæ–°çš„ Docker é•œåƒæˆ–é€šè¿‡ Dockerfile æ‰§è¡ŒæŒ‡ä»¤æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å±‚ã€‚è¿™ç§æ–¹å¼ä½¿å¾—é•œåƒçš„å­˜å‚¨éå¸¸é«˜æ•ˆã€‚</li><li><strong>å®¹å™¨å±‚</strong>ï¼šå½“å®¹å™¨è¿è¡Œæ—¶ï¼Œæ‰€æœ‰çš„æ›´æ”¹ï¼ˆä¾‹å¦‚å†™æ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶ï¼‰éƒ½ä¼šåœ¨å®¹å™¨å±‚ä¸Šå‘ç”Ÿã€‚è¿™ä¿è¯äº†åº•å±‚é•œåƒçš„ä¸å¯å˜æ€§ã€‚</li></ol><p>è¦æŸ¥çœ‹ Docker é•œåƒçš„å„ä¸ªå±‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker history &lt;image_name&gt;</code> å‘½ä»¤ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼ŒDocker é•œåƒçš„æ–‡ä»¶ç³»ç»Ÿæ˜¯ç”±å¤šä¸ªå åŠ çš„å±‚ç»„æˆï¼Œè¿™äº›å±‚æ„å»ºäº†ä¸€ä¸ªç»Ÿä¸€ã€å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ï¼Œä½†å®é™…ä¸Šæ¯ä¸€å±‚éƒ½æ˜¯ç‹¬ç«‹å­˜å‚¨çš„ã€‚</p><h3 id="æ—¶é—´è½®çš„æ¦‚å¿µ-2023-å¾—ç‰©" tabindex="-1"><a class="header-anchor" href="#æ—¶é—´è½®çš„æ¦‚å¿µ-2023-å¾—ç‰©" aria-hidden="true">#</a> æ—¶é—´è½®çš„æ¦‚å¿µï¼ˆ2023 å¾—ç‰©ï¼‰</h3><p>æ—¶é—´è½®æ˜¯ä¸€ç§è°ƒåº¦æ¨¡å‹ï¼Œç”¨äºæœ‰æ•ˆåœ°å¤„ç†æ‰¹é‡å‘¨æœŸæ€§ä»»åŠ¡ã€‚å®ƒå°†å¤§é‡çš„å®šæ—¶ä»»åŠ¡ç»‘å®šåœ¨ä¸€ä¸ªè°ƒåº¦å™¨ä¸Šï¼Œå¹¶é€šè¿‡è¿™ä¸ªè°ƒåº¦å™¨æ¥è¿›è¡Œç»Ÿä¸€ç®¡ç†å’Œè§¦å‘ã€‚æ—¶é—´è½®ç®—æ³•åˆ©ç”¨çº¿ç¨‹èµ„æºå®ç°æ‰¹é‡åŒ–è°ƒåº¦ï¼Œä½¿å¾—å»¶è¿Ÿä»»åŠ¡å’Œå‘¨æœŸæ€§ä»»åŠ¡èƒ½å¤Ÿé«˜æ•ˆåœ°è¿›è¡Œè°ƒåº¦å’Œæ‰§è¡Œã€‚</p><p>æ—¶é—´è½®çš„å·¥ä½œåŸç†å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªç¯å½¢çš„æ•°æ®ç»“æ„ï¼ŒåŒ…å«å¤šä¸ªæ§½(slot)ï¼Œæ¯ä¸ªæ§½åˆåŒ…å«ä¸€ä¸ªä»»åŠ¡é“¾è¡¨ã€‚æ—¶é—´è½®æŒ‰ç…§ä¸€å®šçš„æ—¶é—´é—´éš”ï¼ˆä¾‹å¦‚1ç§’ï¼‰ä¸æ–­åœ°è¿›è¡Œè½¬åŠ¨ï¼Œå½“æ—¶é—´è½®çš„æŒ‡é’ˆæŒ‡å‘æŸä¸ªæ§½æ—¶ï¼Œå°±è§¦å‘è¯¥æ§½ä¸­çš„æ‰€æœ‰ä»»åŠ¡ã€‚ä»»åŠ¡é“¾è¡¨ä¸­çš„ä»»åŠ¡å¯ä»¥æ ¹æ®è‡ªèº«çš„å®šæ—¶è§„åˆ™è¿›è¡Œè§¦å‘ï¼Œä¾‹å¦‚å»¶è¿Ÿä¸€æ®µæ—¶é—´åæ‰§è¡Œæˆ–åœ¨æŒ‡å®šçš„æ—¶é—´ç‚¹æ‰§è¡Œã€‚</p><p>æ—¶é—´è½®çš„å®ç°æ–¹å¼æœ‰å¤šç§ï¼Œä¸€ç§å¸¸è§çš„æ–¹å¼æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨å’Œé“¾è¡¨æ¥å®ç°ã€‚å“ˆå¸Œè¡¨ç”¨äºå°†ä»»åŠ¡æŒ‰ç…§å…¶è§¦å‘æ—¶é—´è¿›è¡Œç´¢å¼•ï¼Œè€Œé“¾è¡¨ç”¨äºå­˜å‚¨å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œä¿¡æ¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ—¶é—´è½®èƒ½å¤Ÿå¿«é€Ÿåœ°æ‰¾åˆ°éœ€è¦è§¦å‘çš„ä»»åŠ¡ï¼Œå¹¶æŒ‰ç…§é¢„æœŸçš„æ—¶é—´é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚</p><p>æ—¶é—´è½®ç®—æ³•å…·æœ‰è¾ƒé«˜çš„æ€§èƒ½å’Œæ‰©å±•æ€§ï¼Œé€‚ç”¨äºå»¶è¿Ÿä»»åŠ¡å’Œå‘¨æœŸæ€§ä»»åŠ¡çš„è°ƒåº¦ã€‚å®ƒåœ¨å®é™…åº”ç”¨ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œä¾‹å¦‚å®šæ—¶å™¨ã€ç½‘ç»œæ¡†æ¶ã€æ¶ˆæ¯å¼•æ“ç­‰é¢†åŸŸã€‚</p><h3 id="linuxå†…å­˜ä¸­çš„-reserver-commitedä»£è¡¨ä»€ä¹ˆæ„æ€-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#linuxå†…å­˜ä¸­çš„-reserver-commitedä»£è¡¨ä»€ä¹ˆæ„æ€-2023-å¿«æ‰‹" aria-hidden="true">#</a> linuxå†…å­˜ä¸­çš„ reserver ï¼Œcommitedä»£è¡¨ä»€ä¹ˆæ„æ€ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>&quot;reserved&quot;æ˜¯æŒ‡åœ¨Linuxç³»ç»Ÿä¸­ï¼Œä¸€éƒ¨åˆ†å†…å­˜è¢«ä¿ç•™èµ·æ¥å¹¶ä¸è¢«åˆ†é…ç»™åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚è¿™éƒ¨åˆ†å†…å­˜æ˜¯ç”±å†…æ ¸ä¿ç•™çš„ï¼Œä¸€èˆ¬æ— æ³•é€šè¿‡æ™®é€šçš„åº”ç”¨ç¨‹åºè®¿é—®åˆ°ã€‚ä¿ç•™å†…å­˜å¯ä»¥åŒ…æ‹¬ä¸€äº›ç‰¹æ®Šç”¨é€”çš„å†…å­˜åŒºåŸŸï¼Œä¾‹å¦‚ä¸“é—¨ç”¨äºè™šæ‹ŸåŒ–æˆ–ç³»ç»ŸæœåŠ¡çš„é¢„ç•™å†…å­˜åŒºåŸŸã€‚</p><p>&quot;committed&quot;ä»£è¡¨å·²åˆ†é…çš„å†…å­˜ï¼Œå³å·²ç»ç”±è¿›ç¨‹ç”³è¯·å¹¶ç”±å†…æ ¸åˆ†é…çš„å†…å­˜ç©ºé—´ã€‚è¿™å—å†…å­˜å·²ç»åœ¨é¡µè¡¨ä¸­æœ‰äº†è®°å½•ï¼Œä¿è¯äº†å…¶ä»–è¿›ç¨‹ä¸ä¼šè¢«å ç”¨ã€‚åœ¨Javaä¸­ï¼Œ&quot;committed&quot;ä¹Ÿå¯ä»¥è¡¨ç¤ºé€šè¿‡mmaped PROT_NONEæ–¹å¼ç”³è¯·çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå·²åœ¨é¡µè¡¨ä¸­æœ‰å¯¹åº”è®°å½•ã€‚</p><h3 id="javaçº¿ç¨‹å‡ ç§çŠ¶æ€-linuxè¿›ç¨‹å‡ ç§çŠ¶æ€-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#javaçº¿ç¨‹å‡ ç§çŠ¶æ€-linuxè¿›ç¨‹å‡ ç§çŠ¶æ€-2023-å¿«æ‰‹" aria-hidden="true">#</a> Javaçº¿ç¨‹å‡ ç§çŠ¶æ€ï¼Ÿlinuxè¿›ç¨‹å‡ ç§çŠ¶æ€ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>Javaçº¿ç¨‹çš„çŠ¶æ€æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><strong>æ–°å»ºçŠ¶æ€ (NEW)</strong>: å½“åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡åï¼Œå³å¤„äºè¿™ç§çŠ¶æ€ï¼Œä¾‹å¦‚ï¼š<code>Thread t = new Thread()</code></li><li><strong>å°±ç»ªçŠ¶æ€ (RUNNABLE)</strong>: å½“è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ <code>start()</code> æ–¹æ³•ï¼Œçº¿ç¨‹å³å¤„äºå°±ç»ªçŠ¶æ€ã€‚æ­¤æ—¶ï¼Œå®ƒå·²åŠ å…¥åˆ°è°ƒåº¦é˜Ÿåˆ—ï¼Œç­‰å¾…è·å–CPUçš„æ‰§è¡Œæƒã€‚</li><li><strong>è¿è¡ŒçŠ¶æ€ (RUNNING)</strong>: çº¿ç¨‹è·å–CPUçš„æ‰§è¡Œæƒåï¼Œå³å¤„äºè¿è¡ŒçŠ¶æ€ã€‚</li><li><strong>é˜»å¡çŠ¶æ€ (BLOCKED)</strong>: å½“çº¿ç¨‹ç­‰å¾…é”æ—¶è¿›å…¥é˜»å¡çŠ¶æ€ã€‚</li><li><strong>ç­‰å¾…çŠ¶æ€ (WAITING)</strong>: å½“çº¿ç¨‹è°ƒç”¨ <code>Object.wait()</code>, <code>Thread.join()</code> æˆ– <code>LockSupport.park()</code> æ—¶ï¼Œå®ƒä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚</li><li><strong>è¶…æ—¶ç­‰å¾…çŠ¶æ€ (TIMED_WAITING)</strong>: å½“çº¿ç¨‹è°ƒç”¨æœ‰è¶…æ—¶å‚æ•°çš„æ–¹æ³•å¦‚ <code>Thread.sleep(long millis)</code>, <code>Object.wait(long timeout)</code>, æˆ– <code>Thread.join(long millis)</code> æ—¶ï¼Œå®ƒä¼šè¿›å…¥è¶…æ—¶ç­‰å¾…çŠ¶æ€ã€‚</li><li><strong>ç»ˆæ­¢çŠ¶æ€ (TERMINATED)</strong>: çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æˆ–è€…å› å¼‚å¸¸ç»ˆæ­¢ã€‚</li></ol><p>Linuxè¿›ç¨‹çš„çŠ¶æ€æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><strong>è¿è¡Œ (Running)</strong>: è¿›ç¨‹æ­£åœ¨è¿è¡Œæˆ–åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…è¿è¡Œã€‚</li><li><strong>ä¸­æ–­ (Interruptible sleep)</strong>: è¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªæ¡ä»¶çš„å‡ºç°ã€‚</li><li><strong>ä¸ä¸­æ–­ (Uninterruptible sleep)</strong>: è¿›ç¨‹åœ¨ç­‰å¾…æŸäº›ç‰¹å®šçš„äº‹ä»¶ï¼Œæ­¤æ—¶ä¸èƒ½è¢«ä¸­æ–­ã€‚</li><li><strong>åƒµå°¸ (Zombie)</strong>: è¿›ç¨‹å·²ç»ˆæ­¢ï¼Œä½†æ˜¯çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰è·å–å…¶ç»ˆæ­¢çŠ¶æ€ã€‚</li><li><strong>åœæ­¢ (Stopped)</strong>: è¿›ç¨‹å·²åœæ­¢ï¼Œé€šå¸¸æ˜¯å› ä¸ºå®ƒæ¥æ”¶åˆ°ä¸€ä¸ª<code>SIGSTOP</code>, <code>SIGTSTP</code>, <code>SIGTTIN</code> æˆ– <code>SIGTTOU</code> ä¿¡å·ã€‚</li><li><strong>è¿½è¸ª (Traced or Paged)</strong>: è¿›ç¨‹å› è°ƒè¯•è€Œè¢«åœæ­¢ã€‚</li></ol><h2 id="ğŸ§©-æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ğŸ§©-æ•°æ®ç»“æ„" aria-hidden="true">#</a> ğŸ§© æ•°æ®ç»“æ„</h2><h3 id="çº¢é»‘æ ‘è¯´ä¸€ä¸‹-è·³è¡¨è¯´ä¸€ä¸‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#çº¢é»‘æ ‘è¯´ä¸€ä¸‹-è·³è¡¨è¯´ä¸€ä¸‹-2023-ç¾å›¢" aria-hidden="true">#</a> çº¢é»‘æ ‘è¯´ä¸€ä¸‹ï¼Œè·³è¡¨è¯´ä¸€ä¸‹ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>çº¢é»‘æ ‘ï¼ˆRed-Black Treeï¼‰æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒåœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œåèƒ½å¤Ÿé€šè¿‡æ—‹è½¬å’Œé‡æ–°ç€è‰²æ¥ä¿æŒæ ‘çš„å¹³è¡¡ã€‚çº¢é»‘æ ‘çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªé¢œè‰²ï¼Œçº¢è‰²æˆ–é»‘è‰²ã€‚</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ã€‚</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILèŠ‚ç‚¹ï¼‰éƒ½æ˜¯é»‘è‰²çš„ã€‚</li><li>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ã€‚</li><li>ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹æˆ–ç©ºå­èŠ‚ç‚¹çš„æ¯æ¡è·¯å¾„ä¸Šï¼Œé»‘è‰²èŠ‚ç‚¹çš„æ•°é‡æ˜¯ç›¸åŒçš„ã€‚</li></ol><p>çº¢é»‘æ ‘é€šè¿‡è¿™äº›ç‰¹æ€§æ¥ä¿æŒæ ‘çš„å¹³è¡¡ï¼Œç¡®ä¿æœ€é•¿è·¯å¾„ä¸è¶…è¿‡æœ€çŸ­è·¯å¾„çš„ä¸¤å€ï¼Œä»è€Œä¿è¯äº†åœ¨æœ€åæƒ…å†µä¸‹çš„æœç´¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(logN)ã€‚</p><figure><img src="'+O+'" alt="red-black-tree" tabindex="0" loading="lazy"><figcaption>red-black-tree</figcaption></figure><p>è·³è¡¨ï¼ˆSkip Listï¼‰æ˜¯ä¸€ç§åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒé€šè¿‡æ·»åŠ å¤šå±‚ç´¢å¼•æ¥åŠ é€Ÿæœç´¢æ“ä½œã€‚</p><figure><img src="'+N+'" alt="sorted-sets-skiplist" tabindex="0" loading="lazy"><figcaption>sorted-sets-skiplist</figcaption></figure><p>è·³è¡¨çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>è·³è¡¨ä¸­çš„æ•°æ®æ˜¯æœ‰åºçš„ã€‚</li><li>è·³è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€å±‚å’Œå³ä¾§èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</li></ol><p>è·³è¡¨é€šè¿‡å¤šå±‚ç´¢å¼•çš„æ–¹å¼æ¥åŠ é€Ÿæœç´¢æ“ä½œã€‚æœ€åº•å±‚æ˜¯ä¸€ä¸ªæ™®é€šçš„æœ‰åºé“¾è¡¨ï¼Œè€Œä¸Šé¢çš„æ¯ä¸€å±‚éƒ½æ˜¯å‰ä¸€å±‚çš„å­é›†ï¼Œæ¯ä¸ªèŠ‚ç‚¹åœ¨ä¸Šä¸€å±‚éƒ½æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å®ƒåœ¨ä¸‹ä¸€å±‚çš„å¯¹åº”èŠ‚ç‚¹ã€‚è¿™æ ·ï¼Œåœ¨æœç´¢æ—¶å¯ä»¥é€šè¿‡è·³è¿‡ä¸€äº›èŠ‚ç‚¹ï¼Œç›´æ¥è¿›å…¥ç›®æ ‡åŒºåŸŸï¼Œä»è€Œå‡å°‘æœç´¢çš„æ—¶é—´å¤æ‚åº¦ã€‚</p><p>è·³è¡¨çš„å¹³å‡æœç´¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(logN)ï¼Œä¸çº¢é»‘æ ‘ç›¸æ¯”ï¼Œè·³è¡¨çš„å®ç°æ›´åŠ ç®€å•ï¼Œä½†ç©ºé—´å¤æ‚åº¦ç¨é«˜ã€‚è·³è¡¨å¸¸ç”¨äºéœ€è¦é«˜æ•ˆæœç´¢å’Œæ’å…¥æ“ä½œçš„åœºæ™¯ï¼Œå¦‚æ•°æ®åº“ã€ç¼“å­˜ç­‰ã€‚</p><p>åœºæ™¯ï¼š</p><ul><li>epoll ç”¨äº†çº¢é»‘æ ‘æ¥ä¿å­˜ç›‘å¬çš„ socket</li><li>redis ç”¨äº†è·³è¡¨æ¥å®ç° zset</li></ul><h3 id="å¹³è¡¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘çš„æ¦‚å¿µå’ŒåŒºåˆ«-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#å¹³è¡¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘çš„æ¦‚å¿µå’ŒåŒºåˆ«-2023-å½±çŸ³360" aria-hidden="true">#</a> å¹³è¡¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘çš„æ¦‚å¿µå’ŒåŒºåˆ«ï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><h4 id="å¹³è¡¡äºŒå‰æ ‘" tabindex="-1"><a class="header-anchor" href="#å¹³è¡¡äºŒå‰æ ‘" aria-hidden="true">#</a> å¹³è¡¡äºŒå‰æ ‘</h4><p>å¹³è¡¡äºŒå‰æ ‘æ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æœç´¢æ ‘ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®æœ€å¤šä¸ºä¸€ã€‚è¿™ç§å¹³è¡¡ä¿è¯äº†æ ‘çš„é«˜åº¦å¤§è‡´ä¿æŒåœ¨ log(n)ï¼Œå…¶ä¸­ n æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡ã€‚è¿™ç§å¹³è¡¡å¯ä»¥ç¡®ä¿åœ¨äºŒå‰æœç´¢æ ‘ä¸Šçš„æ“ä½œï¼ˆå¦‚æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ï¼‰çš„æ—¶é—´å¤æ‚åº¦ä¸º O(log n)ã€‚AVLæ ‘å’Œçº¢é»‘æ ‘éƒ½æ˜¯å¹³è¡¡äºŒå‰æ ‘çš„ä¾‹å­ã€‚</p><h4 id="å®Œå…¨äºŒå‰æ ‘" tabindex="-1"><a class="header-anchor" href="#å®Œå…¨äºŒå‰æ ‘" aria-hidden="true">#</a> å®Œå…¨äºŒå‰æ ‘</h4><p>å®Œå…¨äºŒå‰æ ‘æ˜¯ä¸€ç§äºŒå‰æ ‘ï¼Œå…¶ä¸­é™¤äº†æœ€åº•å±‚å¤–ï¼Œå…¶ä»–æ‰€æœ‰å±‚éƒ½è¢«å®Œå…¨å¡«å……ï¼Œå¹¶ä¸”æ‰€æœ‰èŠ‚ç‚¹éƒ½å°½å¯èƒ½å‘å·¦èšé›†ã€‚åœ¨å®è·µä¸­ï¼Œå®Œå…¨äºŒå‰æ ‘ä¸»è¦ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—å’Œå †ç»“æ„ã€‚</p><h4 id="åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#åŒºåˆ«" aria-hidden="true">#</a> åŒºåˆ«</h4><ol><li>å¹³è¡¡æ€§ï¼šå¹³è¡¡äºŒå‰æ ‘è¦æ±‚æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®æœ€å¤šä¸º1ï¼Œè€Œå®Œå…¨äºŒå‰æ ‘æ²¡æœ‰è¿™æ ·çš„è¦æ±‚ã€‚</li><li>å®Œæ•´æ€§ï¼šå®Œå…¨äºŒå‰æ ‘è¦æ±‚é™¤äº†æœ€åº•å±‚å¤–ï¼Œå…¶ä»–æ‰€æœ‰å±‚éƒ½è¢«å®Œå…¨å¡«å……ï¼Œå¹¶ä¸”æ‰€æœ‰èŠ‚ç‚¹éƒ½å°½å¯èƒ½å‘å·¦èšé›†ã€‚å¹³è¡¡äºŒå‰æ ‘æ²¡æœ‰è¿™æ ·çš„è¦æ±‚ã€‚</li><li>ç”¨é€”ï¼šå¹³è¡¡äºŒå‰æ ‘å¸¸ç”¨äºå®ç°é«˜æ•ˆçš„æœç´¢æ“ä½œï¼Œå› ä¸ºå®ƒä»¬çš„é«˜åº¦å¤§è‡´æ˜¯ log(n)ï¼Œä¿è¯äº†æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(log n)ã€‚è€Œå®Œå…¨äºŒå‰æ ‘ä¸»è¦ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—å’Œå †ã€‚</li><li>ç»“æ„ï¼šå¹³è¡¡äºŒå‰æ ‘åœ¨æ’å…¥å’Œåˆ é™¤åï¼Œå¯èƒ½éœ€è¦é€šè¿‡æ—‹è½¬æ“ä½œæ¥é‡æ–°å¹³è¡¡ã€‚è€Œå®Œå…¨äºŒå‰æ ‘åœ¨æ’å…¥å’Œåˆ é™¤åï¼Œé€šè¿‡ä¸Šæµ®ï¼ˆupheapï¼‰æˆ–ä¸‹æ²‰ï¼ˆdownheapï¼‰æ“ä½œæ¥ä¿æŒå…¶å®Œæ•´æ€§ã€‚</li></ol><h3 id="æœ‰äº†è§£è¿‡å“ˆå¸Œè¡¨å—-å“ˆå¸Œè¡¨å¦‚ä½•è§£å†³å†²çª-2023-å½±çŸ³360" tabindex="-1"><a class="header-anchor" href="#æœ‰äº†è§£è¿‡å“ˆå¸Œè¡¨å—-å“ˆå¸Œè¡¨å¦‚ä½•è§£å†³å†²çª-2023-å½±çŸ³360" aria-hidden="true">#</a> æœ‰äº†è§£è¿‡å“ˆå¸Œè¡¨å—ï¼Ÿå“ˆå¸Œè¡¨å¦‚ä½•è§£å†³å†²çªï¼Ÿï¼ˆ2023 å½±çŸ³360ï¼‰</h3><h4 id="å“ˆå¸Œè¡¨" tabindex="-1"><a class="header-anchor" href="#å“ˆå¸Œè¡¨" aria-hidden="true">#</a> å“ˆå¸Œè¡¨</h4><p>å“ˆå¸Œè¡¨ï¼ˆä¹Ÿç§°ä¸ºå“ˆå¸Œæ˜ å°„ï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå®ç°äº†å…³è”æ•°ç»„æŠ½è±¡æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å°†é”®æ˜ å°„åˆ°å€¼ã€‚å“ˆå¸Œè¡¨ä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†é”®ï¼ˆä¹Ÿç§°ä¸ºå“ˆå¸Œé”®ï¼‰è½¬æ¢ä¸ºæ•°ç»„çš„ç´¢å¼•ï¼šå¦‚æœä¸¤ä¸ªé”®æ˜ å°„åˆ°äº†åŒä¸€ä¸ªç´¢å¼•ï¼Œåˆ™äº§ç”Ÿäº†å†²çªã€‚å“ˆå¸Œè¡¨çš„ä¸»è¦ä¼˜ç‚¹æ˜¯æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤çš„å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p><h4 id="å†²çªè§£å†³" tabindex="-1"><a class="header-anchor" href="#å†²çªè§£å†³" aria-hidden="true">#</a> å†²çªè§£å†³</h4><p>å“ˆå¸Œè¡¨çš„å†²çªè§£å†³ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æŠ€æœ¯ï¼š</p><ol><li><strong>å¼€æ”¾å¯»å€æ³•</strong>ï¼šå½“å“ˆå¸Œå‡½æ•°å¯¼è‡´å†²çªæ—¶ï¼Œå¼€æ”¾å¯»å€æ³•ä¼šå¯»æ‰¾å…¶ä»–æœªè¢«ä½¿ç”¨çš„å“ˆå¸Œåœ°å€ã€‚å¸¸è§çš„å¼€æ”¾å¯»å€æ³•æœ‰çº¿æ€§æ¢æŸ¥ã€äºŒæ¬¡æ¢æŸ¥å’ŒåŒé‡å“ˆå¸Œç­‰ã€‚è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªä¸»è¦æŒ‘æˆ˜æ˜¯å¤„ç†â€œèšé›†â€é—®é¢˜ï¼Œå³å†²çªçš„å“ˆå¸Œé”®èšé›†åœ¨å“ˆå¸Œè¡¨çš„æŸäº›åŒºåŸŸï¼Œå¯¼è‡´æŸ¥æ‰¾æ—¶é—´çš„å¢åŠ ã€‚</li><li><strong>é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼‰</strong>ï¼šæ¯ä¸€ä¸ªå“ˆå¸Œåœ°å€å¯¹åº”ä¸€æ¡é“¾è¡¨ï¼Œæ‰€æœ‰æ˜ å°„åˆ°åŒä¸€å“ˆå¸Œåœ°å€çš„é”®éƒ½å­˜å‚¨åœ¨è¿™æ¡é“¾è¡¨ä¸­ã€‚å½“å†²çªå‘ç”Ÿæ—¶ï¼Œåªéœ€åœ¨ç›¸åº”çš„é“¾è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€æ’å…¥æˆ–åˆ é™¤æ“ä½œã€‚è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªä¸»è¦æŒ‘æˆ˜æ˜¯å¦‚æœå†²çªå¤ªå¤šï¼Œé“¾è¡¨å¯èƒ½ä¼šå˜å¾—å¾ˆé•¿ï¼Œå¯¼è‡´æŸ¥æ‰¾æ—¶é—´çš„å¢åŠ ã€‚</li></ol><h3 id="nogoç®—æ³•-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#nogoç®—æ³•-2023-å¿«æ‰‹" aria-hidden="true">#</a> nogoç®—æ³•ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3>',102),ne={href:"https://github.com/huawei-noah/vega/blob/master/docs/en/algorithms/nago.md%EF%BC%8Chttps://github.com/rubinxin/vega_NAGO",target:"_blank",rel:"noopener noreferrer"},se={href:"https://zhuanlan.zhihu.com/p/32265502?utm_id=0",target:"_blank",rel:"noopener noreferrer"},ae=t(`<h2 id="ğŸ¨-è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ğŸ¨-è®¾è®¡æ¨¡å¼" aria-hidden="true">#</a> ğŸ¨ è®¾è®¡æ¨¡å¼</h2><h3 id="é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><ul><li><strong>é€‚é…å™¨æ¨¡å¼</strong>ï¼šé€‚é…å™¨æ¨¡å¼å°±åƒæ˜¯ä¸€ä¸ªç”µæºé€‚é…å™¨ï¼Œå®ƒå…è®¸ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£å¯ä»¥ä¸€èµ·å·¥ä½œã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç±»çš„æ¥å£ä¸å®¢æˆ·ç«¯ä»£ç éœ€è¦çš„æ¥å£ä¸ä¸€è‡´æ—¶ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªé€‚é…å™¨ç±»æ¥è½¬æ¢æ¥å£ï¼Œä½¿å¾—å®¢æˆ·ç«¯ä»£ç èƒ½å¤Ÿåˆ©ç”¨ç°æœ‰çš„ç±»ã€‚</li><li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼šè£…é¥°å™¨æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°å‘å¯¹è±¡æ·»åŠ é¢å¤–çš„èŒè´£ï¼Œè€Œä¸æ”¹å˜å…¶å®ç°ã€‚è£…é¥°å™¨å°è£…äº†ä¸€ä¸ªç±»ï¼Œå¹¶æä¾›å’Œè¯¥ç±»ç›¸åŒçš„æ¥å£ï¼Œä½†åœ¨è°ƒç”¨å…¶æ–¹æ³•æ—¶ï¼Œå¯ä»¥é¢å¤–æ‰§è¡Œä¸€äº›æ“ä½œã€‚è£…é¥°å™¨å¯ä»¥è¢«æ— é™åœ°å †å ï¼Œæ¯ä¸ªè£…é¥°å™¨éƒ½æ·»åŠ ä¸€äº›é¢å¤–çš„è¡Œä¸ºã€‚</li><li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šä»£ç†æ¨¡å¼åœ¨ä¸æ”¹å˜æ¥å£çš„å‰æä¸‹ï¼Œä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†æˆ–å ä½ç¬¦ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ä»£ç†å¯ä»¥ç”¨äºè®¸å¤šä¸åŒçš„ç›®çš„ï¼Œå¦‚å®‰å…¨æ§åˆ¶ã€å¤æ‚æ€§éšè—ã€å»¶è¿ŸåŠ è½½ç­‰ã€‚ä»£ç†é€šå¸¸æ§åˆ¶å¯¹å…¶å§”æ‰˜å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶å¯èƒ½é€‰æ‹©åˆ›å»ºæˆ–åˆ é™¤å®ƒã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œé€‚é…å™¨æ¨¡å¼ç”¨äºè®©ä¸å…¼å®¹çš„æ¥å£èƒ½å¤Ÿä¸€èµ·å·¥ä½œï¼Œè£…é¥°å™¨æ¨¡å¼ç”¨äºåŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼Œä»£ç†æ¨¡å¼ç”¨äºæ§åˆ¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p><h2 id="ğŸ–¼ï¸-åœºæ™¯é¢˜" tabindex="-1"><a class="header-anchor" href="#ğŸ–¼ï¸-åœºæ™¯é¢˜" aria-hidden="true">#</a> ğŸ–¼ï¸ åœºæ™¯é¢˜</h2><h3 id="java-ç¨‹åºè¿è¡Œäº†ä¸€å‘¨-å‘ç°è€å¹´ä»£å†…å­˜æº¢å‡º-åˆ†æä¸€ä¸‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#java-ç¨‹åºè¿è¡Œäº†ä¸€å‘¨-å‘ç°è€å¹´ä»£å†…å­˜æº¢å‡º-åˆ†æä¸€ä¸‹-2023-ç¾å›¢" aria-hidden="true">#</a> Java ç¨‹åºè¿è¡Œäº†ä¸€å‘¨ï¼Œå‘ç°è€å¹´ä»£å†…å­˜æº¢å‡ºï¼Œåˆ†æä¸€ä¸‹ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>è€å¹´ä»£å†…å­˜æº¢å‡ºè¡¨ç°ä¸ºjava.lang.OutOfMemoryError: Java heap spaceï¼Œé€šå¸¸æ˜¯å› ä¸ºJavaå †å†…å­˜ä¸­é•¿æœŸå­˜æ´»çš„å¯¹è±¡å ç”¨çš„ç©ºé—´è¿‡å¤§ï¼Œå¯¼è‡´å†…å­˜æ— æ³•åˆ†é…ã€‚ä¸‹é¢ä»æµ…å…¥æ·±åˆ†æå¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ³•</p><ol><li><strong>å †å†…å­˜è®¾ç½®ä¸åˆç†</strong> é¦–å…ˆæ£€æŸ¥Javaå †å†…å­˜çš„é…ç½®æ˜¯å¦åˆé€‚ã€‚é€šè¿‡-Xmxå’Œ-Xmså‚æ•°è®¾ç½®å †å†…å­˜çš„æœ€å¤§å€¼å’Œåˆå§‹å€¼ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®æˆ–è®¾ç½®è¿‡å°ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚å’Œç¡¬ä»¶æ¡ä»¶é€‚å½“è°ƒæ•´è¿™ä¸¤ä¸ªå‚æ•°çš„å¤§å°ã€‚</li><li><strong>é•¿æœŸå­˜æ´»å¯¹è±¡è¿‡å¤š</strong> æ£€æŸ¥ç¨‹åºä¸­æ˜¯å¦å­˜åœ¨å¤§é‡çš„é•¿æœŸå­˜æ´»å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡ä¼šå¯¼è‡´è€å¹´ä»£ç©ºé—´ä¸è¶³ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•è§£å†³ï¼š</li></ol><ul><li>ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘é•¿æœŸå­˜æ´»å¯¹è±¡çš„æ•°é‡ã€‚</li><li>ä½¿ç”¨ç¼“å­˜ç­–ç•¥ï¼Œå¦‚LRUç®—æ³•ï¼Œé™åˆ¶ç¼“å­˜å¯¹è±¡çš„æ•°é‡ã€‚</li><li>ä½¿ç”¨å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ï¼Œä½¿å¾—åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚</li></ul><ol start="3"><li><strong>å†…å­˜æ³„æ¼</strong> å†…å­˜æ³„æ¼æ˜¯æŒ‡ç¨‹åºä¸­é”™è¯¯åœ°æŒæœ‰äº†ä¸å†éœ€è¦çš„å¯¹è±¡å¼•ç”¨ï¼Œå¯¼è‡´è¿™äº›å¯¹è±¡æ— æ³•è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚éœ€è¦æ£€æŸ¥ä»£ç ï¼Œæ’æŸ¥å¯èƒ½çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚ä»¥ä¸‹å‡ ç§åœºæ™¯å®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼ï¼š</li></ol><ul><li>é™æ€é›†åˆç±»ï¼ˆå¦‚HashMapã€ArrayListç­‰ï¼‰ä¸­çš„å¯¹è±¡æ²¡æœ‰è¢«ç§»é™¤ã€‚</li><li>ç›‘å¬å™¨æˆ–å›è°ƒæ²¡æœ‰è¢«æ­£ç¡®æ³¨é”€ã€‚</li><li>çº¿ç¨‹æ± æˆ–æ•°æ®åº“è¿æ¥æ± æ²¡æœ‰æ­£ç¡®å…³é—­ã€‚</li></ul><ol start="4"><li><strong>ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·</strong> ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·ï¼ˆå¦‚VisualVMã€MATç­‰ï¼‰å¯¹ç¨‹åºè¿›è¡Œå†…å­˜åˆ†æï¼Œæ‰¾å‡ºå†…å­˜å ç”¨çš„ç“¶é¢ˆå’Œå†…å­˜æ³„æ¼çš„åœ°æ–¹ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</li></ol><ul><li>è·å–å †å†…å­˜å¿«ç…§ï¼ˆHeap Dumpï¼‰ã€‚</li><li>åˆ†æå¿«ç…§ï¼Œæ‰¾å‡ºå†…å­˜å ç”¨æœ€å¤§çš„å¯¹è±¡ã€‚</li><li>åˆ†æå¯¹è±¡çš„å¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæŒæœ‰è¿™äº›å¯¹è±¡å¼•ç”¨çš„åœ°æ–¹ã€‚</li><li>æ ¹æ®åˆ†æç»“æœï¼Œä¿®æ”¹ä»£ç ï¼Œè§£å†³å†…å­˜é—®é¢˜ã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå‘ç”Ÿè€å¹´ä»£å†…å­˜æº¢å‡ºæ—¶ï¼Œå¯ä»¥ä»è®¾ç½®åˆç†çš„å †å†…å­˜å¤§å°ã€ä¼˜åŒ–ä»£ç å‡å°‘é•¿æœŸå­˜æ´»å¯¹è±¡ã€æ’æŸ¥å†…å­˜æ³„æ¼ã€ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·å’Œåƒåœ¾å›æ”¶å™¨è°ƒä¼˜ç­‰æ–¹é¢å…¥æ‰‹ï¼Œå…¨é¢åˆ†æå’Œè§£å†³é—®é¢˜ã€‚</p><h3 id="å¦‚æœæ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯-5-å·²ç»å¯åŠ¨-4-ä¸ªä»»åŠ¡-åé¢åˆè¿›æ¥-1-ä¸ª-æ˜¯ä¼˜å…ˆå¤ç”¨å‰é¢å››ä¸ªä»»åŠ¡ä¸­çš„ç©ºé—²çº¿ç¨‹è¿˜æ˜¯é‡æ–°åˆ›å»ºæ–°çº¿ç¨‹-2023-å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#å¦‚æœæ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯-5-å·²ç»å¯åŠ¨-4-ä¸ªä»»åŠ¡-åé¢åˆè¿›æ¥-1-ä¸ª-æ˜¯ä¼˜å…ˆå¤ç”¨å‰é¢å››ä¸ªä»»åŠ¡ä¸­çš„ç©ºé—²çº¿ç¨‹è¿˜æ˜¯é‡æ–°åˆ›å»ºæ–°çº¿ç¨‹-2023-å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> å¦‚æœæ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯ 5ï¼Œå·²ç»å¯åŠ¨ 4 ä¸ªä»»åŠ¡ï¼Œåé¢åˆè¿›æ¥ 1 ä¸ªï¼Œæ˜¯ä¼˜å…ˆå¤ç”¨å‰é¢å››ä¸ªä»»åŠ¡ä¸­çš„ç©ºé—²çº¿ç¨‹è¿˜æ˜¯é‡æ–°åˆ›å»ºæ–°çº¿ç¨‹ï¼ˆ2023 å®Œç¾ä¸–ç•Œï¼‰</h3><blockquote><p>çº¿ç¨‹æ± æ˜¯ä¸ºäº†é™åˆ¶ç³»ç»Ÿä¸­æ‰§è¡Œçº¿ç¨‹çš„æ•°é‡ã€‚æ ¹æ®ç³»ç»Ÿçš„ä»»åŠ¡è´Ÿè½½å’Œèµ„æºå®¹é‡ï¼Œçº¿ç¨‹æ± å¯ä»¥çµæ´»åœ°è°ƒæ•´çº¿ç¨‹çš„æ•°é‡ï¼Œä¼˜åŒ–çº¿ç¨‹çš„ç®¡ç†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯å¸¦æ¥çš„é¢å¤–å¼€é”€ã€‚</p></blockquote><p>è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå–å†³äºä½ ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆæ ·çš„çº¿ç¨‹æ± ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Javaçš„ThreadPoolExecutorçº¿ç¨‹æ± ï¼Œå…¶è¡Œä¸ºä¼šæŒ‰ç…§ä»¥ä¸‹è§„åˆ™ï¼š</p><ol><li>å¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡å°äºæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå³ä½¿çº¿ç¨‹æ± ä¸­å­˜åœ¨ç©ºé—²çº¿ç¨‹ï¼Œæ–°ä»»åŠ¡åˆ°æ¥ä¹Ÿä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹å¤„ç†ä»»åŠ¡ã€‚</li><li>åªæœ‰åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å·²ç»è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œä½†æ˜¯ä»»åŠ¡é˜Ÿåˆ—æœªæ»¡æ—¶ï¼Œæ–°ä»»åŠ¡ä¼šè¢«æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</li><li>å¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡ç­‰äºæœ€å¤§çº¿ç¨‹æ•°ä¸”ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œæ–°ä»»åŠ¡å°†ä¼šè¢«æ‹’ç»ã€‚ æ‰€ä»¥ï¼Œåœ¨ä½ æä¾›çš„è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœçº¿ç¨‹æ± ä½¿ç”¨çš„æ˜¯Javaçš„ThreadPoolExecutorï¼Œä¸”æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯5ï¼Œå·²ç»å¯åŠ¨4ä¸ªä»»åŠ¡ï¼Œåé¢åˆè¿›æ¥1ä¸ªä»»åŠ¡ï¼Œä¼šæ–°å¼€ä¸€ä¸ªçº¿ç¨‹å¤„ç†æ–°çš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯å¤ç”¨å‰é¢å››ä¸ªä»»åŠ¡ä¸­çš„ç©ºé—²çº¿ç¨‹ã€‚è¿™æ˜¯å› ä¸ºæ ¸å¿ƒçº¿ç¨‹æ•°æ²¡æœ‰è¢«ç”¨å®Œï¼Œçº¿ç¨‹æ± ä¼šä¼˜å…ˆåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚</li></ol><h3 id="å¦‚æœå¤§é‡è¯·æ±‚è¿›æ¥ä½ æ€ä¹ˆé™æµ-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¦‚æœå¤§é‡è¯·æ±‚è¿›æ¥ä½ æ€ä¹ˆé™æµ-2023-ç¾å›¢" aria-hidden="true">#</a> å¦‚æœå¤§é‡è¯·æ±‚è¿›æ¥ä½ æ€ä¹ˆé™æµï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>ä¸€äº›é€šç”¨çš„é™æµæ‰‹æ®µæ˜¯ï¼š</p><ol><li><strong>ä»¤ç‰Œæ¡¶</strong>ï¼šåœ¨ä»¤ç‰Œæ¡¶é™æµç­–ç•¥ä¸­ï¼Œç³»ç»Ÿæœ‰ä¸€ä¸ªä»¤ç‰Œæ¡¶ï¼Œæ¡¶ä¸­çš„ä»¤ç‰Œä»¥ä¸€å®šçš„é€Ÿç‡è¢«æ·»åŠ ã€‚å½“ä¸€ä¸ªæ–°çš„è¯·æ±‚åˆ°æ¥æ—¶ï¼Œç³»ç»Ÿä¼šä»æ¡¶ä¸­å–å‡ºä¸€ä¸ªä»¤ç‰Œã€‚å¦‚æœæ¡¶æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆæ–°çš„è¯·æ±‚å°±ä¼šè¢«æ‹’ç»ã€‚è¿™ç§ç­–ç•¥å…è®¸çªç„¶çš„å¤§é‡è¯·æ±‚ï¼Œåªè¦æ¡¶ä¸­æœ‰è¶³å¤Ÿçš„ä»¤ç‰Œã€‚åœ¨SpringCloudä¸­å¯ä»¥ä½¿ç”¨spring-boot-starter-data-redis-reactiveçš„ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œæ ¹æ®Spring Cloud Gatewayçš„å®¢æˆ·ç«¯å®é™…IPåœ°å€é™åˆ¶ä¼ å…¥è¯·æ±‚çš„é€Ÿç‡ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œå¯ä»¥åœ¨è·¯ç”±ä¸Šè®¾ç½®RequestRateLimiterè¿‡æ»¤å™¨ï¼Œç„¶åé…ç½®ç½‘å…³ä½¿ç”¨IPåœ°å€é™åˆ¶å”¯ä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ åœ¨Spring Cloudä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ•´åˆRedisä»¥åŠä½¿ç”¨Reactiveç¼–ç¨‹æ¨¡å¼æ¥å®ç°ä»¤ç‰Œæ¡¶ç®—æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æ­¥éª¤ï¼š</li></ol><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ç›¸å…³çš„ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis-reactive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä½ çš„Spring Cloud Gatewayåº”ç”¨ä¸­ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„GatewayFilterã€‚æ­¤è¿‡æ»¤å™¨å°†è´Ÿè´£æ£€æŸ¥æ¯ä¸ªè¯·æ±‚çš„IPåœ°å€ï¼Œå¹¶é™åˆ¶æ¯ä¸ªIPåœ°å€çš„è¯·æ±‚é€Ÿç‡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RateLimiterFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GatewayFilterFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RateLimiterFilter<span class="token punctuation">.</span>Config</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">RateLimiterService</span> rateLimiterService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RateLimiterFilter</span><span class="token punctuation">(</span><span class="token class-name">RateLimiterService</span> rateLimiterService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rateLimiterService <span class="token operator">=</span> rateLimiterService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">GatewayFilter</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">Config</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>exchange<span class="token punctuation">,</span> chain<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å–è¯·æ±‚çš„IPåœ°å€</span>
            <span class="token class-name">String</span> ipAddress <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rateLimiterService<span class="token punctuation">.</span><span class="token function">isAllowed</span><span class="token punctuation">(</span>ipAddress<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å¦‚æœè¶…è¿‡äº†é™åˆ¶ï¼Œè¿”å›429çŠ¶æ€ç ï¼ˆToo Many Requestsï¼‰</span>
                <span class="token keyword">return</span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ResponseStatusException</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">TOO_MANY_REQUESTS</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>
        <span class="token comment">// é…ç½®å±æ€§å¯ä»¥åœ¨è¿™é‡Œå®šä¹‰</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªRateLimiterServiceï¼Œåœ¨è¿™ä¸ªæœåŠ¡ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•å’ŒReactive Redisæ“ä½œå®ç°è¯·æ±‚é€Ÿç‡çš„é™åˆ¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RateLimiterService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReactiveStringRedisTemplate</span> redisTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RateLimiterService</span><span class="token punctuation">(</span><span class="token class-name">ReactiveStringRedisTemplate</span> redisTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>redisTemplate <span class="token operator">=</span> redisTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAllowed</span><span class="token punctuation">(</span><span class="token class-name">String</span> ipAddress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä½¿ç”¨Rediså’Œä»¤ç‰Œæ¡¶ç®—æ³•å®ç°é€Ÿç‡é™åˆ¶çš„é€»è¾‘</span>
        <span class="token comment">// è¿™ä¸ªéƒ¨åˆ†éœ€è¦æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚æ¥å®ç°</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œåœ¨ä½ çš„è·¯ç”±é…ç½®ä¸­ä½¿ç”¨è¿™ä¸ªè¿‡æ»¤å™¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">customRouteLocator</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">,</span> <span class="token class-name">RateLimiterFilter</span> rateLimiterFilter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span>r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/some-path/**&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-&gt;</span> f<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>rateLimiterFilter<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RateLimiterFilter<span class="token punctuation">.</span>Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;lb://some-service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>Sentinel é€šè¿‡æ³¨è§£ï¼ˆ@SentinelResourceï¼‰</strong> çš„æ–¹å¼å°†æŸä¸ªæ–¹æ³•æˆ–è€…èµ„æºæ ‡è®°ä¸ºå—ä¿æŠ¤çš„èµ„æºï¼Œç„¶åå¯ä»¥å¯¹è¿™äº›èµ„æºè®¾ç½®å„ç§è§„åˆ™ï¼Œæ¯”å¦‚ QPS é™æµï¼Œæ»‘åŠ¨çª—å£é™æµç­‰ã€‚</li></ol><p>ä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> blockHandler <span class="token operator">=</span> <span class="token string">&quot;exceptionHandler&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// your logic here</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œtest æ–¹æ³•è¢«æ ‡è®°ä¸ºå— Sentinel ä¿æŠ¤çš„èµ„æºï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨é¢‘ç‡è¶…è¿‡äº†è®¾å®šçš„é™åˆ¶ï¼ŒSentinel å°±ä¼šè°ƒç”¨ exceptionHandler æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p><ol start="3"><li>ä½¿ç”¨<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong> (MQ) è¿›è¡Œé™æµä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§çš„åšæ³•ã€‚é€šè¿‡å°†è¯·æ±‚æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç„¶åé€šè¿‡è°ƒæ•´å¤„ç†è¯·æ±‚çš„é€Ÿåº¦æ¥å®ç°é™æµã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ RabbitMQã€Kafka ç­‰æ¶ˆæ¯é˜Ÿåˆ—æŠ€æœ¯ï¼Œè¿™ç§æ–¹å¼ä¹Ÿå¯ä»¥èµ·åˆ°å¼‚æ­¥å¤„ç†çš„ä½œç”¨ï¼Œæé«˜ç³»ç»Ÿçš„ååé‡ã€‚</li></ol><h3 id="å†™-mq-æ—¶ç¨‹åºå®•æœºäº†æ€ä¹ˆåŠ-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å†™-mq-æ—¶ç¨‹åºå®•æœºäº†æ€ä¹ˆåŠ-2023-ç¾å›¢" aria-hidden="true">#</a> å†™ MQ æ—¶ç¨‹åºå®•æœºäº†æ€ä¹ˆåŠï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>å¦‚æœåœ¨ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰æ—¶ï¼Œç”Ÿäº§è€…ï¼ˆProducerï¼‰ç¨‹åºåœ¨å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—æ—¶å®•æœºï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šé¢ä¸´æ¶ˆæ¯ä¸¢å¤±çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯è¡Œçš„è§£å†³æ–¹æ¡ˆï¼š</p><ol><li><strong>æ¶ˆæ¯æŒä¹…åŒ–</strong>ï¼šå¤§å¤šæ•°æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿï¼ˆå¦‚RabbitMQï¼ŒKafkaï¼‰éƒ½æ”¯æŒæ¶ˆæ¯çš„æŒä¹…åŒ–ã€‚æŒä¹…åŒ–çš„æ¶ˆæ¯å³ä½¿åœ¨å®•æœºæƒ…å†µä¸‹ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œå› ä¸ºå®ƒä»¬è¢«å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚å½“æœåŠ¡å™¨æ¢å¤åï¼Œå¯ä»¥ç»§ç»­ä»å­˜å‚¨ä»‹è´¨ä¸Šè¯»å–å¹¶å¤„ç†è¿™äº›æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨æŒä¹…åŒ–ä¼šå¢åŠ ç³»ç»Ÿçš„å¼€é”€å¹¶å¯èƒ½å½±å“æ€§èƒ½ã€‚</li><li><strong>é«˜å¯ç”¨é…ç½®</strong>ï¼šé…ç½®é«˜å¯ç”¨é›†ç¾¤å¯ä»¥æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚å¯¹äºKafkaï¼Œå¯ä»¥é…ç½®å¤šä¸ªå‰¯æœ¬ï¼Œå½“æŸä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹å¯ä»¥ç»§ç»­æä¾›æœåŠ¡ã€‚RabbitMQ ä¹Ÿæ”¯æŒç±»ä¼¼çš„é•œåƒé˜Ÿåˆ—ï¼ˆMirrored Queuesï¼‰æœºåˆ¶ã€‚</li><li><strong>ç”Ÿäº§è€…ç¡®è®¤æœºåˆ¶</strong>ï¼šè®¸å¤šæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿæä¾›äº†ç”Ÿäº§è€…ç¡®è®¤ï¼ˆProducer Acknowledgmentsï¼‰æœºåˆ¶ï¼Œç”Ÿäº§è€…åªæœ‰åœ¨æ”¶åˆ°æ¶ˆæ¯å·²æˆåŠŸå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—çš„ç¡®è®¤åï¼Œæ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å·²æˆåŠŸå‘é€ã€‚è¿™æ ·ï¼Œå¦‚æœåœ¨å†™å…¥è¿‡ç¨‹ä¸­æœåŠ¡å™¨å®•æœºï¼Œç”Ÿäº§è€…çŸ¥é“æ¶ˆæ¯æ²¡æœ‰æˆåŠŸå‘é€ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æœåŠ¡å™¨æ¢å¤åé‡æ–°å‘é€ã€‚</li><li><strong>ä½¿ç”¨äº‹åŠ¡</strong>ï¼šå¦‚æœä½ çš„åº”ç”¨åœºæ™¯å…è®¸ï¼Œä½ å¯ä»¥ä½¿ç”¨äº‹åŠ¡æ¥ç¡®ä¿æ¶ˆæ¯çš„å®Œæ•´æ€§ã€‚åœ¨ä¸€æ¬¡äº‹åŠ¡ä¸­ï¼Œä½ å¯ä»¥å°†æ¶ˆæ¯çš„å‘é€å’Œä½ çš„ä¸šåŠ¡æ“ä½œæ”¾åœ¨ä¸€èµ·ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨äº‹åŠ¡ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å¯èƒ½å½±å“æ€§èƒ½ã€‚</li><li><strong>å¼‚æ­¥å†™å…¥ + æœ¬åœ°æ—¥å¿—</strong>ï¼šå¯¹äºéå¸¸å…³é”®çš„æ¶ˆæ¯ï¼Œå¯ä»¥é‡‡å–å¼‚æ­¥å†™å…¥+æœ¬åœ°æ—¥å¿—çš„æ–¹å¼ã€‚å…ˆå°†æ¶ˆæ¯å†™å…¥æœ¬åœ°æ—¥å¿—ï¼Œç„¶åå†å¼‚æ­¥å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚æœæ¶ˆæ¯é˜Ÿåˆ—å†™å…¥å¤±è´¥ï¼Œé€šè¿‡åå°è¿›ç¨‹é‡è¯•ï¼Œç›´åˆ°å†™å…¥æˆåŠŸã€‚</li></ol><p>åœ¨è®¾è®¡å’Œé€‰æ‹©æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦æ ¹æ®ä½ çš„åº”ç”¨çš„å…·ä½“éœ€æ±‚å’Œå¯æ¥å—çš„å¤æ‚æ€§è¿›è¡Œæƒè¡¡ã€‚ä¾‹å¦‚ï¼Œä½ éœ€è¦è€ƒè™‘ä½ çš„åº”ç”¨æ˜¯å¦èƒ½æ¥å—æ¶ˆæ¯çš„ä¸¢å¤±ï¼Œæ˜¯å¦éœ€è¦ä¿è¯æ¶ˆæ¯çš„é¡ºåºï¼Œä½ çš„ç³»ç»Ÿæ˜¯å¦èƒ½æ‰¿å—æŒä¹…åŒ–å’Œäº‹åŠ¡çš„å¼€é”€ï¼Œä»¥åŠä½ çš„ç³»ç»Ÿæ˜¯å¦æœ‰è¶³å¤Ÿçš„èµ„æºæ¥æ”¯æŒé«˜å¯ç”¨é…ç½®ã€‚</p><h3 id="ç§’æ€åœºæ™¯ä¸‹æ‰£å‡åº“å­˜å¤ªæ…¢äº†æ€ä¹ˆåŠ-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#ç§’æ€åœºæ™¯ä¸‹æ‰£å‡åº“å­˜å¤ªæ…¢äº†æ€ä¹ˆåŠ-2023-æ»´æ»´" aria-hidden="true">#</a> ç§’æ€åœºæ™¯ä¸‹æ‰£å‡åº“å­˜å¤ªæ…¢äº†æ€ä¹ˆåŠï¼Ÿï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>å¦‚æœåœ¨ç§’æ€åœºæ™¯ä¸‹æ‰£å‡åº“å­˜çš„è¿‡ç¨‹å¤ªæ…¢ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿçš„å“åº”æ—¶é—´å˜é•¿ï¼Œç”¨æˆ·ä½“éªŒä¸‹é™ï¼Œç”šè‡³ç³»ç»Ÿè¿‡è½½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¼˜åŒ–æ‰£å‡åº“å­˜è¿‡ç¨‹çš„å»ºè®®ï¼š</p><ol><li><strong>ä½¿ç”¨å†…å­˜æ•°æ®åº“</strong>ï¼šç›¸æ¯”äºä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ï¼Œå†…å­˜æ•°æ®åº“å¦‚Redisçš„è¯»å†™é€Ÿåº¦æ›´å¿«ï¼Œé€‚åˆå¤„ç†é«˜å¹¶å‘è¯·æ±‚ã€‚ä½ å¯ä»¥åœ¨æ´»åŠ¨å¼€å§‹å‰å°†åº“å­˜ä¿¡æ¯é¢„åŠ è½½åˆ°Redisä¸­ï¼Œç”¨æˆ·æŠ¢è´­æ—¶ç›´æ¥åœ¨Redisä¸­æ‰£å‡åº“å­˜ï¼Œæ´»åŠ¨ç»“æŸåå†å°†Redisä¸­çš„æ•°æ®åŒæ­¥å›æ•°æ®åº“ã€‚</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šç”¨æˆ·çš„æŠ¢è´­è¯·æ±‚å¯ä»¥å…ˆè¿›å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±åå°æœåŠ¡å¼‚æ­¥å¤„ç†ã€‚è¿™æ ·ç”¨æˆ·çš„è¯·æ±‚å°±å¯ä»¥ç«‹å³å¾—åˆ°å“åº”ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶ä¹Ÿå‡è½»äº†æœåŠ¡å™¨çš„å‹åŠ›ã€‚</li><li><strong>æ•°æ®åº“ä¼˜åŒ–</strong>ï¼šå¦‚æœä»ç„¶ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡æ•°æ®åº“å±‚é¢çš„ä¼˜åŒ–æ¥æé«˜æ•ˆç‡ï¼Œä¾‹å¦‚é€‰æ‹©åˆé€‚çš„ç´¢å¼•ã€è°ƒæ•´äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€ä½¿ç”¨æ‰¹å¤„ç†ç­‰ã€‚</li><li><strong>å‡å°‘æ•°æ®åº“æ“ä½œ</strong>ï¼šæ¯æ¬¡æ‰£å‡åº“å­˜æ—¶éƒ½éœ€è¦æ›´æ–°æ•°æ®åº“ï¼Œè¿™ä¼šå ç”¨å¤§é‡çš„I/Oèµ„æºã€‚ä½ å¯ä»¥é‡‡ç”¨ä¸€äº›æ–¹æ³•æ¥å‡å°‘æ•°æ®åº“æ“ä½œï¼Œä¾‹å¦‚å°†ç”¨æˆ·çš„è¯·æ±‚å…ˆæš‚å­˜èµ·æ¥ï¼Œå½“ç§¯ç´¯åˆ°ä¸€å®šæ•°é‡æˆ–è€…è¿‡äº†ä¸€æ®µæ—¶é—´åå†æ‰¹é‡æ›´æ–°åˆ°æ•°æ®åº“ã€‚</li><li><strong>ä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ï¼šå¦‚æœä½ çš„ç³»ç»Ÿè§„æ¨¡è¾ƒå¤§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿæ¥åˆ†æ‹…å‹åŠ›ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼æ•°æ®åº“ã€åˆ†å¸ƒå¼ç¼“å­˜ã€åˆ†å¸ƒå¼è®¡ç®—ç­‰æŠ€æœ¯ã€‚</li></ol><h3 id="çŸ­ä¿¡ç™»å½•çš„çŸ­ä¿¡æ€ä¹ˆå‘é€çš„-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#çŸ­ä¿¡ç™»å½•çš„çŸ­ä¿¡æ€ä¹ˆå‘é€çš„-2023-æ»´æ»´" aria-hidden="true">#</a> çŸ­ä¿¡ç™»å½•çš„çŸ­ä¿¡æ€ä¹ˆå‘é€çš„ï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>çŸ­ä¿¡ç™»å½•çš„è¿‡ç¨‹é€šå¸¸å¦‚ä¸‹ï¼š</p><ol><li>ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºæˆ–ç½‘ç«™ä¸Šè¾“å…¥æ‰‹æœºå·ç ã€‚</li><li>ç³»ç»ŸéªŒè¯è¯¥æ‰‹æœºå·ç çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚</li><li>å¦‚æœæ‰‹æœºå·ç æ­£ç¡®ï¼Œç³»ç»Ÿå°†ç”Ÿæˆä¸€ä¸ªéšæœºçš„éªŒè¯ç ã€‚</li><li>ç³»ç»Ÿä½¿ç”¨çŸ­ä¿¡æœåŠ¡æä¾›å•†ï¼ˆå¦‚Twilio, Alibaba SMS Serviceç­‰ï¼‰å°†éªŒè¯ç ä½œä¸ºçŸ­ä¿¡å‘é€åˆ°ç”¨æˆ·çš„æ‰‹æœºå·ç ä¸Šã€‚</li><li>ç”¨æˆ·æ”¶åˆ°çŸ­ä¿¡åï¼Œå°†éªŒè¯ç è¾“å…¥åº”ç”¨ç¨‹åºæˆ–ç½‘ç«™ã€‚</li><li>ç³»ç»ŸéªŒè¯è¾“å…¥çš„éªŒè¯ç æ˜¯å¦ä¸å‘é€çš„éªŒè¯ç ä¸€è‡´ã€‚</li><li>å¦‚æœä¸€è‡´ï¼Œç³»ç»Ÿå…è®¸ç”¨æˆ·ç™»å½•ã€‚</li></ol><h3 id="æ—è·¯ç¼“å­˜æœºåˆ¶å…·ä½“è§£å†³çš„ä»€ä¹ˆåœºæ™¯-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#æ—è·¯ç¼“å­˜æœºåˆ¶å…·ä½“è§£å†³çš„ä»€ä¹ˆåœºæ™¯-2023-æ»´æ»´" aria-hidden="true">#</a> æ—è·¯ç¼“å­˜æœºåˆ¶å…·ä½“è§£å†³çš„ä»€ä¹ˆåœºæ™¯ï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>æ—è·¯ç¼“å­˜ï¼ˆSidecar Cachingï¼‰æ˜¯ä¸€ç§åœ¨è·å–æ•°æ®æ—¶é¿å…ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜é›ªå´©ç­‰é—®é¢˜çš„ç­–ç•¥ã€‚åœ¨ä½¿ç”¨Redisä½œä¸ºç¼“å­˜ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ—è·¯ç¼“å­˜ç­–ç•¥æ¥æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</p><p>æ—è·¯ç¼“å­˜ä¸æ™®é€šç¼“å­˜çš„ä¸»è¦åŒºåˆ«åœ¨äºå…¶å¤„ç†ç¼“å­˜æœªå‘½ä¸­çš„ç­–ç•¥ã€‚æ™®é€šç¼“å­˜åœ¨æœªå‘½ä¸­æ—¶ä¼šç›´æ¥è®©æ‰€æœ‰ç›¸å…³çš„è¯·æ±‚å»æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œä½†è¿™åœ¨é«˜å¹¶å‘çš„ç¯å¢ƒä¸­å¯èƒ½å¯¼è‡´æ•°æ®åº“çš„è´Ÿè½½è¿‡å¤§ã€‚å¦å¤–ï¼Œå¦‚æœæ•°æ®åº“ä¸­ä¹Ÿæ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆè¿™äº›è¯·æ±‚å¯èƒ½ä¼šé‡å¤åœ°æŸ¥è¯¢æ•°æ®åº“ï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸ºç¼“å­˜ç©¿é€ã€‚</p><p>æ—è·¯ç¼“å­˜ç­–ç•¥åˆ™åœ¨ç¼“å­˜æœªå‘½ä¸­æ—¶ï¼Œä¼šå…ˆå°†æ‰€æœ‰è¯·æ±‚æš‚æ—¶æŒ‚èµ·ï¼Œç„¶åç”±ä¸€ä¸ªä¸“é—¨çš„çº¿ç¨‹æˆ–è¿›ç¨‹å»æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶æ›´æ–°ç¼“å­˜ã€‚è¿™æ ·ï¼Œå…¶ä»–çš„è¯·æ±‚åªéœ€è¦ç­‰å¾…ç¼“å­˜è¢«æ›´æ–°ï¼Œè€Œä¸éœ€è¦è‡ªå·±å»æ•°æ®åº“ä¸­è·å–æ•°æ®ã€‚è¿™å¯ä»¥æœ‰æ•ˆåœ°é™ä½æ•°æ®åº“çš„è´Ÿè½½ï¼Œå¹¶ä¸”å‡å°‘ç¼“å­˜ç©¿é€çš„å¯èƒ½ã€‚</p><p>æ—è·¯ç¼“å­˜çš„ç›®çš„ä¸»è¦æ˜¯ä¿æŠ¤æ•°æ®åº“ï¼Œé˜²æ­¢åœ¨é«˜å¹¶å‘çš„ç¯å¢ƒä¸‹ç”±äºç¼“å­˜æœªå‘½ä¸­å¯¼è‡´æ•°æ®åº“çš„è´Ÿè½½è¿‡å¤§ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥å‡å°‘ç¼“å­˜ç©¿é€çš„å¯èƒ½ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</p><p>å†™ï¼š</p><ul><li>å…ˆæ›´æ–°DBã€‚</li><li>ç„¶åç›´æ¥åˆ é™¤cacheã€‚ <img src="`+H+'" alt="" loading="lazy"></li></ul><p>è¯»ï¼š</p><ul><li>ä»cacheä¸­è¯»å–æ•°æ®ï¼Œè¯»å–åˆ°å°±ç›´æ¥è¿”å›ã€‚</li><li>cacheä¸­è¯»å–ä¸åˆ°çš„è¯ï¼Œå°±ä»DBè¯»å–è¿”å›ã€‚</li><li>å†æŠŠæ•°æ®å†™åˆ°cacheä¸­ã€‚ <img src="'+D+`" alt="" loading="lazy"></li></ul><blockquote><p><strong>å¦‚æœåœ¨å†™æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å…ˆåˆ é™¤cacheï¼Œå†æ›´æ–°DBå—ï¼Ÿ</strong> åœ¨å†™å…¥æ•°æ®æ—¶ï¼Œé‡‡ç”¨â€œå…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“â€çš„ç­–ç•¥æ˜¯ä¸€ç§å¸¸è§çš„åšæ³•ã€‚è¿™ç§ç­–ç•¥è¢«ç§°ä¸º&quot;Cache-Aside&quot;æ¨¡å¼æˆ–&quot;å…ˆåˆ åå†™&quot;ç­–ç•¥ã€‚ å…¶ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ é™¤ç¼“å­˜ï¼šåœ¨æ›´æ–°æ•°æ®åº“ä¹‹å‰ï¼Œé¦–å…ˆåˆ é™¤å¯¹åº”çš„ç¼“å­˜æ•°æ®ã€‚</li><li>æ›´æ–°æ•°æ®åº“ï¼šåˆ é™¤ç¼“å­˜åï¼Œå†å»æ›´æ–°æ•°æ®åº“ã€‚ ä½†è¿™ä¸ªç­–ç•¥éœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœåœ¨ä½ åˆ é™¤äº†ç¼“å­˜åï¼Œå’Œæ•°æ®åº“æ›´æ–°ä¹‹é—´çš„è¿™æ®µæ—¶é—´é‡Œï¼Œå¦‚æœæœ‰å…¶ä»–è¯·æ±‚æŸ¥è¯¢è¿™ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆè¿™ä¸ªæŸ¥è¯¢è¯·æ±‚å¯èƒ½ä¼šå› ä¸ºåœ¨ç¼“å­˜ä¸­æ²¡æ‰¾åˆ°æ•°æ®ï¼Œå»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶å°†æŸ¥è¯¢ç»“æœå†™å…¥ç¼“å­˜ã€‚è¿™æ—¶ï¼Œå†å»æ›´æ–°æ•°æ®åº“å°±å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜ä¸æ•°æ®åº“ä¸­çš„æ•°æ®ä¸ä¸€è‡´ã€‚ ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¸ºâ€œè¯»å†™é”â€çš„æœºåˆ¶ã€‚åœ¨æ›´æ–°æ•°æ®æ—¶ï¼Œé¦–å…ˆè·å–å†™é”ï¼Œç„¶ååˆ é™¤ç¼“å­˜å¹¶æ›´æ–°æ•°æ®åº“ï¼Œæœ€åé‡Šæ”¾å†™é”ã€‚åœ¨è¯»å–æ•°æ®æ—¶ï¼Œé¦–å…ˆè·å–è¯»é”ï¼Œç„¶åä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œå°±å»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶æ›´æ–°ç¼“å­˜ï¼Œæœ€åé‡Šæ”¾è¯»é”ã€‚è¿™æ ·å°±å¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li></ol></blockquote><blockquote><p><strong>å¦‚æœå…ˆå†™BDï¼Œå†åˆ é™¤cacheå°±ä¸ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´äº†å—ï¼Ÿ</strong> &quot;å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜&quot;ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„å¤„ç†æ–¹å¼ï¼Œå…¶ç†è®ºä¸Šå¯ä»¥é¿å…&quot;å…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“&quot;ç­–ç•¥ä¸­å¯èƒ½å‡ºç°çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚ åœ¨&quot;å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜&quot;ç­–ç•¥ä¸­ï¼Œç”±äºæ•°æ®å·²ç»è¢«å…ˆæ›´æ–°åˆ°æ•°æ®åº“ï¼Œå³ä½¿åœ¨æ›´æ–°æ•°æ®åº“å’Œåˆ é™¤ç¼“å­˜çš„çŸ­æš‚æ—¶é—´é—´éš”å†…æœ‰æ–°çš„è¯»è¯·æ±‚åˆ°è¾¾å¹¶æ›´æ–°äº†ç¼“å­˜ï¼Œè¯¥ç¼“å­˜æ•°æ®ä¹Ÿæ˜¯æœ€æ–°çš„ï¼Œå› æ­¤ä¸ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ ç„¶è€Œï¼Œè¿™ç§ç­–ç•¥ä¹Ÿæœ‰å…¶è‡ªèº«çš„é—®é¢˜ã€‚åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå¦‚æœä¸¤ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªæ˜¯å†™è¯·æ±‚ï¼Œä¸€ä¸ªæ˜¯è¯»è¯·æ±‚ï¼Œå®ƒä»¬å‡ ä¹åŒæ—¶åˆ°è¾¾ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</p><ol><li>å†™è¯·æ±‚å…ˆæ›´æ–°äº†æ•°æ®åº“</li><li>è¯»è¯·æ±‚è¯»å–æ•°æ®åº“ï¼Œå¹¶å°†æ•°æ®å†™å…¥ç¼“å­˜</li><li>å†™è¯·æ±‚åˆ é™¤äº†ç¼“å­˜ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼“å­˜å°±ä¼šä¸¢å¤±ï¼Œå¯¼è‡´åç»­çš„è¯»è¯·æ±‚å¿…é¡»ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œè¿™å¯èƒ½ä¼šå¢åŠ æ•°æ®åº“çš„è´Ÿè½½ã€‚å› æ­¤ï¼Œä¸è®ºæ˜¯&quot;å…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“&quot;è¿˜æ˜¯&quot;å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜&quot;ï¼Œéƒ½æœ‰å¯èƒ½å­˜åœ¨é—®é¢˜</li></ol></blockquote><h3 id="æ›´æ–°ç¼“å­˜å¤±è´¥äº†æ€ä¹ˆåŠ-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#æ›´æ–°ç¼“å­˜å¤±è´¥äº†æ€ä¹ˆåŠ-2023-æ»´æ»´" aria-hidden="true">#</a> æ›´æ–°ç¼“å­˜å¤±è´¥äº†æ€ä¹ˆåŠï¼ˆ2023 æ»´æ»´ï¼‰</h3><ul><li>é‡æ–°å°è¯•ï¼šå¦‚æœé”™è¯¯æ˜¯æš‚æ—¶çš„ï¼Œä¾‹å¦‚ç½‘ç»œæŠ–åŠ¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°è¯•å†æ¬¡æ›´æ–°ç¼“å­˜ã€‚</li><li>å¤±è´¥åçš„å…œåº•ç­–ç•¥ï¼šå¦‚æœç¼“å­˜ç³»ç»Ÿå­˜åœ¨é—®é¢˜ä¸”æ— æ³•ç«‹å³ä¿®å¤ï¼Œå¯ä»¥è€ƒè™‘æš‚æ—¶ç»•è¿‡ç¼“å­˜ï¼Œç›´æ¥è®¿é—®åŸå§‹æ•°æ®æºã€‚è¿™å¯ä»¥ç¡®ä¿ä¸šåŠ¡çš„æ­£å¸¸è¿è¡Œï¼Œä½†å¯èƒ½ä¼šå¢åŠ åŸå§‹æ•°æ®æºçš„è´Ÿè½½ã€‚</li></ul><blockquote><p>é‡è¯•çš„æ—¶å€™ï¼Œç¼“å­˜ä¸­çš„é”™æ•°æ®è¢«è®¿é—®å¤šæ¬¡äº†ï¼Œæ€ä¹ˆè§£å†³ï¼ˆ2023 æ»´æ»´ï¼‰</p></blockquote><p>å½“å°è¯•æ›´æ–°ç¼“å­˜æ—¶ï¼Œå¦‚æœæ•°æ®å·²ç»è¢«é”™è¯¯åœ°å†™å…¥åˆ°ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªé”™è¯¯æ•°æ®å¯èƒ½ä¼šè¢«å¤šæ¬¡è®¿é—®ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œæœ‰å‡ ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>å»¶è¿Ÿæ›´æ–°ï¼šä¸€ç§æ–¹æ³•æ˜¯åœ¨å†™å…¥æ–°æ•°æ®ä¹‹å‰ï¼Œå…ˆå°†æ—§æ•°æ®ä»ç¼“å­˜ä¸­åˆ é™¤ï¼Œç„¶åå†å†™å…¥æ–°æ•°æ®ã€‚è¿™å¯ä»¥ç¡®ä¿åœ¨æ–°æ•°æ®è¿˜æ²¡æœ‰è¢«å†™å…¥ç¼“å­˜æ—¶ï¼Œå®¢æˆ·ç«¯åªèƒ½è·å–åˆ°æ—§çš„æ•°æ®ï¼Œè€Œä¸æ˜¯é”™è¯¯çš„æ•°æ®ã€‚ç„¶è€Œï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜â€œç©ºçª—æœŸâ€çš„é—®é¢˜ã€‚</li><li>è¯»å†™é”ï¼šä½¿ç”¨è¯»å†™é”å¯ä»¥ä¿è¯åœ¨å†™å…¥æ–°æ•°æ®æ—¶ï¼Œä¸ä¼šæœ‰è¯»å–æ“ä½œå‘ç”Ÿã€‚åœ¨æ›´æ–°ç¼“å­˜çš„è¿‡ç¨‹ä¸­ï¼Œå†™æ“ä½œå°†ä¼šé”å®šæ•°æ®ï¼Œè¯»æ“ä½œå°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ–°çš„æ•°æ®å†™å…¥å®Œæ¯•ã€‚</li><li>ä¹è§‚å¹¶å‘æ§åˆ¶ï¼šä½ å¯ä»¥ä½¿ç”¨ä¹è§‚å¹¶å‘æ§åˆ¶ï¼Œåªæœ‰åœ¨æ•°æ®æ²¡æœ‰å‘ç”Ÿæ”¹å˜çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½æ›´æ–°ç¼“å­˜ã€‚è¿™éœ€è¦åœ¨åŸå§‹æ•°æ®æºä¸­ä¿å­˜æ•°æ®ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶åœ¨æ›´æ–°ç¼“å­˜æ—¶æ£€æŸ¥æ•°æ®ç‰ˆæœ¬ã€‚</li><li>åŸå­æ“ä½œï¼šä¸€äº›ç¼“å­˜ç³»ç»Ÿæ”¯æŒåŸå­æ“ä½œï¼Œå¯ä»¥ç¡®ä¿æ•°æ®çš„æ›´æ–°æ˜¯åŸå­çš„ï¼Œå³æ•°æ®çš„æ›´æ–°è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œä¸ä¼šå‡ºç°éƒ¨åˆ†æˆåŠŸçš„æƒ…å†µã€‚</li></ol><h3 id="å¦‚ä½•è®¾è®¡æŠ¢ä¼˜æƒ åˆ¸-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è®¾è®¡æŠ¢ä¼˜æƒ åˆ¸-2023-æ»´æ»´" aria-hidden="true">#</a> å¦‚ä½•è®¾è®¡æŠ¢ä¼˜æƒ åˆ¸ï¼Ÿï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>è®¾è®¡ä¸€ä¸ªæŠ¢ä¼˜æƒ åˆ¸çš„ç³»ç»Ÿå¯ä»¥æ¶‰åŠåˆ°å¾ˆå¤šæ–¹é¢ï¼ŒåŒ…æ‹¬å¹¶å‘æ§åˆ¶ã€æ•°æ®ä¸€è‡´æ€§ã€é€šçŸ¥æœºåˆ¶ç­‰ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„è®¾è®¡æ€è·¯ï¼š</p><ol><li><strong>é¢„çƒ­æ•°æ®</strong>ï¼šä¸ºäº†å‡å°‘æ•°æ®åº“çš„å‹åŠ›ï¼Œå¯ä»¥åœ¨æ´»åŠ¨å¼€å§‹ä¹‹å‰å°†ä¼˜æƒ åˆ¸çš„ä¿¡æ¯é¢„çƒ­åˆ°ç¼“å­˜ä¸­ï¼Œä¾‹å¦‚ä½¿ç”¨Redisã€‚</li><li><strong>é™æµ</strong>ï¼šç”±äºæŠ¢ä¼˜æƒ åˆ¸çš„æ´»åŠ¨å¯èƒ½ä¼šäº§ç”Ÿå·¨å¤§çš„æµé‡ï¼Œéœ€è¦é‡‡å–é™æµæªæ–½é˜²æ­¢æœåŠ¡å™¨è¿‡è½½ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç­‰é™æµç®—æ³•ã€‚</li><li><strong>å¹¶å‘æ§åˆ¶</strong>ï¼šä¸ºäº†å¤„ç†å¤§é‡ç”¨æˆ·åŒæ—¶æŠ¢è´­çš„æƒ…å†µï¼Œå¯ä»¥é‡‡ç”¨Javaçš„å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œå¦‚çº¿ç¨‹æ± ã€CompletableFutureç­‰ã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ï¼Œä½¿ç”¨å¤šä¸ªæœåŠ¡å™¨å…±åŒå¤„ç†è¯·æ±‚ã€‚</li><li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šä¸ºäº†é¿å…è¶…å–çš„é—®é¢˜ï¼Œéœ€è¦ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚è¿™å¯ä»¥é€šè¿‡äº‹åŠ¡æ§åˆ¶æˆ–åˆ†å¸ƒå¼é”ç­‰æ–¹å¼å®ç°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Redisæˆ–ZooKeeperå®ç°åˆ†å¸ƒå¼é”ã€‚</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šæŠ¢è´­çš„è¯·æ±‚å¯ä»¥é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†ï¼Œä¸ä»…å¯ä»¥å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ï¼Œè¿˜å¯ä»¥æé«˜ç”¨æˆ·çš„ä½“éªŒã€‚æ¯”å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»æŠ¢è´­åï¼Œç«‹å³è¿”å›ä¸€ä¸ªæ­£åœ¨å¤„ç†çš„å“åº”ï¼Œç„¶åé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—åœ¨åå°å¤„ç†æŠ¢è´­çš„é€»è¾‘ã€‚</li><li><strong>é€šçŸ¥ç”¨æˆ·</strong>ï¼šå½“æŠ¢è´­å¤„ç†å®Œåï¼Œéœ€è¦åŠæ—¶é€šçŸ¥ç”¨æˆ·ç»“æœã€‚å¯ä»¥é€šè¿‡é‚®ä»¶ã€çŸ­ä¿¡ã€åº”ç”¨å†…é€šçŸ¥æˆ–è€…æ¨é€é€šçŸ¥ç­‰æ–¹å¼ã€‚</li><li><strong>å®¹é”™å’Œå¤‡ä»½</strong>ï¼šç³»ç»Ÿéœ€è¦æœ‰è¶³å¤Ÿçš„å®¹é”™å’Œå¤‡ä»½æœºåˆ¶ï¼Œä»¥ä¾¿åœ¨å‡ºç°é—®é¢˜æ—¶å¿«é€Ÿæ¢å¤ã€‚</li><li><strong>ç›‘æ§å’ŒæŠ¥è­¦</strong>ï¼šè®¾ç½®ç›‘æ§å’ŒæŠ¥è­¦æœºåˆ¶ï¼Œå¯¹ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€è¿›è¡Œå®æ—¶ç›‘æ§ï¼Œä¸€æ—¦å‘ç°å¼‚å¸¸ï¼Œç«‹å³è§¦å‘æŠ¥è­¦ï¼Œä¾¿äºåŠæ—¶å¤„ç†ã€‚</li></ol><h3 id="æœ‰ä¸€ä¸ªç¨‹åºå ç”¨å¤§é‡-cpu-å¹¶ä¸”ä¸€ç›´è¿è¡Œ-æ€ä¹ˆæ’æŸ¥-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#æœ‰ä¸€ä¸ªç¨‹åºå ç”¨å¤§é‡-cpu-å¹¶ä¸”ä¸€ç›´è¿è¡Œ-æ€ä¹ˆæ’æŸ¥-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> æœ‰ä¸€ä¸ªç¨‹åºå ç”¨å¤§é‡ cpuï¼Œå¹¶ä¸”ä¸€ç›´è¿è¡Œï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li>è¯†åˆ«é—®é¢˜è¿›ç¨‹ï¼šä½¿ç”¨topæˆ–htopå‘½ä»¤ï¼ˆLinux/macOSï¼‰æˆ–ä»»åŠ¡ç®¡ç†å™¨ï¼ˆWindowsï¼‰æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ï¼Œæ‰¾åˆ°å ç”¨å¤§é‡CPUçš„Javaè¿›ç¨‹ã€‚è®°ä¸‹è¿›ç¨‹IDï¼ˆPIDï¼‰ã€‚</li><li>è·å–çº¿ç¨‹ä¿¡æ¯ï¼šå¯¹äºæ‰¾åˆ°çš„Javaè¿›ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨jstackå·¥å…·è·å–çº¿ç¨‹ä¿¡æ¯ã€‚jstackæ˜¯Java Development Kitï¼ˆJDKï¼‰ä¸­çš„ä¸€ä¸ªå®ç”¨ç¨‹åºï¼Œç”¨äºç”ŸæˆJavaçº¿ç¨‹è½¬å‚¨ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>jstack <span class="token operator">&lt;</span>PID<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> thread_dump.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>åˆ†æçº¿ç¨‹è½¬å‚¨ï¼šæ‰“å¼€thread_dump.txtæ–‡ä»¶ï¼ŒæŸ¥æ‰¾å…·æœ‰é«˜CPUä½¿ç”¨ç‡çš„çº¿ç¨‹ã€‚çº¿ç¨‹è½¬å‚¨ä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª16è¿›åˆ¶çš„çº¿ç¨‹IDï¼ˆnidï¼‰ã€‚æ‰¾åˆ°çŠ¶æ€ä¸ºRUNNABLEä¸”å †æ ˆè·Ÿè¸ªè¡¨æ˜å¯èƒ½åœ¨æ‰§è¡Œå¯†é›†ä»»åŠ¡çš„çº¿ç¨‹ã€‚</li><li>å…³è”æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼šè¦ç¡®å®šå“ªäº›çº¿ç¨‹æ­£åœ¨ä½¿ç”¨å¤§é‡CPUèµ„æºï¼Œæˆ‘ä»¬éœ€è¦å°†Javaçº¿ç¨‹ä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹å…³è”èµ·æ¥ã€‚åœ¨Linuxä¸Šï¼Œå¯ä»¥ä½¿ç”¨<code>top -H -p &lt;PID&gt;</code>å‘½ä»¤æŸ¥çœ‹ç‰¹å®šè¿›ç¨‹çš„çº¿ç¨‹CPUä½¿ç”¨æƒ…å†µã€‚åœ¨Windowsä¸Šï¼Œå¯ä»¥ä½¿ç”¨Process Exploreræˆ–Process Monitorç­‰å·¥å…·æŸ¥çœ‹çº¿ç¨‹CPUä½¿ç”¨æƒ…å†µã€‚å°†æ“ä½œç³»ç»Ÿçº¿ç¨‹IDè½¬æ¢ä¸º16è¿›åˆ¶ï¼Œç„¶åä¸thread_dump.txtä¸­çš„çº¿ç¨‹è¿›è¡ŒåŒ¹é…ã€‚</li><li>å®šä½é—®é¢˜ä»£ç </li></ol><h3 id="ä¸¤ä¸ªåŒ…å«5äº¿urlçš„æ–‡ä»¶-å¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„é‡å¤url-å†…å­˜åªæœ‰4g-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#ä¸¤ä¸ªåŒ…å«5äº¿urlçš„æ–‡ä»¶-å¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„é‡å¤url-å†…å­˜åªæœ‰4g-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> ä¸¤ä¸ªåŒ…å«5äº¿URLçš„æ–‡ä»¶ï¼Œå¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„é‡å¤URLï¼Œå†…å­˜åªæœ‰4Gï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>å¤„ç†ä¸¤ä¸ªåŒ…å«5äº¿ä¸ªURLçš„æ–‡ä»¶æ¥æ‰¾å‡ºé‡å¤URLï¼Œæ˜¯ä¸€ä¸ªå†…å­˜å’Œè®¡ç®—å¯†é›†å‹çš„ä»»åŠ¡ã€‚åœ¨æœ‰é™çš„å†…å­˜ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä½¿ç”¨ä¸€äº›é«˜æ•ˆçš„æ•°æ®å¤„ç†æŠ€æœ¯ï¼Œå¦‚å¤–éƒ¨æ’åºå’Œåˆ†å¸ƒå¼è®¡ç®—ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¸»è¦æ¢è®¨ä½¿ç”¨åŸºäºç¡¬ç›˜çš„å¤–éƒ¨æ’åºå’Œå“ˆå¸Œæ˜ å°„æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p><p><strong>æ­¥éª¤1ï¼š</strong> é¢„å¤„ç†å¹¶åˆ‡å‰²æ–‡ä»¶ é¦–å…ˆï¼Œç”±äºæ–‡ä»¶çš„æ•°æ®é‡å¤ªå¤§ï¼Œæ— æ³•ä¸€æ¬¡æ€§è£…å…¥å†…å­˜ï¼Œæˆ‘ä»¬éœ€è¦å°†æ¯ä¸ªæ–‡ä»¶åˆ‡åˆ†æˆæ›´å°çš„åˆ†åŒºã€‚æˆ‘ä»¬å¯ä»¥å°†URLæŒ‰ç…§ä¸€å®šçš„å“ˆå¸Œå‡½æ•°åˆ†æ¡¶ï¼ˆå¦‚URLçš„å“ˆå¸Œå€¼å¯¹10000å–ä½™ï¼‰ï¼Œå°†ç›¸åŒå“ˆå¸Œå€¼çš„URLå†™å…¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç›¸åŒçš„URLä¸€å®šåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</p><p><strong>æ­¥éª¤2ï¼š</strong> é€ä¸€å¤„ç†åˆ‡å‰²åçš„æ–‡ä»¶ å°†åˆ‡å‰²åçš„å°æ–‡ä»¶ä¾æ¬¡åŠ è½½è¿›å†…å­˜ä¸­ï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶ä½¿ç”¨HashSetå»é‡ï¼Œç„¶åä¿å­˜åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚</p><p><strong>æ­¥éª¤3ï¼š</strong> ä¸¤ä¸¤å¯¹æ¯”æ‰¾å‡ºé‡å¤çš„URL æœ€åï¼Œæˆ‘ä»¬å†æŠŠç¬¬ä¸€ä¸ªæ–‡ä»¶å’Œç¬¬äºŒä¸ªæ–‡ä»¶ç›¸åŒå“ˆå¸Œå€¼çš„ä¸´æ—¶æ–‡ä»¶åˆ†åˆ«åŠ è½½åˆ°å†…å­˜ï¼Œç„¶åç”¨ä¸€ä¸ªHashSetä¿å­˜ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„URLï¼Œéå†ç¬¬äºŒä¸ªæ–‡ä»¶çš„URLï¼Œå¦‚æœåœ¨HashSetä¸­æ‰¾åˆ°å°±è¯´æ˜æ˜¯é‡å¤çš„URLã€‚</p><p>ä»¥ä¸Šæ­¥éª¤éœ€è¦è¿›è¡Œçš„IOæ“ä½œç›¸å½“å¤šï¼Œä¼šæ¶ˆè€—è¾ƒå¤§çš„æ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹å¤„ç†å¤§æ•°æ®é—®é¢˜ï¼Œæ‰€ä»¥è¦é€šè¿‡ç‰ºç‰²æ—¶é—´æ¥æ¢å–ç©ºé—´ã€‚åœ¨å®é™…çš„å¤§æ•°æ®å¤„ç†ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨æ›´é«˜æ•ˆçš„å·¥å…·å¦‚Sparkã€Hadoopç­‰åˆ†å¸ƒå¼å¤„ç†å·¥å…·æ¥è¿›è¡Œå¤„ç†ã€‚</p><h3 id="ä¸€ç¬é—´æäº¤140ä¸ªè¯·æ±‚-æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º40-æœ€å¤§çº¿ç¨‹æ•°ä¸º100-è¯·æ±‚æœ€å¤§å»¶è¿Ÿä¸º5ms-å¹³å‡rtä¸º3ms-å¦‚ä½•è®¾è®¡çº¿ç¨‹æ± å‚æ•°é™ä½å¤„ç†å»¶è¿Ÿ-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#ä¸€ç¬é—´æäº¤140ä¸ªè¯·æ±‚-æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º40-æœ€å¤§çº¿ç¨‹æ•°ä¸º100-è¯·æ±‚æœ€å¤§å»¶è¿Ÿä¸º5ms-å¹³å‡rtä¸º3ms-å¦‚ä½•è®¾è®¡çº¿ç¨‹æ± å‚æ•°é™ä½å¤„ç†å»¶è¿Ÿ-2023-å¿«æ‰‹" aria-hidden="true">#</a> ä¸€ç¬é—´æäº¤140ä¸ªè¯·æ±‚ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º40ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸º100ï¼Œè¯·æ±‚æœ€å¤§å»¶è¿Ÿä¸º5msï¼Œå¹³å‡rtä¸º3msï¼Œå¦‚ä½•è®¾è®¡çº¿ç¨‹æ± å‚æ•°é™ä½å¤„ç†å»¶è¿Ÿï¼Ÿ(2023 å¿«æ‰‹)</h3><p>ä¸ºäº†é™ä½å¤„ç†å»¶è¿Ÿï¼Œé¦–å…ˆè¦ç¡®ä¿çº¿ç¨‹æ± å‚æ•°é…ç½®åˆç†ã€‚è€ƒè™‘åˆ°æ‚¨çš„åœºæ™¯ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå»ºè®®çš„çº¿ç¨‹æ± å‚æ•°é…ç½®ï¼š</p><ol><li><strong>æ ¸å¿ƒçº¿ç¨‹æ•° (Core Pool Size)</strong>: ç”±äºä½ æåˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º40ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆç†çš„èµ·ç‚¹ï¼Œå› ä¸ºè¿™ç¡®ä¿äº†å¸¸é©»çš„40ä¸ªçº¿ç¨‹éšæ—¶ç­‰å¾…å¤„ç†æ–°çš„è¯·æ±‚ã€‚</li><li><strong>æœ€å¤§çº¿ç¨‹æ•° (Maximum Pool Size)</strong>: è€ƒè™‘åˆ°ä¸€ç¬é—´ä¼šæœ‰140ä¸ªè¯·æ±‚ï¼Œ100çš„æœ€å¤§çº¿ç¨‹æ•°ä¼¼ä¹ä¹Ÿæ˜¯åˆç†çš„ã€‚ä½†è¯·ç¡®ä¿æœåŠ¡å™¨çš„ç¡¬ä»¶å¯ä»¥åŒæ—¶å¤„ç†è¿™ä¹ˆå¤šçº¿ç¨‹ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li><li><strong>ç­‰å¾…é˜Ÿåˆ— (Queue)</strong>: ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªæœ‰ç•Œé˜Ÿåˆ—ï¼Œå¦‚ <code>LinkedBlockingQueue</code>ï¼Œå…¶å®¹é‡å¯ä»¥è®¾ç½®ä¸º<code>(æ€»çš„ä¸€ç¬é—´çš„è¯·æ±‚æ•° - æœ€å¤§çº¿ç¨‹æ•°)</code>ï¼Œå³40ã€‚è¿™æ ·ï¼Œåœ¨ç¬é—´æ¶Œå…¥çš„140ä¸ªè¯·æ±‚ä¸­ï¼Œ100ä¸ªè¯·æ±‚ä¼šç«‹å³è¢«100ä¸ªå·¥ä½œçº¿ç¨‹å¤„ç†ï¼Œå…¶ä½™çš„40ä¸ªè¯·æ±‚ä¼šè¢«æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚</li><li><strong>æ‹’ç»ç­–ç•¥ (RejectedExecutionHandler)</strong>: å½“æ‰€æœ‰çº¿ç¨‹éƒ½åœ¨å·¥ä½œï¼Œè€Œä¸”é˜Ÿåˆ—ä¹Ÿæ»¡äº†æ—¶ï¼Œä½ éœ€è¦ä¸€ä¸ªç­–ç•¥æ¥å¤„ç†æ–°è¿›æ¥çš„è¯·æ±‚ã€‚ä¸€ä¸ªåˆç†çš„é€‰æ‹©æ˜¯<code>CallerRunsPolicy</code>ï¼Œå®ƒå®é™…ä¸Šæ˜¯åœ¨è°ƒç”¨è€…çš„çº¿ç¨‹ä¸­è¿è¡Œä»»åŠ¡ï¼Œä»è€Œå®ç°ä¸€ç§å›å‹æ•ˆåº”ã€‚</li><li><strong>çº¿ç¨‹è¶…æ—¶ (Keep-alive times)</strong>: å¦‚æœä½ ä¸å¸Œæœ›éæ ¸å¿ƒçº¿ç¨‹é•¿æ—¶é—´ç©ºé—²ç­‰å¾…ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªåˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œä¾‹å¦‚60ç§’ï¼Œè¿™æ ·çº¿ç¨‹åœ¨ç©ºé—²è¶…è¿‡è¿™ä¸ªæ—¶é—´åå°±ä¼šè¢«ç»ˆæ­¢ã€‚</li></ol><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ThreadPoolExecutor</span> executor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>
    <span class="token number">40</span><span class="token punctuation">,</span>  <span class="token comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>
    <span class="token number">100</span><span class="token punctuation">,</span>  <span class="token comment">// æœ€å¤§çº¿ç¨‹æ•°</span>
    <span class="token number">60L</span><span class="token punctuation">,</span>  <span class="token comment">// çº¿ç¨‹ç©ºé—²æ—¶é—´</span>
    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span>  <span class="token comment">// çº¿ç¨‹ç©ºé—²æ—¶é—´çš„å•ä½</span>
    <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// ç­‰å¾…é˜Ÿåˆ—</span>
    <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor<span class="token punctuation">.</span>CallerRunsPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ‹’ç»ç­–ç•¥</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œè¿˜è¦è€ƒè™‘æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„é™åˆ¶ã€‚å¦‚æœä½ å‘ç°çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¤ªé¢‘ç¹ï¼Œå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦å‡å°‘æœ€å¤§çº¿ç¨‹æ•°ã€‚åŒæ—¶ï¼Œç¡®ä¿ç³»ç»Ÿçš„å…¶ä»–åº”ç”¨æˆ–æœåŠ¡ä¸ä¼šä¸æ­¤çº¿ç¨‹æ± äº‰ç”¨å¤ªå¤šçš„èµ„æºã€‚</p><h3 id="ä¸€ä¸ªä¿å­˜å­—ç¬¦ä¸²çš„è¶…å¤§æ–‡ä»¶-å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨ä¸åœ¨è¿™ä¸ªæ–‡ä»¶è¿™ç§ã€‚-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªä¿å­˜å­—ç¬¦ä¸²çš„è¶…å¤§æ–‡ä»¶-å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨ä¸åœ¨è¿™ä¸ªæ–‡ä»¶è¿™ç§ã€‚-2023-å¿«æ‰‹" aria-hidden="true">#</a> ä¸€ä¸ªä¿å­˜å­—ç¬¦ä¸²çš„è¶…å¤§æ–‡ä»¶ï¼Œå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨ä¸åœ¨è¿™ä¸ªæ–‡ä»¶è¿™ç§ã€‚ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><ul><li>åˆ†æ²» + hashmap</li></ul><h3 id="å‡å¦‚æœ‰æˆåƒä¸Šç™¾ä¸‡æ¡æ•°æ®-å†…å­˜ç©ºé—´æ— é™å¤§-æ€ä¹ˆå¿«é€Ÿçš„å¾€hashmapä¸­æ’å…¥æ•°æ®-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#å‡å¦‚æœ‰æˆåƒä¸Šç™¾ä¸‡æ¡æ•°æ®-å†…å­˜ç©ºé—´æ— é™å¤§-æ€ä¹ˆå¿«é€Ÿçš„å¾€hashmapä¸­æ’å…¥æ•°æ®-2023-å¿«æ‰‹" aria-hidden="true">#</a> å‡å¦‚æœ‰æˆåƒä¸Šç™¾ä¸‡æ¡æ•°æ®ï¼Œå†…å­˜ç©ºé—´æ— é™å¤§ï¼Œæ€ä¹ˆå¿«é€Ÿçš„å¾€HashMapä¸­æ’å…¥æ•°æ®ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><ol><li>é¢„ä¼°å®¹é‡å’Œè´Ÿè½½å› å­</li></ol><p>åœ¨åˆ›å»ºHashMapå®ä¾‹æ—¶ï¼Œä½ å¯ä»¥é¢„ä¼°æ•°æ®é‡å¹¶æ®æ­¤è®¾ç½®åˆå§‹å®¹é‡ã€‚è¿™æœ‰åŠ©äºå‡å°‘rehashingï¼ˆé‡æ–°å“ˆå¸Œï¼‰çš„æ¬¡æ•°ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>javaCopy codeint initialCapacity <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">;</span>  <span class="token comment">// æ ¹æ®é¢„ä¼°çš„æ•°æ®é‡è®¾ç½®</span>
<span class="token keyword">float</span> loadFactor <span class="token operator">=</span> <span class="token number">0.75f</span><span class="token punctuation">;</span> <span class="token comment">// é»˜è®¤å€¼ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´</span>
<span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">,</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>å¹¶å‘æ’å…¥</li></ol><p>å¦‚æœæ•°æ®æ’å…¥æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œå¹¶å‘æ’å…¥ã€‚ä¸è¿‡ï¼Œè¯·æ³¨æ„ï¼Œæ™®é€šçš„HashMapæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>ConcurrentHashMap</code>æ¥è¿›è¡Œçº¿ç¨‹å®‰å…¨çš„å¹¶å‘æ’å…¥ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> concurrentMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">,</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>æ‰¹é‡æ’å…¥</li></ol><p>æœ€ç›´æ¥çš„æ–¹å¼æ˜¯ä½¿ç”¨<code>putAll</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªMapå‚æ•°ï¼Œå°†å…¶ä¸­æ‰€æœ‰é”®-å€¼å¯¹éƒ½æ’å…¥åˆ°ç›®æ ‡HashMapä¸­ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼Œè¿™å¹¶ä¸ä¼šæ¯”é€ä¸€ä½¿ç”¨<code>put</code>æ–¹æ³•æ’å…¥å¿«å¾—å¤šã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> existingMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> newEntries <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...å¡«å……newEntries</span>
existingMap<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>newEntries<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸŒ€-å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#ğŸŒ€-å…¶ä»–" aria-hidden="true">#</a> ğŸŒ€ å…¶ä»–</h2><h3 id="è®²ä¸€è®²cms" tabindex="-1"><a class="header-anchor" href="#è®²ä¸€è®²cms" aria-hidden="true">#</a> è®²ä¸€è®²cmsï¼Ÿ</h3><p>å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆè‹±è¯­ï¼šcontent management systemï¼Œç¼©å†™ä¸º CMSï¼‰æ˜¯æŒ‡åœ¨ä¸€ä¸ªåˆä½œæ¨¡å¼ä¸‹ï¼Œç”¨äºç®¡ç†å·¥ä½œæµç¨‹çš„ä¸€å¥—åˆ¶åº¦ã€‚è¯¥ç³»ç»Ÿå¯åº”ç”¨äºæ‰‹å·¥æ“ä½œä¸­ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åˆ°ç”µè„‘æˆ–ç½‘ç»œé‡Œã€‚ä½œä¸ºä¸€ç§ä¸­å¤®å‚¨å­˜å™¨ï¼ˆcentral repositoryï¼‰ï¼Œå†…å®¹ç®¡ç†ç³»ç»Ÿå¯å°†ç›¸å…³å†…å®¹é›†ä¸­å‚¨å­˜å¹¶å…·æœ‰ç¾¤ç»„ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶ç­‰åŠŸèƒ½ã€‚ç‰ˆæœ¬æ§åˆ¶æ˜¯å†…å®¹ç®¡ç†ç³»ç»Ÿçš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿ã€‚</p><p>å†…å®¹ç®¡ç†ç³»ç»Ÿåœ¨ç‰©å“æˆ–æ–‡æ¡ˆæˆ–æ•°æ®çš„å­˜å‚¨ã€æŒç®¡ã€ä¿®è®¢ï¼ˆç›˜å­˜ï¼‰ã€è¯­ç”¨å……å®ã€æ–‡æ¡£å‘å¸ƒç­‰æ–¹é¢æœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚ç°åœ¨æµè¡Œçš„å¼€æºCMSç³»ç»Ÿæœ‰WordPressã€Joomla!ã€Drupalã€Xoopsã€CmsTopç­‰ã€‚</p>`,96),ee={href:"https://zh.wikipedia.org/wiki/%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F",target:"_blank",rel:"noopener noreferrer"},te=n("h3",{id:"dts-äº†è§£è¿‡å—-2023-å°çº¢ä¹¦ã€æ•°æ®åº“dtsæ–¹å‘ã€‘",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#dts-äº†è§£è¿‡å—-2023-å°çº¢ä¹¦ã€æ•°æ®åº“dtsæ–¹å‘ã€‘","aria-hidden":"true"},"#"),s(" DTS äº†è§£è¿‡å—ï¼Ÿ(2023 å°çº¢ä¹¦ã€æ•°æ®åº“dtsæ–¹å‘ã€‘)")],-1),oe=n("p",null,"æ•°å­—å‰§é™¢ç³»ç»Ÿï¼ˆDTSï¼ŒDigital Theater Systemsï¼‰ç”±DTSå…¬å¸ï¼ˆDTS Inc.ï¼ŒNASDAQï¼šDTSIï¼‰å¼€å‘ï¼Œä¸ºå¤šå£°é“éŸ³é¢‘æ ¼å¼ä¸­çš„ä¸€ç§ï¼Œå¹¿æ³›åº”ç”¨äºDVDéŸ³æ•ˆä¸Šã€‚å…¶æœ€æ™®éçš„æ ¼å¼ä¸º5.1å£°é“ã€‚ä¸æœæ¯”æ•°å­—ä¸ºä¸»è¦ç«äº‰å¯¹æ‰‹ã€‚è¦å®ç°DTSéŸ³æ•ˆè¾“å‡ºï¼Œéœ€åœ¨ç¡¬ä»¶ä¸ŠåŠè½¯ä»¶ä¸Šç¬¦åˆDTSçš„è§„æ ¼ï¼Œå¤šæ•°ä¼šåœ¨äº§å“ä¸Šæ ‡ç¤ºDTSçš„å•†æ ‡ã€‚",-1),pe={href:"https://zh.wikipedia.org/wiki/DTS",target:"_blank",rel:"noopener noreferrer"},le=n("h3",{id:"äº†è§£è¿‡èš‚èšçš„-oceanbase-å—-2023-èš‚èšé‡‘æœ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#äº†è§£è¿‡èš‚èšçš„-oceanbase-å—-2023-èš‚èšé‡‘æœ","aria-hidden":"true"},"#"),s(" äº†è§£è¿‡èš‚èšçš„ oceanbase å—ï¼Ÿï¼ˆ2023 èš‚èšé‡‘æœï¼‰")],-1),ie=n("p",null,"OceanBaseæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼å…³ç³»å‹æ•°æ®åº“ï¼Œå®Œå…¨å…¼å®¹MySQLã€‚å®ƒå®Œå…¨ç”±èš‚èšé›†å›¢å¼€å‘ï¼Œå¹¶å»ºç«‹åœ¨ä¸€ä¸ªå…¬å…±æœåŠ¡å™¨é›†ç¾¤ä¸Šã€‚åŸºäºPaxosåè®®åŠå…¶åˆ†å¸ƒå¼ç»“æ„ï¼ŒOceanBaseæä¾›é«˜å¯ç”¨æ€§å’Œçº¿æ€§å¯æ‰©å±•æ€§ã€‚",-1),ce=n("p",null,"å‚è€ƒï¼š",-1),re={href:"https://www.oceanbase.com/",target:"_blank",rel:"noopener noreferrer"},ue={href:"http://www.oceanbase.wiki/concept/introduction-to-oceanbase-database/1.learn-about-oceanbase-database/",target:"_blank",rel:"noopener noreferrer"},de={href:"https://dbdb.io/db/oceanbase",target:"_blank",rel:"noopener noreferrer"},ke=n("h2",{id:"ğŸ’¦-ç®—æ³•æ±‡æ€»",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ğŸ’¦-ç®—æ³•æ±‡æ€»","aria-hidden":"true"},"#"),s(" ğŸ’¦ ç®—æ³•æ±‡æ€»")],-1),me={href:"https://leetcode.cn/problems/er-cha-shu-de-zui-jin-gong-gong-zu-xian-lcof/",target:"_blank",rel:"noopener noreferrer"},ge={href:"https://leetcode.cn/problems/multiply-strings/",target:"_blank",rel:"noopener noreferrer"};function ve(he,be){const p=o("RouterLink"),e=o("ExternalLinkIcon");return c(),r("div",null,[F,n("p",null,[s("2022æœ‰çš„å¤§å‚é¢è¯•é¢˜ä¸ä¼šåœ¨2023å†æ¬¡å‡ºç°ï¼ˆä¹Ÿæœ‰å¯èƒ½ä¼šå› ä¸ºç²—å¿ƒåŠ ä¸Šï¼Œæ¬¢è¿issueæˆ–è€…PRæŒ‡æ­£å’Œä¿®æ”¹ï¼‰ï¼Œå¦‚æœæƒ³è¦äº†è§£å¯ä»¥å…ˆçœ‹"),a(p,{to:"/Java/eightpart/giant.html"},{default:u(()=>[s("2022å¤§å‚é¢è¯•")]),_:1}),s("ç‰ˆæœ¬ã€‚")]),z,n("blockquote",null,[U,n("ul",null,[n("li",null,[n("a",G,[s("https://stackoverflow.com/questions/2444005/how-do-i-make-my-arraylist-thread-safe-another-approach-to-problem-in-java"),a(e)]),s(" å¦‚ä½•ä½¿æˆ‘çš„ArrayListçº¿ç¨‹å®‰å…¨ï¼ŸJavaé—®é¢˜çš„å¦ä¸€ç§æ–¹æ³•ï¼Ÿ")]),n("li",null,[n("a",K,[s("https://stackoverflow.com/questions/18983362/how-to-prove-arraylist-is-not-thread-safe-with-a-test"),a(e)]),s(" å¦‚ä½•ç”¨æµ‹è¯•è¯æ˜æ•°ç»„åˆ—è¡¨ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ")]),n("li",null,[n("a",Q,[s("https://stackoverflow.com/questions/300519/arraylist-vs-vectors-in-java-if-thread-safety-isnt-a-concern"),a(e)]),s(" ArrayListä¸vectorï¼ŒJavaå¦‚æœçº¿ç¨‹å®‰å…¨ä¸æ˜¯ä¸€ä¸ªé—®é¢˜")])])]),V,n("blockquote",null,[X,n("ol",null,[n("li",null,[n("a",W,[s("https://stackoverflow.com/questions/602636/why-is-a-concurrentmodificationexception-thrown-and-how-to-debug-it"),a(e)]),s(" ä¸ºä»€ä¹ˆä¼šæŠ›å‡ºå®ƒä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ä»¥åŠå¦‚ä½•è°ƒè¯•å®ƒ")]),n("li",null,[n("a",Y,[s("https://www.javatpoint.com/concurrentmodificationexception-in-java"),a(e)])])])]),Z,n("blockquote",null,[$,n("p",null,[n("a",nn,[s("https://stackoverflow.com/questions/698638/why-does-concurrenthashmap-prevent-null-keys-and-values"),a(e)])])]),sn,n("blockquote",null,[an,n("ol",null,[n("li",null,[n("a",en,[s("https://stackoverflow.com/questions/2665569/in-what-cases-does-future-get-throw-executionexception-or-interruptedexception"),a(e)]),s(" åœ¨ä»€ä¹ˆæƒ…å†µä¸‹Future. getï¼ˆï¼‰æŠ›å‡ºExecutionExceptionæˆ–InterruptedException")]),n("li",null,[n("a",tn,[s("https://stackoverflow.com/questions/2248131/handling-exceptions-from-java-executorservice-tasks"),a(e)]),s(" å¤„ç†ExecutorServiceä»»åŠ¡Javaå¼‚å¸¸")]),n("li",null,[n("a",on,[s("https://www.baeldung.com/java-future"),a(e)])]),n("li",null,[n("a",pn,[s("https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html"),a(e)])])])]),ln,n("blockquote",null,[cn,n("ul",null,[n("li",null,[n("a",rn,[s("https://programming.vip/docs/6200e8e7b682c.html"),a(e)]),s(" ã€Mybatisæºç è§£æã€‘Mybatisæºç æ¶‰åŠçš„è®¾è®¡æ¨¡å¼æ€»ç»“")]),n("li",null,[n("a",un,[s("https://programming.vip/docs/mybatis-design-pattern.html"),a(e)]),s(" Mybatisè®¾è®¡æ¨¡å¼")])])]),dn,kn,mn,n("blockquote",null,[gn,n("ol",null,[n("li",null,[n("a",vn,[s("https://www.baeldung.com/spring-factorybean"),a(e)])]),n("li",null,[n("a",hn,[s("https://howtodoinjava.com/spring-core/how-to-create-beans-using-spring-factorybean/"),a(e)])]),n("li",null,[n("a",bn,[s("https://www.cnblogs.com/yichunguo/p/13922189.html"),a(e)])]),n("li",null,[n("a",yn,[s("https://www.cnblogs.com/jingzh/p/16711876.html"),a(e)])])])]),fn,n("blockquote",null,[wn,n("ul",null,[n("li",null,[n("a",xn,[s("https://stackoverflow.com/questions/62137/what-is-a-covered-index"),a(e)]),s(" ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ")]),n("li",null,[n("a",Cn,[s("https://xiaolincoding.com/mysql/index/index_interview.html#æŒ‰å­—æ®µä¸ªæ•°åˆ†ç±»"),a(e)]),s(" è¦†ç›–ç´¢å¼•ä¼˜åŒ–-å°æ—coding")]),n("li",null,[n("a",Sn,[s("https://stackoverflow.com/questions/609343/what-are-covering-indexes-and-covered-queries-in-sql-server"),a(e)]),s(" åœ¨SQL Serverä¸­ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•å’Œè¦†ç›–æŸ¥è¯¢ï¼Ÿ")]),n("li",null,[n("a",_n,[s("https://docs.couchbase.com/server/current/n1ql/n1ql-language-reference/covering-indexes.html"),a(e)]),s(" Covering Indexes")]),n("li",null,[n("a",Tn,[s("https://www.red-gate.com/simple-talk/databases/sql-server/learn/using-covering-indexes-to-improve-query-performance/"),a(e)]),s(" ä½¿ç”¨è¦†ç›–ç´¢å¼•ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½")])])]),Ln,Mn,An,n("blockquote",null,[n("p",null,[s("å‚è€ƒï¼š"),n("a",Pn,[s("https://xiaolincoding.com/mysql/transaction/mvcc.html"),a(e)])])]),Rn,n("blockquote",null,[qn,n("ol",null,[n("li",null,[n("a",En,[s("https://dev.mysql.com/doc/refman/8.0/en/explain-output.html"),a(e)])]),n("li",null,[n("a",jn,[s("https://stackoverflow.com/questions/44629837/understanding-output-of-explain-mysql-command"),a(e)])])])]),In,n("blockquote",null,[Bn,n("ol",null,[n("li",null,[n("a",On,[s("https://dev.mysql.com/doc/refman/8.0/en/system-schema.html"),a(e)])])])]),Nn,n("blockquote",null,[n("p",null,[s("å…·ä½“å¦‚ä½•åˆ·ç›˜å¯ä»¥çœ‹ï¼š"),n("a",Hn,[s("https://javaguide.cn/database/mysql/mysql-logs.html#åˆ·ç›˜æ—¶æœº"),a(e)])])]),Dn,n("blockquote",null,[Jn,n("ol",null,[n("li",null,[n("a",Fn,[s("https://loadforge.com/guides/troubleshooting-redis-performance-issues"),a(e)])]),n("li",null,[n("a",zn,[s("https://severalnines.com/blog/performance-tuning-redis/"),a(e)])])])]),Un,n("blockquote",null,[Gn,n("ol",null,[n("li",null,[n("a",Kn,[s("https://blog.csdn.net/Weixiaohuai/article/details/125391957"),a(e)])]),n("li",null,[n("a",Qn,[s("https://min.news/en/news/a1b1f8acadd9af9be99514da7504de1b.html"),a(e)])]),n("li",null,[n("a",Vn,[s("https://www.dragonflydb.io/error-solutions/redis-big-key-problem"),a(e)])]),n("li",null,[n("a",Xn,[s("https://xiaolincoding.com/redis/base/redis_interview.html#redis-çš„å¤§-key-å¦‚ä½•å¤„ç†"),a(e)])])])]),Wn,Yn,Zn,$n,n("ul",null,[ns,n("li",null,[s("hotkeys å‚æ•°ï¼š"),ss,s(" åœ¨ "),as,s(" ç‰ˆæœ¬ä¸­æ·»åŠ äº† "),n("a",es,[s("hotkeys"),a(e)]),s(" æŸ¥æ‰¾ç‰¹æ€§ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨ "),ts,s(" è·å–å½“å‰ "),os,s(" çš„çƒ­ç‚¹ "),ps,s("ï¼Œå®ç°ä¸Šæ˜¯é€šè¿‡ "),ls,s(" å®Œæˆçš„ã€‚")]),n("li",null,[s("monitor å‘½ä»¤ï¼š"),is,s(" å‘½ä»¤å¯ä»¥å®æ—¶æŠ“å–å‡º "),cs,s(" æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å‘½ä»¤ï¼Œé€šè¿‡ "),rs,s(" æŠ“å–æ•°æ®ï¼ŒåŒæ—¶ç»“åˆä¸€äº›ç°æˆçš„åˆ†æå·¥å…·ï¼Œæ¯”å¦‚ "),n("a",us,[s("redis-faina"),a(e)]),s("ï¼Œç»Ÿè®¡å‡ºçƒ­ Keyã€‚")]),ds]),ks,n("ol",null,[n("li",null,[n("a",ms,[s("MemCached"),a(e)]),s(" / "),n("a",gs,[s("Redission"),a(e)]),s(" + Redisä¸»ä»å¤åˆ¶ï¼šè¿™ä¸ªæ–¹æ¡ˆä¹Ÿå¯ä»¥è¯´æ˜¯åˆ†ç‰‡çš„å…·ä½“å®ç°äº†[2]ã€‚å¤åˆ¶çƒ­ç‚¹æ•°æ®åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·å¯ä»¥åˆ†æ‘Šè¯»å–å‹åŠ›ã€‚Redis å…·æœ‰å†…å»ºçš„ä¸»ä»å¤åˆ¶åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°çƒ­ç‚¹æ•°æ®çš„å¤åˆ¶ã€‚Memcached ä¸ç›´æ¥æ”¯æŒå¤åˆ¶ï¼Œä½†ä½ å¯ä»¥åœ¨ä¸Šå±‚å®ç°ã€‚åŒæ ·ï¼ŒRedission è‡ªèº«å¹¶ä¸ç›´æ¥è§£å†³çƒ­ç‚¹é”®ï¼ˆHotKeysï¼‰é—®é¢˜ï¼Œä½†æ”¯æŒå¤šç§é›†ç¾¤æ¨¡å¼ï¼ŒåŒ…æ‹¬åˆ†ç‰‡ï¼Œå¯ä»¥å°†æ•°æ®æ›´å‡åŒ€åœ°åˆ†å¸ƒåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œä»è€Œé™ä½çƒ­ç‚¹é”®å¯¹å•ä¸ªèŠ‚ç‚¹çš„å½±å“ã€‚")])]),vs,n("blockquote",null,[hs,n("ol",null,[n("li",null,[n("a",bs,[s("https://dzone.com/articles/redis-hotspot-key-discovery-and-common-solutions"),a(e)])]),n("li",null,[n("a",ys,[s("https://dongzl.github.io/2021/01/14/03-Redis-Hot-Key/index.html"),a(e)])]),n("li",null,[n("a",fs,[s("https://abhivendrasingh.medium.com/understanding-and-solving-hotkey-and-bigkey-and-issues-in-redis-1198f98b17a5"),a(e)])]),n("li",null,[n("a",ws,[s("https://developerknow.com/what-is-the-hot-key-problem-in-redis-how-to-solve-the-hot-key-problem/"),a(e)])]),n("li",null,[n("a",xs,[s("https://www.programmersought.com/article/54911114988/"),a(e)])])])]),Cs,Ss,_s,Ts,n("blockquote",null,[Ls,n("ol",null,[n("li",null,[n("a",Ms,[s("https://redis.io/docs/data-types/sorted-sets/"),a(e)])]),n("li",null,[n("a",As,[s("https://www.educba.com/redis-zset/"),a(e)])]),n("li",null,[n("a",Ps,[s("https://redis.io/commands/zadd/"),a(e)])])])]),Rs,n("blockquote",null,[qs,n("ul",null,[n("li",null,[n("a",Es,[s("https://stackoverflow.com/questions/19154607/how-actually-card-table-and-writer-barrier-work"),a(e)]),s(" å¡è¡¨å’Œå†™å±éšœæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ")]),n("li",null,[n("a",js,[s("https://tschatzl.github.io/2022/02/15/card-table-card-size.html"),a(e)]),s(" Card Table Card Size Shenanigans")]),n("li",null,[n("a",Is,[s("https://www.mo4tech.com/jvm-card-table.html"),a(e)]),s(" JVM Card Table")]),n("li",null,[n("a",Bs,[s("https://www.cnblogs.com/hongdada/p/12016020.html"),a(e)]),s(" JVM-å¡è¡¨ï¼ˆCard Tableï¼‰")]),n("li",null,[n("a",Os,[s("http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots.html"),a(e)]),s(" Alexey Ragozin")])])]),Ns,n("blockquote",null,[Hs,n("ol",null,[n("li",null,[n("a",Ds,[s("https://stackoverflow.com/questions/24766118/when-is-a-full-gc-triggered"),a(e)])])])]),Js,n("p",null,[s("å¦å¤–ï¼ŒG1å›æ”¶å™¨è¿˜å®ç°äº†ä¸€äº›ä¼˜åŒ–æŠ€æœ¯æ¥æé«˜è€å¹´ä»£å¯¹è±¡çš„å›æ”¶æ•ˆç‡ã€‚ä¾‹å¦‚ï¼Œâ€œHumongous Objectsâ€æŠ€æœ¯å¯ä»¥é«˜æ•ˆå›æ”¶å æ®å¤§é‡ç©ºé—´çš„å¯¹è±¡ï¼›"),n("a",Fs,[s("â€œString Deduplicationâ€æŠ€æœ¯å¯ä»¥å¹¶å‘åœ°å›æ”¶é‡å¤çš„å­—ç¬¦ä¸²å¯¹è±¡"),a(e)]),s("ã€‚")]),zs,n("blockquote",null,[Us,n("ol",null,[n("li",null,[n("a",Gs,[s("https://www.jianshu.com/p/4aea8af7a9ea"),a(e)])]),n("li",null,[n("a",Ks,[s("https://blog.csdn.net/truelove12358/article/details/105577414"),a(e)])]),n("li",null,[n("a",Qs,[s("https://juejin.cn/post/7023203644807839780"),a(e)])])])]),Vs,n("p",null,[s("Kafkaçš„ackæœºåˆ¶æ˜¯æŒ‡ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åï¼Œéœ€è¦æ¥æ”¶åˆ°åˆ†åŒºçš„leaderå‘é€çš„ç¡®è®¤æ”¶åˆ°çš„å›å¤ã€‚åœ¨Kafkaçš„é…ç½®å‚æ•°ä¸­ï¼Œæœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼š0ã€1å’Œ-1ï¼ˆæˆ–è€…allï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œackçš„å€¼ä¸º1ï¼Œè¡¨ç¤ºç”Ÿäº§è€…å‘é€åéœ€è¦æ¥æ”¶åˆ°åˆ†åŒºçš„leaderå‘é€çš„ç¡®è®¤æ”¶åˆ°çš„å›å¤"),n("a",Xs,[s("4"),a(e)]),s("ã€‚")]),Ws,n("blockquote",null,[Ys,n("ol",null,[n("li",null,[n("a",Zs,[s("https://cn.dubbo.apache.org/zh-cn/docsv2.7/dev/source/service-invoking-process/"),a(e)])])])]),$s,n("blockquote",null,[na,n("ol",null,[n("li",null,[n("a",sa,[s("https://stackoverflow.com/questions/21033104/close-wait-state-in-server"),a(e)]),s(" æœåŠ¡å™¨ä¸­çš„CLOSE_WAITçŠ¶æ€")]),n("li",null,[n("a",aa,[s("https://superuser.com/questions/173535/what-are-close-wait-and-time-wait-states"),a(e)]),s(" ä»€ä¹ˆæ˜¯CLOSE_WAITTIME_WAITçŠ¶æ€ï¼Ÿ")]),n("li",null,[n("a",ea,[s("https://learn.microsoft.com/en-us/answers/questions/337518/tcp-connections-locked-in-close-wait-status-with-i"),a(e)])]),n("li",null,[n("a",ta,[s("https://www.cnblogs.com/grey-wolf/p/10936657.html"),a(e)])]),n("li",null,[n("a",oa,[s("https://juejin.cn/post/6844903734300901390#heading-6"),a(e)])]),n("li",null,[n("a",pa,[s("https://www.thegeekdiary.com/high-number-of-connections-is-close_wait-state-in-netstat-command-output/"),a(e)]),s(' ä¸ºä»€ä¹ˆ"netstat"è¾“å‡ºæ˜¾ç¤ºè®¸å¤šè¿æ¥å¤„äºCLOSE_WAITçŠ¶æ€ï¼Ÿ')])])]),la,n("blockquote",null,[ia,n("ol",null,[n("li",null,[n("a",ca,[s("https://http2.github.io/"),a(e)])]),n("li",null,[n("a",ra,[s("https://en.wikipedia.org/wiki/HTTP/2"),a(e)])]),n("li",null,[n("a",ua,[s("https://web.dev/performance-http2/"),a(e)])]),n("li",null,[n("a",da,[s("https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference"),a(e)])])])]),ka,n("blockquote",null,[ma,n("ol",null,[n("li",null,[n("a",ga,[s("https://www.linux.com/news/ping-icmp-vs-arp/"),a(e)])]),n("li",null,[n("a",va,[s("https://nmap.org/book/host-discovery-techniques.html"),a(e)])]),n("li",null,[n("a",ha,[s("https://zh.wikipedia.org/wiki/äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®"),a(e)])]),n("li",null,[n("a",ba,[s("https://zh.wikipedia.org/wiki/åœ°å€è§£æåè®®"),a(e)])]),n("li",null,[n("a",ya,[s("https://www.fortinet.com/resources/cyberglossary/what-is-arp"),a(e)])]),n("li",null,[n("a",fa,[s("https://www.tutorialspoint.com/arp-table"),a(e)])]),n("li",null,[n("a",wa,[s("https://superuser.com/questions/894557/is-there-a-way-to-get-arp-to-list-devices-on-all-subnets-of-a-network"),a(e)])]),n("li",null,[n("a",xa,[s("https://obkio.com/blog/traceroutes-what-are-they-and-how-do-they-work/"),a(e)])]),n("li",null,[n("a",Ca,[s("https://www.howtogeek.com/134132/how-to-use-traceroute-to-identify-network-problems/"),a(e)])]),n("li",null,[n("a",Sa,[s("https://www.fortinet.com/resources/cyberglossary/traceroutes"),a(e)])])])]),_a,n("blockquote",null,[Ta,n("ol",null,[n("li",null,[n("a",La,[s("https://www.cloudflare.com/zh-cn/learning/performance/http2-vs-http1.1/"),a(e)]),s(" HTTP/2 ä¸ HTTP/1.1ï¼šå®ƒä»¬å¦‚ä½•å½±å“ Web æ€§èƒ½ï¼Ÿ")]),n("li",null,[n("a",Ma,[s("https://www.baeldung.com/cs/http-versions"),a(e)]),s(" HTTP: 1.0 vs. 1.1 vs 2.0 vs. 3.0")]),n("li",null,[n("a",Aa,[s("https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference"),a(e)]),s(" ã€æ¨èé˜…è¯»ã€‘HTTP/1.1ä¸HTTP/2ï¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ")])])]),Pa,Ra,n("blockquote",null,[n("p",null,[n("a",qa,[s("TCP é‡ä¼ ã€æ»‘åŠ¨çª—å£ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶"),a(e)])])]),Ea,n("blockquote",null,[ja,n("ol",null,[n("li",null,[n("a",Ia,[s("https://www.fortinet.com/resources/cyberglossary/man-in-the-middle-attack"),a(e)])]),n("li",null,[n("a",Ba,[s("https://www.howtogeek.com/668989/what-is-a-man-in-the-middle-attack/"),a(e)])])])]),Oa,Na,Ha,n("blockquote",null,[Da,n("ol",null,[n("li",null,[n("a",Ja,[s("https://www.netscout.com/what-is-ddos/syn-flood-attacks"),a(e)])]),n("li",null,[n("a",Fa,[s("https://info.support.huawei.com/info-finder/encyclopedia/en/SYN+Flood.html"),a(e)])])])]),za,n("blockquote",null,[n("p",null,[n("a",Ua,[s("æ¥è‡ªbiaodianfuå›ç­”"),a(e)])])]),Ga,n("blockquote",null,[n("ul",null,[n("li",null,[n("a",Ka,[s("https://blog.netdata.cloud/understanding-context-switching-and-its-impact-on-system-performance/"),a(e)]),s(" äº†è§£ä¸Šä¸‹æ–‡åˆ‡æ¢åŠå…¶å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“")]),n("li",null,[n("a",Qa,[s("https://www.quora.com/Why-is-context-switching-fast-in-a-user-level-thread-and-slow-in-a-kernel-level-thread"),a(e)]),s(" ä¸ºä»€ä¹ˆä¸Šä¸‹æ–‡åˆ‡æ¢åœ¨ç”¨æˆ·çº§çº¿ç¨‹ä¸­å¿«é€Ÿè€Œåœ¨å†…æ ¸çº§çº¿ç¨‹ä¸­ç¼“æ…¢ï¼Ÿ- Quora")])])]),Va,n("blockquote",null,[n("ul",null,[n("li",null,[n("a",Xa,[s("https://www.howtogeek.com/891526/l1-vs-l2-vs-l3-cache/"),a(e)]),s(" L1ã€L2å’ŒL3ç¼“å­˜ï¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ")]),n("li",null,[n("a",Wa,[s("https://www.makeuseof.com/tag/what-is-cpu-cache/"),a(e)]),s(" CPUç¼“å­˜å¦‚ä½•å·¥ä½œä»¥åŠä»€ä¹ˆæ˜¯L1ã€L2å’ŒL3ç¼“å­˜ï¼Ÿ")])])]),Ya,n("blockquote",null,[n("p",null,[s("å‚è€ƒï¼š"),n("a",Za,[s("https://linyunwen.github.io/2022/01/02/linux-io-model/"),a(e)])])]),$a,n("p",null,[s("å‚è€ƒï¼š"),n("a",ne,[s("https://github.com/huawei-noah/vega/blob/master/docs/en/algorithms/nago.mdï¼Œhttps://github.com/rubinxin/vega_NAGO"),a(e)])]),n("p",null,[s("Nagaoç®—æ³•æ˜¯ä¸€ç§å¿«é€Ÿç»Ÿè®¡æ–‡æœ¬ä¸­æ‰€æœ‰å­ä¸²é¢‘æ¬¡çš„ç®—æ³•ï¼Œ"),n("a",se,[s("ç”±ä¸œäº¬å¤§å­¦çš„é•¿å°¾çœŸæ•™æˆåœ¨1994å¹´æå‡º"),a(e)]),s("ã€‚è¯¥ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å¯¹æ–‡æœ¬ä¸­çš„å°„ä¸²è¿›è¡Œæ’åºæ¥å®ç°å¿«é€Ÿç»Ÿè®¡ã€‚")]),ae,n("blockquote",null,[n("p",null,[s("å‚è€ƒï¼š "),n("a",ee,[s("https://zh.wikipedia.org/wiki/å†…å®¹ç®¡ç†ç³»ç»Ÿ"),a(e)])])]),te,oe,n("blockquote",null,[n("p",null,[s("å‚è€ƒï¼š "),n("a",pe,[s("https://zh.wikipedia.org/wiki/DTS"),a(e)])])]),le,ie,n("blockquote",null,[ce,n("ol",null,[n("li",null,[n("a",re,[s("https://www.oceanbase.com/"),a(e)])]),n("li",null,[n("a",ue,[s("http://www.oceanbase.wiki/concept/introduction-to-oceanbase-database/1.learn-about-oceanbase-database/"),a(e)])]),n("li",null,[n("a",de,[s("https://dbdb.io/db/oceanbase"),a(e)])])])]),ke,n("ol",null,[n("li",null,[n("a",me,[s("äºŒå‰æ ‘çš„å…¬å…±ç¥–å…ˆï¼ˆ2023 å¿«æ‰‹ï¼‰"),a(e)])]),n("li",null,[n("a",ge,[s("å­—ç¬¦ä¸²ç›¸ä¹˜ï¼ˆ2023 ç¾å›¢ï¼‰"),a(e)])])])])}const we=i(J,[["render",ve],["__file","gaint2023.html.vue"]]);export{we as default};
