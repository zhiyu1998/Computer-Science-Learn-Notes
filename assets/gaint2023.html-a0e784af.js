import{_ as l}from"./v2-8cec22d735be76cd4a140ac30513ca49_b-bf62ba59.js";import{_ as i,W as c,X as r,a0 as n,a1 as s,Z as a,a2 as u,$ as t,C as o}from"./framework-c8643d23.js";const d="data:image/webp;base64,UklGRhwNAABXRUJQVlA4IBANAAAQRwCdASqAAYoAPm0ylkkkIqIhI3C50IANiWdu4W3AscZP1HHdO19C3iz0vf8D+v/1r4AfmD2AOdj5gP4f/Tv1v97f+m/sB7h/189gD+zf2v0kvYA9AD+H/4D//+uJ+33wf/ur+53tlaqh4Z/u3bn/eeic8ve3XLGeq+w36LyF/uv4peZPqo9QL1H/Wd6B0bzAvaf5x/oP7h7HvvHmJ4gH6yf8f10/yHgYfbv9P7AH8/8tb/Q/YP0+/VH/f/zvwJ/zX+u/9n11fYD+6/tJD2rS5btn4OAr7/Hs70x3N+nZ9Ty7V3s8W8XiQt1hTeoGmLPUEwzRsfkP9txaQWcOrebh+gxOVUm6f72gS8MHyIU6qO17HX/NBm2xdpAu2TLeo+5zvhBmyFJyf696Uwoi1jDnMIfere9HIju9+GxbJ9XFHwJ85b5Z1fj2heT6ZWlL/WxYvzqsoEIV5lvVGeyHeLq/V8NkE4IiLkELBs4lfnHEc0FJ3lbwU4nPWY7B07qQWT+MCc+E1qiHWs+LSCzh0TVWc9cLR7GYqj0po/bCJTr6W+wTqQPvqMX/6uP6xfGJ4CanXfMPMoHL/bDn1cUbqv87ZbXCUX6A7VuyJt4DXJDJKNtH8OsF8kBiPTHKyJrRoyFrCrfxQOlOyIpTUELmQNXD7LiCL4enFWS3LFOmfrzaTEYjYtk+rihUhcZPKD71DH0JyelSaw2tIgO4l1yOotHlIR9B4ZGpnQOeWR6MF9OgW3Y5vdEZe1GauLSdxSbBfSsAAP79te57YI6C4xvn8xyK+//ssks8ukwJLOcRpgXe5i5V/r6QHWAie01n/LJAFwa2uUdeT3uZTZX+g7X53EhP8j7k4VrDW6CfmYCVHsi9hSqpEkwKOy/+6ldHKq7w4UO6+eZv03WOiP//CwmmaWrfxEC1UfxGBkIr/AILB4tGH6NFOoLpWzVdrjdW8MrobzgCjo/alaFwkE73uSClwvpXnl47gtNtTocb+JOLGAbA57SSfU06mYIQnLLUsp6h/Hca5IDiPwcL2jh6lLPN+mJMAGp2yQuayPDBO6eKSx3pBerJmp4kq0Y6lsF5qyzjOLqXZlY5e1H4ncTJho0FiTnW478FJBeyf6b7iPhdcSYYoPQ3izrTL+aqSIIg3qp3IQ9FiPY7Y6n9WVWyuIB3hVEF5Eq2PaLqToYfrS7uudfNZEXchXzMxN1VmWr9KdMALWRA5XyZY30Z0dGQeAZaPue5hAAOpoUIkPD/dtWNH6YP6a2TUT6SvLhCL36MKXb4tuiQtfUaSEaJYY3Yw7OqowSHD5/yuOd//Wk8+X0BsSvhqDQ3Yw7QPV6Mki0iy/1y1rQq7vKWZDb4/utqm86leDrjLRUhCh3gfN8Xr5Nzgof34snivS3MW1Jd0/MvdQ4HYH7Iusz2M0zE06nRzt9sUuF8wQmRILHCNQrxCGVroT4/+mZKNAlChQzDAy2qXNOAvmmErXzV+0s3Ax0CdYIsmf4pkv67nC5PT+W63E6u8sQzn3Y5q2KeuaWXfJxPr4Q04nitfAxptlLXrR15VYLKsue4m43aiHJt51wo6gaQKfqlTWCp3LXP2plLv/B5IT6QwPUzVPYjXkjAIFEY6BO8zeVWd5//NAGUva+JuAsmNx//ERxXU18tMHLVxlMj/8aDnHxr/Pcz9/2LLf5nT8bQWogJ3mYUrnQpi1J8vwu2nFwfytDdcwBGgPJQANklAsl75cn8hzE3r1Xj/RgZctHcBoOEEopp/mix8YGlgXUzCrN1L7/vESZ7dQgELVd7btMn0tTKno08BSBBLfkdIkWOsDjK2zSlkj8Lm/RlnuXYtbCkWbXEegbCne7rbVuR0ea16YXsFGDxN7ggsgwGrrqMnbIqBLbWcqPUOBGR/PuEdWKpGOwtEJLIhWPIBAWPOXLSuRv5uIqv+b9CHp8DfppRREvk8h2OEdzOsFBAs+anMjDfCXgQOr1d8mTSQOrgDlxZUHkKaYjHHM15xLEcwrymjkCyZ2qejB+z+uH8KXEjM4jXT4t0rzop5X4E6gCGbUwHC8mNyEgbCilEaRRoptsbt+wGC2frT//cENa+YXXZL8qT5RLqteQLgsk5ImbQeGrWQjMUg/kDauhEXsxuC8vPT8pIl+6RL90iX7qRMFyE1VPdqhSU+r28Y6BM3LhUefdFlt27k02aQhvAuxpZW/1On2SsO4N4olIH90I+B/ovsaCKyxiDo8dvq2me3uMICtl6nVdsU9mdohvlksIo1pP3C4sBqr8vTQiebLvIkQWQy0wNSI0/pOM4nNHDLlL0sU6TClKT5mTwyZS+74FfepAtIvWhD+bp6xUTIq4xvFy5+01ZxoyuLGY3qKAhf3hbM3yVjs0O6DnZpuXHc72lzZc0JOCjal8HMMYmkwL0oy8MD1iU3toFeDxwRKN+4KlPRb3akbfsqKE1rwok9PAafO3mmB/Vl6shAjqPbjqRhwIvZ2Yscxt30ZXFKsvXEtkuXAIs9/6WhIYmXbl/QoD84//Iiblc5B1PUjP59ZLwvaxyZdLM+GsX0idduofN7Z5/gqOft07R0NsAu0zB4Z345vN3Q+1qWr/ayzchRFIB+SLpXtWkQw2qULaOzGlNIvCyU6ZxJ0Wq9Lk16g0jtVPBfQCtagr0Pg1I9L1b/LKlqbSajc2P2eAkySA+l7Jk2vxakpoYPR6iuAwJpsicIZWzQAAHSqaF3PP06cQ5KqaUnxhAV4Wm5X0LmT90psEYTwlfYOtCUHH8TvAPh+OUAXDY85Xyun7Hjnxp0dxGGf+dbYNuDJpjSA/VfqBU0lvrWa7lybNfNbtqIWjP/FSjf/i+Ox4hHzgXVFJlDX4I2hVMlPk73c1TaKsZm6uar1qUKtEib9InAy7/ta3euzfVIQoM5KLuaX8iAo9vMy59Lnt5A0f7e0uI9LYfMYas9ORnvK+dJH5q+JP6T9gzF5XrvfCuNJBk9eh/aDKvBv3+XoVG6sDXWqvH9PuHr/V652E6qR0H8FJKCxEKebagSxlG1OB/6xhWG5bmek6Fp771gZ3VgzXGxDIZHMotAP9cejXNCs0WjM50oO9h6s2de15EWwggAK6yfC2MDkEJLBXypJty0ckAwXbBnlNVvuANmcv7EDbD9xw9VXtPlo2lN6RUNa3BFOCWziRHYMflR246b3gdbMP0wXJ/QaTlUlsfEqWpdnm32FjdCnr4DoXG43551lkgAMbPPi4oSl01NyeXnrnSEFkjwANcmB6ohqZeoskv0U3rlGU90XD2Ib9Hx1tgiq2zc0KMLhS/cuLWd+FOQFWwCnK1XnwBT0TRvSTKlkRXpG7q8pmEam304h1w8IskiNSUvty3gjtnGPZwcSSAK4agBe0ZXs08AO8mNNoVUii3ft9oOGlQ3SfuIgJYxU9Z5R+305gohDveYd7ZMlXe4LitEF2d1yj3dClHWHGbTc6xoCTgK57nseNXivoutUgWOVJM3JVFvSa9FY+PAKdvSa9Fqca7GkfKsa8Jol81xx15S+h65TcIStG/HSU+zwwmYIwD3GCZ9dCIineSTFdjc7TsHTHxOCUGUjZ8FX5hmIfmsuzcFBBo5679lRkY3Xu3YnyA0QPxFoTp9jB8DF4HPbUxylgs7SeMEgAg5oD9KBvqq5cSap/dCPzshQ6b1TiO6YNBSJYFfrncIUxxSj9uniFvr99JE/tAf9yuajSZzlsq0vpYjO69A0ynCaEt4XnJ8MKdXE8Fv+OnS6uRiERHyAfFmhDEJYQ9qxL2DjW6V/BjIKsqUZVPJdB9+FMqmX+eF2MS7RvKrijXtHn9XVEeWErAAei0BUq7TCmM0q0/a5orQX72AOvkECiv34pbHKMoXOixzprpQEUZP1n6KnuDQ5R1zQHJ1erHAZEj0nMF+eM0NcIbcS672VYFl7qEFbWHpO1H8zpAFoJSwLjO15XgV3Vxjdx3IbBHo0wmBV3LeaY2Ml7CFEWScMEBbht+GJT2UgJXfERZocCNoZveJUFjbWG10qx5fnOFvmKqJHZ030d+xh1V5d5j495DOHotLo/aePtUvME9Uoy/I6Wu63oZFiLsaPXXLVCP3Lm6oMJArXWkBT0I78Djt0gpgdMfMHRe1dlgoPA4F0FrcWSlBaJtgPWeVyEAEjbf3aRxwqCXXoIbPxkqUActF9S8ZWQAA2ypxlehCFm1YUmH/0LbvO0t9RWCwOKIxKDJtHkyud7h1r7aKBxfoXJ7KuflgWarVluY/yaeQU9EHzMNq4FP6RDrS/m1cz6hnpT22YNpnWGnAGqdGlfo9pnAzjSNaw2mqNQONkcTxJH0aP5JbRYnPTahNCgn1gmS+2LR/8c19eQsiswBonCMdESOSA1O7UXneBoObw8g3ziGC0q2vw3tudWBdQiBO47jbsN5NfoBe9lkj9RdAcVGR7ULq2AvOvgad2w1epiP/qbRdEMChR2cFI5pVBcAAc2xCAAAAA==",k="/Computer-Science-Learn-Notes/assets/n1ql-query-workflow-86355ff5.webp",m="/Computer-Science-Learn-Notes/assets/n1ql-query-workflow-cover-idx-5bf4be18.webp",v="/Computer-Science-Learn-Notes/assets/mvcc-1-45990a5f.webp",h="/Computer-Science-Learn-Notes/assets/mvcc-2-f4ee7032.webp",g="/Computer-Science-Learn-Notes/assets/643-04527d4f.webp",b="/Computer-Science-Learn-Notes/assets/640-0f49ccfa.webp",f="/Computer-Science-Learn-Notes/assets/ipv4-head-1fc77695.webp",y="/Computer-Science-Learn-Notes/assets/ping-0-0763aade.webp",w="/Computer-Science-Learn-Notes/assets/ping-1-cd35a2f2.webp",_="/Computer-Science-Learn-Notes/assets/ping-2-9cfbc0aa.webp",x="/Computer-Science-Learn-Notes/assets/ping-3-ac827c99.webp",C="/Computer-Science-Learn-Notes/assets/ping-4-f9d12436.webp",S="/Computer-Science-Learn-Notes/assets/ping-5-75f835bf.webp",L="/Computer-Science-Learn-Notes/assets/virtual-addresses-1-c3cdeb6f.webp",M="/Computer-Science-Learn-Notes/assets/virtual-addresses-2-ec317541.webp",q="/Computer-Science-Learn-Notes/assets/virtual-addresses-3-4ee1db33.webp",R="/Computer-Science-Learn-Notes/assets/red-black-tree-fd56074f.webp",A="/Computer-Science-Learn-Notes/assets/sorted-sets-skiplist-40612da3.webp",P="/Computer-Science-Learn-Notes/assets/91-e69de54e.webp",E="/Computer-Science-Learn-Notes/assets/92-939d089f.webp",T={},I=n("h2",{id:"å‰è¨€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å‰è¨€","aria-hidden":"true"},"#"),s(" å‰è¨€")],-1),j=t(`<h2 id="ğŸ¦java-åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#ğŸ¦java-åŸºç¡€" aria-hidden="true">#</a> ğŸ¦Java åŸºç¡€</h2><h3 id="arraylistçº¿ç¨‹å®‰å…¨å—-æŠŠarraylistå˜æˆçº¿ç¨‹å®‰å…¨æœ‰å“ªäº›æ–¹æ³•-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#arraylistçº¿ç¨‹å®‰å…¨å—-æŠŠarraylistå˜æˆçº¿ç¨‹å®‰å…¨æœ‰å“ªäº›æ–¹æ³•-2023ç¾å›¢" aria-hidden="true">#</a> ArrayListçº¿ç¨‹å®‰å…¨å—ï¼ŸæŠŠArrayListå˜æˆçº¿ç¨‹å®‰å…¨æœ‰å“ªäº›æ–¹æ³•ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>å°†ArrayListå˜æˆçº¿ç¨‹å®‰å…¨æœ‰å‡ ç§æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨<strong>Collections.synchronizedList()</strong> æ–¹æ³•å°†ArrayListè½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨çš„Listã€‚è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Listï¼Œä½¿ç”¨è¯¥Listæ—¶éœ€è¦åœ¨è®¿é—®å®ƒçš„æ–¹æ³•ä¸Šæ·»åŠ synchronizedå…³é”®å­—ï¼Œä»¥ä¿è¯å¤šçº¿ç¨‹è®¿é—®çš„å®‰å…¨æ€§ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> synchronizedList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>ä½¿ç”¨<strong>CopyOnWriteArrayList</strong>ç±»æ¥ä»£æ›¿ArrayListã€‚CopyOnWriteArrayListæ˜¯ä¸€ç§çº¿ç¨‹å®‰å…¨çš„Listå®ç°ï¼Œå®ƒé€šè¿‡åœ¨å†™æ“ä½œæ—¶å¤åˆ¶æ•´ä¸ªæ•°ç»„æ¥ä¿è¯çº¿ç¨‹å®‰å…¨æ€§ï¼Œåœ¨è¯»æ“ä½œæ—¶ä¸éœ€è¦åŠ é”ï¼Œå› æ­¤å¯ä»¥æé«˜è¯»å–æ•ˆç‡ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">CopyOnWriteArrayList</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CopyOnWriteArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CopyOnWriteArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ä½¿ç”¨<strong>Lockæ¥å£</strong>æ¥å®ç°åŒæ­¥ã€‚å¯ä»¥ä½¿ç”¨ReentrantLockç±»æ¥å®ç°å¯¹ArrayListçš„åŒæ­¥æ“ä½œï¼Œè¯¥ç±»æä¾›äº†ä¸synchronizedç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯å…·æœ‰æ›´é«˜çš„çµæ´»æ€§ã€‚æ¯”å¦‚å¯ä»¥ä½¿ç”¨tryLock()æ–¹æ³•æ¥å°è¯•è·å–é”ï¼Œé¿å…äº†çº¿ç¨‹çš„é•¿æ—¶é—´ç­‰å¾…ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Lock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹ ArrayList çš„æ“ä½œ</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>ä½¿ç”¨<strong>è¯»å†™é”</strong>æ¥å®ç°åŒæ­¥ã€‚å¯ä»¥ä½¿ç”¨ReentrantReadWriteLockç±»æ¥å®ç°å¯¹ArrayListçš„è¯»å†™æ“ä½œçš„åŒæ­¥ã€‚è¯¥ç±»æä¾›äº†è¯»é”å’Œå†™é”ä¸¤ç§é”ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è·å–è¯»é”ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–å†™é”ï¼Œåœ¨å†™æ“ä½œæ—¶éœ€è¦å…ˆè·å–å†™é”ï¼Œä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ReadWriteLock</span> rwLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
rwLock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹ ArrayList çš„è¯»æ“ä½œ</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    rwLock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
rwLock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹ ArrayList çš„å†™æ“ä½œ</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    rwLock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>ä½¿ç”¨ <strong>Vector</strong>: Vector æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œä¸ ArrayList éå¸¸ç›¸ä¼¼ï¼Œå¯ä»¥ä½œä¸ºæ›¿ä»£å“ã€‚ä½†æ˜¯ï¼Œç”±äº Vector çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</li></ol>`,12),O=n("p",null,"å‚è€ƒæ–‡çŒ®ï¼š",-1),B={href:"https://stackoverflow.com/questions/2444005/how-do-i-make-my-arraylist-thread-safe-another-approach-to-problem-in-java",target:"_blank",rel:"noopener noreferrer"},N={href:"https://stackoverflow.com/questions/18983362/how-to-prove-arraylist-is-not-thread-safe-with-a-test",target:"_blank",rel:"noopener noreferrer"},D={href:"https://stackoverflow.com/questions/300519/arraylist-vs-vectors-in-java-if-thread-safety-isnt-a-concern",target:"_blank",rel:"noopener noreferrer"},J=n("h3",{id:"arraylistçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸äº†è§£å—-å•çº¿ç¨‹æƒ…å†µä¸‹ä¼šå‘ç”Ÿå—-2023å°çº¢ä¹¦",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#arraylistçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸äº†è§£å—-å•çº¿ç¨‹æƒ…å†µä¸‹ä¼šå‘ç”Ÿå—-2023å°çº¢ä¹¦","aria-hidden":"true"},"#"),s(" ArrayListçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸äº†è§£å—ï¼Ÿå•çº¿ç¨‹æƒ…å†µä¸‹ä¼šå‘ç”Ÿå—ï¼Ÿï¼ˆ2023å°çº¢ä¹¦ï¼‰")],-1),H=n("p",null,"è¿™ç§å¼‚å¸¸é€šå¸¸å‘ç”Ÿåœ¨å¯¹ArrayListè¿›è¡Œéå†æ—¶ï¼ŒåŒæ—¶å°è¯•ä¿®æ”¹å®ƒçš„ç»“æ„ï¼ˆä¾‹å¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ã€‚è¿™ç§å¼‚å¸¸è¢«ç§°ä¸ºConcurrentModificationExceptionã€‚",-1),z=n("p",null,"åœ¨å•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œè¿™ç§å¼‚å¸¸ä¹Ÿå¯èƒ½å‘ç”Ÿã€‚å½“ä½ åœ¨ä½¿ç”¨è¿­ä»£å™¨éå†ArrayListé›†åˆæ—¶ï¼Œå¦‚æœä½¿ç”¨ArrayListçš„æ–¹æ³•ï¼ˆå¦‚add()æˆ–remove()ï¼‰ä¿®æ”¹äº†é›†åˆçš„ç»“æ„ï¼Œå°±å¯èƒ½è§¦å‘è¿™ä¸ªå¼‚å¸¸ã€‚è¿™æ˜¯å› ä¸ºArrayListçš„å†…éƒ¨å®ç°ä½¿ç”¨äº†ä¸€ä¸ªmodCountå˜é‡æ¥è·Ÿè¸ªç»“æ„ä¿®æ”¹çš„æ¬¡æ•°ã€‚å½“è¿­ä»£å™¨æ£€æµ‹åˆ°modCountå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚",-1),F=n("p",null,"ä¸ºäº†é¿å…è¿™ç§å¼‚å¸¸ï¼Œä½ å¯ä»¥åœ¨éå†ArrayListæ—¶é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š",-1),U=n("ol",null,[n("li",null,"ä½¿ç”¨Iteratorçš„remove()æ–¹æ³•æ¥åˆ é™¤å…ƒç´ ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ArrayListçš„remove()æ–¹æ³•ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿modCountçš„å€¼åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¿æŒä¸€è‡´ã€‚"),n("li",null,"å¦‚æœéœ€è¦éå†è¿‡ç¨‹ä¸­æ·»åŠ å…ƒç´ ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ListIteratorï¼Œå®ƒæä¾›äº†add()æ–¹æ³•ï¼Œå…è®¸åœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹åˆ—è¡¨ç»“æ„ã€‚"),n("li",null,"å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨Java 8çš„Stream APIï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´å®‰å…¨çš„æ–¹å¼æ¥å¤„ç†é›†åˆçš„å¹¶å‘ä¿®æ”¹é—®é¢˜ã€‚"),n("li",null,"å¦‚æœä½ ç¡®å®éœ€è¦åœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹ArrayListï¼Œå¯ä»¥è€ƒè™‘å…ˆå¤åˆ¶ä¸€ä¸ªæ–°çš„ArrayListï¼Œç„¶ååœ¨æ–°çš„ArrayListä¸Šè¿›è¡Œä¿®æ”¹ã€‚éå†å®Œæˆåï¼Œå†å°†æ–°çš„ArrayListèµ‹å€¼ç»™åŸæ¥çš„å¼•ç”¨ã€‚è¿™æ ·å¯ä»¥é¿å…åœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹åŸå§‹ArrayListçš„ç»“æ„ã€‚")],-1),G=n("p",null,"å‚è€ƒï¼š",-1),V={href:"https://stackoverflow.com/questions/602636/why-is-a-concurrentmodificationexception-thrown-and-how-to-debug-it",target:"_blank",rel:"noopener noreferrer"},X={href:"https://www.javatpoint.com/concurrentmodificationexception-in-java",target:"_blank",rel:"noopener noreferrer"},W=t(`<h3 id="é¢å‘è¿‡ç¨‹çš„æ–¹æ³•å­˜åœ¨å“ªäº›é—®é¢˜-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#é¢å‘è¿‡ç¨‹çš„æ–¹æ³•å­˜åœ¨å“ªäº›é—®é¢˜-2023ç¾å›¢" aria-hidden="true">#</a> é¢å‘è¿‡ç¨‹çš„æ–¹æ³•å­˜åœ¨å“ªäº›é—®é¢˜ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><ol><li>å¯ç»´æŠ¤æ€§è¾ƒå·®ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹ä¸»è¦ä¾èµ–äºå‡½æ•°å’Œè¿‡ç¨‹ï¼Œéšç€ä»£ç è§„æ¨¡çš„å¢å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»£ç ç»“æ„å¤æ‚ï¼Œä¸æ˜“ç»´æŠ¤ã€‚</li><li>å¯å¤ç”¨æ€§è¾ƒä½ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹éš¾ä»¥å®ç°æ¨¡å—åŒ–ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥å¤ç”¨ï¼Œè¿›ä¸€æ­¥å¢åŠ å¼€å‘æ—¶é—´å’Œæˆæœ¬ã€‚</li><li>æ‰©å±•æ€§ä¸è¶³ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹åœ¨ä»£ç é€»è¾‘å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¾€å¾€éœ€è¦å¯¹ç¨‹åºè¿›è¡Œå¤§é‡çš„ä¿®æ”¹ï¼Œè¿™æ ·çš„ä»£ç æ‰©å±•æ€§ä¸è¶³ã€‚</li><li>æŠ½è±¡èƒ½åŠ›æœ‰é™ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹ä¸»è¦å…³æ³¨è¿‡ç¨‹å’Œç®—æ³•ï¼Œè€Œä¸æ˜¯æ•°æ®ç»“æ„å’Œå¯¹è±¡ï¼Œè¿™ä½¿å¾—å®ƒåœ¨è¡¨è¾¾ç°å®ä¸–ç•Œçš„å¤æ‚é—®é¢˜æ—¶æŠ½è±¡èƒ½åŠ›æœ‰é™ã€‚</li><li>å°è£…æ€§å·®ï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹æ²¡æœ‰æä¾›è‰¯å¥½çš„å°è£…æœºåˆ¶ï¼Œç¨‹åºä¸­çš„æ•°æ®å’Œå¤„ç†è¿‡ç¨‹å®¹æ˜“æš´éœ²ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®å®‰å…¨æ€§å’Œç¨‹åºç¨³å®šæ€§é—®é¢˜ã€‚</li><li>å¼ºè€¦åˆï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„æ–¹æ³•å¾€å¾€å¯¼è‡´ç¨‹åºç»„ä»¶ä¹‹é—´å­˜åœ¨å¼ºè€¦åˆï¼Œå½“ä¸€ä¸ªç»„ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯èƒ½ä¼šå½±å“å…¶ä»–ç»„ä»¶çš„æ­£å¸¸å·¥ä½œã€‚</li></ol><h3 id="é¢å‘è¿‡ç¨‹å¥½å¤„æ˜¯ä»€ä¹ˆ-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#é¢å‘è¿‡ç¨‹å¥½å¤„æ˜¯ä»€ä¹ˆ-2023ç¾å›¢" aria-hidden="true">#</a> é¢å‘è¿‡ç¨‹å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><ul><li>é¢å‘è¿‡ç¨‹ç¼–ç¨‹é‡‡ç”¨è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼ï¼Œå°†é—®é¢˜åˆ†è§£ä¸ºä¸€ä¸ªä¸ªå°çš„æ¨¡å—ï¼Œä¾¿äºç†è§£å’Œç¼–å†™ã€‚</li><li>æ¯ä¸ªæ¨¡å—ç›¸å¯¹ç‹¬ç«‹ï¼Œå‡ºç°é—®é¢˜æ—¶å¯ä»¥å•ç‹¬è°ƒè¯•ï¼Œé™ä½äº†è°ƒè¯•éš¾åº¦ã€‚</li><li>é¢å‘è¿‡ç¨‹ç¼–ç¨‹é€‚åˆè§£å†³ç®€å•ã€é€»è¾‘æ€§å¼ºçš„é—®é¢˜ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå­¦ä¹ æˆæœ¬è¾ƒä½ã€‚</li></ul><h3 id="object-æœ‰å“ªäº›æ–¹æ³•-2023ç™¾åº¦" tabindex="-1"><a class="header-anchor" href="#object-æœ‰å“ªäº›æ–¹æ³•-2023ç™¾åº¦" aria-hidden="true">#</a> object æœ‰å“ªäº›æ–¹æ³•ï¼ˆ2023ç™¾åº¦ï¼‰</h3><p>å½“é¢è¯•å®˜é—®åˆ° Java ä¸­ Object ç±»çš„æ–¹æ³•æ—¶ï¼Œå¦‚æœä½ æ— æ³•è®°ä½æ‰€æœ‰çš„æ–¹æ³•ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹å›ç­”ç­–ç•¥ï¼š</p><ul><li>å¼ºè°ƒ<strong>åŸºæœ¬æ–¹æ³•</strong>ï¼šé¦–å…ˆæåŠæœ€å¸¸ç”¨å’Œæœ€åŸºæœ¬çš„å‡ ä¸ªæ–¹æ³•ï¼Œå¦‚ equals()ã€hashCode()ã€toString()ï¼Œè¿™äº›æ–¹æ³•å‡ ä¹åœ¨æ¯ä¸ªå¯¹è±¡ä¸­éƒ½ä¼šç”¨åˆ°ã€‚ <ul><li>equals(Object obj): æ£€æŸ¥å½“å‰å¯¹è±¡æ˜¯å¦ä¸å¦ä¸€ä¸ªå¯¹è±¡ç›¸ç­‰ã€‚</li><li>hashCode(): è¿”å›å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚</li><li>toString(): è¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li></ul></li><li>æåŠ<strong>é‡è¦çš„æ–¹æ³•</strong>ï¼šæ¥ä¸‹æ¥å¯ä»¥æåŠä¸€äº›è¾ƒä¸ºé‡è¦çš„æ–¹æ³•ï¼Œå¦‚ getClass() ç”¨äºè·å–å¯¹è±¡çš„è¿è¡Œæ—¶ç±»ï¼Œclone() ç”¨äºåˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬ç­‰ã€‚ <ul><li>clone(): åˆ›å»ºå¹¶è¿”å›å½“å‰å¯¹è±¡çš„å‰¯æœ¬ã€‚</li><li>getClass(): è¿”å›å¯¹è±¡çš„è¿è¡Œæ—¶ç±»ã€‚</li></ul></li><li>è°ˆè®º<strong>å¯¹è±¡é—´çš„é€šä¿¡</strong>ï¼šå¼ºè°ƒ wait()ã€notify()ã€notifyAll() è¿™äº›ç”¨äºçº¿ç¨‹é—´é€šä¿¡çš„æ–¹æ³•ï¼Œè¯´æ˜å…¶åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„ä½œç”¨ã€‚ <ul><li>notify(): å”¤é†’åœ¨è¯¥å¯¹è±¡ä¸Šç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ã€‚</li><li>notifyAll(): å”¤é†’åœ¨è¯¥å¯¹è±¡ä¸Šç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚</li><li>wait(): å¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥å¯¹è±¡çš„ notify() æˆ– notifyAll() æ–¹æ³•ã€‚</li></ul></li><li>è°ˆè®º<strong>åƒåœ¾å›æ”¶</strong>ï¼šæåŠ finalize() æ–¹æ³•ï¼Œå®ƒåœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶ä¹‹å‰è°ƒç”¨ï¼Œå¯ä»¥ç”¨äºæ‰§è¡Œä¸€äº›æ¸…ç†æ“ä½œã€‚ <ul><li>finalize(): åœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ä¹‹å‰è°ƒç”¨ã€‚</li></ul></li></ul><h3 id="å¦‚æœè®©ä½ è‡ªå·±å®ç°ä¸€ä¸ª-map-ä½ ä¼šæ€ä¹ˆåš-2023ç™¾åº¦" tabindex="-1"><a class="header-anchor" href="#å¦‚æœè®©ä½ è‡ªå·±å®ç°ä¸€ä¸ª-map-ä½ ä¼šæ€ä¹ˆåš-2023ç™¾åº¦" aria-hidden="true">#</a> å¦‚æœè®©ä½ è‡ªå·±å®ç°ä¸€ä¸ª map ä½ ä¼šæ€ä¹ˆåšï¼ˆ2023ç™¾åº¦ï¼‰</h3><ol><li>å®šä¹‰Mapæ¥å£,åŒ…æ‹¬get,put,remove,size,isEmptyç­‰æ–¹æ³•</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MyMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>å®ç°HashMap,ä½¿ç”¨å“ˆå¸Œè¡¨å’Œé“¾è¡¨è§£å†³hashå†²çª</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyHashMap</span> <span class="token keyword">implements</span> <span class="token class-name">MyMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">LinkedList</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buckets<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">MyHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        buckets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> hash <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> hash <span class="token operator">%</span> buckets<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token class-name">LinkedList</span> list <span class="token operator">=</span> buckets<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span> node <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> node<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// çœç•¥å®ç°...</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// å…¶ä»–æ–¹æ³•çœç•¥...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>å®ç°TreeMap,ä½¿ç”¨çº¢é»‘æ ‘æ’åºå¹¶å­˜å‚¨key-value</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTreeMap</span> <span class="token keyword">implements</span> <span class="token class-name">MyMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span> root<span class="token punctuation">;</span>
    
    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> key<span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value<span class="token punctuation">;</span>
        <span class="token class-name">Node</span> left<span class="token punctuation">;</span>
        <span class="token class-name">Node</span> right<span class="token punctuation">;</span>
        <span class="token comment">// çœç•¥æ„é€ æ–¹æ³•...</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span> node <span class="token operator">=</span> root<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                node <span class="token operator">=</span> node<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                node <span class="token operator">=</span> node<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> node<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// çœç•¥å®ç°...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½œä¸º-map-çš„-key-éœ€è¦é‡å†™å“ªäº›æ–¹æ³•-2023å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#ä½œä¸º-map-çš„-key-éœ€è¦é‡å†™å“ªäº›æ–¹æ³•-2023å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> ä½œä¸º map çš„ key éœ€è¦é‡å†™å“ªäº›æ–¹æ³•ï¼Ÿï¼ˆ2023å®Œç¾ä¸–ç•Œï¼‰</h3><p>é¦–å…ˆï¼Œå…ˆç†è§£é¢è¯•é¢˜çš„æ„æ€ï¼Œå¯ä»¥ç†è§£ä¸ºï¼š<strong>å¦‚æœä½ è¦ç”¨è‡ªå·±çš„ç±»çš„å¯¹è±¡ä½œä¸ºMapçš„é”®ï¼Œä½ éœ€è¦é‡å†™è¿™ä¸ªç±»çš„å“ªäº›æ–¹æ³•ï¼Ÿ</strong></p><ul><li>åœ¨Javaä¸­ï¼ŒMapæ¥å£æ˜¯åŸºäºé”®å€¼å¯¹çš„ï¼Œæ¯ä¸ªé”®éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚Javaä½¿ç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è®¡ç®—å“ˆå¸Œå€¼ï¼Œè¿™ä¸ªå“ˆå¸Œå€¼ç”¨äºç¡®å®šåœ¨Mapå†…éƒ¨å­˜å‚¨ç»“æ„ä¸­çš„ä½ç½®ã€‚åŒæ—¶ï¼ŒJavaä¹Ÿä½¿ç”¨é”®å¯¹è±¡çš„equals()æ–¹æ³•æ¥æ£€æŸ¥ä¸¤ä¸ªé”®æ˜¯å¦ç›¸ç­‰ã€‚</li><li>æ‰€ä»¥ï¼Œå¦‚æœä½ çš„ç±»çš„å¯¹è±¡è¦ä½œä¸ºMapçš„é”®ä½¿ç”¨ï¼Œé‚£ä¹ˆé€šå¸¸éœ€è¦ä½ é‡å†™è¿™ä¸ªç±»çš„hashCode()å’Œequals()æ–¹æ³•ï¼Œä»¥ç¡®ä¿å®ƒä»¬çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚</li><li>å¦‚æœä¸é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆé»˜è®¤çš„hashCode()æ–¹æ³•å°†è¿”å›æ¯ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œequals()æ–¹æ³•å°†ä»…æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºï¼Œæ¯”å¦‚ä¸¤ä¸ªå†…å®¹å®Œå…¨ç›¸åŒä½†å†…å­˜åœ°å€ä¸åŒçš„å¯¹è±¡è¢«è§†ä¸ºä¸åŒçš„é”®ã€‚</li></ul><p>åœ¨Javaä¸­ï¼Œä½œä¸ºMapçš„é”®ï¼ˆkeyï¼‰ï¼Œä½ é€šå¸¸éœ€è¦é‡å†™ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p><ol><li><strong>hashCode()</strong>ï¼šè¿™ä¸ªæ–¹æ³•è¿”å›å¯¹è±¡çš„å“ˆå¸Œç ï¼Œç”¨äºç¡®å®šåœ¨å“ˆå¸Œè¡¨ä¸­çš„å­˜å‚¨ä½ç½®ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡è¢«è®¤ä¸ºç›¸ç­‰ï¼ˆæ ¹æ®equals()æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„hashCode()æ–¹æ³•å¿…é¡»è¿”å›ç›¸åŒçš„å€¼ã€‚</li><li><strong>equals()</strong>ï¼šè¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚åœ¨Javaçš„Mapä¸­ï¼Œå½“æˆ‘ä»¬è°ƒç”¨get(key)æˆ–containsKey(key)æ–¹æ³•æ—¶ï¼ŒMapå®ç°ä¼šç”¨è¿™ä¸ªæ–¹æ³•æ¥æŸ¥æ‰¾ä¸ç»™å®šé”®åŒ¹é…çš„é”®ã€‚</li></ol><p>å½“ä½ åˆ›å»ºè‡ªå®šä¹‰çš„ç±»å¹¶æ‰“ç®—å°†å…¶å®ä¾‹ç”¨ä½œMapçš„é”®æ—¶ï¼Œé€šå¸¸éœ€è¦è¦†ç›–è¿™ä¸¤ä¸ªæ–¹æ³•ä»¥ç¡®ä¿å®ƒä»¬çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚å¦‚æœä¸è¿™æ ·åšï¼ŒMapå¯èƒ½æ— æ³•æ­£ç¡®åœ°æŸ¥æ‰¾ã€æ·»åŠ æˆ–åˆ é™¤é”®å€¼å¯¹ã€‚</p><h3 id="listçš„å®ç°ç±»-2023é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#listçš„å®ç°ç±»-2023é˜¿é‡Œ" aria-hidden="true">#</a> Listçš„å®ç°ç±»ï¼ˆ2023é˜¿é‡Œï¼‰</h3><p>Javaä¸­çš„Listæ¥å£æœ‰å¤šä¸ªå®ç°ç±»ï¼Œå¸¸ç”¨çš„åŒ…æ‹¬ï¼š</p><ul><li>ArrayListï¼šåŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œä¼˜åŠ¿åœ¨äºæ”¯æŒéšæœºè®¿é—®å’Œå¿«é€Ÿæ’å…¥/åˆ é™¤å…ƒç´ ï¼Œé€‚ç”¨äºé¢‘ç¹è¯»å–å’Œéå†çš„åœºæ™¯ã€‚</li><li>LinkedListï¼šåŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œä¼˜åŠ¿åœ¨äºæ”¯æŒå¿«é€Ÿæ’å…¥/åˆ é™¤å…ƒç´ ï¼Œé€‚ç”¨äºé¢‘ç¹æ’å…¥/åˆ é™¤å…ƒç´ çš„åœºæ™¯ã€‚</li><li>Vectorï¼šå’ŒArrayListç±»ä¼¼ï¼Œä½†ç”±äºå…¶çº¿ç¨‹å®‰å…¨æ€§ï¼Œé€‚ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒã€‚</li><li>Stackï¼šåŸºäºVectorå®ç°ï¼Œæ˜¯ä¸€ä¸ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºéœ€è¦æŒ‰ç…§åè¿›å…ˆå‡ºé¡ºåºå¤„ç†å…ƒç´ çš„åœºæ™¯ã€‚</li></ul><h3 id="listå’Œsetçš„åŒºåˆ«-2023é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#listå’Œsetçš„åŒºåˆ«-2023é˜¿é‡Œ" aria-hidden="true">#</a> Listå’ŒSetçš„åŒºåˆ«ï¼ˆ2023é˜¿é‡Œï¼‰</h3><ol><li>é¡ºåºï¼šListæ˜¯æœ‰åºçš„é›†åˆï¼Œå®ƒå¯ä»¥æŒ‰ç…§å…ƒç´ æ’å…¥çš„é¡ºåºè¿›è¡Œå­˜å‚¨å’Œè®¿é—®ã€‚è€ŒSetæ˜¯æ— åºçš„é›†åˆï¼Œå…ƒç´ åœ¨é›†åˆä¸­çš„ä½ç½®æ˜¯ä¸å›ºå®šçš„ã€‚</li><li>é‡å¤å…ƒç´ ï¼šListå…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ï¼Œå³å¯ä»¥æœ‰å¤šä¸ªç›¸åŒçš„å¯¹è±¡ã€‚Setä¸å…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ï¼Œå³æ¯ä¸ªå¯¹è±¡åœ¨é›†åˆä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</li><li>å®ç°ç±»ï¼šListçš„å¸¸ç”¨å®ç°ç±»æœ‰ArrayListå’ŒLinkedListï¼Œåˆ†åˆ«ä½¿ç”¨æ•°ç»„å’Œé“¾è¡¨ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ã€‚Setçš„å¸¸ç”¨å®ç°ç±»æœ‰HashSetã€LinkedHashSetå’ŒTreeSetï¼Œåˆ†åˆ«åŸºäºå“ˆå¸Œè¡¨ã€é“¾è¡¨+å“ˆå¸Œè¡¨å’Œçº¢é»‘æ ‘å®ç°ã€‚</li><li>æ€§èƒ½ï¼šç”±äºåº•å±‚æ•°æ®ç»“æ„çš„å·®å¼‚ï¼ŒListå’ŒSetåœ¨å¢åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾ç­‰æ“ä½œä¸Šçš„æ€§èƒ½è¡¨ç°æœ‰æ‰€ä¸åŒã€‚ä¾‹å¦‚ï¼ŒArrayListåœ¨éšæœºè®¿é—®å…ƒç´ æ—¶æ€§èƒ½è¾ƒå¥½ï¼Œè€ŒLinkedListåœ¨æ’å…¥å’Œåˆ é™¤å…ƒç´ æ—¶æ€§èƒ½è¾ƒå¥½ã€‚HashSetåœ¨æŸ¥æ‰¾ã€æ·»åŠ å’Œåˆ é™¤å…ƒç´ æ—¶æ€§èƒ½è¾ƒå¥½ï¼Œä½†ä¸ä¿è¯å…ƒç´ é¡ºåºã€‚TreeSetåœ¨ä¿æŒå…ƒç´ æ’åºçš„åŒæ—¶ï¼Œä¹Ÿèƒ½æä¾›è¾ƒå¥½çš„æŸ¥æ‰¾æ€§èƒ½ã€‚</li></ol><blockquote><p>è¡¥å……ï¼š Queue(å®ç°æ’é˜ŸåŠŸèƒ½çš„å«å·æœº): æŒ‰ç‰¹å®šçš„æ’é˜Ÿè§„åˆ™æ¥ç¡®å®šå…ˆåé¡ºåºï¼Œå­˜å‚¨çš„å…ƒç´ æ˜¯æœ‰åºçš„ã€å¯é‡å¤çš„ã€‚ Map(ç”¨ key æ¥æœç´¢çš„ä¸“å®¶): ä½¿ç”¨é”®å€¼å¯¹ï¼ˆkey-valueï¼‰å­˜å‚¨ï¼Œç±»ä¼¼äºæ•°å­¦ä¸Šçš„å‡½æ•° y=f(x)ï¼Œ&quot;x&quot; ä»£è¡¨ keyï¼Œ&quot;y&quot; ä»£è¡¨ valueï¼Œkey æ˜¯æ— åºçš„ã€ä¸å¯é‡å¤çš„ï¼Œvalue æ˜¯æ— åºçš„ã€å¯é‡å¤çš„ï¼Œæ¯ä¸ªé”®æœ€å¤šæ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚</p></blockquote><h3 id="é’ˆå¯¹ä½ è¯´çš„listå’Œsetçš„æ€§è´¨-é‚£ä½ ä¼šç”¨è¿™ä¸¤ç§ç»“æ„è§£å†³å“ªäº›é—®é¢˜-2023é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#é’ˆå¯¹ä½ è¯´çš„listå’Œsetçš„æ€§è´¨-é‚£ä½ ä¼šç”¨è¿™ä¸¤ç§ç»“æ„è§£å†³å“ªäº›é—®é¢˜-2023é˜¿é‡Œ" aria-hidden="true">#</a> é’ˆå¯¹ä½ è¯´çš„Listå’ŒSetçš„æ€§è´¨ï¼Œé‚£ä½ ä¼šç”¨è¿™ä¸¤ç§ç»“æ„è§£å†³å“ªäº›é—®é¢˜ï¼ˆ2023é˜¿é‡Œï¼‰</h3><p>Listï¼ˆåˆ—è¡¨ï¼‰é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li>æœ‰åºæ•°æ®ï¼šåˆ—è¡¨ä¸­çš„å…ƒç´ æŒ‰ç…§æ’å…¥é¡ºåºå­˜å‚¨ï¼Œå› æ­¤é€‚ç”¨äºéœ€è¦ä¿æŒå…ƒç´ é¡ºåºçš„åœºæ™¯ã€‚</li><li>å…è®¸é‡å¤å…ƒç´ ï¼šåˆ—è¡¨å…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ï¼Œå› æ­¤é€‚ç”¨äºéœ€è¦ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°çš„åœºæ™¯ã€‚</li><li>éœ€è¦æ ¹æ®ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œï¼šåˆ—è¡¨å…è®¸é€šè¿‡ç´¢å¼•å€¼ç›´æ¥è®¿é—®ã€æ’å…¥æˆ–åˆ é™¤å…ƒç´ ï¼Œé€‚ç”¨äºéœ€è¦é¢‘ç¹è¿›è¡Œè¿™äº›æ“ä½œçš„åœºæ™¯ã€‚</li></ol><p>Setï¼ˆé›†åˆï¼‰é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li>å»é‡ï¼šé›†åˆä¸­çš„å…ƒç´ ä¸èƒ½é‡å¤ï¼Œå› æ­¤é€‚ç”¨äºå»é™¤æ•°æ®ä¸­é‡å¤å…ƒç´ çš„åœºæ™¯ã€‚</li><li>æ— éœ€å…³å¿ƒå…ƒç´ é¡ºåºï¼šé›†åˆä¸­çš„å…ƒç´ æ²¡æœ‰å›ºå®šé¡ºåºï¼Œé€‚ç”¨äºå…ƒç´ é¡ºåºæ— å…³ç´§è¦çš„åœºæ™¯ã€‚</li><li>å¿«é€Ÿåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼šé›†åˆæä¾›äº†é«˜æ•ˆç‡çš„æŸ¥æ‰¾ç®—æ³•ï¼Œé€‚ç”¨äºéœ€è¦å¿«é€Ÿåˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºæ•°æ®é›†ä¸­çš„åœºæ™¯ã€‚</li><li>é›†åˆè¿ç®—ï¼šé›†åˆæ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰è¿ç®—ï¼Œé€‚ç”¨äºéœ€è¦è¿›è¡Œè¿™äº›è¿ç®—çš„åœºæ™¯ã€‚</li></ol><h3 id="javaåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼-é™¤äº†newå’Œåå°„è¿˜æœ‰å…¶ä»–å—-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#javaåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼-é™¤äº†newå’Œåå°„è¿˜æœ‰å…¶ä»–å—-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> Javaåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Œé™¤äº†newå’Œåå°„è¿˜æœ‰å…¶ä»–å—ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li>ä½¿ç”¨ new å…³é”®å­—: è¿™æ˜¯åˆ›å»ºå¯¹è±¡æœ€å¸¸è§çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">MyClass</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä½¿ç”¨ Java åå°„ (Reflection) APIï¼Œä¸»è¦æ˜¯ java.lang.Class ç±»ä¸­çš„ newInstance() æ–¹æ³•æˆ–è€… java.lang.reflect.Constructor ç±»ä¸­çš„ newInstance() æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.MyClass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ä½¿ç”¨ java.lang.Cloneable æ¥å£å’Œ clone() æ–¹æ³•ï¼šè¿™ç§æ–¹æ³•ç”¨äºåˆ›å»ºç°æœ‰å¯¹è±¡çš„å¤åˆ¶å“ã€‚å¯¹è±¡éœ€è¦å®ç° Cloneable æ¥å£ï¼Œå¹¶é‡å†™ clone() æ–¹æ³•ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">MyClass</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> obj1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>ä½¿ç”¨ Java åºåˆ—åŒ– (java.io.Serializable æ¥å£) å’Œååºåˆ—åŒ–ï¼šè¿™ç§æ–¹æ³•é€šå¸¸ç”¨äºåˆ›å»ºç°æœ‰å¯¹è±¡çš„å¤åˆ¶å“ï¼Œä½†å®ƒä¸è°ƒç”¨æ„é€ å™¨ã€‚å¯¹è±¡éœ€è¦å®ç° Serializable æ¥å£ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ObjectOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;data.obj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ObjectInputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;data.obj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>ä½¿ç”¨ java.lang.ClassLoader æˆ–è€… java.lang.Class çš„ defineClass() æ–¹æ³•ï¼šè¿™ç§æ–¹æ³•ç”¨äºä»ä¸€ä¸ªç±»çš„äºŒè¿›åˆ¶åç§°æˆ–è€…å­—èŠ‚ç åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å’Œå¯¹è±¡ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.MyClass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Java9ä»¥åæ¨èçš„å†™æ³•æ˜¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyClass</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span>clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="hashmap-ä¸ºä»€ä¹ˆè¦è½¬æˆçº¢é»‘æ ‘-ä¸æ˜¯ä¸€å¼€å§‹å°±ç”¨-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#hashmap-ä¸ºä»€ä¹ˆè¦è½¬æˆçº¢é»‘æ ‘-ä¸æ˜¯ä¸€å¼€å§‹å°±ç”¨-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> hashmapï¼Œä¸ºä»€ä¹ˆè¦è½¬æˆçº¢é»‘æ ‘ï¼Œä¸æ˜¯ä¸€å¼€å§‹å°±ç”¨ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>åœ¨Javaä¸­ï¼ŒHashMapä½¿ç”¨äº†é“¾è¡¨å’Œçº¢é»‘æ ‘ä¸¤ç§æ•°æ®ç»“æ„æ¥å­˜å‚¨æ•°æ®ã€‚åŸå› æ˜¯ï¼Œè¿™ä¸¤ç§æ•°æ®ç»“æ„åœ¨ä¸åŒçš„æƒ…å†µä¸‹å„æœ‰ä¼˜ç¼ºç‚¹ã€‚è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹HashMapåœ¨ä½•æ—¶ä»¥åŠä¸ºä»€ä¹ˆä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</p><p><strong>é“¾è¡¨</strong></p><ul><li>ä¼˜ç‚¹ï¼šç›¸æ¯”äºçº¢é»‘æ ‘ï¼Œé“¾è¡¨ç»“æ„æ›´ç®€å•ï¼Œå ç”¨ç©ºé—´è¾ƒå°‘ï¼Œä¸”åœ¨å“ˆå¸Œå†²çªè¾ƒå°‘çš„æƒ…å†µä¸‹å…·æœ‰è‰¯å¥½çš„æ€§èƒ½ã€‚</li><li>ç¼ºç‚¹ï¼šé“¾è¡¨åœ¨å“ˆå¸Œå†²çªè¾ƒå¤šçš„æƒ…å†µä¸‹ï¼ˆå³é“¾è¡¨é•¿åº¦è¾ƒé•¿æ—¶ï¼‰ï¼ŒæŸ¥æ‰¾æ€§èƒ½ä¼šæ˜æ˜¾ä¸‹é™ï¼Œå› ä¸ºéœ€è¦éå†é“¾è¡¨ã€‚</li></ul><p><strong>çº¢é»‘æ ‘</strong></p><ul><li>ä¼˜ç‚¹ï¼šçº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒèƒ½ä¿è¯æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œåœ¨å“ˆå¸Œå†²çªè¾ƒå¤šçš„æƒ…å†µä¸‹æ€§èƒ½æ›´ä¼˜ã€‚</li><li>ç¼ºç‚¹ï¼šç›¸æ¯”äºé“¾è¡¨ï¼Œçº¢é»‘æ ‘ç»“æ„æ›´å¤æ‚ï¼Œå ç”¨ç©ºé—´è¾ƒå¤šï¼Œä¸”åœ¨å“ˆå¸Œå†²çªè¾ƒå°‘çš„æƒ…å†µä¸‹æ€§èƒ½ä¼˜åŠ¿ä¸æ˜æ˜¾ã€‚</li></ul><p>ä¸ºäº†åœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šè¾¾åˆ°ä¸€ä¸ªå¹³è¡¡ï¼ŒJavaçš„HashMapé‡‡ç”¨äº†ä¸€ç§æŠ˜ä¸­çš„ç­–ç•¥ã€‚å®ƒåœ¨åˆå§‹åŒ–æ—¶ä½¿ç”¨é“¾è¡¨ç»“æ„æ¥å­˜å‚¨æ•°æ®ï¼Œä½†å½“é“¾è¡¨é•¿åº¦è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ç»“æ„ã€‚è¿™æ ·ï¼Œå½“å“ˆå¸Œå†²çªè¾ƒå°‘æ—¶ï¼ŒHashMapå¯ä»¥åˆ©ç”¨é“¾è¡¨çš„ç©ºé—´ä¼˜åŠ¿ï¼›è€Œåœ¨å“ˆå¸Œå†²çªè¾ƒå¤šæ—¶ï¼ŒHashMapåˆ™èƒ½ä»çº¢é»‘æ ‘çš„æ—¶é—´æ€§èƒ½ä¸Šå—ç›Šã€‚</p><p>å› æ­¤ï¼Œåœ¨Javaä¸­ï¼ŒHashMapä¸æ˜¯ä¸€å¼€å§‹å°±ä½¿ç”¨çº¢é»‘æ ‘ï¼Œè€Œæ˜¯æ ¹æ®å®é™…æƒ…å†µåŠ¨æ€åœ°é€‰æ‹©å¹¶è½¬æ¢æ•°æ®ç»“æ„ï¼Œä»¥è¾¾åˆ°æœ€ä½³æ€§èƒ½ã€‚</p><h2 id="ğŸ•-å¹¶å‘ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#ğŸ•-å¹¶å‘ç¼–ç¨‹" aria-hidden="true">#</a> ğŸ• å¹¶å‘ç¼–ç¨‹</h2><h3 id="çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥èƒ½è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å—-2023é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥èƒ½è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å—-2023é˜¿é‡Œ" aria-hidden="true">#</a> çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥èƒ½è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å—ï¼Ÿï¼ˆ2023é˜¿é‡Œï¼‰</h3><p>Javaçº¿ç¨‹æ± æ‹’ç»ç­–ç•¥æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>RejecttedExecutionHandler</code>æ¥å£æ¥å®šä¹‰ä½ è‡ªå·±çš„æ‹’ç»ç­–ç•¥ã€‚è¯¥æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•æ‹’ç»æ‰§è¡Œï¼ˆRunnable rï¼ŒThreadPoolExecatoræ‰§è¡Œå™¨ï¼‰ï¼Œå½“æ‰§è¡Œå™¨æ— æ³•æ‰§è¡Œä»»åŠ¡æ—¶è°ƒç”¨ã€‚ä½ å¯ä»¥å®ç°è¿™ä¸ªæ–¹æ³•æ¥å®šä¹‰ä½ è‡ªå·±çš„æ‹’ç»ç­–ç•¥ã€‚</p><p>ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomRejectedExecutionHandler</span> <span class="token keyword">implements</span> <span class="token class-name">RejectedExecutionHandler</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rejectedExecution</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> r<span class="token punctuation">,</span> <span class="token class-name">ThreadPoolExecutor</span> executor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Your custom rejection policy here</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">ThreadPoolExecutor</span> executor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>
        corePoolSize<span class="token punctuation">,</span>
        maxPoolSize<span class="token punctuation">,</span>
        keepAliveTime<span class="token punctuation">,</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CustomRejectedExecutionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨å¤šçº¿ç¨‹è¦æ³¨æ„å“ªäº›é—®é¢˜-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å¤šçº¿ç¨‹è¦æ³¨æ„å“ªäº›é—®é¢˜-2023ç¾å›¢" aria-hidden="true">#</a> ä½¿ç”¨å¤šçº¿ç¨‹è¦æ³¨æ„å“ªäº›é—®é¢˜ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>ä½¿ç”¨å¤šçº¿ç¨‹æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸€æ•°æ®æ—¶ï¼Œå¦‚æœä¸è¿›è¡Œæ­£ç¡®çš„åŒæ­¥æ§åˆ¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚éœ€è¦é€šè¿‡ä½¿ç”¨synchronizedï¼ŒLockï¼Œvolatileç­‰æœºåˆ¶æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li><li><strong>æ­»é”</strong>ï¼šæ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›å¹²æ¶‰é‚£ä»–ä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æˆ‘ä»¬åº”é¿å…åœ¨ä»£ç ä¸­äº§ç”Ÿæ­»é”ã€‚</li><li><strong>æ´»é”</strong>ï¼šæ´»é”æŒ‡çš„æ˜¯çº¿ç¨‹è™½ç„¶æ²¡æœ‰è¢«é˜»å¡ï¼Œä½†æ˜¯ç”±äºæŸç§æ¡ä»¶æ²¡æœ‰è¢«æ»¡è¶³ï¼Œå§‹ç»ˆæ— æ³•å‘å‰æ‰§è¡Œï¼Œå°±åƒåœ¨åŸåœ°è¸æ­¥ã€‚</li><li><strong>é¥¥é¥¿</strong>ï¼šç”±äºçº¿ç¨‹çš„ä¼˜å…ˆçº§è®¾ç½®ä¸åˆç†æˆ–è€…é”æœºåˆ¶ä¸å…¬å¹³ï¼Œå¯¼è‡´æŸäº›çº¿ç¨‹å§‹ç»ˆæ— æ³•è·å–åˆ°CPUèµ„æºæˆ–è€…é”èµ„æºï¼Œä»è€Œæ— æ³•è¿›è¡Œå·¥ä½œã€‚</li><li><strong>èµ„æºæ¶ˆè€—</strong>ï¼šæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå ç”¨ä¸€å®šçš„å†…å­˜èµ„æºï¼Œè¿‡å¤šçš„çº¿ç¨‹å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºæ¶ˆè€—è¿‡å¤§ã€‚åŒæ—¶ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä¹Ÿä¼šæ¶ˆè€—CPUèµ„æºï¼Œè¿‡å¤šçš„çº¿ç¨‹ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´CPUè´Ÿè½½è¿‡å¤§ã€‚</li><li><strong>æ•°æ®å…±äº«å’Œå¯è§æ€§</strong>ï¼šå¤šçº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®ï¼Œéœ€è¦ä¿è¯ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„ä¿®æ”¹å¯¹å…¶ä»–çº¿ç¨‹å¯è§ï¼Œå¯ä»¥ä½¿ç”¨volatileæˆ–è€…Atomicç±»æ¥ä¿è¯ã€‚</li><li><strong>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šéœ€è¦åˆç†çš„åˆ›å»ºã€å¯åŠ¨ã€æš‚åœã€æ¢å¤ã€ç»ˆæ­¢çº¿ç¨‹ï¼Œä¸åˆç†çš„ç®¡ç†å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºé”™è¯¯æˆ–è€…èµ„æºæ³„æ¼ã€‚</li><li><strong>çº¿ç¨‹å¼‚å¸¸å¤„ç†</strong>ï¼šçº¿ç¨‹ä¸­çš„æœªæ•è·å¼‚å¸¸ä¼šå¯¼è‡´çº¿ç¨‹ç»ˆæ­¢ï¼Œè€Œä¸”è¿™ä¸ªå¼‚å¸¸ä¸èƒ½è¢«å¤–éƒ¨æ•è·ã€‚éœ€è¦ä¸ºçº¿ç¨‹è®¾ç½®UncaughtExceptionHandleræ¥å¤„ç†æœªæ•è·çš„å¼‚å¸¸ã€‚</li></ol><h3 id="ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§æœ‰å“ªäº›æ–¹æ¡ˆå‘¢-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§æœ‰å“ªäº›æ–¹æ¡ˆå‘¢-2023ç¾å›¢" aria-hidden="true">#</a> ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§æœ‰å“ªäº›æ–¹æ¡ˆå‘¢ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼š</p><ol><li><strong>åŒæ­¥è¯­å¥å—(Synchronized Blocks)</strong>ï¼šåœ¨Javaä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨synchronizedå…³é”®å­—å¯¹ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ–¹æ³•è¿›è¡Œé”å®šï¼Œæ¥ä¿è¯åœ¨ä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å¯¹è±¡æˆ–è€…æ–¹æ³•ï¼Œä»è€Œé¿å…æ•°æ®çš„ä¸ä¸€è‡´ã€‚</li><li><strong>Volatileå…³é”®å­—</strong>ï¼švolatileå…³é”®å­—å¯ä»¥ä¿è¯å˜é‡çš„å¯è§æ€§ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»ä¸»å­˜ä¸­è¯»å–æ–°å€¼ã€‚</li><li><strong>åŸå­ç±»ï¼ˆAtomic Classesï¼‰</strong>ï¼šJavaæä¾›äº†ä¸€ç»„åŸå­ç±»ï¼ˆå¦‚AtomicIntegerã€AtomicLongç­‰ï¼‰ï¼Œå®ƒä»¬ä½¿ç”¨äº†é«˜æ•ˆçš„æœºå™¨çº§æŒ‡ä»¤æ¥ä¿è¯åŸå­æ€§æ“ä½œï¼Œä»è€Œé¿å…äº†å¤æ‚çš„åŒæ­¥ã€‚</li><li><strong>Lockæ¥å£å’Œç›¸å…³ç±»</strong>ï¼šJavaå¹¶å‘åº“æä¾›äº†æ˜¾å¼çš„é”æœºåˆ¶ï¼ŒåŒ…æ‹¬ReentrantLockã€ReadWriteLockç­‰ï¼Œå¯ä»¥æä¾›æ¯”synchronizedæ›´çµæ´»çš„é”å®šæœºåˆ¶ã€‚</li><li><strong>å¹¶å‘é›†åˆï¼ˆConcurrent Collectionsï¼‰</strong>ï¼šJavaæä¾›äº†ä¸€ç»„å¹¶å‘é›†åˆç±»ï¼ˆå¦‚ConcurrentHashMapã€CopyOnWriteArrayListç­‰ï¼‰ï¼Œå®ƒä»¬å†…éƒ¨å·²ç»å®ç°äº†å¹¶å‘æ§åˆ¶ï¼Œå¯ä»¥åœ¨å¹¶å‘ç¯å¢ƒä¸­å®‰å…¨ä½¿ç”¨ã€‚</li><li><strong>äº‹åŠ¡ï¼ˆTransactionsï¼‰</strong>ï¼šåœ¨æ•°æ®åº“å’ŒæŸäº›æ”¯æŒäº‹åŠ¡çš„ç³»ç»Ÿä¸­ï¼Œå¯ä»¥é€šè¿‡äº‹åŠ¡æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚Javaä¸­çš„JPAå’ŒSpringç­‰æ¡†æ¶æä¾›äº†å¯¹äº‹åŠ¡çš„æ”¯æŒã€‚</li></ol><p>ä»¥ä¸Šå°±æ˜¯åœ¨Javaä¸­ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ä¸€äº›å¸¸ç”¨æ–¹æ¡ˆï¼Œé€‰æ‹©å“ªç§æ–¹æ¡ˆå–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚</p><h3 id="æ€ä¹ˆè·å–å­çº¿ç¨‹çš„è¿”å›å€¼-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆè·å–å­çº¿ç¨‹çš„è¿”å›å€¼-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> æ€ä¹ˆè·å–å­çº¿ç¨‹çš„è¿”å›å€¼ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œè‹¥è¦è·å–å­çº¿ç¨‹çš„è¿”å›å€¼ï¼Œå¯ä»¥ä½¿ç”¨Callableæ¥å£å’ŒFutureç±»ã€‚Callableæ¥å£å…è®¸ä½ å®šä¹‰ä¸€ä¸ªè¿”å›å€¼çš„ä»»åŠ¡ï¼Œè€ŒFutureç±»åˆ™ä»£è¡¨è¿™ä¸ªä»»åŠ¡çš„ç»“æœã€‚ä¸ºäº†è·å–å­çº¿ç¨‹çš„è¿”å›å€¼ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªå®ç°Callableæ¥å£çš„ç±»ï¼Œå¹¶é‡å†™call()æ–¹æ³•ã€‚ç„¶åï¼Œå°†è¿™ä¸ªCallableå¯¹è±¡æäº¤ç»™ExecutorServiceï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªFutureå¯¹è±¡ã€‚é€šè¿‡è°ƒç”¨Futureå¯¹è±¡çš„get()æ–¹æ³•ï¼Œä¸»çº¿ç¨‹å¯ä»¥ç­‰å¾…å¹¶è·å–å­çº¿ç¨‹çš„è¿”å›å€¼ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutionException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Future</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorService</span> executor <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
                <span class="token comment">// è¿™é‡Œå†™ä½ çš„å­çº¿ç¨‹é€»è¾‘ï¼Œå¹¶è¿”å›ç»“æœ</span>
                <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result <span class="token operator">+=</span> i<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¸»çº¿ç¨‹ç­‰å¾…å¹¶è·å–å­çº¿ç¨‹çš„è¿”å›å€¼</span>
            <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹çš„è¿”å›å€¼: &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> <span class="token operator">|</span> <span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            executor<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å­çº¿ç¨‹æŠ›å¼‚å¸¸-ä¸»çº¿ç¨‹-try-catch-æ˜¯å¦å¯ä»¥è·å–åˆ°å¼‚å¸¸-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#å­çº¿ç¨‹æŠ›å¼‚å¸¸-ä¸»çº¿ç¨‹-try-catch-æ˜¯å¦å¯ä»¥è·å–åˆ°å¼‚å¸¸-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> å­çº¿ç¨‹æŠ›å¼‚å¸¸ï¼Œä¸»çº¿ç¨‹ try-catch æ˜¯å¦å¯ä»¥è·å–åˆ°å¼‚å¸¸ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>ç­”æ¡ˆï¼šå¯ä»¥ã€‚</p><p>å½“ä½¿ç”¨ Callable å’Œ Future æ—¶ï¼Œå¦‚æœå­çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œä¸»çº¿ç¨‹å¯ä»¥é€šè¿‡è°ƒç”¨ Future.get() æ–¹æ³•æ—¶æ•è·å¼‚å¸¸æ¥è·å–å®ƒã€‚Future.get() æ–¹æ³•å¯ä»¥æŠ›å‡ºä¸€ä¸ª ExecutionExceptionï¼Œè¿™ä¸ªå¼‚å¸¸åŒ…è£…äº†å­çº¿ç¨‹æŠ›å‡ºçš„çœŸå®å¼‚å¸¸ã€‚è¦è·å–å­çº¿ç¨‹çš„å¼‚å¸¸ï¼Œä½ å¯ä»¥åœ¨ä¸»çº¿ç¨‹çš„ try-catch è¯­å¥ä¸­æ•è· ExecutionExceptionï¼Œç„¶åè°ƒç”¨ getCause() æ–¹æ³•æ¥è·å–å­çº¿ç¨‹çš„å¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutionException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Future</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorService</span> executor <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
                <span class="token comment">// è¿™é‡Œæ•…æ„æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¸»çº¿ç¨‹ç­‰å¾…å¹¶è·å–å­çº¿ç¨‹çš„è¿”å›å€¼</span>
            <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å–å¹¶å¤„ç†å­çº¿ç¨‹æŠ›å‡ºçš„å¼‚å¸¸</span>
            <span class="token class-name">Throwable</span> cause <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹æŠ›å‡ºçš„å¼‚å¸¸: &quot;</span> <span class="token operator">+</span> cause<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            executor<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="atomicintegeræ˜¯æ€ä¹ˆæ›´æ–°ä¿è¯åŸå­æ€§çš„-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#atomicintegeræ˜¯æ€ä¹ˆæ›´æ–°ä¿è¯åŸå­æ€§çš„-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> AtomicIntegeræ˜¯æ€ä¹ˆæ›´æ–°ä¿è¯åŸå­æ€§çš„ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>AtomicInteger æ˜¯ Java å¹¶å‘åŒ… java.util.concurrent.atomic ä¸­çš„ä¸€ä¸ªç±»ï¼Œå®ƒç”¨äºæ‰§è¡ŒåŸå­æ“ä½œã€‚åŸå­æ“ä½œæ˜¯ä¸€ç§ä¸å¯ä¸­æ–­çš„æ“ä½œï¼Œæ— è®ºåœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦è¿™ä¸ªæ“ä½œå¼€å§‹ï¼Œå°±ä¼šè¿è¡Œåˆ°ç»“æŸï¼Œä¸ä¼šå‡ºç°ä¸­é—´æ€ã€‚è¿™æ˜¯ä¸€ç§é¿å…å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜çš„å¸¸ç”¨æ‰‹æ®µã€‚</p><p>AtomicInteger åœ¨å†…éƒ¨é€šè¿‡å¾ˆä½çº§çš„åŸå­ç¡¬ä»¶æŒ‡ä»¤ç›´æ¥æ”¯æŒåŸå­æ€§ã€‚ä¸»è¦ä½¿ç”¨äº†ä¸€ç§åä¸ºâ€œCompare and Swapâ€ï¼ˆCASï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼‰çš„ç®—æ³•æ¥å®ç°åŸå­æ€§ã€‚è¿™ç§ç®—æ³•ä½¿ç”¨ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ªå†…å­˜ä½ç½® Vã€é¢„æœŸçš„åŸå§‹å€¼ A å’Œæ–°å€¼ Bã€‚è¯¥ç®—æ³•ä»…å½“å†…å­˜ä½ç½® V çš„å½“å‰å€¼ä¸é¢„æœŸçš„åŸå§‹å€¼ A ç›¸åŒ¹é…æ—¶ï¼Œæ‰ä¼šå°†å†…å­˜ä½ç½® V çš„å€¼æ›´æ–°ä¸ºæ–°å€¼ Bã€‚å¦‚æœå†…å­˜ä½ç½® V çš„å½“å‰å€¼ä¸é¢„æœŸå€¼ A ä¸åŒ¹é…ï¼Œé‚£ä¹ˆæ“ä½œä¼šå¤±è´¥ï¼Œé€šå¸¸è¿™ä¸ªæ“ä½œä¼šåœ¨ä¸€ä¸ªå¾ªç¯ä¸­è¿›è¡Œï¼Œç›´åˆ°æ“ä½œæˆåŠŸã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> expect<span class="token punctuation">,</span> <span class="token keyword">int</span> update<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> unsafe<span class="token punctuation">.</span><span class="token function">compareAndSwapInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> valueOffset<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>AtomicInteger çš„æºç ä¸­,ä½¿ç”¨ Unsafe ç±»çš„ CAS æ“ä½œæ¥å®ç°:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Unsafe</span> unsafe <span class="token operator">=</span> <span class="token class-name">Unsafe</span><span class="token punctuation">.</span><span class="token function">getUnsafe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> valueOffset<span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        valueOffset <span class="token operator">=</span> unsafe<span class="token punctuation">.</span>objectFieldOffset
            <span class="token punctuation">(</span><span class="token class-name">AtomicInteger</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> unsafe<span class="token punctuation">.</span><span class="token function">getAndAddInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> valueOffset<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>unsafe.getAndAddInt() æ–¹æ³•å®ç°äº† CAS,å®ƒä¼šè·å–å½“å‰å€¼,åŠ  1,å¹¶æ¯”è¾ƒå½“å‰å€¼æ˜¯å¦æ”¹å˜,å¦‚æœæ²¡æœ‰æ”¹å˜åˆ™æ›´æ–°,å¦åˆ™é‡æ–°è·å–å€¼ã€‚</p><p>æ‰€ä»¥ AtomicInteger é€šè¿‡ CAS æ— é”æ“ä½œå®ç°äº†çº¿ç¨‹å®‰å…¨çš„é€’å¢æ“ä½œã€‚</p><h3 id="futureæŠ›å‡ºçš„ä¸¤ä¸ªå¼‚å¸¸çš„å¯¹æ¯”-éƒ½æœ‰ä»€ä¹ˆç”¨-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#futureæŠ›å‡ºçš„ä¸¤ä¸ªå¼‚å¸¸çš„å¯¹æ¯”-éƒ½æœ‰ä»€ä¹ˆç”¨-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> FutureæŠ›å‡ºçš„ä¸¤ä¸ªå¼‚å¸¸çš„å¯¹æ¯”ï¼Œéƒ½æœ‰ä»€ä¹ˆç”¨ï¼Ÿï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>åœ¨Javaä¸­ï¼Œ<code>Future</code>æ¥å£åœ¨å…¶æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šæŠ›å‡ºä»¥ä¸‹å¼‚å¸¸ï¼š</p><ol><li><p><strong>InterruptedException</strong>ï¼šå½“çº¿ç¨‹åœ¨ç­‰å¾…ã€ç¡çœ æˆ–å…¶ä»–å ç”¨æ—¶é—´çš„æ“ä½œä¸­è¢«ä¸­æ–­æ—¶å¯èƒ½ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œ<code>Future.get()</code>æ–¹æ³•ä¼šåœ¨ç­‰å¾…è®¡ç®—å®Œæˆæ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ï¼Œå¦‚æœçº¿ç¨‹åœ¨ç­‰å¾…è¿‡ç¨‹ä¸­è¢«ä¸­æ–­ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle exception</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ExecutionException</strong>ï¼šå¦‚æœ<code>Future</code>çš„è®¡ç®—æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆ<code>Future.get()</code>æ–¹æ³•ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚è¿™ä¸ªå¼‚å¸¸çš„åŸå› å¯ä»¥é€šè¿‡<code>ExecutionException.getCause()</code>è·å¾—ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Throwable</span> cause <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// handle exception</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>TimeoutException</strong>ï¼šå½“<code>Future.get(long timeout, TimeUnit unit)</code>åœ¨è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰å¾—åˆ°ç»“æœæ—¶ï¼Œä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">TimeoutException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle exception</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>CancellationException</strong>ï¼šå½“å°è¯•å–å›å·²ç»å–æ¶ˆçš„ä»»åŠ¡çš„ç»“æœæ—¶ï¼Œä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
future<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CancellationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle exception</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>è¯·æ³¨æ„ï¼Œè¿™äº›å¼‚å¸¸éƒ½å¿…é¡»è¢«æ•è·å’Œå¤„ç†ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯<code>java.lang.Exception</code>çš„å­ç±»ï¼Œæ˜¯å·²æ£€æŸ¥çš„å¼‚å¸¸ã€‚</p>`,83),K=n("p",null,"å‚è€ƒï¼š",-1),Q={href:"https://stackoverflow.com/questions/2665569/in-what-cases-does-future-get-throw-executionexception-or-interruptedexception",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://stackoverflow.com/questions/2248131/handling-exceptions-from-java-executorservice-tasks",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://www.baeldung.com/java-future",target:"_blank",rel:"noopener noreferrer"},$={href:"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html",target:"_blank",rel:"noopener noreferrer"},nn=t('<h2 id="ğŸƒ-å¸¸ç”¨æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#ğŸƒ-å¸¸ç”¨æ¡†æ¶" aria-hidden="true">#</a> ğŸƒ å¸¸ç”¨æ¡†æ¶</h2><h3 id="mybatisè¿ç”¨äº†å“ªäº›å¸¸è§çš„è®¾è®¡æ¨¡å¼-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#mybatisè¿ç”¨äº†å“ªäº›å¸¸è§çš„è®¾è®¡æ¨¡å¼-2023ç¾å›¢" aria-hidden="true">#</a> MyBatisè¿ç”¨äº†å“ªäº›å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><ul><li><strong>å·¥å‚æ¨¡å¼</strong>ï¼Œå·¥å‚æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ SqlSessionFactory</li><li><strong>å»ºé€ è€…æ¨¡å¼</strong>ï¼Œå»ºé€ è€…æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ SqlSessionFactoryBuilder</li><li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼Œå•ä¾‹æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ ErrorContext</li><li><strong>é€‚é…å™¨æ¨¡å¼</strong>ï¼Œé€‚é…å™¨æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ Log</li><li><strong>ä»£ç†æ¨¡å¼</strong>ï¼Œä»£ç†æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ MapperProxyFactory</li><li><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ï¼Œæ¨¡æ¿æ–¹æ³•åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ BaseExecutor</li><li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼Œè£…é¥°å™¨æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ Cache</li><li><strong>è¿­ä»£å™¨æ¨¡å¼</strong>ï¼Œå¦‚è¿­ä»£å™¨æ¨¡å¼Properties tyTokenizerï¼›</li><li><strong>ç»„åˆæ¨¡å¼</strong>ï¼Œå¦‚SqlNodeå’Œæ¯ä¸ªå­ç±»ChooseSqlNodeï¼›</li></ul>',3),sn=n("p",null,"å‚è€ƒæ–‡çŒ®ï¼š",-1),an={href:"https://programming.vip/docs/6200e8e7b682c.html",target:"_blank",rel:"noopener noreferrer"},en={href:"https://programming.vip/docs/mybatis-design-pattern.html",target:"_blank",rel:"noopener noreferrer"},tn=t('<h3 id="mybatisä¸­åˆ›å»ºäº†ä¸€ä¸ªmapperæ¥å£-åœ¨å†™ä¸€ä¸ªxmlæ–‡ä»¶-javaçš„æ¥å£æ˜¯è¦å®ç°çš„-ä¸ºä»€ä¹ˆè¿™æ²¡æœ‰å®ç°å‘¢-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#mybatisä¸­åˆ›å»ºäº†ä¸€ä¸ªmapperæ¥å£-åœ¨å†™ä¸€ä¸ªxmlæ–‡ä»¶-javaçš„æ¥å£æ˜¯è¦å®ç°çš„-ä¸ºä»€ä¹ˆè¿™æ²¡æœ‰å®ç°å‘¢-2023ç¾å›¢" aria-hidden="true">#</a> MyBatisä¸­åˆ›å»ºäº†ä¸€ä¸ªMapperæ¥å£ï¼Œåœ¨å†™ä¸€ä¸ªxmlæ–‡ä»¶ï¼Œjavaçš„æ¥å£æ˜¯è¦å®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¿™æ²¡æœ‰å®ç°å‘¢ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>MyBatisä¸­çš„Mapperæ¥å£å¹¶ä¸éœ€è¦å®ç°ï¼Œå®ƒåªæ˜¯å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ç­¾åã€‚MyBatisä¼šæ ¹æ®Mapperæ¥å£ä¸­çš„æ–¹æ³•åã€å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ï¼Œè‡ªåŠ¨ç”Ÿæˆå®ç°æ–¹æ³•ã€‚å› æ­¤ï¼ŒMapperæ¥å£ä¸­çš„æ–¹æ³•ä¸éœ€è¦å®ç°ï¼Œä¹Ÿä¸éœ€è¦åœ¨è¯¥æ¥å£ä¸­ç¼–å†™ä»»ä½•æ–¹æ³•ä½“ã€‚</p><p>ç›¸åï¼Œä½ éœ€è¦ç¼–å†™ä¸€ä¸ªä¸Mapperæ¥å£åŒåçš„XMLæ–‡ä»¶ï¼Œæ¥å®ç°è¿™äº›æ–¹æ³•çš„å…·ä½“SQLæ“ä½œã€‚è¿™æ ·ï¼Œå½“ä½ åœ¨Javaä»£ç ä¸­è°ƒç”¨Mapperæ¥å£ä¸­çš„æ–¹æ³•æ—¶ï¼ŒMyBatisä¼šè‡ªåŠ¨å°†è¯¥æ–¹æ³•æ˜ å°„åˆ°å¯¹åº”çš„XMLæ–‡ä»¶ä¸­çš„SQLè¯­å¥ï¼Œå¹¶æ‰§è¡Œè¯¥è¯­å¥ã€‚</p><h3 id="ä¸ä¼ ç»Ÿçš„jdbcç›¸æ¯”-mybatisçš„ä¼˜ç‚¹-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ä¸ä¼ ç»Ÿçš„jdbcç›¸æ¯”-mybatisçš„ä¼˜ç‚¹-2023ç¾å›¢" aria-hidden="true">#</a> ä¸ä¼ ç»Ÿçš„JDBCç›¸æ¯”ï¼ŒMyBatisçš„ä¼˜ç‚¹ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>åœ¨é¢è¯•ä¸­ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹çš„æ–¹å¼æ¥å›ç­”ï¼š</p><ol><li>é¦–å…ˆï¼Œæˆ‘è®¤ä¸ºæœ€å¤§çš„ä¼˜ç‚¹æ˜¯MyBatisæä¾›äº†æ›´é«˜çš„<strong>çµæ´»æ€§</strong>ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ç¼–å†™SQLï¼Œè¿™æ ·å¯ä»¥å……åˆ†åˆ©ç”¨æ•°æ®åº“çš„ç‰¹æ€§å¹¶ä¸”æ›´å¥½åœ°æ§åˆ¶æŸ¥è¯¢ã€‚</li><li>å…¶æ¬¡ï¼ŒMyBatisä½¿æˆ‘ä»¬<strong>æ— éœ€æ‰‹åŠ¨</strong>è½¬æ¢æ•°æ®ï¼Œå®ƒèƒ½è‡ªåŠ¨å°†ç»“æœé›†æ˜ å°„åˆ°Javaå¯¹è±¡ï¼Œè¿™å¤§å¤§ç®€åŒ–äº†ç¼–ç¨‹å·¥ä½œã€‚</li><li>æ­¤å¤–ï¼ŒMyBatisæ”¯æŒ<strong>åŠ¨æ€SQL</strong>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨åŠ¨æ€å…ƒç´ ï¼Œå¦‚ifã€chooseç­‰ï¼Œä»è€Œèƒ½å¤Ÿåˆ›å»ºæ›´å¤æ‚çš„æŸ¥è¯¢ã€‚</li><li>é™¤æ­¤ä¹‹å¤–ï¼ŒMyBatiså°†SQLè¯­å¥æ”¾åœ¨<strong>XMLæ–‡ä»¶æˆ–æ³¨è§£</strong>ä¸­ï¼Œå®ç°äº†SQLä¸Javaä»£ç çš„åˆ†ç¦»ï¼Œè¿™ä½¿å¾—ä»£ç æ›´åŠ æ˜“äºç»´æŠ¤ã€‚</li><li>MyBatisä¹Ÿèƒ½<strong>æ›´å¥½åœ°å¤„ç†ä¸€å¯¹å¤šã€å¤šå¯¹å¤š</strong>ç­‰å¤æ‚å…³ç³»ã€‚</li><li>æœ€åï¼ŒMyBatisæä¾›äº†<strong>ä¸€äº›JDBCæ— æ³•æä¾›çš„ç‰¹æ€§</strong>ï¼Œå¦‚å»¶è¿ŸåŠ è½½ï¼Œè¿™å¯¹äºæ€§èƒ½ä¼˜åŒ–æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li></ol><h3 id="jdbcè¿æ¥æ•°æ®åº“çš„æ­¥éª¤-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#jdbcè¿æ¥æ•°æ®åº“çš„æ­¥éª¤-2023ç¾å›¢" aria-hidden="true">#</a> JDBCè¿æ¥æ•°æ®åº“çš„æ­¥éª¤ï¼ˆ2023ç¾å›¢ï¼‰</h3>',7),on=n("ol",null,[n("li",null,[n("strong",null,"åŠ è½½æ•°æ®åº“é©±åŠ¨ç¨‹åº"),s('ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½æ•°æ®åº“é©±åŠ¨ã€‚è¿™å¯ä»¥é€šè¿‡ Class.forName() æ–¹æ³•å®ç°ï¼Œä¾‹å¦‚ Class.forName("com.mysql.jdbc.Driver")ã€‚')]),n("li",null,[n("strong",null,"å»ºç«‹æ•°æ®åº“è¿æ¥"),s('ï¼šä½¿ç”¨DriverManager.getConnection()æ–¹æ³•å»ºç«‹ä¸æ•°æ®åº“çš„è¿æ¥ï¼Œéœ€è¦æŒ‡å®šæ•°æ®åº“çš„URLã€ç”¨æˆ·åå’Œå¯†ç ï¼Œä¾‹å¦‚ï¼šConnection conn = DriverManager.getConnection("jdbc:mysql://localhost/mydatabase", "username", "password");')]),n("li",null,[n("strong",null,"åˆ›å»ºStatementå¯¹è±¡"),s("ï¼šä½¿ç”¨Connectionå¯¹è±¡çš„createStatement()æ–¹æ³•åˆ›å»ºä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨äºæ‰§è¡ŒSQLè¯­å¥ï¼Œä¾‹å¦‚ï¼šStatement stmt = conn.createStatement();")]),n("li",null,[n("strong",null,"æ‰§è¡ŒSQLè¯­å¥"),s('ï¼šä½¿ç”¨Statementå¯¹è±¡çš„executeQuery()æˆ–executeUpdate()æ–¹æ³•æ‰§è¡ŒSQLè¯­å¥ï¼Œä¾‹å¦‚ï¼šResultSet rs = stmt.executeQuery("SELECT * FROM mytable");')]),n("li",{String:"",name:"",class:'rsgetString("name"); rsgetInt("age");',int:"",age:""},[n("strong",null,"å¤„ç†æŸ¥è¯¢ç»“æœ"),s("ï¼šå¦‚æœæ‰§è¡Œçš„æ˜¯æŸ¥è¯¢è¯­å¥ï¼Œéœ€è¦ä½¿ç”¨ResultSetå¯¹è±¡æ¥å¤„ç†æŸ¥è¯¢ç»“æœï¼Œä¾‹å¦‚ï¼šwhile (rs.next())")]),n("li",null,[n("strong",null,"å…³é—­æ•°æ®åº“è¿æ¥"),s("ï¼šåœ¨ç¨‹åºç»“æŸæ—¶ï¼Œéœ€è¦ä½¿ç”¨Connectionå¯¹è±¡çš„close()æ–¹æ³•å…³é—­æ•°æ®åº“è¿æ¥ï¼Œä¾‹å¦‚ï¼šconn.close();")])],-1),pn=t(`<h3 id="æ€ä¹ˆç†è§£springioc-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆç†è§£springioc-2023ç¾å›¢" aria-hidden="true">#</a> æ€ä¹ˆç†è§£SpringIocï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p><strong>IoCï¼ˆInversion of Controlï¼‰æ˜¯â€œæ§åˆ¶åè½¬â€</strong> çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒã€‚IoCæ˜¯å°†ä½ è®¾è®¡å¥½çš„å¯¹è±¡äº¤ç»™å®¹å™¨æ§åˆ¶ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„åœ¨ä½ çš„å¯¹è±¡å†…éƒ¨ç›´æ¥æ§åˆ¶ã€‚å¦‚ä½•ç†è§£å¥½IoCå‘¢ï¼Ÿå¯ä»¥ä»ä»¥ä¸‹å‡ ç‚¹æ¥çœ‹ï¼š</p><ol><li><strong>æ§åˆ¶åè½¬</strong>ï¼šä¼ ç»Ÿçš„ç¨‹åºæ˜¯ç”±æˆ‘ä»¬è‡ªå·±åœ¨å¯¹è±¡å†…éƒ¨é€šè¿‡newè¿›è¡Œåˆ›å»ºå¯¹è±¡ï¼Œæ˜¯ç”±ç¨‹åºæ§åˆ¶å¯¹è±¡çš„åˆ›å»ºã€‚åœ¨Springæ¡†æ¶ä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºæ˜¯ç”±Springå®¹å™¨æ¥è¿›è¡Œçš„ï¼Œå®ƒè´Ÿè´£æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‰€è°“â€œæ§åˆ¶åè½¬â€å°±æ˜¯æŠŠä¼ ç»Ÿçš„æœ‰æˆ‘ä»¬è‡ªå·±æ§åˆ¶çš„å¯¹è±¡åˆ›å»ºè¿‡ç¨‹äº¤ç»™Springæ¡†æ¶æ¥åšã€‚</li><li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šIoCçš„ä¸€ä¸ªé‡è¦çš„å…·ä½“å®ç°æ–¹æ³•æ˜¯DIï¼ˆDependency Injectionï¼‰ï¼Œä¹Ÿå«ä½œä¾èµ–æ³¨å…¥ã€‚åœ¨æˆ‘ä»¬è®¾è®¡å¥½çš„å¯¹è±¡ä¸­ä¼šæœ‰ä¸€äº›å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼ˆå³ä¾èµ–ï¼‰ï¼Œå¦‚æœæ²¡æœ‰Springå®¹å™¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¾ˆå¤šå¤æ‚çš„æ–¹æ³•æ¥ç®¡ç†è¿™äº›ä¾èµ–ã€‚è€Œæœ‰äº†Springå®¹å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰Springè¿™äº›ä¾èµ–å³å¯ï¼ŒSpringä¼šè‡ªåŠ¨æŠŠè¿™äº›ä¾èµ–æ³¨å…¥åˆ°å¯¹è±¡ä¸­ã€‚</li><li><strong>å®¹å™¨</strong>ï¼šåœ¨Springçš„IoCä¸‹ï¼ŒSpringå®¹å™¨æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è§’è‰²ï¼Œå®ƒåŒ…å«å¹¶ç®¡ç†äº†åº”ç”¨ä¸­å®šä¹‰çš„å„ç§ç»„ä»¶ï¼Œè´Ÿè´£å®ä¾‹åŒ–ã€é…ç½®ã€è£…é…å¯¹è±¡ï¼Œç®¡ç†å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</li><li><strong>å‡è½»è€¦åˆ</strong>ï¼šé€šè¿‡IoCï¼Œå¯¹è±¡é—´çš„è€¦åˆåº¦å¯ä»¥é™ä½ï¼Œå¯¹è±¡åªéœ€è¦å…³æ³¨è‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…¶ä»–å¯¹è±¡æ˜¯å¦‚ä½•åˆ›å»ºå’Œç®¡ç†çš„ï¼Œå¤§å¤§å¢å¼ºäº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</li><li><strong>æä¾›é…ç½®</strong>ï¼šSpringå®¹å™¨å¯ä»¥ä½¿ç”¨XMLã€Javaæ³¨è§£ã€Javaä»£ç ç­‰å¤šç§æ–¹å¼æ¥è¿›è¡Œé…ç½®ï¼Œæä¾›äº†éå¸¸å¤§çš„çµæ´»æ€§ã€‚</li></ol><h3 id="å¦‚æœè®©ä½ è®¾è®¡ä¸€ä¸ªspringioc-ä½ è§‰å¾—ä¼šä»å“ªäº›æ–¹é¢è€ƒè™‘è¿™ä¸ªè®¾è®¡-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¦‚æœè®©ä½ è®¾è®¡ä¸€ä¸ªspringioc-ä½ è§‰å¾—ä¼šä»å“ªäº›æ–¹é¢è€ƒè™‘è¿™ä¸ªè®¾è®¡-2023ç¾å›¢" aria-hidden="true">#</a> å¦‚æœè®©ä½ è®¾è®¡ä¸€ä¸ªSpringIocï¼Œä½ è§‰å¾—ä¼šä»å“ªäº›æ–¹é¢è€ƒè™‘è¿™ä¸ªè®¾è®¡ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><ul><li>Beançš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šéœ€è¦è®¾è®¡Beançš„åˆ›å»ºã€åˆå§‹åŒ–ã€é”€æ¯ç­‰ç”Ÿå‘½å‘¨æœŸç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼å’Œå•ä¾‹æ¨¡å¼æ¥å®ç°ã€‚</li><li>ä¾èµ–æ³¨å…¥ï¼šéœ€è¦å®ç°ä¾èµ–æ³¨å…¥çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å±æ€§æ³¨å…¥ã€æ„é€ å‡½æ•°æ³¨å…¥ã€æ–¹æ³•æ³¨å…¥ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åå°„æœºåˆ¶å’ŒXMLé…ç½®æ–‡ä»¶æ¥å®ç°ã€‚</li><li>Beançš„ä½œç”¨åŸŸï¼šéœ€è¦æ”¯æŒå¤šç§Beanä½œç”¨åŸŸï¼Œæ¯”å¦‚å•ä¾‹ã€åŸå‹ã€ä¼šè¯ã€è¯·æ±‚ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Mapæ¥å­˜å‚¨ä¸åŒä½œç”¨åŸŸçš„Beanå®ä¾‹ã€‚</li><li>AOPåŠŸèƒ½çš„æ”¯æŒï¼šéœ€è¦æ”¯æŒAOPåŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€ä»£ç†æœºåˆ¶å’Œåˆ‡é¢ç¼–ç¨‹æ¥å®ç°ã€‚</li><li>å¼‚å¸¸å¤„ç†ï¼šéœ€è¦è€ƒè™‘å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬Beanåˆ›å»ºå¼‚å¸¸ã€ä¾èµ–æ³¨å…¥å¼‚å¸¸ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨try-catchæœºåˆ¶æ¥å¤„ç†å¼‚å¸¸ã€‚</li><li>é…ç½®æ–‡ä»¶åŠ è½½ï¼šéœ€è¦æ”¯æŒä»ä¸åŒçš„é…ç½®æ–‡ä»¶ä¸­åŠ è½½Beançš„ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨XMLã€æ³¨è§£æˆ–è€…Javaé…ç½®ç±»æ¥å®ç°ã€‚</li></ul><h3 id="springç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ‰©å±•ç‚¹-è¿™äº›æœ‰äº†è§£å—-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#springç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ‰©å±•ç‚¹-è¿™äº›æœ‰äº†è§£å—-2023ç¾å›¢" aria-hidden="true">#</a> Springç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ‰©å±•ç‚¹ï¼Œè¿™äº›æœ‰äº†è§£å—ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><ol><li>BeanFactoryPostProcessorï¼šå…è®¸åœ¨Springå®¹å™¨å®ä¾‹åŒ–beanä¹‹å‰ä¿®æ”¹beançš„å®šä¹‰ã€‚å¸¸ç”¨äºä¿®æ”¹beanå±æ€§æˆ–æ”¹å˜beançš„ä½œç”¨åŸŸã€‚</li><li>BeanPostProcessorï¼šå¯ä»¥åœ¨beanå®ä¾‹åŒ–ã€é…ç½®ä»¥åŠåˆå§‹åŒ–ä¹‹åå¯¹å…¶è¿›è¡Œé¢å¤–å¤„ç†ã€‚å¸¸ç”¨äºä»£ç†beanã€ä¿®æ”¹beanå±æ€§ç­‰ã€‚</li><li>PropertySourceï¼šç”¨äºå®šä¹‰ä¸åŒçš„å±æ€§æºï¼Œå¦‚æ–‡ä»¶ã€æ•°æ®åº“ç­‰ï¼Œä»¥ä¾¿åœ¨Springåº”ç”¨ä¸­ä½¿ç”¨ã€‚</li><li>ImportSelectorå’ŒImportBeanDefinitionRegistrarï¼šç”¨äºæ ¹æ®æ¡ä»¶åŠ¨æ€æ³¨å†Œbeanå®šä¹‰ï¼Œå®ç°é…ç½®ç±»çš„æ¨¡å—åŒ–ã€‚</li><li>Spring MVCä¸­çš„HandlerInterceptorï¼šç”¨äºæ‹¦æˆªå¤„ç†è¯·æ±‚ï¼Œå¯ä»¥åœ¨è¯·æ±‚å¤„ç†å‰ã€å¤„ç†ä¸­å’Œå¤„ç†åæ‰§è¡Œç‰¹å®šé€»è¾‘ã€‚</li><li>Spring MVCä¸­çš„ControllerAdviceï¼šç”¨äºå…¨å±€å¤„ç†æ§åˆ¶å™¨çš„å¼‚å¸¸ã€æ•°æ®ç»‘å®šå’Œæ•°æ®æ ¡éªŒã€‚</li><li>Spring Bootçš„è‡ªåŠ¨é…ç½®ï¼šé€šè¿‡åˆ›å»ºè‡ªå®šä¹‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¯ä»¥å®ç°å¯¹æ¡†æ¶å’Œç¬¬ä¸‰æ–¹åº“çš„è‡ªåŠ¨é…ç½®ã€‚</li><li>è‡ªå®šä¹‰æ³¨è§£ï¼šåˆ›å»ºè‡ªå®šä¹‰æ³¨è§£ï¼Œç”¨äºå®ç°ç‰¹å®šåŠŸèƒ½æˆ–çº¦å®šï¼Œå¦‚æƒé™æ§åˆ¶ã€æ—¥å¿—è®°å½•ç­‰ã€‚</li></ol><h3 id="å¤§è‡´äº†è§£springmvcçš„å¤„ç†æµç¨‹å—-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¤§è‡´äº†è§£springmvcçš„å¤„ç†æµç¨‹å—-2023ç¾å›¢" aria-hidden="true">#</a> å¤§è‡´äº†è§£SpringMVCçš„å¤„ç†æµç¨‹å—ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><ol><li><strong>æ¥æ”¶è¯·æ±‚</strong>ï¼šç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletã€‚</li><li><strong>æŸ¥æ‰¾å¤„ç†å™¨æ˜ å°„</strong>ï¼šDispatcherServletæ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ã€‚</li><li><strong>å¤„ç†å™¨æ˜ å°„è¿”å›å¤„ç†å™¨æ‰§è¡Œé“¾</strong>ï¼šHandlerMappingæ ¹æ®è¯·æ±‚çš„URLæ‰¾åˆ°å¯¹åº”çš„Controllerå¹¶è¿”å›ä¸€ä¸ªHandlerExecutionChainå¯¹è±¡ï¼ˆåŒ…å«ä¸€ä¸ªHandlerå¤„ç†å™¨ï¼ˆé¡µé¢æ§åˆ¶å™¨ï¼‰å¯¹è±¡ï¼Œå¤šä¸ªHandlerInterceptoræ‹¦æˆªå™¨å¯¹è±¡ï¼‰ã€‚</li><li><strong>è°ƒç”¨å¤„ç†å™¨é€‚é…å™¨</strong>ï¼šDispatcherServleté€šè¿‡HandlerAdapterè¿›è¡Œå¤šç±»å‹çš„é¡µé¢æ§åˆ¶å™¨çš„é€‚é…ï¼Œè°ƒç”¨å¯¹åº”çš„Controllerï¼ˆå¤„ç†å™¨ï¼‰ã€‚</li><li><strong>Controlleræ‰§è¡Œä¸šåŠ¡é€»è¾‘</strong>ï¼šControllerå¼€å§‹æ‰§è¡Œé¡µé¢æ§åˆ¶å™¨çš„å¤„ç†æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡ï¼ˆæ¨¡å‹å’Œè§†å›¾ï¼‰ã€‚</li><li><strong>è§†å›¾è§£æ</strong>ï¼šDispatcherServleté€šè¿‡è§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆå®é™…è§†å›¾/é¡µé¢ï¼‰ï¼Œå¹¶å°†ModelAndViewå¯¹è±¡ä¸­çš„æ¨¡å‹æ•°æ®å¡«å……åˆ°requeståŸŸå¯¹è±¡ä¸­ã€‚</li><li><strong>è¿”å›è§†å›¾</strong>ï¼šDispatcherServletæŠŠè¿”å›çš„è§†å›¾å¯¹è±¡è¿”å›ç»™ç”¨æˆ·ã€‚</li></ol><h3 id="springaopä¸»è¦æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#springaopä¸»è¦æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜-2023ç¾å›¢" aria-hidden="true">#</a> SpringAOPä¸»è¦æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜ï¼ˆ2023ç¾å›¢ï¼‰</h3><ol><li>ä»£ç åˆ†ç¦»ï¼šåœ¨è®¸å¤šåº”ç”¨ç¨‹åºä¸­ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä½ éœ€è¦åœ¨å¤šä¸ªæ–¹æ³•æˆ–å¯¹è±¡ä¸­é‡å¤ç›¸åŒçš„ä»£ç å—ï¼Œæ¯”å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€æƒé™æ£€æŸ¥ç­‰ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä»£ç ä¸æ˜¯çœŸæ­£çš„åˆ†ç¦»ï¼Œå„éƒ¨åˆ†åŠŸèƒ½æ¨¡å—çš„èŒè´£å¹¶ä¸æ¸…æ™°ã€‚é€šè¿‡ä½¿ç”¨AOPï¼Œä½ å¯ä»¥æŠŠè¿™äº›ä»£ç é›†ä¸­åœ¨ä¸€èµ·ï¼Œç„¶ååº”ç”¨åˆ°ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ï¼Œå®ç°&quot;æ¨ªåˆ‡å…³æ³¨ç‚¹&quot;ï¼ˆcross-cutting concernsï¼‰çš„æœ‰æ•ˆç®¡ç†ã€‚</li><li>ç»´æŠ¤æ€§ï¼šå¦‚æœä½ éœ€è¦ä¿®æ”¹ä¸€äº›é‡å¤çš„ä»£ç ï¼ˆæ¯”å¦‚æ›´æ”¹æ—¥å¿—è®°å½•çš„æ ¼å¼ï¼‰ï¼Œä½ å¯èƒ½éœ€è¦åœ¨å¤šä¸ªä½ç½®è¿›è¡Œæ›´æ”¹ã€‚ä½¿ç”¨AOPï¼Œä½ åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹æ›´æ”¹ï¼Œå‡å°‘äº†å‡ºé”™çš„å¯èƒ½æ€§ï¼Œæé«˜äº†ä»£ç çš„ç»´æŠ¤æ€§ã€‚</li><li>å¯è¯»æ€§ï¼šAOPå¯ä»¥ä½¿å¾—ä»£ç çš„å¯è¯»æ€§å¢å¼ºã€‚å› ä¸ºé‡å¤çš„ã€å›ºå®šçš„ä»£ç è¢«åˆ†ç¦»å‡ºæ¥ï¼Œä¸šåŠ¡ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç†è§£ã€‚</li><li>å¯é‡ç”¨æ€§ï¼šç”±äºAOPèƒ½å°†æ¨ªåˆ‡å…³æ³¨ç‚¹æŠ½è±¡æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—å¯ä»¥åœ¨å¤šä¸ªåº”ç”¨ä¸­é‡ç”¨ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼ŒSpring AOPèƒ½å¤Ÿè®©å¼€å‘è€…æ›´å¥½åœ°å…³æ³¨ä¸šåŠ¡é€»è¾‘çš„å¼€å‘ï¼Œè€Œå°†è¯¸å¦‚æ—¥å¿—è®°å½•ã€å®‰å…¨æ§åˆ¶ã€äº‹åŠ¡å¤„ç†ç­‰å…¬å…±ä»»åŠ¡æŠ½è±¡å’Œé›†ä¸­å¤„ç†ï¼Œä»è€Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§å’Œå¯é‡ç”¨æ€§ã€‚</p><h3 id="springaopçš„åŸç†äº†è§£å—-2023ç¾å›¢ã€2023å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#springaopçš„åŸç†äº†è§£å—-2023ç¾å›¢ã€2023å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> SpringAOPçš„åŸç†äº†è§£å—ï¼ˆ2023ç¾å›¢ã€2023å®Œç¾ä¸–ç•Œï¼‰</h3><p>Spring AOP (Aspect-Oriented Programming)å…¶ä¸»è¦ç›®çš„æ˜¯å°†ä¸šåŠ¡é€»è¾‘ä¸ç³»ç»ŸæœåŠ¡è§£è€¦ã€‚åœ¨ Spring ä¸­ï¼ŒAOP çš„å®ç°ä¸»è¦é€šè¿‡ä»£ç†å®ç°ã€‚ä¸‹é¢æ˜¯ä¸€äº›å…³äºå…¶å·¥ä½œåŸç†çš„å…³é”®ç‚¹ï¼š</p><ol><li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šSpring AOP çš„å®ç°ä¸»è¦ä¾èµ–äºä»£ç†æ¨¡å¼ã€‚åœ¨è¿è¡Œæ—¶ï¼ŒSpring AOP åŠ¨æ€åœ°åœ¨ç›®æ ‡å¯¹è±¡ä¸å®é™…å¯¹è±¡ä¹‹é—´åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œç„¶åé€šè¿‡ä»£ç†å¯¹è±¡å®ç°å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ã€‚</li><li><strong>JoinPoint</strong>ï¼šè¿™æ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ˜ç¡®çš„ç‚¹ï¼Œæ¯”å¦‚æ–¹æ³•çš„è°ƒç”¨æˆ–ç‰¹å®šçš„å¼‚å¸¸è¢«æŠ›å‡ºã€‚åœ¨ Spring AOP ä¸­ï¼Œä¸€ä¸ª JoinPoint æ€»æ˜¯ä»£è¡¨ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œã€‚</li><li><strong>PointCut</strong>ï¼šè¿™æ˜¯ä¸€ç»„ JoinPointï¼Œä½ å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æˆ–è§„åˆ™å®šä¹‰ã€‚</li><li><strong>Advice</strong>ï¼šè¿™æ˜¯å®é™…è¦åœ¨ç¨‹åºç‰¹å®šçš„ JoinPoint æ‰§è¡Œçš„åŠ¨ä½œã€‚å®ƒçš„ç±»å‹å¯ä»¥æ˜¯ Before, After, AfterReturning, AfterThrowing, Around ç­‰ã€‚</li><li><strong>Aspect</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹çš„æ¨¡å—åŒ–ï¼Œè¿™ç§å…³æ³¨ç‚¹å®ç°äº†æŸä¸€ç§è·¨è¶Šä¸€ä¸ªåº”ç”¨ç¨‹åºçš„åŠŸèƒ½ï¼Œé€šå¸¸åŒ…å«ä¸€äº› Advices å’Œ PointCutsã€‚</li><li><strong>Target Object</strong>ï¼šä»£ç†æ¨¡å¼çš„ç›®æ ‡å¯¹è±¡ã€‚</li><li><strong>AOP Proxy</strong>ï¼šAOP æ¡†æ¶åˆ›å»ºçš„å¯¹è±¡ï¼ŒåŒ…å«äº† adviceã€‚</li></ol><p>Spring AOP ä½¿ç”¨è¿™äº›å…ƒç´ æ¥ç¡®ä¿æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcross-cutting concernsï¼‰åœ¨åº”ç”¨ä¸­é€‚å½“çš„ä½ç½®è¢«æ‰§è¡Œã€‚Spring å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å°† Advice åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡ä¸Šï¼Œä»è€Œå®ç°äº†è§£è€¦å’Œä»£ç é‡ç”¨ã€‚</p><p>åœ¨ Spring AOP ä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„ AOP ä»£ç†ï¼š</p><ul><li>åŸºäº JDK çš„åŠ¨æ€ä»£ç†ï¼šå¦‚æœè¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡å®ç°äº†è‡³å°‘ä¸€ä¸ªæ¥å£ï¼Œåˆ™ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„ä»£ç†å¯¹è±¡ä¼šå®ç°è¢«ä»£ç†å¯¹è±¡æ‰€å®ç°çš„æ¥å£ã€‚</li><li>CGLIB ä»£ç†ï¼šå¦‚æœè¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œåˆ™ Spring AOP ä¼šåˆ›å»ºä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å­ç±»ï¼Œç„¶åå¢å¼ºè¢«ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ CGLIB ä»£ç†ã€‚ æ‰€æœ‰è¿™äº›éƒ½ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿå°†ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡ï¼ˆå¦‚äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—ã€å®‰å…¨ç­‰ï¼‰åˆ†å¼€ï¼Œä»è€Œä½¿ä¸šåŠ¡ä»£ç æ›´ç®€æ´ã€æ›´æ˜“äºç»´æŠ¤å’Œå¤ç”¨ã€‚</li></ul><blockquote><p>é¢è¯•çš„æ—¶å€™å¯ä»¥è¿™æ ·å›ç­”ï¼š ğŸ™‹â€â™‚ï¸ &quot;Spring AOP æ˜¯ä¸€ç§é¢å‘åˆ‡é¢ç¼–ç¨‹çš„å®ç°ï¼Œå®ƒé€šè¿‡åŠ¨æ€ä»£ç†æ–¹å¼è§£è€¦äº†ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡ã€‚å…¶ä¸»è¦ç»„æˆéƒ¨åˆ†åŒ…æ‹¬ JoinPointï¼ˆç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸ªç‰¹å®šç‚¹ï¼Œå¦‚æ–¹æ³•è°ƒç”¨ï¼‰ï¼ŒPointCutï¼ˆä¸€ç»„å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æˆ–è§„åˆ™å®šä¹‰çš„ JoinPointï¼‰ï¼ŒAdviceï¼ˆåœ¨ç‰¹å®šçš„ JoinPoint æ‰§è¡Œçš„ä»£ç ï¼‰ï¼Œå’Œ Aspectï¼ˆåŒ…å« Advice å’Œ PointCut çš„æ¨¡å—ï¼‰ã€‚ Spring AOP æ ¹æ®ç›®æ ‡å¯¹è±¡æ˜¯å¦å®ç°æ¥å£æ¥é€‰æ‹©ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†è¿˜æ˜¯ CGLIB ä»£ç†ã€‚å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼ŒSpring AOP å°±ä¼šç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦åˆ™ä¼šç”¨ CGLIB ä»£ç†ã€‚è¿™æ ·ï¼Œåœ¨è¿è¡Œæ—¶ï¼ŒSpring AOP å¯ä»¥åŠ¨æ€åœ°å°† Advice åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡ï¼Œå®ç°ç³»ç»ŸæœåŠ¡å’Œä¸šåŠ¡é€»è¾‘çš„è§£è€¦ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€äº›é€šç”¨çš„ç³»ç»ŸæœåŠ¡ï¼ˆæ¯”å¦‚äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—ã€å®‰å…¨ç­‰ï¼‰æŠ½è±¡å‡ºæ¥ï¼Œä»è€Œä½¿ä¸šåŠ¡ä»£ç æ›´ç®€æ´ã€æ›´æ˜“äºç»´æŠ¤å’Œå¤ç”¨ã€‚&quot;</p></blockquote><h3 id="æ‹¦æˆªå™¨æœ‰å‡ ä¸ªæ–¹æ³•-åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ-å¯¹æ¯”è¿‡æ»¤å™¨-2023å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#æ‹¦æˆªå™¨æœ‰å‡ ä¸ªæ–¹æ³•-åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ-å¯¹æ¯”è¿‡æ»¤å™¨-2023å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> æ‹¦æˆªå™¨æœ‰å‡ ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œå¯¹æ¯”è¿‡æ»¤å™¨ï¼ˆ2023å®Œç¾ä¸–ç•Œï¼‰</h3><p>æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨æ˜¯Webå¼€å‘ä¸­å¸¸ç”¨çš„ä¸¤ç§å¤„ç†æ–¹æ³•ã€‚è¿™é‡Œæˆ‘å‡è®¾ä½ æŒ‡çš„æ˜¯Spring MVCæ‹¦æˆªå™¨å’ŒJava Servletè¿‡æ»¤å™¨ã€‚ æ‹¦æˆªå™¨ (Interceptor) åœ¨Spring MVCä¸­é€šå¸¸æœ‰3ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)</code>: åœ¨è¯·æ±‚è¢«å¤„ç†ä¹‹å‰è°ƒç”¨ã€‚å¦‚æœè¿”å›trueï¼Œå¤„ç†æµç¨‹ç»§ç»­ï¼›å¦‚æœè¿”å›falseï¼Œå¤„ç†æµç¨‹ç»“æŸï¼Œä¸ä¼šè°ƒç”¨åç»­çš„æ‹¦æˆªå™¨å’Œå¤„ç†å™¨ã€‚</li><li><code>postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</code>: åœ¨è¯·æ±‚è¢«å¤„ç†ä¹‹åï¼Œè§†å›¾è¢«æ¸²æŸ“ä¹‹å‰è°ƒç”¨ã€‚å¯ä»¥é€šè¿‡å®ƒæ¥ä¿®æ”¹æ•°æ®æ¨¡å‹å’Œè§†å›¾æˆ–è¿›è¡Œå…¶ä»–å¤„ç†ã€‚</li><li><code>afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</code>: åœ¨è¯·æ±‚å¤„ç†å®Œæ¯•åï¼ˆè§†å›¾æ¸²æŸ“åï¼‰è°ƒç”¨ï¼Œé€šå¸¸ç”¨äºè¿›è¡Œèµ„æºæ¸…ç†ç­‰å·¥ä½œã€‚</li></ul><p>è¿‡æ»¤å™¨ (Filter) åœ¨Java Servlet APIä¸­é€šå¸¸æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š</p><ul><li>init(FilterConfig filterConfig): åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œåˆ›å»ºFilterå¯¹è±¡æ—¶è°ƒç”¨ã€‚</li><li>doFilter(ServletRequest request, ServletResponse response, FilterChain chain): æ¯æ¬¡åœ¨è¿‡æ»¤è¯·æ±‚æ—¶è°ƒç”¨ã€‚å¯ä»¥è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œç„¶åä½¿ç”¨chain.doFilter(request, response);å°†è¯·æ±‚ä¼ é€’åˆ°é“¾ä¸­çš„ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨æˆ–èµ„æºï¼ˆservletæˆ–é™æ€å†…å®¹ï¼‰ã€‚</li><li>destroy(): åœ¨æœåŠ¡å™¨å…³é—­æ—¶ï¼Œé”€æ¯Filterå¯¹è±¡æ—¶è°ƒç”¨ã€‚</li></ul><p>æ¯”è¾ƒï¼š</p><ul><li>ç›¸è¾ƒäºè¿‡æ»¤å™¨ï¼Œæ‹¦æˆªå™¨æ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚æ‹¦æˆªå™¨æ˜¯åŸºäºJavaçš„åå°„æœºåˆ¶çš„ï¼Œå®ƒåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å°†é€»è¾‘æ’å…¥åˆ°æ–¹æ³•è°ƒç”¨ä¸­ï¼Œè€Œä¸éœ€è¦æ”¹å˜æºç ã€‚æ­¤å¤–ï¼Œæ‹¦æˆªå™¨å¯ä»¥è·å¾—Springå®¹å™¨ä¸­çš„å„ç§beanï¼Œä»è€Œæœ‰æ›´å¤šçš„æ“ä½œã€‚</li><li>è¿‡æ»¤å™¨åˆ™ä¸»è¦ç”¨äºè¯·æ±‚çš„è¿‡æ»¤å¤„ç†ï¼ŒåŒ…æ‹¬æ—¥å¿—è®°å½•ã€è¯·æ±‚å‹ç¼©ã€å®‰å…¨æ£€æŸ¥ã€ç”¨æˆ·ç™»å½•æ ¡éªŒç­‰ã€‚å®ƒçš„è¿è¡Œé€Ÿåº¦ä¸€èˆ¬æ¯”æ‹¦æˆªå™¨å¿«ï¼Œä½†åŠŸèƒ½ä¸Šä¸å¦‚æ‹¦æˆªå™¨å¼ºå¤§ã€‚</li></ul><h3 id="å¯¼å…¥ä¸€ä¸ª-jar-åŒ…æ€ä¹ˆè®©-springboot-çŸ¥é“å“ªäº›éœ€è¦è‡ªåŠ¨é…ç½®-2023å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥ä¸€ä¸ª-jar-åŒ…æ€ä¹ˆè®©-springboot-çŸ¥é“å“ªäº›éœ€è¦è‡ªåŠ¨é…ç½®-2023å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> å¯¼å…¥ä¸€ä¸ª jar åŒ…æ€ä¹ˆè®© springboot çŸ¥é“å“ªäº›éœ€è¦è‡ªåŠ¨é…ç½®ï¼ˆ2023å®Œç¾ä¸–ç•Œï¼‰</h3><p>Spring Bootè‡ªåŠ¨é…ç½®æ˜¯é€šè¿‡@EnableAutoConfigurationæ³¨è§£å®ç°çš„ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯é€šè¿‡æŸ¥æ‰¾å¹¶åŠ è½½META-INF/spring.factoriesé…ç½®æ–‡ä»¶æ¥å®Œæˆçš„ã€‚ å¦‚æœä½ æƒ³è¦å°†ä½ çš„jaråŒ…åœ¨Spring Booté¡¹ç›®ä¸­è¿›è¡Œè‡ªåŠ¨é…ç½®ï¼Œä½ éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>åœ¨ä½ çš„jaråŒ…ä¸­åˆ›å»ºä¸€ä¸ªspring.factoriesæ–‡ä»¶ï¼Œå¹¶å°†å…¶æ”¾å…¥META-INFç›®å½•ä¸‹</li><li>åœ¨spring.factoriesæ–‡ä»¶ä¸­æ·»åŠ ä½ çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œæ ¼å¼å¦‚ä¸‹</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\
com.yourpackage.YourAutoConfigurationClass
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ç¡®ä¿ä½ çš„AutoConfigurationç±»ä½¿ç”¨äº†@Configurationï¼Œå¹¶åœ¨éœ€è¦çš„beanä¸Šä½¿ç”¨äº†@Beanæ³¨è§£ã€‚</li></ol><p>è¿™æ ·ï¼Œå½“Spring Booté¡¹ç›®å¯åŠ¨æ—¶ï¼Œå®ƒä¼šè¯»å–META-INF/spring.factoriesæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨é…ç½®é‚£äº›beanã€‚</p><p>è¯·æ³¨æ„ï¼Œä½ çš„AutoConfigurationç±»åº”è¯¥å°½å¯èƒ½çš„&quot;å¹‚ç­‰&quot;ï¼Œæ„å‘³ç€å¤šæ¬¡è¿è¡Œç»“æœåº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”åº”è¯¥å¯¹å·²æœ‰çš„Beanæœ‰æ‰€å°Šé‡ï¼Œå¦‚æœå®¹å™¨ä¸­å·²ç»å­˜åœ¨äº†ä½ è¦åˆ›å»ºçš„Beanï¼Œä½ åº”è¯¥é¿å…å†æ¬¡åˆ›å»ºã€‚</p><p>å¦å¤–ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨@Conditionalæ³¨è§£ä»¥é¿å…åœ¨ä¸éœ€è¦çš„æƒ…å†µä¸‹åˆ›å»ºbeanã€‚</p><h2 id="ğŸ“‘-æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#ğŸ“‘-æ•°æ®åº“" aria-hidden="true">#</a> ğŸ“‘ æ•°æ®åº“</h2><h3 id="å¯é‡å¤è¯»å’Œå·²æäº¤è¯»éš”ç¦»çº§åˆ«è¡¨ç°çš„ç°è±¡æ˜¯ä»€ä¹ˆ-åŒºåˆ«æ˜¯ä»€ä¹ˆæ ·çš„-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¯é‡å¤è¯»å’Œå·²æäº¤è¯»éš”ç¦»çº§åˆ«è¡¨ç°çš„ç°è±¡æ˜¯ä»€ä¹ˆ-åŒºåˆ«æ˜¯ä»€ä¹ˆæ ·çš„-2023ç¾å›¢" aria-hidden="true">#</a> å¯é‡å¤è¯»å’Œå·²æäº¤è¯»éš”ç¦»çº§åˆ«è¡¨ç°çš„ç°è±¡æ˜¯ä»€ä¹ˆï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><ul><li>è¯»æäº¤ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡æäº¤ä¹‹åï¼Œå®ƒåšçš„å˜æ›´æ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°ï¼Œä¼šæœ‰ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜ã€‚</li><li>å¯é‡å¤è¯»ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œä¸€ç›´è·Ÿè¿™ä¸ªäº‹åŠ¡å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼ŒMySQL InnoDB å¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼Œè§£å†³äº†ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼Œå¹¶ä¸”ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…å¹»è¯»ç°è±¡çš„å‘ç”Ÿã€‚</li></ul><h3 id="æ•°æ®æ–‡ä»¶å¤§ä½“åˆ†æˆå“ªå‡ ç§æ•°æ®æ–‡ä»¶-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æ–‡ä»¶å¤§ä½“åˆ†æˆå“ªå‡ ç§æ•°æ®æ–‡ä»¶-2023ç¾å›¢" aria-hidden="true">#</a> æ•°æ®æ–‡ä»¶å¤§ä½“åˆ†æˆå“ªå‡ ç§æ•°æ®æ–‡ä»¶ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>æˆ‘ä»¬æ¯åˆ›å»ºä¸€ä¸ª databaseï¼ˆæ•°æ®åº“ï¼‰ éƒ½ä¼šåœ¨ /var/lib/mysql/ ç›®å½•é‡Œé¢åˆ›å»ºä¸€ä¸ªä»¥ database ä¸ºåçš„ç›®å½•ï¼Œç„¶åä¿å­˜è¡¨ç»“æ„å’Œè¡¨æ•°æ®çš„æ–‡ä»¶éƒ½ä¼šå­˜æ”¾åœ¨è¿™ä¸ªç›®å½•é‡Œã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªåä¸º my_test çš„ databaseï¼Œè¯¥ database é‡Œæœ‰ä¸€å¼ åä¸º t_order æ•°æ®åº“è¡¨ã€‚ <img src="`+d+'" alt="" loading="lazy"> ç„¶åï¼Œæˆ‘ä»¬è¿›å…¥ /var/lib/mysql/my_test ç›®å½•ï¼Œçœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆæ–‡ä»¶ï¼Ÿ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root <span class="token operator">~</span><span class="token punctuation">]</span>#ls <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">/</span>my_test\ndb<span class="token punctuation">.</span>opt  \nt_order<span class="token punctuation">.</span>frm  \nt_order<span class="token punctuation">.</span>ibd\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå…±æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«ä»£è¡¨ç€ï¼š</p><ul><li>db.optï¼Œç”¨æ¥å­˜å‚¨å½“å‰æ•°æ®åº“çš„é»˜è®¤å­—ç¬¦é›†å’Œå­—ç¬¦æ ¡éªŒè§„åˆ™ã€‚</li><li>t_order.frm ï¼Œt_order çš„è¡¨ç»“æ„ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ã€‚åœ¨ MySQL ä¸­å»ºç«‹ä¸€å¼ è¡¨éƒ½ä¼šç”Ÿæˆä¸€ä¸ª.frm æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”¨æ¥ä¿å­˜æ¯ä¸ªè¡¨çš„å…ƒæ•°æ®ä¿¡æ¯çš„ï¼Œä¸»è¦åŒ…å«è¡¨ç»“æ„å®šä¹‰ã€‚</li><li>t_order.ibdï¼Œt_order çš„è¡¨æ•°æ®ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ã€‚è¡¨æ•°æ®æ—¢å¯ä»¥å­˜åœ¨å…±äº«è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆæ–‡ä»¶åï¼šibdata1ï¼‰é‡Œï¼Œä¹Ÿå¯ä»¥å­˜æ”¾åœ¨ç‹¬å è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆæ–‡ä»¶åï¼šè¡¨åå­—.ibdï¼‰ã€‚è¿™ä¸ªè¡Œä¸ºæ˜¯ç”±å‚æ•° innodb_file_per_table æ§åˆ¶çš„ï¼Œè‹¥è®¾ç½®äº†å‚æ•° innodb_file_per_table ä¸º 1ï¼Œåˆ™ä¼šå°†å­˜å‚¨çš„æ•°æ®ã€ç´¢å¼•ç­‰ä¿¡æ¯å•ç‹¬å­˜å‚¨åœ¨ä¸€ä¸ªç‹¬å è¡¨ç©ºé—´ï¼Œä» MySQL 5.6.6 ç‰ˆæœ¬å¼€å§‹ï¼Œå®ƒçš„é»˜è®¤å€¼å°±æ˜¯ 1 äº†ï¼Œå› æ­¤ä»è¿™ä¸ªç‰ˆæœ¬ä¹‹åï¼Œ MySQL ä¸­æ¯ä¸€å¼ è¡¨çš„æ•°æ®éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ .ibd æ–‡ä»¶ã€‚</li></ul><h3 id="å¯¹ä¸€ä¸ªæ…¢sqlæ€ä¹ˆå»æ’æŸ¥-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¯¹ä¸€ä¸ªæ…¢sqlæ€ä¹ˆå»æ’æŸ¥-2023ç¾å›¢" aria-hidden="true">#</a> å¯¹ä¸€ä¸ªæ…¢sqlæ€ä¹ˆå»æ’æŸ¥ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>å¯é€šè¿‡å¼€å¯mysqlçš„æ…¢æ—¥å¿—æŸ¥è¯¢ï¼Œè®¾ç½®å¥½æ—¶é—´é˜ˆå€¼ï¼Œè¿›è¡Œæ•è·</p><h3 id="ç´¢å¼•å­—æ®µæ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#ç´¢å¼•å­—æ®µæ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½-2023ç¾å›¢" aria-hidden="true">#</a> ç´¢å¼•å­—æ®µæ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½ï¼ˆ2023ç¾å›¢ï¼‰</h3><p>ç´¢å¼•è¶Šå¤šï¼Œåœ¨å†™å…¥é¢‘ç¹çš„åœºæ™¯ä¸‹ï¼Œå¯¹äºB+æ ‘çš„ç»´æŠ¤æ‰€ä»˜å‡ºçš„æ€§èƒ½æ¶ˆè€—ä¹Ÿä¼šè¶Šå¤§</p><h3 id="ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•-2023-å¿«æ‰‹" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><blockquote><p>è¿™ä¸ªå…¶å®åœ¨2022å¹´çš„å¤§å‚é¢è¯•ä¸­å‡ºç°è¿‡ï¼Œä½†æ˜¯æ˜¯ä»¥èšç°‡ç´¢å¼•å½¢å¼æé—®å‡ºç°</p></blockquote><p><strong>è¦†ç›–ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–æœºåˆ¶</strong>ã€‚åœ¨è¦†ç›–ç´¢å¼•ä¸­ï¼Œç´¢å¼•æœ¬èº«åŒ…å«äº†æŸ¥è¯¢æ‰€éœ€è¦çš„æ‰€æœ‰æ•°æ®ï¼Œå› æ­¤åœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿå¯ä»¥åªè®¿é—®ç´¢å¼•ï¼Œè€Œä¸éœ€è¦å†è®¿é—®æ•°æ®è¡Œã€‚è¿™æ ·å¯ä»¥æ˜¾è‘—æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œå› ä¸ºè®¿é—®ç´¢å¼•é€šå¸¸æ¯”è®¿é—®æ•°æ®è¡Œè¦å¿«ã€‚ï¼ˆåœ¨ç´¢å¼• B+Tree çš„å¶å­èŠ‚ç‚¹ä¸Šéƒ½èƒ½æ‰¾å¾—åˆ°çš„é‚£äº›ç´¢å¼•ï¼Œä»äºŒçº§ç´¢å¼•ä¸­æŸ¥è¯¢å¾—åˆ°è®°å½•ï¼Œè€Œä¸éœ€è¦é€šè¿‡èšç°‡ç´¢å¼•æŸ¥è¯¢è·å¾—ï¼Œå¯ä»¥é¿å…å›è¡¨çš„æ“ä½œï¼‰</p><blockquote><p>è¦†ç›–ç´¢å¼•ä¸èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„ä¸»è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å­˜å‚¨å’Œè®¿é—®æ–¹å¼ï¼š</p><ul><li>è¦†ç›–ç´¢å¼•ï¼šå®ƒè¢«ç§°ä¸ºâ€œè¦†ç›–â€ï¼Œå› ä¸ºåªéœ€ä½¿ç”¨ç´¢å¼•å³å¯æ»¡è¶³æŸ¥è¯¢ï¼Œè€Œæ— éœ€è®¿é—®è¡¨æ•°æ®æœ¬èº«ã€‚è¿™å¯ä»¥ä½¿æŸ¥è¯¢æ›´å¿«ï¼Œå› ä¸ºå®ƒé¿å…äº†è®¿é—®è¡¨æ•°æ®çš„éœ€è¦ï¼Œè€Œæ˜¯ä½¿ç”¨é€šå¸¸æ›´å°ã€æ›´ç´§å‡‘çš„ç´¢å¼•æ•°æ®</li><li>èšç°‡ç´¢å¼•ï¼šåœ¨èšç°‡ç´¢å¼•ä¸­ï¼Œæ•°æ®è¡Œå®é™…ä¸Šè¢«å­˜å‚¨åœ¨ç´¢å¼•ä¸­ï¼Œå› æ­¤æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚ç´¢å¼•çš„é¡ºåºä¸ç£ç›˜ä¸Šè¡Œçš„ç‰©ç†é¡ºåºç›¸åŒã€‚èšç°‡ç´¢å¼•å¯ä»¥å¿«é€ŸæŸ¥æ‰¾æŒ‡å®šçš„æ•°æ®è¡Œï¼Œä½†å¦‚æœä½ éœ€è¦åœ¨åŒä¸€è¡¨ä¸Šæ‰§è¡Œè®¸å¤šä¸åŒçš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå—åˆ°é™åˆ¶ï¼Œå› ä¸ºæ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚</li><li>éèšç°‡ç´¢å¼•ï¼šéèšç°‡ç´¢å¼•æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç»“æ„ï¼Œä¸æ•°æ®è¡Œåˆ†å¼€å­˜å‚¨ã€‚éèšç°‡ç´¢å¼•åŒ…å«ç´¢å¼•é”®å€¼å’Œä¸€ä¸ªæŒ‡å‘æ¯ä¸ªæ•°æ®è¡Œå®é™…ä½ç½®çš„æŒ‡é’ˆã€‚åœ¨éèšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾æ•°æ®éœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼šé¦–å…ˆåœ¨ç´¢å¼•ä¸­æŸ¥æ‰¾ï¼Œç„¶åä½¿ç”¨ç´¢å¼•ä¸­çš„æŒ‡é’ˆè®¿é—®æ•°æ®è¡Œã€‚å› æ­¤ï¼Œéèšç°‡ç´¢å¼•çš„æŸ¥è¯¢é€šå¸¸æ¯”èšç°‡ç´¢å¼•è¦æ…¢ä¸€äº›ã€‚</li></ul></blockquote><p>è¦†ç›–ç´¢å¼•å¯ä»¥çœ‹ä½œæ˜¯éèšç°‡ç´¢å¼•çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œå®ƒä¸ä»…åŒ…å«ç´¢å¼•é”®å€¼å’Œæ•°æ®è¡Œçš„æŒ‡é’ˆï¼Œè¿˜åŒ…å«æŸ¥è¯¢æ‰€éœ€çš„å…¶ä»–åˆ—çš„æ•°æ®ã€‚æ‰€ä»¥ï¼Œå¦‚æœæŸ¥è¯¢å¯ä»¥è¢«ä¸€ä¸ªè¦†ç›–ç´¢å¼•æ»¡è¶³ï¼Œé‚£ä¹ˆæŸ¥è¯¢é€Ÿåº¦å°±ä¼šæ¯”ä¸€èˆ¬çš„éèšç°‡ç´¢å¼•è¦å¿«ï¼Œå› ä¸ºæ•°æ®åº“ç³»ç»Ÿä¸éœ€è¦å†è®¿é—®æ•°æ®è¡Œï¼Œæ‰€æœ‰éœ€è¦çš„æ•°æ®éƒ½åœ¨ç´¢å¼•ä¸­ã€‚ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„å¥½å¤„å°±æ˜¯ï¼Œä¸éœ€è¦æŸ¥è¯¢å‡ºåŒ…å«æ•´è¡Œè®°å½•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œä¹Ÿå°±å‡å°‘äº†å¤§é‡çš„ I/O æ“ä½œã€‚</p><p>ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„ä¾‹å­:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>\n  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>idx_name_age<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span>\n\n<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œ (name, age) ç»„æˆäº†ä¸€ä¸ªå¤åˆç´¢å¼• idx_name_age,æŸ¥è¯¢åªéœ€è¦nameå’Œageä¸¤åˆ—,æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•,æ•°æ®åº“åªéœ€è¦æ‰«æç´¢å¼•,ä¸éœ€è¦è®¿é—®è¡¨æ•°æ®,æ‰€ä»¥æŸ¥è¯¢æ•ˆç‡é«˜ã€‚</p><p>å…·ä½“æŸ¥è¯¢ä¸ºï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæŸ¥è¯¢åªéœ€è¦nameå’Œageä¸¤ä¸ªå­—æ®µ,è€Œidx_name_ageç´¢å¼•ä¸­å°±åŒ…å«è¿™ä¸¤ä¸ªå­—æ®µ,æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•ã€‚ è¦†ç›–ç´¢å¼•çš„æŸ¥è¯¢è¯­å¥åº”è¯¥æ˜¯:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> \n    idx_name_age<span class="token punctuation">.</span>name<span class="token punctuation">,</span> \n    idx_name_age<span class="token punctuation">.</span>age\n<span class="token keyword">FROM</span> tbl_user \n<span class="token keyword">WHERE</span> idx_name_age<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> idx_name_age<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä»idx_name_ageç´¢å¼•ä¸­é€‰å–éœ€è¦çš„å­—æ®µ,è€Œä¸å†è®¿é—®è¡¨æ•°æ®,æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ã€‚ æ‰€ä»¥,ä¸€ä¸ªæŸ¥è¯¢è¦ä½¿ç”¨è¦†ç›–ç´¢å¼•,éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶:</p><ol><li>æŸ¥è¯¢æ‰€éœ€è¦çš„å­—æ®µéƒ½å­˜åœ¨äºæŸä¸ªç´¢å¼•ä¸­</li><li>æŸ¥è¯¢è¯­å¥ç›´æ¥ä»è¯¥ç´¢å¼•ä¸­é€‰å–å­—æ®µ,è€Œä¸å†è®¿é—®è¡¨æ•°æ®</li></ol><p>æ²¡ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„ä¾‹å­:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>\n  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>idx_name_age<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">)</span>  \n<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span>\n\n<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>tbl_user<span class="token punctuation">`</span></span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œè™½ç„¶æœ‰(name, age)çš„ç´¢å¼•,ä½†æ˜¯ç”±äºæŸ¥è¯¢éœ€è¦çš„addresså­—æ®µä¸åœ¨è¯¥ç´¢å¼•ä¸­,æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢æ— æ³•ä½¿ç”¨è¦†ç›–ç´¢å¼•,éœ€è¦è®¿é—®è¡¨æ•°æ®è·å–addresså­—æ®µ,æŸ¥è¯¢æ•ˆç‡è¾ƒä½ã€‚</p><p>å›¾ç¤ºï¼š åœ¨æ²¡æœ‰ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œæ•°æ®åº“æŸ¥è¯¢æ•°æ®æ˜¯è¿™æ ·ï¼š <img src="'+k+'" alt="" loading="lazy"></p><p>ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•é¿å…äº†ä»æ•°æ®æœåŠ¡ä¸­è·å–æ•°æ®çš„é¢å¤–æ­¥éª¤ã€‚è¿™å¯¼è‡´äº†ç›¸å½“å¤§çš„æ€§èƒ½æ”¹è¿›ã€‚ <img src="'+m+'" alt="" loading="lazy"></p>',66),ln=n("p",null,"å‚è€ƒæ–‡çŒ®ï¼š",-1),cn={href:"https://stackoverflow.com/questions/62137/what-is-a-covered-index",target:"_blank",rel:"noopener noreferrer"},rn={href:"https://xiaolincoding.com/mysql/index/index_interview.html#%E6%8C%89%E5%AD%97%E6%AE%B5%E4%B8%AA%E6%95%B0%E5%88%86%E7%B1%BB",target:"_blank",rel:"noopener noreferrer"},un={href:"https://stackoverflow.com/questions/609343/what-are-covering-indexes-and-covered-queries-in-sql-server",target:"_blank",rel:"noopener noreferrer"},dn={href:"https://docs.couchbase.com/server/current/n1ql/n1ql-language-reference/covering-indexes.html",target:"_blank",rel:"noopener noreferrer"},kn={href:"https://www.red-gate.com/simple-talk/databases/sql-server/learn/using-covering-indexes-to-improve-query-performance/",target:"_blank",rel:"noopener noreferrer"},mn=t(`<h3 id="redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”-set-nxå‘½ä»¤æœ‰ä»€ä¹ˆé—®é¢˜-å¦‚ä½•è§£å†³-2023å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”-set-nxå‘½ä»¤æœ‰ä»€ä¹ˆé—®é¢˜-å¦‚ä½•è§£å†³-2023å°çº¢ä¹¦" aria-hidden="true">#</a> redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é” set nxå‘½ä»¤æœ‰ä»€ä¹ˆé—®é¢˜ å¦‚ä½•è§£å†³ï¼Ÿï¼ˆ2023å°çº¢ä¹¦ï¼‰</h3><p>Rediså®ç°åˆ†å¸ƒå¼é”çš„åŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨SETå‘½ä»¤çš„NXï¼ˆNot eXistsï¼‰é€‰é¡¹ã€‚NXé€‰é¡¹è¡¨ç¤ºåªæœ‰å½“é”®ä¸å­˜åœ¨æ—¶ï¼Œæ‰ä¼šè®¾ç½®é”®å€¼å¯¹ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½å¤ŸæˆåŠŸåœ°è·å–é”ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SET lock_key some_value NX PX <span class="token number">30000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªå‘½ä»¤å°è¯•è®¾ç½®ä¸€ä¸ªåä¸ºlock_keyçš„é”®ï¼Œå€¼ä¸ºsome_valueï¼Œå¹¶ä¸”ä½¿ç”¨NXé€‰é¡¹ã€‚PXé€‰é¡¹è¡¨ç¤ºè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯30000æ¯«ç§’ï¼ˆ30ç§’ï¼‰ã€‚ ç„¶è€Œï¼Œä½¿ç”¨SET NXå‘½ä»¤å®ç°åˆ†å¸ƒå¼é”å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ol><li>éåŸå­æ“ä½œï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¯èƒ½åœ¨è®¾ç½®é”å’Œè®¾ç½®è¿‡æœŸæ—¶é—´ä¹‹é—´å´©æºƒï¼Œå¯¼è‡´é”æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨SETå‘½ä»¤çš„PXé€‰é¡¹æ¥è§£å†³ï¼Œå®ƒå¯ä»¥åœ¨è®¾ç½®é”çš„åŒæ—¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç¡®ä¿æ“ä½œæ˜¯åŸå­çš„ã€‚</li><li>æ— æ³•è§£å†³é”è¶…æ—¶é—®é¢˜ï¼šå¦‚æœæŒæœ‰é”çš„å®¢æˆ·ç«¯åœ¨é”è¿‡æœŸä¹‹å‰æ²¡æœ‰å®Œæˆä»»åŠ¡ï¼Œå…¶ä»–å®¢æˆ·ç«¯å¯èƒ½ä¼šè·å–åˆ°é”ï¼Œå¯¼è‡´å¹¶å‘é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨è·å–é”æ—¶è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„å€¼ï¼ˆä¾‹å¦‚UUIDï¼‰ï¼Œå¹¶åœ¨é‡Šæ”¾é”æ—¶æ£€æŸ¥è¯¥å€¼ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åªæœ‰é”çš„æŒæœ‰è€…æ‰èƒ½é‡Šæ”¾é”ã€‚</li><li>æ— æ³•è§£å†³é”é‡Šæ”¾é—®é¢˜ï¼šå¦‚æœæŒæœ‰é”çš„å®¢æˆ·ç«¯åœ¨é‡Šæ”¾é”ä¹‹å‰å´©æºƒï¼Œé”å¯èƒ½æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªåå°çº¿ç¨‹å®šæœŸæ£€æŸ¥å¹¶é‡Šæ”¾è¿‡æœŸçš„é”ã€‚</li><li>æ— æ³•å®ç°å…¬å¹³é”ï¼šSET NXå‘½ä»¤æ— æ³•ä¿è¯å…¬å¹³æ€§ï¼Œå³ç­‰å¾…æ—¶é—´æœ€é•¿çš„å®¢æˆ·ç«¯ä¸ä¸€å®šèƒ½å¤Ÿä¼˜å…ˆè·å–é”ã€‚è¦å®ç°å…¬å¹³é”ï¼Œå¯ä»¥ä½¿ç”¨Redisçš„LISTæ•°æ®ç»“æ„ï¼Œå°†ç­‰å¾…é”çš„å®¢æˆ·ç«¯æŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é¡ºåºæ’é˜Ÿã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œè™½ç„¶SET NXå‘½ä»¤å¯ä»¥å®ç°åŸºæœ¬çš„åˆ†å¸ƒå¼é”åŠŸèƒ½ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦è€ƒè™‘æ›´å¤šçš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æˆç†Ÿçš„Redisåˆ†å¸ƒå¼é”åº“ï¼Œå¦‚Redlockã€‚Redlockæä¾›äº†ä¸€ä¸ªæ›´åŠ å¥å£®å’Œå¯é çš„åˆ†å¸ƒå¼é”å®ç°ï¼Œå¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜</li></ol><h3 id="ä»€ä¹ˆæƒ…å†µä½¿ç”¨-redis-åè€Œé™ä½æ€§èƒ½-2023å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæƒ…å†µä½¿ç”¨-redis-åè€Œé™ä½æ€§èƒ½-2023å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> ä»€ä¹ˆæƒ…å†µä½¿ç”¨ redis åè€Œé™ä½æ€§èƒ½ï¼ˆ2023å®Œç¾ä¸–ç•Œï¼‰</h3><ul><li>æ•°æ®é›†è¿‡å¤§ï¼šRedis å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœæ•°æ®é›†è¿‡å¤§ï¼Œè¶…å‡ºäº†æœåŠ¡å™¨å¯ç”¨å†…å­˜çš„é™åˆ¶ï¼Œå°±ä¼šå¯¼è‡´ Redis ä½¿ç”¨äº¤æ¢ç©ºé—´ï¼ˆswap spaceï¼‰æˆ–è€…é¢‘ç¹åœ°ä»ç£ç›˜åŠ è½½æ•°æ®ï¼Œä»è€Œä¸¥é‡å½±å“æ€§èƒ½ã€‚</li><li>å†…å­˜ç¢ç‰‡åŒ–ï¼šå½“ Redis é¢‘ç¹åœ°è¿›è¡Œå†™å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–ã€‚è¿™ä¼šå¯¼è‡´ Redis éœ€è¦æ›´å¤šçš„å†…å­˜æ¥å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œæœ€ç»ˆå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li><li>å¤§é‡çš„é”®è¿‡æœŸæ“ä½œï¼šå½“ Redis ä¸­æœ‰å¤§é‡çš„é”®éœ€è¦è¿‡æœŸå¤„ç†æ—¶ï¼ŒRedis ä¼šæ‰§è¡Œå®šæœŸæ¸…ç†æ“ä½œæ¥åˆ é™¤è¿‡æœŸçš„é”®ã€‚å¦‚æœè¿™ä¸ªæ¸…ç†æ“ä½œè€—æ—¶è¾ƒé•¿ï¼Œä¼šå¯¼è‡´ Redis åœ¨æ‰§è¡Œå…¶ä»–æ“ä½œæ—¶çš„æ€§èƒ½ä¸‹é™ã€‚</li><li>é«˜å¹¶å‘å†™å…¥æ“ä½œï¼šå½“æœ‰å¤§é‡çš„å¹¶å‘å†™å…¥æ“ä½œæ—¶ï¼ŒRedis å¯èƒ½ä¼šå› ä¸ºç«äº‰æ¡ä»¶è€Œé™ä½æ€§èƒ½ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Redis çš„äº‹åŠ¡åŠŸèƒ½æ¥å‡å°‘ç«äº‰å¹¶å‘ã€‚</li><li>å¤æ‚çš„æ•°æ®ç»“æ„æ“ä½œï¼šRedis æä¾›äº†å¤šç§å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå¦‚åˆ—è¡¨ã€é›†åˆå’Œæœ‰åºé›†åˆç­‰ã€‚å½“å¯¹è¿™äº›æ•°æ®ç»“æ„è¿›è¡Œå¤æ‚çš„æ“ä½œæ—¶ï¼Œä¾‹å¦‚å¯¹å¤§å‹åˆ—è¡¨è¿›è¡Œé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æƒ…å†µå¹¶ä¸æ„å‘³ç€ Redis æ€»æ˜¯ä¼šé™ä½æ€§èƒ½ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹å¯èƒ½ä¼šå‡ºç°æ€§èƒ½ä¸‹é™çš„æƒ…å†µã€‚ä¸ºäº†ä¼˜åŒ– Redis çš„æ€§èƒ½ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„æƒ…å†µè¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ï¼Œä¾‹å¦‚å¢åŠ å†…å­˜ã€åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´ã€ä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„ç­‰ã€‚</p>`,8),vn=n("p",null,"å‚è€ƒèµ„æ–™ï¼š",-1),hn={href:"https://loadforge.com/guides/troubleshooting-redis-performance-issues",target:"_blank",rel:"noopener noreferrer"},gn={href:"https://severalnines.com/blog/performance-tuning-redis/",target:"_blank",rel:"noopener noreferrer"},bn=n("h3",{id:"mysqlçš„éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ-mysqlæ˜¯å¦‚ä½•å®ç°çš„-2023é˜¿é‡Œ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#mysqlçš„éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ-mysqlæ˜¯å¦‚ä½•å®ç°çš„-2023é˜¿é‡Œ","aria-hidden":"true"},"#"),s(" mysqlçš„éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ?mysqlæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿï¼ˆ2023é˜¿é‡Œï¼‰")],-1),fn=n("p",null,"MySQL InnoDB å¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«è™½ç„¶æ˜¯ã€Œå¯é‡å¤è¯»ã€ï¼Œä½†æ˜¯å®ƒå¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…å¹»è¯»ç°è±¡ï¼ˆå¹¶ä¸æ˜¯å®Œå…¨è§£å†³äº†ï¼‰ï¼Œè§£å†³çš„æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š",-1),yn=n("ul",null,[n("li",null,[s("é’ˆå¯¹"),n("strong",null,"å¿«ç…§è¯»"),s("ï¼ˆæ™®é€š select è¯­å¥ï¼‰ï¼Œæ˜¯é€šè¿‡ MVCC æ–¹å¼è§£å†³äº†å¹»è¯»ï¼Œå› ä¸ºå¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œä¸€ç›´è·Ÿè¿™ä¸ªäº‹åŠ¡å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œå³ä½¿ä¸­é€”æœ‰å…¶ä»–äº‹åŠ¡æ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ˜¯æŸ¥è¯¢ä¸å‡ºæ¥è¿™æ¡æ•°æ®çš„ï¼Œæ‰€ä»¥å°±å¾ˆå¥½äº†é¿å…å¹»è¯»é—®é¢˜ã€‚")]),n("li",null,[s("é’ˆå¯¹"),n("strong",null,"å½“å‰è¯»"),s("ï¼ˆselect ... for update ç­‰è¯­å¥ï¼‰ï¼Œæ˜¯é€šè¿‡ next-key lockï¼ˆè®°å½•é”+é—´éš™é”ï¼‰æ–¹å¼è§£å†³äº†å¹»è¯»ï¼Œå› ä¸ºå½“æ‰§è¡Œ select ... for update è¯­å¥çš„æ—¶å€™ï¼Œä¼šåŠ ä¸Š next-key lockï¼Œå¦‚æœæœ‰å…¶ä»–äº‹åŠ¡åœ¨ next-key lock é”èŒƒå›´å†…æ’å…¥äº†ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ’å…¥è¯­å¥å°±ä¼šè¢«é˜»å¡ï¼Œæ— æ³•æˆåŠŸæ’å…¥ï¼Œæ‰€ä»¥å°±å¾ˆå¥½äº†é¿å…å¹»è¯»é—®é¢˜ã€‚")]),n("li")],-1),wn={href:"https://xiaolincoding.com/mysql/transaction/mvcc.html",target:"_blank",rel:"noopener noreferrer"},_n=t(`<h3 id="rediså¤§keyå¦‚ä½•è§£å†³-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#rediså¤§keyå¦‚ä½•è§£å†³-2023-æ»´æ»´" aria-hidden="true">#</a> Rediså¤§keyå¦‚ä½•è§£å†³ï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>Rediså¤§keyé€šå¸¸æŒ‡çš„æ˜¯å­˜å‚¨åœ¨Redisä¸­çš„æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€é›†åˆã€å“ˆå¸Œè¡¨å’Œæœ‰åºé›†åˆï¼‰çš„æ•°æ®é‡ç‰¹åˆ«å¤§çš„keyã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåˆ—è¡¨ä¸­çš„å…ƒç´ æ•°é‡å·¨å¤§ï¼Œæˆ–è€…ä¸€ä¸ªå“ˆå¸Œè¡¨çš„å­—æ®µæ•°é‡å¾ˆå¤šã€‚è¿™äº›å¤§keyå¯èƒ½ä¼šå¯¼è‡´åœ¨æ‰§è¡ŒæŸäº›æ“ä½œæ—¶æ¶ˆè€—è¿‡å¤šçš„CPUå’Œå†…å­˜èµ„æºï¼Œè¿›è€Œå½±å“Redisçš„æ€§èƒ½ã€‚ ä¾‹å¦‚ï¼šå­—ç¬¦ä¸²(String)ï¼šä¸€ä¸ªå­—ç¬¦ä¸²valueçš„é•¿åº¦éå¸¸å¤§ï¼Œä¾‹å¦‚è¶…è¿‡10KBã€‚</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>SET bigkey <span class="token string">&quot;a very large string.....&quot;</span>  # stringé•¿åº¦éå¸¸å¤§
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ—è¡¨(List)ï¼šåˆ—è¡¨ä¸­çš„å…ƒç´ æ•°é‡éå¸¸å¤šï¼Œä¾‹å¦‚è¶…è¿‡10000ä¸ªã€‚</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>LPUSH bigkey item1 item2 item3 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> item10001  # åˆ—è¡¨å…ƒç´ æ•°é‡éå¸¸å¤š
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“ˆå¸Œ(Hash)ï¼šå“ˆå¸Œä¸­çš„å­—æ®µæ•°é‡éå¸¸å¤šï¼Œä¾‹å¦‚è¶…è¿‡10000ä¸ªã€‚</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>HMSET bigkey field1 value1 field2 value2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> field10001 value10001  # å“ˆå¸Œå­—æ®µæ•°é‡éå¸¸å¤š
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»¥ä¸Šçš„æ•°å€¼ï¼ˆä¾‹å¦‚10KBï¼Œ10000ä¸ªç­‰ï¼‰ä»…ä½œä¸ºå‚è€ƒï¼Œå…·ä½“å®šä¹‰å¤§keyçš„é˜ˆå€¼éœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡å’ŒRedisçš„é…ç½®æ¥å†³å®šã€‚å¦‚æœè¿™äº›keyå¯¹Redisçš„æ€§èƒ½äº§ç”Ÿäº†å½±å“ï¼Œå°±åº”å½“è€ƒè™‘å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯å¤§keyæ€»ç»“</p></blockquote><ul><li>String ç±»å‹çš„å€¼å¤§äº 10 KBï¼›</li><li>Hashã€Listã€Setã€ZSet ç±»å‹çš„å…ƒç´ çš„ä¸ªæ•°è¶…è¿‡ 5000ä¸ªï¼›</li></ul><blockquote><p>å¤§ key ä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</p></blockquote><p>å¤§ key ä¼šå¸¦æ¥ä»¥ä¸‹å››ç§å½±å“ï¼š</p><ul><li><strong>å®¢æˆ·ç«¯è¶…æ—¶é˜»å¡</strong>ã€‚ç”±äº Redis æ‰§è¡Œå‘½ä»¤æ˜¯å•çº¿ç¨‹å¤„ç†ï¼Œç„¶ååœ¨æ“ä½œå¤§ key æ—¶ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šé˜»å¡ Redisï¼Œä»å®¢æˆ·ç«¯è¿™ä¸€è§†è§’çœ‹ï¼Œå°±æ˜¯å¾ˆä¹…å¾ˆä¹…éƒ½æ²¡æœ‰å“åº”ã€‚</li><li><strong>å¼•å‘ç½‘ç»œé˜»å¡</strong>ã€‚æ¯æ¬¡è·å–å¤§ key äº§ç”Ÿçš„ç½‘ç»œæµé‡è¾ƒå¤§ï¼Œå¦‚æœä¸€ä¸ª key çš„å¤§å°æ˜¯ 1 MBï¼Œæ¯ç§’è®¿é—®é‡ä¸º 1000ï¼Œé‚£ä¹ˆæ¯ç§’ä¼šäº§ç”Ÿ 1000MB çš„æµé‡ï¼Œè¿™å¯¹äºæ™®é€šåƒå…†ç½‘å¡çš„æœåŠ¡å™¨æ¥è¯´æ˜¯ç¾éš¾æ€§çš„ã€‚</li><li><strong>é˜»å¡å·¥ä½œçº¿ç¨‹</strong>ã€‚å¦‚æœä½¿ç”¨ del åˆ é™¤å¤§ key æ—¶ï¼Œä¼šé˜»å¡å·¥ä½œçº¿ç¨‹ï¼Œè¿™æ ·å°±æ²¡åŠæ³•å¤„ç†åç»­çš„å‘½ä»¤ã€‚</li><li><strong>å†…å­˜åˆ†å¸ƒä¸å‡</strong>ã€‚é›†ç¾¤æ¨¡å‹åœ¨ slot åˆ†ç‰‡å‡åŒ€æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°æ•°æ®å’ŒæŸ¥è¯¢å€¾æ–œæƒ…å†µï¼Œéƒ¨åˆ†æœ‰å¤§ key çš„ Redis èŠ‚ç‚¹å ç”¨å†…å­˜å¤šï¼ŒQPS ä¹Ÿä¼šæ¯”è¾ƒå¤§ã€‚</li></ul><blockquote><p>å¦‚ä½•æ‰¾åˆ°å¤§ key ï¼Ÿ</p></blockquote><ol><li>redis-cli --bigkeys æŸ¥æ‰¾å¤§key</li></ol><p>å¯ä»¥é€šè¿‡ redis-cli --bigkeys å‘½ä»¤æŸ¥æ‰¾å¤§ keyï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>redis-cli -h 127.0.0.1 -p6379 -a &quot;password&quot; -- bigkeys
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨çš„æ—¶å€™æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æœ€å¥½é€‰æ‹©åœ¨ä»èŠ‚ç‚¹ä¸Šæ‰§è¡Œè¯¥å‘½ä»¤ã€‚å› ä¸ºä¸»èŠ‚ç‚¹ä¸Šæ‰§è¡Œæ—¶ï¼Œä¼šé˜»å¡ä¸»èŠ‚ç‚¹ï¼›</li><li>å¦‚æœæ²¡æœ‰ä»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©åœ¨ Redis å®ä¾‹ä¸šåŠ¡å‹åŠ›çš„ä½å³°é˜¶æ®µè¿›è¡Œæ‰«ææŸ¥è¯¢ï¼Œä»¥å…å½±å“åˆ°å®ä¾‹çš„æ­£å¸¸è¿è¡Œï¼›æˆ–è€…å¯ä»¥ä½¿ç”¨ -i å‚æ•°æ§åˆ¶æ‰«æé—´éš”ï¼Œé¿å…é•¿æ—¶é—´æ‰«æé™ä½ Redis å®ä¾‹çš„æ€§èƒ½ã€‚ è¯¥æ–¹å¼çš„ä¸è¶³ä¹‹å¤„ï¼š</li><li>è¿™ä¸ªæ–¹æ³•åªèƒ½è¿”å›æ¯ç§ç±»å‹ä¸­æœ€å¤§çš„é‚£ä¸ª bigkeyï¼Œæ— æ³•å¾—åˆ°å¤§å°æ’åœ¨å‰ N ä½çš„ bigkeyï¼›</li><li>å¯¹äºé›†åˆç±»å‹æ¥è¯´ï¼Œè¿™ä¸ªæ–¹æ³•åªç»Ÿè®¡é›†åˆå…ƒç´ ä¸ªæ•°çš„å¤šå°‘ï¼Œè€Œä¸æ˜¯å®é™…å ç”¨çš„å†…å­˜é‡ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°å¤šï¼Œå¹¶ä¸ä¸€å®šå ç”¨çš„å†…å­˜å°±å¤šã€‚å› ä¸ºï¼Œæœ‰å¯èƒ½æ¯ä¸ªå…ƒç´ å ç”¨çš„å†…å­˜å¾ˆå°ï¼Œè¿™æ ·çš„è¯ï¼Œå³ä½¿å…ƒç´ ä¸ªæ•°æœ‰å¾ˆå¤šï¼Œæ€»å†…å­˜å¼€é”€ä¹Ÿä¸å¤§ï¼›</li></ul><ol start="2"><li>ä½¿ç”¨ SCAN å‘½ä»¤æŸ¥æ‰¾å¤§ key ä½¿ç”¨ SCAN å‘½ä»¤å¯¹æ•°æ®åº“æ‰«æï¼Œç„¶åç”¨ TYPE å‘½ä»¤è·å–è¿”å›çš„æ¯ä¸€ä¸ª key çš„ç±»å‹ã€‚ å¯¹äº String ç±»å‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ STRLEN å‘½ä»¤è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯å ç”¨çš„å†…å­˜ç©ºé—´å­—èŠ‚æ•°ã€‚ å¯¹äºé›†åˆç±»å‹æ¥è¯´ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è·å¾—å®ƒå ç”¨çš„å†…å­˜å¤§å°ï¼š</li></ol><ul><li>å¦‚æœèƒ½å¤Ÿé¢„å…ˆä»ä¸šåŠ¡å±‚çŸ¥é“é›†åˆå…ƒç´ çš„å¹³å‡å¤§å°ï¼Œé‚£ä¹ˆï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è·å–é›†åˆå…ƒç´ çš„ä¸ªæ•°ï¼Œç„¶åä¹˜ä»¥é›†åˆå…ƒç´ çš„å¹³å‡å¤§å°ï¼Œè¿™æ ·å°±èƒ½è·å¾—é›†åˆå ç”¨çš„å†…å­˜å¤§å°äº†ã€‚List ç±»å‹ï¼šLLEN å‘½ä»¤ï¼›Hash ç±»å‹ï¼šHLEN å‘½ä»¤ï¼›Set ç±»å‹ï¼šSCARD å‘½ä»¤ï¼›Sorted Set ç±»å‹ï¼šZCARD å‘½ä»¤ï¼›</li><li>å¦‚æœä¸èƒ½æå‰çŸ¥é“å†™å…¥é›†åˆçš„å…ƒç´ å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨ MEMORY USAGE å‘½ä»¤ï¼ˆéœ€è¦ Redis 4.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ï¼ŒæŸ¥è¯¢ä¸€ä¸ªé”®å€¼å¯¹å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</li></ul><ol start="3"><li>ä½¿ç”¨ RdbTools å·¥å…·æŸ¥æ‰¾å¤§ key ä½¿ç”¨ RdbTools ç¬¬ä¸‰æ–¹å¼€æºå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥è§£æ Redis å¿«ç…§ï¼ˆRDBï¼‰æ–‡ä»¶ï¼Œæ‰¾åˆ°å…¶ä¸­çš„å¤§ keyã€‚ æ¯”å¦‚ï¼Œä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œå°†å¤§äº 10 kb çš„ key è¾“å‡ºåˆ°ä¸€ä¸ªè¡¨æ ¼æ–‡ä»¶ã€‚</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rdb dump.rdb -c memory --bytes 10240 -f redis.csv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>å¦‚ä½•åˆ é™¤å¤§ key</p></blockquote><p>åˆ é™¤æ“ä½œçš„æœ¬è´¨æ˜¯è¦é‡Šæ”¾é”®å€¼å¯¹å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œä¸è¦å°ç§å†…å­˜çš„é‡Šæ”¾è¿‡ç¨‹ã€‚</p><p>é‡Šæ”¾å†…å­˜åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œä¸ºäº†æ›´åŠ é«˜æ•ˆåœ°ç®¡ç†å†…å­˜ç©ºé—´ï¼Œåœ¨åº”ç”¨ç¨‹åºé‡Šæ”¾å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦æŠŠé‡Šæ”¾æ‰çš„å†…å­˜å—æ’å…¥ä¸€ä¸ªç©ºé—²å†…å­˜å—çš„é“¾è¡¨ï¼Œä»¥ä¾¿åç»­è¿›è¡Œç®¡ç†å’Œå†åˆ†é…ã€‚è¿™ä¸ªè¿‡ç¨‹æœ¬èº«éœ€è¦ä¸€å®šæ—¶é—´ï¼Œè€Œä¸”ä¼šé˜»å¡å½“å‰é‡Šæ”¾å†…å­˜çš„åº”ç”¨ç¨‹åºã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸‹å­é‡Šæ”¾äº†å¤§é‡å†…å­˜ï¼Œç©ºé—²å†…å­˜å—é“¾è¡¨æ“ä½œæ—¶é—´å°±ä¼šå¢åŠ ï¼Œç›¸åº”åœ°å°±ä¼šé€ æˆ Redis ä¸»çº¿ç¨‹çš„é˜»å¡ï¼Œå¦‚æœä¸»çº¿ç¨‹å‘ç”Ÿäº†é˜»å¡ï¼Œå…¶ä»–æ‰€æœ‰è¯·æ±‚å¯èƒ½éƒ½ä¼šè¶…æ—¶ï¼Œè¶…æ—¶è¶Šæ¥è¶Šå¤šï¼Œä¼šé€ æˆ Redis è¿æ¥è€—å°½ï¼Œäº§ç”Ÿå„ç§å¼‚å¸¸ã€‚</p><p>å› æ­¤ï¼Œåˆ é™¤å¤§ key è¿™ä¸€ä¸ªåŠ¨ä½œï¼Œæˆ‘ä»¬è¦å°å¿ƒã€‚å…·ä½“è¦æ€ä¹ˆåšå‘¢ï¼Ÿè¿™é‡Œç»™å‡ºä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>åˆ†æ‰¹æ¬¡åˆ é™¤</li><li>å¼‚æ­¥åˆ é™¤ï¼ˆRedis 4.0ç‰ˆæœ¬ä»¥ä¸Šï¼‰</li></ul><ol><li>åˆ†æ‰¹æ¬¡åˆ é™¤</li></ol><p>å¯¹äºåˆ é™¤å¤§ Hashï¼Œä½¿ç”¨ hscan å‘½ä»¤ï¼Œæ¯æ¬¡è·å– 100 ä¸ªå­—æ®µï¼Œå†ç”¨ hdel å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤ 1 ä¸ªå­—æ®µã€‚</p><p>Pythonä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">del_large_hash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;redis-host1&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>
    large_hash_key <span class="token operator">=</span><span class="token string">&quot;xxx&quot;</span> <span class="token comment">#è¦åˆ é™¤çš„å¤§hashé”®å</span>
    cursor <span class="token operator">=</span> <span class="token string">&#39;0&#39;</span>
    <span class="token keyword">while</span> cursor <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token comment"># ä½¿ç”¨ hscan å‘½ä»¤ï¼Œæ¯æ¬¡è·å– 100 ä¸ªå­—æ®µ</span>
        cursor<span class="token punctuation">,</span> data <span class="token operator">=</span> r<span class="token punctuation">.</span>hscan<span class="token punctuation">(</span>large_hash_key<span class="token punctuation">,</span> cursor<span class="token operator">=</span>cursor<span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> item <span class="token keyword">in</span> data<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># å†ç”¨ hdel å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤1ä¸ªå­—æ®µ</span>
                r<span class="token punctuation">.</span>hdel<span class="token punctuation">(</span>large_hash_key<span class="token punctuation">,</span> item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºåˆ é™¤å¤§ Listï¼Œé€šè¿‡ ltrim å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤å°‘é‡å…ƒç´ ã€‚</p><p>Pythonä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">del_large_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;redis-host1&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>
  large_list_key <span class="token operator">=</span> <span class="token string">&#39;xxx&#39;</span>  <span class="token comment">#è¦åˆ é™¤çš„å¤§listçš„é”®å</span>
  <span class="token keyword">while</span> r<span class="token punctuation">.</span>llen<span class="token punctuation">(</span>large_list_key<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
      <span class="token comment">#æ¯æ¬¡åªåˆ é™¤æœ€å³100ä¸ªå…ƒç´ </span>
      r<span class="token punctuation">.</span>ltrim<span class="token punctuation">(</span>large_list_key<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">101</span><span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºåˆ é™¤å¤§ Setï¼Œä½¿ç”¨ sscan å‘½ä»¤ï¼Œæ¯æ¬¡æ‰«æé›†åˆä¸­ 100 ä¸ªå…ƒç´ ï¼Œå†ç”¨ srem å‘½ä»¤æ¯æ¬¡åˆ é™¤ä¸€ä¸ªé”®ã€‚</p><p>Pythonä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">del_large_set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;redis-host1&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>
  large_set_key <span class="token operator">=</span> <span class="token string">&#39;xxx&#39;</span>   <span class="token comment"># è¦åˆ é™¤çš„å¤§setçš„é”®å</span>
  cursor <span class="token operator">=</span> <span class="token string">&#39;0&#39;</span>
  <span class="token keyword">while</span> cursor <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token comment"># ä½¿ç”¨ sscan å‘½ä»¤ï¼Œæ¯æ¬¡æ‰«æé›†åˆä¸­ 100 ä¸ªå…ƒç´ </span>
    cursor<span class="token punctuation">,</span> data <span class="token operator">=</span> r<span class="token punctuation">.</span>sscan<span class="token punctuation">(</span>large_set_key<span class="token punctuation">,</span> cursor<span class="token operator">=</span>cursor<span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> data<span class="token punctuation">:</span>
      <span class="token comment"># å†ç”¨ srem å‘½ä»¤æ¯æ¬¡åˆ é™¤ä¸€ä¸ªé”®</span>
      r<span class="token punctuation">.</span>srem<span class="token punctuation">(</span>large_size_key<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºåˆ é™¤å¤§ ZSetï¼Œä½¿ç”¨ zremrangebyrank å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤ top 100ä¸ªå…ƒç´ ã€‚</p><p>Pythonä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">del_large_sortedset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;large_sortedset_key&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>
  large_sortedset_key<span class="token operator">=</span><span class="token string">&#39;xxx&#39;</span>
  <span class="token keyword">while</span> r<span class="token punctuation">.</span>zcard<span class="token punctuation">(</span>large_sortedset_key<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token comment"># ä½¿ç”¨ zremrangebyrank å‘½ä»¤ï¼Œæ¯æ¬¡åˆ é™¤ top 100ä¸ªå…ƒç´ </span>
    r<span class="token punctuation">.</span>zremrangebyrank<span class="token punctuation">(</span>large_sortedset_key<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>å¼‚æ­¥åˆ é™¤ ä» Redis 4.0 ç‰ˆæœ¬å¼€å§‹ï¼Œå¯ä»¥é‡‡ç”¨å¼‚æ­¥åˆ é™¤æ³•ï¼Œç”¨ unlink å‘½ä»¤ä»£æ›¿ del æ¥åˆ é™¤ã€‚ è¿™æ · Redis ä¼šå°†è¿™ä¸ª key æ”¾å…¥åˆ°ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹ä¸­è¿›è¡Œåˆ é™¤ï¼Œè¿™æ ·ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ é™¤äº†ä¸»åŠ¨è°ƒç”¨ unlink å‘½ä»¤å®ç°å¼‚æ­¥åˆ é™¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é…ç½®å‚æ•°ï¼Œè¾¾åˆ°æŸäº›æ¡ä»¶çš„æ—¶å€™è‡ªåŠ¨è¿›è¡Œå¼‚æ­¥åˆ é™¤ã€‚ ä¸»è¦æœ‰ 4 ç§åœºæ™¯ï¼Œé»˜è®¤éƒ½æ˜¯å…³é—­çš„ï¼š</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del
noslave-lazy-flush no
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ƒä»¬ä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li>lazyfree-lazy-evictionï¼šè¡¨ç¤ºå½“ Redis è¿è¡Œå†…å­˜è¶…è¿‡ maxmeory æ—¶ï¼Œæ˜¯å¦å¼€å¯ lazy free æœºåˆ¶åˆ é™¤ï¼›</li><li>lazyfree-lazy-expireï¼šè¡¨ç¤ºè®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼ï¼Œå½“è¿‡æœŸä¹‹åæ˜¯å¦å¼€å¯ lazy free æœºåˆ¶åˆ é™¤ï¼›</li><li>lazyfree-lazy-server-delï¼šæœ‰äº›æŒ‡ä»¤åœ¨å¤„ç†å·²å­˜åœ¨çš„é”®æ—¶ï¼Œä¼šå¸¦æœ‰ä¸€ä¸ªéšå¼çš„ del é”®çš„æ“ä½œï¼Œæ¯”å¦‚ rename å‘½ä»¤ï¼Œå½“ç›®æ ‡é”®å·²å­˜åœ¨ï¼ŒRedis ä¼šå…ˆåˆ é™¤ç›®æ ‡é”®ï¼Œå¦‚æœè¿™äº›ç›®æ ‡é”®æ˜¯ä¸€ä¸ª big keyï¼Œå°±ä¼šé€ æˆé˜»å¡åˆ é™¤çš„é—®é¢˜ï¼Œæ­¤é…ç½®è¡¨ç¤ºåœ¨è¿™ç§åœºæ™¯ä¸­æ˜¯å¦å¼€å¯ lazy free æœºåˆ¶åˆ é™¤ï¼›</li><li>slave-lazy-flushï¼šé’ˆå¯¹ slave (ä»èŠ‚ç‚¹) è¿›è¡Œå…¨é‡æ•°æ®åŒæ­¥ï¼Œslave åœ¨åŠ è½½ master çš„ RDB æ–‡ä»¶å‰ï¼Œä¼šè¿è¡Œ flushall æ¥æ¸…ç†è‡ªå·±çš„æ•°æ®ï¼Œå®ƒè¡¨ç¤ºæ­¤æ—¶æ˜¯å¦å¼€å¯ lazy free æœºåˆ¶åˆ é™¤ã€‚</li></ul><p>å»ºè®®å¼€å¯å…¶ä¸­çš„ lazyfree-lazy-evictionã€lazyfree-lazy-expireã€lazyfree-lazy-server-del ç­‰é…ç½®ï¼Œè¿™æ ·å°±å¯ä»¥æœ‰æ•ˆçš„æé«˜ä¸»çº¿ç¨‹çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><blockquote><p>è§£å†³</p></blockquote><ol><li><strong>å¯¹å¤§Keyè¿›è¡Œæ‹†åˆ†</strong>ï¼šå°†ä¸€ä¸ªBig Keyæ‹†åˆ†ä¸ºå¤šä¸ªkey-valueè¿™æ ·çš„å°Keyï¼Œå¹¶ç¡®ä¿æ¯ä¸ªkeyçš„æˆå‘˜æ•°é‡æˆ–è€…å¤§å°åœ¨åˆç†èŒƒå›´å†…ï¼Œç„¶åå†è¿›è¡Œå­˜å‚¨ï¼Œé€šè¿‡getä¸åŒçš„keyæˆ–è€…ä½¿ç”¨mgetæ‰¹é‡è·å–ã€‚</li><li><strong>å¯¹å¤§Keyè¿›è¡Œæ¸…ç†</strong>ï¼šå¯¹Redisä¸­çš„å¤§Keyè¿›è¡Œæ¸…ç†ï¼Œä»Redisä¸­åˆ é™¤æ­¤ç±»æ•°æ®ã€‚Redisè‡ª4.0èµ·æä¾›äº†UNLINKå‘½ä»¤ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿä»¥éé˜»å¡çš„æ–¹å¼ç¼“æ…¢é€æ­¥çš„æ¸…ç†ä¼ å…¥çš„Keyï¼Œé€šè¿‡UNLINKï¼Œä½ å¯ä»¥å®‰å…¨çš„åˆ é™¤å¤§Keyç”šè‡³ç‰¹å¤§Keyã€‚</li><li><strong>ç›‘æ§Redisçš„å†…å­˜ã€ç½‘ç»œå¸¦å®½ã€è¶…æ—¶ç­‰æŒ‡æ ‡</strong>ï¼šé€šè¿‡ç›‘æ§ç³»ç»Ÿå¹¶è®¾ç½®åˆç†çš„Rediså†…å­˜æŠ¥è­¦é˜ˆå€¼æ¥æé†’æˆ‘ä»¬æ­¤æ—¶å¯èƒ½æœ‰å¤§Keyæ­£åœ¨äº§ç”Ÿï¼Œå¦‚ï¼šRediså†…å­˜ä½¿ç”¨ç‡è¶…è¿‡70%ï¼ŒRediså†…å­˜1å°æ—¶å†…å¢é•¿ç‡è¶…è¿‡20%ç­‰ã€‚</li><li><strong>å®šæœŸæ¸…ç†å¤±æ•ˆæ•°æ®</strong>ï¼šå¦‚æœæŸä¸ªKeyæœ‰ä¸šåŠ¡ä¸æ–­ä»¥å¢é‡æ–¹å¼å†™å…¥å¤§é‡çš„æ•°æ®ï¼Œå¹¶ä¸”å¿½ç•¥äº†å…¶æ—¶æ•ˆæ€§ï¼Œè¿™æ ·ä¼šå¯¼è‡´å¤§é‡çš„å¤±æ•ˆæ•°æ®å †ç§¯ã€‚å¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡çš„æ–¹å¼ï¼Œå¯¹å¤±æ•ˆæ•°æ®è¿›è¡Œæ¸…ç†ã€‚</li><li><strong>å‹ç¼©value</strong>ï¼šä½¿ç”¨åºåˆ—åŒ–ã€å‹ç¼©ç®—æ³•å°†keyçš„å¤§å°æ§åˆ¶åœ¨åˆç†èŒƒå›´å†…ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„åºåˆ—åŒ–ã€ååºåˆ—åŒ–éƒ½ä¼šå¸¦æ¥ä¸€å®šçš„æ¶ˆè€—ã€‚å¦‚æœå‹ç¼©åï¼Œvalueè¿˜æ˜¯å¾ˆå¤§ï¼Œé‚£ä¹ˆå¯ä»¥è¿›ä¸€æ­¥å¯¹keyè¿›è¡Œæ‹†åˆ†ã€‚</li></ol>`,49),xn=n("p",null,"å‚è€ƒï¼š",-1),Cn={href:"https://blog.csdn.net/Weixiaohuai/article/details/125391957",target:"_blank",rel:"noopener noreferrer"},Sn={href:"https://min.news/en/news/a1b1f8acadd9af9be99514da7504de1b.html",target:"_blank",rel:"noopener noreferrer"},Ln={href:"https://www.dragonflydb.io/error-solutions/redis-big-key-problem",target:"_blank",rel:"noopener noreferrer"},Mn={href:"https://xiaolincoding.com/redis/base/redis_interview.html#redis-%E7%9A%84%E5%A4%A7-key-%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86",target:"_blank",rel:"noopener noreferrer"},qn=n("h3",{id:"ä»€ä¹ˆæ˜¯çƒ­key-å¦‚ä½•è§£å†³çƒ­keyé—®é¢˜-2023-æ»´æ»´-2023-å°çº¢ä¹¦",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä»€ä¹ˆæ˜¯çƒ­key-å¦‚ä½•è§£å†³çƒ­keyé—®é¢˜-2023-æ»´æ»´-2023-å°çº¢ä¹¦","aria-hidden":"true"},"#"),s(" ä»€ä¹ˆæ˜¯çƒ­keyï¼Ÿå¦‚ä½•è§£å†³çƒ­keyé—®é¢˜ï¼ˆ2023 æ»´æ»´ï¼Œ2023 å°çº¢ä¹¦ï¼‰")],-1),Rn=n("blockquote",null,[n("p",null,"å°çº¢ä¹¦çš„é—®æ³•æ˜¯ï¼šRedisä¸­ï¼Œå¦‚æœå•keyè¿‡çƒ­æ€ä¹ˆå¤„ç†ï¼Ÿ")],-1),An=n("p",null,"çƒ­keyæ˜¯æŒ‡åœ¨Redisä¸­è¢«é¢‘ç¹è®¿é—®çš„keyã€‚å½“å¤§é‡çš„è¯·æ±‚éƒ½é›†ä¸­åœ¨ä¸€å°éƒ¨åˆ†keyä¸Šæ—¶ï¼Œå°±ä¼šå½¢æˆçƒ­keyã€‚è¿™å¯èƒ½å¯¼è‡´RedisæœåŠ¡å™¨è´Ÿè½½ä¸å‡ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´éƒ¨åˆ†ä¸šåŠ¡ç˜«ç—ªã€‚",-1),Pn=n("h4",{id:"å¦‚ä½•å‘ç°çƒ­key",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å¦‚ä½•å‘ç°çƒ­key","aria-hidden":"true"},"#"),s(" å¦‚ä½•å‘ç°çƒ­keyï¼Ÿ")],-1),En=t("<li>å‡­å€Ÿä¸šåŠ¡ç»éªŒï¼Œé¢„ä¼°çƒ­ Key å‡ºç°ï¼šæ ¹æ®ä¸šåŠ¡ç³»ç»Ÿä¸Šçº¿çš„ä¸€äº›æ´»åŠ¨å’ŒåŠŸèƒ½ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥åœ¨æŸäº›åœºæ™¯ä¸‹æå‰é¢„ä¼°çƒ­ <code>Key</code> çš„å‡ºç°çš„ï¼Œæ¯”å¦‚ä¸šåŠ¡éœ€è¦è¿›è¡Œä¸€åœºå•†å“ç§’æ€æ´»åŠ¨ï¼Œç§’æ€å•†å“ä¿¡æ¯å’Œæ•°é‡ä¸€èˆ¬éƒ½ä¼šç¼“å­˜åˆ° <code>Redis</code> ä¸­ï¼Œè¿™ç§åœºæ™¯ææœ‰å¯èƒ½å‡ºç°çƒ­ <code>Key</code> é—®é¢˜çš„ã€‚</li><li>å®¢æˆ·ç«¯è¿›è¡Œæ”¶é›†ï¼šä¸€èˆ¬æˆ‘ä»¬åœ¨è¿æ¥ <code>Redis</code> æœåŠ¡å™¨æ—¶éƒ½è¦ä½¿ç”¨ä¸“é—¨çš„ SDKï¼ˆæ¯”å¦‚ï¼š<code>Java</code> çš„å®¢æˆ·ç«¯å·¥å…· <code>Jedis</code>ã€<code>Redisson</code>ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®¢æˆ·ç«¯å·¥å…·è¿›è¡Œå°è£…ï¼Œåœ¨å‘é€è¯·æ±‚å‰è¿›è¡Œæ”¶é›†é‡‡é›†ï¼ŒåŒæ—¶å®šæ—¶æŠŠæ”¶é›†åˆ°çš„æ•°æ®ä¸ŠæŠ¥åˆ°ç»Ÿä¸€çš„æœåŠ¡è¿›è¡Œèšåˆè®¡ç®—ã€‚</li><li>åœ¨ä»£ç†å±‚è¿›è¡Œæ”¶é›†ï¼šå¦‚æœæ‰€æœ‰çš„ <code>Redis</code> è¯·æ±‚éƒ½ç»è¿‡ <code>Proxy</code>ï¼ˆä»£ç†ï¼‰çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ”¹åŠ¨ <code>Proxy</code> ä»£ç è¿›è¡Œæ”¶é›†ï¼Œæ€è·¯ä¸å®¢æˆ·ç«¯åŸºæœ¬ç±»ä¼¼ã€‚</li>",3),Tn=n("code",null,"Redis",-1),In=n("code",null,"4.0.3",-1),jn={href:"https://github.com/redis/redis/pull/4392",target:"_blank",rel:"noopener noreferrer"},On=n("code",null,"redis-cli --hotkeys",-1),Bn=n("code",null,"keyspace",-1),Nn=n("code",null,"key",-1),Dn=n("code",null,"scan + object freq",-1),Jn=n("code",null,"monitor",-1),Hn=n("code",null,"Redis",-1),zn=n("code",null,"redis-cli monitor",-1),Fn={href:"https://github.com/facebookarchive/redis-faina",target:"_blank",rel:"noopener noreferrer"},Un=n("li",null,[s("Redis èŠ‚ç‚¹æŠ“åŒ…åˆ†æï¼š"),n("code",null,"Redis"),s(" å®¢æˆ·ç«¯ä½¿ç”¨ "),n("code",null,"TCP"),s(" åè®®ä¸æœåŠ¡ç«¯è¿›è¡Œäº¤äº’ï¼Œé€šä¿¡åè®®é‡‡ç”¨çš„æ˜¯ "),n("code",null,"RESP"),s(" åè®®ã€‚è‡ªå·±å†™ç¨‹åºç›‘å¬ç«¯å£ï¼ŒæŒ‰ç…§ "),n("code",null,"RESP"),s(" åè®®è§„åˆ™è§£ææ•°æ®ï¼Œè¿›è¡Œåˆ†æã€‚æˆ–è€…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›æŠ“åŒ…å·¥å…·ï¼Œæ¯”å¦‚ "),n("code",null,"tcpdump"),s(" å·¥å…·ï¼ŒæŠ“å–ä¸€æ®µæ—¶é—´å†…çš„æµé‡è¿›è¡Œè§£æã€‚")],-1),Gn=t('<h4 id="å¦‚ä½•è§£å†³çƒ­key" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è§£å†³çƒ­key" aria-hidden="true">#</a> å¦‚ä½•è§£å†³çƒ­keyï¼Ÿ</h4><p>å¸¸ç”¨æ–¹æ¡ˆï¼š</p><ol><li><p><strong>ã€å¼ºåŠ›æ¨èã€‘åˆ†ç‰‡</strong>ï¼šè¿™æ˜¯ä¸€ç§å¸¸è§çš„è§£å†³æ–¹å¼ï¼Œå°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ª Redis å®ä¾‹ä¸­å»ï¼Œè¿™æ ·å¯ä»¥åˆ†æ•£è®¿é—®å‹åŠ›ï¼Œé¿å…å•ä¸ª Redis å®ä¾‹è¢«è¿‡åº¦è®¿é—®ã€‚ä¹‹æ‰€ä»¥å‡ºç°çƒ­ <code>Key</code>ï¼Œæ˜¯å› ä¸ºæœ‰å¤§é‡çš„å¯¹åŒä¸€ä¸ª <code>Key</code> çš„è¯·æ±‚è½åˆ°åŒä¸€ä¸ª <code>Redis</code> å®ä¾‹ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥æœ‰åŠæ³•å°†è¿™äº›è¯·æ±‚æ‰“æ•£åˆ°ä¸åŒçš„å®ä¾‹ä¸Šï¼Œé˜²æ­¢å‡ºç°æµé‡å€¾æ–œçš„æƒ…å†µï¼Œé‚£ä¹ˆçƒ­ <code>Key</code> é—®é¢˜ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•å°†å¯¹æŸä¸ªçƒ­ <code>Key</code> çš„è¯·æ±‚æ‰“æ•£åˆ°ä¸åŒå®ä¾‹ä¸Šå‘¢ï¼Ÿæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡çƒ­ <code>Key</code> å¤‡ä»½çš„æ–¹å¼ï¼ŒåŸºæœ¬çš„æ€è·¯å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»™çƒ­ <code>Key</code> åŠ ä¸Šå‰ç¼€æˆ–è€…åç¼€ï¼ŒæŠŠä¸€ä¸ªçƒ­ <code>Key</code> çš„æ•°é‡å˜æˆ <code>Redis</code> å®ä¾‹ä¸ªæ•° <code>N</code> çš„å€æ•° <code>M</code>ï¼Œä»è€Œç”±è®¿é—®ä¸€ä¸ª <code>Redis</code> <code>Key</code> å˜æˆè®¿é—® <code>N * M</code> ä¸ª <code>Redis</code> <code>Key</code>ã€‚ <code>N * M</code> ä¸ª <code>Redis</code> <code>Key</code> ç»è¿‡åˆ†ç‰‡åˆ†å¸ƒåˆ°ä¸åŒçš„å®ä¾‹ä¸Šï¼Œå°†è®¿é—®é‡å‡æ‘Šåˆ°æ‰€æœ‰å®ä¾‹ã€‚</p></li><li><p>äºŒçº§ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰ï¼šå½“å‡ºç°çƒ­ <code>Key</code> ä»¥åï¼ŒæŠŠçƒ­ <code>Key</code> åŠ è½½åˆ°ç³»ç»Ÿçš„ <code>JVM</code> ä¸­ã€‚åç»­é’ˆå¯¹è¿™äº›çƒ­ <code>Key</code> çš„è¯·æ±‚ï¼Œä¼šç›´æ¥ä» <code>JVM</code> ä¸­è·å–ï¼Œè€Œä¸ä¼šèµ°åˆ° <code>Redis</code> å±‚ã€‚è¿™äº›æœ¬åœ°ç¼“å­˜çš„å·¥å…·å¾ˆå¤šï¼Œæ¯”å¦‚ <code>Ehcache</code>ï¼Œæˆ–è€… <code>Google Guava</code> ä¸­ <code>Cache</code> å·¥å…·ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ <code>HashMap</code> ä½œä¸ºæœ¬åœ°ç¼“å­˜å·¥å…·éƒ½æ˜¯å¯ä»¥çš„ã€‚</p></li></ol><p>å…¶ä»–è§£å†³æ–¹æ¡ˆï¼š</p>',4),Vn={href:"https://www.memcached.org/",target:"_blank",rel:"noopener noreferrer"},Xn={href:"https://redisson.org/",target:"_blank",rel:"noopener noreferrer"},Wn=t('<figure><img src="https://dz2cdn1.dzone.com/storage/temp/11309552-screen-shot-2019-02-19-at-62001-pm.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="2"><li>ä»£ç†+è¯»å†™åˆ†ç¦»+SLBï¼ˆæœåŠ¡å™¨è´Ÿè½½å‡è¡¡ï¼ˆServer Load Balancingï¼‰ï¼‰ï¼š <ol><li>è´Ÿè½½å‡è¡¡åœ¨SLBå±‚å®ç°</li><li>åœ¨ä»£ç†å±‚å®ç°è¯»å†™åˆ†ç¦»å’Œè‡ªåŠ¨è·¯ç”±</li><li>å†™è¯·æ±‚ç”±ä¸»èŠ‚ç‚¹å¤„ç†</li><li>è¯»è¯·æ±‚ç”±ä»èŠ‚ç‚¹å¤„ç†</li><li>HAï¼ˆHigh Availabilityï¼Œäº’è”ç½‘é»‘è¯ï¼‰åœ¨ä»èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹ä¸Šå®ç°</li></ol></li></ol><figure><img src="https://dz2cdn1.dzone.com/storage/temp/11309553-screen-shot-2019-02-19-at-62011-pm.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',3),Kn=n("p",null,"å‚è€ƒï¼š",-1),Qn={href:"https://dzone.com/articles/redis-hotspot-key-discovery-and-common-solutions",target:"_blank",rel:"noopener noreferrer"},Yn={href:"https://dongzl.github.io/2021/01/14/03-Redis-Hot-Key/index.html",target:"_blank",rel:"noopener noreferrer"},Zn={href:"https://abhivendrasingh.medium.com/understanding-and-solving-hotkey-and-bigkey-and-issues-in-redis-1198f98b17a5",target:"_blank",rel:"noopener noreferrer"},$n={href:"https://developerknow.com/what-is-the-hot-key-problem-in-redis-how-to-solve-the-hot-key-problem/",target:"_blank",rel:"noopener noreferrer"},ns={href:"https://www.programmersought.com/article/54911114988/",target:"_blank",rel:"noopener noreferrer"},ss=n("h3",{id:"è®²ä¸‹redisçš„zset-2023-æ»´æ»´",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#è®²ä¸‹redisçš„zset-2023-æ»´æ»´","aria-hidden":"true"},"#"),s(" è®²ä¸‹Redisçš„ZSetï¼ˆ2023 æ»´æ»´ï¼‰")],-1),as=n("p",null,"Redisçš„ZSetï¼ˆæœ‰åºé›†åˆï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒä¸æ™®é€šçš„é›†åˆç›¸æ¯”ï¼Œåœ¨å­˜å‚¨æ¯ä¸ªå…ƒç´ æ—¶å…³è”äº†ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ã€‚è¿™ä¸ªåˆ†æ•°ç”¨äºå¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ã€‚å½“å¤šä¸ªå­—ç¬¦ä¸²å…·æœ‰ç›¸åŒåˆ†æ•°æ—¶ï¼Œè¿™äº›å­—ç¬¦ä¸²æŒ‰å­—å…¸é¡ºåºæ’åˆ—ã€‚ä¸€äº›æœ‰åºé›†åˆçš„ç”¨é€”åŒ…æ‹¬ï¼š",-1),es=n("ul",null,[n("li",null,"æ’è¡Œæ¦œã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æœ‰åºé›†åˆè½»æ¾åœ°ç»´æŠ¤å¤§å‹åœ¨çº¿æ¸¸æˆä¸­å¾—åˆ†æœ€é«˜çš„æœ‰åºåˆ—è¡¨ã€‚"),n("li",null,"é€Ÿç‡é™åˆ¶å™¨ã€‚ç‰¹åˆ«æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æœ‰åºé›†åˆæ„å»ºæ»‘åŠ¨çª—å£é€Ÿç‡é™åˆ¶å™¨ï¼Œä»¥é˜²æ­¢è¿‡å¤šçš„APIè¯·æ±‚ã€‚")],-1),ts=n("p",null,"ZSetä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªåˆ†æ•°ï¼Œæ ¹æ®åˆ†æ•°çš„å¤§å°å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚ä¸åŒçš„å…ƒç´ å¯ä»¥æœ‰ç›¸åŒçš„åˆ†æ•°ï¼Œä½†æ¯ä¸ªå…ƒç´ åœ¨é›†åˆä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ Rediså†…éƒ¨ä½¿ç”¨äº†è·³è·ƒè¡¨ï¼ˆskip listï¼‰å’Œå‹ç¼©åˆ—è¡¨ï¼ˆziplistï¼‰ä¸¤ç§æ•°æ®ç»“æ„æ¥å®ç°ZSetã€‚è·³è·ƒè¡¨ç”¨äºæä¾›æœ‰åºæ€§ï¼Œè€Œæ•£åˆ—è¡¨ç”¨äºå¿«é€ŸæŸ¥æ‰¾å…ƒç´ ã€‚ Redisçš„ZSetæä¾›äº†é«˜æ•ˆçš„æ“ä½œï¼ŒåŒ…æ‹¬æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚è¿™äº›æ“ä½œçš„æ—¶é—´å¤æ‚åº¦é€šå¸¸ä¸ºO(log N)ï¼Œå…¶ä¸­Næ˜¯ZSetä¸­å…ƒç´ çš„æ•°é‡ã€‚",-1),os=n("p",null,"å‚è€ƒï¼š",-1),ps={href:"https://redis.io/docs/data-types/sorted-sets/",target:"_blank",rel:"noopener noreferrer"},ls={href:"https://www.educba.com/redis-zset/",target:"_blank",rel:"noopener noreferrer"},is={href:"https://redis.io/commands/zadd/",target:"_blank",rel:"noopener noreferrer"},cs=t(`<h3 id="zsetçš„èŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#zsetçš„èŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘-2023-æ»´æ»´" aria-hidden="true">#</a> ZSetçš„èŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>Redisçš„ZSetèŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log N + M)ï¼Œå…¶ä¸­Næ˜¯ZSetä¸­çš„å…ƒç´ æ•°é‡ï¼ŒMæ˜¯èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒèŒƒå›´æŸ¥è¯¢æ˜¯é€šè¿‡æŒ‡å®šæœ€å°å’Œæœ€å¤§åˆ†æ•°å€¼æ¥æ£€ç´¢å…ƒç´ ã€‚Rediså†…éƒ¨ä½¿ç”¨è·³è·ƒè¡¨ï¼ˆskip listï¼‰è¿™ç§æœ‰åºæ•°æ®ç»“æ„æ¥å­˜å‚¨ZSetï¼Œå¹¶ä¸”é€šè¿‡è·³è·ƒè¡¨å¯ä»¥é«˜æ•ˆåœ°è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ã€‚</p><p>åœ¨è¿›è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶ï¼ŒRedisé¦–å…ˆä¼šé€šè¿‡äºŒåˆ†æŸ¥æ‰¾åœ¨è·³è·ƒè¡¨ä¸­æ‰¾åˆ°æœ€å°åˆ†æ•°å¤§äºç­‰äºæŒ‡å®šæœ€å°åˆ†æ•°çš„èŠ‚ç‚¹ï¼Œç„¶åä»è¿™ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼ŒæŒ‰ç…§æŒ‡å®šçš„æœ€å¤§åˆ†æ•°éå†è·³è·ƒè¡¨ï¼Œç›´åˆ°æ‰¾åˆ°æœ€åä¸€ä¸ªåˆ†æ•°å°äºç­‰äºæŒ‡å®šæœ€å¤§åˆ†æ•°çš„èŠ‚ç‚¹ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log N)ã€‚</p><p>ç„¶åï¼ŒRedisä¼šä»æ‰¾åˆ°çš„èŠ‚ç‚¹å¼€å§‹å‘åéå†ï¼Œå¹¶æ”¶é›†åœ¨èŒƒå›´å†…çš„å…ƒç´ ï¼Œç›´åˆ°éå†å®Œæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ æˆ–è¾¾åˆ°èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ä¸Šé™ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(M)ï¼Œå…¶ä¸­Mæ˜¯èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒRedisçš„ZSetèŒƒå›´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log N + M)ï¼Œå…¶ä¸­Næ˜¯ZSetä¸­çš„å…ƒç´ æ•°é‡ï¼ŒMæ˜¯èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ã€‚è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ç§å¹³å‡æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼Œå…·ä½“çš„æ€§èƒ½è¿˜å—åˆ°ç¡¬ä»¶ç¯å¢ƒå’Œå®é™…æ•°æ®åˆ†å¸ƒçš„å½±å“ã€‚</p><h3 id="mysqlä¸­delete-å’Œ-truncate-çš„åŒºåˆ«-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#mysqlä¸­delete-å’Œ-truncate-çš„åŒºåˆ«-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> MySQLä¸­delete å’Œ truncate çš„åŒºåˆ«ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li><strong>å‘½ä»¤ç±»å‹</strong>ï¼šDELETEæ˜¯ä¸€ä¸ªDMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰å‘½ä»¤ï¼Œè€ŒTRUNCATEæ˜¯ä¸€ä¸ªDDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰å‘½ä»¤ã€‚</li><li><strong>åˆ é™¤çš„æ•°æ®èŒƒå›´</strong>ï¼šDELETEå¯ä»¥åˆ é™¤è¡¨ä¸­çš„ä¸€è¡Œæˆ–å¤šè¡Œï¼ŒTRUNCATEåˆ™ä¼šåˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰è¡Œã€‚</li><li><strong>æ˜¯å¦å¯ä»¥æ’¤é”€</strong>ï¼šDELETEå‘½ä»¤æ‰§è¡Œåï¼Œä½ å¯ä»¥ä½¿ç”¨ROLLBACKå‘½ä»¤æ’¤é”€æ›´æ”¹ï¼Œè€ŒTRUNCATEæ‰§è¡Œåæ— æ³•æ’¤é”€ã€‚</li><li><strong>æ—¥å¿—è®°å½•</strong>ï¼šDELETEå‘½ä»¤åœ¨åˆ é™¤è¡Œæ—¶ä¼šè®°å½•è¡Œçš„æ—¥å¿—ï¼Œè€ŒTRUNCATEå‘½ä»¤åœ¨åˆ é™¤æ•°æ®æ—¶ä¸è®°å½•ä»»ä½•æ—¥å¿—ã€‚</li><li><strong>æ€§èƒ½</strong>ï¼šTRUNCATEå‘½ä»¤æ¯”DELETEå‘½ä»¤å¿«ï¼Œå› ä¸ºå®ƒä¸è®°å½•ä»»ä½•æ—¥å¿—ã€‚</li><li><strong>è§¦å‘å™¨è¡Œä¸º</strong>ï¼šå¦‚æœä½ åœ¨è¡¨ä¸Šè®¾ç½®äº†è§¦å‘å™¨ï¼Œé‚£ä¹ˆDELETEå‘½ä»¤ä¼šè§¦å‘å®ƒï¼Œè€ŒTRUNCATEå‘½ä»¤ä¸ä¼šã€‚</li><li><strong>å‚ç…§å®Œæ•´æ€§çº¦æŸ</strong>ï¼šTRUNCATEæ˜¯ä¸èƒ½åœ¨å‚ç…§å®Œæ•´æ€§çº¦æŸå­˜åœ¨çš„æƒ…å†µä¸‹ä½¿ç”¨çš„ï¼Œå³ï¼Œå¦‚æœå­˜åœ¨å¤–é”®çº¦æŸï¼Œä¸èƒ½ä½¿ç”¨TRUNCATEã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯è”åˆç´¢å¼•-ä¸ºä»€ä¹ˆè¦å»ºè”åˆç´¢å¼•-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯è”åˆç´¢å¼•-ä¸ºä»€ä¹ˆè¦å»ºè”åˆç´¢å¼•-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯è”åˆç´¢å¼•ï¼Œä¸ºä»€ä¹ˆè¦å»ºè”åˆç´¢å¼•ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>è”åˆç´¢å¼•æ˜¯æ•°æ®åº“ä¸­ä¸€ç§ç‰¹æ®Šç±»å‹çš„ç´¢å¼•ï¼Œå®ƒåŸºäºä¸¤ä¸ªæˆ–å¤šä¸ªåˆ—çš„å€¼è¿›è¡Œåˆ›å»ºã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ ç»å¸¸åœ¨WHEREå­å¥ä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªåˆ—è¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦ä½¿ç”¨è”åˆç´¢å¼•ã€‚</p><p>è”åˆç´¢å¼•çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå®ƒå¯ä»¥æå¤§åœ°æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚å¦‚æœä½ çš„æŸ¥è¯¢é€šå¸¸ä¼šæ¶‰åŠåˆ°å¤šä¸ªåˆ—ï¼Œé‚£ä¹ˆä½¿ç”¨è”åˆç´¢å¼•å¯èƒ½ä¼šæ¯”ä½¿ç”¨å¤šä¸ªå•åˆ—ç´¢å¼•æ›´é«˜æ•ˆã€‚åŒæ—¶ï¼Œå› ä¸ºç´¢å¼•æœ¬èº«ä¼šå ç”¨å­˜å‚¨ç©ºé—´ï¼Œè”åˆç´¢å¼•æ¯”å¤šä¸ªå•åˆ—ç´¢å¼•éœ€è¦æ›´å°‘çš„å­˜å‚¨ç©ºé—´ã€‚</p><p>ä¾‹å¦‚ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªäººå‘˜è¡¨ï¼Œå®ƒæœ‰ä¸¤ä¸ªå­—æ®µï¼šåå­—ï¼ˆFirstNameï¼‰å’Œå§“æ°ï¼ˆLastNameï¼‰ã€‚ä½ ç»å¸¸è¿è¡Œå¦‚ä¸‹æŸ¥è¯¢æ¥æŸ¥æ‰¾ç‰¹å®šçš„å…¨åï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> People <span class="token keyword">WHERE</span> FirstName <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> LastName <span class="token operator">=</span> <span class="token string">&#39;Doe&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä½ åˆ†åˆ«ä¸º FirstName å’Œ LastName åˆ›å»ºç´¢å¼•ï¼ŒMySQL éœ€è¦é¦–å…ˆåœ¨ FirstName ç´¢å¼•ä¸­æ‰¾åˆ°æ‰€æœ‰åä¸º &#39;John&#39; çš„äººï¼Œç„¶ååœ¨ LastName ç´¢å¼•ä¸­æ‰¾åˆ°æ‰€æœ‰å§“ä¸º &#39;Doe&#39; çš„äººï¼Œæœ€åå¯¹è¿™ä¸¤ä¸ªç»“æœé›†è¿›è¡Œäº¤é›†æ“ä½œã€‚è¿™å¯èƒ½éœ€è¦å¤§é‡çš„æ—¶é—´å’Œè®¡ç®—èµ„æºï¼Œç‰¹åˆ«æ˜¯åœ¨è¡¨éå¸¸å¤§çš„æ—¶å€™ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸ºè¿™ä¸¤åˆ—åˆ›å»ºä¸€ä¸ªè”åˆç´¢å¼•ï¼Œé‚£ä¹ˆ MySQL å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªç´¢å¼•æ¥æ‰¾åˆ°æ‰€æœ‰åä¸º &#39;John&#39; å¹¶ä¸”å§“ä¸º &#39;Doe&#39; çš„äººï¼Œæ— éœ€é¢å¤–çš„äº¤é›†æ“ä½œã€‚è¿™æ ·æŸ¥è¯¢çš„æ•ˆç‡å°±ä¼šå¤§å¤§æé«˜ã€‚</p><p>åˆ›å»ºè”åˆç´¢å¼•çš„SQLå‘½ä»¤å¯èƒ½å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_firstname_lastname <span class="token keyword">ON</span> People <span class="token punctuation">(</span>FirstName<span class="token punctuation">,</span> LastName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ çš„æŸ¥è¯¢å¯ä»¥ç›´æ¥åˆ©ç”¨è¿™ä¸ªè”åˆç´¢å¼•ï¼Œå¤§å¤§æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p><h3 id="redis-æ‰¹å¤„ç†-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#redis-æ‰¹å¤„ç†-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> redis æ‰¹å¤„ç†ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>Redis æ‰¹å¤„ç†é€šå¸¸æŒ‡çš„æ˜¯é€šè¿‡ä½¿ç”¨ Redis çš„ç®¡é“ (pipeline) åŠŸèƒ½æ¥ä¸€æ¬¡æ€§æ‰§è¡Œå¤šä¸ªå‘½ä»¤ã€‚è¿™æ ·åšå¯ä»¥æé«˜æ•ˆç‡ï¼Œå› ä¸ºå®ƒå‡å°‘äº†å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å¼€é”€ã€‚åœ¨ Redis çš„ç®¡é“ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šä¸€æ¬¡æ€§å‘é€å¤šä¸ªå‘½ä»¤ï¼Œç„¶å Redis æœåŠ¡å™¨ä¾æ¬¡æ‰§è¡Œè¿™äº›å‘½ä»¤å¹¶è¿”å›ç»“æœã€‚</p><p>ä½¿ç”¨ Redis æ‰¹å¤„ç†æ—¶ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>æ‰¹å¤„ç†å¹¶ä¸ä¿è¯åŸå­æ€§ï¼Œè¿™æ„å‘³ç€å¦‚æœç®¡é“ä¸­çš„æŸä¸ªå‘½ä»¤å¤±è´¥ï¼Œå…¶ä»–å‘½ä»¤ä»å¯èƒ½æ‰§è¡ŒæˆåŠŸã€‚å¦‚æœä½ éœ€è¦åŸå­æ€§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Redis çš„äº‹åŠ¡åŠŸèƒ½ã€‚</li><li>ç”±äºç®¡é“ä¸­çš„å‘½ä»¤æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œå› æ­¤å‘½ä»¤ä¹‹é—´å¯èƒ½å­˜åœ¨ä¾èµ–å…³ç³»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡åœ¨æ·»åŠ å‘½ä»¤æ—¶æ£€æŸ¥å‰ä¸€ä¸ªå‘½ä»¤çš„ç»“æœæ¥å¤„ç†è¿™äº›ä¾èµ–å…³ç³»ã€‚</li><li>åœ¨æ·»åŠ å¤§é‡å‘½ä»¤åˆ°ç®¡é“æ—¶ï¼Œè¦æ³¨æ„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œå¯ä»¥åˆ†æ‰¹æ‰§è¡Œç®¡é“ï¼Œä»¥é¿å…ä¸€æ¬¡æ€§æ‰§è¡Œè¿‡å¤šçš„å‘½ä»¤ã€‚</li></ol><p>åœ¨ Java ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Jedis åº“æ¥è¿›è¡Œ Redis æ‰¹å¤„ç†æ“ä½œã€‚Jedis æ˜¯ä¸€ä¸ªç”¨äºæ“ä½œ Redis çš„ Java å®¢æˆ·ç«¯åº“ã€‚è¯·å…ˆç¡®ä¿å·²å°† Jedis æ·»åŠ åˆ°é¡¹ç›®çš„ä¾èµ–ä¸­ã€‚å¦‚æœä½¿ç”¨ Mavenï¼Œå¯ä»¥åœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.7.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¤ºä¾‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Jedis</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Pipeline</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Response</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisBatchExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿æ¥åˆ° Redis æœåŠ¡å™¨</span>
        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºä¸€ä¸ªç®¡é“</span>
        <span class="token class-name">Pipeline</span> pipeline <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">pipelined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å‘ç®¡é“ä¸­æ·»åŠ å‘½ä»¤</span>
        pipeline<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;key1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pipeline<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pipeline<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;key3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// æ‰§è¡Œç®¡é“ä¸­çš„å‘½ä»¤</span>
        pipeline<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è·å–æ‰§è¡Œç»“æœ</span>
        <span class="token class-name">String</span> value1 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;key1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> value2 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> value3 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;key3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è¾“å‡ºç»“æœ</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key1: &quot;</span> <span class="token operator">+</span> value1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key2: &quot;</span> <span class="token operator">+</span> value2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;key3: &quot;</span> <span class="token operator">+</span> value3<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å…³é—­è¿æ¥</span>
        jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sql-explain-ä¼šè¾“å‡ºå“ªäº›ä¿¡æ¯-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#sql-explain-ä¼šè¾“å‡ºå“ªäº›ä¿¡æ¯-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> SQL explain ä¼šè¾“å‡ºå“ªäº›ä¿¡æ¯ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ul><li>IDï¼šè¡¨ç¤ºæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ä¸­æ¯ä¸ªæ“ä½œçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li><li>Select Typeï¼šè¡¨ç¤ºæŸ¥è¯¢ä¸­çš„å­æŸ¥è¯¢æˆ–è€…è¡¨çš„ç±»å‹ï¼Œå¦‚ SIMPLEï¼ˆæ— å­æŸ¥è¯¢æˆ–è€… UNIONï¼‰ã€PRIMARYï¼ˆæœ€å¤–å±‚æŸ¥è¯¢ï¼‰ã€SUBQUERYã€DERIVED ç­‰ã€‚</li><li>Tableï¼šè¡¨ç¤ºæ­£åœ¨è®¿é—®çš„è¡¨çš„åç§°ã€‚</li><li>Typeï¼šè¡¨ç¤ºè¿æ¥ç±»å‹ï¼Œå¦‚ ALLï¼ˆå…¨è¡¨æ‰«æï¼‰ã€indexï¼ˆå…¨ç´¢å¼•æ‰«æï¼‰ã€rangeï¼ˆèŒƒå›´æ‰«æï¼‰ã€refï¼ˆä½¿ç”¨éå”¯ä¸€ç´¢å¼•é”®æˆ–è€…å”¯ä¸€ç´¢å¼•é”®çš„ä¸€éƒ¨åˆ†è¿›è¡ŒæŸ¥æ‰¾ç­‰ï¼‰ã€‚</li><li>Possible Keysï¼šè¡¨ç¤ºæŸ¥è¯¢å¯èƒ½ä½¿ç”¨çš„ç´¢å¼•ã€‚</li><li>Keyï¼šè¡¨ç¤ºå®é™…ä½¿ç”¨çš„ç´¢å¼•ã€‚</li><li>Key Lengthï¼šè¡¨ç¤ºä½¿ç”¨çš„ç´¢å¼•çš„é•¿åº¦ã€‚</li><li>Refï¼šè¡¨ç¤ºå“ªäº›åˆ—æˆ–è€…å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼ã€‚</li><li>Rowsï¼šä¼°è®¡è¦æ£€æŸ¥çš„è¡Œæ•°ã€‚</li><li>Filteredï¼šè¡¨ç¤ºè¿”å›çš„è¡Œæ•°å æ‰«æè¡Œæ•°çš„ç™¾åˆ†æ¯”ï¼ˆåŸºäºæ¡ä»¶è¿‡æ»¤ï¼‰ã€‚</li><li>Extraï¼šåŒ…å«æœ‰å…³æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’çš„å…¶ä»–ä¿¡æ¯ï¼Œå¦‚ Using filesortã€Using temporaryã€Using index ç­‰ã€‚</li></ul>`,28),rs=n("p",null,"å‚è€ƒï¼š",-1),us={href:"https://dev.mysql.com/doc/refman/8.0/en/explain-output.html",target:"_blank",rel:"noopener noreferrer"},ds={href:"https://stackoverflow.com/questions/44629837/understanding-output-of-explain-mysql-command",target:"_blank",rel:"noopener noreferrer"},ks=t(`<h3 id="sql-æ€ä¹ˆæ‰‹åŠ¨åŠ é”-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#sql-æ€ä¹ˆæ‰‹åŠ¨åŠ é”-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> sql æ€ä¹ˆæ‰‹åŠ¨åŠ é”ï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>åœ¨ SQL ä¸­æ‰‹åŠ¨åŠ é”é€šå¸¸æ˜¯é€šè¿‡ä½¿ç”¨æ˜¾å¼é”å®šè¯­å¥æ¥å®ç°çš„ã€‚åœ¨ MySQL ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ LOCK TABLES å’Œ UNLOCK TABLES è¯­å¥æ¥æ‰‹åŠ¨åŠ é”å’Œè§£é”ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><ol><li>è¯»é”ï¼ˆRead Lockï¼‰ï¼šç»™ä¸€ä¸ªè¡¨åŠ è¯»é”ï¼Œå¯ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥è¡¨è¿›è¡Œå†™æ“ä½œï¼Œä½†å…è®¸å…¶ä»–äº‹åŠ¡è¿›è¡Œè¯»æ“ä½œã€‚è¦ç»™ä¸€ä¸ªè¡¨åŠ è¯»é”ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­å¥ï¼š</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span> table_name <span class="token keyword">READ</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œ<code>table_name</code> æ˜¯ä½ è¦åŠ é”çš„è¡¨çš„åç§°ã€‚</p><ol start="2"><li>å†™é”ï¼ˆWrite Lockï¼‰ï¼šç»™ä¸€ä¸ªè¡¨åŠ å†™é”ï¼Œå¯ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥è¡¨è¿›è¡Œè¯»ã€å†™æ“ä½œã€‚è¦ç»™ä¸€ä¸ªè¡¨åŠ å†™é”ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­å¥ï¼š</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span> table_name <span class="token keyword">WRITE</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ä½¿ç”¨ LOCK TABLES å¯¹è¡¨è¿›è¡Œæ˜¾å¼é”å®šåï¼Œä½ éœ€è¦ä½¿ç”¨ UNLOCK TABLES è¯­å¥æ¥é‡Šæ”¾é”ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">UNLOCK</span> <span class="token keyword">TABLES</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¯·æ³¨æ„ï¼Œè¿™ç§æ‰‹åŠ¨åŠ é”æ–¹å¼ä¸»è¦é€‚ç”¨äº MyISAM å­˜å‚¨å¼•æ“ï¼Œå› ä¸º MyISAM ä¸æ”¯æŒäº‹åŠ¡ã€‚å¯¹äºæ”¯æŒäº‹åŠ¡çš„å­˜å‚¨å¼•æ“ï¼ˆå¦‚ InnoDBï¼‰ï¼Œä½ é€šå¸¸åº”è¯¥ä½¿ç”¨äº‹åŠ¡æ¥å®ç°å¹¶å‘æ§åˆ¶å’Œé”å®šã€‚</p><p>åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ SELECT ... FOR UPDATE æˆ– SELECT ... LOCK IN SHARE MODE è¯­å¥æ¥é”å®šè¡Œã€‚ä¾‹å¦‚ï¼š</p><ol><li>è¡Œé” - FOR UPDATEï¼šç»™ä¸€ä¸ªæˆ–å¤šä¸ªè¡ŒåŠ æ’ä»–é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¿™äº›è¡Œè¿›è¡Œè¯»ã€å†™æ“ä½œã€‚</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> condition <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span>
<span class="token comment">-- è¿›è¡Œå…¶ä»–æ“ä½œ</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>è¡Œé” - LOCK IN SHARE MODEï¼šç»™ä¸€ä¸ªæˆ–å¤šä¸ªè¡ŒåŠ å…±äº«é”ï¼Œå…è®¸å…¶ä»–äº‹åŠ¡å¯¹è¿™äº›è¡Œè¿›è¡Œè¯»æ“ä½œï¼Œä½†é˜»æ­¢å…¶ä»–äº‹åŠ¡è¿›è¡Œå†™æ“ä½œã€‚</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> condition <span class="token keyword">LOCK</span> <span class="token operator">IN</span> <span class="token keyword">SHARE</span> <span class="token keyword">MODE</span><span class="token punctuation">;</span>
<span class="token comment">-- è¿›è¡Œå…¶ä»–æ“ä½œ</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä½¿ç”¨è¡Œé”æ—¶ï¼Œè¯·ç¡®ä¿ä½ çš„æ“ä½œåœ¨äº‹åŠ¡ä¸­è¿›è¡Œï¼Œå¹¶åœ¨å®Œæˆæ“ä½œåæäº¤äº‹åŠ¡ã€‚è¿™å°†é‡Šæ”¾é”å¹¶ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚</p><h3 id="ä»‹ç»ä¸€äº›-mysql-åº•å±‚ç»“æ„-2023-èš‚èšé‡‘æœ" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»ä¸€äº›-mysql-åº•å±‚ç»“æ„-2023-èš‚èšé‡‘æœ" aria-hidden="true">#</a> ä»‹ç»ä¸€äº› mysql åº•å±‚ç»“æ„ï¼Ÿï¼ˆ2023 èš‚èšé‡‘æœï¼‰</h3><ol><li><strong>å­˜å‚¨å¼•æ“ï¼ˆStorage Enginesï¼‰</strong>ï¼šMySQL æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œæ¯ç§å¼•æ“éƒ½æœ‰å…¶ç‰¹å®šçš„ç‰¹æ€§å’Œç”¨é€”ã€‚ä¾‹å¦‚ï¼ŒInnoDB æ˜¯æ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é”å®šçš„å­˜å‚¨å¼•æ“ï¼Œè€Œ MyISAM åˆ™æ˜¯ä¸€ä¸ªç®€å•ã€é«˜æ€§èƒ½çš„å¼•æ“ï¼Œé€‚ç”¨äºåªè¯»æˆ–è¯»å†™æ¯”è¾ƒä½çš„åœºæ™¯ã€‚é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“å¯¹äºæ•°æ®åº“æ€§èƒ½å’Œå¯é æ€§è‡³å…³é‡è¦ã€‚</li><li><strong>æœåŠ¡å™¨å±‚ï¼ˆServer Layerï¼‰</strong>ï¼šæœåŠ¡å™¨å±‚è´Ÿè´£å¤„ç†å®¢æˆ·ç«¯è¿æ¥ã€æŸ¥è¯¢ç¼“å­˜ã€æŸ¥è¯¢åˆ†æã€æŸ¥è¯¢ä¼˜åŒ–å’Œæ‰§è¡Œç­‰ä»»åŠ¡ã€‚å®ƒæä¾›äº†è®¸å¤šåŠŸèƒ½ï¼Œå¦‚å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ï¼Œä»¥å¸®åŠ©ç”¨æˆ·æ›´é«˜æ•ˆåœ°ç®¡ç†å’Œä½¿ç”¨æ•°æ®åº“ã€‚</li><li><strong>ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰</strong>ï¼šç¼“å†²æ± æ˜¯ InnoDB å­˜å‚¨å¼•æ“ç”¨äºç¼“å­˜æ•°æ®å’Œç´¢å¼•çš„å†…å­˜åŒºåŸŸã€‚ç¼“å†²æ± çš„å¤§å°å’Œç®¡ç†å¯¹äºæ•°æ®åº“æ€§èƒ½è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥å‡å°‘ç£ç›˜ I/Oï¼Œä»è€Œæé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚</li><li><strong>æ—¥å¿—ï¼ˆLogsï¼‰</strong>ï¼šMySQL ä½¿ç”¨å¤šç§æ—¥å¿—æ¥è®°å½•æ•°æ®åº“æ´»åŠ¨å’Œè¾…åŠ©æ¢å¤ã€‚ä¾‹å¦‚ï¼ŒäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinary Logï¼‰è®°å½•äº†æ•°æ®åº“æ›´æ”¹çš„å†å²ï¼Œå¯ä»¥ç”¨äºæ•°æ®å¤åˆ¶å’Œæ¢å¤ã€‚è€Œ InnoDB çš„é‡åšæ—¥å¿—ï¼ˆRedo Logï¼‰åˆ™è®°å½•äº†å¯¹æ•°æ®çš„ä¿®æ”¹æ“ä½œï¼Œç”¨äºç¡®ä¿äº‹åŠ¡çš„æŒä¹…æ€§å’Œæ•°æ®åº“åœ¨å´©æºƒåçš„æ¢å¤ã€‚</li><li><strong>ç´¢å¼•ï¼ˆIndexesï¼‰</strong>ï¼šç´¢å¼•æ˜¯æ•°æ®åº“ä¸­ç”¨äºåŠ é€ŸæŸ¥è¯¢çš„æ•°æ®ç»“æ„ã€‚MySQL æ”¯æŒå¤šç§ç´¢å¼•ç±»å‹ï¼Œå¦‚ B-Treeã€å“ˆå¸Œç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ç­‰ã€‚åˆç†åœ°ä½¿ç”¨ç´¢å¼•å¯ä»¥å¤§å¹…æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œä½†è¿‡å¤šçš„ç´¢å¼•å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ“ä½œå˜æ…¢ã€‚</li><li><strong>é”å®šï¼ˆLockingï¼‰</strong>ï¼šä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§å’Œå¹¶å‘æ§åˆ¶ï¼ŒMySQL ä½¿ç”¨å„ç§é”å®šæœºåˆ¶ï¼Œå¦‚è¡¨é”ã€è¡Œé”ã€å…ƒæ•°æ®é”ç­‰ã€‚é”å®šç­–ç•¥çš„é€‰æ‹©å’Œå®ç°å¯¹äºæ•°æ®åº“æ€§èƒ½å’Œå¹¶å‘å¤„ç†èƒ½åŠ›è‡³å…³é‡è¦ã€‚</li><li><strong>äº‹åŠ¡ï¼ˆTransactionsï¼‰</strong>ï¼šäº‹åŠ¡æ˜¯ä¸€ç»„åŸå­æ€§çš„æ•°æ®åº“æ“ä½œï¼Œå®ƒä»¬è¦ä¹ˆå…¨éƒ¨æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œã€‚äº‹åŠ¡å¯ä»¥å¸®åŠ©ç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œå¹¶å‘æ§åˆ¶ã€‚InnoDB å­˜å‚¨å¼•æ“æä¾›äº†å¯¹äº‹åŠ¡çš„æ”¯æŒï¼ŒåŒ…æ‹¬æäº¤ã€å›æ»šã€éš”ç¦»çº§åˆ«ç­‰åŠŸèƒ½ã€‚</li></ol>`,18),ms=n("p",null,"å‚è€ƒï¼š",-1),vs={href:"https://dev.mysql.com/doc/refman/8.0/en/system-schema.html",target:"_blank",rel:"noopener noreferrer"},hs=t('<h3 id="rdb-forkå­è¿›ç¨‹å»å†™æ—¥å¿—çš„æ—¶å€™-å¦‚æœå®•æœºäº†æ˜¯ä¸æ˜¯æœ‰æ•°æ®å°±ä¸¢å¤±äº†-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#rdb-forkå­è¿›ç¨‹å»å†™æ—¥å¿—çš„æ—¶å€™-å¦‚æœå®•æœºäº†æ˜¯ä¸æ˜¯æœ‰æ•°æ®å°±ä¸¢å¤±äº†-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> RDB forkå­è¿›ç¨‹å»å†™æ—¥å¿—çš„æ—¶å€™ï¼Œå¦‚æœå®•æœºäº†æ˜¯ä¸æ˜¯æœ‰æ•°æ®å°±ä¸¢å¤±äº†ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>æ˜¯çš„ï¼Œå½“Redisä½¿ç”¨RDBæŒä¹…åŒ–ç­–ç•¥æ—¶ï¼Œå¦‚æœRedisæœåŠ¡åœ¨RDBè¿›ç¨‹forkå‡ºå­è¿›ç¨‹å†™RDBæ–‡ä»¶çš„æ—¶å€™å®•æœºï¼Œé‚£ä¹ˆæ­¤æ—¶è¿˜æ²¡æœ‰å†™åˆ°RDBæ–‡ä»¶çš„æ•°æ®å°†ä¼šä¸¢å¤±ã€‚</p><p>Redis RDBçš„å·¥ä½œåŸç†æ˜¯ï¼š</p><ol><li>Redisä¸»è¿›ç¨‹forkå‡ºä¸€ä¸ªå­è¿›ç¨‹</li><li>å­è¿›ç¨‹è´Ÿè´£å°†æ•°æ®åº“å¿«ç…§å†™å…¥åˆ°ç¡¬ç›˜ä¸Šçš„RDBæ–‡ä»¶ä¸­</li><li>å¦‚æœåœ¨æ­¤æœŸé—´Redisä¸»è¿›ç¨‹è¢«killï¼Œé‚£ä¹ˆæ­£åœ¨è¢«å­è¿›ç¨‹å†™å…¥RDBæ–‡ä»¶çš„é‚£éƒ¨åˆ†æ•°æ®å°†ä¸¢å¤±</li><li>RDBæ–‡ä»¶å†™å…¥å®Œæˆåï¼Œå­è¿›ç¨‹é€€å‡ºï¼ŒRedisä¸»è¿›ç¨‹ç»§ç»­æœåŠ¡å®¢æˆ·ç«¯è¯·æ±‚</li></ol><p>æ‰€ä»¥ï¼ŒRDBæŒä¹…åŒ–æœ€å¤§çš„é—®é¢˜å°±æ˜¯å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œè™½ç„¶æ¦‚ç‡å¾ˆå°ï¼Œä½†æ•°æ®ä¾ç„¶å­˜åœ¨ä¸€å®šé£é™©ã€‚</p><h3 id="mysqlä¸­-ä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#mysqlä¸­-ä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> mysqlä¸­ï¼Œä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>åœ¨MySQLä¸­ï¼Œ**ä¸»é”®ç´¢å¼•ï¼ˆPrimary Keyï¼‰<strong>å’Œ</strong>å”¯ä¸€ç´¢å¼•ï¼ˆUnique Keyï¼‰**éƒ½æ˜¯ä¸¤ç§éå¸¸é‡è¦çš„ç´¢å¼•ç±»å‹ï¼Œå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ç†è§£ï¼š</p><ol><li><strong>å”¯ä¸€æ€§</strong>ï¼šä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•éƒ½ä¿è¯äº†ç´¢å¼•åˆ—çš„å”¯ä¸€æ€§ã€‚æ¢å¥è¯è¯´ï¼Œä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•éƒ½è¦æ±‚ç´¢å¼•åˆ—çš„å€¼å”¯ä¸€ï¼Œä¸èƒ½æœ‰é‡å¤çš„å€¼ã€‚</li><li><strong>éç©ºæ€§</strong>ï¼šä¸»é”®ç´¢å¼•è¦æ±‚ç´¢å¼•åˆ—çš„å€¼å¿…é¡»æ˜¯éç©ºçš„ï¼Œè€Œå”¯ä¸€ç´¢å¼•åˆ™å…è®¸ç´¢å¼•åˆ—çš„å€¼ä¸ºNULLã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ åœ¨ä¸€åˆ—ä¸Šå®šä¹‰äº†ä¸»é”®ç´¢å¼•ï¼Œé‚£ä¹ˆä½ ä¸èƒ½åœ¨è¿™åˆ—ä¸Šæ’å…¥NULLå€¼ï¼›è€Œå¦‚æœä½ åœ¨ä¸€åˆ—ä¸Šå®šä¹‰äº†å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨è¿™åˆ—ä¸Šæ’å…¥NULLå€¼ã€‚</li><li><strong>æ•°é‡</strong>ï¼šåœ¨ä¸€ä¸ªè¡¨ä¸­ï¼Œä¸»é”®ç´¢å¼•åªèƒ½æœ‰ä¸€ä¸ªï¼Œè€Œå”¯ä¸€ç´¢å¼•å¯ä»¥æœ‰å¤šä¸ªã€‚</li><li><strong>è‡ªåŠ¨å¢é•¿</strong>ï¼šä¸»é”®å¯ä»¥è‡ªåŠ¨å¢é•¿ï¼Œä½†æ˜¯å”¯ä¸€ç´¢å¼•ä¸èƒ½ã€‚</li><li><strong>é›†ç¾¤ç´¢å¼•</strong>ï¼šåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸»é”®ç´¢å¼•æ˜¯é›†ç¾¤ç´¢å¼•ï¼ˆClustered Indexï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®è®°å½•æ˜¯æŒ‰ç…§ä¸»é”®çš„é¡ºåºæ¥å­˜å‚¨çš„ã€‚å¦‚æœä¸€ä¸ªè¡¨æ²¡æœ‰æ˜ç¡®å®šä¹‰ä¸»é”®ï¼ŒInnoDBä¼šé€‰æ‹©ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ä½œä¸ºä¸»é”®ï¼Œå¦‚æœæ²¡æœ‰å”¯ä¸€ç´¢å¼•ï¼ŒInnoDBä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª6å­—èŠ‚çš„ROWIDä½œä¸ºä¸»é”®ã€‚</li></ol><p>è¿™äº›åŒºåˆ«è®©ä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•åœ¨æ•°æ®åº“è®¾è®¡å’Œä¼˜åŒ–ä¸­å‘æŒ¥ä¸åŒçš„ä½œç”¨ã€‚</p><h3 id="ä¸€ä¸ªè”åˆç´¢å¼•-a-b-c-æŸ¥è¯¢-a-c-èƒ½ç”¨åˆ°ç´¢å¼•å—-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªè”åˆç´¢å¼•-a-b-c-æŸ¥è¯¢-a-c-èƒ½ç”¨åˆ°ç´¢å¼•å—-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> ä¸€ä¸ªè”åˆç´¢å¼•ï¼ˆa, b, cï¼‰ï¼ŒæŸ¥è¯¢ï¼ˆa, cï¼‰ï¼Œèƒ½ç”¨åˆ°ç´¢å¼•å—ï¼Ÿï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>åœ¨MySQLä¸­ï¼Œä½¿ç”¨è”åˆç´¢å¼•ï¼ˆæ¯”å¦‚ç´¢å¼•(a, b, c)ï¼‰æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æŒ‰ç…§ç´¢å¼•çš„é¡ºåºä½¿ç”¨åˆ—ã€‚è¿™æ˜¯ç”±MySQLçš„ç´¢å¼•ç­–ç•¥å†³å®šçš„ï¼Œç§°ä¸ºæœ€å·¦å‰ç¼€åŸåˆ™æˆ–æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ã€‚</p><p>å¯¹äºæŸ¥è¯¢(a, c)ï¼Œåªæœ‰åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«â€œaâ€å­—æ®µï¼Œå¹¶ä¸”&quot;b&quot;å­—æ®µä¹Ÿåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­æ—¶ï¼Œ&quot;c&quot;æ‰èƒ½ç”¨åˆ°ç´¢å¼•ã€‚è¿™æ˜¯å› ä¸ºåœ¨è”åˆç´¢å¼•(a, b, c)ä¸­ï¼Œâ€œc&quot;æ˜¯ç¬¬ä¸‰ä¸ªå­—æ®µï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­ä¸åŒ…å«&quot;bâ€ï¼Œé‚£ä¹ˆç´¢å¼•åœ¨&quot;b&quot;ä¹‹åçš„éƒ¨åˆ†éƒ½ä¸èƒ½ä½¿ç”¨ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä½ çš„æŸ¥è¯¢æ¡ä»¶æ˜¯(a, c)ï¼Œé‚£ä¹ˆMySQLåªèƒ½ä½¿ç”¨åˆ°&quot;a&quot;çš„éƒ¨åˆ†ç´¢å¼•ï¼Œä¸èƒ½åˆ©ç”¨åˆ°&quot;c&quot;çš„éƒ¨åˆ†ç´¢å¼•ï¼Œå³ä¾¿&quot;c&quot;åœ¨ç´¢å¼•ä¸­ã€‚</p><p>ä¸ºäº†ä½¿æŸ¥è¯¢æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ç´¢å¼•ï¼Œä½ å¯ä»¥è€ƒè™‘è°ƒæ•´ç´¢å¼•æˆ–æŸ¥è¯¢çš„è®¾è®¡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è”åˆç´¢å¼•(a, c)ï¼Œæˆ–è€…åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«&quot;b&quot;å­—æ®µã€‚</p><h3 id="äº‹åŠ¡åŸå­æ€§æ˜¯æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡åŸå­æ€§æ˜¯æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" aria-hidden="true">#</a> äº‹åŠ¡åŸå­æ€§æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>MySQLçš„äº‹åŠ¡åŸå­æ€§ä¸»è¦é€šè¿‡Undo Logï¼ˆæ’¤é”€æ—¥å¿—ï¼‰æ¥å®ç°çš„ã€‚</p><p>å½“è¿›è¡Œä¸€æ¬¡äº‹åŠ¡æ“ä½œæ—¶ï¼ŒMySQLä¼šé¦–å…ˆåœ¨Undo Logä¸­è®°å½•ä¸‹äº‹åŠ¡æ“ä½œå‰çš„æ•°æ®çŠ¶æ€ã€‚å¦‚æœäº‹åŠ¡æˆåŠŸæ‰§è¡Œå¹¶æäº¤ï¼ŒUndo Logä¸­çš„è®°å½•å°±å¯ä»¥è¢«åˆ é™¤ã€‚ä½†å¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œæˆ–è€…ç”¨æˆ·æ‰§è¡Œäº†ROLLBACKæ“ä½œï¼ŒMySQLå°±ä¼šåˆ©ç”¨Undo Logä¸­çš„ä¿¡æ¯å°†æ•°æ®æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œä»è€Œå®ç°äº‹åŠ¡çš„åŸå­æ€§ã€‚</p><p>è¿™å°±æ„å‘³ç€ï¼Œäº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå¦‚æœéƒ¨åˆ†æ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ä¹Ÿä¼šè¢«æ’¤é”€ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><h3 id="äº‹åŠ¡çš„éš”ç¦»æ€§æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡çš„éš”ç¦»æ€§æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" aria-hidden="true">#</a> äº‹åŠ¡çš„éš”ç¦»æ€§æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>MySQLçš„äº‹åŠ¡éš”ç¦»æ€§ä¸»è¦é€šè¿‡é”æœºåˆ¶å’Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰æ¥å®ç°ã€‚</p><ol><li>é”æœºåˆ¶ï¼šåŒ…æ‹¬è¡Œé”å’Œè¡¨é”ã€‚è¡Œé”å¯ä»¥ç²¾ç¡®åˆ°æ•°æ®åº“è¡¨ä¸­çš„æŸä¸€è¡Œï¼Œè€Œè¡¨é”åˆ™ä¼šé”å®šæ•´ä¸ªæ•°æ®è¡¨ã€‚å½“ä¸€ä¸ªäº‹åŠ¡åœ¨æ“ä½œæŸä¸ªæ•°æ®é¡¹æ—¶ï¼Œä¼šå¯¹å…¶åŠ é”ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å¯¹åŒä¸€æ•°æ®é¡¹çš„å¹¶å‘æ“ä½œï¼Œä»è€Œå®ç°éš”ç¦»æ€§ã€‚</li><li>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰ï¼šè¿™æ˜¯InnoDBå­˜å‚¨å¼•æ“ç‰¹æœ‰çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå¯ä»¥åœ¨ä¸åŠ é”çš„æƒ…å†µä¸‹åˆ›å»ºæ•°æ®åœ¨æŸä¸€æ—¶é—´ç‚¹çš„å¿«ç…§ã€‚åœ¨è¯»å–æ•°æ®æ—¶ï¼ŒMVCCä¼šè¿”å›è¯¥æ—¶é—´ç‚¹çš„æ•°æ®ç‰ˆæœ¬ï¼Œå³ä½¿è¯¥æ•°æ®åæ¥è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚è¿™æ ·ï¼Œæ¯ä¸ªäº‹åŠ¡éƒ½æœ‰è‡ªå·±çš„æ•°æ®è§†å›¾ï¼Œå½¼æ­¤ä¹‹é—´ä¸ä¼šäº’ç›¸å½±å“ï¼Œå®ç°äº†éš”ç¦»æ€§ã€‚</li></ol><p>æ­¤å¤–ï¼ŒMySQLè¿˜æä¾›äº†å››ç§éš”ç¦»çº§åˆ«ï¼ˆè¯»æœªæäº¤ã€è¯»å·²æäº¤ã€å¯é‡å¤è¯»ã€ä¸²è¡ŒåŒ–ï¼‰ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼Œä»¥åœ¨å¹¶å‘æ€§å’Œæ•°æ®ä¸€è‡´æ€§ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p><h3 id="äº‹åŠ¡ä¸€è‡´æ€§æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡ä¸€è‡´æ€§æ€ä¹ˆå®ç°çš„-2023-ç¾å›¢" aria-hidden="true">#</a> äº‹åŠ¡ä¸€è‡´æ€§æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>MySQLå®ç°äº‹åŠ¡ä¸€è‡´æ€§ä¸»è¦ä¾èµ–äºå…¶InnoDBå­˜å‚¨å¼•æ“çš„ACIDå±æ€§ï¼Œå…¶ä¸­Cä»£è¡¨ä¸€è‡´æ€§(Consistency)ã€‚å…·ä½“æ¥è¯´ï¼Œä»¥ä¸‹æ˜¯MySQLå¦‚ä½•å®ç°äº‹åŠ¡ä¸€è‡´æ€§çš„ä¸€äº›æ–¹å¼ï¼š</p><ol><li><strong>ä½¿ç”¨é”æœºåˆ¶</strong>ï¼šInnoDBå­˜å‚¨å¼•æ“æ”¯æŒè¡Œçº§é”å’Œè¡¨çº§é”ï¼Œé€šè¿‡é”æœºåˆ¶æ¥æ§åˆ¶å¹¶å‘äº‹åŠ¡çš„è®¿é—®å†²çªï¼Œç¡®ä¿æ¯ä¸ªäº‹åŠ¡éƒ½åœ¨ä¸€è‡´æ€§çš„çŠ¶æ€ä¸‹æ‰§è¡Œã€‚</li><li><strong>ä½¿ç”¨MVCC</strong>ï¼šInnoDBå­˜å‚¨å¼•æ“é€šè¿‡MVCCæ¥å®ç°è¯»å·²æäº¤å’Œå¯é‡å¤è¯»ä¸¤ä¸ªéš”ç¦»çº§åˆ«ï¼Œä¿è¯äº†äº‹åŠ¡çš„ä¸€è‡´æ€§è§†å›¾ï¼Œå³åœ¨äº‹åŠ¡å¼€å§‹æ—¶ç”Ÿæˆä¸€ä¸ªå¿«ç…§ï¼Œäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®éƒ½æ˜¯è¿™ä¸ªå¿«ç…§ä¸­çš„æ•°æ®ã€‚</li><li><strong>ä½¿ç”¨Undoæ—¥å¿—</strong>ï¼šInnoDBå­˜å‚¨å¼•æ“åœ¨ä¿®æ”¹æ•°æ®å‰ï¼Œä¼šå…ˆå°†åŸå§‹æ•°æ®ä¿å­˜åœ¨Undoæ—¥å¿—ä¸­ï¼Œå¦‚æœäº‹åŠ¡å¤±è´¥æˆ–è€…éœ€è¦å›æ»šï¼Œå°±å¯ä»¥åˆ©ç”¨Undoæ—¥å¿—å°†æ•°æ®æ¢å¤åˆ°åŸå§‹çŠ¶æ€ï¼Œä»è€Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li><li><strong>ä½¿ç”¨Redoæ—¥å¿—</strong>ï¼šRedoæ—¥å¿—ç”¨äºä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ï¼Œä½†ä¹Ÿé—´æ¥ä¿è¯äº†ä¸€è‡´æ€§ã€‚å› ä¸ºåœ¨ç³»ç»Ÿå´©æºƒæ¢å¤æ—¶ï¼Œå¯ä»¥é€šè¿‡Redoæ—¥å¿—æ¥é‡åšå·²æäº¤çš„äº‹åŠ¡ï¼Œä¿è¯è¿™äº›äº‹åŠ¡çš„ä¿®æ”¹èƒ½å¤ŸæŒä¹…ä¿å­˜ã€‚</li></ol><h3 id="äº‹åŠ¡çš„æŒä¹…æ€§æ€ä¹ˆå®ç°çš„-é€šè¿‡2023-ç¾å›¢é¢è¯•é¢˜æ€è€ƒè¡¥å……" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡çš„æŒä¹…æ€§æ€ä¹ˆå®ç°çš„-é€šè¿‡2023-ç¾å›¢é¢è¯•é¢˜æ€è€ƒè¡¥å……" aria-hidden="true">#</a> äº‹åŠ¡çš„æŒä¹…æ€§æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆé€šè¿‡2023 ç¾å›¢é¢è¯•é¢˜æ€è€ƒè¡¥å……ï¼‰</h3><p>MySQLå®ç°äº‹åŠ¡æŒä¹…æ€§ä¸»è¦ä¾èµ–äºå…¶ä½¿ç”¨çš„å­˜å‚¨å¼•æ“ï¼Œæ¯”å¦‚InnoDBã€‚ä»¥ä¸‹æ˜¯InnoDBå¦‚ä½•å®ç°äº‹åŠ¡æŒä¹…æ€§çš„ä¸€äº›æ–¹å¼ï¼š</p><ol><li><strong>é‡åšæ—¥å¿—ï¼ˆRedo Logsï¼‰</strong>ï¼šInnoDBå¼•æ“æœ‰ä¸€ç»„é‡åšæ—¥å¿—æ–‡ä»¶ï¼Œäº‹åŠ¡æäº¤å‰ï¼Œä¼šå…ˆå°†æ›´æ”¹å†™å…¥åˆ°é‡åšæ—¥å¿—ä¸­ï¼Œå¹¶ä¿è¯è¿™äº›æ—¥å¿—è¢«å†™å…¥åˆ°ç£ç›˜ã€‚è¿™ç§æœºåˆ¶å°±æ˜¯æ‰€è°“çš„é¢„å†™å¼æ—¥å¿—ï¼ˆWrite-Ahead Loggingï¼ŒWALï¼‰ã€‚æ¯ä¸ªé‡åšæ—¥å¿—éƒ½åŒ…å«äº†äº‹åŠ¡çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠè¿™ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ã€‚</li><li><strong>åˆ·æ–°ç¼“å†²æ± ï¼ˆFlush Buffer Poolï¼‰</strong>ï¼šå½“äº‹åŠ¡æäº¤æ—¶ï¼ŒInnoDBå¼•æ“åªæ˜¯å°†æ›´æ”¹å†™å…¥äº†é‡åšæ—¥å¿—ï¼Œå¹¶æ²¡æœ‰ç«‹å³å†™å…¥åˆ°ç£ç›˜çš„æ•°æ®æ–‡ä»¶ä¸­ã€‚å®é™…çš„å†™å…¥è¿‡ç¨‹æ˜¯åœ¨åå°ä»¥ä¸€å®šçš„é¢‘ç‡è¿›è¡Œçš„ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åˆ·æ–°ç¼“å†²æ± ã€‚</li><li><strong>å´©æºƒæ¢å¤ï¼ˆCrash Recoveryï¼‰</strong>ï¼šå¦‚æœæ•°æ®åº“åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å´©æºƒï¼ŒInnoDBå¯ä»¥ä½¿ç”¨é‡åšæ—¥å¿—æ¥æ¢å¤æ•°æ®åˆ°ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚åœ¨é‡å¯è¿‡ç¨‹ä¸­ï¼ŒInnoDBä¼šæ£€æŸ¥é‡åšæ—¥å¿—ï¼Œå¹¶å°†æ‰€æœ‰æœªå®Œæˆçš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åº”ç”¨åˆ°æ•°æ®æ–‡ä»¶ä¸­ï¼ŒåŒæ—¶å–æ¶ˆæ‰€æœ‰æœªæäº¤çš„äº‹åŠ¡ã€‚</li></ol><p>è¿™äº›æœºåˆ¶å…±åŒç¡®ä¿äº†MySQLäº‹åŠ¡çš„æŒä¹…æ€§ï¼Œå³ä½¿åœ¨ç³»ç»Ÿå´©æºƒåï¼Œå·²æäº¤çš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ä¹Ÿèƒ½è¢«æ­£ç¡®åœ°æ¢å¤ã€‚</p>',29),gs={href:"https://javaguide.cn/database/mysql/mysql-logs.html#%E5%88%B7%E7%9B%98%E6%97%B6%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"},bs=t('<h3 id="mvccçš„éš”ç¦»æœºåˆ¶ä»‹ç»ä¸€ä¸‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#mvccçš„éš”ç¦»æœºåˆ¶ä»‹ç»ä¸€ä¸‹-2023-ç¾å›¢" aria-hidden="true">#</a> MVCCçš„éš”ç¦»æœºåˆ¶ä»‹ç»ä¸€ä¸‹ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><ul><li>Read View ä¸­å››ä¸ªå­—æ®µä½œç”¨ï¼›</li><li>èšç°‡ç´¢å¼•è®°å½•ä¸­ä¸¤ä¸ªè·Ÿäº‹åŠ¡æœ‰å…³çš„éšè—åˆ—ï¼›</li></ul><p>é‚£ Read View åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p><figure><img src="'+v+'" alt="mvcc-1" tabindex="0" loading="lazy"><figcaption>mvcc-1</figcaption></figure><p>Read View æœ‰å››ä¸ªé‡è¦çš„å­—æ®µï¼š</p><ul><li>m_ids ï¼šæŒ‡çš„æ˜¯åœ¨åˆ›å»º Read View æ—¶ï¼Œå½“å‰æ•°æ®åº“ä¸­ã€Œæ´»è·ƒäº‹åŠ¡ã€çš„<strong>äº‹åŠ¡ id åˆ—è¡¨</strong>ï¼Œæ³¨æ„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œ<strong>â€œæ´»è·ƒäº‹åŠ¡â€æŒ‡çš„å°±æ˜¯ï¼Œå¯åŠ¨äº†ä½†è¿˜æ²¡æäº¤çš„äº‹åŠ¡</strong>ã€‚</li><li>min_trx_id ï¼šæŒ‡çš„æ˜¯åœ¨åˆ›å»º Read View æ—¶ï¼Œå½“å‰æ•°æ®åº“ä¸­ã€Œæ´»è·ƒäº‹åŠ¡ã€ä¸­äº‹åŠ¡ <strong>id æœ€å°çš„äº‹åŠ¡</strong>ï¼Œä¹Ÿå°±æ˜¯ m_ids çš„æœ€å°å€¼ã€‚</li><li>max_trx_id ï¼šè¿™ä¸ªå¹¶ä¸æ˜¯ m_ids çš„æœ€å¤§å€¼ï¼Œè€Œæ˜¯<strong>åˆ›å»º Read View æ—¶å½“å‰æ•°æ®åº“ä¸­åº”è¯¥ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„ id å€¼</strong>ï¼Œä¹Ÿå°±æ˜¯å…¨å±€äº‹åŠ¡ä¸­æœ€å¤§çš„äº‹åŠ¡ id å€¼ + 1ï¼›</li><li>creator_trx_id ï¼šæŒ‡çš„æ˜¯<strong>åˆ›å»ºè¯¥ Read View çš„äº‹åŠ¡çš„äº‹åŠ¡ id</strong>ã€‚</li></ul><p>çŸ¥é“äº† Read View çš„å­—æ®µï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£èšç°‡ç´¢å¼•è®°å½•ä¸­çš„ä¸¤ä¸ªéšè—åˆ—ã€‚</p><p>å‡è®¾åœ¨è´¦æˆ·ä½™é¢è¡¨æ’å…¥ä¸€æ¡å°æ—ä½™é¢ä¸º 100 ä¸‡çš„è®°å½•ï¼Œç„¶åæˆ‘æŠŠè¿™ä¸¤ä¸ªéšè—åˆ—ä¹Ÿç”»å‡ºæ¥ï¼Œè¯¥è®°å½•çš„æ•´ä¸ªç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><figure><img src="'+h+'" alt="mvcc-2" tabindex="0" loading="lazy"><figcaption>mvcc-2</figcaption></figure><p>å¯¹äºä½¿ç”¨ InnoDB å­˜å‚¨å¼•æ“çš„æ•°æ®åº“è¡¨ï¼Œå®ƒçš„èšç°‡ç´¢å¼•è®°å½•ä¸­éƒ½åŒ…å«ä¸‹é¢ä¸¤ä¸ªéšè—åˆ—ï¼š</p><ul><li>trx_idï¼Œå½“ä¸€ä¸ªäº‹åŠ¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œå°±ä¼š<strong>æŠŠè¯¥äº‹åŠ¡çš„äº‹åŠ¡ id è®°å½•åœ¨ trx_id éšè—åˆ—é‡Œ</strong>ï¼›</li><li>roll_pointerï¼Œæ¯æ¬¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šæŠŠæ—§ç‰ˆæœ¬çš„è®°å½•å†™å…¥åˆ° undo æ—¥å¿—ä¸­ï¼Œç„¶å<strong>è¿™ä¸ªéšè—åˆ—æ˜¯ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ¯ä¸€ä¸ªæ—§ç‰ˆæœ¬è®°å½•</strong>ï¼Œäºæ˜¯å°±å¯ä»¥é€šè¿‡å®ƒæ‰¾åˆ°ä¿®æ”¹å‰çš„è®°å½•ã€‚</li></ul><p>åœ¨åˆ›å»º Read View åï¼Œæˆ‘ä»¬å¯ä»¥å°†è®°å½•ä¸­çš„ trx_id åˆ’åˆ†è¿™ä¸‰ç§æƒ…å†µï¼š</p><figure><img src="'+g+'" alt="mvcc-3" tabindex="0" loading="lazy"><figcaption>mvcc-3</figcaption></figure><p>ä¸€ä¸ªäº‹åŠ¡å»è®¿é—®è®°å½•çš„æ—¶å€™ï¼Œé™¤äº†è‡ªå·±çš„æ›´æ–°è®°å½•æ€»æ˜¯å¯è§ä¹‹å¤–ï¼Œè¿˜æœ‰è¿™å‡ ç§æƒ…å†µï¼š</p><ul><li><p>å¦‚æœè®°å½•çš„ trx_id å€¼å°äº Read View ä¸­çš„ <code>min_trx_id</code> å€¼ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬çš„è®°å½•æ˜¯åœ¨åˆ›å»º Read View <strong>å‰</strong>å·²ç»æäº¤çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡<strong>å¯è§</strong>ã€‚</p></li><li><p>å¦‚æœè®°å½•çš„ trx_id å€¼å¤§äºç­‰äº Read View ä¸­çš„ <code>max_trx_id</code> å€¼ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬çš„è®°å½•æ˜¯åœ¨åˆ›å»º Read View <strong>å</strong>æ‰å¯åŠ¨çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡<strong>ä¸å¯è§</strong>ã€‚</p></li><li><p>å¦‚æœè®°å½•çš„ trx_id å€¼åœ¨ Read View çš„ min_trx_idå’Œmax_trx_idä¹‹é—´ï¼Œéœ€è¦åˆ¤æ–­ trx_id æ˜¯å¦åœ¨ m_ids åˆ—è¡¨ä¸­ï¼š</p></li><li><ul><li>å¦‚æœè®°å½•çš„ trx_id <strong>åœ¨</strong> <code>m_ids</code> åˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºç”Ÿæˆè¯¥ç‰ˆæœ¬è®°å½•çš„æ´»è·ƒäº‹åŠ¡ä¾ç„¶æ´»è·ƒç€ï¼ˆè¿˜æ²¡æäº¤äº‹åŠ¡ï¼‰ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡<strong>ä¸å¯è§</strong>ã€‚</li><li>å¦‚æœè®°å½•çš„ trx_id <strong>ä¸åœ¨</strong> <code>m_ids</code>åˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºç”Ÿæˆè¯¥ç‰ˆæœ¬è®°å½•çš„æ´»è·ƒäº‹åŠ¡å·²ç»è¢«æäº¤ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬çš„è®°å½•å¯¹å½“å‰äº‹åŠ¡<strong>å¯è§</strong>ã€‚</li></ul></li></ul><p><strong>è¿™ç§é€šè¿‡ã€Œç‰ˆæœ¬é“¾ã€æ¥æ§åˆ¶å¹¶å‘äº‹åŠ¡è®¿é—®åŒä¸€ä¸ªè®°å½•æ—¶çš„è¡Œä¸ºå°±å« MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ã€‚</strong></p><h3 id="æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼-å¯ä»¥åèŒƒå¼å—-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼-å¯ä»¥åèŒƒå¼å—-2023-ç¾å›¢" aria-hidden="true">#</a> æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼ï¼Œå¯ä»¥åèŒƒå¼å—ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼æ˜¯æ•°æ®åº“è®¾è®¡çš„åŸºæœ¬åŸåˆ™ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ol><li><strong>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰</strong> ï¼šæ•°æ®è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒï¼Œä¹Ÿå°±æ˜¯å±æ€§å€¼æ˜¯åŸå­æ€§çš„ã€‚</li><li><strong>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰</strong>ï¼šåœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚æ•°æ®è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½ä¸ä¸»é”®ç›¸å…³ï¼Œä¹Ÿå°±æ˜¯è¯´éä¸»é”®åˆ—å¿…é¡»å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œä¸èƒ½åªä¾èµ–ä¸»é”®çš„ä¸€éƒ¨åˆ†ï¼ˆé’ˆå¯¹è”åˆä¸»é”®ï¼‰ã€‚</li><li><strong>ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰</strong>ï¼šåœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚ä¸€ä¸ªæ•°æ®è¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶ä»–è¡¨ä¸­å·²åŒ…å«çš„éä¸»é”®ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œéä¸»é”®åˆ—å¿…é¡»ç›´æ¥ä¾èµ–äºä¸»é”®ï¼Œä¸èƒ½å­˜åœ¨ä¼ é€’ä¾èµ–ã€‚</li></ol><blockquote><p>ä¼ é€’ä¾èµ–è¿›æ­¥ä¸€è§£é‡Šï¼šåœ¨ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªéä¸»é”®åˆ—Bï¼Œå®ƒä¸ç›´æ¥ä¾èµ–äºè¯¥è¡¨çš„ä¸»é”®åˆ—Aï¼Œè€Œæ˜¯ä¾èµ–äºå¦ä¸€ä¸ªéä¸»é”®åˆ—Cï¼Œè€Œè¿™ä¸ªéä¸»é”®åˆ—Cåˆä¾èµ–äºä¸»é”®åˆ—Aï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´ï¼Œéä¸»é”®åˆ—Bå¯¹ä¸»é”®åˆ—Aå­˜åœ¨ä¼ é€’ä¾èµ–ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«å­¦ç”ŸIDï¼ˆä¸»é”®ï¼‰ã€å­¦ç”Ÿå§“åã€ç­çº§åç§°å’Œç­ä¸»ä»»å§“åçš„è¡¨ã€‚åœ¨è¿™ä¸ªè¡¨ä¸­ï¼Œå­¦ç”Ÿå§“åç›´æ¥ä¾èµ–äºå­¦ç”ŸIDï¼Œç­çº§åç§°ä¹Ÿç›´æ¥ä¾èµ–äºå­¦ç”ŸIDï¼Œä½†æ˜¯ç­ä¸»ä»»å§“åå¹¶ä¸ç›´æ¥ä¾èµ–äºå­¦ç”ŸIDï¼Œè€Œæ˜¯ä¾èµ–äºç­çº§åç§°ï¼ˆå› ä¸ºä¸€ä¸ªç­çº§å¯¹åº”ä¸€ä¸ªç­ä¸»ä»»ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´ï¼Œç­ä¸»ä»»å§“åå¯¹å­¦ç”ŸIDå­˜åœ¨ä¼ é€’ä¾èµ–ã€‚</p><p>ä¸ºäº†æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ï¼Œæˆ‘ä»¬éœ€è¦æ¶ˆé™¤è¿™ç§ä¼ é€’ä¾èµ–ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸè¡¨æ‹†åˆ†ä¸ºä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªè¡¨åŒ…å«å­¦ç”ŸIDã€å­¦ç”Ÿå§“åå’Œç­çº§åç§°ï¼Œå¦ä¸€ä¸ªè¡¨åŒ…å«ç­çº§åç§°å’Œç­ä¸»ä»»å§“åã€‚è¿™æ ·ï¼Œæ¯ä¸ªè¡¨ä¸­çš„éä¸»é”®åˆ—éƒ½ç›´æ¥ä¾èµ–äºä¸»é”®ï¼Œä¸å­˜åœ¨ä¼ é€’ä¾èµ–ï¼Œä»è€Œæ»¡è¶³ç¬¬ä¸‰èŒƒå¼ã€‚</p></blockquote><p>å…³äºåèŒƒå¼ï¼Œæ˜¯çš„ï¼Œæ•°æ®åº“è®¾è®¡å¯ä»¥åèŒƒå¼ã€‚åèŒƒå¼è®¾è®¡æ˜¯ä¸ºäº†ä¼˜åŒ–æ•°æ®åº“æ€§èƒ½ï¼Œé€šè¿‡å¢åŠ å†—ä½™æ•°æ®æˆ–è€…ç»„åˆæ•°æ®ï¼Œå‡å°‘å¤æ‚çš„æ•°æ®æŸ¥è¯¢ï¼Œæé«˜æ•°æ®è¯»å–æ€§èƒ½ã€‚</p><blockquote><p>åèŒƒå¼ï¼šæ˜¯æ•°æ®åº“è®¾è®¡ä¸­çš„ä¸€ç§ç­–ç•¥ï¼Œé€šè¿‡å¼•å…¥æ•°æ®å†—ä½™æˆ–åˆå¹¶è¡¨æ¥ä¼˜åŒ–è¯»å–æ€§èƒ½ï¼Œä½†å¯èƒ½ä¼šå¢åŠ æ•°æ®ç®¡ç†çš„å¤æ‚æ€§å’Œæ•°æ®ä¸€è‡´æ€§çš„é£é™©ã€‚</p><p>åœ¨ç†æƒ³çš„èŒƒå¼è®¾è®¡ä¸­ï¼Œä¸ºäº†å‡å°‘æ•°æ®å†—ä½™å’Œé¿å…æ•°æ®å¼‚å¸¸ï¼ˆå¦‚æ’å…¥å¼‚å¸¸ã€æ›´æ–°å¼‚å¸¸å’Œåˆ é™¤å¼‚å¸¸ï¼‰ï¼Œä¸€èˆ¬ä¼šå°†æ•°æ®åˆ†è§£åˆ°å¤šä¸ªç›¸å…³çš„è¡¨ä¸­ã€‚ç„¶è€Œï¼Œè¿™ç§è®¾è®¡å¯èƒ½ä¼šå¯¼è‡´æŸ¥è¯¢æ€§èƒ½é™ä½ï¼Œå› ä¸ºéœ€è¦æ‰§è¡Œå¤šè¡¨è¿æ¥æ“ä½œä»¥è·å–æ‰€éœ€çš„æ•°æ®ã€‚</p><p>åèŒƒå¼è®¾è®¡é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼˜åŒ–è¯»å–æ€§èƒ½ï¼š</p><ol><li><strong>æ•°æ®å†—ä½™</strong>ï¼šåœ¨å¤šä¸ªè¡¨ä¸­å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œä»¥å‡å°‘å¤šè¡¨è¿æ¥æ“ä½œã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ•°æ®æ›´æ–°æ›´å¤æ‚ï¼Œå› ä¸ºéœ€è¦åœ¨å¤šä¸ªä½ç½®æ›´æ–°ç›¸åŒçš„æ•°æ®ã€‚</li><li><strong>æ•°æ®é¢„è®¡ç®—</strong>ï¼šå°†ç»å¸¸éœ€è¦è®¡ç®—çš„æ•°æ®é¢„å…ˆè®¡ç®—å¹¶å­˜å‚¨èµ·æ¥ï¼Œå¦‚æ€»æ•°ã€å¹³å‡æ•°ç­‰ã€‚</li><li><strong>è¡¨åˆå¹¶</strong>ï¼šå°†å¤šä¸ªè¡¨åˆå¹¶ä¸ºä¸€ä¸ªè¡¨ï¼Œä»¥å‡å°‘å¤šè¡¨è¿æ¥æ“ä½œã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ•°æ®å†—ä½™ï¼Œä½†å¯ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</li></ol><p>è™½ç„¶åèŒƒå¼è®¾è®¡å¯ä»¥ä¼˜åŒ–è¯»å–æ€§èƒ½ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥æ•°æ®ç®¡ç†çš„å¤æ‚æ€§å’Œæ•°æ®ä¸€è‡´æ€§çš„é£é™©ã€‚å› æ­¤ï¼Œæ˜¯å¦ä½¿ç”¨åèŒƒå¼è®¾è®¡éœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œæ€§èƒ½éœ€æ±‚è¿›è¡Œæƒè¡¡ã€‚</p></blockquote><h2 id="â™»ï¸-jvm" tabindex="-1"><a class="header-anchor" href="#â™»ï¸-jvm" aria-hidden="true">#</a> â™»ï¸ JVM</h2><h3 id="å †æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#å †æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„-2023-å¿«æ‰‹" aria-hidden="true">#</a> å †æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><ol><li><strong>å †çš„åˆ’åˆ†</strong>ï¼šåœ¨JVMä¸­ï¼Œå †è¢«åˆ’åˆ†ä¸ºå¹´è½»ä»£ï¼ˆYoung Generationï¼‰å’Œè€å¹´ä»£ï¼ˆOld Generationï¼‰ã€‚å¹´è½»ä»£åˆè¢«åˆ’åˆ†ä¸ºEdenåŒºå’Œä¸¤ä¸ªSurvivoråŒºï¼ˆS0å’ŒS1ï¼‰ã€‚æ–°åˆ›å»ºçš„å¯¹è±¡é¦–å…ˆåœ¨EdenåŒºåˆ›å»ºï¼Œå½“EdenåŒºæ»¡æ—¶ï¼Œä¼šè§¦å‘Minor GCè¿›è¡Œåƒåœ¾å›æ”¶ã€‚å­˜æ´»çš„å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°SurvivoråŒºï¼Œå½“SurvivoråŒºä¹Ÿæ»¡æ—¶ï¼Œå¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚å½“è€å¹´ä»£æ»¡äº†ï¼Œä¼šè§¦å‘Major GCæˆ–è€…Full GCã€‚</li><li><strong>åƒåœ¾å›æ”¶</strong>ï¼šJVMé€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ä»¥é‡Šæ”¾å†…å­˜ã€‚JVMçš„åƒåœ¾å›æ”¶ç®—æ³•åŒ…æ‹¬æ ‡è®°-æ¸…é™¤ã€å¤åˆ¶ã€æ ‡è®°-æ•´ç†ã€åˆ†ä»£æ”¶é›†ç­‰ã€‚</li><li><strong>å†…å­˜åˆ†é…</strong>ï¼šå½“åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼ŒJVMä¼šåœ¨å †ä¸­ä¸ºå…¶åˆ†é…å†…å­˜ã€‚JVMæœ‰ä¸€ä¸ªæŒ‡é’ˆå«åšTLABï¼ˆThread Local Allocation Bufferï¼‰ï¼Œç”¨äºåœ¨ç‰¹å®šçš„çº¿ç¨‹ä¸­åˆ†é…å¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥é¿å…çº¿ç¨‹ä¹‹é—´çš„ç«äº‰ã€‚å¦‚æœå¯¹è±¡å¾ˆå¤§ï¼Œå¯èƒ½ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…ã€‚</li><li><strong>å †å¤§å°è°ƒæ•´</strong>ï¼šJVMçš„å †å¤§å°å¯ä»¥åŠ¨æ€è°ƒæ•´ï¼Œä»¥é€‚åº”ç¨‹åºçš„éœ€æ±‚ã€‚å¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°è®¾ç½®æœ€å°å †å¤§å°ï¼ˆ-Xmsï¼‰å’Œæœ€å¤§å †å¤§å°ï¼ˆ-Xmxï¼‰ã€‚å¦‚æœç¨‹åºéœ€è¦æ›´å¤šå†…å­˜ï¼Œå †å¯ä»¥æ‰©å±•åˆ°æœ€å¤§å †å¤§å°ï¼›å¦‚æœç¨‹åºéœ€è¦çš„å†…å­˜å‡å°‘ï¼Œå †å¯ä»¥æ”¶ç¼©åˆ°æœ€å°å †å¤§å°ã€‚</li></ol><h3 id="è·¨ä»£å¼•ç”¨é—®é¢˜æ€ä¹ˆè§£å†³-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#è·¨ä»£å¼•ç”¨é—®é¢˜æ€ä¹ˆè§£å†³-2023-å¿«æ‰‹" aria-hidden="true">#</a> è·¨ä»£å¼•ç”¨é—®é¢˜æ€ä¹ˆè§£å†³ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p><strong>è·¨ä»£å¼•ç”¨é—®é¢˜æ˜¯æŒ‡åœ¨JVMå†…å­˜æ¨¡å‹ä¸­ï¼Œå¹´è½»ä»£çš„å¯¹è±¡å¼•ç”¨è€å¹´ä»£çš„å¯¹è±¡ï¼Œæˆ–è€…è€å¹´ä»£çš„å¯¹è±¡å¼•ç”¨å¹´è½»ä»£çš„å¯¹è±¡</strong>ã€‚è¿™åœ¨åƒåœ¾å›æ”¶æ—¶å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºåƒåœ¾å›æ”¶é€šå¸¸ä¼šé’ˆå¯¹å¹´è½»ä»£å’Œè€å¹´ä»£åˆ†åˆ«è¿›è¡Œã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJVMå¼•å…¥äº†ä¸€ä¸ªå«åš <strong>&quot;å¡è¡¨&quot;ï¼ˆCard Tableï¼‰</strong> çš„æ•°æ®ç»“æ„ã€‚å¡è¡¨çš„ä¸»è¦ä½œç”¨æ˜¯å¿«é€Ÿæ‰¾åˆ°è€å¹´ä»£ä¸­è¢«å¹´è½»ä»£å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ï¼Œä»è€Œåœ¨è¿›è¡ŒMinor GCæ—¶ï¼Œå‡å°‘å…¨å †æ‰«æçš„å¼€é”€ã€‚</p><blockquote><p>å¡è¡¨æ¦‚è§ˆï¼šå¡è¡¨æ˜¯Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸­åŠ é€ŸæŸ¥æ‰¾å¼•ç”¨çš„ä¸€ç§è¾…åŠ©æ•°æ®ç»“æ„ã€‚è¡¨ä¸­æ¯ä¸ªæ¡ç›®å¯¹åº”äºJavaå †çš„ä¸€å°éƒ¨åˆ†ï¼Œè¿™é‡Œæˆ‘ç§°ä¸ºå°å—ã€‚å½“è€å¹´ä»£ä¸­çš„ä¸€ä¸ªå¯¹è±¡å†™å…¥/æ›´æ–°å¯¹å¹´è½»ä»£ä¸­çš„ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œè¿™ä¸ªæ“ä½œä¼šé€šè¿‡ä¸€ç§å«åšå†™å±éšœçš„ä¸œè¥¿ã€‚å½“JVMçœ‹åˆ°è¿™äº›å†™å±éšœæ—¶ï¼Œå®ƒä¼šæ›´æ–°å¡ç‰‡è¡¨ä¸­çš„ç›¸åº”æ¡ç›®ã€‚</p><ul><li>å†™å±éšœï¼šåƒåœ¾æ”¶é›†å™¨ç”¨æ¥è·Ÿè¸ªå¯¹è±¡å¼•ç”¨æ›´æ”¹çš„ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€æ®µä»£ç ï¼ˆJVMå®ç°çš„ï¼‰ï¼Œæ¯å½“å¯¹è±¡å¼•ç”¨æ›´æ–°æ—¶å°±ä¼šè¿è¡Œã€‚å†™å±éšœç¡®ä¿åƒåœ¾æ”¶é›†å™¨å¯ä»¥è·Ÿè¸ªå †ä¸­çš„æ‰€æœ‰å¼•ç”¨ï¼Œå¹¶ç¡®å®šå“ªäº›å¯¹è±¡ä»åœ¨ä½¿ç”¨ï¼Œå“ªäº›æ²¡æœ‰ã€‚</li><li>å½“å†™å…¥å±éšœå‘ç°è¯­å¥<code>some_obj.field = other_obj;</code>å°†å¹´è½»æŒ‡é’ˆå­˜å‚¨åœ¨æ—§å¯¹è±¡ä¸­æ—¶ï¼Œå®ƒä¼šè¿™æ ·åšï¼š<code>card_table[(&amp;old_obj - start_of_heap) &gt;&gt; K] = 1;</code></li><li>å…¶ä¸­<code>&amp;old_obj</code>æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªå¹´è½»ä»£æŒ‡é’ˆçš„å¯¹è±¡çš„åœ°å€ï¼ˆå®ƒå·²ç»åœ¨å¯„å­˜å™¨ä¸­ï¼Œå› ä¸ºå®ƒåˆšåˆšè¢«ç¡®å®šå¼•ç”¨æ—§å¯¹è±¡ï¼‰ã€‚ åœ¨æ¬¡è¦GCæœŸé—´ï¼Œåƒåœ¾æ”¶é›†å™¨æŸ¥çœ‹å¡è¡¨ä»¥ç¡®å®šè¦æ‰«æå“ªäº›å †åŒºåŸŸä»¥æŸ¥æ‰¾å¹´è½»æŒ‡é’ˆã€‚ <ul><li>for i from 0 to (heap_size &gt;&gt; K):</li><li>if card_table[i]: scan heap[i &lt;&lt; K .. (i + 1) &lt;&lt; K] for young pointers <img src="'+l+'" alt="card-table" loading="lazy"></li></ul></li></ul></blockquote><p>å¡è¡¨å°†è€å¹´ä»£çš„å†…å­˜åˆ†ä¸ºå¤šä¸ªå°å—ï¼ˆé€šå¸¸ä¸º512å­—èŠ‚ï¼‰ï¼Œæ¯ä¸ªå°å—å¯¹åº”å¡è¡¨ä¸­çš„ä¸€é¡¹ï¼Œå½“è€å¹´ä»£ä¸­çš„æŸä¸ªå°å—å†…å­˜<strong>è¢«ä¿®æ”¹æ—¶</strong>ï¼ˆä¾‹å¦‚å¹´è½»ä»£çš„å¯¹è±¡å¼•ç”¨äº†è¯¥å°å—ä¸­çš„æŸä¸ªå¯¹è±¡ï¼‰ï¼Œå¯¹åº”çš„å¡è¡¨é¡¹å°±è¢«æ ‡è®°ä¸º <strong>&quot;è„ï¼ˆdirtyï¼‰&quot;</strong> ã€‚</p><p>åœ¨è¿›è¡ŒMinor GCï¼ˆæ¸…ç†å¹´è½»ä»£ï¼‰æ—¶ï¼ŒJVMåªéœ€è¦æ£€æŸ¥æ ‡è®°ä¸º&quot;è„&quot;çš„å¡è¡¨é¡¹å¯¹åº”çš„å†…å­˜å—ï¼Œæ‰¾å‡ºè¢«å¹´è½»ä»£å¯¹è±¡å¼•ç”¨çš„è€å¹´ä»£å¯¹è±¡ï¼Œè€Œæ— éœ€æ‰«ææ•´ä¸ªè€å¹´ä»£ã€‚è¿™æ ·å°±å¤§å¤§æé«˜äº†åƒåœ¾å›æ”¶çš„æ•ˆç‡ã€‚</p><p>è‡³äº<strong>è€å¹´ä»£çš„å¯¹è±¡å¼•ç”¨å¹´è½»ä»£çš„å¯¹è±¡ï¼Œè¿™åœ¨JVMçš„åˆ†ä»£å›æ”¶ç­–ç•¥ä¸­æ˜¯ä¸æ¨èçš„ï¼Œå› ä¸ºä¼šå¢åŠ åƒåœ¾å›æ”¶çš„å¤æ‚æ€§</strong>ã€‚å¦‚æœç¡®å®å­˜åœ¨è¿™ç§æƒ…å†µï¼Œä¸€èˆ¬éœ€è¦åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œéå†è€å¹´ä»£æ‰¾åˆ°æ‰€æœ‰å¼•ç”¨å¹´è½»ä»£çš„å¯¹è±¡ï¼Œç¡®ä¿ä¸ä¼šè¯¯åˆ ã€‚</p>',32),fs=n("p",null,"å‚è€ƒæ–‡çŒ®å¦‚ä¸‹ï¼š",-1),ys={href:"https://stackoverflow.com/questions/19154607/how-actually-card-table-and-writer-barrier-work",target:"_blank",rel:"noopener noreferrer"},ws={href:"https://tschatzl.github.io/2022/02/15/card-table-card-size.html",target:"_blank",rel:"noopener noreferrer"},_s={href:"https://www.mo4tech.com/jvm-card-table.html",target:"_blank",rel:"noopener noreferrer"},xs={href:"https://www.cnblogs.com/hongdada/p/12016020.html",target:"_blank",rel:"noopener noreferrer"},Cs={href:"http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots.html",target:"_blank",rel:"noopener noreferrer"},Ss=t('<h3 id="æ¯æ¬¡å›æ”¶éƒ½è¦ä»gc-rootå¼€å§‹å—-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#æ¯æ¬¡å›æ”¶éƒ½è¦ä»gc-rootå¼€å§‹å—-2023-å¿«æ‰‹" aria-hidden="true">#</a> æ¯æ¬¡å›æ”¶éƒ½è¦ä»GC ROOTå¼€å§‹å—ï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>æ˜¯çš„ï¼Œæ¯æ¬¡åƒåœ¾å›æ”¶éƒ½ä¼šä»GC Rootså¼€å§‹ã€‚GC Rootsæ˜¯åƒåœ¾å›æ”¶ç®—æ³•å¼€å§‹å·¥ä½œçš„ä¸€ç»„å¿…è¦çš„&quot;æ ¹&quot;å¯¹è±¡ã€‚</p><p>Javaä¸­å¯ä»¥ä½œä¸ºGC Rootsçš„å¯¹è±¡åŒ…æ‹¬ï¼š</p><ol><li>åœ¨è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³ä¸€èˆ¬è¯´çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚</li></ol><p>åƒåœ¾å›æ”¶å™¨åœ¨å¯¹å †è¿›è¡Œå›æ”¶å‰ï¼Œä¼šå…ˆä»GC Rootså¼€å§‹å¯¹å †ä¸­çš„å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æã€‚åªæœ‰å½“å¯¹è±¡åœ¨GC Rootsåˆ°è¯¥å¯¹è±¡ä¹‹é—´æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾å¯è¾¾æ—¶ï¼ˆæ¢å¥è¯è¯´ï¼ŒGC Rootsåˆ°è¯¥å¯¹è±¡ä¸å¯è¾¾ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡æ‰ä¼šè¢«åˆ¤å®šä¸ºå¯å›æ”¶çš„åƒåœ¾å¯¹è±¡ã€‚</p><p>è¿™ç§é€šè¿‡GC Rootsè¿›è¡Œå¯è¾¾æ€§åˆ†æçš„æ–¹å¼ï¼Œä¿è¯äº†åªæœ‰çœŸæ­£ä¸å†ä½¿ç”¨çš„å¯¹è±¡ä¼šè¢«å›æ”¶ï¼Œä»è€Œé¿å…äº†é”™è¯¯åœ°å›æ”¶ä»åœ¨ä½¿ç”¨çš„å¯¹è±¡ã€‚</p><h3 id="åƒåœ¾å›æ”¶è¿‡ç¨‹å¦‚ä½•åˆ¤æ–­æ¯ä¸ªé˜¶æ®µå·²ç»å®Œæˆ-å¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µ-2023-å¿«æ‰‹" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾å›æ”¶è¿‡ç¨‹å¦‚ä½•åˆ¤æ–­æ¯ä¸ªé˜¶æ®µå·²ç»å®Œæˆ-å¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µ-2023-å¿«æ‰‹" aria-hidden="true">#</a> åƒåœ¾å›æ”¶è¿‡ç¨‹å¦‚ä½•åˆ¤æ–­æ¯ä¸ªé˜¶æ®µå·²ç»å®Œæˆï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µï¼ˆ2023 å¿«æ‰‹ï¼‰</h3><p>åƒæ˜¯åƒåœ¾å›æ”¶å™¨å¦‚CMSï¼ˆå¹¶å‘æ ‡è®°æ¸…é™¤ï¼‰å’ŒG1ï¼ˆGarbage-Firstï¼‰åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šé€šè¿‡ä¸€ç³»åˆ—çš„é˜¶æ®µæ¥åˆ¤æ–­ä½•æ—¶å¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p><p>CMSåƒåœ¾å›æ”¶å™¨ï¼š CMSåƒåœ¾å›æ”¶å™¨ä¸»è¦åŒ…å«ä»¥ä¸‹å››ä¸ªé˜¶æ®µï¼š</p><ol><li>åˆå§‹æ ‡è®°ï¼ˆInitial Markï¼‰ï¼šæ ‡è®°GC Rootsèƒ½ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œæ­¤é˜¶æ®µéœ€è¦æš‚åœæ‰€æœ‰çš„å…¶ä»–çº¿ç¨‹ï¼Œä½†æ˜¯æ—¶é—´é€šå¸¸è¾ƒçŸ­ã€‚</li><li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markï¼‰ï¼šè¿›è¡ŒGC Roots Tracingçš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä»GC Rootså¼€å§‹å¯¹å †ä¸­çš„å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ­¤é˜¶æ®µå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</li><li>é‡æ–°æ ‡è®°ï¼ˆRemarkï¼‰ï¼šä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ï¼Œé˜²æ­¢æ•°æ®ä¸ä¸€è‡´ï¼Œæ­¤é˜¶æ®µéœ€è¦æš‚åœæ‰€æœ‰çš„å…¶ä»–çº¿ç¨‹ã€‚</li><li>å¹¶å‘æ¸…é™¤ï¼ˆConcurrent Sweepï¼‰ï¼šæ¸…é™¤ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ­¤é˜¶æ®µå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚ CMSåœ¨æ¯ä¸ªé˜¶æ®µå®Œæˆåä¼šåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚ä¾‹å¦‚ï¼Œåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œå½“æ‰€æœ‰ä»GC Rootså¼€å§‹å¯è¾¾çš„å¯¹è±¡éƒ½è¢«æ ‡è®°åï¼Œå°±å¯ä»¥è¿›å…¥é‡æ–°æ ‡è®°é˜¶æ®µã€‚</li></ol><p>G1åƒåœ¾å›æ”¶å™¨ï¼š G1åƒåœ¾å›æ”¶å™¨å°†å †å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªå°å—ï¼ˆRegionï¼‰ï¼Œæ¯ä¸ªå°å—å¯èƒ½å±äºEdenåŒºã€SurvivoråŒºæˆ–è€…OldåŒºã€‚G1çš„åƒåœ¾å›æ”¶è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p><ol><li>åˆå§‹æ ‡è®°ï¼ˆInitial Markï¼‰ï¼šæ ‡è®°æ‰€æœ‰çš„GC Rootsèƒ½ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œæ­¤é˜¶æ®µéœ€è¦æš‚åœæ‰€æœ‰çš„å…¶ä»–çº¿ç¨‹ã€‚</li><li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markï¼‰ï¼šè¿›è¡ŒGC Roots Tracingçš„è¿‡ç¨‹ï¼Œæ­¤é˜¶æ®µå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</li><li>æœ€ç»ˆæ ‡è®°ï¼ˆFinal Markï¼‰ï¼šä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ï¼Œæ­¤é˜¶æ®µéœ€è¦æš‚åœæ‰€æœ‰çš„å…¶ä»–çº¿ç¨‹ã€‚</li><li>ç­›é€‰å›æ”¶ï¼ˆCleanupï¼‰ï¼šé¦–å…ˆç»Ÿè®¡å„ä¸ªRegionçš„å­˜æ´»å¯¹è±¡ï¼Œå¹¶å¯¹Regionè¿›è¡Œæ’åºï¼Œç„¶åå›æ”¶åƒåœ¾å¯¹è±¡æœ€å¤šçš„Regionã€‚ ç±»ä¼¼åœ°ï¼ŒG1åœ¨æ¯ä¸ªé˜¶æ®µå®Œæˆåä¼šåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚ä¾‹å¦‚ï¼Œåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œå½“æ‰€æœ‰ä»GC Rootså¼€å§‹å¯è¾¾çš„å¯¹è±¡éƒ½è¢«æ ‡è®°åï¼Œå°±å¯ä»¥è¿›å…¥æœ€ç»ˆæ ‡è®°é˜¶æ®µã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼Œåƒåœ¾å›æ”¶å™¨åœ¨æ¯ä¸ªé˜¶æ®µçš„ç»“æŸæ¡ä»¶ä¸»è¦å–å†³äºå½“å‰é˜¶æ®µçš„ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Œä¾‹å¦‚æ˜¯å¦æ‰€æœ‰çš„å¯¹è±¡éƒ½å·²ç»è¢«æ ‡è®°ï¼Œæˆ–è€…æ˜¯å¦æ‰€æœ‰çš„åƒåœ¾éƒ½å·²ç»è¢«æ¸…é™¤ã€‚</p><h3 id="ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿfull-gc-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿfull-gc-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”ŸFULL GCï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>æ¯å½“å †æ»¡æ—¶ï¼Œå°±ä¼šè§¦å‘Full GCã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé¦–å…ˆæ”¶é›†å¹´è½»ä»£ï¼Œç„¶åæ”¶é›†è€å¹´ä»£ã€‚å¦‚æœè€å¹´ä»£å¤ªæ»¡è€Œæ— æ³•æ¥å—å¹´è½»ä»£çš„å†…å®¹ï¼Œåˆ™çœç•¥å¹´è½»ä»£GCï¼Œå¹¶ä½¿ç”¨æ—§ä»£GCä»¥å¹¶è¡Œæˆ–ä¸²è¡Œæ–¹å¼æ”¶é›†å®Œæ•´å †ã€‚</p><p>å¦å¤–ï¼š</p><ol><li>Young Generation å·²æ»¡,è€Œ Old Generation ä¸­åˆæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ´»å¯¹è±¡æ—¶,ä¼šè§¦å‘ full gcã€‚</li><li>å·²ä½¿ç”¨çš„å†…å­˜è¶…è¿‡æœ€å¤§å †å†…å­˜(é€šè¿‡ -Xmx è®¾ç½®)æ—¶,ä¹Ÿä¼šè§¦å‘ full gc ä»¥å›æ”¶å†…å­˜ã€‚</li><li>è°ƒç”¨ System.gc() æ–¹æ³•æ—¶,å¦‚æœ JVM æ£€æµ‹åˆ° Old Generation ä¸­æœ‰è¶³å¤Ÿçš„åƒåœ¾éœ€è¦æ¸…ç†,ä¹Ÿä¼šè§¦å‘ full gcã€‚</li><li>Minor GC å®Œæˆå,å¦‚æœ JVM æ£€æµ‹åˆ° Old Generation ä¸­æœ‰è¶³å¤Ÿçš„åƒåœ¾éœ€è¦æ¸…ç†,ä¹Ÿä¼šè§¦å‘ full gcã€‚</li></ol>',17),Ls=n("p",null,"å‚è€ƒï¼š",-1),Ms={href:"https://stackoverflow.com/questions/24766118/when-is-a-full-gc-triggered",target:"_blank",rel:"noopener noreferrer"},qs=t(`<h3 id="å¯ä»¥åœ¨ä»£ç ä¸­æ•è·oomå¼‚å¸¸å—-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#å¯ä»¥åœ¨ä»£ç ä¸­æ•è·oomå¼‚å¸¸å—-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> å¯ä»¥åœ¨ä»£ç ä¸­æ•è·oomå¼‚å¸¸å—ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>å¯ä»¥é€šè¿‡ä»£ç æ•è· OOM(OutOfMemory)å¼‚å¸¸ã€‚ä¾‹å¦‚:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯èƒ½è§¦å‘ OOM çš„ä»£ç </span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">OutOfMemoryError</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Out of Memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ JVM çš„å¯ç”¨å†…å­˜ä¸è¶³ä»¥æ»¡è¶³åº”ç”¨çš„å†…å­˜éœ€æ±‚æ—¶,ä¼šæŠ›å‡º OOM å¼‚å¸¸ã€‚æ•è·è¿™ä¸ªå¼‚å¸¸å¯ä»¥è®©åº”ç”¨ä¼˜é›…åœ°å¤„ç† OOM é”™è¯¯,è€Œä¸æ˜¯ç›´æ¥å´©æºƒã€‚</p><h3 id="èƒ½ä¸èƒ½è¯´ä¸€ä¸‹å †åŒºå…·ä½“æ€ä¹ˆåˆ’åˆ†-ä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†-2023ç™¾åº¦" tabindex="-1"><a class="header-anchor" href="#èƒ½ä¸èƒ½è¯´ä¸€ä¸‹å †åŒºå…·ä½“æ€ä¹ˆåˆ’åˆ†-ä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†-2023ç™¾åº¦" aria-hidden="true">#</a> èƒ½ä¸èƒ½è¯´ä¸€ä¸‹å †åŒºå…·ä½“æ€ä¹ˆåˆ’åˆ†ï¼Œä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†ï¼ˆ2023ç™¾åº¦ï¼‰</h3><p>Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„å †åŒºï¼ˆHeapï¼‰æ˜¯JVMæ‰€ç®¡ç†çš„æœ€å¤§çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œä¹Ÿæ˜¯Javaå†…å­˜ç®¡ç†ä¸­æœ€å…³é”®çš„éƒ¨åˆ†ã€‚å®ƒä¸»è¦ç”¨äºå­˜æ”¾å„ç§å¯¹è±¡å®ä¾‹ï¼ŒåŒ…æ‹¬Javaç±»çš„å®ä¾‹å’Œæ•°ç»„ã€‚</p><p>å †åŒºçš„å…·ä½“åˆ’åˆ†å¯èƒ½ä¼šéšç€ä¸åŒçš„JVMå®ç°ï¼ˆä¾‹å¦‚HotSpotã€JRockitã€IBM J9ç­‰ï¼‰å’Œç‰ˆæœ¬æœ‰æ‰€ä¸åŒï¼Œä½†ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><strong>æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰</strong>ï¼šæ–°ç”Ÿä»£æ˜¯å †å†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦å­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚æ–°ç”Ÿä»£åˆå¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š <ul><li><strong>EdenåŒº</strong>ï¼šè¿™æ˜¯æ–°ç”Ÿä»£çš„ä¸»è¦éƒ¨åˆ†ï¼Œå¤§éƒ¨åˆ†æ–°åˆ›å»ºçš„å¯¹è±¡é¦–å…ˆåœ¨EdenåŒºåˆ†é…å†…å­˜ã€‚</li><li><strong>SurvivoråŒº</strong>ï¼šSurvivoråŒºåŒ…æ‹¬ä¸¤ä¸ªï¼Œé€šå¸¸ç§°ä¸ºFrom Survivorå’ŒTo Survivorï¼Œç”¨äºå­˜æ”¾ä»EdenåŒºç»è¿‡ä¸€æ¬¡Minor GCåä»ç„¶å­˜æ´»çš„å¯¹è±¡ã€‚</li></ul></li><li><strong>è€å¹´ä»£ï¼ˆOld Generationï¼‰</strong>ï¼šå½“å¯¹è±¡åœ¨æ–°ç”Ÿä»£SurvivoråŒºä¸­ç»å†äº†ä¸€å®šæ¬¡æ•°çš„GCåï¼Œæˆ–è€…EdenåŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œå¯¹è±¡ä¼šè¢«æ™‹å‡åˆ°è€å¹´ä»£ã€‚è€å¹´ä»£çš„ç©ºé—´é€šå¸¸æ¯”æ–°ç”Ÿä»£å¤§ï¼Œç”¨äºå­˜æ”¾é•¿æ—¶é—´å­˜æ´»çš„å¯¹è±¡ã€‚</li><li><strong>æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰/å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰</strong>ï¼šè¿™éƒ¨åˆ†å†…å­˜ç”¨äºå­˜æ”¾JVMåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰æ•°æ®ã€‚åœ¨Java 8ä¹‹åï¼Œæ°¸ä¹…ä»£è¢«ç§»é™¤ï¼Œæ”¹ä¸ºä½¿ç”¨å…ƒç©ºé—´ã€‚</li></ol><p>å †çš„è¿™ç§åˆ’åˆ†æ–¹å¼ä¸»è¦åŸºäºä¸€ä¸ªè§‚å¯Ÿåˆ°çš„ç°è±¡ï¼Œå³å¤§éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½éå¸¸çŸ­ï¼Œå³â€œå¼±ä»£å‡è¯´â€ã€‚åŸºäºæ­¤ï¼ŒJVMé‡‡ç”¨äº†åˆ†ä»£å›æ”¶çš„åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚</p><p>æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡Minor GCæ›´é¢‘ç¹åœ°æ”¶é›†æ–°ç”Ÿä»£åŒºåŸŸã€‚å½“EdenåŒºæ»¡æ—¶ï¼Œä¼šè§¦å‘Minor GCï¼Œæ¸…ç†æ‰é‚£äº›å·²ç»æ­»äº¡çš„å¯¹è±¡ï¼ŒæŠŠä»ç„¶å­˜æ´»çš„å¯¹è±¡ç§»åŠ¨åˆ°SurvivoråŒºï¼Œå¦‚æœSurvivoråŒºä¹Ÿæ»¡äº†ï¼Œå°±ä¼šå°†å¯¹è±¡ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚</p><p>è€å¹´ä»£ä¸­çš„å¯¹è±¡ä¸€èˆ¬å­˜æ´»æ—¶é—´è¾ƒé•¿ï¼Œæˆ–è€…æ˜¯Survivorç©ºé—´æ— æ³•å®¹çº³çš„å¤§å¯¹è±¡ã€‚å› æ­¤ï¼Œç›¸æ¯”äºæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£çš„GCï¼ˆMajor GCæˆ–Full GCï¼‰ä¼šç›¸å¯¹å°‘äº›ï¼Œä½†æ¯æ¬¡GCæ—¶é—´ä¼šæ¯”Minor GCè¦é•¿ï¼Œå› ä¸ºéœ€è¦å¯¹æ•´ä¸ªè€å¹´ä»£è¿›è¡Œæ•´ç†ã€‚</p><p>æ°¸ä¹…ä»£/å…ƒç©ºé—´å­˜æ”¾çš„æ•°æ®ç±»å‹ï¼ˆå¦‚ç±»ä¿¡æ¯ã€å¸¸é‡ï¼‰çš„ç”Ÿå‘½å‘¨æœŸä¸ä¸€èˆ¬çš„Javaå¯¹è±¡æœ‰æ‰€ä¸åŒï¼Œå…¶å†…å­˜ç®¡ç†ä¹Ÿæœ‰ç‰¹æ®Šä¹‹å¤„ï¼Œæ¯”å¦‚ç±»çš„å¸è½½ç­‰æƒ…å†µã€‚</p><p>è¿™ç§å†…å­˜åˆ’åˆ†å’Œç®¡ç†æ–¹å¼èƒ½å¤Ÿæé«˜åƒåœ¾æ”¶é›†çš„æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿå‡è½»äº†Full GCçš„å‹åŠ›ï¼Œæé«˜äº†ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p><h3 id="æ€ä¹ˆé‡Šæ”¾ä¸€ä¸ªç”¨å®Œçš„å¤§å¯¹è±¡çš„å†…å­˜ç©ºé—´-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆé‡Šæ”¾ä¸€ä¸ªç”¨å®Œçš„å¤§å¯¹è±¡çš„å†…å­˜ç©ºé—´-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> æ€ä¹ˆé‡Šæ”¾ä¸€ä¸ªç”¨å®Œçš„å¤§å¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li>æ¶ˆé™¤å¯¹è±¡å¼•ç”¨ï¼šé¦–å…ˆï¼Œä½ éœ€è¦ç¡®ä¿æ²¡æœ‰ä»»ä½•æ´»åŠ¨çš„å¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚è¿™å¯èƒ½æ¶‰åŠå°†ä»»ä½•å˜é‡æŒ‡å‘è¯¥å¯¹è±¡çš„å¼•ç”¨è®¾ç½®ä¸ºnullã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">BigObject</span> bigObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Use bigObject</span>
bigObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// Helps to make bigObject eligible for GC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>è¯·æ±‚ç³»ç»Ÿè¿›è¡Œåƒåœ¾æ”¶é›†ï¼šè™½ç„¶JVMä¼šè‡ªåŠ¨è¿›è¡Œåƒåœ¾æ”¶é›†ï¼Œä½†æ˜¯åœ¨å¤„ç†å¤§å¯¹è±¡æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›å°½æ—©åœ°é‡Šæ”¾å†…å­˜ã€‚ä¸ºæ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨System.gc()æ–¹æ³•æ¥è¯·æ±‚JVMè¿›è¡Œåƒåœ¾æ”¶é›†ã€‚ä½†æ˜¯ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼ŒJVMå¯èƒ½ä¸ä¼šç«‹å³å“åº”ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Suggests JVM to run the garbage collector</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯¹äºå¤§å¯¹è±¡ï¼Œç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¤§å¯¹è±¡å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡ï¼Œè¿™ä¼šå½±å“åƒåœ¾æ”¶é›†çš„æ•ˆç‡å’Œç¨‹åºçš„æ€§èƒ½ã€‚å¦‚æœå¯èƒ½ï¼Œä½ å¯ä»¥å°½é‡å¤ç”¨è¿™äº›å¤§å¯¹è±¡ï¼Œæˆ–è€…ä½¿ç”¨æ± åŒ–ç­‰æŠ€æœ¯æ¥ç®¡ç†è¿™äº›èµ„æºã€‚</p><h3 id="å†™æŸ¥è¯¢è¯­å¥çš„æ—¶å€™åº”è¯¥ä»å“ªäº›æ–¹é¢è€ƒè™‘æ¥æ³¨æ„æ€§èƒ½-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#å†™æŸ¥è¯¢è¯­å¥çš„æ—¶å€™åº”è¯¥ä»å“ªäº›æ–¹é¢è€ƒè™‘æ¥æ³¨æ„æ€§èƒ½-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> å†™æŸ¥è¯¢è¯­å¥çš„æ—¶å€™åº”è¯¥ä»å“ªäº›æ–¹é¢è€ƒè™‘æ¥æ³¨æ„æ€§èƒ½ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li>ä½¿ç”¨ç´¢å¼•ï¼šç´¢å¼•å¯ä»¥æå¤§åœ°æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚ç†è§£ä½ çš„æŸ¥è¯¢æ˜¯å¦‚ä½•ä½¿ç”¨ç´¢å¼•çš„ï¼Œå¹¶ä¸”å°½å¯èƒ½åœ°ä½¿ä½ çš„æŸ¥è¯¢èƒ½å¤Ÿä½¿ç”¨ç´¢å¼•ã€‚</li><li>é¿å…å…¨è¡¨æ‰«æï¼šå°½å¯èƒ½åœ°é¿å…å…¨è¡¨æ‰«æã€‚è¿™é€šå¸¸æ„å‘³ç€ä½ éœ€è¦ä¸ºç»å¸¸ç”¨äºæŸ¥è¯¢çš„åˆ—åˆ›å»ºç´¢å¼•ã€‚</li><li>å‡å°‘è¿”å›çš„æ•°æ®é‡ï¼šåªæŸ¥è¯¢ä½ çœŸæ­£éœ€è¦çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ SELECT * ä¼šè¿”å›æ‰€æœ‰åˆ—ï¼Œè¿™å¯èƒ½ä¼šæµªè´¹å¤§é‡çš„I/Oèµ„æºã€‚å°½å¯èƒ½åªè¿”å›ä½ éœ€è¦çš„åˆ—ã€‚</li><li>è¿‡æ»¤ç»“æœï¼šåœ¨æ•°æ®åº“å±‚é¢è¿‡æ»¤ç»“æœï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨å±‚é¢è¿‡æ»¤ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ WHERE å­å¥è€Œä¸æ˜¯åœ¨åº”ç”¨ä»£ç ä¸­è¿‡æ»¤æ•°æ®ã€‚</li><li>ä¼˜åŒ–è”æ¥ï¼šå¦‚æœéœ€è¦è”æ¥å¤šä¸ªè¡¨ï¼Œç¡®ä¿ä½ æ­£ç¡®åœ°åˆ›å»ºäº†ç´¢å¼•ï¼Œå¹¶å°½å¯èƒ½åœ°å‡å°‘è”æ¥çš„æ•°é‡ã€‚</li><li>ä½¿ç”¨ LIMITï¼šå¦‚æœå¯èƒ½ï¼Œä½¿ç”¨ LIMIT è¯­å¥æ¥é™åˆ¶è¿”å›çš„æ•°æ®é‡ï¼Œç‰¹åˆ«æ˜¯åœ¨åªéœ€è¦ä¸€éƒ¨åˆ†ç»“æœçš„æƒ…å†µä¸‹ã€‚</li><li>é¿å…å¤æ‚çš„å­æŸ¥è¯¢ï¼šå°½å¯èƒ½é¿å…å¤æ‚çš„å­æŸ¥è¯¢ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚æœ‰æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ JOIN æ¥ä»£æ›¿å­æŸ¥è¯¢ã€‚</li><li>åˆ†ææŸ¥è¯¢ï¼šä½¿ç”¨ EXPLAIN è¯­å¥åˆ†æä½ çš„æŸ¥è¯¢ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•åœ¨æ•°æ®åº“ä¸­è¿è¡Œçš„ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ æ‰¾åˆ°å¯èƒ½çš„æ€§èƒ½ç“¶é¢ˆã€‚</li></ol><p>ä»¥ä¸Šåªæ˜¯ä¸€äº›åŸºæœ¬çš„æŒ‡å—ï¼Œæ¯ä¸ªå…·ä½“çš„æƒ…å†µå¯èƒ½ä¼šæœ‰ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥ã€‚</p><h3 id="æ€ä¹ˆæ‰‹åŠ¨è®©-java-è™šæ‹Ÿæœº-oom-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆæ‰‹åŠ¨è®©-java-è™šæ‹Ÿæœº-oom-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> æ€ä¹ˆæ‰‹åŠ¨è®© JAVA è™šæ‹Ÿæœº OOMï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p>ä¸ºäº†æ‰‹åŠ¨è®©Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰å†…å­˜æº¢å‡ºï¼ˆOutOfMemoryErrorï¼‰ï¼Œå¯ä»¥å°è¯•åœ¨ä»£ç ä¸­åˆ›å»ºä¸€ä¸ªå¾ˆå¤§çš„å¯¹è±¡æ•°ç»„ï¼Œä»¥å°½å¿«è€—å°½JVMçš„å¯ç”¨å†…å­˜ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OOMExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ¯æ¬¡åˆ†é…1MBçš„å†…å­˜</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> memoryChunk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>memoryChunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Memory allocated: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> memoryChunk<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; MB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¨‹åºä¼šä¸æ–­åˆ†é…1MBçš„å†…å­˜å—ç›´åˆ°JVMè€—å°½å†…å­˜ã€‚ä¸è¿‡è¯·æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸æ˜¯é«˜æ•ˆåœ°è§¦å‘OOMï¼Œå› ä¸ºJVMçš„åƒåœ¾å›æ”¶å™¨å¯èƒ½ä¼šåœ¨æŸä¸ªæ—¶åˆ»é‡Šæ”¾éƒ¨åˆ†å†…å­˜ã€‚ä½†è¿™ä¸ªä¾‹å­é€šå¸¸è¶³ä»¥è§¦å‘ä¸€ä¸ªå†…å­˜æº¢å‡ºé”™è¯¯ã€‚</p><p>åœ¨è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œå¯èƒ½éœ€è¦æ ¹æ®æ‚¨çš„æœºå™¨é™åˆ¶JVMçš„å†…å­˜ã€‚ä¾‹å¦‚ï¼Œè‹¥è¦å°†æœ€å¤§å†…å­˜é™åˆ¶ä¸º256MBï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-Xmx256m</span> OOMExample
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å¦‚æœé¢‘ç¹å‡ºç°full-gcè¯¥æ€ä¹ˆæ’æŸ¥-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#å¦‚æœé¢‘ç¹å‡ºç°full-gcè¯¥æ€ä¹ˆæ’æŸ¥-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> å¦‚æœé¢‘ç¹å‡ºç°Full GCè¯¥æ€ä¹ˆæ’æŸ¥ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>é¢‘ç¹å‡ºç°Full GCçš„åŸå› æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ol><li>å†…å­˜æº¢å‡ºï¼šåº”ç”¨ç¨‹åºç”³è¯·çš„å†…å­˜è¶…è¿‡äº†JVMçš„æœ€å¤§å¯ç”¨å†…å­˜ï¼Œå¯¼è‡´GCçº¿ç¨‹é¢‘ç¹æ‰§è¡ŒFull GCæ¥å›æ”¶å†…å­˜ã€‚å¯ä»¥é€šè¿‡æ£€æŸ¥JVMå¯åŠ¨å‚æ•°ä¸­-Xmxçš„å€¼æ¥ç¡®è®¤æ˜¯å¦å†…å­˜æº¢å‡ºï¼Œå¦‚æœæ˜¯çš„è¯å¯ä»¥é€‚å½“å¢åŠ è¯¥å€¼ã€‚</li><li>è€å¹´ä»£ç©ºé—´ä¸è¶³ï¼šåº”ç”¨ä¸­å¤§é‡å¯¹è±¡å­˜æ´»æ—¶é—´è¾ƒé•¿ï¼Œä½¿å¾—è€å¹´ä»£ç©ºé—´å æ»¡ï¼Œè§¦å‘Full GCã€‚å¯ä»¥é€šè¿‡-Xmså’Œ-Xmxå‚æ•°è°ƒå¤§å¹´è€ä»£å¤§å°(-XXï¼šPermSizeå’Œ-XXï¼šMaxPermSize)ã€‚</li><li>å¹´è½»ä»£å’Œè€å¹´ä»£ç©ºé—´ä¸å¹³è¡¡ï¼šå¦‚æœå¹´è½»ä»£ç©ºé—´è¿‡å°ï¼Œå­˜æ´»å¯¹è±¡è¿‡æ—©æ™‹å‡åˆ°è€å¹´ä»£ï¼Œå¯¼è‡´è€å¹´ä»£ç©ºé—´é¥±å’Œï¼Œè§¦å‘Full GCã€‚å¯ä»¥é€‚å½“å¢åŠ å¹´è½»ä»£å¤§å°(-Xmn)å’Œå‡å°è€å¹´ä»£ç©ºé—´(-XXï¼šPermSize)ã€‚</li><li>åƒåœ¾å¾ªç¯å¼•ç”¨ï¼šåº”ç”¨ä¸­å­˜åœ¨å¯¹è±¡ä¹‹é—´ç›¸äº’å¼•ç”¨ï¼Œå½¢æˆé—­ç¯ï¼Œä½¿å¾—GCæ— æ³•å›æ”¶å®ƒä»¬ã€‚éœ€è¦æ’æŸ¥ä»£ç ï¼Œå‘ç°å¹¶æ‰“ç ´å¾ªç¯å¼•ç”¨ã€‚</li><li>ä»£ç ç¼ºé™·ï¼šåº”ç”¨ä»£ç ä¸­å­˜åœ¨èµ„æºæœªå…³é—­ã€ memcacheè¿æ¥æ³„éœ²ç­‰èµ„æºæ³„éœ²é—®é¢˜ï¼Œåº”æ£€æŸ¥ä»£ç å¹¶ä¿®å¤è¿™äº›é—®é¢˜ã€‚</li></ol><h3 id="full-gcä¼šæ”¶é›†çš„æ˜¯å“ªäº›å¯¹è±¡-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#full-gcä¼šæ”¶é›†çš„æ˜¯å“ªäº›å¯¹è±¡-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> Full GCä¼šæ”¶é›†çš„æ˜¯å“ªäº›å¯¹è±¡ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><ol><li>å¹´è½»ä»£ä¸­çš„å¯¹è±¡ï¼šå¹´è½»ä»£ä¸­æ™‹å‡ä¸åˆ°è€å¹´ä»£çš„å¯¹è±¡å’Œåˆšåˆ›å»ºçš„æ–°å¯¹è±¡ã€‚</li><li>è€å¹´ä»£ä¸­çš„å¯¹è±¡ï¼šå­˜æ´»æ—¶é—´é•¿çš„å¯¹è±¡ã€‚</li><li>æ°¸ä¹…ä»£(JDK8ä»¥ä¸‹)æˆ–å…ƒç©ºé—´(JDK8åŠä»¥ä¸Š)ä¸­çš„å¯¹è±¡ï¼šç±»ä¿¡æ¯ã€å¸¸é‡ã€æ–¹æ³•ç­‰ã€‚</li><li>è™šæ‹Ÿæœºæ ˆä¸­çš„å¯¹è±¡ï¼šè™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­çš„å¯¹è±¡ï¼šæœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li></ol><h3 id="è§£å†³full-gc-æˆ‘ä»¬å¯ä»¥å‡å°‘å¯¹è±¡çš„é¢‘ç¹åˆ›å»º-é‚£ä¹ˆæœ‰ä¸€ä¸ªæˆ‘ä»¬æ¥è¯·æ±‚éœ€æ±‚åˆ›å»ºå¯¹è±¡çš„åœºæ™¯-å¯ä»¥æ€ä¹ˆä¼˜åŒ–-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#è§£å†³full-gc-æˆ‘ä»¬å¯ä»¥å‡å°‘å¯¹è±¡çš„é¢‘ç¹åˆ›å»º-é‚£ä¹ˆæœ‰ä¸€ä¸ªæˆ‘ä»¬æ¥è¯·æ±‚éœ€æ±‚åˆ›å»ºå¯¹è±¡çš„åœºæ™¯-å¯ä»¥æ€ä¹ˆä¼˜åŒ–-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> è§£å†³Full GCï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªæˆ‘ä»¬æ¥è¯·æ±‚éœ€æ±‚åˆ›å»ºå¯¹è±¡çš„åœºæ™¯ï¼Œå¯ä»¥æ€ä¹ˆä¼˜åŒ–ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><ol><li>å¯¹è±¡æ± æŠ€æœ¯ï¼šé‡å¤åˆ©ç”¨å¯¹è±¡ï¼Œé¿å…è¿‡åº¦åˆ›å»ºã€‚æ¯”å¦‚å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œçº¿ç¨‹æ± ç­‰ã€‚</li><li>é€‚å½“å¢åŠ å¹´è½»ä»£ç©ºé—´ï¼š-Xmnå‚æ•°è°ƒå¤§ï¼Œè®©æ›´å¤šå¯¹è±¡åœ¨Minor GCä¸­å°±è¢«å›æ”¶ï¼Œå‡å°‘è¿›å…¥è€å¹´ä»£çš„å¯¹è±¡ã€‚</li><li>é¿å…çŸ­æœŸobject churnï¼šé¿å…å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºå’Œæ¶ˆäº¡ï¼Œå°½é‡é‡å¤ä½¿ç”¨å¯¹è±¡ï¼Œè¿™å¯ä»¥å‡å°‘GCç´¯ç§¯çš„å·¥ä½œã€‚</li><li>é¿å…finalize()æ–¹æ³•ï¼šfinalize()æ–¹æ³•ä¼šå¢åŠ GCçš„å·¥ä½œé‡ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­é¿å…é‡å†™finalize()æ–¹æ³•ã€‚</li><li>é€‚å½“å¢åŠ è€å¹´ä»£ç©ºé—´ï¼š-Xmså’Œ-Xmxå‚æ•°è°ƒå¤§ï¼Œå¢åŠ è€å¹´ä»£çš„ç©ºé—´ï¼Œå‡å°‘Full GCçš„è§¦å‘é¢‘ç‡ã€‚</li><li>JDK8ä¸­ä½¿ç”¨Metaspaceä»£æ›¿æ°¸ä¹…ä»£ï¼š-XXï¼šMetaspaceSizeå’Œ-XXï¼šMaxMetaspaceSizeå‚æ•°æ§åˆ¶ï¼Œé¿å…æ°¸ä¹…ä»£æº¢å‡ºã€‚</li><li>åˆ†ä»£æ”¶é›†å™¨ï¼š-XXï¼š+UseParallelGCå’Œ-XXï¼š+UseParallelOldGCç­‰å‚æ•°é€‰æ‹©åˆ†ä»£æ”¶é›†å™¨ï¼ŒMinor GCå’ŒMajor GCå¯ä»¥å¹¶è¡Œè¿›è¡Œï¼Œæé«˜æ•ˆç‡ã€‚</li><li>æ›¿æ¢Full GCæ”¶é›†å™¨ï¼š-XXï¼š+UseG1GCç­‰å‚æ•°é€‰æ‹©G1ç­‰æ”¶é›†å™¨ï¼Œé¿å…å‡ºç°Stop The Worldçš„Full GCã€‚</li><li>å‡å°‘åƒåœ¾å¾ªç¯å¼•ç”¨ï¼š reviewing your code to reduce circular references can decrease the number of live objects and therefore Full GCsã€‚</li><li>é¿å…ä»£ç ç¼ºé™·ï¼šå¦‚å…³é—­æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶æµç­‰ï¼Œé¿å…èµ„æºæ³„éœ²å¯¼è‡´Full GCã€‚</li></ol><p>è¿™äº›ä¼˜åŒ–æªæ–½å¯ä»¥ä»JVMå‚æ•°è°ƒä¼˜ã€ä»£ç å±‚é¢ä¸Šé˜²æ­¢å¯¹è±¡è¿‡åº¦åˆ›å»ºå’Œå‡å°‘GCå·¥ä½œé‡ï¼Œæœ‰æ•ˆå‡å°‘Full GCçš„é¢‘ç‡ã€‚</p><h2 id="ğŸ¦¸â€â™€ï¸ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#ğŸ¦¸â€â™€ï¸ä¸­é—´ä»¶" aria-hidden="true">#</a> ğŸ¦¸â€â™€ï¸ä¸­é—´ä»¶</h2><h3 id="è¯·æ±‚å¾ˆå¤š-æ¶ˆæ¯å †ç§¯å¤„ç†ä¸è¿‡æ¥äº†å¦‚ä½•åº”å¯¹-2023æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚å¾ˆå¤š-æ¶ˆæ¯å †ç§¯å¤„ç†ä¸è¿‡æ¥äº†å¦‚ä½•åº”å¯¹-2023æ»´æ»´" aria-hidden="true">#</a> è¯·æ±‚å¾ˆå¤šï¼Œæ¶ˆæ¯å †ç§¯å¤„ç†ä¸è¿‡æ¥äº†å¦‚ä½•åº”å¯¹ï¼ˆ2023æ»´æ»´ï¼‰</h3><p>å¦‚æœå‘ç°æ¶ˆæ¯ä¸­é—´ä»¶ä¸­çš„æ¶ˆæ¯æ­£åœ¨å †ç§¯ï¼Œè¿™å¯èƒ½æ„å‘³ç€ç”Ÿäº§è€…ç”Ÿäº§çš„æ¶ˆæ¯é€Ÿåº¦å¤§äºæ¶ˆè´¹è€…çš„æ¶ˆè´¹é€Ÿåº¦ã€‚æœ‰å‡ ç§å¯èƒ½çš„ç­–ç•¥å¯ä»¥ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼š</p><ol><li>æ‰©å±•æ¶ˆæ¯ä¸­é—´ä»¶<strong>é›†ç¾¤</strong>ï¼šè€ƒè™‘å¯¹æ¶ˆæ¯ä¸­é—´ä»¶è¿›è¡Œæ°´å¹³æ‰©å±•ï¼Œæé«˜æ•´ä½“çš„å¤„ç†èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œåœ¨RabbitMQä¸­ï¼Œå¯ä»¥å¢åŠ èŠ‚ç‚¹æ¥å®ç°é›†ç¾¤æ‰©å±•ã€‚</li><li><strong>é™çº§</strong>ï¼šåœ¨é™çº§ç­–ç•¥ä¸­ï¼Œå½“å‘ç°æ¶ˆæ¯å¤„ç†é€Ÿåº¦ä¸è¶³ä»¥åº”å¯¹ç§¯å‹çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥å†³å®šå¯¹æŸäº›ç±»å‹æˆ–ä¼˜å…ˆçº§è¾ƒä½çš„æ¶ˆæ¯è¿›è¡Œé™çº§å¤„ç†ã€‚é™çº§å¤„ç†çš„æ–¹å¼å¯èƒ½åŒ…æ‹¬å‡æ…¢å¤„ç†è¿™äº›æ¶ˆæ¯çš„é€Ÿåº¦ã€æš‚æ—¶å¿½ç•¥è¿™äº›æ¶ˆæ¯ï¼Œæˆ–è€…å°†è¿™äº›æ¶ˆæ¯è½¬ç§»åˆ°ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ç­‰å¾…å¤„ç†ã€‚è¿™æ ·ï¼Œç³»ç»Ÿå¯ä»¥æŠŠæ›´å¤šçš„èµ„æºç”¨äºå¤„ç†é«˜ä¼˜å…ˆçº§çš„æ¶ˆæ¯ã€‚</li><li><strong>ç†”æ–­</strong>ï¼šç†”æ–­æ˜¯ä¸€ç§é˜²æ­¢ç³»ç»Ÿè¿‡è½½å¹¶å¿«é€Ÿå¤±è´¥çš„æœºåˆ¶ï¼Œç±»ä¼¼äºç”µè·¯ä¸­çš„ç†”æ–­å™¨ã€‚å½“å‘ç°æ¶ˆæ¯å¤„ç†ç³»ç»Ÿçš„å‹åŠ›è¿‡å¤§æ—¶ï¼Œå¯ä»¥å¯åŠ¨ç†”æ–­æœºåˆ¶ã€‚è¿™å¯èƒ½æ„å‘³ç€æš‚æ—¶æ‹’ç»æ¥æ”¶æ›´å¤šçš„æ¶ˆæ¯ï¼Œæˆ–è€…å¯¹æ–°åˆ°çš„æ¶ˆæ¯è¿›è¡Œå¿«é€Ÿå¤±è´¥å¤„ç†ï¼ˆä¾‹å¦‚ç«‹å³è¿”å›é”™è¯¯ï¼Œè€Œä¸æ˜¯å°†å…¶æ”¾å…¥é˜Ÿåˆ—ï¼‰ã€‚ä¸€æ—¦å¯åŠ¨äº†ç†”æ–­æœºåˆ¶ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªæœºåˆ¶å»æ£€æµ‹ä½•æ—¶å¯ä»¥â€œé—­åˆâ€ç†”æ–­å™¨ï¼Œä¹Ÿå°±æ˜¯ä½•æ—¶å¯ä»¥æ¢å¤æ­£å¸¸å¤„ç†æ¶ˆæ¯ã€‚è¿™é€šå¸¸æ¶‰åŠåˆ°å¯¹ç³»ç»Ÿçš„è´Ÿè½½å’Œæ€§èƒ½è¿›è¡Œç›‘æ§ï¼Œå¹¶è®¾ç½®åˆé€‚çš„é˜ˆå€¼ã€‚</li></ol><h3 id="ç”¨æˆ·åœ¨æ¶ˆæ¯å †ç§¯æ—¶ä»¥ä¸ºå¡äº†å¤šæ¬¡è¯·æ±‚æ€ä¹ˆå¤„ç†-2023æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·åœ¨æ¶ˆæ¯å †ç§¯æ—¶ä»¥ä¸ºå¡äº†å¤šæ¬¡è¯·æ±‚æ€ä¹ˆå¤„ç†-2023æ»´æ»´" aria-hidden="true">#</a> ç”¨æˆ·åœ¨æ¶ˆæ¯å †ç§¯æ—¶ä»¥ä¸ºå¡äº†å¤šæ¬¡è¯·æ±‚æ€ä¹ˆå¤„ç†ï¼ˆ2023æ»´æ»´ï¼‰</h3><p>å½“ç”¨æˆ·åœ¨æ¶ˆæ¯å †ç§¯æ—¶å¤šæ¬¡å‘é€ç›¸åŒçš„è¯·æ±‚ï¼Œè¿™å¯èƒ½ä¼šè¿›ä¸€æ­¥åŠ é‡ç³»ç»Ÿçš„å‹åŠ›ã€‚æœ‰å‡ ç§ç­–ç•¥å¯ä»¥å¸®åŠ©åº”å¯¹è¿™ä¸ªé—®é¢˜ï¼š</p><ol><li><strong>å‰ç«¯é˜²æŠ–ï¼ˆDebounceï¼‰</strong>ï¼šå¯ä»¥åœ¨å®¢æˆ·ç«¯å®ç°é˜²æŠ–æœºåˆ¶ï¼Œé˜²æ­¢ç”¨æˆ·åœ¨çŸ­æ—¶é—´å†…å¤šæ¬¡ç‚¹å‡»å‘é€é‡å¤çš„è¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·æäº¤è¡¨å•åï¼Œå¯ä»¥ç¦ç”¨æäº¤æŒ‰é’®ä¸€æ®µæ—¶é—´ï¼Œé˜²æ­¢å¤šæ¬¡æäº¤ã€‚</li><li><strong>åç«¯å»é‡</strong>ï¼šåç«¯å¯ä»¥è®°å½•æ¯ä¸ªè¯·æ±‚çš„IDæˆ–è€…å…¶ä»–å”¯ä¸€æ ‡è¯†ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦æœ‰é‡å¤çš„è¯·æ±‚ã€‚å¦‚æœæ£€æµ‹åˆ°é‡å¤è¯·æ±‚ï¼Œå¯ä»¥é€‰æ‹©å¿½ç•¥æˆ–è€…è¿”å›å·²å¤„ç†çš„ç»“æœã€‚</li><li><strong>ç”¨æˆ·åé¦ˆ</strong>ï¼šåœ¨ç”¨æˆ·å‘é€è¯·æ±‚åï¼ŒåŠæ—¶ç»™å‡ºåé¦ˆï¼Œè®©ç”¨æˆ·çŸ¥é“è¯·æ±‚å·²ç»è¢«æ¥æ”¶ï¼Œæ­£åœ¨å¤„ç†ä¸­ï¼Œä»¥é˜²æ­¢ç”¨æˆ·å› ä¸ºç­‰å¾…æ—¶é—´è¿‡é•¿è€Œé‡å¤å‘é€è¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ˜¾ç¤ºä¸€ä¸ªè¿›åº¦æ¡æˆ–è€…&quot;æ­£åœ¨å¤„ç†&quot;çš„æç¤ºã€‚</li><li><strong>è¶…æ—¶å’Œé‡è¯•ç­–ç•¥</strong>ï¼šå¯¹äºè¶…æ—¶çš„è¯·æ±‚ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªåˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´åï¼Œå¯ä»¥è®©ç”¨æˆ·é€‰æ‹©æ˜¯å¦é‡æ–°å‘é€è¯·æ±‚ã€‚æ­¤å¤–ï¼Œå¯ä»¥è®¾ç½®è‡ªåŠ¨é‡è¯•ç­–ç•¥ï¼Œä½†éœ€è¦æ³¨æ„æ§åˆ¶é‡è¯•æ¬¡æ•°å’Œé—´éš”ï¼Œä»¥é˜²æ­¢è¿‡åº¦é‡è¯•åŠ é‡ç³»ç»Ÿå‹åŠ›ã€‚</li></ol><h2 id="ğŸ¤¹â€â™‚ï¸å¾®æœåŠ¡ã€åˆ†å¸ƒå¼" tabindex="-1"><a class="header-anchor" href="#ğŸ¤¹â€â™‚ï¸å¾®æœåŠ¡ã€åˆ†å¸ƒå¼" aria-hidden="true">#</a> ğŸ¤¹â€â™‚ï¸å¾®æœåŠ¡ã€åˆ†å¸ƒå¼</h2><h3 id="rpcå¦‚ä½•è¿›è¡Œåºåˆ—åŒ–-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#rpcå¦‚ä½•è¿›è¡Œåºåˆ—åŒ–-2023-é˜¿é‡Œ" aria-hidden="true">#</a> RPCå¦‚ä½•è¿›è¡Œåºåˆ—åŒ–ï¼Ÿï¼ˆ2023 é˜¿é‡Œï¼‰</h3><p>RPCçš„åºåˆ—åŒ–æ˜¯å°†æ•°æ®ç»“æ„æˆ–å¯¹è±¡è½¬æ¢æˆå¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“çš„æ ¼å¼çš„è¿‡ç¨‹ã€‚åºåˆ—åŒ–åçš„æ•°æ®å¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå¹¶åœ¨å¦ä¸€ç«¯ååºåˆ—åŒ–ï¼Œä»¥é‡å»ºåŸå§‹æ•°æ®ç»“æ„æˆ–å¯¹è±¡ã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åºåˆ—åŒ–RPCæ•°æ®ï¼ŒåŒ…æ‹¬ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¦‚Protocol Buffers1ã€JSONã€XMLç­‰ã€‚</p><h3 id="dubbo-çš„è¯·æ±‚å¤„ç†æµç¨‹-2023å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#dubbo-çš„è¯·æ±‚å¤„ç†æµç¨‹-2023å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> dubbo çš„è¯·æ±‚å¤„ç†æµç¨‹ï¼ˆ2023å®Œç¾ä¸–ç•Œï¼‰</h3><p>Dubbo çš„è¯·æ±‚å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æœåŠ¡æ¶ˆè´¹æ–¹(å®¢æˆ·ç«¯)è°ƒç”¨è¿œç¨‹æœåŠ¡çš„ä»£ç†å¯¹è±¡(Proxy)å‘èµ· RPC è°ƒç”¨ã€‚</li><li>Proxy æ¥æ”¶åˆ°è°ƒç”¨å,å°†è°ƒç”¨ä¿¡æ¯è½¬æ¢æˆ Request å¯¹è±¡,ç„¶åå‘é€åˆ° Dubbo çš„æ ¸å¿ƒçº¿ç¨‹æ±  Executor ä¸­ã€‚</li><li>Executor åœ¨çº¿ç¨‹æ± ä¸­é€‰å–ä¸€ä¸ªçº¿ç¨‹,æŠŠ Request å‘ç»™ Dubbo çš„ NIO æœåŠ¡å™¨ NettyServerã€‚</li><li>NettyServer æ”¶åˆ° Request å,é€šè¿‡æ•°æ®åº“æŸ¥è¯¢æ‰¾åˆ°æœåŠ¡æä¾›æ–¹åœ°å€,ç„¶åå°† Request ç¼–ç æˆ Netty çš„ Buffer å¯¹è±¡ã€‚</li><li>NettyServer é€šè¿‡Netty Client è¿æ¥è¿œç¨‹æœåŠ¡æä¾›æ–¹,å¹¶å°†ç¼–ç åçš„ Buffer å¯¹è±¡å‘é€è¿‡å»ã€‚</li><li>æœåŠ¡æä¾›æ–¹ NettyServer æ”¶åˆ° Buffer å,è§£ç æˆ Request å¯¹è±¡ã€‚ç„¶åæŸ¥æ‰¾æœ¬åœ°çš„æœåŠ¡å®ç°å¹¶è°ƒç”¨æœåŠ¡æ–¹æ³•ã€‚</li><li>æœåŠ¡æ–¹æ³•æ‰§è¡Œå®Œæˆå,å°†è¿”å›ç»“æœå°è£…æˆ Response å¯¹è±¡,å¹¶ç¼–ç æˆ Bufferã€‚</li><li>æœåŠ¡æä¾›æ–¹ NettyServer å°† Buffer é€šè¿‡ Netty Client è¿æ¥å‘é€ç»™æœåŠ¡æ¶ˆè´¹æ–¹ NettyServerã€‚</li><li>æœåŠ¡æ¶ˆè´¹æ–¹ NettyServer æ”¶åˆ°Bufferå,è§£ç æˆ Responseã€‚ç„¶åå‘é€ç»™ Executor çº¿ç¨‹æ± ã€‚</li><li>Executor å°† Response è¿”å›ç»™æœ€åˆçš„ Proxy è°ƒç”¨å¤„ã€‚Proxy å¾—åˆ°å“åº”ç»“æœå,è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>æ•´ä¸ª Dubbo RPC è°ƒç”¨è¿‡ç¨‹å®Œæˆã€‚</li></ol><p>æ‰€ä»¥ Dubbo çš„è¯·æ±‚å¤„ç†ä¸»è¦åˆ†ä¸ºå››éƒ¨åˆ†:</p><ol><li>å®¢æˆ·ç«¯ Proxy å‘é€è¯·æ±‚</li><li>æœåŠ¡æ¶ˆè´¹æ–¹æ”¶åˆ°è¯·æ±‚,ç»è¿‡çº¿ç¨‹æ± è½¬å‘ç»™ Netty æœåŠ¡å™¨</li><li>æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡,å°†è¯·æ±‚è½¬å‘ç»™æœåŠ¡æä¾›æ–¹</li><li>æœåŠ¡æä¾›æ–¹æ‰§è¡ŒæœåŠ¡å¹¶è¿”å›å“åº”,å°†å“åº”è¿”å›ç»™æœåŠ¡æ¶ˆè´¹æ–¹å’Œå®¢æˆ·ç«¯ã€‚</li><li>æ•´ä¸ªè¿‡ç¨‹ä¸­,Netty è´Ÿè´£æœåŠ¡å™¨ç½‘ç»œé€šä¿¡,Executor è´Ÿè´£çº¿ç¨‹æ± å’Œè¯·æ±‚è°ƒåº¦,Proxy è´Ÿè´£ä¸å®¢æˆ·ç«¯äº¤äº’ã€‚</li></ol>`,51),Rs=n("p",null,"å‚è€ƒï¼š",-1),As={href:"https://cn.dubbo.apache.org/zh-cn/docsv2.7/dev/source/service-invoking-process/",target:"_blank",rel:"noopener noreferrer"},Ps=t('<h3 id="åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§æ€ä¹ˆä¿è¯çš„-2023-èš‚èšé‡‘æœ" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§æ€ä¹ˆä¿è¯çš„-2023-èš‚èšé‡‘æœ" aria-hidden="true">#</a> åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§æ€ä¹ˆä¿è¯çš„ï¼Ÿï¼ˆ2023 èš‚èšé‡‘æœï¼‰</h3><ol><li><strong>Paxos</strong>ï¼šPaxos æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€è‡´æ€§ç®—æ³•ï¼Œå®ƒè§£å†³äº†åœ¨ä¸€ä¸ªä¸å¯é çš„ç½‘ç»œä¸­è¾¾æˆå…±è¯†çš„é—®é¢˜ã€‚Paxos æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡é€‰ä¸¾ä¸€ä¸ªææ¡ˆçš„é¢†å¯¼è€…ï¼ˆproposerï¼‰å¹¶åœ¨ææ¡ˆçš„å¤§å¤šæ•°æ¥å—è€…ï¼ˆaccepterï¼‰ä¹‹é—´è¾¾æˆå…±è¯†ã€‚</li><li><strong>Raft</strong>ï¼šRaft ç®—æ³•æ˜¯ä¸€ç§æ›´æ˜“äºç†è§£å’Œå®ç°çš„ä¸€è‡´æ€§ç®—æ³•ï¼Œç”¨äºç®¡ç†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤åˆ¶æ—¥å¿—ã€‚Raft é€šè¿‡é€‰ä¸¾é¢†å¯¼è€…å¹¶ç¡®ä¿æ—¥å¿—æ•°æ®åœ¨é›†ç¾¤ä¸­çš„èŠ‚ç‚¹è¾¾æˆä¸€è‡´æ¥å®ç°ä¸€è‡´æ€§ã€‚Raft é€šå¸¸ç”¨äºå®ç°åˆ†å¸ƒå¼æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰ã€‚</li><li><strong>ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰</strong>ï¼šä¸¤é˜¶æ®µæäº¤æ˜¯ä¸€ç§äº‹åŠ¡ç®¡ç†åè®®ï¼Œç”¨äºä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„äº‹åŠ¡ä¸€è‡´æ€§ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œäº‹åŠ¡åè°ƒè€…è¯·æ±‚æ‰€æœ‰å‚ä¸è€…é¢„å¤‡æäº¤ï¼›åœ¨ç¬¬äºŒé˜¶æ®µï¼Œäº‹åŠ¡åè°ƒè€…æ ¹æ®æ‰€æœ‰å‚ä¸è€…çš„åé¦ˆæäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚æ­¤åè®®å­˜åœ¨é˜»å¡é—®é¢˜ï¼Œå› ä¸ºå¦‚æœåè°ƒè€…å®•æœºï¼Œå‚ä¸è€…å¯èƒ½ä¼šä¸€ç›´ç­‰å¾…ã€‚</li><li><strong>ä¸‰é˜¶æ®µæäº¤ï¼ˆ3PCï¼‰</strong>ï¼šä¸‰é˜¶æ®µæäº¤æ˜¯ä¸¤é˜¶æ®µæäº¤çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œé€šè¿‡æ·»åŠ ä¸€ä¸ªâ€œé¢„æäº¤â€é˜¶æ®µæ¥å‡å°‘é˜»å¡é—®é¢˜ã€‚ç„¶è€Œï¼Œè¿™ç§åè®®åœ¨ç½‘ç»œåˆ†åŒºçš„æƒ…å†µä¸‹ä»å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚</li><li><strong>åˆ†å¸ƒå¼å¿«ç…§ç®—æ³•</strong>ï¼šåˆ†å¸ƒå¼å¿«ç…§ç®—æ³•ç”¨äºæ•æ‰åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å…¨å±€çŠ¶æ€ï¼Œä»¥è¯„ä¼°ä¸€è‡´æ€§æˆ–æ£€æµ‹æ­»é”ç­‰é—®é¢˜ã€‚Chandy-Lamport åˆ†å¸ƒå¼å¿«ç…§ç®—æ³•æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å®ç°ã€‚</li><li><strong>å‘é‡æ—¶é’Ÿå’Œç‰ˆæœ¬å‘é‡</strong>ï¼šå‘é‡æ—¶é’Ÿå’Œç‰ˆæœ¬å‘é‡æ˜¯ç”¨äºè·Ÿè¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­äº‹ä»¶ä¹‹é—´çš„å› æœå…³ç³»çš„æ•°æ®ç»“æ„ã€‚å®ƒä»¬å¯ä»¥å¸®åŠ©æ£€æµ‹å†²çªå’Œä¿æŒä¸€è‡´æ€§ã€‚</li><li><strong>Read Repair å’Œ Hinted Handoff</strong>ï¼šè¿™äº›æŠ€æœ¯ç”¨äºæœ€ç»ˆä¸€è‡´æ€§ç³»ç»Ÿï¼ˆå¦‚ Apache Cassandraï¼‰ï¼Œåœ¨èŠ‚ç‚¹æ•…éšœåè¿›è¡Œæ•°æ®ä¿®å¤ä»¥ä¿æŒä¸€è‡´æ€§ã€‚</li></ol><p>å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼šæ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚å’Œåœºæ™¯é€‰æ‹©åˆé€‚çš„ä¸€è‡´æ€§åè®®å’Œç®—æ³•ã€‚åœ¨é€‰æ‹©æ—¶ï¼Œéœ€è¦æƒè¡¡ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ä¹‹é—´çš„å…³ç³»ï¼ˆCAP ç†è®ºï¼‰</p><h3 id="grpc-dirpc-æ»´æ»´è‡ªç ”-ã€thriftå’Œdubboå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰å‹-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#grpc-dirpc-æ»´æ»´è‡ªç ”-ã€thriftå’Œdubboå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰å‹-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> gRPCï¼ŒdiRPCï¼ˆæ»´æ»´è‡ªç ”ï¼‰ã€Thriftå’ŒDubboå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Œå¦‚ä½•é€‰å‹ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>ä¼˜ç¼ºç‚¹ï¼šç•¥ï¼Œçœ‹çœ‹åšå®¢éšä¾¿ç­”å§</p><p>é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿï¼Œå¯ä»¥é€‰æ‹© gRPC æˆ– diRPCã€‚ æœåŠ¡æ²»ç†åŠŸèƒ½ï¼Œæ¨è Dubboã€‚ ç®€å•ã€æ˜“ç”¨ï¼Œå¯ä»¥é€‰æ‹© Thrift æˆ– Dubboã€‚ è·¨è¯­è¨€ï¼Œå¯ä»¥é€‰æ‹© gRPC æˆ– Thriftã€‚</p><h2 id="ğŸŒ-è®¡ç®—æœºç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#ğŸŒ-è®¡ç®—æœºç½‘ç»œ" aria-hidden="true">#</a> ğŸŒ è®¡ç®—æœºç½‘ç»œ</h2><h3 id="æœåŠ¡ç«¯å‡ºç°å¤§é‡-close-wait-çŠ¶æ€-å¯èƒ½çš„æƒ…å†µ-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯å‡ºç°å¤§é‡-close-wait-çŠ¶æ€-å¯èƒ½çš„æƒ…å†µ-2023ç¾å›¢" aria-hidden="true">#</a> æœåŠ¡ç«¯å‡ºç°å¤§é‡ close_wait çŠ¶æ€ï¼Œå¯èƒ½çš„æƒ…å†µï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p><code>CLOSE_WAIT</code>çŠ¶æ€é€šå¸¸æ„å‘³ç€ä½ çš„ç¨‹åºåœ¨å…³é—­è¿æ¥æ—¶æœ‰ä¸€äº›é—®é¢˜ï¼Œæˆ–è€…è¯´ï¼Œå®ƒæ²¡æœ‰æ­£ç¡®åœ°å…³é—­å¥—æ¥å­—è¿æ¥ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ç¨‹åºæ¥æ”¶åˆ°äº†æœåŠ¡ç«¯çš„å®Œæˆï¼ˆFINï¼‰ä¿¡å·ï¼Œä½†æ˜¯ç¨‹åºè‡ªèº«æ²¡æœ‰æ­£ç¡®åœ°å…³é—­å¥—æ¥å­—ï¼Œæˆ–è€…æ²¡æœ‰åœ¨é€‚å½“çš„æ—¶é—´å†…å…³é—­ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å¤§é‡çš„è¿æ¥å¤„äº<code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</p><p>å¯¼è‡´å¤§é‡CLOSE_WAITçŠ¶æ€çš„å¯èƒ½æƒ…å†µæœ‰å¾ˆå¤šï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½çš„æƒ…å†µï¼š</p><ol><li><strong>åº”ç”¨ç¨‹åºæ•…éšœ</strong>ï¼šåº”ç”¨ç¨‹åºå¯èƒ½æ²¡æœ‰æ­£ç¡®åœ°å…³é—­è¿æ¥ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½åœ¨å®Œæˆæ•°æ®äº¤æ¢åå¿˜è®°å…³é—­è¿æ¥ï¼Œæˆ–è€…åº”ç”¨ç¨‹åºå¯èƒ½ç”±äºé”™è¯¯è€Œæ— æ³•å…³é—­è¿æ¥ã€‚è¿™æ˜¯æœ€å¸¸è§çš„åŸå› ã€‚</li><li><strong>ç½‘ç»œé—®é¢˜</strong>ï¼šå¦‚æœç½‘ç»œç¯å¢ƒä¸ç¨³å®šï¼Œå¯èƒ½å¯¼è‡´éƒ¨åˆ†TCPè¿æ¥æ— æ³•æ­£å¸¸å…³é—­ï¼Œä»è€Œå¯¼è‡´&#39;close_wait&#39;çŠ¶æ€ã€‚ç½‘ç»œæ•…éšœ**ï¼šç½‘ç»œè¿æ¥é—®é¢˜å¯èƒ½ä¼šå¯¼è‡´å¥—æ¥å­—æ— æ³•æ­£ç¡®å…³é—­ï¼Œä»è€Œå¯¼è‡´å¤§é‡çš„CLOSE_WAITçŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œç½‘ç»œå»¶è¿Ÿå¯èƒ½å¯¼è‡´FINåŒ…è¢«å»¶è¿Ÿå‘é€ï¼Œæˆ–è€…ç½‘ç»œä¸¢åŒ…å¯èƒ½å¯¼è‡´FINåŒ…ä¸¢å¤±ï¼Œè¿™éƒ½å¯èƒ½å¯¼è‡´è¿æ¥æ— æ³•æ­£ç¡®å…³é—­ã€‚</li><li><strong>ç³»ç»Ÿèµ„æºä¸è¶³</strong>ï¼šç³»ç»Ÿèµ„æºä¸è¶³å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•åˆ›å»ºæ–°çš„å¥—æ¥å­—ï¼Œæˆ–è€…æ— æ³•ä¸ºæ–°çš„è¿æ¥åˆ†é…è¶³å¤Ÿçš„å†…å­˜ï¼Œè¿™éƒ½å¯èƒ½å¯¼è‡´å¤§é‡çš„<code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</li><li><strong>æœåŠ¡ç«¯è´Ÿè½½è¿‡é«˜</strong>ï¼šæœåŠ¡å™¨è´Ÿè½½è¿‡é«˜å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•åŠæ—¶å¤„ç†æ‰€æœ‰çš„è¿æ¥ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å…³é—­çš„è¿æ¥ä¸Šï¼Œä»è€Œå¯¼è‡´è¿™äº›è¿æ¥é•¿æ—¶é—´å¤„äº<code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</li><li><strong>æœåŠ¡ç«¯ä»£ç ä¸­æœ‰ä¸€ä¸ªbug</strong>ï¼š æœåŠ¡å™¨ä»£ç ä¸­çš„é”™è¯¯å¯èƒ½å¯¼è‡´å®ƒæ„å¤–å…³é—­è¿æ¥ã€‚ è¿™ä¹Ÿå¯èƒ½å¯¼è‡´æ–°è¯·æ±‚å¤„äºç­‰å¾…çŠ¶æ€ã€‚</li><li><strong>æœåŠ¡ç«¯æœ‰ç¡¬ä»¶é—®é¢˜</strong>ï¼š ç¡¬ä»¶é—®é¢˜ï¼ˆå¦‚å†…å­˜æ³„æ¼æˆ–CPUç“¶é¢ˆï¼‰ä¹Ÿå¯èƒ½å¯¼è‡´æœåŠ¡å™¨å…³é—­è¿æ¥ã€‚ è¿™å¯èƒ½å¯¼è‡´æ–°è¯·æ±‚å¤„äºç­‰å¾…çŠ¶æ€ã€‚</li><li><strong>å®¢æˆ·ç«¯é¢‘ç¹æ–­å¼€è¿æ¥</strong>ï¼šå¦‚æœå®¢æˆ·ç«¯é¢‘ç¹åœ°å»ºç«‹å’Œæ–­å¼€è¿æ¥ï¼Œè€ŒæœåŠ¡ç«¯å¤„ç†è¿™äº›è¿æ¥çš„é€Ÿåº¦ä¸å¤Ÿå¿«ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å¤§é‡çš„&#39;close_wait&#39;è¿æ¥ã€‚å¦å¤–ï¼Œå¦‚æœå®¢æˆ·ç«¯é¢‘ç¹åœ°å»ºç«‹å’Œæ–­å¼€è¿æ¥ï¼Œé‚£ä¹ˆå³ä½¿æœåŠ¡ç«¯å¯ä»¥åŠæ—¶å¤„ç†æ‰€æœ‰çš„è¿æ¥ï¼Œä¹Ÿå¯èƒ½ä¼šå› ä¸ºç½‘ç»œå»¶è¿Ÿç­‰é—®é¢˜ï¼Œå¯¼è‡´å¤§é‡çš„<code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</li><li><strong>TCPè¿æ¥æ²¡æœ‰æ­£ç¡®åœ°è¢«ç»“æŸ</strong>ï¼šå½“ä¸€ä¸ªTCPè¿æ¥è¦ç»“æŸæ—¶ï¼Œé€šå¸¸éœ€è¦åŒæ–¹éƒ½å‘é€ä¸€ä¸ªâ€œFINâ€æ•°æ®åŒ…æ¥è¡¨ç¤ºä»–ä»¬ä¸å†å‘é€æ•°æ®ï¼Œå¹¶ç­‰å¾…å¯¹æ–¹çš„ç¡®è®¤ã€‚å…³é—­ç³»ç»Ÿè°ƒç”¨æ˜¯åº”ç”¨ç¨‹åºå‘æ“ä½œç³»ç»Ÿå‘å‡ºçš„æŒ‡ä»¤ï¼Œè¦æ±‚å…³é—­å¥—æ¥å­—å¹¶é‡Šæ”¾èµ„æºã€‚å®¢æˆ·ç«¯çš„â€œFINâ€æ•°æ®åŒ…ï¼Œä½†æ²¡æœ‰è°ƒç”¨å…³é—­ç³»ç»Ÿè°ƒç”¨ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šä¸€ç›´ä¿æŒåœ¨â€œclose_waitâ€çŠ¶æ€ï¼Œç›´åˆ°åº”ç”¨ç¨‹åºå…³é—­å¥—æ¥å­—</li></ol><p>è§£å†³è¿™ç§é—®é¢˜é€šå¸¸éœ€è¦æ‰¾å‡ºå¯¼è‡´å¤§é‡CLOSE_WAITçŠ¶æ€çš„åŸå› ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„ä¿®å¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ˜¯åº”ç”¨ç¨‹åºæ²¡æœ‰æ­£ç¡®å…³é—­è¿æ¥ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦ä¿®æ”¹åº”ç”¨ç¨‹åºçš„ä»£ç ï¼Œç¡®ä¿å®ƒåœ¨å®Œæˆæ•°æ®äº¤æ¢åæ­£ç¡®å…³é—­è¿æ¥ã€‚å¦‚æœæ˜¯ç½‘ç»œé—®é¢˜ï¼Œå¯èƒ½éœ€è¦æ£€æŸ¥å’Œä¿®å¤ç½‘ç»œè¿æ¥ã€‚å¦‚æœæ˜¯ç³»ç»Ÿèµ„æºä¸è¶³ï¼Œå¯èƒ½éœ€è¦å¢åŠ ç³»ç»Ÿèµ„æºæˆ–ä¼˜åŒ–åº”ç”¨ç¨‹åºä»¥å‡å°‘èµ„æºä½¿ç”¨ã€‚å¦‚æœæ˜¯æœåŠ¡å™¨è´Ÿè½½è¿‡é«˜ï¼Œå¯èƒ½éœ€è¦å¢åŠ æœåŠ¡å™¨èµ„æºæˆ–ä¼˜åŒ–æœåŠ¡å™¨é…ç½®æ¥é™ä½è´Ÿè½½ã€‚</p>',12),Es=n("p",null,"å‚è€ƒï¼š",-1),Ts={href:"https://stackoverflow.com/questions/21033104/close-wait-state-in-server",target:"_blank",rel:"noopener noreferrer"},Is={href:"https://superuser.com/questions/173535/what-are-close-wait-and-time-wait-states",target:"_blank",rel:"noopener noreferrer"},js={href:"https://learn.microsoft.com/en-us/answers/questions/337518/tcp-connections-locked-in-close-wait-status-with-i",target:"_blank",rel:"noopener noreferrer"},Os={href:"https://www.cnblogs.com/grey-wolf/p/10936657.html",target:"_blank",rel:"noopener noreferrer"},Bs={href:"https://juejin.cn/post/6844903734300901390#heading-6",target:"_blank",rel:"noopener noreferrer"},Ns={href:"https://www.thegeekdiary.com/high-number-of-connections-is-close_wait-state-in-netstat-command-output/",target:"_blank",rel:"noopener noreferrer"},Ds=t('<h3 id="httpåè®®çš„æŠ¥æ–‡çš„æ ¼å¼æœ‰äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#httpåè®®çš„æŠ¥æ–‡çš„æ ¼å¼æœ‰äº†è§£å—" aria-hidden="true">#</a> httpåè®®çš„æŠ¥æ–‡çš„æ ¼å¼æœ‰äº†è§£å—ï¼Ÿ</h3><p><img src="'+b+'" alt="" loading="lazy"> HTTP çš„è¯·æ±‚æŠ¥æ–‡åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><p>è¯·æ±‚è¡Œã€é¦–éƒ¨è¡Œã€å®ä½“ä¸»ä½“ã€‚</p><h3 id="http2äº†è§£å—-2023å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#http2äº†è§£å—-2023å°çº¢ä¹¦" aria-hidden="true">#</a> http2äº†è§£å—ï¼Ÿï¼ˆ2023å°çº¢ä¹¦ï¼‰</h3><p>HTTP/2æ˜¯å¯¹ä¸‡ç»´ç½‘ä½¿ç”¨çš„HTTPç½‘ç»œåè®®çš„é‡å¤§ä¿®è®¢ã€‚å®ƒæºè‡ªè¾ƒæ—©çš„å®éªŒæ€§SPDYåè®®ï¼Œæœ€åˆç”±Googleå¼€å‘ã€‚HTTP/2ä¸æ˜¯å¯¹åè®®çš„å½»åº•é‡å†™ï¼›HTTPæ–¹æ³•ã€çŠ¶æ€ç å’Œè¯­ä¹‰å­¦ä¸HTTP/1. xç›¸åŒï¼ˆå¯èƒ½æœ‰ä¸€äº›å°çš„è¡¥å……ï¼‰æ¥è¡¨ç¤ºåè®®ã€‚æ–°çš„äºŒè¿›åˆ¶æˆå¸§æœºåˆ¶çš„å¼•å…¥æ”¹å˜äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ•°æ®äº¤æ¢çš„æ–¹å¼ã€‚è¦æè¿°è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥ç†Ÿæ‚‰HTTP/2æœ¯è¯­ -- <code>Stream</code>ï¼šå·²å»ºç«‹è¿æ¥å†…çš„åŒå‘å­—èŠ‚æµï¼Œå®ƒå¯èƒ½æºå¸¦ä¸€æ¡æˆ–å¤šæ¡æ¶ˆæ¯ã€‚</p><p>æ‚¨è¿˜å¯ä»¥æåˆ°HTTP/2æ—¨åœ¨æé«˜ç½‘ç«™æ€§èƒ½å¹¶å‡å°‘å»¶è¿Ÿã€‚å®ƒé€šè¿‡å¼•å…¥å‡ ä¸ªæ–°åŠŸèƒ½æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚æœåŠ¡å™¨æ¨é€ã€æ ‡å¤´å‹ç¼©å’Œå¤šè·¯å¤ç”¨ã€‚</p>',6),Js=n("p",null,"å‚è€ƒï¼š",-1),Hs={href:"https://http2.github.io/",target:"_blank",rel:"noopener noreferrer"},zs={href:"https://en.wikipedia.org/wiki/HTTP/2",target:"_blank",rel:"noopener noreferrer"},Fs={href:"https://web.dev/performance-http2/",target:"_blank",rel:"noopener noreferrer"},Us={href:"https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference",target:"_blank",rel:"noopener noreferrer"},Gs=t('<h3 id="å»ºç«‹-tcp-è¿æ¥å-å®¢æˆ·ç«¯ä¸‹çº¿äº†ä¼šå‘ç”Ÿä»€ä¹ˆ-2023-ç™¾åº¦" tabindex="-1"><a class="header-anchor" href="#å»ºç«‹-tcp-è¿æ¥å-å®¢æˆ·ç«¯ä¸‹çº¿äº†ä¼šå‘ç”Ÿä»€ä¹ˆ-2023-ç™¾åº¦" aria-hidden="true">#</a> å»ºç«‹ TCP è¿æ¥åï¼Œå®¢æˆ·ç«¯ä¸‹çº¿äº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼ˆ2023 ç™¾åº¦ï¼‰</h3><p>TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰è¿æ¥å»ºç«‹åï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸‹çº¿æˆ–æ–­å¼€ï¼Œé‚£ä¹ˆè¿™ä¸ªTCPè¿æ¥å°±ä¼šè¢«ä¸­æ–­ã€‚</p><p>åœ¨TCPåè®®ä¸­ï¼Œä»»ä½•ä¸€æ–¹ï¼ˆå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ï¼‰éƒ½å¯ä»¥ä¸»åŠ¨æ–­å¼€è¿æ¥ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ–­å¼€è¿æ¥ä¼šé€šè¿‡ä¸€ä¸ªå››æ­¥æ¡æ‰‹è¿‡ç¨‹ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰æ¥å®Œæˆã€‚è¿™ä¸ªè¿‡ç¨‹ä¿è¯äº†åŒæ–¹éƒ½èƒ½æ¸…æ¥šåœ°äº†è§£è¿æ¥å·²ç»è¢«å…³é—­ï¼Œè€Œä¸ä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚</p><p>ç„¶è€Œï¼Œå¦‚æœå®¢æˆ·ç«¯çªç„¶ä¸‹çº¿ï¼ˆæ¯”å¦‚å› ä¸ºç½‘ç»œä¸­æ–­ã€ç”µæºåˆ‡æ–­ç­‰åŸå› ï¼‰ï¼ŒæœåŠ¡å™¨å¯èƒ½å¹¶ä¸ä¼šç«‹åˆ»çŸ¥é“è¿™ä¸ªæƒ…å†µã€‚è¿™æ˜¯å› ä¸ºTCPåè®®çš„è®¾è®¡ä½¿å¾—å®ƒèƒ½å¤Ÿåœ¨çŸ­æš‚çš„ç½‘ç»œä¸­æ–­åæ¢å¤è¿æ¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœæœåŠ¡å™¨å°è¯•å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œè¿™äº›æ•°æ®å¯èƒ½ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°è¾¾åˆ°ä¸€å®šçš„é‡è¯•æ¬¡æ•°æˆ–è€…è¶…æ—¶ï¼ŒæœåŠ¡å™¨æ‰ä¼šè®¤ä¸ºè¿æ¥å·²ç»æ–­å¼€ã€‚</p><p>åœ¨å®¢æˆ·ç«¯é‡æ–°ä¸Šçº¿åï¼Œå¦‚æœå®ƒå°è¯•å†æ¬¡å»ºç«‹ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œé‚£ä¹ˆéœ€è¦å®Œå…¨é‡æ–°è¿›è¡ŒTCPçš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹æ¥å»ºç«‹æ–°çš„è¿æ¥ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTCPåè®®æä¾›çš„æ˜¯ä¸€ç§â€œå¯é â€çš„ä¼ è¾“æœåŠ¡ã€‚å³ä½¿åœ¨ç½‘ç»œç¯å¢ƒä¸ç¨³å®šã€ä¸¢åŒ…ç‡é«˜çš„æƒ…å†µä¸‹ï¼ŒTCPä¹Ÿèƒ½ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œæœ‰åºæ€§ã€‚ä½†æ˜¯ï¼Œè¿™ç§å¯é æ€§æ˜¯é€šè¿‡å¤æ‚çš„é”™è¯¯æ£€æµ‹å’Œä¿®å¤æœºåˆ¶ã€ä»¥åŠé‡ä¼ æœºåˆ¶æ¥å®ç°çš„ï¼Œè¿™ä¹Ÿä½¿å¾—TCPåœ¨å¤„ç†æ–­å¼€è¿æ¥å’Œé‡è¿çš„æƒ…å†µæ—¶ç›¸å¯¹å¤æ‚ã€‚</p><h3 id="è®²è®²-arp-icmp-ä»€ä¹ˆæ—¶å€™ä¸ç”¨æŸ¥-arp-è¡¨-icmp-æ˜¯å“ªä¸ªè·¯ç”±å™¨å›å¤çš„-ä»€ä¹ˆåœ°æ–¹ç”¨äº†-icmp-traceroute-æ€ä¹ˆåšçš„-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#è®²è®²-arp-icmp-ä»€ä¹ˆæ—¶å€™ä¸ç”¨æŸ¥-arp-è¡¨-icmp-æ˜¯å“ªä¸ªè·¯ç”±å™¨å›å¤çš„-ä»€ä¹ˆåœ°æ–¹ç”¨äº†-icmp-traceroute-æ€ä¹ˆåšçš„-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> è®²è®² ARPï¼ŒICMP? ä»€ä¹ˆæ—¶å€™ä¸ç”¨æŸ¥ ARP è¡¨? ICMP æ˜¯å“ªä¸ªè·¯ç”±å™¨å›å¤çš„ï¼Œä»€ä¹ˆåœ°æ–¹ç”¨äº† icmpï¼Œtraceroute æ€ä¹ˆåšçš„? ï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><p><strong>ARPï¼ˆåœ°å€è§£æåè®®ï¼‰</strong> å’Œ<strong>ICMPï¼ˆå…¬ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰</strong> éƒ½æ˜¯è®¡ç®—æœºç½‘ç»œä¸­ä½¿ç”¨çš„åè®®ï¼ŒARPç”¨äºå°†ç½‘ç»œåœ°å€ï¼ˆå¦‚IPåœ°å€ï¼‰æ˜ å°„åˆ°ç‰©ç†åœ°å€ï¼ˆå¦‚MACåœ°å€ï¼‰ï¼Œè€ŒICMPç”¨äºé”™è¯¯æŠ¥å‘Šå’Œè¯Šæ–­ç›®çš„ï¼Œpingå‘½ä»¤ä¹Ÿä½¿ç”¨ICMPæ¥æµ‹è¯•ä¸¤ä¸ªè®¾å¤‡ä¹‹é—´çš„ç½‘ç»œè¿é€šæ€§ã€‚</p><blockquote><p>åœ°å€è§£æåè®®ï¼ˆè‹±è¯­ï¼šAddress Resolution Protocolï¼Œç¼©å†™ï¼šARPï¼‰æ˜¯ä¸€ä¸ªé€šè¿‡è§£æç½‘ç»œå±‚åœ°å€æ¥æ‰¾å¯»æ•°æ®é“¾è·¯å±‚åœ°å€çš„ç½‘ç»œä¼ è¾“åè®®ï¼Œå®ƒåœ¨IPv4ä¸­æå…¶é‡è¦ã€‚ARPæœ€åˆåœ¨1982å¹´çš„RFC 826ï¼ˆå¾æ±‚æ„è§ç¨¿ï¼‰ä¸­æå‡ºå¹¶çº³å…¥äº’è”ç½‘æ ‡å‡†STD 37ã€‚ARPä¹Ÿå¯èƒ½æŒ‡æ˜¯åœ¨å¤šæ•°æ“ä½œç³»ç»Ÿä¸­ç®¡ç†å…¶ç›¸å…³åœ°å€çš„ä¸€ä¸ªè¿›ç¨‹ã€‚</p></blockquote><blockquote><p>äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼ˆè‹±è¯­ï¼šInternet Control Message Protocolï¼Œç¼©å†™ï¼šICMPï¼‰æ˜¯äº’è”ç½‘åè®®æ—çš„æ ¸å¿ƒåè®®ä¹‹ä¸€ã€‚å®ƒç”¨äºç½‘é™…åè®®ï¼ˆIPï¼‰ä¸­å‘é€æ§åˆ¶æ¶ˆæ¯ï¼Œæä¾›å¯èƒ½å‘ç”Ÿåœ¨é€šä¿¡ç¯å¢ƒä¸­çš„å„ç§é—®é¢˜åé¦ˆã€‚é€šè¿‡è¿™äº›ä¿¡æ¯ï¼Œä½¿ç®¡ç†è€…å¯ä»¥å¯¹æ‰€å‘ç”Ÿçš„é—®é¢˜ä½œå‡ºè¯Šæ–­ï¼Œç„¶åé‡‡å–é€‚å½“çš„æªæ–½è§£å†³ã€‚</p></blockquote><hr><p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œé€šå¸¸åœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹ä¸éœ€è¦æŸ¥ARPï¼ˆåœ°å€è§£æåè®®ï¼‰è¡¨ï¼š</p><ol><li>è·¨ç½‘æ®µé€šä¿¡ï¼šå½“é€šä¿¡åŒæ–¹ä½äºä¸åŒçš„ç½‘ç»œå­ç½‘ä¸­æ—¶ï¼ŒARPè¡¨ä¸èµ·ä½œç”¨ã€‚æ­¤æ—¶ï¼Œæ•°æ®åŒ…éœ€è¦ç»è¿‡è·¯ç”±å™¨è¿›è¡Œè½¬å‘ï¼Œé€šä¿¡åŒæ–¹åªéœ€æŸ¥æ‰¾é»˜è®¤ç½‘å…³çš„MACåœ°å€ï¼Œè€Œä¸éœ€è¦æŸ¥æ‰¾å¯¹æ–¹çš„IPåœ°å€å’ŒMACåœ°å€çš„æ˜ å°„å…³ç³»ã€‚</li><li>éä»¥å¤ªç½‘é“¾è·¯å±‚åè®®ï¼šARPä¸»è¦ç”¨äºè§£æIPv4åœ°å€å’Œä»¥å¤ªç½‘MACåœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å¯¹äºå…¶ä»–é“¾è·¯å±‚åè®®ï¼ˆå¦‚å¸§ä¸­ç»§ã€ATMç­‰ï¼‰æˆ–å…¶ä»–ç½‘ç»œå±‚åè®®ï¼ˆå¦‚IPv6ï¼‰ï¼ŒARPè¡¨å¯èƒ½æ— æ³•ä½¿ç”¨æˆ–ä½¿ç”¨ä¸åŒçš„æœºåˆ¶ã€‚ä¾‹å¦‚ï¼ŒIPv6ä½¿ç”¨é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰è€ŒéARPã€‚</li><li>å·²çŸ¥ç›®æ ‡MACåœ°å€ï¼šåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå‘é€æ–¹å¯èƒ½å·²çŸ¥ç›®æ ‡è®¾å¤‡çš„MACåœ°å€ï¼Œæ­¤æ—¶æ— éœ€æŸ¥æ‰¾ARPè¡¨ã€‚ä¾‹å¦‚ï¼ŒæŸäº›ç‰¹å®šçš„ç½‘ç»œç®¡ç†æˆ–ç›‘æ§åº”ç”¨å¯èƒ½ç›´æ¥å¤„ç†MACåœ°å€ã€‚</li><li>å¹¿æ’­ä¸å¤šæ’­ï¼šå¯¹äºå¹¿æ’­ï¼ˆä¾‹å¦‚IPv4çš„å…¨å±€å¹¿æ’­åœ°å€255.255.255.255ï¼‰æˆ–å¤šæ’­ï¼ˆä¾‹å¦‚IPv6çš„å¤šæ’­åœ°å€ï¼‰ï¼Œæ•°æ®åŒ…å°†å‘é€ç»™ä¸€ç»„è®¾å¤‡è€Œéå•ä¸ªç›®æ ‡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå‘é€æ–¹æ— éœ€æŸ¥æ‰¾ARPè¡¨ï¼Œè€Œæ˜¯å°†æ•°æ®åŒ…å‘é€åˆ°ä¸€ä¸ªç‰¹å®šçš„å¹¿æ’­æˆ–å¤šæ’­MACåœ°å€ä¸Šã€‚</li></ol><p>æ€»ç»“ï¼šåœ¨è·¨ç½‘ç»œå­ç½‘é€šä¿¡ã€ä½¿ç”¨éä»¥å¤ªç½‘é“¾è·¯å±‚åè®®ã€å·²çŸ¥ç›®æ ‡MACåœ°å€ã€æˆ–è¿›è¡Œå¹¿æ’­å’Œå¤šæ’­é€šä¿¡çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸ä¸éœ€è¦æŸ¥æ‰¾ARPè¡¨ã€‚</p><hr><p>å½“æ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¦‚æ— æ³•åˆ°è¾¾ç›®çš„åœ°æˆ–è¶…æ—¶ç­‰ï¼Œé€šå¸¸æ˜¯è·¯ç”±å™¨æˆ–ç›®æ ‡ä¸»æœºå›å¤ICMPæŠ¥æ–‡ã€‚ä¾‹å¦‚ï¼Œå½“æ•°æ®åŒ…æ— æ³•åˆ°è¾¾ç›®æ ‡åœ°å€æ—¶ï¼Œè·¯ç”±å™¨å¯èƒ½ä¼šå‘é€ICMPâ€œç›®æ ‡ä¸å¯è¾¾â€ï¼ˆDestination Unreachableï¼‰æŠ¥æ–‡ï¼›å½“æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­ä¼ è¾“æ—¶é—´è¿‡é•¿æ—¶ï¼Œè·¯ç”±å™¨å¯èƒ½ä¼šå‘é€ICMPâ€œè¶…æ—¶â€ï¼ˆTime Exceededï¼‰æŠ¥æ–‡ã€‚</p><p><strong>traceroute</strong>ï¼ˆWindowsç³»ç»Ÿä¸­çš„tracertï¼‰æ˜¯ä¸€ä¸ªç½‘ç»œè¯Šæ–­å·¥å…·ï¼Œç”¨äºæ˜¾ç¤ºæ•°æ®åŒ…ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºæ‰€ç»è¿‡çš„è·¯ç”±å™¨ã€‚tracerouteçš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><ol><li>å‘é€æ–¹ç”Ÿæˆä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®åŒ…ï¼ˆé€šå¸¸æ˜¯UDPæˆ–ICMP ECHOè¯·æ±‚æŠ¥æ–‡ï¼‰ï¼Œå¹¶å°†å…¶ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼ŒTime to Liveï¼‰è®¾ç½®ä¸º1ã€‚</li><li>å½“ç¬¬ä¸€ä¸ªè·¯ç”±å™¨æ”¶åˆ°è¯¥æ•°æ®åŒ…æ—¶ï¼Œå®ƒä¼šå°†TTLå‡1ã€‚ç”±äºTTLå˜ä¸º0ï¼Œè·¯ç”±å™¨ä¼šä¸¢å¼ƒè¯¥æ•°æ®åŒ…ï¼Œå¹¶å‘å‘é€æ–¹å‘é€ä¸€ä¸ªICMPâ€œè¶…æ—¶â€ï¼ˆTime Exceededï¼‰æŠ¥æ–‡ã€‚</li><li>å‘é€æ–¹æ”¶åˆ°ICMPâ€œè¶…æ—¶â€æŠ¥æ–‡åï¼Œè®°å½•æŠ¥æ–‡ä¸­çš„è·¯ç”±å™¨åœ°å€ï¼Œç„¶åå†ç”Ÿæˆä¸€ä¸ªç›¸åŒçš„æ•°æ®åŒ…ï¼Œä½†å°†TTLè®¾ç½®ä¸º2ã€‚</li><li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œé€æ­¥å¢åŠ TTLå€¼ï¼Œç›´åˆ°å‘é€æ–¹æ”¶åˆ°ç›®æ ‡ä¸»æœºçš„ICMPâ€œç«¯å£ä¸å¯è¾¾â€ï¼ˆPort Unreachableï¼‰æŠ¥æ–‡ï¼ˆå¯¹äºUDPæ•°æ®åŒ…ï¼‰æˆ–ICMP ECHOå“åº”ï¼ˆå¯¹äºICMP ECHOè¯·æ±‚æŠ¥æ–‡ï¼‰ã€‚</li><li>é€šè¿‡åˆ†ææ”¶åˆ°çš„ICMPæŠ¥æ–‡ï¼Œtracerouteå¯ä»¥æ˜¾ç¤ºæ•°æ®åŒ…ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºæ‰€ç»è¿‡çš„æ‰€æœ‰è·¯ç”±å™¨çš„åœ°å€ï¼Œä»¥åŠæ•°æ®åŒ…åœ¨æ¯ä¸ªè·¯ç”±å™¨ä¸Šçš„å¾€è¿”æ—¶é—´ï¼ˆRTTï¼ŒRound-Trip Timeï¼‰ã€‚</li></ol>',18),Vs=n("p",null,"å‚è€ƒï¼š",-1),Xs={href:"https://www.linux.com/news/ping-icmp-vs-arp/",target:"_blank",rel:"noopener noreferrer"},Ws={href:"https://nmap.org/book/host-discovery-techniques.html",target:"_blank",rel:"noopener noreferrer"},Ks={href:"https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%8E%A7%E5%88%B6%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE",target:"_blank",rel:"noopener noreferrer"},Qs={href:"https://zh.wikipedia.org/wiki/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE",target:"_blank",rel:"noopener noreferrer"},Ys={href:"https://www.fortinet.com/resources/cyberglossary/what-is-arp",target:"_blank",rel:"noopener noreferrer"},Zs={href:"https://www.tutorialspoint.com/arp-table",target:"_blank",rel:"noopener noreferrer"},$s={href:"https://superuser.com/questions/894557/is-there-a-way-to-get-arp-to-list-devices-on-all-subnets-of-a-network",target:"_blank",rel:"noopener noreferrer"},na={href:"https://obkio.com/blog/traceroutes-what-are-they-and-how-do-they-work/",target:"_blank",rel:"noopener noreferrer"},sa={href:"https://www.howtogeek.com/134132/how-to-use-traceroute-to-identify-network-problems/",target:"_blank",rel:"noopener noreferrer"},aa={href:"https://www.fortinet.com/resources/cyberglossary/traceroutes",target:"_blank",rel:"noopener noreferrer"},ea=t('<h3 id="å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥-æœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†-2023-å­—èŠ‚æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥-æœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†-2023-å­—èŠ‚æå‰æ‰¹" aria-hidden="true">#</a> å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†ï¼Ÿï¼ˆ2023 å­—èŠ‚æå‰æ‰¹ï¼‰</h3><p>æœåŠ¡å™¨ç«¯å¤„ç†å¤§é‡å¹¶å‘è¿æ¥çš„æœºåˆ¶ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><strong>å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹</strong>ï¼šæ¯å½“æ¥æ”¶åˆ°æ–°çš„å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨éƒ½ä¼šåˆ†é…ä¸€ä¸ªæ–°çš„è¿›ç¨‹æˆ–çº¿ç¨‹å»å¤„ç†è¿™ä¸ªè¿æ¥ã€‚è¿™å¯ä»¥ç¡®ä¿æœåŠ¡å™¨èƒ½å¤ŸåŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿æ¥æ•°å¤ªå¤šï¼Œè¿‡å¤šçš„çº¿ç¨‹æˆ–è¿›ç¨‹å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºçš„è¿‡åº¦ä½¿ç”¨ï¼Œå½±å“æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</li><li><strong>äº‹ä»¶é©±åŠ¨ï¼ˆEvent-drivenï¼‰æˆ–å¼‚æ­¥I/Oï¼ˆAsync I/Oï¼‰</strong>ï¼šåœ¨è¿™ç§æ¨¡å‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸€æ¬¡æ¥æ”¶å¤šä¸ªè¿æ¥è¯·æ±‚ï¼Œç„¶åé€šè¿‡äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰å¼‚æ­¥åœ°å¤„ç†è¿™äº›è¿æ¥ã€‚è¿™æ ·å¯ä»¥é¿å…ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºæ–°çš„çº¿ç¨‹æˆ–è¿›ç¨‹ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li><li><strong>è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰</strong>ï¼šå¦‚æœæœåŠ¡å™¨æ— æ³•å¤„ç†æ‰€æœ‰çš„å¹¶å‘è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨å°†è¿æ¥è¯·æ±‚åˆ†é…åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šã€‚è¿™å¯ä»¥åˆ†æ•£æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œæé«˜æ•´ä½“çš„å¤„ç†èƒ½åŠ›ã€‚</li></ol><blockquote><p>è¿™é‡Œè¦åŒºåˆ†å‡ºç°äº†å¤§é‡TIME_WAITæˆ–è€…CLOSE_WAIT</p><p>å¤§é‡çš„ <code>TIME_WAIT</code> æˆ– <code>CLOSE_WAIT</code>ï¼Œå®ƒä»¬æ˜¯ TCP è¿æ¥å…³é—­è¿‡ç¨‹ä¸­çš„çŠ¶æ€ã€‚<code>TIME_WAIT</code> è¡¨ç¤ºè¿æ¥å·²è¢«æœ¬åœ°å…³é—­ï¼Œæ­£åœ¨ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿è¿œç¨‹TCPæ¥æ”¶åˆ°è¿æ¥ç»ˆæ­¢çš„é€šçŸ¥ã€‚<code>CLOSE_WAIT</code> åˆ™è¡¨ç¤ºè¿œç¨‹TCPè¿æ¥å…³é—­æˆ–æ¥æ”¶åˆ°äº†è¿æ¥ç»ˆæ­¢çš„é€šçŸ¥ã€‚</p></blockquote><h3 id="http1-1-2-0åŒºåˆ«-2023-ç™¾åº¦æå‰æ‰¹-2023-å­—èŠ‚å®¢æˆ·ç«¯" tabindex="-1"><a class="header-anchor" href="#http1-1-2-0åŒºåˆ«-2023-ç™¾åº¦æå‰æ‰¹-2023-å­—èŠ‚å®¢æˆ·ç«¯" aria-hidden="true">#</a> HTTP1.1ï¼Œ 2.0åŒºåˆ«ï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼Œ2023 å­—èŠ‚å®¢æˆ·ç«¯ï¼‰</h3><p>HTTP/1.1 å’Œ HTTP/2 æ˜¯ä¸¤ä¸ªä¸åŒçš„åè®®ç‰ˆæœ¬ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬ä¹‹é—´çš„ä¸€äº›ä¸»è¦åŒºåˆ«ï¼š</p><ol><li><strong>ä¼ è¾“æ–¹å¼</strong>ï¼šHTTP/1.1 ä½¿ç”¨åºåˆ—åŒ–çš„æ–‡æœ¬æ•°æ®æ¥ä¼ è¾“è¯·æ±‚å’Œå“åº”ï¼Œè€Œ HTTP/2 ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®å¸§æ¥ä¼ è¾“è¯·æ±‚å’Œå“åº”ã€‚è¿™ç§äºŒè¿›åˆ¶æ ¼å¼èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°ä¼ è¾“æ•°æ®ï¼Œå‡å°‘äº†æ•°æ®ä¼ è¾“çš„å¤§å°å’Œå»¶è¿Ÿã€‚</li><li><strong>å¤šè·¯å¤ç”¨</strong>ï¼šHTTP/1.1 åœ¨ä¸€ä¸ªè¿æ¥ä¸Šåªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè€Œ HTTP/2 æ”¯æŒåœ¨åŒä¸€ä¸ªè¿æ¥ä¸ŠåŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚å’Œå“åº”ã€‚è¿™ç§å¤šè·¯å¤ç”¨çš„ç‰¹æ€§å¯ä»¥å‡å°‘è¿æ¥å»ºç«‹å’Œå…³é—­çš„å¼€é”€ï¼Œæé«˜äº†æ€§èƒ½å’Œæ•ˆç‡ã€‚</li><li><strong>å¤´éƒ¨å‹ç¼©</strong>ï¼šHTTP/2 å¼•å…¥äº†å¤´éƒ¨å‹ç¼©æœºåˆ¶ï¼Œä½¿ç”¨ HPACK ç®—æ³•å¯¹è¯·æ±‚å’Œå“åº”çš„å¤´éƒ¨è¿›è¡Œå‹ç¼©ã€‚è¿™ç§å‹ç¼©æœºåˆ¶å¯ä»¥å‡å°‘æ•°æ®ä¼ è¾“çš„å¤§å°ï¼Œæé«˜ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li><li><strong>æœåŠ¡å™¨æ¨é€</strong>ï¼šHTTP/2 æ”¯æŒæœåŠ¡å™¨ä¸»åŠ¨æ¨é€èµ„æºç»™å®¢æˆ·ç«¯ï¼Œä»¥æé«˜é¡µé¢åŠ è½½æ€§èƒ½ã€‚æœåŠ¡å™¨å¯ä»¥åœ¨å‘é€è¯·æ±‚çš„åŒæ—¶ï¼Œå°†ä¸€äº›å¯èƒ½éœ€è¦çš„èµ„æºä¸»åŠ¨æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯å‘é€é¢å¤–è¯·æ±‚çš„éœ€è¦ã€‚</li><li><strong>æµæ§åˆ¶</strong>ï¼šHTTP/2 å¼•å…¥äº†æµæ§åˆ¶æœºåˆ¶ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ§åˆ¶æ•°æ®æµçš„é€Ÿç‡ï¼Œä»¥é¿å…æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ‹¥å¡å’Œæº¢å‡ºã€‚ æ€»ä½“è€Œè¨€ï¼ŒHTTP/2 ç›¸å¯¹äº HTTP/1.1 æ¥è¯´ï¼Œåœ¨æ€§èƒ½å’Œæ•ˆç‡ä¸Šæœ‰äº†å¾ˆå¤§çš„æå‡ã€‚å®ƒçš„å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ã€æœåŠ¡å™¨æ¨é€ç­‰ç‰¹æ€§ä½¿å¾—ç½‘ç»œä¼ è¾“æ›´åŠ é«˜æ•ˆï¼Œèƒ½å¤Ÿæ›´å¿«åœ°åŠ è½½ç½‘é¡µå’Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</li><li><strong>æµé‡æ§åˆ¶</strong>ï¼šHTTP/1.1 ä½¿ç”¨ TCP å±‚çš„æµé‡æ§åˆ¶æœºåˆ¶ï¼Œè€Œ HTTP/2 åœ¨åº”ç”¨å±‚å®ç°äº†è‡ªå·±çš„æµé‡æ§åˆ¶æœºåˆ¶ã€‚è¿™ä½¿å¾— HTTP/2 å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æ•°æ®çš„ä¼ è¾“é€Ÿç‡ï¼Œé¿å…ç¼“å†²åŒºæº¢å‡ºçš„é—®é¢˜ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼ŒHTTP1.1å’ŒHTTP2.0æ˜¯ç”¨äºåœ¨webæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ è¾“æ•°æ®çš„åè®®ã€‚HTTP2.0æ¯”HTTP1.1æ›´å¿«ã€æ›´å¯é ï¼Œå› ä¸ºå®ƒä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç ã€å¤šè·¯å¤ç”¨å’Œå¹¶å‘ã€‚HTTP1.1ä¸ºæ¯ä¸ªTCPè¿æ¥åŠ è½½ä¸€ä¸ªè¯·æ±‚ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œå»¶è¿Ÿå’Œé¡µé¢åŠ è½½é€Ÿåº¦å‡æ…¢ã€‚HTTP2.0å¯ä»¥å¹¶è¡Œå¤„ç†å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè¿™å¯ä»¥æé«˜webæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚HTTP2.0ä¸HTTP1.1è¯­ä¹‰ï¼ˆå¦‚æ–¹æ³•å’Œå¤´ï¼‰å…¼å®¹ï¼Œå› æ­¤webåº”ç”¨ç¨‹åºä»ç„¶å¯ä»¥ä½¿ç”¨æ–°åè®®æ­£å¸¸è¿è¡Œã€‚</p>',8),ta=n("p",null,"å‚è€ƒï¼š",-1),oa={href:"https://www.cloudflare.com/zh-cn/learning/performance/http2-vs-http1.1/",target:"_blank",rel:"noopener noreferrer"},pa={href:"https://www.baeldung.com/cs/http-versions",target:"_blank",rel:"noopener noreferrer"},la={href:"https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference",target:"_blank",rel:"noopener noreferrer"},ia=t('<h3 id="tcp-æ˜¯æ€ä¹ˆå®ç°å¯é ä¼ è¾“çš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#tcp-æ˜¯æ€ä¹ˆå®ç°å¯é ä¼ è¾“çš„-2023-å­—èŠ‚" aria-hidden="true">#</a> tcp æ˜¯æ€ä¹ˆå®ç°å¯é ä¼ è¾“çš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><ul><li>åºåˆ—å·ä¸ç¡®è®¤åº”ç­”ï¼šTCPå°†æ¯ä¸ªå‘é€çš„æ•°æ®åŒ…è¿›è¡Œç¼–å·ï¼ˆåºåˆ—å·ï¼‰ï¼Œæ¥æ”¶æ–¹é€šè¿‡å‘é€ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰æ¥å‘ŠçŸ¥å‘é€æ–¹å·²æˆåŠŸæ¥æ”¶åˆ°æ•°æ®ã€‚å¦‚æœå‘é€æ–¹åœ¨ä¸€å®šæ—¶é—´å†…æœªæ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œä¼šè¿›è¡Œè¶…æ—¶é‡ä¼ ã€‚</li><li>æ•°æ®æ ¡éªŒï¼šTCPä½¿ç”¨æ ¡éªŒå’Œæ¥éªŒè¯æ•°æ®çš„å®Œæ•´æ€§ã€‚æ¥æ”¶æ–¹ä¼šè®¡ç®—æ¥æ”¶åˆ°çš„æ•°æ®çš„æ ¡éªŒå’Œï¼Œå¹¶ä¸å‘é€æ–¹å‘é€çš„æ ¡éªŒå’Œè¿›è¡Œæ¯”è¾ƒï¼Œä»¥æ£€æµ‹æ•°æ®æ˜¯å¦åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ã€‚</li><li>çª—å£æ§åˆ¶ï¼šTCPä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶æ¥æ§åˆ¶å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´çš„æ•°æ®æµé‡ã€‚å‘é€æ–¹æ ¹æ®æ¥æ”¶æ–¹çš„å¤„ç†èƒ½åŠ›å’Œç½‘ç»œçŠ¶å†µæ¥è°ƒæ•´å‘é€çš„æ•°æ®é‡ï¼Œæ¥æ”¶æ–¹åˆ™é€šè¿‡çª—å£å¤§å°æ¥å‘ŠçŸ¥å‘é€æ–¹å¯ä»¥æ¥æ”¶çš„æ•°æ®é‡ã€‚</li><li>é‡ä¼ æœºåˆ¶ï¼šå¦‚æœå‘é€æ–¹æœªæ”¶åˆ°ç¡®è®¤åº”ç­”æˆ–æ¥æ”¶æ–¹æ£€æµ‹åˆ°æ•°æ®é”™è¯¯ï¼ŒTCPä¼šè¿›è¡Œé‡ä¼ ã€‚å‘é€æ–¹ä¼šæ ¹æ®è¶…æ—¶æ—¶é—´æˆ–æ¥æ”¶æ–¹çš„å†—ä½™ç¡®è®¤æ¥è§¦å‘é‡ä¼ ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å¯é ä¼ è¾“ã€‚</li><li>æ‹¥å¡æ§åˆ¶ï¼šTCPä½¿ç”¨æ‹¥å¡æ§åˆ¶ç®—æ³•æ¥é¿å…ç½‘ç»œæ‹¥å¡ã€‚é€šè¿‡åŠ¨æ€è°ƒæ•´å‘é€é€Ÿç‡å’Œçª—å£å¤§å°ï¼ŒTCPå¯ä»¥æ ¹æ®ç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦æ¥è¿›è¡Œé€‚å½“çš„è°ƒæ•´ï¼Œä»¥æé«˜ç½‘ç»œçš„åˆ©ç”¨ç‡å’Œç¨³å®šæ€§ã€‚</li></ul><h3 id="ipæ•°æ®æŠ¥çš„æŠ¥å¤´æœ‰å“ªäº›å­—æ®µ-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#ipæ•°æ®æŠ¥çš„æŠ¥å¤´æœ‰å“ªäº›å­—æ®µ-2023-å­—èŠ‚" aria-hidden="true">#</a> IPæ•°æ®æŠ¥çš„æŠ¥å¤´æœ‰å“ªäº›å­—æ®µï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><figure><img src="'+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="ip-æŠ¥æ–‡çš„ttlæ˜¯ä»€ä¹ˆæ„æ€-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#ip-æŠ¥æ–‡çš„ttlæ˜¯ä»€ä¹ˆæ„æ€-2023-å­—èŠ‚" aria-hidden="true">#</a> IP æŠ¥æ–‡çš„TTLæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><p>æŒ‡å®šæ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­å¯ä»¥ç»è¿‡çš„æœ€å¤§è·¯ç”±å™¨è·³æ•°ã€‚æ¯å½“æ•°æ®æŠ¥ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨æ—¶ï¼Œè¯¥å­—æ®µçš„å€¼ä¼šå‡å°‘1ã€‚å½“TTLçš„å€¼ä¸º0æ—¶ï¼Œè·¯ç”±å™¨å°†ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥å¹¶å‘é€ICMPçš„æ—¶é—´è¶…è¿‡æ¶ˆæ¯ç»™æºä¸»æœºã€‚</p><p>TTLçš„ä¸»è¦ç›®çš„æ˜¯é˜²æ­¢æ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯ï¼Œé¿å…ç”±äºè·¯ç”±ç¯è·¯æˆ–å…¶ä»–é—®é¢˜å¯¼è‡´çš„æ•°æ®æŠ¥æ— æ³•æ­£å¸¸åˆ°è¾¾ç›®çš„åœ°ã€‚é€šè¿‡é™åˆ¶æ•°æ®æŠ¥çš„æœ€å¤§è·³æ•°ï¼ŒTTLå¯ä»¥ç¡®ä¿æ•°æ®æŠ¥åœ¨æœ‰é™çš„æ—¶é—´å†…èƒ½å¤Ÿåˆ°è¾¾ç›®æ ‡ä¸»æœºæˆ–è¢«ä¸¢å¼ƒï¼Œä»¥é¿å…ç½‘ç»œèµ„æºçš„æµªè´¹å’Œå»¶è¿Ÿã€‚</p><h3 id="å¦‚ä½•å®ç°ä¸€ä¸ªå¯é udp-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®ç°ä¸€ä¸ªå¯é udp-2023-ç¾å›¢" aria-hidden="true">#</a> å¦‚ä½•å®ç°ä¸€ä¸ªå¯é UDPï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®ç°ä¸€ä¸ªå¯é çš„UDPï¼š</p><ol><li>åº”ç”¨å±‚åè®®è®¾è®¡ï¼šåœ¨åº”ç”¨å±‚ä¸Šè®¾è®¡ä¸€ä¸ªè‡ªå®šä¹‰çš„åè®®ï¼Œé€šè¿‡åœ¨UDPæ•°æ®åŒ…ä¸­æ·»åŠ åºåˆ—å·ã€æ ¡éªŒå’Œã€ç¡®è®¤åº”ç­”ç­‰å­—æ®µæ¥å®ç°å¯é æ€§ã€‚å‘é€æ–¹å‘é€æ•°æ®æ—¶ï¼Œéœ€è¦ç­‰å¾…æ¥æ”¶æ–¹çš„ç¡®è®¤åº”ç­”ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°ç¡®è®¤åº”ç­”æˆ–è€…æ”¶åˆ°äº†é”™è¯¯çš„ç¡®è®¤åº”ç­”ï¼Œå°±è¿›è¡Œé‡ä¼ ã€‚</li><li>è¶…æ—¶é‡ä¼ ï¼šå‘é€æ–¹åœ¨å‘é€æ•°æ®åè®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œå¦‚æœåœ¨è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œå°±è¿›è¡Œé‡ä¼ ã€‚æ¥æ”¶æ–¹åœ¨æ¥æ”¶åˆ°æ•°æ®åå‘é€ç¡®è®¤åº”ç­”ï¼Œå¦‚æœå‘é€æ–¹æ²¡æœ‰æ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œå°±è¿›è¡Œé‡ä¼ ã€‚</li><li>æ•°æ®æ ¡éªŒï¼šåœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œä¾‹å¦‚ä½¿ç”¨æ ¡éªŒå’Œç®—æ³•ï¼ˆå¦‚CRCï¼‰æ¥æ£€æµ‹æ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹ã€‚å¦‚æœæ ¡éªŒå¤±è´¥ï¼Œå°±è¿›è¡Œé‡ä¼ ã€‚</li><li>åº”ç­”æœºåˆ¶ï¼šå‘é€æ–¹å‘é€æ•°æ®åï¼Œæ¥æ”¶æ–¹éœ€è¦å‘é€ç¡®è®¤åº”ç­”æ¥å‘ŠçŸ¥å‘é€æ–¹æ•°æ®å·²ç»æ¥æ”¶æˆåŠŸã€‚å¦‚æœå‘é€æ–¹æ²¡æœ‰æ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œå°±è¿›è¡Œé‡ä¼ ã€‚</li><li>æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼šåœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´è¿›è¡Œæµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œä»¥é˜²æ­¢æ•°æ®åŒ…çš„ä¸¢å¤±å’Œç½‘ç»œæ‹¥å¡ã€‚</li></ol><h3 id="pingå‘½ä»¤æ˜¯ä»€ä¹ˆåè®®-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#pingå‘½ä»¤æ˜¯ä»€ä¹ˆåè®®-2023-ç¾å›¢" aria-hidden="true">#</a> pingå‘½ä»¤æ˜¯ä»€ä¹ˆåè®®ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>icmp åè®®</p><p>åŒä¸ªå­ç½‘ä¸‹çš„ä¸»æœº A å’Œ ä¸»æœº Bï¼Œä¸»æœº A æ‰§è¡Œ<code>ping</code> ä¸»æœº B åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å…¶é—´å‘é€äº†ä»€ä¹ˆï¼Ÿ</p><figure><img src="'+y+'" alt="ping-0" tabindex="0" loading="lazy"><figcaption>ping-0</figcaption></figure><p>ping å‘½ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œæºä¸»æœºé¦–å…ˆä¼šæ„å»ºä¸€ä¸ª <strong>ICMP å›é€è¯·æ±‚æ¶ˆæ¯</strong>æ•°æ®åŒ…ã€‚</p><p>ICMP æ•°æ®åŒ…å†…åŒ…å«å¤šä¸ªå­—æ®µï¼Œæœ€é‡è¦çš„æ˜¯ä¸¤ä¸ªï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯<strong>ç±»å‹</strong>ï¼Œå¯¹äºå›é€è¯·æ±‚æ¶ˆæ¯è€Œè¨€è¯¥å­—æ®µä¸º <code>8</code>ï¼›</li><li>å¦å¤–ä¸€ä¸ªæ˜¯<strong>åºå·</strong>ï¼Œä¸»è¦ç”¨äºåŒºåˆ†è¿ç»­ ping çš„æ—¶å€™å‘å‡ºçš„å¤šä¸ªæ•°æ®åŒ…ã€‚</li></ul><p>æ¯å‘å‡ºä¸€ä¸ªè¯·æ±‚æ•°æ®åŒ…ï¼Œåºå·ä¼šè‡ªåŠ¨åŠ  <code>1</code>ã€‚ä¸ºäº†èƒ½å¤Ÿè®¡ç®—å¾€è¿”æ—¶é—´ <code>RTT</code>ï¼Œå®ƒä¼šåœ¨æŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†æ’å…¥å‘é€æ—¶é—´ã€‚</p><figure><img src="'+w+'" alt="ping-1" tabindex="0" loading="lazy"><figcaption>ping-1</figcaption></figure><p>ç„¶åï¼Œç”± ICMP åè®®å°†è¿™ä¸ªæ•°æ®åŒ…è¿åŒåœ°å€ 192.168.1.2 ä¸€èµ·äº¤ç»™ IP å±‚ã€‚IP å±‚å°†ä»¥ 192.168.1.2 ä½œä¸º<strong>ç›®çš„åœ°å€</strong>ï¼Œæœ¬æœº IP åœ°å€ä½œä¸º<strong>æºåœ°å€</strong>ï¼Œ<strong>åè®®</strong>å­—æ®µè®¾ç½®ä¸º <code>1</code> è¡¨ç¤ºæ˜¯ <code>ICMP</code>åè®®ï¼Œå†åŠ ä¸Šä¸€äº›å…¶ä»–æ§åˆ¶ä¿¡æ¯ï¼Œæ„å»ºä¸€ä¸ª <code>IP</code> æ•°æ®åŒ…ã€‚</p><figure><img src="'+_+'" alt="ping-2" tabindex="0" loading="lazy"><figcaption>ping-2</figcaption></figure><p>æ¥ä¸‹æ¥ï¼Œéœ€è¦åŠ å…¥ <code>MAC</code> å¤´ã€‚å¦‚æœåœ¨æœ¬åœ° ARP æ˜ å°„è¡¨ä¸­æŸ¥æ‰¾å‡º IP åœ°å€ 192.168.1.2 æ‰€å¯¹åº”çš„ MAC åœ°å€ï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦å‘é€ <code>ARP</code> åè®®æŸ¥è¯¢ MAC åœ°å€ï¼Œè·å¾— MAC åœ°å€åï¼Œç”±æ•°æ®é“¾è·¯å±‚æ„å»ºä¸€ä¸ªæ•°æ®å¸§ï¼Œç›®çš„åœ°å€æ˜¯ IP å±‚ä¼ è¿‡æ¥çš„ MAC åœ°å€ï¼Œæºåœ°å€åˆ™æ˜¯æœ¬æœºçš„ MAC åœ°å€ï¼›è¿˜è¦é™„åŠ ä¸Šä¸€äº›æ§åˆ¶ä¿¡æ¯ï¼Œä¾æ®ä»¥å¤ªç½‘çš„ä»‹è´¨è®¿é—®è§„åˆ™ï¼Œå°†å®ƒä»¬ä¼ é€å‡ºå»ã€‚</p><figure><img src="'+x+'" alt="ping-3" tabindex="0" loading="lazy"><figcaption>ping-3</figcaption></figure><p>ä¸»æœº <code>B</code> æ”¶åˆ°è¿™ä¸ªæ•°æ®å¸§åï¼Œå…ˆæ£€æŸ¥å®ƒçš„ç›®çš„ MAC åœ°å€ï¼Œå¹¶å’Œæœ¬æœºçš„ MAC åœ°å€å¯¹æ¯”ï¼Œå¦‚ç¬¦åˆï¼Œåˆ™æ¥æ”¶ï¼Œå¦åˆ™å°±ä¸¢å¼ƒã€‚</p><p>æ¥æ”¶åæ£€æŸ¥è¯¥æ•°æ®å¸§ï¼Œå°† IP æ•°æ®åŒ…ä»å¸§ä¸­æå–å‡ºæ¥ï¼Œäº¤ç»™æœ¬æœºçš„ IP å±‚ã€‚åŒæ ·ï¼ŒIP å±‚æ£€æŸ¥åï¼Œå°†æœ‰ç”¨çš„ä¿¡æ¯æå–åäº¤ç»™ ICMP åè®®ã€‚</p><p>ä¸»æœº <code>B</code> ä¼šæ„å»ºä¸€ä¸ª <strong>ICMP å›é€å“åº”æ¶ˆæ¯</strong>æ•°æ®åŒ…ï¼Œå›é€å“åº”æ•°æ®åŒ…çš„<strong>ç±»å‹</strong>å­—æ®µä¸º <code>0</code>ï¼Œ<strong>åºå·</strong>ä¸ºæ¥æ”¶åˆ°çš„è¯·æ±‚æ•°æ®åŒ…ä¸­çš„åºå·ï¼Œç„¶åå†å‘é€å‡ºå»ç»™ä¸»æœº Aã€‚</p><figure><img src="'+C+'" alt="ping-4" tabindex="0" loading="lazy"><figcaption>ping-4</figcaption></figure><p>åœ¨è§„å®šçš„æ—¶å€™é—´å†…ï¼Œæºä¸»æœºå¦‚æœæ²¡æœ‰æ¥åˆ° ICMP çš„åº”ç­”åŒ…ï¼Œåˆ™è¯´æ˜ç›®æ ‡ä¸»æœºä¸å¯è¾¾ï¼›å¦‚æœæ¥æ”¶åˆ°äº† ICMP å›é€å“åº”æ¶ˆæ¯ï¼Œåˆ™è¯´æ˜ç›®æ ‡ä¸»æœºå¯è¾¾ã€‚</p><p>æ­¤æ—¶ï¼Œæºä¸»æœºä¼šæ£€æŸ¥ï¼Œç”¨å½“å‰æ—¶åˆ»å‡å»è¯¥æ•°æ®åŒ…æœ€åˆä»æºä¸»æœºä¸Šå‘å‡ºçš„æ—¶åˆ»ï¼Œå°±æ˜¯ ICMP æ•°æ®åŒ…çš„æ—¶é—´å»¶è¿Ÿã€‚</p><p>é’ˆå¯¹ä¸Šé¢å‘é€çš„äº‹æƒ…ï¼Œæ€»ç»“æˆäº†å¦‚ä¸‹å›¾ï¼š</p><figure><img src="'+S+'" alt="ping-5" tabindex="0" loading="lazy"><figcaption>ping-5</figcaption></figure><p>å½“ç„¶è¿™åªæ˜¯æœ€ç®€å•çš„ï¼ŒåŒä¸€ä¸ªå±€åŸŸç½‘é‡Œé¢çš„æƒ…å†µã€‚å¦‚æœè·¨ç½‘æ®µçš„è¯ï¼Œè¿˜ä¼šæ¶‰åŠç½‘å…³çš„è½¬å‘ã€è·¯ç”±å™¨çš„è½¬å‘ç­‰ç­‰ã€‚</p><p>ä½†æ˜¯å¯¹äº ICMP çš„å¤´æ¥è®²ï¼Œæ˜¯æ²¡ä»€ä¹ˆå½±å“çš„ã€‚ä¼šå½±å“çš„æ˜¯æ ¹æ®ç›®æ ‡ IP åœ°å€ï¼Œé€‰æ‹©è·¯ç”±çš„ä¸‹ä¸€è·³ï¼Œè¿˜æœ‰æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨åˆ°è¾¾ä¸€ä¸ªæ–°çš„å±€åŸŸç½‘ï¼Œéœ€è¦æ¢ MAC å¤´é‡Œé¢çš„ MAC åœ°å€ã€‚</p><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå¯ä»¥çœ‹å‡º ping è¿™ä¸ªç¨‹åºæ˜¯<strong>ä½¿ç”¨äº† ICMP é‡Œé¢çš„ ECHO REQUESTï¼ˆç±»å‹ä¸º 8 ï¼‰ å’Œ ECHO REPLY ï¼ˆç±»å‹ä¸º 0ï¼‰</strong>ã€‚</p><h3 id="äº†è§£å“ªäº›ç½‘ç»œé”™è¯¯ç å—-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#äº†è§£å“ªäº›ç½‘ç»œé”™è¯¯ç å—-2023-ç¾å›¢" aria-hidden="true">#</a> äº†è§£å“ªäº›ç½‘ç»œé”™è¯¯ç å—?ï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>ä»¥ä¸‹æ˜¯å…¶ä¸­ä¸€äº›å¸¸è§çš„é”™è¯¯ç åŠå…¶å«ä¹‰ï¼š</p><ul><li>400 Bad Requestï¼šè¯·æ±‚æ— æ•ˆæˆ–ä¸å®Œæ•´ã€‚</li><li>401 Unauthorizedï¼šæœªç»æˆæƒï¼Œéœ€è¦èº«ä»½éªŒè¯ã€‚</li><li>403 Forbiddenï¼šæœåŠ¡å™¨æ‹’ç»è¯·æ±‚ï¼Œæ²¡æœ‰è®¿é—®æƒé™ã€‚</li><li>404 Not Foundï¼šè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚</li><li>500 Internal Server Errorï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚</li><li>502 Bad Gatewayï¼šç½‘å…³é”™è¯¯ï¼Œä½œä¸ºä»£ç†æˆ–ç½‘å…³çš„æœåŠ¡å™¨ä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚</li><li>503 Service Unavailableï¼šæœåŠ¡ä¸å¯ç”¨ï¼ŒæœåŠ¡å™¨æš‚æ—¶è¿‡è½½æˆ–ç»´æŠ¤ä¸­ã€‚</li><li>504 Gateway Timeoutï¼šç½‘å…³è¶…æ—¶ï¼Œä½œä¸ºä»£ç†æˆ–ç½‘å…³çš„æœåŠ¡å™¨åœ¨ç­‰å¾…ä¸Šæ¸¸æœåŠ¡å™¨å“åº”æ—¶è¶…æ—¶ã€‚</li><li>505 HTTP Version Not Supportedï¼šä¸æ”¯æŒçš„HTTPåè®®ç‰ˆæœ¬ã€‚</li></ul><h2 id="ğŸ–¥ï¸æ“ä½œç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#ğŸ–¥ï¸æ“ä½œç³»ç»Ÿ" aria-hidden="true">#</a> ğŸ–¥ï¸æ“ä½œç³»ç»Ÿ</h2><h3 id="linuxæœ‰å‡ ç§ioæ¨¡å‹-2023-é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#linuxæœ‰å‡ ç§ioæ¨¡å‹-2023-é˜¿é‡Œ" aria-hidden="true">#</a> linuxæœ‰å‡ ç§IOæ¨¡å‹ï¼ˆ2023 é˜¿é‡Œï¼‰</h3>',39),ca={href:"https://linyunwen.github.io/2022/01/02/linux-io-model/",target:"_blank",rel:"noopener noreferrer"},ra=t('<h3 id="åˆ†é…ç»™è¿›ç¨‹çš„èµ„æºæœ‰å“ªäº›-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#åˆ†é…ç»™è¿›ç¨‹çš„èµ„æºæœ‰å“ªäº›-2023-æ»´æ»´" aria-hidden="true">#</a> åˆ†é…ç»™è¿›ç¨‹çš„èµ„æºæœ‰å“ªäº›ï¼ˆ2023 æ»´æ»´ï¼‰</h3><ol><li><strong>CPUæ—¶é—´</strong>ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦ä½¿ç”¨CPUæ¥æ‰§è¡Œå…¶æŒ‡ä»¤ã€‚æ“ä½œç³»ç»Ÿé€šè¿‡è¿›ç¨‹è°ƒåº¦ç®—æ³•æ¥å†³å®šå“ªä¸ªè¿›ç¨‹åº”è¯¥å¾—åˆ°CPUæ—¶é—´ã€‚</li><li><strong>å†…å­˜ç©ºé—´</strong>ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦å†…å­˜æ¥å­˜å‚¨å…¶ä»£ç ã€æ•°æ®å’Œè¿è¡Œæ—¶çš„çŠ¶æ€ä¿¡æ¯ã€‚æ“ä½œç³»ç»Ÿé€šè¿‡å†…å­˜ç®¡ç†ç®—æ³•æ¥åˆ†é…å’Œç®¡ç†å†…å­˜èµ„æºã€‚</li><li><strong>I/Oè®¾å¤‡</strong>ï¼šåŒ…æ‹¬ç¡¬ç›˜ã€é¼ æ ‡ã€é”®ç›˜ã€æ‰“å°æœºç­‰ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£ç®¡ç†å’Œè°ƒåº¦è¿›ç¨‹å¯¹è¿™äº›è®¾å¤‡çš„è®¿é—®ã€‚</li><li><strong>æ–‡ä»¶</strong>ï¼šæ–‡ä»¶æ˜¯ä¸€ç§å¸¸è§çš„å­˜å‚¨èµ„æºï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†å’Œæ§åˆ¶è¿›ç¨‹å¯¹æ–‡ä»¶çš„è®¿é—®ã€‚</li><li><strong>ç½‘ç»œ</strong>ï¼šè¿›ç¨‹å¯èƒ½éœ€è¦é€šè¿‡ç½‘ç»œæ¥è¿›è¡Œæ•°æ®ä¼ è¾“å’Œé€šä¿¡ï¼Œæ“ä½œç³»ç»Ÿè´Ÿè´£ç®¡ç†å’Œè°ƒåº¦è¿›ç¨‹å¯¹ç½‘ç»œèµ„æºçš„è®¿é—®ã€‚</li><li><strong>å„ç§è½¯ä»¶å’Œåº“èµ„æº</strong>ï¼šä¾‹å¦‚æ•°æ®åº“ç³»ç»Ÿã€å›¾å½¢å¤„ç†åº“ç­‰ã€‚è¿™äº›éƒ½æ˜¯è¿›ç¨‹å¯èƒ½éœ€è¦ä½¿ç”¨çš„èµ„æºï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†å’Œåˆ†é…ã€‚</li></ol><h3 id="æ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆåšå†…å­˜ç®¡ç†çš„-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#æ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆåšå†…å­˜ç®¡ç†çš„-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> æ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆåšå†…å­˜ç®¡ç†çš„ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><p>æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†ç¡®å®æ˜¯ä¸€ä¸ªå¤æ‚è€Œæœ‰è¶£çš„è¯é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦åœ¨ä¿æŠ¤ã€å…±äº«ã€è™šæ‹ŸåŒ–å’Œç‰©ç†å†…å­˜ç®¡ç†å››ä¸ªæ–¹é¢è¿›è¡Œå¹³è¡¡ã€‚ä»¥ä¸‹æ˜¯è¿™å››ä¸ªæ–¹é¢çš„è¯¦ç»†è§£é‡Šï¼š</p><ol><li>ä¿æŠ¤ï¼šæ“ä½œç³»ç»Ÿéœ€è¦ä¿è¯æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨å…¶è‡ªå·±çš„å†…å­˜ç©ºé—´ä¸­è¿è¡Œï¼Œä»¥é˜²æ­¢å®ƒä»¬ç›¸äº’å¹²æ‰°ã€‚è¿™é€šå¸¸é€šè¿‡ç¡¬ä»¶æ”¯æŒçš„å†…å­˜ä¿æŠ¤æœºåˆ¶æ¥å®ç°ã€‚</li><li>å…±äº«ï¼šè™½ç„¶å†…å­˜ä¿æŠ¤å¾ˆé‡è¦ï¼Œä½†æœ‰æ—¶å€™ï¼Œä¸åŒçš„è¿›ç¨‹éœ€è¦èƒ½å¤Ÿè®¿é—®å…±äº«çš„å†…å­˜åŒºåŸŸã€‚æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå…è®¸è¿›ç¨‹åœ¨éœ€è¦çš„æ—¶å€™å…±äº«å†…å­˜ã€‚</li><li>è™šæ‹ŸåŒ–ï¼šæ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›äº†ä¸€ç§çœ‹ä¼¼æœ‰å¾ˆå¤§çš„ã€è¿ç»­çš„å†…å­˜ç©ºé—´çš„å¹»è±¡ã€‚è¿™å®é™…ä¸Šæ˜¯é€šè¿‡ä¸€ç§å«åšå†…å­˜è™šæ‹ŸåŒ–çš„æŠ€æœ¯å®ç°çš„ï¼Œè¿™ä½¿å¾—æ¯ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºå®ƒæœ‰è‡ªå·±çš„ç§æœ‰å†…å­˜ï¼Œå°½ç®¡å®é™…ä¸Šç‰©ç†å†…å­˜è¢«æ‰€æœ‰è¿›ç¨‹å…±äº«ã€‚</li><li>ç‰©ç†å†…å­˜ç®¡ç†ï¼šæ“ä½œç³»ç»Ÿéœ€è¦ç®¡ç†ç‰©ç†å†…å­˜ï¼Œè¿™åŒ…æ‹¬å“ªäº›å†…å­˜è¢«ä½¿ç”¨ï¼Œå“ªäº›å†…å­˜æ˜¯ç©ºé—²çš„ï¼Œä»¥åŠå¦‚ä½•åˆ†é…å’Œå›æ”¶å†…å­˜ã€‚</li></ol><p>å¦‚æœéè¦è¯´ä¸€ç§ç®¡ç†ç­–ç•¥ï¼Œæœ‰ä¸€ç§å«åšâ€œjemallocâ€çš„å†…å­˜åˆ†é…ç­–ç•¥ã€‚è¿™ç§ç­–ç•¥æ˜¯ä¸€ç§ç”¨äºå¤„ç†åŠ¨æ€å†…å­˜åˆ†é…çš„æŠ€æœ¯ã€‚åœ¨è¿™ç§ç­–ç•¥ä¸­ï¼Œå†…å­˜è¢«åˆ†æˆä¸åŒå¤§å°çš„å—ï¼Œä¾‹å¦‚16KBï¼Œ32KBï¼Œ64KBç­‰ã€‚è¿™äº›å—æ˜¯2çš„å¹‚ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä½æ“ä½œå¿«é€Ÿåˆ†é…å’Œé‡Šæ”¾ã€‚è¿™ç§ç­–ç•¥çš„å¥½å¤„æ˜¯å®ƒå¯ä»¥å‡å°‘å†…å­˜ç¢ç‰‡ï¼ŒåŒæ—¶è¿˜å¯ä»¥æé«˜å†…å­˜çš„åˆ†é…é€Ÿåº¦ã€‚</p><p>å½“è¿›ç¨‹éœ€è¦æ›´å¤šçš„å†…å­˜æ—¶ï¼Œjemallocä¼šå°è¯•æ‰¾åˆ°æ¯”æ‰€éœ€å†…å­˜å¤§çš„ç¬¬ä¸€ä¸ª2çš„å¹‚çš„å†…å­˜å—ã€‚å¦‚æœè¿™æ ·çš„å—ä¸å­˜åœ¨ï¼Œå®ƒä¼šå°è¯•æ‰¾åˆ°ä¸€ä¸ªæ›´å¤§çš„å—ï¼Œç„¶åå°†è¿™ä¸ªå—åˆ†å‰²æˆä¸¤ä¸ªæ›´å°çš„å—ã€‚å¦‚æœè¿™ä¸ªæ›´å¤§çš„å—ä»ç„¶ä¸è¶³ä»¥æ»¡è¶³éœ€æ±‚ï¼Œå®ƒå°±ä¼šå‘æ“ä½œç³»ç»Ÿè¯·æ±‚æ›´å¤šçš„å†…å­˜ã€‚</p><p>è¿™ç§ç­–ç•¥å…è®¸jemallocåœ¨éœ€è¦çš„æ—¶å€™å¿«é€Ÿæ‰¾åˆ°åˆé€‚å¤§å°çš„å†…å­˜å—ï¼Œè€Œä¸éœ€è¦éå†æ‰€æœ‰çš„ç©ºé—²å†…å­˜å—ã€‚è¿™ä½¿å¾—jemallocåœ¨é¢å¯¹å¤§é‡å°å‹å†…å­˜åˆ†é…è¯·æ±‚æ—¶è¡¨ç°å‡ºè‰²ã€‚</p><h3 id="âœ¨-æ€ä¹ˆå‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ç©ºé—´-2023-å°çº¢ä¹¦-ã€2023çƒ­é—¨é—®é¢˜ã€‘" tabindex="-1"><a class="header-anchor" href="#âœ¨-æ€ä¹ˆå‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ç©ºé—´-2023-å°çº¢ä¹¦-ã€2023çƒ­é—¨é—®é¢˜ã€‘" aria-hidden="true">#</a> âœ¨ æ€ä¹ˆå‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ç©ºé—´ï¼Ÿï¼ˆ2023 å°çº¢ä¹¦ï¼‰ã€2023çƒ­é—¨é—®é¢˜ã€‘</h3><p>brkå’Œmmapç³»ç»Ÿè°ƒç”¨ï¼Œbrkç”³è¯·å †å†…å­˜ï¼Œmmapåˆ†é…æ–‡ä»¶æ˜ å°„åŒºå’ŒåŒ¿åæ˜ å°„åŒº</p><p>è¿›ç¨‹ç¡®å®æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚ brk å’Œ mmap å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜çš„ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨çš„ä¸€äº›è¯¦ç»†ä¿¡æ¯ï¼š</p><ol><li><code>brk</code>ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºæ”¹å˜è¿›ç¨‹å †å¤§å°çš„ç³»ç»Ÿè°ƒç”¨ã€‚å †æ˜¯ç”¨äºåŠ¨æ€å†…å­˜åˆ†é…çš„å†…å­˜åŒºåŸŸï¼ˆå¦‚é€šè¿‡ mallocã€callocã€realloc å’Œ free è¿™æ ·çš„Cåº“å‡½æ•°ï¼‰ã€‚å½“è¿›ç¨‹è°ƒç”¨ brk æ¥æ”¹å˜å †çš„ç»“æŸåœ°å€æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥æ ¹æ®éœ€è¦åˆ†é…æ›´å¤šçš„ç‰©ç†å†…å­˜ç»™è¿›ç¨‹ï¼Œæˆ–è€…å›æ”¶æœªä½¿ç”¨çš„å†…å­˜ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œbrk åªèƒ½ç”¨äºæ”¹å˜å †çš„å¤§å°ï¼Œè€Œä¸èƒ½ç”¨äºæ”¹å˜æ ˆçš„å¤§å°ã€‚</li><li><code>mmap</code>ï¼šè¿™æ˜¯ä¸€ç§æ›´é€šç”¨çš„å†…å­˜ç®¡ç†ç³»ç»Ÿè°ƒç”¨ï¼Œå¯ä»¥ç”¨äºå®ç°å†…å­˜æ˜ å°„ã€‚å†…å­˜æ˜ å°„å¯ä»¥æœ‰å¤šç§ç”¨é€”ï¼Œå¦‚æ–‡ä»¶æ˜ å°„å’Œåˆ›å»ºå…±äº«å†…å­˜ã€‚mmap è¿˜å¯ä»¥åˆ›å»ºåŒ¿åæ˜ å°„ï¼Œè¿™æ˜¯ä¸€ç§æ²¡æœ‰ä¸æ–‡ä»¶ç³»ç»Ÿå…³è”çš„å†…å­˜åŒºåŸŸï¼Œå¯ä»¥ç”¨äºè¿›ç¨‹é—´é€šä¿¡æˆ–è€…æ›¿ä»£ malloc å’Œ free è¿›è¡Œå†…å­˜ç®¡ç†ã€‚mmap è°ƒç”¨å…è®¸è¿›ç¨‹æ˜¾å¼åœ°æ§åˆ¶å†…å­˜çš„åˆ†é¡µè¡Œä¸ºï¼ŒåŒ…æ‹¬é¡µé”™è¯¯å¤„ç†ã€é¢„å–ã€åŒæ­¥å’Œä¿æŠ¤ç­‰ã€‚</li></ol><p>è¿™ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„åŸºæœ¬å†…å­˜ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ç”±è¿›ç¨‹ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è¢«æ›´é«˜çº§çš„å†…å­˜ç®¡ç†åº“ï¼Œå¦‚ jemalloc æˆ–Cåº“çš„ malloc å’Œ free å‡½æ•°æ‰€ä½¿ç”¨ã€‚</p><h3 id="æœ‰æ²¡æœ‰æ›´å¿«çš„ç”³è¯·å†…å­˜æ–¹å¼-å†…å­˜åˆ†é…ä¼˜åŒ–ç­–ç•¥-2023-æ»´æ»´å®ä¹ " tabindex="-1"><a class="header-anchor" href="#æœ‰æ²¡æœ‰æ›´å¿«çš„ç”³è¯·å†…å­˜æ–¹å¼-å†…å­˜åˆ†é…ä¼˜åŒ–ç­–ç•¥-2023-æ»´æ»´å®ä¹ " aria-hidden="true">#</a> æœ‰æ²¡æœ‰æ›´å¿«çš„ç”³è¯·å†…å­˜æ–¹å¼ï¼ˆå†…å­˜åˆ†é…ä¼˜åŒ–ç­–ç•¥ï¼‰ï¼Ÿï¼ˆ2023 æ»´æ»´å®ä¹ ï¼‰</h3><ol><li><strong>å†…å­˜æ± ï¼ˆMemory Poolï¼‰</strong>ï¼šå†…å­˜æ± æ˜¯ä¸€ç§å†…å­˜åˆ†é…ç­–ç•¥ï¼Œé¢„å…ˆåœ¨å †ä¸­åˆ†é…ä¸€å¤§å—å†…å­˜ï¼Œç„¶åç”±åº”ç”¨ç¨‹åºè‡ªè¡Œç®¡ç†è¿™å—å†…å­˜ã€‚å½“éœ€è¦åˆ†é…å†…å­˜æ—¶ï¼Œç›´æ¥ä»å†…å­˜æ± ä¸­å–ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½å»è°ƒç”¨<code>malloc</code>æˆ–<code>new</code>ã€‚åŒæ ·ï¼Œå†…å­˜é‡Šæ”¾æ—¶ï¼Œä¹Ÿæ˜¯è¿”å›åˆ°å†…å­˜æ± ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨<code>free</code>æˆ–<code>delete</code>ã€‚è¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ï¼Œæé«˜å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„æ•ˆç‡ã€‚</li><li><strong>å¯¹è±¡æ± ï¼ˆObject Poolï¼‰</strong>ï¼šå¯¹è±¡æ± æ˜¯å†…å­˜æ± çš„ä¸€ç§åº”ç”¨ï¼Œä¸»è¦ç”¨äºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å°å¯¹è±¡ã€‚å®ƒä¼šé¢„å…ˆåˆ›å»ºä¸€äº›å¯¹è±¡å¹¶ä¿å­˜åœ¨æ± ä¸­ã€‚å½“éœ€è¦å¯¹è±¡æ—¶ï¼Œä»æ± ä¸­è·å–è€Œä¸æ˜¯åˆ›å»ºæ–°çš„å¯¹è±¡ï¼›å½“å¯¹è±¡ä¸å†éœ€è¦æ—¶ï¼Œè¿”å›åˆ°æ± ä¸­è€Œä¸æ˜¯é”€æ¯ã€‚è¿™æ ·å¯ä»¥å‡å°‘å¯¹è±¡åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€ã€‚</li><li><strong>ä½¿ç”¨å®šåˆ¶çš„å†…å­˜åˆ†é…å™¨</strong>ï¼šæœ‰äº›å†…å­˜åˆ†é…å™¨å¯ä»¥é’ˆå¯¹ç‰¹å®šçš„ä½¿ç”¨æ¨¡å¼è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚Googleçš„tcmallocã€Facebookçš„jemallocç­‰ã€‚</li><li><strong>é›¶æ‹·è´ï¼ˆZero Copyï¼‰</strong>ï¼šé›¶æ‹·è´æ˜¯ä¸€ç§å¯ä»¥å‡å°‘CPUå¤åˆ¶æ•°æ®çš„æŠ€æœ¯ã€‚è¿™ç§æŠ€æœ¯ä¸»è¦ç”¨äºç½‘ç»œæ•°æ®ä¼ è¾“ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå†…å­˜åˆ†é…ã€‚é€šè¿‡ç›´æ¥æ“ä½œæ•°æ®çš„åœ°å€ï¼Œè€Œä¸æ˜¯å¤åˆ¶æ•°æ®ï¼Œå¯ä»¥å¤§å¤§æé«˜æ•ˆç‡ã€‚</li></ol><h3 id="ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—-2023-æ»´æ»´å®ä¹ " tabindex="-1"><a class="header-anchor" href="#ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—-2023-æ»´æ»´å®ä¹ " aria-hidden="true">#</a> ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—ï¼Ÿï¼ˆ2023 æ»´æ»´å®ä¹ ï¼‰</h3><p>ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡å¹¶ä¸å®Œå…¨ç›¸åŒã€‚ä¸‹é¢æ˜¯å‡ ä¸ªå¯èƒ½å½±å“æ•ˆç‡çš„å› ç´ ï¼š</p><ol><li><strong>å†…å­˜ç®¡ç†ç­–ç•¥</strong>ï¼šæ“ä½œç³»ç»Ÿå’Œå†…å­˜åˆ†é…åº“ï¼ˆå¦‚glibcä¸­çš„mallocï¼‰é€šå¸¸ä½¿ç”¨ä¸åŒçš„ç­–ç•¥æ¥å¤„ç†å¤§å—å’Œå°å—å†…å­˜çš„åˆ†é…ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå°å—å†…å­˜çš„åˆ†é…ï¼Œå®ƒä»¬å¯èƒ½ä½¿ç”¨åˆ†æ®µåˆ—è¡¨ï¼ˆsegregated listsï¼‰æˆ–ä½å›¾ï¼ˆbitmapsï¼‰ç­‰æ•°æ®ç»“æ„æ¥å¿«é€ŸæŸ¥æ‰¾åˆé€‚çš„ç©ºé—²å—ã€‚å¯¹äºå¤§å—å†…å­˜çš„åˆ†é…ï¼Œå®ƒä»¬å¯èƒ½ä½¿ç”¨æ›´å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå¦‚å¹³è¡¡æ ‘æˆ–å †ï¼Œä»¥ä¾¿åœ¨å¯èƒ½çš„ç©ºé—²å—ä¸­æ‰¾åˆ°æœ€åˆé€‚çš„ä¸€å—ã€‚è¿™äº›ç­–ç•¥çš„åŒºåˆ«å¯èƒ½å¯¼è‡´å¤§å—å’Œå°å—å†…å­˜åˆ†é…çš„æ•ˆç‡ä¸åŒã€‚</li><li><strong>å†…å­˜ç¢ç‰‡åŒ–</strong>ï¼šå¦‚æœé¢‘ç¹åœ°ç”³è¯·å’Œé‡Šæ”¾å°å—å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–ï¼Œå³ç©ºé—²å†…å­˜è¢«åˆ†å‰²æˆè®¸å¤šå°å—ï¼Œè€Œæ— æ³•æ»¡è¶³å¤§å—å†…å­˜çš„åˆ†é…éœ€æ±‚ã€‚åä¹‹ï¼Œå¦‚æœåˆ†é…çš„å†…å­˜å¤§éƒ¨åˆ†æ˜¯å¤§å—å†…å­˜ï¼Œé‚£ä¹ˆå¯èƒ½è¾ƒå°‘é‡åˆ°å†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜ã€‚å› æ­¤ï¼Œå†…å­˜ç¢ç‰‡åŒ–ä¹Ÿå¯èƒ½å½±å“åˆ°å†…å­˜åˆ†é…çš„æ•ˆç‡ã€‚</li><li><strong>é¡µæ•…éšœï¼ˆPage Faultsï¼‰</strong>ï¼šå½“ç”³è¯·ä¸€å—å¤§å†…å­˜å¹¶è®¿é—®å®ƒæ—¶ï¼Œå¯èƒ½ä¼šè§¦å‘æ›´å¤šçš„é¡µæ•…éšœï¼Œå› ä¸ºéœ€è¦åŠ è½½æ›´å¤šçš„ç‰©ç†å†…å­˜é¡µåˆ°å†…å­˜ä¸­ã€‚é¡µæ•…éšœæ˜¯ä¸€ç§æ˜‚è´µçš„æ“ä½œï¼Œä¼šå¢åŠ å†…å­˜åˆ†é…å’Œè®¿é—®çš„å¼€é”€ã€‚</li></ol><p>å› æ­¤ï¼Œç”³è¯·å¤§å—å†…å­˜å’Œå°å—å†…å­˜çš„æ•ˆç‡å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œå®ƒä»¬å–å†³äºè®¸å¤šå› ç´ ï¼ŒåŒ…æ‹¬å†…å­˜ç®¡ç†ç­–ç•¥ã€å†…å­˜ç¢ç‰‡åŒ–ã€é¡µæ•…éšœç­‰ã€‚åœ¨å®é™…çš„ç¼–ç¨‹ä¸­ï¼Œåº”å°½å¯èƒ½é¿å…ä¸å¿…è¦çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾ï¼Œä»¥æé«˜ç¨‹åºçš„æ•ˆç‡å’Œæ€§èƒ½ã€‚</p><h3 id="jvmåˆ†ä»£å†…å­˜ç®¡ç†å’Œæ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†çš„åŒºåˆ«-2023-å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#jvmåˆ†ä»£å†…å­˜ç®¡ç†å’Œæ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†çš„åŒºåˆ«-2023-å°çº¢ä¹¦" aria-hidden="true">#</a> jvmåˆ†ä»£å†…å­˜ç®¡ç†å’Œæ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†çš„åŒºåˆ«ï¼ˆ2023 å°çº¢ä¹¦ï¼‰</h3><ol><li>æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†çš„ä¸»è¦ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæŠ½è±¡çš„ã€è¿ç»­çš„åœ°å€ç©ºé—´ç»™æ¯ä¸ªè¿›ç¨‹ï¼Œä¿æŠ¤è¿›ç¨‹ä¹‹é—´çš„å†…å­˜ï¼Œç¡®ä¿è¿›ç¨‹ä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œå¹¶åœ¨ç‰©ç†å†…å­˜æœ‰é™çš„æƒ…å†µä¸‹å°½å¯èƒ½æœ‰æ•ˆåœ°åˆ†é…å’Œå›æ”¶å†…å­˜ã€‚å¦ä¸€æ–¹é¢ï¼ŒJVMçš„å†…å­˜ç®¡ç†çš„ç›®æ ‡æ›´å…³æ³¨äºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚Javaå…·æœ‰è‡ªåŠ¨åƒåœ¾æ”¶é›†ï¼ˆGCï¼‰çš„ç‰¹æ€§ï¼Œå…¶ç›®æ ‡æ˜¯è‡ªåŠ¨è¯†åˆ«å¹¶å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œä»è€Œç®€åŒ–ç¨‹åºå‘˜çš„å·¥ä½œã€‚</li><li>æ“ä½œç³»ç»Ÿé€šå¸¸ä½¿ç”¨ä¸€ç§ç§°ä¸ºè™šæ‹Ÿå†…å­˜çš„æŠ€æœ¯ï¼Œå°†ç‰©ç†å†…å­˜æŠ½è±¡ä¸ºè¿ç»­çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå¹¶é€šè¿‡é¡µè¡¨å’Œç¡¬ä»¶æ”¯æŒå®ç°å¯¹è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„ã€‚å¦ä¸€æ–¹é¢ï¼ŒJVMé‡‡ç”¨äº†åˆ†ä»£æ”¶é›†ç­–ç•¥ï¼Œå°†å†…å­˜åˆ†ä¸ºæ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰ã€è€å¹´ä»£ï¼ˆOld Generationï¼‰å’Œæ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼ŒJava 8ä»¥åè¢«Metaspaceæ›¿ä»£ï¼‰ã€‚è¿™ç§ç­–ç•¥åŸºäºä¸¤ä¸ªè§‚å¯Ÿç»“æœï¼šå¤§éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½å¾ˆçŸ­ï¼Œå°‘æ•°ç”Ÿå‘½å‘¨æœŸé•¿çš„å¯¹è±¡å¯èƒ½ä¼šå­˜æ´»å¾ˆé•¿æ—¶é—´ã€‚å› æ­¤ï¼ŒJVMé€šè¿‡ä½¿ç”¨ä¸åŒçš„åƒåœ¾æ”¶é›†ç®—æ³•å’Œç­–ç•¥æ¥å¤„ç†è¿™äº›ä¸åŒçš„å†…å­˜åŒºåŸŸã€‚</li></ol><p>åœ¨è¿™ä¸¤ä¸ªå±‚æ¬¡çš„å†…å­˜ç®¡ç†ä¹‹é—´è¿˜æœ‰ä¸€å±‚ï¼šJavaè¿è¡Œæ—¶ç¯å¢ƒï¼ˆJREï¼‰ä¼šä»æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ï¼Œç„¶åå°†è¿™äº›å†…å­˜åˆ†é…ç»™JVMä½¿ç”¨ã€‚åœ¨JVMå†…éƒ¨ï¼Œå†…å­˜ä¼šè¢«è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºç”¨äºä¸åŒç›®çš„çš„å„ç§åŒºåŸŸï¼Œå¦‚Javaå †ï¼ˆç”¨äºå­˜å‚¨å¯¹è±¡ï¼‰ã€æ–¹æ³•åŒºï¼ˆç”¨äºå­˜å‚¨ç±»çš„å…ƒæ•°æ®ï¼‰ä»¥åŠå„ç§çº¿ç¨‹æ ˆï¼ˆç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡å’Œæ–¹æ³•è°ƒç”¨çš„ä¸Šä¸‹æ–‡ï¼‰ç­‰ã€‚</p><h3 id="fork-è¯»æ—¶ã€å…±äº«å†™æ—¶çš„æ‹·è´æ˜¯æ€æ ·çš„-2023-æ»´æ»´å®ä¹ " tabindex="-1"><a class="header-anchor" href="#fork-è¯»æ—¶ã€å…±äº«å†™æ—¶çš„æ‹·è´æ˜¯æ€æ ·çš„-2023-æ»´æ»´å®ä¹ " aria-hidden="true">#</a> fork()è¯»æ—¶ã€å…±äº«å†™æ—¶çš„æ‹·è´æ˜¯æ€æ ·çš„ï¼Ÿï¼ˆ2023 æ»´æ»´å®ä¹ ï¼‰</h3><p>åœ¨Linuxä¸­ï¼Œ<code>fork()</code>æ˜¯ä¸€ä¸ªç”¨æ¥åˆ›å»ºæ–°è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ã€‚å½“ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨<code>fork()</code>æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œè¿™ä¸ªæ–°è¿›ç¨‹æ˜¯åŸè¿›ç¨‹çš„å‰¯æœ¬ï¼ŒåŒ…æ‹¬åŸè¿›ç¨‹çš„ä»£ç æ®µã€æ•°æ®æ®µã€å †å’Œæ ˆç­‰ã€‚</p><p>å…·ä½“åˆ°å†…å­˜çš„å¤åˆ¶ï¼ŒLinuxé‡‡ç”¨äº†å†™æ—¶å¤åˆ¶ï¼ˆCopy-on-Writeï¼ŒCOWï¼‰çš„ç­–ç•¥ã€‚è¿™æ˜¯ä¸€ç§å¯ä»¥æé«˜æ€§èƒ½å’Œå†…å­˜åˆ©ç”¨ç‡çš„æŠ€æœ¯ã€‚</p><p>**å†™æ—¶å¤åˆ¶ï¼ˆCOWï¼‰**æ˜¯è¿™æ ·çš„ä¸€ç§ç­–ç•¥ï¼šå½“è¿›è¡Œ<code>fork()</code>æ“ä½œæ—¶ï¼Œå­è¿›ç¨‹å¹¶ä¸ç«‹å³å¤åˆ¶çˆ¶è¿›ç¨‹çš„æ‰€æœ‰å†…å­˜é¡µï¼Œè€Œæ˜¯çˆ¶å­è¿›ç¨‹å…±äº«åŒä¸€ä»½ç‰©ç†å†…å­˜ï¼ŒåŒæ—¶æ ‡è®°è¿™äº›å†…å­˜é¡µä¸ºåªè¯»ã€‚åªæœ‰å½“è¿›ç¨‹è¯•å›¾å†™å…¥è¿™äº›å†…å­˜é¡µæ—¶ï¼Œå†…æ ¸æ‰ä¼šä¸ºå†™å…¥æ“ä½œçš„è¿›ç¨‹åˆ›å»ºè¯¥é¡µçš„ä¸€ä¸ªæ‹·è´ï¼Œç„¶åä¿®æ”¹é¡µè¡¨ä»¥å°†è™šæ‹Ÿå†…å­˜é‡æ–°æ˜ å°„åˆ°æ–°çš„ç‰©ç†å†…å­˜é¡µã€‚è¿™å°±æ˜¯æ‰€è°“çš„&quot;å†™æ—¶å¤åˆ¶&quot;ã€‚</p><p>è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æœå­è¿›ç¨‹å¹¶æ²¡æœ‰ä¿®æ”¹å†…å­˜ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦çœŸæ­£çš„å¤åˆ¶å†…å­˜ï¼Œä»è€ŒèŠ‚çœäº†å¤§é‡çš„å†…å­˜ã€‚åŒæ—¶ï¼Œç”±äºä¸éœ€è¦ç«‹å³å¤åˆ¶æ‰€æœ‰å†…å­˜ï¼Œ<code>fork()</code>æ“ä½œå¯ä»¥æ›´å¿«åœ°å®Œæˆã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æœºåˆ¶åªé€‚ç”¨äºè™šæ‹Ÿå†…å­˜ç³»ç»Ÿï¼Œå¹¶ä¸”éœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒã€‚åœ¨æ²¡æœ‰è¿™ç§æœºåˆ¶çš„ç³»ç»Ÿä¸­ï¼Œ<code>fork()</code>æ“ä½œå¯èƒ½éœ€è¦èŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼Œå¹¶ä¸”ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚</p><h3 id="æ­»é”çš„å¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#æ­»é”çš„å¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> æ­»é”çš„å¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>æ­»é”çš„å¿…è¦æ¡ä»¶é€šå¸¸è¢«å½’ç»“ä¸ºå››ä¸ªåŸºæœ¬æ¡ä»¶ï¼Œå®ƒä»¬éƒ½å¿…é¡»åŒæ—¶æ»¡è¶³æ‰èƒ½å‘ç”Ÿæ­»é”ã€‚è¿™å››ä¸ªæ¡ä»¶ä¹Ÿè¢«ç§°ä¸ºæ­»é”çš„å››ä¸ª&quot;Coffman&quot;æ¡ä»¶ï¼Œå¾—åäº1971å¹´ç”±E.G. Coffman Jr.ç­‰äººåœ¨å…¶è®ºæ–‡ä¸­é¦–æ¬¡æå‡ºã€‚è¿™å››ä¸ªæ¡ä»¶åŒ…æ‹¬ï¼š</p><ol><li><strong>äº’æ–¥</strong>ï¼šèµ„æºè‡³å°‘æœ‰ä¸€ä¸ªæ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ã€‚å¦‚æœå…¶ä»–è¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œé‚£ä¹ˆè¯·æ±‚è¿›ç¨‹å¿…é¡»ç­‰å¾…ç›´åˆ°å æœ‰èµ„æºçš„è¿›ç¨‹å·²ç»é‡Šæ”¾ã€‚</li><li><strong>å æœ‰å¹¶ç­‰å¾…</strong>ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚å ç”¨èµ„æºè€Œè¢«é˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li><strong>éæŠ¢å </strong>ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œå‰ä¸èƒ½è¢«å…¶ä»–è¿›ç¨‹å¼ºè¡Œå‰¥å¤ºï¼Œåªèƒ½ç”±æ‹¥æœ‰èµ„æºçš„è¿›ç¨‹ä¸»åŠ¨é‡Šæ”¾ã€‚</li><li><strong>å¾ªç¯ç­‰å¾…</strong>ï¼šåœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹â€”èµ„æºçš„ç¯å½¢é“¾ï¼Œå³è¿›ç¨‹é›†åˆ{P0, P1, â€¦, Pn}ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼›P1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPnæ­£åœ¨ç­‰å¾…å·²ç»è¢«P0å ç”¨çš„èµ„æºã€‚</li></ol><p>åªæœ‰åœ¨æ»¡è¶³è¿™å››ä¸ªæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œæ‰å¯èƒ½å‡ºç°æ­»é”ã€‚</p><h3 id="topå‘½ä»¤æœ‰å“ªäº›å‚æ•°-è¯´ä¸€ä¸‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#topå‘½ä»¤æœ‰å“ªäº›å‚æ•°-è¯´ä¸€ä¸‹-2023-ç¾å›¢" aria-hidden="true">#</a> topå‘½ä»¤æœ‰å“ªäº›å‚æ•°ï¼Œè¯´ä¸€ä¸‹ï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>topå‘½ä»¤æ˜¯ä¸€ä¸ªç”¨äºå®æ—¶ç›‘æ§ç³»ç»Ÿèµ„æºå’Œè¿›ç¨‹çš„å‘½ä»¤ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºå½“å‰è¿è¡Œçš„è¿›ç¨‹ã€CPUä½¿ç”¨æƒ…å†µã€å†…å­˜ä½¿ç”¨æƒ…å†µç­‰ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„topå‘½ä»¤å‚æ•°ï¼š</p><ol><li>-d &lt;ç§’æ•°&gt;ï¼šæŒ‡å®štopå‘½ä»¤åˆ·æ–°çš„æ—¶é—´é—´éš”ï¼Œé»˜è®¤ä¸º3ç§’ã€‚</li><li>-n &lt;æ¬¡æ•°&gt;ï¼šæŒ‡å®štopå‘½ä»¤æ‰§è¡Œçš„æ¬¡æ•°åè‡ªåŠ¨é€€å‡ºã€‚</li><li>-p &lt;è¿›ç¨‹ID&gt;ï¼šæŒ‡å®šè¦ç›‘æ§çš„è¿›ç¨‹IDã€‚</li><li>-u &lt;ç”¨æˆ·å&gt;ï¼šåªæ˜¾ç¤ºæŒ‡å®šç”¨æˆ·åçš„è¿›ç¨‹ã€‚</li><li>-s &lt;æ’åºå­—æ®µ&gt;ï¼šæŒ‰æŒ‡å®šå­—æ®µå¯¹è¿›ç¨‹è¿›è¡Œæ’åºï¼Œå¸¸è§çš„å­—æ®µæœ‰cpuï¼ˆCPUä½¿ç”¨ç‡ï¼‰ã€memï¼ˆå†…å­˜ä½¿ç”¨ç‡ï¼‰ç­‰ã€‚</li><li>-Hï¼šæ˜¾ç¤ºè¿›ç¨‹çš„å±‚æ¬¡å…³ç³»ã€‚</li><li>-iï¼šåªæ˜¾ç¤ºè¿è¡Œä¸­çš„è¿›ç¨‹ï¼Œä¸æ˜¾ç¤ºåƒµå°¸è¿›ç¨‹ã€‚</li></ol><h3 id="æ€ä¹ˆæ˜¾ç¤ºçº¿ç¨‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆæ˜¾ç¤ºçº¿ç¨‹-2023-ç¾å›¢" aria-hidden="true">#</a> æ€ä¹ˆæ˜¾ç¤ºçº¿ç¨‹ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>åœ¨Linuxä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ˜¾ç¤ºçº¿ç¨‹ï¼š</p><ul><li>topå‘½ä»¤ï¼šåœ¨topå‘½ä»¤çš„é»˜è®¤æ˜¾ç¤ºä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªè¿›ç¨‹çš„çº¿ç¨‹æ•°ï¼ˆThreadsåˆ—ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ‰§è¡Œtopå‘½ä»¤åï¼ŒæŒ‰ä¸‹&quot;Shift + H&quot;é”®å¯ä»¥åˆ‡æ¢åˆ°çº¿ç¨‹è§†å›¾ï¼Œæ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹çš„çº¿ç¨‹ä¿¡æ¯ã€‚</li><li>pså‘½ä»¤ï¼šé€šè¿‡pså‘½ä»¤ç»“åˆé€‰é¡¹æ¥æ˜¾ç¤ºçº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨&quot;ps -eLf&quot;å‘½ä»¤å¯ä»¥æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰çº¿ç¨‹çš„è¯¦ç»†ä¿¡æ¯ã€‚</li></ul><h3 id="è™šæ‹Ÿåœ°å€æ˜¯æ€ä¹ˆè½¬åŒ–åˆ°ç‰©ç†åœ°å€çš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#è™šæ‹Ÿåœ°å€æ˜¯æ€ä¹ˆè½¬åŒ–åˆ°ç‰©ç†åœ°å€çš„-2023-å­—èŠ‚" aria-hidden="true">#</a> è™šæ‹Ÿåœ°å€æ˜¯æ€ä¹ˆè½¬åŒ–åˆ°ç‰©ç†åœ°å€çš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><figure><img src="'+L+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿä¸­çš„å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼ŒMemory Management Unitï¼‰æ¥å®Œæˆçš„ã€‚ä¸‹é¢æ˜¯ä¸€èˆ¬çš„è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€è½¬æ¢è¿‡ç¨‹ï¼š</p><ul><li>ç¨‹åºå‘å‡ºå†…å­˜è®¿é—®è¯·æ±‚æ—¶ï¼Œä½¿ç”¨è™šæ‹Ÿåœ°å€è¿›è¡Œè®¿é—®ã€‚</li><li>è™šæ‹Ÿåœ°å€è¢«ä¼ é€’ç»™MMUè¿›è¡Œå¤„ç†ã€‚</li><li>MMUä¸­çš„åœ°å€æ˜ å°„è¡¨ï¼ˆé¡µè¡¨ï¼‰è¢«ç”¨æ¥å°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ã€‚é¡µè¡¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</li><li>MMUæ ¹æ®é¡µè¡¨ä¸­çš„æ˜ å°„å…³ç³»ï¼Œå°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºå¯¹åº”çš„ç‰©ç†åœ°å€ã€‚</li><li>è½¬æ¢åçš„ç‰©ç†åœ°å€è¢«ä¼ é€’ç»™å†…å­˜ç³»ç»Ÿï¼Œç”¨äºå®é™…çš„å†…å­˜è®¿é—®æ“ä½œã€‚</li></ul><h3 id="é¡µè¡¨æ˜¯æ€ä¹ˆæ„æˆçš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#é¡µè¡¨æ˜¯æ€ä¹ˆæ„æˆçš„-2023-å­—èŠ‚" aria-hidden="true">#</a> é¡µè¡¨æ˜¯æ€ä¹ˆæ„æˆçš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><p>é¡µè¡¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å¤šçº§é¡µè¡¨å°†é¡µè¡¨åˆ†ä¸ºå¤šä¸ªå±‚çº§ï¼Œæ¯ä¸ªå±‚çº§çš„é¡µè¡¨é¡¹å­˜å‚¨ä¸‹ä¸€çº§é¡µè¡¨çš„ç‰©ç†åœ°å€ã€‚é€šè¿‡å¤šçº§ç´¢å¼•ï¼Œå¯ä»¥é€çº§æŸ¥æ‰¾ï¼Œæœ€ç»ˆæ‰¾åˆ°å¯¹åº”çš„ç‰©ç†é¡µã€‚</p><p>å¯¹äº 64 ä½çš„ç³»ç»Ÿï¼Œä¸»è¦æœ‰å››çº§ç›®å½•ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>å…¨å±€é¡µç›®å½•é¡¹ PGD</li><li>ä¸Šå±‚é¡µç›®å½•é¡¹ PUD</li><li>ä¸­é—´é¡µç›®å½•é¡¹ PMD</li><li>é¡µè¡¨é¡¹ PTE</li></ul><figure><img src="'+M+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="å…±äº«å†…å­˜æ˜¯æ€ä¹ˆå®ç°çš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#å…±äº«å†…å­˜æ˜¯æ€ä¹ˆå®ç°çš„-2023-å­—èŠ‚" aria-hidden="true">#</a> å…±äº«å†…å­˜æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><p>å…±äº«å†…å­˜çš„æœºåˆ¶ï¼Œå°±æ˜¯æ‹¿å‡ºä¸€å—è™šæ‹Ÿåœ°å€ç©ºé—´æ¥ï¼Œæ˜ å°„åˆ°ç›¸åŒçš„ç‰©ç†å†…å­˜ä¸­ã€‚è¿™æ ·è¿™ä¸ªè¿›ç¨‹å†™å…¥çš„ä¸œè¥¿ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹é©¬ä¸Šå°±èƒ½çœ‹åˆ°äº†ï¼Œéƒ½ä¸éœ€è¦æ‹·è´æ¥æ‹·è´å»ï¼Œä¼ æ¥ä¼ å»ï¼Œå¤§å¤§æé«˜äº†è¿›ç¨‹é—´é€šä¿¡çš„é€Ÿåº¦ã€‚</p><figure><img src="'+q+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="æ“ä½œç³»ç»ŸåŸå­æ“ä½œæ€ä¹ˆå®ç°çš„-2023-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#æ“ä½œç³»ç»ŸåŸå­æ“ä½œæ€ä¹ˆå®ç°çš„-2023-å­—èŠ‚" aria-hidden="true">#</a> æ“ä½œç³»ç»ŸåŸå­æ“ä½œæ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆ2023 å­—èŠ‚ï¼‰</h3><p>æ“ä½œç³»ç»Ÿä¸­çš„åŸå­æ€§æ“ä½œæ˜¯é€šè¿‡ç¡¬ä»¶å’Œè½¯ä»¶çš„æ”¯æŒæ¥å®ç°çš„ã€‚åœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼ŒåŸå­æ€§æ“ä½œéœ€è¦ä¿è¯åœ¨å¤šä¸ªæ ¸å¿ƒä¹‹é—´çš„å¹¶å‘æ‰§è¡Œä¸­çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</p><p>ç¡¬ä»¶å±‚é¢ä¸Šï¼Œç°ä»£å¤„ç†å™¨æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„æŒ‡ä»¤æˆ–æœºåˆ¶æ¥æ”¯æŒåŸå­æ€§æ“ä½œï¼Œä¾‹å¦‚åŸå­äº¤æ¢ï¼ˆatomic exchangeï¼‰ã€åŸå­æ¯”è¾ƒå¹¶äº¤æ¢ï¼ˆatomic compare-and-swapï¼‰ç­‰ã€‚è¿™äº›æŒ‡ä»¤èƒ½å¤Ÿåœ¨æ‰§è¡ŒæœŸé—´ç¦æ­¢ä¸­æ–­æˆ–å…¶ä»–æ ¸å¿ƒçš„å¹²æ‰°ï¼Œç¡®ä¿æ“ä½œçš„åŸå­æ€§ã€‚</p><p>è½¯ä»¶å±‚é¢ä¸Šï¼Œæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€äº›åŸå­æ€§æ“ä½œçš„æ¥å£æˆ–å‡½æ•°ï¼Œä¾‹å¦‚åŸå­æ“ä½œå‡½æ•°ï¼ˆatomic operationï¼‰ï¼Œå®ƒä»¬ä½¿ç”¨äº†ç¡¬ä»¶æä¾›çš„åŸå­æ€§æŒ‡ä»¤æ¥å®ç°åŸå­æ€§æ“ä½œã€‚è¿™äº›å‡½æ•°é€šå¸¸æ˜¯åœ¨å†…æ ¸æ€ä¸‹æ‰§è¡Œï¼Œå¯ä»¥ä¿è¯åœ¨å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹ä¹‹é—´çš„åŸå­æ€§ã€‚</p><p>æ“ä½œç³»ç»Ÿè¿˜å¯ä»¥ä½¿ç”¨é”æœºåˆ¶æ¥å®ç°åŸå­æ€§æ“ä½œã€‚ä¾‹å¦‚ï¼Œäº’æ–¥é”ï¼ˆmutexï¼‰å¯ä»¥ç”¨æ¥ä¿æŠ¤å…±äº«èµ„æºçš„è®¿é—®ï¼Œåªæœ‰æŒæœ‰é”çš„è¿›ç¨‹æˆ–çº¿ç¨‹å¯ä»¥è®¿é—®å…±äº«èµ„æºï¼Œå…¶ä»–è¿›ç¨‹æˆ–çº¿ç¨‹éœ€è¦ç­‰å¾…é”çš„é‡Šæ”¾ã€‚é€šè¿‡é”çš„æœºåˆ¶ï¼Œå¯ä»¥ä¿è¯å¯¹å…±äº«èµ„æºçš„åŸå­æ€§æ“ä½œã€‚</p><h2 id="æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æ•°æ®ç»“æ„" aria-hidden="true">#</a> æ•°æ®ç»“æ„</h2><h3 id="çº¢é»‘æ ‘è¯´ä¸€ä¸‹-è·³è¡¨è¯´ä¸€ä¸‹-2023-ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#çº¢é»‘æ ‘è¯´ä¸€ä¸‹-è·³è¡¨è¯´ä¸€ä¸‹-2023-ç¾å›¢" aria-hidden="true">#</a> çº¢é»‘æ ‘è¯´ä¸€ä¸‹ï¼Œè·³è¡¨è¯´ä¸€ä¸‹ï¼Ÿï¼ˆ2023 ç¾å›¢ï¼‰</h3><p>çº¢é»‘æ ‘ï¼ˆRed-Black Treeï¼‰æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒåœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œåèƒ½å¤Ÿé€šè¿‡æ—‹è½¬å’Œé‡æ–°ç€è‰²æ¥ä¿æŒæ ‘çš„å¹³è¡¡ã€‚çº¢é»‘æ ‘çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªé¢œè‰²ï¼Œçº¢è‰²æˆ–é»‘è‰²ã€‚</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ã€‚</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILèŠ‚ç‚¹ï¼‰éƒ½æ˜¯é»‘è‰²çš„ã€‚</li><li>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ã€‚</li><li>ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹æˆ–ç©ºå­èŠ‚ç‚¹çš„æ¯æ¡è·¯å¾„ä¸Šï¼Œé»‘è‰²èŠ‚ç‚¹çš„æ•°é‡æ˜¯ç›¸åŒçš„ã€‚</li></ol><p>çº¢é»‘æ ‘é€šè¿‡è¿™äº›ç‰¹æ€§æ¥ä¿æŒæ ‘çš„å¹³è¡¡ï¼Œç¡®ä¿æœ€é•¿è·¯å¾„ä¸è¶…è¿‡æœ€çŸ­è·¯å¾„çš„ä¸¤å€ï¼Œä»è€Œä¿è¯äº†åœ¨æœ€åæƒ…å†µä¸‹çš„æœç´¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(logN)ã€‚</p><figure><img src="'+R+'" alt="red-black-tree" tabindex="0" loading="lazy"><figcaption>red-black-tree</figcaption></figure><p>è·³è¡¨ï¼ˆSkip Listï¼‰æ˜¯ä¸€ç§åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒé€šè¿‡æ·»åŠ å¤šå±‚ç´¢å¼•æ¥åŠ é€Ÿæœç´¢æ“ä½œã€‚</p><figure><img src="'+A+`" alt="sorted-sets-skiplist" tabindex="0" loading="lazy"><figcaption>sorted-sets-skiplist</figcaption></figure><p>è·³è¡¨çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>è·³è¡¨ä¸­çš„æ•°æ®æ˜¯æœ‰åºçš„ã€‚</li><li>è·³è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€å±‚å’Œå³ä¾§èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</li></ol><p>è·³è¡¨é€šè¿‡å¤šå±‚ç´¢å¼•çš„æ–¹å¼æ¥åŠ é€Ÿæœç´¢æ“ä½œã€‚æœ€åº•å±‚æ˜¯ä¸€ä¸ªæ™®é€šçš„æœ‰åºé“¾è¡¨ï¼Œè€Œä¸Šé¢çš„æ¯ä¸€å±‚éƒ½æ˜¯å‰ä¸€å±‚çš„å­é›†ï¼Œæ¯ä¸ªèŠ‚ç‚¹åœ¨ä¸Šä¸€å±‚éƒ½æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å®ƒåœ¨ä¸‹ä¸€å±‚çš„å¯¹åº”èŠ‚ç‚¹ã€‚è¿™æ ·ï¼Œåœ¨æœç´¢æ—¶å¯ä»¥é€šè¿‡è·³è¿‡ä¸€äº›èŠ‚ç‚¹ï¼Œç›´æ¥è¿›å…¥ç›®æ ‡åŒºåŸŸï¼Œä»è€Œå‡å°‘æœç´¢çš„æ—¶é—´å¤æ‚åº¦ã€‚</p><p>è·³è¡¨çš„å¹³å‡æœç´¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(logN)ï¼Œä¸çº¢é»‘æ ‘ç›¸æ¯”ï¼Œè·³è¡¨çš„å®ç°æ›´åŠ ç®€å•ï¼Œä½†ç©ºé—´å¤æ‚åº¦ç¨é«˜ã€‚è·³è¡¨å¸¸ç”¨äºéœ€è¦é«˜æ•ˆæœç´¢å’Œæ’å…¥æ“ä½œçš„åœºæ™¯ï¼Œå¦‚æ•°æ®åº“ã€ç¼“å­˜ç­‰ã€‚</p><p>åœºæ™¯ï¼š</p><ul><li>epoll ç”¨äº†çº¢é»‘æ ‘æ¥ä¿å­˜ç›‘å¬çš„ socket</li><li>redis ç”¨äº†è·³è¡¨æ¥å®ç° zset</li></ul><h2 id="ğŸ¨-è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ğŸ¨-è®¾è®¡æ¨¡å¼" aria-hidden="true">#</a> ğŸ¨ è®¾è®¡æ¨¡å¼</h2><h3 id="é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«-2023å°çº¢ä¹¦" tabindex="-1"><a class="header-anchor" href="#é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«-2023å°çº¢ä¹¦" aria-hidden="true">#</a> é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆ2023å°çº¢ä¹¦ï¼‰</h3><ul><li><strong>é€‚é…å™¨æ¨¡å¼</strong>ï¼šé€‚é…å™¨æ¨¡å¼å°±åƒæ˜¯ä¸€ä¸ªç”µæºé€‚é…å™¨ï¼Œå®ƒå…è®¸ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£å¯ä»¥ä¸€èµ·å·¥ä½œã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç±»çš„æ¥å£ä¸å®¢æˆ·ç«¯ä»£ç éœ€è¦çš„æ¥å£ä¸ä¸€è‡´æ—¶ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªé€‚é…å™¨ç±»æ¥è½¬æ¢æ¥å£ï¼Œä½¿å¾—å®¢æˆ·ç«¯ä»£ç èƒ½å¤Ÿåˆ©ç”¨ç°æœ‰çš„ç±»ã€‚</li><li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼šè£…é¥°å™¨æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°å‘å¯¹è±¡æ·»åŠ é¢å¤–çš„èŒè´£ï¼Œè€Œä¸æ”¹å˜å…¶å®ç°ã€‚è£…é¥°å™¨å°è£…äº†ä¸€ä¸ªç±»ï¼Œå¹¶æä¾›å’Œè¯¥ç±»ç›¸åŒçš„æ¥å£ï¼Œä½†åœ¨è°ƒç”¨å…¶æ–¹æ³•æ—¶ï¼Œå¯ä»¥é¢å¤–æ‰§è¡Œä¸€äº›æ“ä½œã€‚è£…é¥°å™¨å¯ä»¥è¢«æ— é™åœ°å †å ï¼Œæ¯ä¸ªè£…é¥°å™¨éƒ½æ·»åŠ ä¸€äº›é¢å¤–çš„è¡Œä¸ºã€‚</li><li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šä»£ç†æ¨¡å¼åœ¨ä¸æ”¹å˜æ¥å£çš„å‰æä¸‹ï¼Œä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†æˆ–å ä½ç¬¦ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ä»£ç†å¯ä»¥ç”¨äºè®¸å¤šä¸åŒçš„ç›®çš„ï¼Œå¦‚å®‰å…¨æ§åˆ¶ã€å¤æ‚æ€§éšè—ã€å»¶è¿ŸåŠ è½½ç­‰ã€‚ä»£ç†é€šå¸¸æ§åˆ¶å¯¹å…¶å§”æ‰˜å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶å¯èƒ½é€‰æ‹©åˆ›å»ºæˆ–åˆ é™¤å®ƒã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œé€‚é…å™¨æ¨¡å¼ç”¨äºè®©ä¸å…¼å®¹çš„æ¥å£èƒ½å¤Ÿä¸€èµ·å·¥ä½œï¼Œè£…é¥°å™¨æ¨¡å¼ç”¨äºåŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼Œä»£ç†æ¨¡å¼ç”¨äºæ§åˆ¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p><h2 id="ğŸ–¼ï¸åœºæ™¯é¢˜" tabindex="-1"><a class="header-anchor" href="#ğŸ–¼ï¸åœºæ™¯é¢˜" aria-hidden="true">#</a> ğŸ–¼ï¸åœºæ™¯é¢˜</h2><h3 id="java-ç¨‹åºè¿è¡Œäº†ä¸€å‘¨-å‘ç°è€å¹´ä»£å†…å­˜æº¢å‡º-åˆ†æä¸€ä¸‹-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#java-ç¨‹åºè¿è¡Œäº†ä¸€å‘¨-å‘ç°è€å¹´ä»£å†…å­˜æº¢å‡º-åˆ†æä¸€ä¸‹-2023ç¾å›¢" aria-hidden="true">#</a> Java ç¨‹åºè¿è¡Œäº†ä¸€å‘¨ï¼Œå‘ç°è€å¹´ä»£å†…å­˜æº¢å‡ºï¼Œåˆ†æä¸€ä¸‹ï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>è€å¹´ä»£å†…å­˜æº¢å‡ºè¡¨ç°ä¸ºjava.lang.OutOfMemoryError: Java heap spaceï¼Œé€šå¸¸æ˜¯å› ä¸ºJavaå †å†…å­˜ä¸­é•¿æœŸå­˜æ´»çš„å¯¹è±¡å ç”¨çš„ç©ºé—´è¿‡å¤§ï¼Œå¯¼è‡´å†…å­˜æ— æ³•åˆ†é…ã€‚ä¸‹é¢ä»æµ…å…¥æ·±åˆ†æå¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ³•</p><ol><li><strong>å †å†…å­˜è®¾ç½®ä¸åˆç†</strong> é¦–å…ˆæ£€æŸ¥Javaå †å†…å­˜çš„é…ç½®æ˜¯å¦åˆé€‚ã€‚é€šè¿‡-Xmxå’Œ-Xmså‚æ•°è®¾ç½®å †å†…å­˜çš„æœ€å¤§å€¼å’Œåˆå§‹å€¼ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®æˆ–è®¾ç½®è¿‡å°ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚å’Œç¡¬ä»¶æ¡ä»¶é€‚å½“è°ƒæ•´è¿™ä¸¤ä¸ªå‚æ•°çš„å¤§å°ã€‚</li><li><strong>é•¿æœŸå­˜æ´»å¯¹è±¡è¿‡å¤š</strong> æ£€æŸ¥ç¨‹åºä¸­æ˜¯å¦å­˜åœ¨å¤§é‡çš„é•¿æœŸå­˜æ´»å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡ä¼šå¯¼è‡´è€å¹´ä»£ç©ºé—´ä¸è¶³ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•è§£å†³ï¼š</li></ol><ul><li>ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘é•¿æœŸå­˜æ´»å¯¹è±¡çš„æ•°é‡ã€‚</li><li>ä½¿ç”¨ç¼“å­˜ç­–ç•¥ï¼Œå¦‚LRUç®—æ³•ï¼Œé™åˆ¶ç¼“å­˜å¯¹è±¡çš„æ•°é‡ã€‚</li><li>ä½¿ç”¨å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ï¼Œä½¿å¾—åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚</li></ul><ol start="3"><li><strong>å†…å­˜æ³„æ¼</strong> å†…å­˜æ³„æ¼æ˜¯æŒ‡ç¨‹åºä¸­é”™è¯¯åœ°æŒæœ‰äº†ä¸å†éœ€è¦çš„å¯¹è±¡å¼•ç”¨ï¼Œå¯¼è‡´è¿™äº›å¯¹è±¡æ— æ³•è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚éœ€è¦æ£€æŸ¥ä»£ç ï¼Œæ’æŸ¥å¯èƒ½çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚ä»¥ä¸‹å‡ ç§åœºæ™¯å®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼ï¼š</li></ol><ul><li>é™æ€é›†åˆç±»ï¼ˆå¦‚HashMapã€ArrayListç­‰ï¼‰ä¸­çš„å¯¹è±¡æ²¡æœ‰è¢«ç§»é™¤ã€‚</li><li>ç›‘å¬å™¨æˆ–å›è°ƒæ²¡æœ‰è¢«æ­£ç¡®æ³¨é”€ã€‚</li><li>çº¿ç¨‹æ± æˆ–æ•°æ®åº“è¿æ¥æ± æ²¡æœ‰æ­£ç¡®å…³é—­ã€‚</li></ul><ol start="4"><li><strong>ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·</strong> ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·ï¼ˆå¦‚VisualVMã€MATç­‰ï¼‰å¯¹ç¨‹åºè¿›è¡Œå†…å­˜åˆ†æï¼Œæ‰¾å‡ºå†…å­˜å ç”¨çš„ç“¶é¢ˆå’Œå†…å­˜æ³„æ¼çš„åœ°æ–¹ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</li></ol><ul><li>è·å–å †å†…å­˜å¿«ç…§ï¼ˆHeap Dumpï¼‰ã€‚</li><li>åˆ†æå¿«ç…§ï¼Œæ‰¾å‡ºå†…å­˜å ç”¨æœ€å¤§çš„å¯¹è±¡ã€‚</li><li>åˆ†æå¯¹è±¡çš„å¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæŒæœ‰è¿™äº›å¯¹è±¡å¼•ç”¨çš„åœ°æ–¹ã€‚</li><li>æ ¹æ®åˆ†æç»“æœï¼Œä¿®æ”¹ä»£ç ï¼Œè§£å†³å†…å­˜é—®é¢˜ã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå‘ç”Ÿè€å¹´ä»£å†…å­˜æº¢å‡ºæ—¶ï¼Œå¯ä»¥ä»è®¾ç½®åˆç†çš„å †å†…å­˜å¤§å°ã€ä¼˜åŒ–ä»£ç å‡å°‘é•¿æœŸå­˜æ´»å¯¹è±¡ã€æ’æŸ¥å†…å­˜æ³„æ¼ã€ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·å’Œåƒåœ¾å›æ”¶å™¨è°ƒä¼˜ç­‰æ–¹é¢å…¥æ‰‹ï¼Œå…¨é¢åˆ†æå’Œè§£å†³é—®é¢˜ã€‚</p><h3 id="å¦‚æœæ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯-5-å·²ç»å¯åŠ¨-4-ä¸ªä»»åŠ¡-åé¢åˆè¿›æ¥-1-ä¸ª-æ˜¯ä¼˜å…ˆå¤ç”¨å‰é¢å››ä¸ªä»»åŠ¡ä¸­çš„ç©ºé—²çº¿ç¨‹è¿˜æ˜¯é‡æ–°åˆ›å»ºæ–°çº¿ç¨‹-2023å®Œç¾ä¸–ç•Œ" tabindex="-1"><a class="header-anchor" href="#å¦‚æœæ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯-5-å·²ç»å¯åŠ¨-4-ä¸ªä»»åŠ¡-åé¢åˆè¿›æ¥-1-ä¸ª-æ˜¯ä¼˜å…ˆå¤ç”¨å‰é¢å››ä¸ªä»»åŠ¡ä¸­çš„ç©ºé—²çº¿ç¨‹è¿˜æ˜¯é‡æ–°åˆ›å»ºæ–°çº¿ç¨‹-2023å®Œç¾ä¸–ç•Œ" aria-hidden="true">#</a> å¦‚æœæ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯ 5ï¼Œå·²ç»å¯åŠ¨ 4 ä¸ªä»»åŠ¡ï¼Œåé¢åˆè¿›æ¥ 1 ä¸ªï¼Œæ˜¯ä¼˜å…ˆå¤ç”¨å‰é¢å››ä¸ªä»»åŠ¡ä¸­çš„ç©ºé—²çº¿ç¨‹è¿˜æ˜¯é‡æ–°åˆ›å»ºæ–°çº¿ç¨‹ï¼ˆ2023å®Œç¾ä¸–ç•Œï¼‰</h3><blockquote><p>çº¿ç¨‹æ± æ˜¯ä¸ºäº†é™åˆ¶ç³»ç»Ÿä¸­æ‰§è¡Œçº¿ç¨‹çš„æ•°é‡ã€‚æ ¹æ®ç³»ç»Ÿçš„ä»»åŠ¡è´Ÿè½½å’Œèµ„æºå®¹é‡ï¼Œçº¿ç¨‹æ± å¯ä»¥çµæ´»åœ°è°ƒæ•´çº¿ç¨‹çš„æ•°é‡ï¼Œä¼˜åŒ–çº¿ç¨‹çš„ç®¡ç†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯å¸¦æ¥çš„é¢å¤–å¼€é”€ã€‚</p></blockquote><p>è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå–å†³äºä½ ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆæ ·çš„çº¿ç¨‹æ± ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Javaçš„ThreadPoolExecutorçº¿ç¨‹æ± ï¼Œå…¶è¡Œä¸ºä¼šæŒ‰ç…§ä»¥ä¸‹è§„åˆ™ï¼š</p><ol><li>å¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡å°äºæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå³ä½¿çº¿ç¨‹æ± ä¸­å­˜åœ¨ç©ºé—²çº¿ç¨‹ï¼Œæ–°ä»»åŠ¡åˆ°æ¥ä¹Ÿä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹å¤„ç†ä»»åŠ¡ã€‚</li><li>åªæœ‰åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å·²ç»è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œä½†æ˜¯ä»»åŠ¡é˜Ÿåˆ—æœªæ»¡æ—¶ï¼Œæ–°ä»»åŠ¡ä¼šè¢«æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</li><li>å¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡ç­‰äºæœ€å¤§çº¿ç¨‹æ•°ä¸”ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œæ–°ä»»åŠ¡å°†ä¼šè¢«æ‹’ç»ã€‚ æ‰€ä»¥ï¼Œåœ¨ä½ æä¾›çš„è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœçº¿ç¨‹æ± ä½¿ç”¨çš„æ˜¯Javaçš„ThreadPoolExecutorï¼Œä¸”æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯5ï¼Œå·²ç»å¯åŠ¨4ä¸ªä»»åŠ¡ï¼Œåé¢åˆè¿›æ¥1ä¸ªä»»åŠ¡ï¼Œä¼šæ–°å¼€ä¸€ä¸ªçº¿ç¨‹å¤„ç†æ–°çš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯å¤ç”¨å‰é¢å››ä¸ªä»»åŠ¡ä¸­çš„ç©ºé—²çº¿ç¨‹ã€‚è¿™æ˜¯å› ä¸ºæ ¸å¿ƒçº¿ç¨‹æ•°æ²¡æœ‰è¢«ç”¨å®Œï¼Œçº¿ç¨‹æ± ä¼šä¼˜å…ˆåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚</li></ol><h3 id="å¦‚æœå¤§é‡è¯·æ±‚è¿›æ¥ä½ æ€ä¹ˆé™æµ-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å¦‚æœå¤§é‡è¯·æ±‚è¿›æ¥ä½ æ€ä¹ˆé™æµ-2023ç¾å›¢" aria-hidden="true">#</a> å¦‚æœå¤§é‡è¯·æ±‚è¿›æ¥ä½ æ€ä¹ˆé™æµï¼ˆ2023ç¾å›¢ï¼‰</h3><p>ä¸€äº›é€šç”¨çš„é™æµæ‰‹æ®µæ˜¯ï¼š</p><ol><li><strong>ä»¤ç‰Œæ¡¶</strong>ï¼šåœ¨ä»¤ç‰Œæ¡¶é™æµç­–ç•¥ä¸­ï¼Œç³»ç»Ÿæœ‰ä¸€ä¸ªä»¤ç‰Œæ¡¶ï¼Œæ¡¶ä¸­çš„ä»¤ç‰Œä»¥ä¸€å®šçš„é€Ÿç‡è¢«æ·»åŠ ã€‚å½“ä¸€ä¸ªæ–°çš„è¯·æ±‚åˆ°æ¥æ—¶ï¼Œç³»ç»Ÿä¼šä»æ¡¶ä¸­å–å‡ºä¸€ä¸ªä»¤ç‰Œã€‚å¦‚æœæ¡¶æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆæ–°çš„è¯·æ±‚å°±ä¼šè¢«æ‹’ç»ã€‚è¿™ç§ç­–ç•¥å…è®¸çªç„¶çš„å¤§é‡è¯·æ±‚ï¼Œåªè¦æ¡¶ä¸­æœ‰è¶³å¤Ÿçš„ä»¤ç‰Œã€‚åœ¨SpringCloudä¸­å¯ä»¥ä½¿ç”¨spring-boot-starter-data-redis-reactiveçš„ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œæ ¹æ®Spring Cloud Gatewayçš„å®¢æˆ·ç«¯å®é™…IPåœ°å€é™åˆ¶ä¼ å…¥è¯·æ±‚çš„é€Ÿç‡ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œå¯ä»¥åœ¨è·¯ç”±ä¸Šè®¾ç½®RequestRateLimiterè¿‡æ»¤å™¨ï¼Œç„¶åé…ç½®ç½‘å…³ä½¿ç”¨IPåœ°å€é™åˆ¶å”¯ä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ åœ¨Spring Cloudä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ•´åˆRedisä»¥åŠä½¿ç”¨Reactiveç¼–ç¨‹æ¨¡å¼æ¥å®ç°ä»¤ç‰Œæ¡¶ç®—æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æ­¥éª¤ï¼š</li></ol><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ç›¸å…³çš„ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis-reactive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä½ çš„Spring Cloud Gatewayåº”ç”¨ä¸­ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„GatewayFilterã€‚æ­¤è¿‡æ»¤å™¨å°†è´Ÿè´£æ£€æŸ¥æ¯ä¸ªè¯·æ±‚çš„IPåœ°å€ï¼Œå¹¶é™åˆ¶æ¯ä¸ªIPåœ°å€çš„è¯·æ±‚é€Ÿç‡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RateLimiterFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GatewayFilterFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RateLimiterFilter<span class="token punctuation">.</span>Config</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">RateLimiterService</span> rateLimiterService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RateLimiterFilter</span><span class="token punctuation">(</span><span class="token class-name">RateLimiterService</span> rateLimiterService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rateLimiterService <span class="token operator">=</span> rateLimiterService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">GatewayFilter</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">Config</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>exchange<span class="token punctuation">,</span> chain<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å–è¯·æ±‚çš„IPåœ°å€</span>
            <span class="token class-name">String</span> ipAddress <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rateLimiterService<span class="token punctuation">.</span><span class="token function">isAllowed</span><span class="token punctuation">(</span>ipAddress<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å¦‚æœè¶…è¿‡äº†é™åˆ¶ï¼Œè¿”å›429çŠ¶æ€ç ï¼ˆToo Many Requestsï¼‰</span>
                <span class="token keyword">return</span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ResponseStatusException</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">TOO_MANY_REQUESTS</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>
        <span class="token comment">// é…ç½®å±æ€§å¯ä»¥åœ¨è¿™é‡Œå®šä¹‰</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªRateLimiterServiceï¼Œåœ¨è¿™ä¸ªæœåŠ¡ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•å’ŒReactive Redisæ“ä½œå®ç°è¯·æ±‚é€Ÿç‡çš„é™åˆ¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RateLimiterService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReactiveStringRedisTemplate</span> redisTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RateLimiterService</span><span class="token punctuation">(</span><span class="token class-name">ReactiveStringRedisTemplate</span> redisTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>redisTemplate <span class="token operator">=</span> redisTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAllowed</span><span class="token punctuation">(</span><span class="token class-name">String</span> ipAddress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä½¿ç”¨Rediså’Œä»¤ç‰Œæ¡¶ç®—æ³•å®ç°é€Ÿç‡é™åˆ¶çš„é€»è¾‘</span>
        <span class="token comment">// è¿™ä¸ªéƒ¨åˆ†éœ€è¦æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚æ¥å®ç°</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œåœ¨ä½ çš„è·¯ç”±é…ç½®ä¸­ä½¿ç”¨è¿™ä¸ªè¿‡æ»¤å™¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">customRouteLocator</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">,</span> <span class="token class-name">RateLimiterFilter</span> rateLimiterFilter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span>r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/some-path/**&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-&gt;</span> f<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>rateLimiterFilter<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RateLimiterFilter<span class="token punctuation">.</span>Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;lb://some-service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>Sentinel é€šè¿‡æ³¨è§£ï¼ˆ@SentinelResourceï¼‰</strong> çš„æ–¹å¼å°†æŸä¸ªæ–¹æ³•æˆ–è€…èµ„æºæ ‡è®°ä¸ºå—ä¿æŠ¤çš„èµ„æºï¼Œç„¶åå¯ä»¥å¯¹è¿™äº›èµ„æºè®¾ç½®å„ç§è§„åˆ™ï¼Œæ¯”å¦‚ QPS é™æµï¼Œæ»‘åŠ¨çª—å£é™æµç­‰ã€‚</li></ol><p>ä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> blockHandler <span class="token operator">=</span> <span class="token string">&quot;exceptionHandler&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// your logic here</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œtest æ–¹æ³•è¢«æ ‡è®°ä¸ºå— Sentinel ä¿æŠ¤çš„èµ„æºï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨é¢‘ç‡è¶…è¿‡äº†è®¾å®šçš„é™åˆ¶ï¼ŒSentinel å°±ä¼šè°ƒç”¨ exceptionHandler æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p><ol start="3"><li>ä½¿ç”¨<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong> (MQ) è¿›è¡Œé™æµä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§çš„åšæ³•ã€‚é€šè¿‡å°†è¯·æ±‚æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç„¶åé€šè¿‡è°ƒæ•´å¤„ç†è¯·æ±‚çš„é€Ÿåº¦æ¥å®ç°é™æµã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ RabbitMQã€Kafka ç­‰æ¶ˆæ¯é˜Ÿåˆ—æŠ€æœ¯ï¼Œè¿™ç§æ–¹å¼ä¹Ÿå¯ä»¥èµ·åˆ°å¼‚æ­¥å¤„ç†çš„ä½œç”¨ï¼Œæé«˜ç³»ç»Ÿçš„ååé‡ã€‚</li></ol><h3 id="å†™-mq-æ—¶ç¨‹åºå®•æœºäº†æ€ä¹ˆåŠ-2023ç¾å›¢" tabindex="-1"><a class="header-anchor" href="#å†™-mq-æ—¶ç¨‹åºå®•æœºäº†æ€ä¹ˆåŠ-2023ç¾å›¢" aria-hidden="true">#</a> å†™ MQ æ—¶ç¨‹åºå®•æœºäº†æ€ä¹ˆåŠï¼Ÿï¼ˆ2023ç¾å›¢ï¼‰</h3><p>å¦‚æœåœ¨ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰æ—¶ï¼Œç”Ÿäº§è€…ï¼ˆProducerï¼‰ç¨‹åºåœ¨å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—æ—¶å®•æœºï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šé¢ä¸´æ¶ˆæ¯ä¸¢å¤±çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯è¡Œçš„è§£å†³æ–¹æ¡ˆï¼š</p><ol><li><strong>æ¶ˆæ¯æŒä¹…åŒ–</strong>ï¼šå¤§å¤šæ•°æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿï¼ˆå¦‚RabbitMQï¼ŒKafkaï¼‰éƒ½æ”¯æŒæ¶ˆæ¯çš„æŒä¹…åŒ–ã€‚æŒä¹…åŒ–çš„æ¶ˆæ¯å³ä½¿åœ¨å®•æœºæƒ…å†µä¸‹ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œå› ä¸ºå®ƒä»¬è¢«å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚å½“æœåŠ¡å™¨æ¢å¤åï¼Œå¯ä»¥ç»§ç»­ä»å­˜å‚¨ä»‹è´¨ä¸Šè¯»å–å¹¶å¤„ç†è¿™äº›æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨æŒä¹…åŒ–ä¼šå¢åŠ ç³»ç»Ÿçš„å¼€é”€å¹¶å¯èƒ½å½±å“æ€§èƒ½ã€‚</li><li><strong>é«˜å¯ç”¨é…ç½®</strong>ï¼šé…ç½®é«˜å¯ç”¨é›†ç¾¤å¯ä»¥æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚å¯¹äºKafkaï¼Œå¯ä»¥é…ç½®å¤šä¸ªå‰¯æœ¬ï¼Œå½“æŸä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹å¯ä»¥ç»§ç»­æä¾›æœåŠ¡ã€‚RabbitMQ ä¹Ÿæ”¯æŒç±»ä¼¼çš„é•œåƒé˜Ÿåˆ—ï¼ˆMirrored Queuesï¼‰æœºåˆ¶ã€‚</li><li><strong>ç”Ÿäº§è€…ç¡®è®¤æœºåˆ¶</strong>ï¼šè®¸å¤šæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿæä¾›äº†ç”Ÿäº§è€…ç¡®è®¤ï¼ˆProducer Acknowledgmentsï¼‰æœºåˆ¶ï¼Œç”Ÿäº§è€…åªæœ‰åœ¨æ”¶åˆ°æ¶ˆæ¯å·²æˆåŠŸå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—çš„ç¡®è®¤åï¼Œæ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å·²æˆåŠŸå‘é€ã€‚è¿™æ ·ï¼Œå¦‚æœåœ¨å†™å…¥è¿‡ç¨‹ä¸­æœåŠ¡å™¨å®•æœºï¼Œç”Ÿäº§è€…çŸ¥é“æ¶ˆæ¯æ²¡æœ‰æˆåŠŸå‘é€ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æœåŠ¡å™¨æ¢å¤åé‡æ–°å‘é€ã€‚</li><li><strong>ä½¿ç”¨äº‹åŠ¡</strong>ï¼šå¦‚æœä½ çš„åº”ç”¨åœºæ™¯å…è®¸ï¼Œä½ å¯ä»¥ä½¿ç”¨äº‹åŠ¡æ¥ç¡®ä¿æ¶ˆæ¯çš„å®Œæ•´æ€§ã€‚åœ¨ä¸€æ¬¡äº‹åŠ¡ä¸­ï¼Œä½ å¯ä»¥å°†æ¶ˆæ¯çš„å‘é€å’Œä½ çš„ä¸šåŠ¡æ“ä½œæ”¾åœ¨ä¸€èµ·ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨äº‹åŠ¡ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å¯èƒ½å½±å“æ€§èƒ½ã€‚</li><li><strong>å¼‚æ­¥å†™å…¥ + æœ¬åœ°æ—¥å¿—</strong>ï¼šå¯¹äºéå¸¸å…³é”®çš„æ¶ˆæ¯ï¼Œå¯ä»¥é‡‡å–å¼‚æ­¥å†™å…¥+æœ¬åœ°æ—¥å¿—çš„æ–¹å¼ã€‚å…ˆå°†æ¶ˆæ¯å†™å…¥æœ¬åœ°æ—¥å¿—ï¼Œç„¶åå†å¼‚æ­¥å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚æœæ¶ˆæ¯é˜Ÿåˆ—å†™å…¥å¤±è´¥ï¼Œé€šè¿‡åå°è¿›ç¨‹é‡è¯•ï¼Œç›´åˆ°å†™å…¥æˆåŠŸã€‚</li></ol><p>åœ¨è®¾è®¡å’Œé€‰æ‹©æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦æ ¹æ®ä½ çš„åº”ç”¨çš„å…·ä½“éœ€æ±‚å’Œå¯æ¥å—çš„å¤æ‚æ€§è¿›è¡Œæƒè¡¡ã€‚ä¾‹å¦‚ï¼Œä½ éœ€è¦è€ƒè™‘ä½ çš„åº”ç”¨æ˜¯å¦èƒ½æ¥å—æ¶ˆæ¯çš„ä¸¢å¤±ï¼Œæ˜¯å¦éœ€è¦ä¿è¯æ¶ˆæ¯çš„é¡ºåºï¼Œä½ çš„ç³»ç»Ÿæ˜¯å¦èƒ½æ‰¿å—æŒä¹…åŒ–å’Œäº‹åŠ¡çš„å¼€é”€ï¼Œä»¥åŠä½ çš„ç³»ç»Ÿæ˜¯å¦æœ‰è¶³å¤Ÿçš„èµ„æºæ¥æ”¯æŒé«˜å¯ç”¨é…ç½®ã€‚</p><h3 id="ç§’æ€åœºæ™¯ä¸‹æ‰£å‡åº“å­˜å¤ªæ…¢äº†æ€ä¹ˆåŠ-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#ç§’æ€åœºæ™¯ä¸‹æ‰£å‡åº“å­˜å¤ªæ…¢äº†æ€ä¹ˆåŠ-2023-æ»´æ»´" aria-hidden="true">#</a> ç§’æ€åœºæ™¯ä¸‹æ‰£å‡åº“å­˜å¤ªæ…¢äº†æ€ä¹ˆåŠï¼Ÿï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>å¦‚æœåœ¨ç§’æ€åœºæ™¯ä¸‹æ‰£å‡åº“å­˜çš„è¿‡ç¨‹å¤ªæ…¢ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿçš„å“åº”æ—¶é—´å˜é•¿ï¼Œç”¨æˆ·ä½“éªŒä¸‹é™ï¼Œç”šè‡³ç³»ç»Ÿè¿‡è½½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¼˜åŒ–æ‰£å‡åº“å­˜è¿‡ç¨‹çš„å»ºè®®ï¼š</p><ol><li><strong>ä½¿ç”¨å†…å­˜æ•°æ®åº“</strong>ï¼šç›¸æ¯”äºä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ï¼Œå†…å­˜æ•°æ®åº“å¦‚Redisçš„è¯»å†™é€Ÿåº¦æ›´å¿«ï¼Œé€‚åˆå¤„ç†é«˜å¹¶å‘è¯·æ±‚ã€‚ä½ å¯ä»¥åœ¨æ´»åŠ¨å¼€å§‹å‰å°†åº“å­˜ä¿¡æ¯é¢„åŠ è½½åˆ°Redisä¸­ï¼Œç”¨æˆ·æŠ¢è´­æ—¶ç›´æ¥åœ¨Redisä¸­æ‰£å‡åº“å­˜ï¼Œæ´»åŠ¨ç»“æŸåå†å°†Redisä¸­çš„æ•°æ®åŒæ­¥å›æ•°æ®åº“ã€‚</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šç”¨æˆ·çš„æŠ¢è´­è¯·æ±‚å¯ä»¥å…ˆè¿›å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±åå°æœåŠ¡å¼‚æ­¥å¤„ç†ã€‚è¿™æ ·ç”¨æˆ·çš„è¯·æ±‚å°±å¯ä»¥ç«‹å³å¾—åˆ°å“åº”ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶ä¹Ÿå‡è½»äº†æœåŠ¡å™¨çš„å‹åŠ›ã€‚</li><li><strong>æ•°æ®åº“ä¼˜åŒ–</strong>ï¼šå¦‚æœä»ç„¶ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡æ•°æ®åº“å±‚é¢çš„ä¼˜åŒ–æ¥æé«˜æ•ˆç‡ï¼Œä¾‹å¦‚é€‰æ‹©åˆé€‚çš„ç´¢å¼•ã€è°ƒæ•´äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€ä½¿ç”¨æ‰¹å¤„ç†ç­‰ã€‚</li><li><strong>å‡å°‘æ•°æ®åº“æ“ä½œ</strong>ï¼šæ¯æ¬¡æ‰£å‡åº“å­˜æ—¶éƒ½éœ€è¦æ›´æ–°æ•°æ®åº“ï¼Œè¿™ä¼šå ç”¨å¤§é‡çš„I/Oèµ„æºã€‚ä½ å¯ä»¥é‡‡ç”¨ä¸€äº›æ–¹æ³•æ¥å‡å°‘æ•°æ®åº“æ“ä½œï¼Œä¾‹å¦‚å°†ç”¨æˆ·çš„è¯·æ±‚å…ˆæš‚å­˜èµ·æ¥ï¼Œå½“ç§¯ç´¯åˆ°ä¸€å®šæ•°é‡æˆ–è€…è¿‡äº†ä¸€æ®µæ—¶é—´åå†æ‰¹é‡æ›´æ–°åˆ°æ•°æ®åº“ã€‚</li><li><strong>ä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ï¼šå¦‚æœä½ çš„ç³»ç»Ÿè§„æ¨¡è¾ƒå¤§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿæ¥åˆ†æ‹…å‹åŠ›ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼æ•°æ®åº“ã€åˆ†å¸ƒå¼ç¼“å­˜ã€åˆ†å¸ƒå¼è®¡ç®—ç­‰æŠ€æœ¯ã€‚</li></ol><h3 id="çŸ­ä¿¡ç™»å½•çš„çŸ­ä¿¡æ€ä¹ˆå‘é€çš„-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#çŸ­ä¿¡ç™»å½•çš„çŸ­ä¿¡æ€ä¹ˆå‘é€çš„-2023-æ»´æ»´" aria-hidden="true">#</a> çŸ­ä¿¡ç™»å½•çš„çŸ­ä¿¡æ€ä¹ˆå‘é€çš„ï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>çŸ­ä¿¡ç™»å½•çš„è¿‡ç¨‹é€šå¸¸å¦‚ä¸‹ï¼š</p><ol><li>ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºæˆ–ç½‘ç«™ä¸Šè¾“å…¥æ‰‹æœºå·ç ã€‚</li><li>ç³»ç»ŸéªŒè¯è¯¥æ‰‹æœºå·ç çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚</li><li>å¦‚æœæ‰‹æœºå·ç æ­£ç¡®ï¼Œç³»ç»Ÿå°†ç”Ÿæˆä¸€ä¸ªéšæœºçš„éªŒè¯ç ã€‚</li><li>ç³»ç»Ÿä½¿ç”¨çŸ­ä¿¡æœåŠ¡æä¾›å•†ï¼ˆå¦‚Twilio, Alibaba SMS Serviceç­‰ï¼‰å°†éªŒè¯ç ä½œä¸ºçŸ­ä¿¡å‘é€åˆ°ç”¨æˆ·çš„æ‰‹æœºå·ç ä¸Šã€‚</li><li>ç”¨æˆ·æ”¶åˆ°çŸ­ä¿¡åï¼Œå°†éªŒè¯ç è¾“å…¥åº”ç”¨ç¨‹åºæˆ–ç½‘ç«™ã€‚</li><li>ç³»ç»ŸéªŒè¯è¾“å…¥çš„éªŒè¯ç æ˜¯å¦ä¸å‘é€çš„éªŒè¯ç ä¸€è‡´ã€‚</li><li>å¦‚æœä¸€è‡´ï¼Œç³»ç»Ÿå…è®¸ç”¨æˆ·ç™»å½•ã€‚</li></ol><h3 id="æ—è·¯ç¼“å­˜æœºåˆ¶å…·ä½“è§£å†³çš„ä»€ä¹ˆåœºæ™¯-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#æ—è·¯ç¼“å­˜æœºåˆ¶å…·ä½“è§£å†³çš„ä»€ä¹ˆåœºæ™¯-2023-æ»´æ»´" aria-hidden="true">#</a> æ—è·¯ç¼“å­˜æœºåˆ¶å…·ä½“è§£å†³çš„ä»€ä¹ˆåœºæ™¯ï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>æ—è·¯ç¼“å­˜ï¼ˆSidecar Cachingï¼‰æ˜¯ä¸€ç§åœ¨è·å–æ•°æ®æ—¶é¿å…ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜é›ªå´©ç­‰é—®é¢˜çš„ç­–ç•¥ã€‚åœ¨ä½¿ç”¨Redisä½œä¸ºç¼“å­˜ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ—è·¯ç¼“å­˜ç­–ç•¥æ¥æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</p><p>æ—è·¯ç¼“å­˜ä¸æ™®é€šç¼“å­˜çš„ä¸»è¦åŒºåˆ«åœ¨äºå…¶å¤„ç†ç¼“å­˜æœªå‘½ä¸­çš„ç­–ç•¥ã€‚æ™®é€šç¼“å­˜åœ¨æœªå‘½ä¸­æ—¶ä¼šç›´æ¥è®©æ‰€æœ‰ç›¸å…³çš„è¯·æ±‚å»æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œä½†è¿™åœ¨é«˜å¹¶å‘çš„ç¯å¢ƒä¸­å¯èƒ½å¯¼è‡´æ•°æ®åº“çš„è´Ÿè½½è¿‡å¤§ã€‚å¦å¤–ï¼Œå¦‚æœæ•°æ®åº“ä¸­ä¹Ÿæ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆè¿™äº›è¯·æ±‚å¯èƒ½ä¼šé‡å¤åœ°æŸ¥è¯¢æ•°æ®åº“ï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸ºç¼“å­˜ç©¿é€ã€‚</p><p>æ—è·¯ç¼“å­˜ç­–ç•¥åˆ™åœ¨ç¼“å­˜æœªå‘½ä¸­æ—¶ï¼Œä¼šå…ˆå°†æ‰€æœ‰è¯·æ±‚æš‚æ—¶æŒ‚èµ·ï¼Œç„¶åç”±ä¸€ä¸ªä¸“é—¨çš„çº¿ç¨‹æˆ–è¿›ç¨‹å»æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶æ›´æ–°ç¼“å­˜ã€‚è¿™æ ·ï¼Œå…¶ä»–çš„è¯·æ±‚åªéœ€è¦ç­‰å¾…ç¼“å­˜è¢«æ›´æ–°ï¼Œè€Œä¸éœ€è¦è‡ªå·±å»æ•°æ®åº“ä¸­è·å–æ•°æ®ã€‚è¿™å¯ä»¥æœ‰æ•ˆåœ°é™ä½æ•°æ®åº“çš„è´Ÿè½½ï¼Œå¹¶ä¸”å‡å°‘ç¼“å­˜ç©¿é€çš„å¯èƒ½ã€‚</p><p>æ—è·¯ç¼“å­˜çš„ç›®çš„ä¸»è¦æ˜¯ä¿æŠ¤æ•°æ®åº“ï¼Œé˜²æ­¢åœ¨é«˜å¹¶å‘çš„ç¯å¢ƒä¸‹ç”±äºç¼“å­˜æœªå‘½ä¸­å¯¼è‡´æ•°æ®åº“çš„è´Ÿè½½è¿‡å¤§ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥å‡å°‘ç¼“å­˜ç©¿é€çš„å¯èƒ½ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</p><p>å†™ï¼š</p><ul><li>å…ˆæ›´æ–°DBã€‚</li><li>ç„¶åç›´æ¥åˆ é™¤cacheã€‚ <img src="`+P+'" alt="" loading="lazy"></li></ul><p>è¯»ï¼š</p><ul><li>ä»cacheä¸­è¯»å–æ•°æ®ï¼Œè¯»å–åˆ°å°±ç›´æ¥è¿”å›ã€‚</li><li>cacheä¸­è¯»å–ä¸åˆ°çš„è¯ï¼Œå°±ä»DBè¯»å–è¿”å›ã€‚</li><li>å†æŠŠæ•°æ®å†™åˆ°cacheä¸­ã€‚ <img src="'+E+`" alt="" loading="lazy"></li></ul><blockquote><p><strong>å¦‚æœåœ¨å†™æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å…ˆåˆ é™¤cacheï¼Œå†æ›´æ–°DBå—ï¼Ÿ</strong> åœ¨å†™å…¥æ•°æ®æ—¶ï¼Œé‡‡ç”¨â€œå…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“â€çš„ç­–ç•¥æ˜¯ä¸€ç§å¸¸è§çš„åšæ³•ã€‚è¿™ç§ç­–ç•¥è¢«ç§°ä¸º&quot;Cache-Aside&quot;æ¨¡å¼æˆ–&quot;å…ˆåˆ åå†™&quot;ç­–ç•¥ã€‚ å…¶ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ é™¤ç¼“å­˜ï¼šåœ¨æ›´æ–°æ•°æ®åº“ä¹‹å‰ï¼Œé¦–å…ˆåˆ é™¤å¯¹åº”çš„ç¼“å­˜æ•°æ®ã€‚</li><li>æ›´æ–°æ•°æ®åº“ï¼šåˆ é™¤ç¼“å­˜åï¼Œå†å»æ›´æ–°æ•°æ®åº“ã€‚ ä½†è¿™ä¸ªç­–ç•¥éœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœåœ¨ä½ åˆ é™¤äº†ç¼“å­˜åï¼Œå’Œæ•°æ®åº“æ›´æ–°ä¹‹é—´çš„è¿™æ®µæ—¶é—´é‡Œï¼Œå¦‚æœæœ‰å…¶ä»–è¯·æ±‚æŸ¥è¯¢è¿™ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆè¿™ä¸ªæŸ¥è¯¢è¯·æ±‚å¯èƒ½ä¼šå› ä¸ºåœ¨ç¼“å­˜ä¸­æ²¡æ‰¾åˆ°æ•°æ®ï¼Œå»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶å°†æŸ¥è¯¢ç»“æœå†™å…¥ç¼“å­˜ã€‚è¿™æ—¶ï¼Œå†å»æ›´æ–°æ•°æ®åº“å°±å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜ä¸æ•°æ®åº“ä¸­çš„æ•°æ®ä¸ä¸€è‡´ã€‚ ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¸ºâ€œè¯»å†™é”â€çš„æœºåˆ¶ã€‚åœ¨æ›´æ–°æ•°æ®æ—¶ï¼Œé¦–å…ˆè·å–å†™é”ï¼Œç„¶ååˆ é™¤ç¼“å­˜å¹¶æ›´æ–°æ•°æ®åº“ï¼Œæœ€åé‡Šæ”¾å†™é”ã€‚åœ¨è¯»å–æ•°æ®æ—¶ï¼Œé¦–å…ˆè·å–è¯»é”ï¼Œç„¶åä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œå°±å»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶æ›´æ–°ç¼“å­˜ï¼Œæœ€åé‡Šæ”¾è¯»é”ã€‚è¿™æ ·å°±å¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li></ol></blockquote><blockquote><p><strong>å¦‚æœå…ˆå†™BDï¼Œå†åˆ é™¤cacheå°±ä¸ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´äº†å—ï¼Ÿ</strong> &quot;å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜&quot;ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„å¤„ç†æ–¹å¼ï¼Œå…¶ç†è®ºä¸Šå¯ä»¥é¿å…&quot;å…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“&quot;ç­–ç•¥ä¸­å¯èƒ½å‡ºç°çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚ åœ¨&quot;å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜&quot;ç­–ç•¥ä¸­ï¼Œç”±äºæ•°æ®å·²ç»è¢«å…ˆæ›´æ–°åˆ°æ•°æ®åº“ï¼Œå³ä½¿åœ¨æ›´æ–°æ•°æ®åº“å’Œåˆ é™¤ç¼“å­˜çš„çŸ­æš‚æ—¶é—´é—´éš”å†…æœ‰æ–°çš„è¯»è¯·æ±‚åˆ°è¾¾å¹¶æ›´æ–°äº†ç¼“å­˜ï¼Œè¯¥ç¼“å­˜æ•°æ®ä¹Ÿæ˜¯æœ€æ–°çš„ï¼Œå› æ­¤ä¸ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ ç„¶è€Œï¼Œè¿™ç§ç­–ç•¥ä¹Ÿæœ‰å…¶è‡ªèº«çš„é—®é¢˜ã€‚åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå¦‚æœä¸¤ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªæ˜¯å†™è¯·æ±‚ï¼Œä¸€ä¸ªæ˜¯è¯»è¯·æ±‚ï¼Œå®ƒä»¬å‡ ä¹åŒæ—¶åˆ°è¾¾ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</p><ol><li>å†™è¯·æ±‚å…ˆæ›´æ–°äº†æ•°æ®åº“</li><li>è¯»è¯·æ±‚è¯»å–æ•°æ®åº“ï¼Œå¹¶å°†æ•°æ®å†™å…¥ç¼“å­˜</li><li>å†™è¯·æ±‚åˆ é™¤äº†ç¼“å­˜ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼“å­˜å°±ä¼šä¸¢å¤±ï¼Œå¯¼è‡´åç»­çš„è¯»è¯·æ±‚å¿…é¡»ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œè¿™å¯èƒ½ä¼šå¢åŠ æ•°æ®åº“çš„è´Ÿè½½ã€‚å› æ­¤ï¼Œä¸è®ºæ˜¯&quot;å…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“&quot;è¿˜æ˜¯&quot;å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜&quot;ï¼Œéƒ½æœ‰å¯èƒ½å­˜åœ¨é—®é¢˜</li></ol></blockquote><h3 id="æ›´æ–°ç¼“å­˜å¤±è´¥äº†æ€ä¹ˆåŠ-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#æ›´æ–°ç¼“å­˜å¤±è´¥äº†æ€ä¹ˆåŠ-2023-æ»´æ»´" aria-hidden="true">#</a> æ›´æ–°ç¼“å­˜å¤±è´¥äº†æ€ä¹ˆåŠï¼ˆ2023 æ»´æ»´ï¼‰</h3><ul><li>é‡æ–°å°è¯•ï¼šå¦‚æœé”™è¯¯æ˜¯æš‚æ—¶çš„ï¼Œä¾‹å¦‚ç½‘ç»œæŠ–åŠ¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°è¯•å†æ¬¡æ›´æ–°ç¼“å­˜ã€‚</li><li>å¤±è´¥åçš„å…œåº•ç­–ç•¥ï¼šå¦‚æœç¼“å­˜ç³»ç»Ÿå­˜åœ¨é—®é¢˜ä¸”æ— æ³•ç«‹å³ä¿®å¤ï¼Œå¯ä»¥è€ƒè™‘æš‚æ—¶ç»•è¿‡ç¼“å­˜ï¼Œç›´æ¥è®¿é—®åŸå§‹æ•°æ®æºã€‚è¿™å¯ä»¥ç¡®ä¿ä¸šåŠ¡çš„æ­£å¸¸è¿è¡Œï¼Œä½†å¯èƒ½ä¼šå¢åŠ åŸå§‹æ•°æ®æºçš„è´Ÿè½½ã€‚</li></ul><blockquote><p>é‡è¯•çš„æ—¶å€™ï¼Œç¼“å­˜ä¸­çš„é”™æ•°æ®è¢«è®¿é—®å¤šæ¬¡äº†ï¼Œæ€ä¹ˆè§£å†³ï¼ˆ2023 æ»´æ»´ï¼‰</p></blockquote><p>å½“å°è¯•æ›´æ–°ç¼“å­˜æ—¶ï¼Œå¦‚æœæ•°æ®å·²ç»è¢«é”™è¯¯åœ°å†™å…¥åˆ°ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªé”™è¯¯æ•°æ®å¯èƒ½ä¼šè¢«å¤šæ¬¡è®¿é—®ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œæœ‰å‡ ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>å»¶è¿Ÿæ›´æ–°ï¼šä¸€ç§æ–¹æ³•æ˜¯åœ¨å†™å…¥æ–°æ•°æ®ä¹‹å‰ï¼Œå…ˆå°†æ—§æ•°æ®ä»ç¼“å­˜ä¸­åˆ é™¤ï¼Œç„¶åå†å†™å…¥æ–°æ•°æ®ã€‚è¿™å¯ä»¥ç¡®ä¿åœ¨æ–°æ•°æ®è¿˜æ²¡æœ‰è¢«å†™å…¥ç¼“å­˜æ—¶ï¼Œå®¢æˆ·ç«¯åªèƒ½è·å–åˆ°æ—§çš„æ•°æ®ï¼Œè€Œä¸æ˜¯é”™è¯¯çš„æ•°æ®ã€‚ç„¶è€Œï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜â€œç©ºçª—æœŸâ€çš„é—®é¢˜ã€‚</li><li>è¯»å†™é”ï¼šä½¿ç”¨è¯»å†™é”å¯ä»¥ä¿è¯åœ¨å†™å…¥æ–°æ•°æ®æ—¶ï¼Œä¸ä¼šæœ‰è¯»å–æ“ä½œå‘ç”Ÿã€‚åœ¨æ›´æ–°ç¼“å­˜çš„è¿‡ç¨‹ä¸­ï¼Œå†™æ“ä½œå°†ä¼šé”å®šæ•°æ®ï¼Œè¯»æ“ä½œå°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ–°çš„æ•°æ®å†™å…¥å®Œæ¯•ã€‚</li><li>ä¹è§‚å¹¶å‘æ§åˆ¶ï¼šä½ å¯ä»¥ä½¿ç”¨ä¹è§‚å¹¶å‘æ§åˆ¶ï¼Œåªæœ‰åœ¨æ•°æ®æ²¡æœ‰å‘ç”Ÿæ”¹å˜çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½æ›´æ–°ç¼“å­˜ã€‚è¿™éœ€è¦åœ¨åŸå§‹æ•°æ®æºä¸­ä¿å­˜æ•°æ®ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶åœ¨æ›´æ–°ç¼“å­˜æ—¶æ£€æŸ¥æ•°æ®ç‰ˆæœ¬ã€‚</li><li>åŸå­æ“ä½œï¼šä¸€äº›ç¼“å­˜ç³»ç»Ÿæ”¯æŒåŸå­æ“ä½œï¼Œå¯ä»¥ç¡®ä¿æ•°æ®çš„æ›´æ–°æ˜¯åŸå­çš„ï¼Œå³æ•°æ®çš„æ›´æ–°è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œä¸ä¼šå‡ºç°éƒ¨åˆ†æˆåŠŸçš„æƒ…å†µã€‚</li></ol><h3 id="å¦‚ä½•è®¾è®¡æŠ¢ä¼˜æƒ åˆ¸-2023-æ»´æ»´" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è®¾è®¡æŠ¢ä¼˜æƒ åˆ¸-2023-æ»´æ»´" aria-hidden="true">#</a> å¦‚ä½•è®¾è®¡æŠ¢ä¼˜æƒ åˆ¸ï¼Ÿï¼ˆ2023 æ»´æ»´ï¼‰</h3><p>è®¾è®¡ä¸€ä¸ªæŠ¢ä¼˜æƒ åˆ¸çš„ç³»ç»Ÿå¯ä»¥æ¶‰åŠåˆ°å¾ˆå¤šæ–¹é¢ï¼ŒåŒ…æ‹¬å¹¶å‘æ§åˆ¶ã€æ•°æ®ä¸€è‡´æ€§ã€é€šçŸ¥æœºåˆ¶ç­‰ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„è®¾è®¡æ€è·¯ï¼š</p><ol><li><strong>é¢„çƒ­æ•°æ®</strong>ï¼šä¸ºäº†å‡å°‘æ•°æ®åº“çš„å‹åŠ›ï¼Œå¯ä»¥åœ¨æ´»åŠ¨å¼€å§‹ä¹‹å‰å°†ä¼˜æƒ åˆ¸çš„ä¿¡æ¯é¢„çƒ­åˆ°ç¼“å­˜ä¸­ï¼Œä¾‹å¦‚ä½¿ç”¨Redisã€‚</li><li><strong>é™æµ</strong>ï¼šç”±äºæŠ¢ä¼˜æƒ åˆ¸çš„æ´»åŠ¨å¯èƒ½ä¼šäº§ç”Ÿå·¨å¤§çš„æµé‡ï¼Œéœ€è¦é‡‡å–é™æµæªæ–½é˜²æ­¢æœåŠ¡å™¨è¿‡è½½ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç­‰é™æµç®—æ³•ã€‚</li><li><strong>å¹¶å‘æ§åˆ¶</strong>ï¼šä¸ºäº†å¤„ç†å¤§é‡ç”¨æˆ·åŒæ—¶æŠ¢è´­çš„æƒ…å†µï¼Œå¯ä»¥é‡‡ç”¨Javaçš„å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œå¦‚çº¿ç¨‹æ± ã€CompletableFutureç­‰ã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ï¼Œä½¿ç”¨å¤šä¸ªæœåŠ¡å™¨å…±åŒå¤„ç†è¯·æ±‚ã€‚</li><li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šä¸ºäº†é¿å…è¶…å–çš„é—®é¢˜ï¼Œéœ€è¦ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚è¿™å¯ä»¥é€šè¿‡äº‹åŠ¡æ§åˆ¶æˆ–åˆ†å¸ƒå¼é”ç­‰æ–¹å¼å®ç°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Redisæˆ–ZooKeeperå®ç°åˆ†å¸ƒå¼é”ã€‚</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šæŠ¢è´­çš„è¯·æ±‚å¯ä»¥é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†ï¼Œä¸ä»…å¯ä»¥å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ï¼Œè¿˜å¯ä»¥æé«˜ç”¨æˆ·çš„ä½“éªŒã€‚æ¯”å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»æŠ¢è´­åï¼Œç«‹å³è¿”å›ä¸€ä¸ªæ­£åœ¨å¤„ç†çš„å“åº”ï¼Œç„¶åé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—åœ¨åå°å¤„ç†æŠ¢è´­çš„é€»è¾‘ã€‚</li><li><strong>é€šçŸ¥ç”¨æˆ·</strong>ï¼šå½“æŠ¢è´­å¤„ç†å®Œåï¼Œéœ€è¦åŠæ—¶é€šçŸ¥ç”¨æˆ·ç»“æœã€‚å¯ä»¥é€šè¿‡é‚®ä»¶ã€çŸ­ä¿¡ã€åº”ç”¨å†…é€šçŸ¥æˆ–è€…æ¨é€é€šçŸ¥ç­‰æ–¹å¼ã€‚</li><li><strong>å®¹é”™å’Œå¤‡ä»½</strong>ï¼šç³»ç»Ÿéœ€è¦æœ‰è¶³å¤Ÿçš„å®¹é”™å’Œå¤‡ä»½æœºåˆ¶ï¼Œä»¥ä¾¿åœ¨å‡ºç°é—®é¢˜æ—¶å¿«é€Ÿæ¢å¤ã€‚</li><li><strong>ç›‘æ§å’ŒæŠ¥è­¦</strong>ï¼šè®¾ç½®ç›‘æ§å’ŒæŠ¥è­¦æœºåˆ¶ï¼Œå¯¹ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€è¿›è¡Œå®æ—¶ç›‘æ§ï¼Œä¸€æ—¦å‘ç°å¼‚å¸¸ï¼Œç«‹å³è§¦å‘æŠ¥è­¦ï¼Œä¾¿äºåŠæ—¶å¤„ç†ã€‚</li></ol><h3 id="æœ‰ä¸€ä¸ªç¨‹åºå ç”¨å¤§é‡-cpu-å¹¶ä¸”ä¸€ç›´è¿è¡Œ-æ€ä¹ˆæ’æŸ¥-2023-é˜¿é‡Œå®ä¹ " tabindex="-1"><a class="header-anchor" href="#æœ‰ä¸€ä¸ªç¨‹åºå ç”¨å¤§é‡-cpu-å¹¶ä¸”ä¸€ç›´è¿è¡Œ-æ€ä¹ˆæ’æŸ¥-2023-é˜¿é‡Œå®ä¹ " aria-hidden="true">#</a> æœ‰ä¸€ä¸ªç¨‹åºå ç”¨å¤§é‡ cpuï¼Œå¹¶ä¸”ä¸€ç›´è¿è¡Œï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿï¼ˆ2023 é˜¿é‡Œå®ä¹ ï¼‰</h3><ol><li>è¯†åˆ«é—®é¢˜è¿›ç¨‹ï¼šä½¿ç”¨topæˆ–htopå‘½ä»¤ï¼ˆLinux/macOSï¼‰æˆ–ä»»åŠ¡ç®¡ç†å™¨ï¼ˆWindowsï¼‰æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ï¼Œæ‰¾åˆ°å ç”¨å¤§é‡CPUçš„Javaè¿›ç¨‹ã€‚è®°ä¸‹è¿›ç¨‹IDï¼ˆPIDï¼‰ã€‚</li><li>è·å–çº¿ç¨‹ä¿¡æ¯ï¼šå¯¹äºæ‰¾åˆ°çš„Javaè¿›ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨jstackå·¥å…·è·å–çº¿ç¨‹ä¿¡æ¯ã€‚jstackæ˜¯Java Development Kitï¼ˆJDKï¼‰ä¸­çš„ä¸€ä¸ªå®ç”¨ç¨‹åºï¼Œç”¨äºç”ŸæˆJavaçº¿ç¨‹è½¬å‚¨ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>jstack <span class="token operator">&lt;</span>PID<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> thread_dump.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>åˆ†æçº¿ç¨‹è½¬å‚¨ï¼šæ‰“å¼€thread_dump.txtæ–‡ä»¶ï¼ŒæŸ¥æ‰¾å…·æœ‰é«˜CPUä½¿ç”¨ç‡çš„çº¿ç¨‹ã€‚çº¿ç¨‹è½¬å‚¨ä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª16è¿›åˆ¶çš„çº¿ç¨‹IDï¼ˆnidï¼‰ã€‚æ‰¾åˆ°çŠ¶æ€ä¸ºRUNNABLEä¸”å †æ ˆè·Ÿè¸ªè¡¨æ˜å¯èƒ½åœ¨æ‰§è¡Œå¯†é›†ä»»åŠ¡çš„çº¿ç¨‹ã€‚</li><li>å…³è”æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼šè¦ç¡®å®šå“ªäº›çº¿ç¨‹æ­£åœ¨ä½¿ç”¨å¤§é‡CPUèµ„æºï¼Œæˆ‘ä»¬éœ€è¦å°†Javaçº¿ç¨‹ä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹å…³è”èµ·æ¥ã€‚åœ¨Linuxä¸Šï¼Œå¯ä»¥ä½¿ç”¨<code>top -H -p &lt;PID&gt;</code>å‘½ä»¤æŸ¥çœ‹ç‰¹å®šè¿›ç¨‹çš„çº¿ç¨‹CPUä½¿ç”¨æƒ…å†µã€‚åœ¨Windowsä¸Šï¼Œå¯ä»¥ä½¿ç”¨Process Exploreræˆ–Process Monitorç­‰å·¥å…·æŸ¥çœ‹çº¿ç¨‹CPUä½¿ç”¨æƒ…å†µã€‚å°†æ“ä½œç³»ç»Ÿçº¿ç¨‹IDè½¬æ¢ä¸º16è¿›åˆ¶ï¼Œç„¶åä¸thread_dump.txtä¸­çš„çº¿ç¨‹è¿›è¡ŒåŒ¹é…ã€‚</li><li>å®šä½é—®é¢˜ä»£ç </li></ol><h3 id="ä¸¤ä¸ªåŒ…å«5äº¿urlçš„æ–‡ä»¶-å¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„é‡å¤url-å†…å­˜åªæœ‰4g-2023-ç™¾åº¦æå‰æ‰¹" tabindex="-1"><a class="header-anchor" href="#ä¸¤ä¸ªåŒ…å«5äº¿urlçš„æ–‡ä»¶-å¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„é‡å¤url-å†…å­˜åªæœ‰4g-2023-ç™¾åº¦æå‰æ‰¹" aria-hidden="true">#</a> ä¸¤ä¸ªåŒ…å«5äº¿URLçš„æ–‡ä»¶ï¼Œå¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„é‡å¤URLï¼Œå†…å­˜åªæœ‰4Gï¼ˆ2023 ç™¾åº¦æå‰æ‰¹ï¼‰</h3><p>å¤„ç†ä¸¤ä¸ªåŒ…å«5äº¿ä¸ªURLçš„æ–‡ä»¶æ¥æ‰¾å‡ºé‡å¤URLï¼Œæ˜¯ä¸€ä¸ªå†…å­˜å’Œè®¡ç®—å¯†é›†å‹çš„ä»»åŠ¡ã€‚åœ¨æœ‰é™çš„å†…å­˜ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä½¿ç”¨ä¸€äº›é«˜æ•ˆçš„æ•°æ®å¤„ç†æŠ€æœ¯ï¼Œå¦‚å¤–éƒ¨æ’åºå’Œåˆ†å¸ƒå¼è®¡ç®—ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¸»è¦æ¢è®¨ä½¿ç”¨åŸºäºç¡¬ç›˜çš„å¤–éƒ¨æ’åºå’Œå“ˆå¸Œæ˜ å°„æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p><p><strong>æ­¥éª¤1ï¼š</strong> é¢„å¤„ç†å¹¶åˆ‡å‰²æ–‡ä»¶ é¦–å…ˆï¼Œç”±äºæ–‡ä»¶çš„æ•°æ®é‡å¤ªå¤§ï¼Œæ— æ³•ä¸€æ¬¡æ€§è£…å…¥å†…å­˜ï¼Œæˆ‘ä»¬éœ€è¦å°†æ¯ä¸ªæ–‡ä»¶åˆ‡åˆ†æˆæ›´å°çš„åˆ†åŒºã€‚æˆ‘ä»¬å¯ä»¥å°†URLæŒ‰ç…§ä¸€å®šçš„å“ˆå¸Œå‡½æ•°åˆ†æ¡¶ï¼ˆå¦‚URLçš„å“ˆå¸Œå€¼å¯¹10000å–ä½™ï¼‰ï¼Œå°†ç›¸åŒå“ˆå¸Œå€¼çš„URLå†™å…¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç›¸åŒçš„URLä¸€å®šåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</p><p><strong>æ­¥éª¤2ï¼š</strong> é€ä¸€å¤„ç†åˆ‡å‰²åçš„æ–‡ä»¶ å°†åˆ‡å‰²åçš„å°æ–‡ä»¶ä¾æ¬¡åŠ è½½è¿›å†…å­˜ä¸­ï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶ä½¿ç”¨HashSetå»é‡ï¼Œç„¶åä¿å­˜åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚</p><p><strong>æ­¥éª¤3ï¼š</strong> ä¸¤ä¸¤å¯¹æ¯”æ‰¾å‡ºé‡å¤çš„URL æœ€åï¼Œæˆ‘ä»¬å†æŠŠç¬¬ä¸€ä¸ªæ–‡ä»¶å’Œç¬¬äºŒä¸ªæ–‡ä»¶ç›¸åŒå“ˆå¸Œå€¼çš„ä¸´æ—¶æ–‡ä»¶åˆ†åˆ«åŠ è½½åˆ°å†…å­˜ï¼Œç„¶åç”¨ä¸€ä¸ªHashSetä¿å­˜ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„URLï¼Œéå†ç¬¬äºŒä¸ªæ–‡ä»¶çš„URLï¼Œå¦‚æœåœ¨HashSetä¸­æ‰¾åˆ°å°±è¯´æ˜æ˜¯é‡å¤çš„URLã€‚</p><p>ä»¥ä¸Šæ­¥éª¤éœ€è¦è¿›è¡Œçš„IOæ“ä½œç›¸å½“å¤šï¼Œä¼šæ¶ˆè€—è¾ƒå¤§çš„æ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹å¤„ç†å¤§æ•°æ®é—®é¢˜ï¼Œæ‰€ä»¥è¦é€šè¿‡ç‰ºç‰²æ—¶é—´æ¥æ¢å–ç©ºé—´ã€‚åœ¨å®é™…çš„å¤§æ•°æ®å¤„ç†ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨æ›´é«˜æ•ˆçš„å·¥å…·å¦‚Sparkã€Hadoopç­‰åˆ†å¸ƒå¼å¤„ç†å·¥å…·æ¥è¿›è¡Œå¤„ç†ã€‚</p><h2 id="å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–" aria-hidden="true">#</a> å…¶ä»–</h2><h3 id="è®²ä¸€è®²cms" tabindex="-1"><a class="header-anchor" href="#è®²ä¸€è®²cms" aria-hidden="true">#</a> è®²ä¸€è®²cmsï¼Ÿ</h3><p>å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆè‹±è¯­ï¼šcontent management systemï¼Œç¼©å†™ä¸º CMSï¼‰æ˜¯æŒ‡åœ¨ä¸€ä¸ªåˆä½œæ¨¡å¼ä¸‹ï¼Œç”¨äºç®¡ç†å·¥ä½œæµç¨‹çš„ä¸€å¥—åˆ¶åº¦ã€‚è¯¥ç³»ç»Ÿå¯åº”ç”¨äºæ‰‹å·¥æ“ä½œä¸­ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åˆ°ç”µè„‘æˆ–ç½‘ç»œé‡Œã€‚ä½œä¸ºä¸€ç§ä¸­å¤®å‚¨å­˜å™¨ï¼ˆcentral repositoryï¼‰ï¼Œå†…å®¹ç®¡ç†ç³»ç»Ÿå¯å°†ç›¸å…³å†…å®¹é›†ä¸­å‚¨å­˜å¹¶å…·æœ‰ç¾¤ç»„ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶ç­‰åŠŸèƒ½ã€‚ç‰ˆæœ¬æ§åˆ¶æ˜¯å†…å®¹ç®¡ç†ç³»ç»Ÿçš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿ã€‚</p><p>å†…å®¹ç®¡ç†ç³»ç»Ÿåœ¨ç‰©å“æˆ–æ–‡æ¡ˆæˆ–æ•°æ®çš„å­˜å‚¨ã€æŒç®¡ã€ä¿®è®¢ï¼ˆç›˜å­˜ï¼‰ã€è¯­ç”¨å……å®ã€æ–‡æ¡£å‘å¸ƒç­‰æ–¹é¢æœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚ç°åœ¨æµè¡Œçš„å¼€æºCMSç³»ç»Ÿæœ‰WordPressã€Joomla!ã€Drupalã€Xoopsã€CmsTopç­‰ã€‚</p>`,147),ua={href:"https://zh.wikipedia.org/wiki/%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F",target:"_blank",rel:"noopener noreferrer"},da=n("h3",{id:"dts-äº†è§£è¿‡å—-2023-å°çº¢ä¹¦ã€æ•°æ®åº“dtsæ–¹å‘ã€‘",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#dts-äº†è§£è¿‡å—-2023-å°çº¢ä¹¦ã€æ•°æ®åº“dtsæ–¹å‘ã€‘","aria-hidden":"true"},"#"),s(" DTS äº†è§£è¿‡å—ï¼Ÿ(2023 å°çº¢ä¹¦ã€æ•°æ®åº“dtsæ–¹å‘ã€‘)")],-1),ka=n("p",null,"æ•°å­—å‰§é™¢ç³»ç»Ÿï¼ˆDTSï¼ŒDigital Theater Systemsï¼‰ç”±DTSå…¬å¸ï¼ˆDTS Inc.ï¼ŒNASDAQï¼šDTSIï¼‰å¼€å‘ï¼Œä¸ºå¤šå£°é“éŸ³é¢‘æ ¼å¼ä¸­çš„ä¸€ç§ï¼Œå¹¿æ³›åº”ç”¨äºDVDéŸ³æ•ˆä¸Šã€‚å…¶æœ€æ™®éçš„æ ¼å¼ä¸º5.1å£°é“ã€‚ä¸æœæ¯”æ•°å­—ä¸ºä¸»è¦ç«äº‰å¯¹æ‰‹ã€‚è¦å®ç°DTSéŸ³æ•ˆè¾“å‡ºï¼Œéœ€åœ¨ç¡¬ä»¶ä¸ŠåŠè½¯ä»¶ä¸Šç¬¦åˆDTSçš„è§„æ ¼ï¼Œå¤šæ•°ä¼šåœ¨äº§å“ä¸Šæ ‡ç¤ºDTSçš„å•†æ ‡ã€‚",-1),ma={href:"https://zh.wikipedia.org/wiki/DTS",target:"_blank",rel:"noopener noreferrer"},va=n("h3",{id:"äº†è§£è¿‡èš‚èšçš„-oceanbase-å—-2023-èš‚èšé‡‘æœ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#äº†è§£è¿‡èš‚èšçš„-oceanbase-å—-2023-èš‚èšé‡‘æœ","aria-hidden":"true"},"#"),s(" äº†è§£è¿‡èš‚èšçš„ oceanbase å—ï¼Ÿï¼ˆ2023 èš‚èšé‡‘æœï¼‰")],-1),ha=n("p",null,"OceanBaseæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼å…³ç³»å‹æ•°æ®åº“ï¼Œå®Œå…¨å…¼å®¹MySQLã€‚å®ƒå®Œå…¨ç”±èš‚èšé›†å›¢å¼€å‘ï¼Œå¹¶å»ºç«‹åœ¨ä¸€ä¸ªå…¬å…±æœåŠ¡å™¨é›†ç¾¤ä¸Šã€‚åŸºäºPaxosåè®®åŠå…¶åˆ†å¸ƒå¼ç»“æ„ï¼ŒOceanBaseæä¾›é«˜å¯ç”¨æ€§å’Œçº¿æ€§å¯æ‰©å±•æ€§ã€‚",-1),ga=n("p",null,"å‚è€ƒï¼š",-1),ba={href:"https://www.oceanbase.com/",target:"_blank",rel:"noopener noreferrer"},fa={href:"http://www.oceanbase.wiki/concept/introduction-to-oceanbase-database/1.learn-about-oceanbase-database/",target:"_blank",rel:"noopener noreferrer"},ya={href:"https://dbdb.io/db/oceanbase",target:"_blank",rel:"noopener noreferrer"},wa=n("h2",{id:"ğŸ’¦-ç®—æ³•æ±‡æ€»",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ğŸ’¦-ç®—æ³•æ±‡æ€»","aria-hidden":"true"},"#"),s(" ğŸ’¦ ç®—æ³•æ±‡æ€»")],-1),_a={href:"https://leetcode.cn/problems/er-cha-shu-de-zui-jin-gong-gong-zu-xian-lcof/",target:"_blank",rel:"noopener noreferrer"},xa={href:"https://leetcode.cn/problems/multiply-strings/",target:"_blank",rel:"noopener noreferrer"};function Ca(Sa,La){const p=o("RouterLink"),e=o("ExternalLinkIcon");return c(),r("div",null,[I,n("p",null,[s("2022æœ‰çš„å¤§å‚é¢è¯•é¢˜ä¸ä¼šåœ¨2023å†æ¬¡å‡ºç°ï¼ˆä¹Ÿæœ‰å¯èƒ½ä¼šå› ä¸ºç²—å¿ƒåŠ ä¸Šï¼Œæ¬¢è¿issueæˆ–è€…PRæŒ‡æ­£å’Œä¿®æ”¹ï¼‰ï¼Œå¦‚æœæƒ³è¦äº†è§£å¯ä»¥å…ˆçœ‹"),a(p,{to:"/Java/eightpart/giant.html"},{default:u(()=>[s("2022å¤§å‚é¢è¯•")]),_:1}),s("ç‰ˆæœ¬ã€‚")]),j,n("blockquote",null,[O,n("ul",null,[n("li",null,[n("a",B,[s("https://stackoverflow.com/questions/2444005/how-do-i-make-my-arraylist-thread-safe-another-approach-to-problem-in-java"),a(e)]),s(" å¦‚ä½•ä½¿æˆ‘çš„ArrayListçº¿ç¨‹å®‰å…¨ï¼ŸJavaé—®é¢˜çš„å¦ä¸€ç§æ–¹æ³•ï¼Ÿ")]),n("li",null,[n("a",N,[s("https://stackoverflow.com/questions/18983362/how-to-prove-arraylist-is-not-thread-safe-with-a-test"),a(e)]),s(" å¦‚ä½•ç”¨æµ‹è¯•è¯æ˜æ•°ç»„åˆ—è¡¨ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ")]),n("li",null,[n("a",D,[s("https://stackoverflow.com/questions/300519/arraylist-vs-vectors-in-java-if-thread-safety-isnt-a-concern"),a(e)]),s(" ArrayListä¸vectorï¼ŒJavaå¦‚æœçº¿ç¨‹å®‰å…¨ä¸æ˜¯ä¸€ä¸ªé—®é¢˜")])])]),J,H,z,F,U,n("blockquote",null,[G,n("ol",null,[n("li",null,[n("a",V,[s("https://stackoverflow.com/questions/602636/why-is-a-concurrentmodificationexception-thrown-and-how-to-debug-it"),a(e)]),s(" ä¸ºä»€ä¹ˆä¼šæŠ›å‡ºå®ƒä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ä»¥åŠå¦‚ä½•è°ƒè¯•å®ƒ")]),n("li",null,[n("a",X,[s("https://www.javatpoint.com/concurrentmodificationexception-in-java"),a(e)])])])]),W,n("blockquote",null,[K,n("ol",null,[n("li",null,[n("a",Q,[s("https://stackoverflow.com/questions/2665569/in-what-cases-does-future-get-throw-executionexception-or-interruptedexception"),a(e)]),s(" åœ¨ä»€ä¹ˆæƒ…å†µä¸‹Future. getï¼ˆï¼‰æŠ›å‡ºExecutionExceptionæˆ–InterruptedException")]),n("li",null,[n("a",Y,[s("https://stackoverflow.com/questions/2248131/handling-exceptions-from-java-executorservice-tasks"),a(e)]),s(" å¤„ç†ExecutorServiceä»»åŠ¡Javaå¼‚å¸¸")]),n("li",null,[n("a",Z,[s("https://www.baeldung.com/java-future"),a(e)])]),n("li",null,[n("a",$,[s("https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html"),a(e)])])])]),nn,n("blockquote",null,[sn,n("ul",null,[n("li",null,[n("a",an,[s("https://programming.vip/docs/6200e8e7b682c.html"),a(e)]),s(" ã€Mybatisæºç è§£æã€‘Mybatisæºç æ¶‰åŠçš„è®¾è®¡æ¨¡å¼æ€»ç»“")]),n("li",null,[n("a",en,[s("https://programming.vip/docs/mybatis-design-pattern.html"),a(e)]),s(" Mybatisè®¾è®¡æ¨¡å¼")])])]),tn,on,pn,n("blockquote",null,[ln,n("ul",null,[n("li",null,[n("a",cn,[s("https://stackoverflow.com/questions/62137/what-is-a-covered-index"),a(e)]),s(" ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ")]),n("li",null,[n("a",rn,[s("https://xiaolincoding.com/mysql/index/index_interview.html#æŒ‰å­—æ®µä¸ªæ•°åˆ†ç±»"),a(e)]),s(" è¦†ç›–ç´¢å¼•ä¼˜åŒ–-å°æ—coding")]),n("li",null,[n("a",un,[s("https://stackoverflow.com/questions/609343/what-are-covering-indexes-and-covered-queries-in-sql-server"),a(e)]),s(" åœ¨SQL Serverä¸­ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•å’Œè¦†ç›–æŸ¥è¯¢ï¼Ÿ")]),n("li",null,[n("a",dn,[s("https://docs.couchbase.com/server/current/n1ql/n1ql-language-reference/covering-indexes.html"),a(e)]),s(" Covering Indexes")]),n("li",null,[n("a",kn,[s("https://www.red-gate.com/simple-talk/databases/sql-server/learn/using-covering-indexes-to-improve-query-performance/"),a(e)]),s(" ä½¿ç”¨è¦†ç›–ç´¢å¼•ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½")])])]),mn,n("blockquote",null,[vn,n("ol",null,[n("li",null,[n("a",hn,[s("https://loadforge.com/guides/troubleshooting-redis-performance-issues"),a(e)])]),n("li",null,[n("a",gn,[s("https://severalnines.com/blog/performance-tuning-redis/"),a(e)])])])]),bn,fn,yn,n("blockquote",null,[n("p",null,[s("å‚è€ƒï¼š"),n("a",wn,[s("https://xiaolincoding.com/mysql/transaction/mvcc.html"),a(e)])])]),_n,n("blockquote",null,[xn,n("ol",null,[n("li",null,[n("a",Cn,[s("https://blog.csdn.net/Weixiaohuai/article/details/125391957"),a(e)])]),n("li",null,[n("a",Sn,[s("https://min.news/en/news/a1b1f8acadd9af9be99514da7504de1b.html"),a(e)])]),n("li",null,[n("a",Ln,[s("https://www.dragonflydb.io/error-solutions/redis-big-key-problem"),a(e)])]),n("li",null,[n("a",Mn,[s("https://xiaolincoding.com/redis/base/redis_interview.html#redis-çš„å¤§-key-å¦‚ä½•å¤„ç†"),a(e)])])])]),qn,Rn,An,Pn,n("ul",null,[En,n("li",null,[s("hotkeys å‚æ•°ï¼š"),Tn,s(" åœ¨ "),In,s(" ç‰ˆæœ¬ä¸­æ·»åŠ äº† "),n("a",jn,[s("hotkeys"),a(e)]),s(" æŸ¥æ‰¾ç‰¹æ€§ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨ "),On,s(" è·å–å½“å‰ "),Bn,s(" çš„çƒ­ç‚¹ "),Nn,s("ï¼Œå®ç°ä¸Šæ˜¯é€šè¿‡ "),Dn,s(" å®Œæˆçš„ã€‚")]),n("li",null,[s("monitor å‘½ä»¤ï¼š"),Jn,s(" å‘½ä»¤å¯ä»¥å®æ—¶æŠ“å–å‡º "),Hn,s(" æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å‘½ä»¤ï¼Œé€šè¿‡ "),zn,s(" æŠ“å–æ•°æ®ï¼ŒåŒæ—¶ç»“åˆä¸€äº›ç°æˆçš„åˆ†æå·¥å…·ï¼Œæ¯”å¦‚ "),n("a",Fn,[s("redis-faina"),a(e)]),s("ï¼Œç»Ÿè®¡å‡ºçƒ­ Keyã€‚")]),Un]),Gn,n("ol",null,[n("li",null,[n("a",Vn,[s("MemCached"),a(e)]),s(" / "),n("a",Xn,[s("Redission"),a(e)]),s(" + Redisä¸»ä»å¤åˆ¶ï¼šè¿™ä¸ªæ–¹æ¡ˆä¹Ÿå¯ä»¥è¯´æ˜¯åˆ†ç‰‡çš„å…·ä½“å®ç°äº†[2]ã€‚å¤åˆ¶çƒ­ç‚¹æ•°æ®åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·å¯ä»¥åˆ†æ‘Šè¯»å–å‹åŠ›ã€‚Redis å…·æœ‰å†…å»ºçš„ä¸»ä»å¤åˆ¶åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°çƒ­ç‚¹æ•°æ®çš„å¤åˆ¶ã€‚Memcached ä¸ç›´æ¥æ”¯æŒå¤åˆ¶ï¼Œä½†ä½ å¯ä»¥åœ¨ä¸Šå±‚å®ç°ã€‚åŒæ ·ï¼ŒRedission è‡ªèº«å¹¶ä¸ç›´æ¥è§£å†³çƒ­ç‚¹é”®ï¼ˆHotKeysï¼‰é—®é¢˜ï¼Œä½†æ”¯æŒå¤šç§é›†ç¾¤æ¨¡å¼ï¼ŒåŒ…æ‹¬åˆ†ç‰‡ï¼Œå¯ä»¥å°†æ•°æ®æ›´å‡åŒ€åœ°åˆ†å¸ƒåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œä»è€Œé™ä½çƒ­ç‚¹é”®å¯¹å•ä¸ªèŠ‚ç‚¹çš„å½±å“ã€‚")])]),Wn,n("blockquote",null,[Kn,n("ol",null,[n("li",null,[n("a",Qn,[s("https://dzone.com/articles/redis-hotspot-key-discovery-and-common-solutions"),a(e)])]),n("li",null,[n("a",Yn,[s("https://dongzl.github.io/2021/01/14/03-Redis-Hot-Key/index.html"),a(e)])]),n("li",null,[n("a",Zn,[s("https://abhivendrasingh.medium.com/understanding-and-solving-hotkey-and-bigkey-and-issues-in-redis-1198f98b17a5"),a(e)])]),n("li",null,[n("a",$n,[s("https://developerknow.com/what-is-the-hot-key-problem-in-redis-how-to-solve-the-hot-key-problem/"),a(e)])]),n("li",null,[n("a",ns,[s("https://www.programmersought.com/article/54911114988/"),a(e)])])])]),ss,as,es,ts,n("blockquote",null,[os,n("ol",null,[n("li",null,[n("a",ps,[s("https://redis.io/docs/data-types/sorted-sets/"),a(e)])]),n("li",null,[n("a",ls,[s("https://www.educba.com/redis-zset/"),a(e)])]),n("li",null,[n("a",is,[s("https://redis.io/commands/zadd/"),a(e)])])])]),cs,n("blockquote",null,[rs,n("ol",null,[n("li",null,[n("a",us,[s("https://dev.mysql.com/doc/refman/8.0/en/explain-output.html"),a(e)])]),n("li",null,[n("a",ds,[s("https://stackoverflow.com/questions/44629837/understanding-output-of-explain-mysql-command"),a(e)])])])]),ks,n("blockquote",null,[ms,n("ol",null,[n("li",null,[n("a",vs,[s("https://dev.mysql.com/doc/refman/8.0/en/system-schema.html"),a(e)])])])]),hs,n("blockquote",null,[n("p",null,[s("å…·ä½“å¦‚ä½•åˆ·ç›˜å¯ä»¥çœ‹ï¼š"),n("a",gs,[s("https://javaguide.cn/database/mysql/mysql-logs.html#åˆ·ç›˜æ—¶æœº"),a(e)])])]),bs,n("blockquote",null,[fs,n("ul",null,[n("li",null,[n("a",ys,[s("https://stackoverflow.com/questions/19154607/how-actually-card-table-and-writer-barrier-work"),a(e)]),s(" å¡è¡¨å’Œå†™å±éšœæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ")]),n("li",null,[n("a",ws,[s("https://tschatzl.github.io/2022/02/15/card-table-card-size.html"),a(e)]),s(" Card Table Card Size Shenanigans")]),n("li",null,[n("a",_s,[s("https://www.mo4tech.com/jvm-card-table.html"),a(e)]),s(" JVM Card Table")]),n("li",null,[n("a",xs,[s("https://www.cnblogs.com/hongdada/p/12016020.html"),a(e)]),s(" JVM-å¡è¡¨ï¼ˆCard Tableï¼‰")]),n("li",null,[n("a",Cs,[s("http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots.html"),a(e)]),s(" Alexey Ragozin")])])]),Ss,n("blockquote",null,[Ls,n("ol",null,[n("li",null,[n("a",Ms,[s("https://stackoverflow.com/questions/24766118/when-is-a-full-gc-triggered"),a(e)])])])]),qs,n("blockquote",null,[Rs,n("ol",null,[n("li",null,[n("a",As,[s("https://cn.dubbo.apache.org/zh-cn/docsv2.7/dev/source/service-invoking-process/"),a(e)])])])]),Ps,n("blockquote",null,[Es,n("ol",null,[n("li",null,[n("a",Ts,[s("https://stackoverflow.com/questions/21033104/close-wait-state-in-server"),a(e)]),s(" æœåŠ¡å™¨ä¸­çš„CLOSE_WAITçŠ¶æ€")]),n("li",null,[n("a",Is,[s("https://superuser.com/questions/173535/what-are-close-wait-and-time-wait-states"),a(e)]),s(" ä»€ä¹ˆæ˜¯CLOSE_WAITTIME_WAITçŠ¶æ€ï¼Ÿ")]),n("li",null,[n("a",js,[s("https://learn.microsoft.com/en-us/answers/questions/337518/tcp-connections-locked-in-close-wait-status-with-i"),a(e)])]),n("li",null,[n("a",Os,[s("https://www.cnblogs.com/grey-wolf/p/10936657.html"),a(e)])]),n("li",null,[n("a",Bs,[s("https://juejin.cn/post/6844903734300901390#heading-6"),a(e)])]),n("li",null,[n("a",Ns,[s("https://www.thegeekdiary.com/high-number-of-connections-is-close_wait-state-in-netstat-command-output/"),a(e)]),s(' ä¸ºä»€ä¹ˆ"netstat"è¾“å‡ºæ˜¾ç¤ºè®¸å¤šè¿æ¥å¤„äºCLOSE_WAITçŠ¶æ€ï¼Ÿ')])])]),Ds,n("blockquote",null,[Js,n("ol",null,[n("li",null,[n("a",Hs,[s("https://http2.github.io/"),a(e)])]),n("li",null,[n("a",zs,[s("https://en.wikipedia.org/wiki/HTTP/2"),a(e)])]),n("li",null,[n("a",Fs,[s("https://web.dev/performance-http2/"),a(e)])]),n("li",null,[n("a",Us,[s("https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference"),a(e)])])])]),Gs,n("blockquote",null,[Vs,n("ol",null,[n("li",null,[n("a",Xs,[s("https://www.linux.com/news/ping-icmp-vs-arp/"),a(e)])]),n("li",null,[n("a",Ws,[s("https://nmap.org/book/host-discovery-techniques.html"),a(e)])]),n("li",null,[n("a",Ks,[s("https://zh.wikipedia.org/wiki/äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®"),a(e)])]),n("li",null,[n("a",Qs,[s("https://zh.wikipedia.org/wiki/åœ°å€è§£æåè®®"),a(e)])]),n("li",null,[n("a",Ys,[s("https://www.fortinet.com/resources/cyberglossary/what-is-arp"),a(e)])]),n("li",null,[n("a",Zs,[s("https://www.tutorialspoint.com/arp-table"),a(e)])]),n("li",null,[n("a",$s,[s("https://superuser.com/questions/894557/is-there-a-way-to-get-arp-to-list-devices-on-all-subnets-of-a-network"),a(e)])]),n("li",null,[n("a",na,[s("https://obkio.com/blog/traceroutes-what-are-they-and-how-do-they-work/"),a(e)])]),n("li",null,[n("a",sa,[s("https://www.howtogeek.com/134132/how-to-use-traceroute-to-identify-network-problems/"),a(e)])]),n("li",null,[n("a",aa,[s("https://www.fortinet.com/resources/cyberglossary/traceroutes"),a(e)])])])]),ea,n("blockquote",null,[ta,n("ol",null,[n("li",null,[n("a",oa,[s("https://www.cloudflare.com/zh-cn/learning/performance/http2-vs-http1.1/"),a(e)]),s(" HTTP/2 ä¸ HTTP/1.1ï¼šå®ƒä»¬å¦‚ä½•å½±å“ Web æ€§èƒ½ï¼Ÿ")]),n("li",null,[n("a",pa,[s("https://www.baeldung.com/cs/http-versions"),a(e)]),s(" HTTP: 1.0 vs. 1.1 vs 2.0 vs. 3.0")]),n("li",null,[n("a",la,[s("https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference"),a(e)]),s(" ã€æ¨èé˜…è¯»ã€‘HTTP/1.1ä¸HTTP/2ï¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ")])])]),ia,n("blockquote",null,[n("p",null,[s("å‚è€ƒï¼š"),n("a",ca,[s("https://linyunwen.github.io/2022/01/02/linux-io-model/"),a(e)])])]),ra,n("blockquote",null,[n("p",null,[s("å‚è€ƒï¼š "),n("a",ua,[s("https://zh.wikipedia.org/wiki/å†…å®¹ç®¡ç†ç³»ç»Ÿ"),a(e)])])]),da,ka,n("blockquote",null,[n("p",null,[s("å‚è€ƒï¼š "),n("a",ma,[s("https://zh.wikipedia.org/wiki/DTS"),a(e)])])]),va,ha,n("blockquote",null,[ga,n("ol",null,[n("li",null,[n("a",ba,[s("https://www.oceanbase.com/"),a(e)])]),n("li",null,[n("a",fa,[s("http://www.oceanbase.wiki/concept/introduction-to-oceanbase-database/1.learn-about-oceanbase-database/"),a(e)])]),n("li",null,[n("a",ya,[s("https://dbdb.io/db/oceanbase"),a(e)])])])]),wa,n("ol",null,[n("li",null,[n("a",_a,[s("äºŒå‰æ ‘çš„å…¬å…±ç¥–å…ˆï¼ˆ2023 å¿«æ‰‹ï¼‰"),a(e)])]),n("li",null,[n("a",xa,[s("å­—ç¬¦ä¸²ç›¸ä¹˜ï¼ˆ2023 ç¾å›¢ï¼‰"),a(e)])])])])}const Ra=i(T,[["render",Ca],["__file","gaint2023.html.vue"]]);export{Ra as default};
