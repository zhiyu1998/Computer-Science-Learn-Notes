<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html"><meta property="og:site_name" content="CSLN"><meta property="og:title" content="SpringBoot"><meta property="og:description" content="Spring-Boot-Note (#spring-boot-note); ç¯å¢ƒæ­å»º & ç®€åŒ–éƒ¨ç½² (#ç¯å¢ƒæ­å»º--ç®€åŒ–éƒ¨ç½²); ç¯å¢ƒæ­å»º (#ç¯å¢ƒæ­å»º); ç®€åŒ–éƒ¨ç½² (#ç®€åŒ–éƒ¨ç½²); @SpringBootApplicationå¯åŠ¨åŸç† (#springbootapplicationå¯åŠ¨åŸç†); IDEA å¿«é€Ÿæ„å»º (#idea-å¿«é€Ÿæ„å»º); YAM..."><meta property="og:type" content="article"><meta property="og:image" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-07-02T07:02:59.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="SpringBoot"><meta property="article:author" content="zhiyu1998"><meta property="article:modified_time" content="2023-07-02T07:02:59.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SpringBoot","image":["https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/"],"dateModified":"2023-07-02T07:02:59.000Z","author":[{"@type":"Person","name":"zhiyu1998","url":"https://github.com/zhiyu1998"}]}</script><link rel="manifest" href="/Computer-Science-Learn-Notes/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>SpringBoot | CSLN</title><meta name="description" content="Spring-Boot-Note (#spring-boot-note); ç¯å¢ƒæ­å»º & ç®€åŒ–éƒ¨ç½² (#ç¯å¢ƒæ­å»º--ç®€åŒ–éƒ¨ç½²); ç¯å¢ƒæ­å»º (#ç¯å¢ƒæ­å»º); ç®€åŒ–éƒ¨ç½² (#ç®€åŒ–éƒ¨ç½²); @SpringBootApplicationå¯åŠ¨åŸç† (#springbootapplicationå¯åŠ¨åŸç†); IDEA å¿«é€Ÿæ„å»º (#idea-å¿«é€Ÿæ„å»º); YAM...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/Computer-Science-Learn-Notes/assets/style-21f65aed.css" as="style"><link rel="stylesheet" href="/Computer-Science-Learn-Notes/assets/style-21f65aed.css">
    <link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/app-19823b7d.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/framework-c8643d23.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/SpringBoot.html-57fef263.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/SpringBoot.html-ccfedc8e.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/Computer-Science-Learn-Notes/" class="brand"><img class="logo" src="/Computer-Science-Learn-Notes/logo.svg" alt="CSLN"><!----><span class="site-name hide-in-pad">CSLN</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/Computer-Science-Learn-Notes/" class="nav-link" aria-label="ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Computer-Science-Learn-Notes/intro/" class="nav-link" aria-label="å¯¼è¯»"><span class="font-icon icon iconfont icon-discover" style=""></span>å¯¼è¯»<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/issues" rel="noopener noreferrer" target="_blank" aria-label="é—®é¢˜åé¦ˆ" class="nav-link"><span class="font-icon icon iconfont icon-note" style=""></span>é—®é¢˜åé¦ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">æœç´¢</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-build" style=""></span><span class="title">è®¡ç®—æœºåŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-vscode" style=""></span><span class="title">å‰ç«¯</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-timer" style=""></span><span class="title">Golang</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-light" style=""></span><span class="title">Rust</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">Java</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-activity" style=""></span><span class="title">åŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-branch" style=""></span><span class="title">å¹¶å‘</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-profile" style=""></span><span class="title">é¢è¯•</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-leaf" style=""></span><span class="title">æ¡†æ¶</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/Spring.html" class="nav-link sidebar-link sidebar-page" aria-label="Spring"><!---->Spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/SpringMVC.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringMVC"><!---->SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/Mybatis.html" class="nav-link sidebar-link sidebar-page" aria-label="Mybatis"><!---->Mybatis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="SpringBoot"><!---->SpringBoot<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¯å¢ƒæ­å»º-ç®€åŒ–éƒ¨ç½²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¯å¢ƒæ­å»º &amp; ç®€åŒ–éƒ¨ç½²"><!---->ç¯å¢ƒæ­å»º &amp; ç®€åŒ–éƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¯å¢ƒæ­å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¯å¢ƒæ­å»º"><!---->ç¯å¢ƒæ­å»º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç®€åŒ–éƒ¨ç½²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç®€åŒ–éƒ¨ç½²"><!---->ç®€åŒ–éƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootapplicationå¯åŠ¨åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@SpringBootApplicationå¯åŠ¨åŸç†"><!---->@SpringBootApplicationå¯åŠ¨åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#idea-å¿«é€Ÿæ„å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="IDEA å¿«é€Ÿæ„å»º"><!---->IDEA å¿«é€Ÿæ„å»º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#yaml" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="YAML"><!---->YAML<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#yamlåŸºæœ¬è¯­æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="YAMLåŸºæœ¬è¯­æ³•"><!---->YAMLåŸºæœ¬è¯­æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å•å…ƒæµ‹è¯•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å•å…ƒæµ‹è¯•"><!---->å•å…ƒæµ‹è¯•<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ssm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SSM"><!---->SSM<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springboot" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SpringBoot"><!---->SpringBoot<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#configurationproperties-value" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@ConfigurationProperties&amp;@Value"><!---->@ConfigurationProperties&amp;@Value<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#propertysource-importresource" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@PropertySource&amp;@ImportResource"><!---->@PropertySource&amp;@ImportResource<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»"><!---->ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é…ç½®æ–‡ä»¶çš„å ä½ç¬¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é…ç½®æ–‡ä»¶çš„å ä½ç¬¦"><!---->é…ç½®æ–‡ä»¶çš„å ä½ç¬¦<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å¤šprofileæ”¯æŒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¤šProfileæ”¯æŒ"><!---->å¤šProfileæ”¯æŒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§"><!---->åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªåŠ¨é…ç½®åŸç†"><!---->è‡ªåŠ¨é…ç½®åŸç†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªåŠ¨é…ç½®åŸç†-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªåŠ¨é…ç½®åŸç†"><!---->è‡ªåŠ¨é…ç½®åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä»¥httpencodingautoconfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†"><!---->ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å°ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å°ç»“"><!---->å°ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#conditionalç›¸å…³æ³¨è§£å’Œdebug" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@Conditionalç›¸å…³æ³¨è§£å’ŒDebug"><!---->@Conditionalç›¸å…³æ³¨è§£å’ŒDebug<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ—¥å¿—æ¡†æ¶sl4j" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ—¥å¿—æ¡†æ¶SL4J"><!---->æ—¥å¿—æ¡†æ¶SL4J<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºsl4j" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºSL4J"><!---->å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºSL4J<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootå’Œæ—¥å¿—å…³ç³»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SpringBootå’Œæ—¥å¿—å…³ç³»"><!---->SpringBootå’Œæ—¥å¿—å…³ç³»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ—¥å¿—çš„é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ—¥å¿—çš„é…ç½®"><!---->æ—¥å¿—çš„é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æŒ‡å®šæ—¥å¿—æ¡†æ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æŒ‡å®šæ—¥å¿—æ¡†æ¶"><!---->æŒ‡å®šæ—¥å¿—æ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åˆ‡æ¢æ—¥å¿—æ¡†æ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ‡æ¢æ—¥å¿—æ¡†æ¶"><!---->åˆ‡æ¢æ—¥å¿—æ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é™æ€èµ„æºæ˜ å°„è§„åˆ™" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é™æ€èµ„æºæ˜ å°„è§„åˆ™"><!---->é™æ€èµ„æºæ˜ å°„è§„åˆ™<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ¨¡æ¿å¼•æ“thymeleaf" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¨¡æ¿å¼•æ“Thymeleaf"><!---->æ¨¡æ¿å¼•æ“Thymeleaf<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springmvcè‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SpringMVCè‡ªåŠ¨é…ç½®åŸç†"><!---->SpringMVCè‡ªåŠ¨é…ç½®åŸç†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é»˜è®¤é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é»˜è®¤é…ç½®"><!---->é»˜è®¤é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#contentnegotiatingviewresolver" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ContentNegotiatingViewResolver"><!---->ContentNegotiatingViewResolver<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#httpmessageconverters" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="HttpMessageConverters"><!---->HttpMessageConverters<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#messagecodesresolver" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MessageCodesResolver"><!---->MessageCodesResolver<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootåœ¨springmvcçš„é…ç½®æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SpringBootåœ¨SpringMVCçš„é…ç½®æ¨¡å¼"><!---->SpringBootåœ¨SpringMVCçš„é…ç½®æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ¥ç®¡springbootçš„springmvc" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¥ç®¡SpringBootçš„SpringMVC"><!---->æ¥ç®¡SpringBootçš„SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å°ç»“-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å°ç»“ï¼š"><!---->å°ç»“ï¼š<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å›½é™…åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å›½é™…åŒ–"><!---->å›½é™…åŒ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä½¿ç”¨thymeleafå›½é™…åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨thymeleafå›½é™…åŒ–"><!---->ä½¿ç”¨thymeleafå›½é™…åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootåŒºåŸŸä¿¡æ¯è§£æå™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SpringBootåŒºåŸŸä¿¡æ¯è§£æå™¨"><!---->SpringBootåŒºåŸŸä¿¡æ¯è§£æå™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªå®šä¹‰å›½é™…åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªå®šä¹‰å›½é™…åŒ–"><!---->è‡ªå®šä¹‰å›½é™…åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ‹¦æˆªå™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ‹¦æˆªå™¨"><!---->æ‹¦æˆªå™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é”™è¯¯å¤„ç†åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é”™è¯¯å¤„ç†åŸç†"><!---->é”™è¯¯å¤„ç†åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å®šåˆ¶é”™è¯¯é¡µé¢å’Œjsoné”™è¯¯æ•°æ®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®šåˆ¶é”™è¯¯é¡µé¢å’ŒJSONé”™è¯¯æ•°æ®"><!---->å®šåˆ¶é”™è¯¯é¡µé¢å’ŒJSONé”™è¯¯æ•°æ®<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å®šåˆ¶ä¸€ä¸ªjsonæ•°æ®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®šåˆ¶ä¸€ä¸ªJSONæ•°æ®"><!---->å®šåˆ¶ä¸€ä¸ªJSONæ•°æ®<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åµŒå…¥å¼servlet" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åµŒå…¥å¼Servlet"><!---->åµŒå…¥å¼Servlet<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springä¸¤ç§é…ç½®æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Springä¸¤ç§é…ç½®æ–¹å¼ï¼š"><!---->Springä¸¤ç§é…ç½®æ–¹å¼ï¼š<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åµŒå…¥å¼servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åµŒå…¥å¼Servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®"><!---->åµŒå…¥å¼Servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ³¨å†Œä¸‰å¤§ç»„ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ³¨å†Œä¸‰å¤§ç»„ä»¶"><!---->æ³¨å†Œä¸‰å¤§ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æºç åˆ¨æ-åµŒå…¥å¼servletåŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æºç åˆ¨æ åµŒå…¥å¼ServletåŸç†"><!---->æºç åˆ¨æ åµŒå…¥å¼ServletåŸç†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†"><!---->é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å°ç»“-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å°ç»“ï¼š"><!---->å°ç»“ï¼š<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åµŒå…¥å¼servletè‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åµŒå…¥å¼Servletè‡ªåŠ¨é…ç½®åŸç†"><!---->åµŒå…¥å¼Servletè‡ªåŠ¨é…ç½®åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆjdbc" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•´åˆJDBC"><!---->æ•´åˆJDBC<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªåŠ¨é…ç½®åŸç†-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªåŠ¨é…ç½®åŸç†"><!---->è‡ªåŠ¨é…ç½®åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆdruid" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•´åˆDruid"><!---->æ•´åˆDruid<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆmybatis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•´åˆMybatis"><!---->æ•´åˆMybatis<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#maven" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Maven"><!---->Maven<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä½¿ç”¨æ³¨è§£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨æ³¨è§£"><!---->ä½¿ç”¨æ³¨è§£<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä½¿ç”¨é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨é…ç½®æ–‡ä»¶"><!---->ä½¿ç”¨é…ç½®æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootå¯åŠ¨åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SpringBootå¯åŠ¨åŸç†"><!---->SpringBootå¯åŠ¨åŸç†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¬¬ä¸€æ­¥-åˆ›å»ºspringapplicationå¯¹è±¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºSpringApplicationå¯¹è±¡"><!---->ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºSpringApplicationå¯¹è±¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¬¬äºŒæ­¥-å¯åŠ¨åº”ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åº”ç”¨"><!---->ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åº”ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°-æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ï¼ˆåŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°ï¼‰æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»"><!---->ï¼ˆåŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°ï¼‰æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘"><!---->è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootç¼“å­˜åŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SpringBootç¼“å­˜åŸºæœ¬ä½¿ç”¨"><!---->SpringBootç¼“å­˜åŸºæœ¬ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åŸºæœ¬ä½¿ç”¨"><!---->åŸºæœ¬ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å‡ ä¸ªå±æ€§ä»‹ç»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å‡ ä¸ªå±æ€§ä»‹ç»"><!---->å‡ ä¸ªå±æ€§ä»‹ç»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†"><!---->ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä»¥-cacheableä¸ºä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»¥@Cacheableä¸ºä¾‹"><!---->ä»¥@Cacheableä¸ºä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å°ç»“-3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å°ç»“ï¼š"><!---->å°ç»“ï¼š<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#cacheputçš„ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@CachePutçš„ä½¿ç”¨"><!---->@CachePutçš„ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#cacheevict-æ¸…é™¤ç¼“å­˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@CacheEvict æ¸…é™¤ç¼“å­˜"><!---->@CacheEvict æ¸…é™¤ç¼“å­˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#cachingå’Œ-cacheconfig" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@Cachingå’Œ@CacheConfig"><!---->@Cachingå’Œ@CacheConfig<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#caching" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@Caching"><!---->@Caching<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#cacheconfig" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@CacheConfig"><!---->@CacheConfig<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆç¼“å­˜ä¸­é—´ä»¶redis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•´åˆç¼“å­˜ä¸­é—´ä»¶Redis"><!---->æ•´åˆç¼“å­˜ä¸­é—´ä»¶Redis<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªå®šä¹‰rediscachemanager" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªå®šä¹‰RedisCacheManager"><!---->è‡ªå®šä¹‰RedisCacheManager<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springsecurityçš„ç®€å•ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="SpringSecurityçš„ç®€å•ä½¿ç”¨"><!---->SpringSecurityçš„ç®€å•ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#thymeleafæ•´åˆspringsecurity" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thymeleafæ•´åˆSpringSecurity"><!---->Thymeleafæ•´åˆSpringSecurity<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è®°ä½æˆ‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è®°ä½æˆ‘"><!---->è®°ä½æˆ‘<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢"><!---->å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#shiroçš„ç®€å•ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Shiroçš„ç®€å•ä½¿ç”¨"><!---->Shiroçš„ç®€å•ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å¼€å§‹é…ç½®ä¸€ä¸ªshiro" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¼€å§‹é…ç½®ä¸€ä¸ªshiro"><!---->å¼€å§‹é…ç½®ä¸€ä¸ªshiro<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆshiroå¯åŠ¨å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•´åˆShiroå¯åŠ¨å™¨"><!---->æ•´åˆShiroå¯åŠ¨å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ‰©å±•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ‰©å±•ï¼š"><!---->æ‰©å±•ï¼š<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/SpringDataJpa.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringDataJpa"><!---->SpringDataJpa<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/SpringSecurity.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringSecurity"><!---->SpringSecurity<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringCloud"><!---->SpringCloud<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-async" style=""></span><span class="title">è™šæ‹Ÿæœº</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-launch" style=""></span><span class="title">Kotlinç»“åˆSpring</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-object" style=""></span><span class="title">LeetCodeåˆ·é¢˜é¡ºåº</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-repair" style=""></span><span class="title">ç»éªŒæ€»ç»“</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-autumn" style=""></span><span class="title">å¥½ç‰©æ¨è</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->SpringBoot</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/zhiyu1998" target="_blank" rel="noopener noreferrer">zhiyu1998</a></span><span property="author" content="zhiyu1998"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-04-04T15:12:04.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span class="waline-pageview-count" id="ArtalkPV" data-path="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 59 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT59M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category1" role>Spring</span><meta property="articleSection" content="Spring"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¯å¢ƒæ­å»º-ç®€åŒ–éƒ¨ç½²" class="router-link-active router-link-exact-active toc-link level2">ç¯å¢ƒæ­å»º &amp; ç®€åŒ–éƒ¨ç½²</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¯å¢ƒæ­å»º" class="router-link-active router-link-exact-active toc-link level3">ç¯å¢ƒæ­å»º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç®€åŒ–éƒ¨ç½²" class="router-link-active router-link-exact-active toc-link level3">ç®€åŒ–éƒ¨ç½²</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootapplicationå¯åŠ¨åŸç†" class="router-link-active router-link-exact-active toc-link level2">@SpringBootApplicationå¯åŠ¨åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#idea-å¿«é€Ÿæ„å»º" class="router-link-active router-link-exact-active toc-link level2">IDEA å¿«é€Ÿæ„å»º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#yaml" class="router-link-active router-link-exact-active toc-link level2">YAML</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#yamlåŸºæœ¬è¯­æ³•" class="router-link-active router-link-exact-active toc-link level3">YAMLåŸºæœ¬è¯­æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å•å…ƒæµ‹è¯•" class="router-link-active router-link-exact-active toc-link level2">å•å…ƒæµ‹è¯•</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ssm" class="router-link-active router-link-exact-active toc-link level3">SSM</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springboot" class="router-link-active router-link-exact-active toc-link level3">SpringBoot</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#configurationproperties-value" class="router-link-active router-link-exact-active toc-link level2">@ConfigurationProperties&amp;@Value</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#propertysource-importresource" class="router-link-active router-link-exact-active toc-link level2">@PropertySource&amp;@ImportResource</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»" class="router-link-active router-link-exact-active toc-link level3">ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é…ç½®æ–‡ä»¶çš„å ä½ç¬¦" class="router-link-active router-link-exact-active toc-link level3">é…ç½®æ–‡ä»¶çš„å ä½ç¬¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å¤šprofileæ”¯æŒ" class="router-link-active router-link-exact-active toc-link level3">å¤šProfileæ”¯æŒ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§" class="router-link-active router-link-exact-active toc-link level2">åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active toc-link level2">è‡ªåŠ¨é…ç½®åŸç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªåŠ¨é…ç½®åŸç†-1" class="router-link-active router-link-exact-active toc-link level3">è‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä»¥httpencodingautoconfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active toc-link level3">ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å°ç»“" class="router-link-active router-link-exact-active toc-link level3">å°ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#conditionalç›¸å…³æ³¨è§£å’Œdebug" class="router-link-active router-link-exact-active toc-link level2">@Conditionalç›¸å…³æ³¨è§£å’ŒDebug</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ—¥å¿—æ¡†æ¶sl4j" class="router-link-active router-link-exact-active toc-link level2">æ—¥å¿—æ¡†æ¶SL4J</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºsl4j" class="router-link-active router-link-exact-active toc-link level3">å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºSL4J</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootå’Œæ—¥å¿—å…³ç³»" class="router-link-active router-link-exact-active toc-link level3">SpringBootå’Œæ—¥å¿—å…³ç³»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ—¥å¿—çš„é…ç½®" class="router-link-active router-link-exact-active toc-link level3">æ—¥å¿—çš„é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æŒ‡å®šæ—¥å¿—æ¡†æ¶" class="router-link-active router-link-exact-active toc-link level3">æŒ‡å®šæ—¥å¿—æ¡†æ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åˆ‡æ¢æ—¥å¿—æ¡†æ¶" class="router-link-active router-link-exact-active toc-link level3">åˆ‡æ¢æ—¥å¿—æ¡†æ¶</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é™æ€èµ„æºæ˜ å°„è§„åˆ™" class="router-link-active router-link-exact-active toc-link level2">é™æ€èµ„æºæ˜ å°„è§„åˆ™</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ¨¡æ¿å¼•æ“thymeleaf" class="router-link-active router-link-exact-active toc-link level2">æ¨¡æ¿å¼•æ“Thymeleaf</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springmvcè‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active toc-link level2">SpringMVCè‡ªåŠ¨é…ç½®åŸç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é»˜è®¤é…ç½®" class="router-link-active router-link-exact-active toc-link level3">é»˜è®¤é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#contentnegotiatingviewresolver" class="router-link-active router-link-exact-active toc-link level3">ContentNegotiatingViewResolver</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#httpmessageconverters" class="router-link-active router-link-exact-active toc-link level3">HttpMessageConverters</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#messagecodesresolver" class="router-link-active router-link-exact-active toc-link level3">MessageCodesResolver</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootåœ¨springmvcçš„é…ç½®æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">SpringBootåœ¨SpringMVCçš„é…ç½®æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ¥ç®¡springbootçš„springmvc" class="router-link-active router-link-exact-active toc-link level3">æ¥ç®¡SpringBootçš„SpringMVC</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å°ç»“-1" class="router-link-active router-link-exact-active toc-link level3">å°ç»“ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å›½é™…åŒ–" class="router-link-active router-link-exact-active toc-link level2">å›½é™…åŒ–</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä½¿ç”¨thymeleafå›½é™…åŒ–" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨thymeleafå›½é™…åŒ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootåŒºåŸŸä¿¡æ¯è§£æå™¨" class="router-link-active router-link-exact-active toc-link level3">SpringBootåŒºåŸŸä¿¡æ¯è§£æå™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªå®šä¹‰å›½é™…åŒ–" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰å›½é™…åŒ–</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ‹¦æˆªå™¨" class="router-link-active router-link-exact-active toc-link level2">æ‹¦æˆªå™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é”™è¯¯å¤„ç†åŸç†" class="router-link-active router-link-exact-active toc-link level2">é”™è¯¯å¤„ç†åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å®šåˆ¶é”™è¯¯é¡µé¢å’Œjsoné”™è¯¯æ•°æ®" class="router-link-active router-link-exact-active toc-link level2">å®šåˆ¶é”™è¯¯é¡µé¢å’ŒJSONé”™è¯¯æ•°æ®</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å®šåˆ¶ä¸€ä¸ªjsonæ•°æ®" class="router-link-active router-link-exact-active toc-link level3">å®šåˆ¶ä¸€ä¸ªJSONæ•°æ®</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åµŒå…¥å¼servlet" class="router-link-active router-link-exact-active toc-link level2">åµŒå…¥å¼Servlet</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springä¸¤ç§é…ç½®æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">Springä¸¤ç§é…ç½®æ–¹å¼ï¼š</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åµŒå…¥å¼servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®" class="router-link-active router-link-exact-active toc-link level3">åµŒå…¥å¼Servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ³¨å†Œä¸‰å¤§ç»„ä»¶" class="router-link-active router-link-exact-active toc-link level3">æ³¨å†Œä¸‰å¤§ç»„ä»¶</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æºç åˆ¨æ-åµŒå…¥å¼servletåŸç†" class="router-link-active router-link-exact-active toc-link level2">æºç åˆ¨æ åµŒå…¥å¼ServletåŸç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†" class="router-link-active router-link-exact-active toc-link level3">é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å°ç»“-2" class="router-link-active router-link-exact-active toc-link level3">å°ç»“ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åµŒå…¥å¼servletè‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active toc-link level2">åµŒå…¥å¼Servletè‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆjdbc" class="router-link-active router-link-exact-active toc-link level2">æ•´åˆJDBC</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªåŠ¨é…ç½®åŸç†-2" class="router-link-active router-link-exact-active toc-link level3">è‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆdruid" class="router-link-active router-link-exact-active toc-link level2">æ•´åˆDruid</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆmybatis" class="router-link-active router-link-exact-active toc-link level2">æ•´åˆMybatis</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#maven" class="router-link-active router-link-exact-active toc-link level3">Maven</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä½¿ç”¨æ³¨è§£" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨æ³¨è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä½¿ç”¨é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨é…ç½®æ–‡ä»¶</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootå¯åŠ¨åŸç†" class="router-link-active router-link-exact-active toc-link level2">SpringBootå¯åŠ¨åŸç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¬¬ä¸€æ­¥-åˆ›å»ºspringapplicationå¯¹è±¡" class="router-link-active router-link-exact-active toc-link level3">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºSpringApplicationå¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¬¬äºŒæ­¥-å¯åŠ¨åº”ç”¨" class="router-link-active router-link-exact-active toc-link level3">ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åº”ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°-æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»" class="router-link-active router-link-exact-active toc-link level2">ï¼ˆåŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°ï¼‰æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘" class="router-link-active router-link-exact-active toc-link level2">è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springbootç¼“å­˜åŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">SpringBootç¼“å­˜åŸºæœ¬ä½¿ç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#åŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">åŸºæœ¬ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å‡ ä¸ªå±æ€§ä»‹ç»" class="router-link-active router-link-exact-active toc-link level3">å‡ ä¸ªå±æ€§ä»‹ç»</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active toc-link level2">ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#ä»¥-cacheableä¸ºä¾‹" class="router-link-active router-link-exact-active toc-link level3">ä»¥@Cacheableä¸ºä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å°ç»“-3" class="router-link-active router-link-exact-active toc-link level3">å°ç»“ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#cacheputçš„ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">@CachePutçš„ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#cacheevict-æ¸…é™¤ç¼“å­˜" class="router-link-active router-link-exact-active toc-link level2">@CacheEvict æ¸…é™¤ç¼“å­˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#cachingå’Œ-cacheconfig" class="router-link-active router-link-exact-active toc-link level2">@Cachingå’Œ@CacheConfig</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#caching" class="router-link-active router-link-exact-active toc-link level3">@Caching</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#cacheconfig" class="router-link-active router-link-exact-active toc-link level3">@CacheConfig</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆç¼“å­˜ä¸­é—´ä»¶redis" class="router-link-active router-link-exact-active toc-link level2">æ•´åˆç¼“å­˜ä¸­é—´ä»¶Redis</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è‡ªå®šä¹‰rediscachemanager" class="router-link-active router-link-exact-active toc-link level2">è‡ªå®šä¹‰RedisCacheManager</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#springsecurityçš„ç®€å•ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">SpringSecurityçš„ç®€å•ä½¿ç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#thymeleafæ•´åˆspringsecurity" class="router-link-active router-link-exact-active toc-link level3">Thymeleafæ•´åˆSpringSecurity</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#è®°ä½æˆ‘" class="router-link-active router-link-exact-active toc-link level3">è®°ä½æˆ‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢" class="router-link-active router-link-exact-active toc-link level3">å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#shiroçš„ç®€å•ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">Shiroçš„ç®€å•ä½¿ç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#å¼€å§‹é…ç½®ä¸€ä¸ªshiro" class="router-link-active router-link-exact-active toc-link level3">å¼€å§‹é…ç½®ä¸€ä¸ªshiro</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ•´åˆshiroå¯åŠ¨å™¨" class="router-link-active router-link-exact-active toc-link level3">æ•´åˆShiroå¯åŠ¨å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html#æ‰©å±•" class="router-link-active router-link-exact-active toc-link level3">æ‰©å±•ï¼š</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="spring-boot-note" tabindex="-1"><a class="header-anchor" href="#spring-boot-note" aria-hidden="true">#</a> Spring-Boot-Note</h1><ul><li><a href="#spring-boot-note">Spring-Boot-Note</a><ul><li><a href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA--%E7%AE%80%E5%8C%96%E9%83%A8%E7%BD%B2">ç¯å¢ƒæ­å»º &amp; ç®€åŒ–éƒ¨ç½²</a><ul><li><a href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">ç¯å¢ƒæ­å»º</a></li><li><a href="#%E7%AE%80%E5%8C%96%E9%83%A8%E7%BD%B2">ç®€åŒ–éƒ¨ç½²</a></li></ul></li><li><a href="#springbootapplication%E5%90%AF%E5%8A%A8%E5%8E%9F%E7%90%86">@SpringBootApplicationå¯åŠ¨åŸç†</a></li><li><a href="#idea-%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BA">IDEA å¿«é€Ÿæ„å»º</a></li><li><a href="#yaml">YAML</a><ul><li><a href="#yaml%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">YAMLåŸºæœ¬è¯­æ³•</a></li></ul></li><li><a href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95">å•å…ƒæµ‹è¯•</a><ul><li><a href="#ssm">SSM</a></li><li><a href="#springboot">SpringBoot</a></li></ul></li><li><a href="#configurationpropertiesvalue">@ConfigurationProperties&amp;@Value</a></li><li><a href="#propertysourceimportresource">@PropertySource&amp;@ImportResource</a><ul><li><a href="#%E6%8E%A8%E8%8D%90%E8%87%AA%E5%B7%B1%E5%88%9B%E5%BB%BA%E4%B8%AA%E9%85%8D%E7%BD%AE%E7%B1%BB">ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6">é…ç½®æ–‡ä»¶çš„å ä½ç¬¦</a></li><li><a href="#%E5%A4%9Aprofile%E6%94%AF%E6%8C%81">å¤šProfileæ”¯æŒ</a></li></ul></li><li><a href="#%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%8D%E7%BD%AE%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7">åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§</a></li><li><a href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">è‡ªåŠ¨é…ç½®åŸç†</a><ul><li><a href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86-1">è‡ªåŠ¨é…ç½®åŸç†</a></li><li><a href="#%E4%BB%A5httpencodingautoconfiguration%E4%B8%BA%E4%BE%8B%E8%A7%A3%E9%87%8A%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†</a></li><li><a href="#%E5%B0%8F%E7%BB%93">å°ç»“</a></li></ul></li><li><a href="#conditional%E7%9B%B8%E5%85%B3%E6%B3%A8%E8%A7%A3%E5%92%8Cdebug">@Conditionalç›¸å…³æ³¨è§£å’ŒDebug</a></li><li><a href="#%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6sl4j">æ—¥å¿—æ¡†æ¶SL4J</a><ul><li><a href="#%E5%85%B6%E4%BB%96%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%E8%BD%AC%E6%8D%A2%E4%B8%BAsl4j">å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºSL4J</a></li><li><a href="#springboot%E5%92%8C%E6%97%A5%E5%BF%97%E5%85%B3%E7%B3%BB">SpringBootå’Œæ—¥å¿—å…³ç³»</a></li><li><a href="#%E6%97%A5%E5%BF%97%E7%9A%84%E9%85%8D%E7%BD%AE">æ—¥å¿—çš„é…ç½®</a></li><li><a href="#%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6">æŒ‡å®šæ—¥å¿—æ¡†æ¶</a></li><li><a href="#%E5%88%87%E6%8D%A2%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6">åˆ‡æ¢æ—¥å¿—æ¡†æ¶</a></li></ul></li><li><a href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99">é™æ€èµ„æºæ˜ å°„è§„åˆ™</a></li><li><a href="#%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8Ethymeleaf">æ¨¡æ¿å¼•æ“Thymeleaf</a></li><li><a href="#springmvc%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">SpringMVCè‡ªåŠ¨é…ç½®åŸç†</a><ul><li><a href="#%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE">é»˜è®¤é…ç½®</a></li><li><a href="#contentnegotiatingviewresolver">ContentNegotiatingViewResolver</a></li><li><a href="#httpmessageconverters">HttpMessageConverters</a></li><li><a href="#messagecodesresolver">MessageCodesResolver</a></li><li><a href="#springboot%E5%9C%A8springmvc%E7%9A%84%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%BC%8F">SpringBootåœ¨SpringMVCçš„é…ç½®æ¨¡å¼</a></li><li><a href="#%E6%8E%A5%E7%AE%A1springboot%E7%9A%84springmvc">æ¥ç®¡SpringBootçš„SpringMVC</a></li><li><a href="#%E5%B0%8F%E7%BB%93-1">å°ç»“ï¼š</a></li></ul></li><li><a href="#%E5%9B%BD%E9%99%85%E5%8C%96">å›½é™…åŒ–</a><ul><li><a href="#%E4%BD%BF%E7%94%A8thymeleaf%E5%9B%BD%E9%99%85%E5%8C%96">ä½¿ç”¨thymeleafå›½é™…åŒ–</a></li><li><a href="#springboot%E5%8C%BA%E5%9F%9F%E4%BF%A1%E6%81%AF%E8%A7%A3%E6%9E%90%E5%99%A8">SpringBootåŒºåŸŸä¿¡æ¯è§£æå™¨</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9B%BD%E9%99%85%E5%8C%96">è‡ªå®šä¹‰å›½é™…åŒ–</a></li></ul></li><li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8">æ‹¦æˆªå™¨</a></li><li><a href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E5%8E%9F%E7%90%86">é”™è¯¯å¤„ç†åŸç†</a></li><li><a href="#%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2%E5%92%8Cjson%E9%94%99%E8%AF%AF%E6%95%B0%E6%8D%AE">å®šåˆ¶é”™è¯¯é¡µé¢å’ŒJSONé”™è¯¯æ•°æ®</a><ul><li><a href="#%E5%AE%9A%E5%88%B6%E4%B8%80%E4%B8%AAjson%E6%95%B0%E6%8D%AE">å®šåˆ¶ä¸€ä¸ªJSONæ•°æ®</a></li></ul></li><li><a href="#%E5%B5%8C%E5%85%A5%E5%BC%8Fservlet">åµŒå…¥å¼Servlet</a><ul><li><a href="#spring%E4%B8%A4%E7%A7%8D%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F">Springä¸¤ç§é…ç½®æ–¹å¼ï¼š</a></li><li><a href="#%E5%B5%8C%E5%85%A5%E5%BC%8Fservlet%E4%B8%A4%E7%A7%8D%E4%BF%AE%E6%94%B9%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE">åµŒå…¥å¼Servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®</a></li><li><a href="#%E6%B3%A8%E5%86%8C%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6">æ³¨å†Œä¸‰å¤§ç»„ä»¶</a><ul><li><a href="#%E5%AE%9A%E5%88%B6servlet">å®šåˆ¶Servlet</a></li><li><a href="#%E5%AE%9A%E5%88%B6filter">å®šåˆ¶Filter</a></li><li><a href="#%E5%AE%9A%E5%88%B6listener">å®šåˆ¶Listener</a></li></ul></li></ul></li><li><a href="#%E6%BA%90%E7%A0%81%E5%88%A8%E6%9E%90-%E5%B5%8C%E5%85%A5%E5%BC%8Fservlet%E5%8E%9F%E7%90%86">æºç åˆ¨æ åµŒå…¥å¼ServletåŸç†</a><ul><li><a href="#%E4%BB%A5tomcat%E4%B8%BA%E4%BE%8B">ä»¥Tomcatä¸ºä¾‹</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%98%AF%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%8E%9F%E7%90%86">é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†</a></li><li><a href="#%E5%B0%8F%E7%BB%93-2">å°ç»“ï¼š</a></li></ul></li><li><a href="#%E5%B5%8C%E5%85%A5%E5%BC%8Fservlet%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">åµŒå…¥å¼Servletè‡ªåŠ¨é…ç½®åŸç†</a></li><li><a href="#%E6%95%B4%E5%90%88jdbc">æ•´åˆJDBC</a><ul><li><a href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86-2">è‡ªåŠ¨é…ç½®åŸç†</a></li></ul></li><li><a href="#%E6%95%B4%E5%90%88druid">æ•´åˆDruid</a></li><li><a href="#%E6%95%B4%E5%90%88mybatis">æ•´åˆMybatis</a><ul><li><a href="#maven">Maven</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3">ä½¿ç”¨æ³¨è§£</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">ä½¿ç”¨é…ç½®æ–‡ä»¶</a></li></ul></li><li><a href="#springboot%E5%90%AF%E5%8A%A8%E5%8E%9F%E7%90%86">SpringBootå¯åŠ¨åŸç†</a><ul><li><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%E5%88%9B%E5%BB%BAspringapplication%E5%AF%B9%E8%B1%A1">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºSpringApplicationå¯¹è±¡</a></li><li><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8">ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åº”ç”¨</a></li></ul></li><li><a href="#%E5%9F%BA%E4%BA%8E%E5%8E%9F%E7%90%86%E7%9A%84%E6%B5%8B%E8%AF%95%E7%AC%94%E8%AE%B0%E6%B5%8B%E8%AF%95%E5%90%AF%E5%8A%A8%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%B1%BB">ï¼ˆåŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°ï¼‰æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89starters%E6%9A%82%E6%97%B6%E6%97%A0%E6%B3%95%E7%90%86%E8%A7%A3">è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘</a></li><li><a href="#springboot%E7%BC%93%E5%AD%98%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">SpringBootç¼“å­˜åŸºæœ¬ä½¿ç”¨</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#%E5%87%A0%E4%B8%AA%E5%B1%9E%E6%80%A7%E4%BB%8B%E7%BB%8D">å‡ ä¸ªå±æ€§ä»‹ç»</a></li></ul></li><li><a href="#%E7%BC%93%E5%AD%98%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†</a><ul><li><a href="#%E4%BB%A5cacheable%E4%B8%BA%E4%BE%8B">ä»¥@Cacheableä¸ºä¾‹</a></li><li><a href="#%E5%B0%8F%E7%BB%93-3">å°ç»“ï¼š</a><ul><li><a href="#%E6%A0%B8%E5%BF%83">æ ¸å¿ƒï¼š</a></li><li><a href="#%E6%80%9D%E8%B7%AF%E6%95%B4%E7%90%86">æ€è·¯æ•´ç†</a></li></ul></li></ul></li><li><a href="#cacheput%E7%9A%84%E4%BD%BF%E7%94%A8">@CachePutçš„ä½¿ç”¨</a></li><li><a href="#cacheevict-%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98">@CacheEvict æ¸…é™¤ç¼“å­˜</a></li><li><a href="#caching%E5%92%8Ccacheconfig">@Cachingå’Œ@CacheConfig</a><ul><li><a href="#caching">@Caching</a></li><li><a href="#cacheconfig">@CacheConfig</a></li></ul></li><li><a href="#%E6%95%B4%E5%90%88%E7%BC%93%E5%AD%98%E4%B8%AD%E9%97%B4%E4%BB%B6redis">æ•´åˆç¼“å­˜ä¸­é—´ä»¶Redis</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89rediscachemanager">è‡ªå®šä¹‰RedisCacheManager</a><ul><li><a href="#%E6%89%A9%E5%B1%95cachemanager%E7%9A%84%E7%94%A8%E6%B3%95">æ‰©å±•CacheManagerçš„ç”¨æ³•</a></li></ul></li><li><a href="#springsecurity%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8">SpringSecurityçš„ç®€å•ä½¿ç”¨</a><ul><li><a href="#thymeleaf%E6%95%B4%E5%90%88springsecurity">Thymeleafæ•´åˆSpringSecurity</a></li><li><a href="#%E8%AE%B0%E4%BD%8F%E6%88%91"><strong>è®°ä½æˆ‘</strong></a></li><li><a href="#%E5%AE%9A%E5%88%B6%E8%87%AA%E5%B7%B1%E7%9A%84%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2">å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢</a></li></ul></li><li><a href="#shiro%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8">Shiroçš„ç®€å•ä½¿ç”¨</a><ul><li><a href="#%E5%BC%80%E5%A7%8B%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AAshiro">å¼€å§‹é…ç½®ä¸€ä¸ªshiro</a></li><li><a href="#%E6%95%B4%E5%90%88shiro%E5%90%AF%E5%8A%A8%E5%99%A8">æ•´åˆShiroå¯åŠ¨å™¨</a></li><li><a href="#%E6%89%A9%E5%B1%95">æ‰©å±•ï¼š</a><ul><li><a href="#shiro%E9%BB%98%E8%AE%A4%E8%BF%87%E6%BB%A4%E5%99%A8">shiroé»˜è®¤è¿‡æ»¤å™¨</a></li><li><a href="#shiro%E5%B8%B8%E7%94%A8%E7%9A%84%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E6%B3%A8%E8%A7%A3%E5%8F%AF%E4%BB%A5%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E4%B8%8A%E4%BD%BF%E7%94%A8">shiroå¸¸ç”¨çš„æƒé™æ§åˆ¶æ³¨è§£ï¼Œå¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸Šä½¿ç”¨</a></li></ul></li></ul></li></ul></li></ul><h2 id="ç¯å¢ƒæ­å»º-ç®€åŒ–éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒæ­å»º-ç®€åŒ–éƒ¨ç½²" aria-hidden="true">#</a> ç¯å¢ƒæ­å»º &amp; ç®€åŒ–éƒ¨ç½²</h2><h3 id="ç¯å¢ƒæ­å»º" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒæ­å»º" aria-hidden="true">#</a> ç¯å¢ƒæ­å»º</h3><p>å¯¼åŒ…ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--Spring Bootçš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒ--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--
Spring Bootå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªçš„startersï¼ˆå¯åŠ¨å™¨ï¼‰ï¼Œ
åªéœ€è¦åœ¨é¡¹ç›®é‡Œé¢å¼•å…¥è¿™äº›starterç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ã€‚è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆåœºæ™¯çš„å¯åŠ¨å™¨
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨é»˜è®¤åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªå¯åŠ¨å™¨ æ ‡æ³¨ä¸ºSpringBootç¨‹åº**@SpringBootApplication**</p><p><strong>æ³¨ï¼šè¿™ä¸ªç±»å¿…é¡»å’Œcontrolleråœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼Œä¸ç„¶å°±æ— æ³•è®¿é—®controller</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldApplicationContext</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HelloWorldApplicationContext</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç®€åŒ–éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#ç®€åŒ–éƒ¨ç½²" aria-hidden="true">#</a> ç®€åŒ–éƒ¨ç½²</h3><p>Mavenä¸‹å¯¼å…¥è¿™ä¸ªæ’ä»¶ç‚¹å‡»packageå³å¯æ‰“åŒ…æˆåŠŸ</p><p>java -jar åŒ…åæ—¢å¯ä»¥è¿è¡Œ</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/1-ceac24de.webp" alt="1" tabindex="0" loading="lazy"><figcaption>1</figcaption></figure><p>ä¸€äº›åœºæ™¯å¯åŠ¨å™¨ï¼š</p><table><thead><tr><th>åç§°</th><th>æè¿°</th><th>Pom</th></tr></thead><tbody><tr><td><code>spring-boot-starter</code></td><td>æ ¸å¿ƒ starterï¼ŒåŒ…æ‹¬ auto-configuration æ”¯æŒï¼Œlogging å’Œ YAML</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-activemq</code></td><td>Starter ä½¿ç”¨ Apache ActiveMQ è¿›è¡Œ JMS æ¶ˆæ¯ä¼ é€’</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-amqp</code></td><td>Starter ç”¨äºä½¿ç”¨ Spring AMQP å’Œ Rabbit MQ</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-aop</code></td><td>ä½¿ç”¨ Spring AOP å’Œ AspectJ è¿›è¡Œ aspect-oriented ç¼–ç¨‹çš„ Starter</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-artemis</code></td><td>Starter ä½¿ç”¨ Apache Artemis è¿›è¡Œ JMS æ¶ˆæ¯ä¼ é€’</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-batch</code></td><td>Starter ä½¿ç”¨ Spring Batch</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-cache</code></td><td>Starter ç”¨äºä½¿ç”¨ Spring Framework çš„ç¼“å­˜æ”¯æŒ</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-cloud-connectors</code></td><td>Starter ä½¿ç”¨ Spring Cloud è¿æ¥å™¨ç®€åŒ–è¿æ¥åˆ°äº‘å¹³å°ä¸­çš„æœåŠ¡ï¼Œå¦‚ Cloud Foundry å’Œ Heroku</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-cassandra</code></td><td>Starter ç”¨äºä½¿ç”¨ Cassandra åˆ†å¸ƒå¼æ•°æ®åº“å’Œ Spring Data Cassandra</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-cassandra-reactive</code></td><td>Starter ç”¨äºä½¿ç”¨ Cassandra åˆ†å¸ƒå¼æ•°æ®åº“å’Œ Spring Data Cassandra Reactive</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-couchbase</code></td><td>Starter ç”¨äºä½¿ç”¨ Couchbase document-oriented æ•°æ®åº“å’Œ Spring Data Couchbase</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-couchbase-reactive</code></td><td>Starter ç”¨äºä½¿ç”¨ Couchbase document-oriented æ•°æ®åº“å’Œ Spring Data Couchbase Reactive</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-elasticsearch</code></td><td>Starter ç”¨äºä½¿ç”¨ Elasticsearch æœç´¢å’Œåˆ†æå¼•æ“å’Œ Spring Data Elasticsearch</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-jdbc</code></td><td>Starter ä½¿ç”¨ Spring Data JDBC</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-jpa</code></td><td>Starter ä½¿ç”¨ Spring Data JPA å’Œ Hibernate</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-ldap</code></td><td>Starter ä½¿ç”¨ Spring Data LDAP</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-mongodb</code></td><td>Starter ç”¨äºä½¿ç”¨ MongoDB document-oriented æ•°æ®åº“å’Œ Spring Data MongoDB</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-mongodb-reactive</code></td><td>Starter ç”¨äºä½¿ç”¨ MongoDB document-oriented æ•°æ®åº“å’Œ Spring Data MongoDB Reactive</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-neo4j</code></td><td>Starter ç”¨äºä½¿ç”¨ Neo4j å›¾å½¢æ•°æ®åº“å’Œ Spring Data Neo4j</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-redis</code></td><td>Starter ä½¿ç”¨ Redis key-value data store ä¸ Spring Data Redis å’Œ Lettuce client</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-redis-reactive</code></td><td>Starter ç”¨äºå°† Redis key-value data store ä¸ Spring Data Redis reactive å’Œ Lettuce client ä¸€èµ·ä½¿ç”¨</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-rest</code></td><td>Starter ä½¿ç”¨ Spring Data REST åœ¨ REST ä¸Šå…¬å¼€ Spring Data repositories</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-data-solr</code></td><td>Starter å°† Apache Solr æœç´¢å¹³å°ä¸ Spring Data Solr ä¸€èµ·ä½¿ç”¨</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-freemarker</code></td><td>Starter for building MVC web applications ä½¿ç”¨ FreeMarker è§†å›¾</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-groovy-templates</code></td><td>Starter for building MVC web applications ä½¿ç”¨ Groovy æ¨¡æ¿è§†å›¾</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-hateoas</code></td><td>Starter for building hypermedia-based RESTful web application with Spring MVC and Spring HATEOAS</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-integration</code></td><td>Starter ä½¿ç”¨ Spring Integration</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jdbc</code></td><td>Starter ç”¨äºå°† JDBC ä¸ HikariCP è¿æ¥æ± ä¸€èµ·ä½¿ç”¨</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jersey</code></td><td>Starter for building RESTful web applications ä½¿ç”¨ JAX-RS å’Œ Jerseyã€‚ spring-boot-starter-webçš„æ›¿ä»£æ–¹æ¡ˆ</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jooq</code></td><td>Starter ç”¨äºä½¿ç”¨ jOOQ è®¿é—® SQL æ•°æ®åº“ã€‚ spring-boot-starter-data-jpaæˆ–spring-boot-starter-jdbcçš„æ›¿ä»£æ–¹æ¡ˆ</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-json</code></td><td>Starter ç”¨äºè¯»å†™ json</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jta-atomikos</code></td><td>Starter for JTA transactions ä½¿ç”¨ Atomikos</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-jta-bitronix</code></td><td>Starter for JTA transactions ä½¿ç”¨ Bitronix</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-mail</code></td><td>Starter ç”¨äºä½¿ç”¨ Java Mail å’Œ Spring Framework çš„ç”µå­é‚®ä»¶å‘é€æ”¯æŒ</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-mustache</code></td><td>Starter for building web applications ä½¿ç”¨ Mustache è§†å›¾</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-oauth2-client</code></td><td>Starter ä½¿ç”¨ Spring Security çš„ OAuth2/OpenID Connect client features</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-oauth2-resource-server</code></td><td>Starter ç”¨äºä½¿ç”¨ Spring Security çš„ OAuth2 èµ„æºæœåŠ¡å™¨ features</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-quartz</code></td><td>Starter ç”¨äºä½¿ç”¨ Quartz è°ƒåº¦ç¨‹åº</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-security</code></td><td>Starter ä½¿ç”¨ Spring Security</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-test</code></td><td>Starter ç”¨äºæµ‹è¯• Spring Boot applications with librariesï¼ŒåŒ…æ‹¬ JUnitï¼ŒHamcrest å’Œ Mockito</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-thymeleaf</code></td><td>Starter for building MVC web applications ä½¿ç”¨ Thymeleaf è§†å›¾</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-validation</code></td><td>Starter ç”¨äºä½¿ç”¨ Hibernate Validator è¿›è¡Œ Java Bean éªŒè¯</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-web</code></td><td>Starter for building webï¼ŒåŒ…æ‹¬ä½¿ç”¨ Spring MVC çš„ RESTfulï¼Œapplicationsã€‚ä½¿ç”¨ Tomcat ä½œä¸ºé»˜è®¤åµŒå…¥å¼å®¹å™¨</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-web-services</code></td><td>Starter ä½¿ç”¨ Spring Web Services</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-webflux</code></td><td>Starter for building WebFlux applications ä½¿ç”¨ Spring Framework çš„ Reactive Web æ”¯æŒ</td><td>Pom</td></tr><tr><td><code>spring-boot-starter-websocket</code></td><td>Starter for building WebSocket applications ä½¿ç”¨ Spring Framework çš„ WebSocket æ”¯æŒ</td><td>Pom</td></tr></tbody></table><h2 id="springbootapplicationå¯åŠ¨åŸç†" tabindex="-1"><a class="header-anchor" href="#springbootapplicationå¯åŠ¨åŸç†" aria-hidden="true">#</a> @SpringBootApplicationå¯åŠ¨åŸç†</h2><p><strong>@SpringBootApplication</strong></p><p>Spring Bootåº”ç”¨æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±»ï¼ŒSpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨</p><p>ä¸‹é¢æ˜¯è¿™ä¸ªæ³¨è§£çš„å†…éƒ¨ï¼šç»„åˆæ³¨è§£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@SpringBootConfiguration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>excludeFilters <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token class-name">TypeExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token class-name">AutoConfigurationExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**@SpringBootConfigurationï¼š**Spring Bootçš„é…ç½®ç±»ï¼›</p><p>â€‹ æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpring Bootçš„é…ç½®ç±»ï¼›</p><p>è¿™ä¸ªæ³¨è§£è¿›å»åæ˜¯ä¸€ä¸ªæ ‡æ³¨äº†**@Configuration**çš„ç±»ï¼š</p><p>é…ç½®ç±»ä¸Šæ¥æ ‡æ³¨è¿™ä¸ªæ³¨è§£ï¼›é…ç½®ç±» ----- é…ç½®æ–‡ä»¶ï¼›é…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**@EnableAutoConfigurationï¼š**å¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@AutoConfigurationPackage</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**@AutoConfigurationPackageï¼š**è‡ªåŠ¨é…ç½®åŒ…</p><p>**@Import(AutoConfigurationPackages.Registrar.class)ï¼š**Springçš„åº•å±‚æ³¨è§£@Importï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ï¼›å¯¼å…¥çš„ç»„ä»¶ç”±AutoConfigurationPackages.Registrar.class</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurationPackages<span class="token punctuation">.</span>Registrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AutoConfigurationPackage</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†…éƒ¨æ³¨å†ŒSpringBootå¯åŠ¨å™¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Registrar</span> <span class="token keyword">implements</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span><span class="token punctuation">,</span> <span class="token class-name">DeterminableImports</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">register</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPackageNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">determineImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è°ƒè¯•å¯ä»¥çœ‹å‡º</p><figure><img src="/Computer-Science-Learn-Notes/assets/2-ee76fe10.webp" alt="2" tabindex="0" loading="lazy"><figcaption>2</figcaption></figure><p>å†æ¬¡è°ƒè¯•è¿™æ®µï¼š<em>register(registry, new PackageImports(metadata).getPackageNames().toArray(new String[0]));</em></p><figure><img src="/Computer-Science-Learn-Notes/assets/3-c28719c2.webp" alt="3" tabindex="0" loading="lazy"><figcaption>3</figcaption></figure><p>å¯å¾—å‡ºç»“è®ºï¼šå°†<strong>ä¸»é…ç½®ç±»ï¼ˆ@SpringBootApplicationæ ‡æ³¨çš„ç±»ï¼‰çš„æ‰€åœ¨åŒ…åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨</strong></p><p>å†çœ‹**EnableAutoConfigurationçš„****@Import(AutoConfigurationImportSelector.class)**ç»™å®¹å™¨å¯¼å…¥ç»„ä»¶ï¼Œå°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›ï¼›è¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼›</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">NO_IMPORTS</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">AutoConfigurationEntry</span> autoConfigurationEntry <span class="token operator">=</span> <span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">toStringArray</span><span class="token punctuation">(</span>autoConfigurationEntry<span class="token punctuation">.</span><span class="token function">getConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è§‚å¯Ÿï¼Œè¿™ä¸ª2.0çš„SpringBootæ˜¯è·³è½¬åˆ°äº†<strong>getAutoConfigurationEntry</strong>è¿›è¡Œäº†éå†ä¾èµ–åŒ…</p><p>é€šè¿‡å•æ­¥è°ƒè¯•å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆxxxAutoConfigurationï¼‰ï¼›å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ï¼›è‡ªåŠ¨é…ç½®ç±»</p><figure><img src="/Computer-Science-Learn-Notes/assets/4-96f9353e.webp" alt="4" tabindex="0" loading="lazy"><figcaption>4</figcaption></figure><p>å¯ä»¥è§‚å¯Ÿåˆ°è¿™ä¸ªæŸ¥åˆ°åŒ…çš„è°ƒç”¨æ–¹å¼ï¼šgetCandidateConfigurations</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">AutoConfigurationEntry</span> <span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">EMPTY_ENTRY</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">AnnotationAttributes</span> attributes <span class="token operator">=</span> <span class="token function">getAttributes</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    configurations <span class="token operator">=</span> <span class="token function">removeDuplicates</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> exclusions <span class="token operator">=</span> <span class="token function">getExclusions</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">checkExcludedClasses</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    configurations<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    configurations <span class="token operator">=</span> <span class="token function">getConfigurationClassFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fireAutoConfigurationImportEvents</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AutoConfigurationEntry</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è°ƒç”¨getSpringFactoriesLoaderFactoryClass</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">AnnotationAttributes</span> attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">loadFactoryNames</span><span class="token punctuation">(</span><span class="token function">getSpringFactoriesLoaderFactoryClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                                         <span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> <span class="token string">&quot;No auto configuration classes found in META-INF/spring.factories. If you &quot;</span>
                    <span class="token operator">+</span> <span class="token string">&quot;are using a custom packaging, make sure that file is correct.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> configurations<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•ä¸­ï¼šloadFactoryNameså°±æ˜¯å¯¹è¿™ä¸ªSpringBootä¾èµ–åŒ…è¿›è¡ŒåŠ è½½ï¼ˆæŠŠå¾—åˆ°çš„propertiesæ·»åŠ åˆ°å®¹å™¨ä¸­è¿›è¡ŒåŠ è½½ï¼‰</p><figure><img src="/Computer-Science-Learn-Notes/assets/5-9d99a966.webp" alt="5" tabindex="0" loading="lazy"><figcaption>5</figcaption></figure><p>è¿™ä¸ª<strong>FACTORIES_RESOURCE_LOCATION</strong>é™æ€å˜é‡ä¹Ÿæ ‡è¯†äº†è¿™äº›<strong>åŒ…çš„è·¯å¾„ä½ç½®</strong>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">FACTORIES_RESOURCE_LOCATION</span> <span class="token operator">=</span> <span class="token string">&quot;META-INF/spring.factories&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»”ç»†çœ‹ï¼Œè¿˜çœŸæ˜¯ã€‚SpringBootå°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆ</p><figure><img src="/Computer-Science-Learn-Notes/assets/6-b86a4061.webp" alt="6" tabindex="0" loading="lazy"><figcaption>6</figcaption></figure><p><strong>å°ç»“</strong></p><p>å°†META-INF/spring.factoriesé‡Œé¢é…ç½®çš„æ‰€æœ‰é€šè¿‡EnableAutoConfigurationåŠ å…¥åˆ°å®¹å™¨ä¸­</p><h2 id="idea-å¿«é€Ÿæ„å»º" tabindex="-1"><a class="header-anchor" href="#idea-å¿«é€Ÿæ„å»º" aria-hidden="true">#</a> IDEA å¿«é€Ÿæ„å»º</h2><figure><img src="/Computer-Science-Learn-Notes/assets/7-0aff6229.webp" alt="7" tabindex="0" loading="lazy"><figcaption>7</figcaption></figure><p>é»˜è®¤ç”Ÿæˆçš„Spring Booté¡¹ç›®ç»“æœ</p><p>resourcesæ–‡ä»¶å¤¹ä¸­ç›®å½•ç»“æ„</p><ul><li><strong>static</strong>ï¼šä¿å­˜æ‰€æœ‰çš„é™æ€èµ„æºï¼› js css imagesï¼›</li><li></li><li><strong>templates</strong>ï¼šä¿å­˜æ‰€æœ‰çš„æ¨¡æ¿é¡µé¢ï¼›ï¼ˆSpring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒJSPé¡µé¢ï¼‰ï¼›å¯ä»¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼ˆfreemarkerã€thymeleafï¼‰ï¼›</li><li><strong>application.properties</strong>ï¼šSpring Bootåº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼›å¯ä»¥ä¿®æ”¹ä¸€äº›é»˜è®¤è®¾ç½®ï¼›</li></ul><h2 id="yaml" tabindex="-1"><a class="header-anchor" href="#yaml" aria-hidden="true">#</a> YAML</h2><p>XMLå’ŒYAMLåŒºåˆ«ï¼š</p><p>XMLï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;server&gt;
    &lt;port&gt;8080&lt;/port&gt;
&lt;/server&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>YAML:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>server:
  port: 8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="yamlåŸºæœ¬è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#yamlåŸºæœ¬è¯­æ³•" aria-hidden="true">#</a> YAMLåŸºæœ¬è¯­æ³•</h3><p>å†™æ³•ï¼šKey:(ç©ºæ ¼)Value</p><p>å…¶ä»–æ•°ç»„ã€å¯¹è±¡è¯­æ³•å¯ä»¥é˜…è¯»ï¼š<a href="https://juejin.im/post/5c1a4a0fe51d45344a1c3d2a" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5c1a4a0fe51d45344a1c3d2a<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å°†YAMLçš„é…ç½®çš„å±æ€§æ˜ å°„åˆ°å®ä½“ç±»ä¸­**@ConfigurationProperties**å¯¹å®ä½“ç±»çš„é…ç½®è¿›è¡Œç»‘å®š</p><p>**prefixï¼š**é…ç½®ç”¨å“ªä¸ªè¿›è¡Œç»‘å®š</p><p>åœ¨YAMLå¯ä»¥é…ç½®è¿™æ ·ä¸€ä¸ªæ¡ˆä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">lastName</span><span class="token punctuation">:</span> å¼ ä¸‰
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
  <span class="token key atrule">isBoss</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">birthday</span><span class="token punctuation">:</span> 2020/2/2
  <span class="token key atrule">map</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">k1</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span><span class="token key atrule">k2</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">}</span>
  <span class="token key atrule">list</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> lisi
    <span class="token punctuation">-</span> zhaoliu
  <span class="token key atrule">dog</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> å°ç‹—
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ä½“ç±»è¿›è¡Œç»‘å®šæµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> isBoss<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Dog</span> dog<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½¿ç”¨ConfigurationPropertieså‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure><img src="data:image/webp;base64,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" alt="8" tabindex="0" loading="lazy"><figcaption>8</figcaption></figure><p>è§£å†³æ–¹æ¡ˆï¼šå¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šè¿™é‡Œå¿…é¡»ä½¿ç”¨**@Component<strong>æŠŠå®ƒåŠ å…¥åˆ°å®¹å™¨ä¸­ï¼Œå°±åƒ</strong>@Repository**ä¸€æ ·æ‰èƒ½ä½¿ç”¨</p><p>æµ‹è¯•ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>Person<span class="token punctuation">{</span>lastName=&#39;å¼ ä¸‰&#39;<span class="token punctuation">,</span> age=<span class="token number">18</span><span class="token punctuation">,</span> isBoss=<span class="token null keyword">null</span><span class="token punctuation">,</span> birthday=Sun Feb <span class="token number">02</span> <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> CST <span class="token number">2020</span><span class="token punctuation">,</span> map=<span class="token punctuation">{</span>k1=<span class="token number">12</span><span class="token punctuation">,</span> k2=<span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span> list=<span class="token punctuation">[</span>lisi<span class="token punctuation">,</span> zhaoliu<span class="token punctuation">]</span><span class="token punctuation">,</span> dog=Dog<span class="token punctuation">{</span>name=&#39;å°ç‹—&#39;<span class="token punctuation">,</span> age=<span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> å•å…ƒæµ‹è¯•</h2><p>æ³¨ï¼šæµ‹è¯•ç±»å’Œä¸»ç±»è¦åŒ…åè¦ç»Ÿä¸€æ‰èƒ½å¯åŠ¨</p><figure><img src="/Computer-Science-Learn-Notes/assets/9-48f2c28b.webp" alt="9" tabindex="0" loading="lazy"><figcaption>9</figcaption></figure><p><strong>ä½¿ç”¨SSMå’Œä½¿ç”¨SpringBootçš„TeståŠŸèƒ½çš„å¯¹æ¯”</strong></p><h3 id="ssm" tabindex="-1"><a class="header-anchor" href="#ssm" aria-hidden="true">#</a> SSM</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//@RunWith æŒ‡å®šç”¨å“ªç§é©±åŠ¨è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œé»˜è®¤æ˜¯junit</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token string">&quot;classpath:applicationContext.xml&quot;</span><span class="token punctuation">)</span> <span class="token comment">//æŒ‡å®šé…ç½®æ–‡ä»¶</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringTest</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookServlet</span> bookServlet<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bookServlet<span class="token punctuation">.</span><span class="token function">doGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="springboot" tabindex="-1"><a class="header-anchor" href="#springboot" aria-hidden="true">#</a> SpringBoot</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot02ApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">Person</span> person<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè¦ä½¿ç”¨RunWithéœ€è¦è¿›å…¥Mavenåˆ é™¤exclusions</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.vintage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-vintage-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°±å¯ä»¥ä½¿ç”¨Runnwithæµ‹è¯•å•¦ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot02ApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">Person</span> person<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="configurationproperties-value" tabindex="-1"><a class="header-anchor" href="#configurationproperties-value" aria-hidden="true">#</a> @ConfigurationProperties&amp;@Value</h2><table><thead><tr><th></th><th>@ConfigurationProperties</th><th>@Value</th></tr></thead><tbody><tr><td>åŠŸèƒ½</td><td>æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§</td><td>ä¸€ä¸ªä¸ªæŒ‡å®š</td></tr><tr><td>æ¾æ•£ç»‘å®šï¼ˆæ¾æ•£è¯­æ³•â€œ-â€ï¼‰</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>SpEL</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>JSR303æ•°æ®æ ¡éªŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å¤æ‚ç±»å‹å°è£…</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table><p><strong>@Value</strong>æµ‹è¯•çš„å®ä½“ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token comment">//@ConfigurationProperties(prefix = &quot;person&quot;)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;zhiyu&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{2*10}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> isBoss<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>Person<span class="token punctuation">{</span>lastName=&#39;zhiyu&#39;<span class="token punctuation">,</span> age=<span class="token number">20</span><span class="token punctuation">,</span> isBoss=<span class="token boolean">true</span><span class="token punctuation">,</span> birthday=<span class="token null keyword">null</span><span class="token punctuation">,</span> map=<span class="token null keyword">null</span><span class="token punctuation">,</span> list=<span class="token null keyword">null</span><span class="token punctuation">,</span> dog=<span class="token null keyword">null</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="propertysource-importresource" tabindex="-1"><a class="header-anchor" href="#propertysource-importresource" aria-hidden="true">#</a> @PropertySource&amp;@ImportResource</h2><p><strong>@PropertySource</strong>ï¼šåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</p><p>**æ³¨ï¼š<strong>åŠ è½½é…ç½®æ–‡ä»¶æ—¶éœ€è¦é…ç½®</strong>@ConfigurationProperties(prefix = &quot;&quot;)**ä½¿ç”¨</p><p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p><p>YAMLæ–‡ä»¶ä¸­åªæœ‰ç«¯å£ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç±»è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼šperson.properties</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">person.lastName</span><span class="token punctuation">=</span><span class="token value attr-value">æå››</span>
<span class="token key attr-name">person.age</span><span class="token punctuation">=</span><span class="token value attr-value">18</span>
<span class="token key attr-name">person.isBoss</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">person.birthday</span><span class="token punctuation">=</span><span class="token value attr-value">2020/2/2</span>
<span class="token key attr-name">person.map.k1</span><span class="token punctuation">=</span><span class="token value attr-value">12</span>
<span class="token key attr-name">person.map.k2</span><span class="token punctuation">=</span><span class="token value attr-value">13</span>
<span class="token key attr-name">person.list</span><span class="token punctuation">=</span><span class="token value attr-value">a,b</span>
<span class="token key attr-name">person.dog.name</span><span class="token punctuation">=</span><span class="token value attr-value">å°ç‹—</span>
<span class="token key attr-name">person.dog.age</span><span class="token punctuation">=</span><span class="token value attr-value">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨å³å¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:person.properties&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>Person<span class="token punctuation">{</span>lastName=&#39;æå››&#39;<span class="token punctuation">,</span> age=<span class="token number">18</span><span class="token punctuation">,</span> isBoss=<span class="token null keyword">null</span><span class="token punctuation">,</span> birthday=Sun Feb <span class="token number">02</span> <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> CST <span class="token number">2020</span><span class="token punctuation">,</span> map=<span class="token punctuation">{</span>k2=<span class="token number">13</span><span class="token punctuation">,</span> k1=<span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span> list=<span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">,</span> dog=Dog<span class="token punctuation">{</span>name=&#39;å°ç‹—&#39;<span class="token punctuation">,</span> age=<span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>@ImportResource</strong> å¯¼å…¥è‡ªå®šä¹‰çš„Springæ–‡ä»¶</p><p>åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶å¯¼å…¥ä¸€ä¸ªè‡ªå®šä¹‰çš„bean</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºä¸€ä¸ªspringé…ç½®æ–‡ä»¶ï¼šbeans.xmlï¼ŒåŠ å…¥è¿™ä¸ªç±»</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.zhiyucs.servcie.HelloService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>helloService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨å…¥å£åŠ å…¥è¿™ä¸ªæ³¨è§£å¯¼å…¥è¿™ä¸ªspringæ–‡ä»¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:beans.xml&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot02Application</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•å³å¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token class-name">ApplicationContext</span> ioc<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">containServiceTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> b <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">&quot;helloService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ç»“æœï¼štrue</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶è¿™æ˜¯ä¸æ¨èçš„ï¼ŒSpringBootæ¨èçš„æ–¹å¼å¦‚ä¸‹ï¼š</p><h3 id="ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»" tabindex="-1"><a class="header-anchor" href="#ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»" aria-hidden="true">#</a> ã€æ¨èã€‘è‡ªå·±åˆ›å»ºä¸ªé…ç½®ç±»</h3><p>ä½¿ç”¨**@Configuration**æŒ‡å®šè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</p><p>ä½¿ç”¨**@Bean**æŠŠè¿™ä¸ªè¿”å›å€¼åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼ŒIDå°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„æ–¹æ³•åã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">HelloService</span> <span class="token function">helloService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HelloService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é…ç½®æ–‡ä»¶çš„å ä½ç¬¦" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–‡ä»¶çš„å ä½ç¬¦" aria-hidden="true">#</a> é…ç½®æ–‡ä»¶çš„å ä½ç¬¦</h3><p>åœ¨é…ç½®æ–‡ä»¶å¯ä»¥ä½¿ç”¨${} å–å€¼random</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">person.lastName</span><span class="token punctuation">=</span><span class="token value attr-value">${random.uuid}</span>
<span class="token key attr-name">person.age</span><span class="token punctuation">=</span><span class="token value attr-value">${random.int}</span>
<span class="token key attr-name">person.isBoss</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">person.birthday</span><span class="token punctuation">=</span><span class="token value attr-value">2020/2/2</span>
<span class="token key attr-name">person.map.k1</span><span class="token punctuation">=</span><span class="token value attr-value">12</span>
<span class="token key attr-name">person.map.k2</span><span class="token punctuation">=</span><span class="token value attr-value">13</span>
<span class="token key attr-name">person.list</span><span class="token punctuation">=</span><span class="token value attr-value">a,b</span>
<span class="token key attr-name">person.dog.name</span><span class="token punctuation">=</span><span class="token value attr-value">${person.last-name}_dog</span>
<span class="token key attr-name">person.dog.age</span><span class="token punctuation">=</span><span class="token value attr-value">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>Person<span class="token punctuation">{</span>lastName=&#39;20b50b74<span class="token number">-4721</span>-4d80-a786-f0e726b195f3&#39;<span class="token punctuation">,</span> age=<span class="token number">-790018533</span><span class="token punctuation">,</span> isBoss=<span class="token null keyword">null</span><span class="token punctuation">,</span> birthday=Sun Feb <span class="token number">02</span> <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> CST <span class="token number">2020</span><span class="token punctuation">,</span> map=<span class="token punctuation">{</span>k2=<span class="token number">13</span><span class="token punctuation">,</span> k1=<span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span> list=<span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">,</span> dog=Dog<span class="token punctuation">{</span>name=&#39;6a1ab7a2-c65c-4df5-be46-3614ef009efd_dog&#39;<span class="token punctuation">,</span> age=<span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å¤šprofileæ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#å¤šprofileæ”¯æŒ" aria-hidden="true">#</a> å¤šProfileæ”¯æŒ</h3><p>åœ¨ç¼–å†™é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯ï¼Œapplication-{profile}.yml/properties</p><p>ä¸¤ç§æ¿€æ´»æ–¹å¼ï¼šåˆ›å»ºä¸¤ä¸ªç¯å¢ƒ -- å¼€å‘/ç”Ÿäº§</p><figure><img src="data:image/webp;base64,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" alt="10" tabindex="0" loading="lazy"><figcaption>10</figcaption></figure><p>applicationä¸­å†™æ¿€æ´»å“ªä¸ªï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä»–å°±å†™ç”Ÿäº§/å¼€å‘ç¯å¢ƒçš„é…ç½®</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥ç›´æ¥éƒ½å†™åœ¨ä¸€ä¸ªé…ç½®ä¸­</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
    
<span class="token punctuation">---</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> pro
  
<span class="token punctuation">---</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼æ›´æ¢ç¯å¢ƒ</p><p>java -jar åŒ…å --spring.profiles.active=dev/pro</p><p>è¿˜å¯ä»¥ä½¿ç”¨IDEAçš„è™šæ‹Ÿç¯å¢ƒæ¿€æ´»</p><figure><img src="/Computer-Science-Learn-Notes/assets/11-7c75319a.webp" alt="11" tabindex="0" loading="lazy"><figcaption>11</figcaption></figure><h2 id="åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§" aria-hidden="true">#</a> åŠ è½½é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œä¼˜å…ˆçº§</h2><p>æµ‹è¯•<strong>ç±»è·¯å¾„ä¸‹</strong>ï¼ˆport:8080ï¼‰å’Œ<strong>ç±»è·¯å¾„çš„config</strong>æ–‡ä»¶å¤¹ä¸‹ï¼ˆport:8081ï¼‰ï¼š</p><figure><img src="data:image/webp;base64,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" alt="12" tabindex="0" loading="lazy"><figcaption>12</figcaption></figure><figure><img src="data:image/webp;base64,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" alt="12.1" tabindex="0" loading="lazy"><figcaption>12.1</figcaption></figure><p>å‰ä¸¤ä¸ªåŒæ—¶å­˜åœ¨ï¼Œå†æŠŠä¸€ä¸ªç«¯å£ä¸º8083çš„æ–‡ä»¶æ”¾åœ¨<strong>æ ¹ç›®å½•ä¸‹</strong>ï¼š</p><figure><img src="data:image/webp;base64,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" alt="13" tabindex="0" loading="lazy"><figcaption>13</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/13.1-57e4cd4b.webp" alt="13.1" tabindex="0" loading="lazy"><figcaption>13.1</figcaption></figure><p>å‰ä¸‰ä¸ªåŒæ—¶å­˜åœ¨ï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶æ”¾åˆ°<strong>æ ¹ç›®å½•ä¸‹çš„config</strong>ï¼ˆç«¯å£ä¸º8084ï¼‰ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/14-9db482dc.webp" alt="14" tabindex="0" loading="lazy"><figcaption>14</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/14.1-c3c932e9.webp" alt="14.1" tabindex="0" loading="lazy"><figcaption>14.1</figcaption></figure><p><strong>å°ç»“</strong>:ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½ -file:./config &gt; -file:./ &gt; -classpath:/config/ &gt; -classpath:/ SpringBootè¿™å››ä¸ªä½ç½®çš„é…ç½®æ–‡ä»¶éƒ½ä¼šåŠ è½½ å¹¶ä¸”ä¼šäº’è¡¥é…ç½®</p><p><strong>æµ‹è¯•ï¼šä½¿ç”¨æœ€ä½çº§çš„é…ç½®æ–‡ä»¶é…ç½®è·¯å¾„</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
    <span class="token key atrule">context-path</span><span class="token punctuation">:</span> /admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/15-c56df91d.webp" alt="15" tabindex="0" loading="lazy"><figcaption>15</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/16-1a6d6690.webp" alt="16" tabindex="0" loading="lazy"><figcaption>16</figcaption></figure><p><strong>è¿ç»´é…ç½®</strong> è¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œï¼š java -jar åŒ…å --spring.config.location=æŒ‡å®šé…ç½®æ–‡ä»¶ç»å¯¹è·¯å¾„</p><h2 id="è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨é…ç½®åŸç†" aria-hidden="true">#</a> è‡ªåŠ¨é…ç½®åŸç†</h2><p><a href="https://www.docs4dev.com/docs/zh/spring-boot/2.1.1.RELEASE/reference/common-application-properties.html#a-common-application-properties" target="_blank" rel="noopener noreferrer">åœ¨YML/Propertiesèƒ½é…ç½®çš„å±æ€§<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="è‡ªåŠ¨é…ç½®åŸç†-1" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨é…ç½®åŸç†-1" aria-hidden="true">#</a> è‡ªåŠ¨é…ç½®åŸç†</h3><p>SpringBootå¯åŠ¨çš„æ—¶å€™åŠ è½½ä¸»é…ç½®ç±»**@SpringBootApplication**ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½**@EnableAutoConfiguration**</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootAutoconfigApplication</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@SpringBootConfiguration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>excludeFilters <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token class-name">TypeExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token class-name">AutoConfigurationExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="wiz://open_document?guid=62a96d1e-af78-4e7c-92d5-9a06b8beedf8&amp;kbguid=&amp;private_kbguid=51ed7a20-5f58-11ea-ac04-65f1a2b61811">@EnableAutoConfigurationçš„ä½œç”¨</a></p><h3 id="ä»¥httpencodingautoconfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#ä»¥httpencodingautoconfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†" aria-hidden="true">#</a> ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">ConditionalOnWebApplication<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token constant">SERVLET</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">CharacterEncodingFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;server.servlet.encoding&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpEncodingAutoConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>@Configuration</strong>ï¼šé…ç½®ç±»ï¼ˆç›¸å½“äºé…ç½®æ–‡ä»¶ï¼‰</p><p><strong>@EnableConfigurationProperties</strong>ï¼šå¯ç”¨<a href="wiz://open_document?guid=5294ee2c-1921-4f6e-a62d-cd516a7f3bb2&amp;kbguid=&amp;private_kbguid=51ed7a20-5f58-11ea-ac04-65f1a2b61811">ConfigurationProperties</a>ï¼ˆä»é…ç½®æ–‡ä»¶ä¸­è·å–å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®šï¼‰åŠŸèƒ½ï¼ˆServerPropertiesï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;server&quot;</span><span class="token punctuation">,</span> ignoreUnknownFields <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerProperties</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Server HTTP port.
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> port<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›¸å½“äºæŠŠserverçš„å±æ€§ç»‘å®šåˆ°è¿™ä¸ªServerPropertiesç±»ä¸­çš„å±æ€§ï¼ˆæ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„portï¼‰</p><p><strong>@ConditionalOnWebApplication</strong>ï¼šæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»çš„é…ç½®æ‰ä¼šç”Ÿæ•ˆ</p><p><strong>@ConditionalOnClass</strong>ï¼šåˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ— è¿™ä¸ªç±»ï¼ˆCharacterEncodingFilterï¼‰</p><p><strong>@ConditionalOnProperty</strong>ï¼šâ€œåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨è¿™ä¸ªé…ç½®</p><p><strong>@Bean</strong>ç»™å®¹å™¨æ·»åŠ ç»„ä»¶</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//å’ŒSpringBootçš„å€¼æ˜ å°„</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Encoding</span> properties<span class="token punctuation">;</span>
<span class="token comment">//åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨æƒ…å†µï¼Œå‚æ•°ä»å®¹å™¨ä¸­æ‹¿</span>
<span class="token keyword">public</span> <span class="token class-name">HttpEncodingAutoConfiguration</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ç»™å®¹å™¨æ·»åŠ ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä»propertiesè·å–</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
<span class="token keyword">public</span> <span class="token class-name">CharacterEncodingFilter</span> <span class="token function">characterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CharacterEncodingFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderedCharacterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filter<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getCharset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filter<span class="token punctuation">.</span><span class="token function">setForceRequestEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span><span class="token class-name">Encoding<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token constant">REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filter<span class="token punctuation">.</span><span class="token function">setForceResponseEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span><span class="token class-name">Encoding<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token constant">RESPONSE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> filter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸€ç³»åˆ—ä¸‹æ¥ç›¸å½“äºå¯ä»¥å®ç°</p><p>è¿™ä¸ªæ–¹æ³•åœ¨<strong>ServerProperties</strong>ä¸­ï¼Œè€Œè‡ªåŠ¨é…ç½®å®ç°äº†**@EnableConfigurationProperties(ServerProperties.class)**</p><figure><img src="data:image/webp;base64,UklGRuYMAABXRUJQVlA4INoMAADQOgCdASrQAWIAPm00lEckIyIhKRj5iIANiWdu4XSg5lzGSetL5nxmn9fQt/8On36UueH3UH/df//3O+jT9Xv/j9IB//+DH8cdf3+x8LfJtAuxr9OeoL8j+6mOhkC8SdQL8j/qXfL/F3vNtH/0P6WewR6d/MfF39G/0/oT+X/1L9bPgA/MX+kewfep+ZewB/Mv8T6rv9d46Pqn2B/z/7FJUq8Mi4sczoZ/OiHFpgdmzeM2eVddbNm8ZjhtiAv3+49NvH2yMweMTu3dDJj7ti1j6rA7bKZiUdQkvcEsnpywv4dl3yHSDuyWRdi1uyXdbgBVt7QSSFhu3jAc31kHARqYDRD+AupS0tSnF7GVyYB0+Hgl5o2+rjHp9GOsgmVm4sBjmillW4stFCYDHyW0J3nNyAhFiq2LwdyEyvbjoHnfwDfsyzVgBVVexH8Qq8+DUL86vjpPZs/af/WGqnVPoWNs6VL/VjBz+/jSoqudm4gCPcvUfdu1SshjVoi5IoEA7Kheyu+VbJJCQXHrTfEv3A8/cZKNnh2bN4zZ5VMivYXubO3fbMs0/8lL0HrCe26LHjLmGRmqnWFp3PgHCLF25sS0FEeJAbOA7Nm8Zs8q7L/DhG4nY4GXAccZs8q662bCAAD+/2CMajhFSnhjZHfIKGcbT2nqW8EsDSLsFKQsfw7TqJozoLDskcTSHGJAjK5fRClq8G0LnCgfNdT6EmF2o2qQM6yL8ebvPi9dBoxu7ddgRd32Cdx7bzbr8xAAAP2/oELo8RQGvmedOr2UgsGB+8MrNwU+f+9lxcFTO+WoctoXB7JYZ53XDjmyC4Pekh7ZoAzES0ZLGFVRIiQRhbctQp4xS57lyWGekrDECA7hv4TyPEPW4L4m99J5O+6qxC/LZBI8DAEaaOQirgPZjX7ukk3tAEu5DrTLaRJ9133L1HjTjUZRcHupnOBaYYz70URRASLAuurt9GV/VErl4Di/fnhs1WH/L3bnUxoC2LEJu+ka47SG6aLK3oDM5Jb77QuZDN/ZpQFwfI1ajb+Wa5qY1BndSRq/GMV6AWeZSDo82zv3yL+M0BN+v/7lqRNjYevABVJ+VRgB0xpPL8FYnrFF5BAdEU1xtQX3yL+M0jYphr41F5W9V4i7mHbDDvGrtyq9kzeIdZMDgxJKHJxsAc1WA0mbMtallI2OKBT+ZnEBaNfkrJO7oCjRyapWyKtYbQv1ASZz8Yvn292Eo8DdMCwiYZqx5UgTBuhlo8tF5JzMqwnTooinOMEMPAQziAtGvyVkndS7Q/s/6yBqn80I/SGPa/ETgxHiXcS1tR+dYbk5phPbWUhS6xue+lfPsvWz7WsonQm/TvJXcIn0PADi/NHPGjwqqZqSbgbiqBRzo8CI/+03fou4oUkxqxhGnmzLU9kDeXMO0FYfT8m1iVOyudi7bOZ/YnnZPIXqfAsdiNs7iBNl9QZl7M0+/iWh3an9xfE/DrpXdMhOOem9UEXSy+19UlTaqLSue2aSsBvmJC3sf72rhVRjgmIfEzk5bZnSGPnLFeKsqT0E+nxKZmPPweXHlcKH/aZ1dRYUNmBQbWLW+kHATmmdkJ5SlC6O/f7drs+9rQQegy2myGPROqbyR8PWfn8t5I0e7RJKHir7baezbee1w6LObT6jQRjsQsXuSsTliHYvsPgDHalRNxhsZ5g8PSjf+VjwUe8BvxiuQzPH9/BAeapvJzrqSXvKGfd5IJopnkkjbnJrawwJPfiBxtDOKyeCRnkB5aRyZXnd+JCBvkDMn71I3vswiTHoLcOz24xcX8n0t49jrh0Zl9dVmrs/EdMDOnsbbdwA1rAfiiawifvCYWkLYPlmp9k9u8DR1AG0Jf/GY5GhmQ8rXVqBbF0GEcBaIBwmI9pdrSGbYXzvt0J9EtDZNN+CHOXTT8tv9bPdtS3sitikNSMiEmMGYTPhgWc6a4wNFga0KhHl2x7GRLKq+hPxj2Cz+G3Xia+SYZ/TmCZeui2nKty0+dtI5M/dVMy6MB15clIoLhztGVDKmN02l0eFteeGbdfI0C+8gtrQP62w+PEtt/0NbfEpnPWqEmgFQILGR4JLxl9bu7SZmtK+MBrFGlHCDvgz4UQWj/c4HqlK+yM1PNPatT/+6FN82pCeVOpktVLHnvDM7WNrR4K4Rdd+9jHitVV7lmiwKz3AF10JSXh4IjvICH6D/Ou455rZHACI6VtEFzFm/Oih2iPlxq6thTWHFPC7iQEul6Hlpqu7tIRrMSApo3Fjz5DfHnA8S9UBnyJ9IT+QZZrAtizP9JxBtrLhijAIhJIJOfSjOEolKwLDjj3R26tlCGOy64e0mBR70qwVfcoMKkI606mDf878vO91R4OMfS/qcrVnYYIq7vQGVyCqTPiRewOkLvCEmiBSPnY18EVQgMi5sUJao8XmkGustHMqaJ8nrVc5DzW8G6SDP5fZM3y0yTGF4kH5iOtP0ldeb6QrM5ehpu3IaTZz0avjiVwj85d43nuYu52RcFzWMeP8v0kOLNXfYnMxVleLF3Bdd+9jfUqhmINTdeJE4peW+txko1Ukk5qe7Sb/MTbQkQXTNHtHYd5bUdf81FZakUoF6mYdRwisXclZIlDGf/xxnYy2LWdCxuTi7er6jDBeFfwE58dJOaBrbE5e9pattC0SE4D4XkdjFA10gRqeAlUmTdCP4X+qhlQG4widSNNs8CUnRK0lB9YD2iGX3q/nPq/gWUFLwDWd3a5SaR2aH9hfjl/GwbLf43gxr7BqfGA/N+gLCBbkCF6CK617VZcAZAPheR2MUDXSBGpvg8VhvmY1VKecp3o2U9NuuVW/TE6onbn0EPvqYRHYxd7BKJPx6CHaAljzxFGOaSloBEn0ZH3I0fRW+3jnoFZDqLACXNmAdbkeandH19NqJE9qvlGahGubz0zZ1ab4g4ku6AAAAAAABubSCrnDmg9N/BKbSvwJ5ll0XM3MVARnXSP6Wk0bFqUNKe3WcPv5f6FZwXS4T39Hf+GMtgdkuuo5cqk8iBTGrerKYd0kj6HnEHvNrCGHCJKqtDUuHCVTR3Vg9kRwD78nGIs6TvP939otk/rR51kIR3dgsr/vffwshuinWNUBaOvtjZxoTGtZaSQl6U89hzw29ooM+MzM/vIc1+KN/1kCEBLSGcCCABzKaSYB7mnpDP32P97WZYvWety7Kbrnu1CMvnDlj5zX8XBvJMFpLThDU+ZoKOCQhY5n8I/5kmw8iKHb67L6eZsCAvjdQejqQXfFh4nsvo4f3+NK1+mX4nwGMVWvNDgAGEOu+FfQOScg8y+R9HWf69+vE6hFO2n6yooe03JlP9rZY/pCPMAojChgChaqJJLZ9yKTJ7ZBZAkcC+jIgGV87ifmcbIuHfudrtFu4IwJEyMbYjhWZLesS0bAimEqT3RSO0lIdFkCh8I5YSWzDsSUnYEZPEimmlo3FRZ9MWvUxHUG8ZnVA825XYWKj9VFZarOsN7lxS44nyAdreYRzphAcj0QKxskG+ErAW9iFFob7YsVO1ChmoG+Wl0a6EJBNNEsYjUe/ufZ1HWu9J2TSqZnmi8XERGOcn5HHTeAaakUR88+K3FAWO9Hu5yYLtC1h+MoZl89tMIvP89XUVberUn4nc10jotsjNbvkxrQm+Jv+YF/C3Q3a2jQv7DooAdj9LcEOrNw9evsK9dN6XJI+PFiCpycHHz42l/86kJ8VZi5WHGwTJYMNbbLKX2s7dt5mDDk2f+ljNxmoQb4Yl1gxgzAtLE6VmAcvjAL3mKFnDvTNBrK2efj6jOeY8YTB4/AqI/82M7QOuAYc84m01rOQI9hFvrAXDpDIcrvAIKq/FujrEc678pOZX/JOJWcpiWGo7T6jdONWRtVFACtMsw9esEXO+pF3OaSplRtcWtV9wnyEFQAnRweyPE5xTqE/ZcTePo4V1sXAVx3K9KPzvqZN2kvFMWBNtM7DsdfG+lg7dgicGxcfnMnK9JIIy+CYyPts2Tlusm7AgJJm3kj2sUQAYgfKW8zWYWB386qOT23pJn2hLRFa6kKvLYmeRuR2ktWRG7/a06PlOjmVu3fhNmHpZgQgYXgOLzHSeA9Gwmp5bLvv2ZhDwkkQHln2WQEaZpwoskObipE8au0hLG4rorCqo5tUj9K6IDFPWLuwfHP2Ir/YL9o2rvxEjngq4WUUmvJFePkyVrwj94bK6VJXipRpryPQnVTOIe44xpyYAYssYa8cD1E8tgigNn9F3N0jVy5HkCqjB4kCTIYqI1mP8KMju+IFjfZmIhVmiIQ9gcO35KYSMXIuvN4A8KLCknlgQC81go+PGYxPI2ssm1DiA8D4uWjeu5GJ6cSQrloTt/X2+gsMti/dI2MBCiXGzCw6FBO+6r28PRLvkDMAAAtBAAAAAAAAA==" alt="17" tabindex="0" loading="lazy"><figcaption>17</figcaption></figure><p>ä¸»é…ç½®æ–‡ä»¶å°±å¯ä»¥å†™</p><figure><img src="data:image/webp;base64,UklGRjYEAABXRUJQVlA4ICoEAADQGgCdASoJAUIAPm02l0ikIqIhJDdI4IANiWdu3V6dZhVHYEbc9QH5s3hvmA6AG8Af0XfHf85X/H2v8erHffZlt8DOKP/ReEX5J6gHmSel/pi+od/sKfa/P825Fte7AfjbpFmX/7e9hddyz9XXxNDmPdAYrlvotCF/M+RNJA616MVdEOmVZLrYSF2PsCAaHX4JI4JAdO/D6HwbAhkIfPDgR1q8CLyfsYH9tvaUxZ3t6QCafO/oz3I1PEhpUyDLPk8B6DIX/spXDfeXJPZFktWT9F3VGD0569HsN3rG71hoAP70ImpxvmWStwekpQzyFC1t8T+zrG7XpoA9kawA3niv0SLZeYoMVEI8b5EX2EiHEHP4gvcWL712YYqHK/OHQyeB0Ub0KGJ///faE/3InD27WPvQVPoSMklUrZKGc8lu+CvZcNLExX4IMK2edWTOE6Iq7PBvC4/8f673J5o96zI8XqzibD9Hn2/ZYgF4zpQmNO/gm5moZNpwARd7lqPzECZWZyJNqexG+4X1uBrA0iZKVU/ABfVgABBy4oXTKQRg9VJ8OSkYtBi3OjyNbApo/q6j7QDkarmv3YAAQEBpANScnefjKaXrh61PUvlHkfzTBB7J8w65YAADOHZ0IijVDyYXidOJD3WzZC2w+H2bfvYcWY/WDhu3r8baIeE53aOBsLqQSwmIrzOXRk7lX9AKIuGwnkXRUH8VAoX5xX12XiXSVsGpWpjdM+8RXHPcUrbXRczJbXMA38JoJGsGwEcOQNy+KfTtsNuj0sNITuKjHZVMQCr8jbqqM9I3CpVCxT0YQIYwFD8ztJaLy9Juqu10myiHQbDwITt0fauAF8ZL0o6jGkJkgwPz9I2kgimbKyM8W3aPaBQFUsDp4boSSthk2TcQbmG2IQ57hRyAqrLVIYfsIDzS7LFwbXIDeigDL+hIfEKTN31MuPuWloR3kD0Y/TqtTiESrb7eFvW9/rnOCFwYH+uGIeSvIh1aoPlG1wIaywB3twNjbo7J0QdjOo2O78cmqlorqVmM2SCFmuI1UEdxS+fJOugYaANVvPau3RsjlX+4t0ar7NOV11VXG/LWElpK0fnJYbD3WiFB8y/7vyu6c7smuBDWV/g2fklXVIZD75skENJo4cgUeL5WBNU9D69ilmtP26y/WQoHfbv0KSkZ8pcW5GpkEInU4Q4wymHutELKhth1XwikjB4gNoa+raiH8NqtsR/pG0YwF9RVSIWjjpT7MQk7PEFPVD8YqU7dIAVfkK4ymTRDD6rPR9apHK4y1/h73V6ECGL5iWJRyGt+XCZac/1HVodj5YJbzSkQtRjJ4AEEgKnSLU6DDxCq+UIIgTsEdoLulKYVKKalU+dAJXFXlKput4Ki9wtCURO/eb+xGYIx1AA1Lx7iQ9dFIAAAAAPcd0AAAAAA" alt="18" tabindex="0" loading="lazy"><figcaption>18</figcaption></figure><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“" aria-hidden="true">#</a> å°ç»“</h3><p>SpringBoot å¯åŠ¨çš„æ—¶å€™åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½ @EnableAutoConfiguration ã€‚</p><p>@EnableAutoConfiguration ç»™å®¹å™¨å¯¼å…¥META-INF/spring.factories é‡Œå®šä¹‰çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p><p>ç­›é€‰æœ‰æ•ˆçš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p><p>æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ç»“åˆå¯¹åº”çš„ xxxProperties.java è¯»å–é…ç½®æ–‡ä»¶è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½ ã€‚</p><ul><li><code>xxxAutoConfiguration</code>ï¼šè‡ªåŠ¨é…ç½®ç±»ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ã€‚</li><li><code>xxxProperties</code>ï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ã€‚</li></ul><h2 id="conditionalç›¸å…³æ³¨è§£å’Œdebug" tabindex="-1"><a class="header-anchor" href="#conditionalç›¸å…³æ³¨è§£å’Œdebug" aria-hidden="true">#</a> @Conditionalç›¸å…³æ³¨è§£å’ŒDebug</h2><p>@ConditionalOnBean:ä»…ä»…åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨æŸä¸ªå¯¹è±¡æ—¶ï¼Œæ‰ä¼šå®ä¾‹åŒ–ä¸€ä¸ªBean @ConditionalOnClass:æŸä¸ªclassä½äºç±»è·¯å¾„ä¸Šæ‰ä¼šå®ä¾‹åŒ–ä¸€ä¸ªBean @ConditionalOnExpression:å½“è¡¨è¾¾å¼ä¸ºtrueçš„æ—¶å€™ï¼Œæ‰ä¼šå®ä¾‹åŒ–ä¸€ä¸ªBean @ConditionalOnMissingBean:ä»…ä»…åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­ä¸å­˜åœ¨æŸä¸ªå¯¹è±¡æ—¶ï¼Œæ‰ä¼šå®ä¾‹åŒ–ä¸€ä¸ªBean @ConditionalOnMissingClass:æŸä¸ªclassä¸ä½äºç±»è·¯å¾„ä¸Šæ‰ä¼šå®ä¾‹åŒ–ä¸€ä¸ªBean @ConditionalOnNotWebApplication:ä¸æ˜¯webåº”ç”¨</p><p>å¼€å¯SpringBoot debugæŸ¥çœ‹ä½¿ç”¨äº†å“ªäº›é…ç½®ç±»</p><figure><img src="/Computer-Science-Learn-Notes/assets/19-8c6b2f81.webp" alt="19" tabindex="0" loading="lazy"><figcaption>19</figcaption></figure><p>ä»¥åŠæ²¡æœ‰å¯åŠ¨çš„</p><figure><img src="/Computer-Science-Learn-Notes/assets/20-c68c5148.webp" alt="20" tabindex="0" loading="lazy"><figcaption>20</figcaption></figure><h2 id="æ—¥å¿—æ¡†æ¶sl4j" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—æ¡†æ¶sl4j" aria-hidden="true">#</a> æ—¥å¿—æ¡†æ¶SL4J</h2><p>SL4Jçš„å‡ ç§å®ç°æ–¹å¼ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/21-edb72af3.webp" alt="21" tabindex="0" loading="lazy"><figcaption>21</figcaption></figure><h3 id="å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºsl4j" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºsl4j" aria-hidden="true">#</a> å…¶ä»–æ—¥å¿—æ¡†æ¶è½¬æ¢ä¸ºSL4J</h3><p><strong>SpringBootï¼ˆsl4j+lockbcakï¼‰</strong></p><p>Springï¼ˆcommons-loggingï¼‰</p><p>Hibernateï¼ˆjboss-loggingï¼‰</p><p>è½¬æ¢æ–¹å¼å¦‚ä¸‹ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/22-05699983.webp" alt="22" tabindex="0" loading="lazy"><figcaption>22</figcaption></figure><h3 id="springbootå’Œæ—¥å¿—å…³ç³»" tabindex="-1"><a class="header-anchor" href="#springbootå’Œæ—¥å¿—å…³ç³»" aria-hidden="true">#</a> SpringBootå’Œæ—¥å¿—å…³ç³»</h3><figure><img src="/Computer-Science-Learn-Notes/assets/23-6bafc20f.webp" alt="23" tabindex="0" loading="lazy"><figcaption>23</figcaption></figure><p>SpringBootä½¿ç”¨spring-boot-starter-loggingæ¥è®°å½•æ—¥å¿—</p><figure><img src="/Computer-Science-Learn-Notes/assets/24-46398f1d.webp" alt="24" tabindex="0" loading="lazy"><figcaption>24</figcaption></figure><h3 id="æ—¥å¿—çš„é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—çš„é…ç½®" aria-hidden="true">#</a> æ—¥å¿—çš„é…ç½®</h3><p>è·¯å¾„çš„é…ç½®ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># ä¸æŒ‡å®šè·¯å¾„å½“å‰é¡¹ç›®ä¸‹ç”Ÿæˆspringboot.logæ—¥å¿—</span>
<span class="token comment">#logging.file.name=springboot.log</span>
<span class="token comment"># åœ¨å½“å‰ç£ç›˜æ ¹è·¯å¾„ä¸‹åˆ›å»ºspringæ–‡ä»¶å¤¹å’Œé‡Œé¢çš„logæ–‡ä»¶ï¼Œä½¿ç”¨spring.logä½œä¸ºé»˜è®¤æ–‡ä»¶</span>
<span class="token key attr-name">logging.file.path</span><span class="token punctuation">=</span><span class="token value attr-value">/springLog/log</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/25-042c69db.webp" alt="25" tabindex="0" loading="lazy"><figcaption>25</figcaption></figure><p>æ—¥å¿—è¾“å‡ºæ ¼å¼æ§åˆ¶ï¼š</p><ul><li>æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š</li><li>%dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ</li><li>%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ</li><li>%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦</li><li>%logger{50} è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚</li><li>%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ</li><li>%næ˜¯æ¢è¡Œç¬¦</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># åœ¨æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—æ ¼å¼
logging.pattern.console=%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n
# æŒ‡å®šæ–‡ä»¶ä¸­æ—¥å¿—çš„è¾“å‡ºæ ¼å¼
logging.pattern.file=%d{yyyy-MM-dd} === [%thread] === %-5level === %logger{50} ==== %msg%n
è¾“å‡ºç»“æœï¼š
2020-07-18 === [main] === INFO  === cn.zhiyucs.Springboot04ApplicationTests ==== Starting Springboot04ApplicationTests on DESKTOP-J83JFON with PID 3092 (started by 54271 in C:\Users\54271\Documents\SpringBoot_Twice\springboot_04)
2020-07-18 === [main] === DEBUG === cn.zhiyucs.Springboot04ApplicationTests ==== Running with Spring Boot v2.3.1.RELEASE, Spring v5.2.7.RELEASE
2020-07-18 === [main] === INFO  === cn.zhiyucs.Springboot04ApplicationTests ==== No active profile set, falling back to default profiles: default
2020-07-18 === [main] === INFO  === o.s.scheduling.concurrent.ThreadPoolTaskExecutor ==== Initializing ExecutorService &#39;applicationTaskExecutor&#39;
2020-07-18 === [main] === INFO  === cn.zhiyucs.Springboot04ApplicationTests ==== Started Springboot04ApplicationTests in 1.893 seconds (JVM running for 2.966)
2020-07-18 === [main] === TRACE === cn.zhiyucs.Springboot04ApplicationTests ==== è¿™æ˜¯è·Ÿè¸ªæ—¥å¿—
2020-07-18 === [main] === DEBUG === cn.zhiyucs.Springboot04ApplicationTests ==== è¿™æ˜¯è°ƒè¯•æ—¥å¿—
2020-07-18 === [main] === INFO  === cn.zhiyucs.Springboot04ApplicationTests ==== è¿™æ˜¯ä¿¡æ¯æ—¥å¿—
2020-07-18 === [main] === WARN  === cn.zhiyucs.Springboot04ApplicationTests ==== è¿™æ˜¯è­¦å‘Šæ—¥å¿—
2020-07-18 === [main] === ERROR === cn.zhiyucs.Springboot04ApplicationTests ==== è¿™æ˜¯é”™è¯¯æ—¥å¿—
2020-07-18 === [SpringContextShutdownHook] === INFO  === o.s.scheduling.concurrent.ThreadPoolTaskExecutor ==== Shutting down ExecutorService &#39;applicationTaskExecutor&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æŒ‡å®šæ—¥å¿—æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#æŒ‡å®šæ—¥å¿—æ¡†æ¶" aria-hidden="true">#</a> æŒ‡å®šæ—¥å¿—æ¡†æ¶</h3><p>åœ¨ç±»è·¯å¾„ä¸‹ç›´æ¥æŒ‡å®šï¼šlogback.xml logback-spring.xml log4j2-spring.xml log4j2.xml</p><figure><img src="data:image/webp;base64,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" alt="26" tabindex="0" loading="lazy"><figcaption>26</figcaption></figure><p>logback.xmlï¼šç›´æ¥è¢«æ—¥å¿—æ¡†æ¶è¯†åˆ«</p><p>logback-spring.xmlï¼šå¯ä»¥ä½¿ç”¨SpringBootæ—¥å¿—çš„Profileçš„é«˜çº§åŠŸèƒ½</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;
    &lt;springProfile name=&quot;dev&quot;&gt;
        &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} ----&gt; [%thread] ---&gt; %-5level %logger{50} - %msg%n&lt;/pattern&gt;
    &lt;/springProfile&gt;
    &lt;springProfile name=&quot;!dev&quot;&gt;
        &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} ==== [%thread] ==== %-5level %logger{50} - %msg%n&lt;/pattern&gt;
    &lt;/springProfile&gt;
&lt;/layout&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ‡æ¢æ—¥å¿—æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#åˆ‡æ¢æ—¥å¿—æ¡†æ¶" aria-hidden="true">#</a> åˆ‡æ¢æ—¥å¿—æ¡†æ¶</h3><p>ç›´æ¥åœ¨Mavençš„excludeå³å¯</p><h2 id="é™æ€èµ„æºæ˜ å°„è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#é™æ€èµ„æºæ˜ å°„è§„åˆ™" aria-hidden="true">#</a> é™æ€èµ„æºæ˜ å°„è§„åˆ™</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">isAddMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Default resource handling disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Duration</span> cachePeriod <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">CacheControl</span> cacheControl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCachecontrol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHttpCacheControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span><span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">)</span>
                                             <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/META-INF/resources/webjars/&quot;</span><span class="token punctuation">)</span>
                                             <span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> staticPathPattern <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span>
                                             <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token function">getResourceLocations</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                                             <span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>WebJar+Mavenæ–¹å¼åŠ è½½é™æ€èµ„æº</li></ol><p><strong>registry.hasMappingForPattern(&quot;/webjars/**)</strong></p><p>å»<a href="https://www.webjars.org/" target="_blank" rel="noopener noreferrer">WebJars<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä»¥jarsçš„æ–¹å¼è·å–é™æ€èµ„æº å¦‚ï¼šjquery</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.webjars<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jquery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/27-0d86d9bc.webp" alt="27" tabindex="0" loading="lazy"><figcaption>27</figcaption></figure><p>è·¯å¾„æ˜¯åœ¨ï¼šorg\webjars\jquery\3.5.1\jquery-3.5.1.jar!\META-INF\resources\webjars\jquery\3.5.1\jquery.js ç½‘é¡µè®¿é—®è·¯å¾„ï¼š<a href="http://localhost:8080/webjars/jquery/3.5.1/jquery.js" target="_blank" rel="noopener noreferrer">http://localhost:8080/webjars/jquery/3.5.1/jquery.js<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="/Computer-Science-Learn-Notes/assets/28-c64ca718.webp" alt="28" tabindex="0" loading="lazy"><figcaption>28</figcaption></figure><ol start="2"><li>å¯ä»¥è®¾ç½®é™æ€èµ„æºçš„æœ‰å…³å‚æ•°ï¼šï¼ˆResourceProperties.classï¼‰</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.resources&quot;</span><span class="token punctuation">,</span> ignoreUnknownFields <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">CLASSPATH_RESOURCE_LOCATIONS</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;classpath:/META-INF/resources/&quot;</span><span class="token punctuation">,</span>
                                                                  <span class="token string">&quot;classpath:/resources/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:/static/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:/public/&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æº</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&quot;/&quot;,
&quot;classpath:/META-INF/resources/&quot;,
&quot;classpath:/resources/&quot;, 
&quot;classpath:/static/&quot;, 
&quot;classpath:/public/&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å¦‚æ·»åŠ ä¸€ä¸ªèµ„æºåŒ…ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/29-c3fd5108.webp" alt="29" tabindex="0" loading="lazy"><figcaption>29</figcaption></figure><p><strong>ç½‘é¡µè®¿é—®è·¯å¾„ï¼š<a href="http://localhost:8080/asserts/js/Chart.min.js" target="_blank" rel="noopener noreferrer">http://localhost:8080/asserts/js/Chart.min.js<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong></p><ol start="4"><li>æ¬¢è¿é¡µçš„åŠ è½½æ–¹å¼ï¼šä¹Ÿåœ¨WebMvcAutoConfigurationè¿™ä¸ªç±»ä¸­</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">WelcomePageHandlerMapping</span> <span class="token function">welcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span>
                                                           <span class="token class-name">FormattingConversionService</span> mvcConversionService<span class="token punctuation">,</span> <span class="token class-name">ResourceUrlProvider</span> mvcResourceUrlProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">WelcomePageHandlerMapping</span> welcomePageHandlerMapping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">TemplateAvailabilityProviders</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">,</span> applicationContext<span class="token punctuation">,</span> <span class="token function">getWelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setInterceptors</span><span class="token punctuation">(</span><span class="token function">getInterceptors</span><span class="token punctuation">(</span>mvcConversionService<span class="token punctuation">,</span> mvcResourceUrlProvider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setCorsConfigurations</span><span class="token punctuation">(</span><span class="token function">getCorsConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> welcomePageHandlerMapping<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡æŸ¥çœ‹getWelcomePageæ–¹æ³•å°±å¯ä»¥çœ‹å‡ºæ˜¯<strong>åŠ è½½é™æ€èµ„æºçš„index.html</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&gt;</span></span> <span class="token function">getWelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> locations <span class="token operator">=</span> <span class="token function">getResourceLocations</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>locations<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">::</span><span class="token function">getIndexHtml</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">::</span><span class="token function">isReadable</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token class-name">Resource</span> <span class="token function">getIndexHtml</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>location <span class="token operator">+</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ¨¡æ¿å¼•æ“thymeleaf" tabindex="-1"><a class="header-anchor" href="#æ¨¡æ¿å¼•æ“thymeleaf" aria-hidden="true">#</a> æ¨¡æ¿å¼•æ“Thymeleaf</h2><p>æ•´åˆSpringBoot</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Thymeleafçš„é»˜è®¤é…ç½®</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.thymeleaf&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThymeleafProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Charset</span> <span class="token constant">DEFAULT_ENCODING</span> <span class="token operator">=</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DEFAULT_PREFIX</span> <span class="token operator">=</span> <span class="token string">&quot;classpath:/templates/&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DEFAULT_SUFFIX</span> <span class="token operator">=</span> <span class="token string">&quot;.html&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**æ³¨ï¼š**Controllerä¸­çš„@RequestMapping(&quot;/su&quot;)ä¸èƒ½å’Œreturn&quot;xx&quot;é‡å¤</p><figure><img src="/Computer-Science-Learn-Notes/assets/30-ff498fe6.webp" alt="30" tabindex="0" loading="lazy"><figcaption>30</figcaption></figure><h2 id="springmvcè‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#springmvcè‡ªåŠ¨é…ç½®åŸç†" aria-hidden="true">#</a> SpringMVCè‡ªåŠ¨é…ç½®åŸç†</h2><p><a href="https://www.docs4dev.com/docs/zh/spring-boot/2.1.1.RELEASE/reference/boot-features-developing-web-applications.html#developing-web-applications" target="_blank" rel="noopener noreferrer">æ–‡æ¡£å‚è€ƒï¼šSpringMVC<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="é»˜è®¤é…ç½®" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤é…ç½®" aria-hidden="true">#</a> é»˜è®¤é…ç½®</h3><p>auto-configuration åœ¨ Spring çš„é»˜è®¤å€¼ä¹‹ä¸Šæ·»åŠ ä»¥ä¸‹ featuresï¼š</p><ul><li><p>åŒ…å«<code>ContentNegotiatingViewResolver</code>å’Œ<code>BeanNameViewResolver</code> beansï¼ˆè§†å›¾è§£æå™¨ï¼Œæ ¹æ®è¿”å›å€¼è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰ï¼Œç„¶åå¯ä»¥è¿›è¡Œæ¸²æŸ“ï¼ˆè½¬å‘/é‡å®šå‘ï¼‰ï¼‰ã€‚</p></li><li><p>æ”¯æŒæä¾›é™æ€èµ„æºï¼ŒåŒ…æ‹¬å¯¹ WebJars çš„æ”¯æŒ</p></li><li><p>è‡ªåŠ¨æ³¨å†Œ<code>Converter</code>ï¼Œ<code>GenericConverter</code>å’Œ<code>Formatter</code> beans</p></li><li><ul><li>è½¬æ¢å™¨ HttpMessageConverters</li><li>æ ¼å¼åŒ–å™¨</li></ul></li><li><p>æ”¯æŒ<code>HttpMessageConverters è½¬æ¢ HTTP è¯·æ±‚å’Œå“åº”</code></p></li><li><p>è‡ªåŠ¨æ³¨å†Œ<code>MessageCodesResolver å®šä¹‰é”™è¯¯ä»£ç çš„ç”Ÿæˆè§„åˆ™</code></p></li><li><p>é™æ€<code>index.html</code>æ”¯æŒã€‚</p></li><li><p>è‡ªå®šä¹‰<code>Favicon</code>æ”¯æŒ</p></li></ul><h3 id="contentnegotiatingviewresolver" tabindex="-1"><a class="header-anchor" href="#contentnegotiatingviewresolver" aria-hidden="true">#</a> ContentNegotiatingViewResolver</h3><p>é¦–å…ˆæ˜¯<strong>ContentNegotiatingViewResolver</strong>ï¼šç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span><span class="token class-name">ViewResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;viewResolver&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token class-name">ContentNegotiatingViewResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ContentNegotiatingViewResolver</span> <span class="token function">viewResolver</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ContentNegotiatingViewResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentNegotiatingViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolver<span class="token punctuation">.</span><span class="token function">setContentNegotiationManager</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">ContentNegotiationManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ContentNegotiatingViewResolver uses all the other view resolvers to locate</span>
    <span class="token comment">// a view so it should have a high precedence</span>
    resolver<span class="token punctuation">.</span><span class="token function">setOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span><span class="token constant">HIGHEST_PRECEDENCE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> resolver<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ContentNegotiatingViewResolverä¸­é€šè¿‡resolveViewNameè§£æè§†å›¾</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">resolveViewName</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">RequestAttributes</span> attrs <span class="token operator">=</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span>attrs <span class="token keyword">instanceof</span> <span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">,</span> <span class="token string">&quot;No current ServletRequestAttributes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MediaType</span><span class="token punctuation">&gt;</span></span> requestedMediaTypes <span class="token operator">=</span> <span class="token function">getMediaTypes</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">)</span> attrs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>requestedMediaTypes <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">&gt;</span></span> candidateViews <span class="token operator">=</span> <span class="token function">getCandidateViews</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">,</span> requestedMediaTypes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">View</span> bestView <span class="token operator">=</span> <span class="token function">getBestView</span><span class="token punctuation">(</span>candidateViews<span class="token punctuation">,</span> requestedMediaTypes<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bestView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> bestView<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡getCandidateViewsè¿›è¡Œéå†æ¯ä¸ªè§£æ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCandidateViews</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MediaType</span><span class="token punctuation">&gt;</span></span> requestedMediaTypes<span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">&gt;</span></span> candidateViews <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>contentNegotiationManager <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;No ContentNegotiationManager set&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ViewResolver</span> viewResolver <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">View</span> view <span class="token operator">=</span> viewResolver<span class="token punctuation">.</span><span class="token function">resolveViewName</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                candidateViews<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MediaType</span> requestedMediaType <span class="token operator">:</span> requestedMediaTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> extensions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contentNegotiationManager<span class="token punctuation">.</span><span class="token function">resolveFileExtensions</span><span class="token punctuation">(</span>requestedMediaType<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> extension <span class="token operator">:</span> extensions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">String</span> viewNameWithExtension <span class="token operator">=</span> viewName <span class="token operator">+</span> <span class="token char">&#39;.&#39;</span> <span class="token operator">+</span> extension<span class="token punctuation">;</span>
                    view <span class="token operator">=</span> viewResolver<span class="token punctuation">.</span><span class="token function">resolveViewName</span><span class="token punctuation">(</span>viewNameWithExtension<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        candidateViews<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åç»„åˆèµ·æ¥<strong>ContentNegotiatingViewResolver</strong>é€šè¿‡initServletContextçš„beansOfTypeIncludingAncestors</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initServletContext</span><span class="token punctuation">(</span><span class="token class-name">ServletContext</span> servletContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewResolver</span><span class="token punctuation">&gt;</span></span> matchingBeans <span class="token operator">=</span>
        <span class="token class-name">BeanFactoryUtils</span><span class="token punctuation">.</span><span class="token function">beansOfTypeIncludingAncestors</span><span class="token punctuation">(</span><span class="token function">obtainApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ViewResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•å¹¶è°ƒè¯•ï¼šåœ¨ä¸»ç±»åˆ›å»ºä¸€ä¸ªè§†å›¾è§£æå™¨è¿›è¡Œæµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootCrudApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootCrudApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ViewResolver</span> <span class="token function">myViewResovler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyViewResolver</span> <span class="token keyword">implements</span> <span class="token class-name">ViewResolver</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">resolveViewName</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨doDispatchè¿›è¡Œè°ƒè¯•ï¼šå³å¯çœ‹è§</p><figure><img src="/Computer-Science-Learn-Notes/assets/31-b0640024.webp" alt="31" tabindex="0" loading="lazy"><figcaption>31</figcaption></figure><h3 id="httpmessageconverters" tabindex="-1"><a class="header-anchor" href="#httpmessageconverters" aria-hidden="true">#</a> HttpMessageConverters</h3><p>Spring MVC ä½¿ç”¨<code>HttpMessageConverter</code>æ¥å£è½¬æ¢ HTTP è¯·æ±‚å’Œå“åº”ã€‚</p><p>è¿™ä¸ªç»„ä»¶æ˜¯ä»å®¹å™¨ä¸­ç¡®å®šçš„ï¼ˆWebMvcAutoConfiguration.classï¼‰ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>public WebMvcAutoConfigurationAdapter(ResourceProperties resourceProperties, WebMvcProperties mvcProperties,
                                      ListableBeanFactory beanFactory, ObjectProvider&lt;HttpMessageConverters&gt; messageConvertersProvider,
                                      ObjectProvider&lt;ResourceHandlerRegistrationCustomizer&gt; resourceHandlerRegistrationCustomizerProvider,
                                      ObjectProvider&lt;DispatcherServletPath&gt; dispatcherServletPath) {
    this.resourceProperties = resourceProperties;
    this.mvcProperties = mvcProperties;
    this.beanFactory = beanFactory;
    this.messageConvertersProvider = messageConvertersProvider;
    this.resourceHandlerRegistrationCustomizer = resourceHandlerRegistrationCustomizerProvider.getIfAvailable();
    this.dispatcherServletPath = dispatcherServletPath;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»æ„é€ å‡½æ•°å°±å¯ä»¥çœ‹å‡ºè¿™ä¸ªç±»æ˜¯è·å–äº†æ‰€æœ‰çš„HttpMessageConverter</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>public HttpMessageConverters(HttpMessageConverter&lt;?&gt;... additionalConverters) {
    this(Arrays.asList(additionalConverters));
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯çŸ¥åªè¦è‡ªå®šä¹‰Converterå°±å¯ä»¥åƒä¸Šé¢è§†å›¾è§£æå™¨ä¸€æ ·æ”¾å®¹å™¨å³å¯</p><h3 id="messagecodesresolver" tabindex="-1"><a class="header-anchor" href="#messagecodesresolver" aria-hidden="true">#</a> MessageCodesResolver</h3><p>è¿™ä¸ªæ˜¯ç”¨äºå®šä¹‰é”™è¯¯ä»£ç çš„ç”Ÿæˆè§„åˆ™çš„ï¼Œå¦‚ï¼ˆWebMvcAutoConfiguration.classï¼‰ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">MessageCodesResolver</span> <span class="token function">getMessageCodesResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getMessageCodesResolverFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DefaultMessageCodesResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultMessageCodesResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resolver<span class="token punctuation">.</span><span class="token function">setMessageCodeFormatter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getMessageCodesResolverFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> resolver<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡æŸ¥çœ‹getMessageCodesResolverFormatï¼ˆï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * Formatting strategy for message codes. For instance, `PREFIX_ERROR_CODE`.
     */</span>
<span class="token keyword">private</span> <span class="token class-name">DefaultMessageCodesResolver<span class="token punctuation">.</span>Format</span> messageCodesResolverFormat<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è§‚å¯Ÿæ³¨é‡Šå¯ä»¥çœ‹åˆ°é”™è¯¯ä»£ç çš„å®šä¹‰ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Format</span> <span class="token keyword">implements</span> <span class="token class-name">MessageCodeFormatter</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
         * Prefix the error code at the beginning of the generated message code. e.g.:
         * <span class="token punctuation">{</span><span class="token keyword">@code</span> <span class="token code-section"><span class="token code language-java">errorCode <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> object name <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> field</span></span><span class="token punctuation">}</span>
         */</span>
    <span class="token constant">PREFIX_ERROR_CODE</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">String</span> errorCode<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">String</span> objectName<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">String</span> field<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">toDelimitedString</span><span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span> objectName<span class="token punctuation">,</span> field<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
         * Postfix the error code at the end of the generated message code. e.g.:
         * <span class="token punctuation">{</span><span class="token keyword">@code</span> <span class="token code-section"><span class="token code language-java">object name <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> field <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> errorCode</span></span><span class="token punctuation">}</span>
         */</span>
    <span class="token constant">POSTFIX_ERROR_CODE</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">String</span> errorCode<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">String</span> objectName<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">String</span> field<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">toDelimitedString</span><span class="token punctuation">(</span>objectName<span class="token punctuation">,</span> field<span class="token punctuation">,</span> errorCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="springbootåœ¨springmvcçš„é…ç½®æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#springbootåœ¨springmvcçš„é…ç½®æ¨¡å¼" aria-hidden="true">#</a> SpringBootåœ¨SpringMVCçš„é…ç½®æ¨¡å¼</h3><p>ä»¥HiddenHttpMethodFilterä¸ºä¾‹ï¼šSpringåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨æ˜¯å¦ä¹ˆæœ‰è‡ªå·±é…ç½®çš„ï¼ˆ@Bean @Componentï¼‰å¦‚æœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼ˆå¦‚hiddenHttpMethodFilterï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ‰è‡ªåŠ¨é…ç½®ï¼Œå¦‚æœå¯ä»¥æœ‰å¤šä¸ªï¼ˆViewResolverï¼‰å°†ç”¨æˆ·é…ç½®å’Œè‡ªå·±é»˜è®¤ç»„åˆä¸€èµ·</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.mvc.hiddenmethod.filter&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¥ç®¡springbootçš„springmvc" tabindex="-1"><a class="header-anchor" href="#æ¥ç®¡springbootçš„springmvc" aria-hidden="true">#</a> æ¥ç®¡SpringBootçš„SpringMVC</h3><p>ä½¿ç”¨WebMvcConfigurerçš„æ¥å£å¯ä»¥æ‰©å±•SpringMVC</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/32-dc5055c8.webp" alt="32" tabindex="0" loading="lazy"><figcaption>32</figcaption></figure><p>æ¯”å¦‚ä½¿ç”¨SpringMVCçš„Controllerï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span><span class="token class-name">ViewControllerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ†æè¿™ä¸ªWebMvcAutoConfigurationAdapterï¼ˆWebMvcAutoConfiguration.classï¼‰,æŸ¥çœ‹è¿™ä¸ªImport(EnableWebMvcConfiguration.class)</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">EnableWebMvcConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">WebMvcProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfigurationAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EnableWebMvcConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">DelegatingWebMvcConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">ResourceLoaderAware</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®ƒçš„çˆ¶ç±»DelegatingWebMvcConfigurationä¸­ï¼ŒsetConfigurersé€šè¿‡addWebMvcConfigurersä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„WebMvcConfigure</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setConfigurers</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">&gt;</span></span> configurers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>configurers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addWebMvcConfigurers</span><span class="token punctuation">(</span>configurers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶ï¼Œä¸‹é¢ä¹Ÿæœ‰å¾ˆå¤šæ–¹æ³•ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/33-e94f4e17.webp" alt="33" tabindex="0" loading="lazy"><figcaption>33</figcaption></figure><p>ä»¥addViewControllersä¸ºä¾‹:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span><span class="token class-name">ViewControllerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurer</span> delegate <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegates<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        delegate<span class="token punctuation">.</span><span class="token function">addViewControllers</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å°ç»“-1" tabindex="-1"><a class="header-anchor" href="#å°ç»“-1" aria-hidden="true">#</a> å°ç»“ï¼š</h3><ol><li><p>å®ç°äº†WebMvcConfigureræ¥å£ï¼ŒSpringBootå°±ä¼šå°†è¿™ä¸ªä¸€èµ·å®ç°ï¼Œå¦‚åˆšåˆšMyMvcConfig</p></li><li><p>DelegatingWebMvcConfigurationï¼ˆä¹Ÿå°±æ˜¯æ˜¯å®ç°äº†WebMvcConfigurerï¼‰ï¼ŒSpringBootä¼šæ‰«ææ•´ä¸ªèƒ½ä½¿ç”¨çš„Configureråˆ°SpringMVCï¼Œç„¶åå°±èƒ½ä½¿ç”¨SpringMVCçš„åŠŸèƒ½å•¦ï¼ˆsetConfigurers -- addWebMvcConfigurersï¼‰</p></li></ol><p>ã€ä¸æ¨èã€‘<em>å…¨é¢æ¥ç®¡SpringMVC</em>ï¼šè‡ªå·±é…SpringMVC@EnableWebMvc</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span><span class="token class-name">ViewControllerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªçš„æ ¸å¿ƒå°±æ˜¯ -- DelegatingWebMvcConfiguration</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">DelegatingWebMvcConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableWebMvc</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿæ˜¯ç»„åˆè‡ªå·±å†™çš„Configurer</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setConfigurers</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">&gt;</span></span> configurers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>configurers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addWebMvcConfigurers</span><span class="token punctuation">(</span>configurers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ã€é‡ç‚¹å°ç»“ã€‘åœ¨<strong>DelegatingWebMvcConfiguration</strong>ä¸­ä¸<strong>WebMvcAutoConfiguration</strong>ï¼ˆ<strong>@ConditionalOnMissingBean</strong>ï¼‰æ¯”è¾ƒå¯çŸ¥ï¼šå®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨**@EnableWebMvc**ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»å°±ä¸ä¼šç”Ÿæ•ˆã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DelegatingWebMvcConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurationSupport</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">SERVLET</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurationSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span><span class="token constant">HIGHEST_PRECEDENCE</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DispatcherServletAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TaskExecutionAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
                     <span class="token class-name">ValidationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å›½é™…åŒ–" tabindex="-1"><a class="header-anchor" href="#å›½é™…åŒ–" aria-hidden="true">#</a> å›½é™…åŒ–</h2><p>åˆ›å»ºå›½é™…åŒ–æ–‡ä»¶ ä¸­æ–‡ï¼šxxx_zh_CN.properties Englishï¼šxxx_en_US.properties</p><figure><img src="/Computer-Science-Learn-Notes/assets/34-33ca94f4.webp" alt="34" tabindex="0" loading="lazy"><figcaption>34</figcaption></figure><p>IDEAå¿«é€Ÿåˆ›å»ºå›½é™…åŒ–æ–‡ä»¶ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/35-ed58e913.webp" alt="35" tabindex="0" loading="lazy"><figcaption>35</figcaption></figure><p>å¯ä»¥åˆ‡æ¢è§†å›¾å¿«é€Ÿå¼€å‘å›½é™…åŒ–</p><figure><img src="/Computer-Science-Learn-Notes/assets/36-60749859.webp" alt="36" tabindex="0" loading="lazy"><figcaption>36</figcaption></figure><p>ç„¶åå°±å¯ä»¥å¤šä¸ªæ–‡ä»¶å¼€å‘ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/37-f9a9072a.webp" alt="37" tabindex="0" loading="lazy"><figcaption>37</figcaption></figure><p>SpringBootä½¿ç”¨MessageSourceAutoConfigurationè‡ªåŠ¨é…ç½®äº†ç®¡ç†å›½é™…åŒ–çš„ç»„ä»¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">.</span><span class="token constant">MESSAGE_SOURCE_BEAN_NAME</span><span class="token punctuation">,</span> search <span class="token operator">=</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span><span class="token constant">CURRENT</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span><span class="token constant">HIGHEST_PRECEDENCE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">ResourceBundleCondition</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageSourceAutoConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">MessageSource</span> <span class="token function">messageSource</span><span class="token punctuation">(</span><span class="token class-name">MessageSourceProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ResourceBundleMessageSource</span> messageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceBundleMessageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getBasename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è®¾ç½®å›½é™…åŒ–èµ„æºåŠå‡ºé—¨ï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç ï¼‰</span>
        messageSource<span class="token punctuation">.</span><span class="token function">setBasenames</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span>
                                   <span class="token punctuation">.</span><span class="token function">commaDelimitedListToStringArray</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">trimAllWhitespace</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getBasename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        messageSource<span class="token punctuation">.</span><span class="token function">setDefaultEncoding</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    messageSource<span class="token punctuation">.</span><span class="token function">setFallbackToSystemLocale</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">isFallbackToSystemLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Duration</span> cacheDuration <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getCacheDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cacheDuration <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        messageSource<span class="token punctuation">.</span><span class="token function">setCacheMillis</span><span class="token punctuation">(</span>cacheDuration<span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    messageSource<span class="token punctuation">.</span><span class="token function">setAlwaysUseMessageFormat</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">isAlwaysUseMessageFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageSource<span class="token punctuation">.</span><span class="token function">setUseCodeAsDefaultMessage</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">isUseCodeAsDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> messageSource<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±æ­¤å¯ä»¥é…ç½®ä¸»é…ç½®æ–‡ä»¶</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.messages.basename</span><span class="token punctuation">=</span><span class="token value attr-value">i18n/login</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨thymeleafå›½é™…åŒ–" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨thymeleafå›½é™…åŒ–" aria-hidden="true">#</a> ä½¿ç”¨thymeleafå›½é™…åŒ–</h3><figure><img src="/Computer-Science-Learn-Notes/assets/38-10dd3066.webp" alt="38" tabindex="0" loading="lazy"><figcaption>38</figcaption></figure><h3 id="springbootåŒºåŸŸä¿¡æ¯è§£æå™¨" tabindex="-1"><a class="header-anchor" href="#springbootåŒºåŸŸä¿¡æ¯è§£æå™¨" aria-hidden="true">#</a> SpringBootåŒºåŸŸä¿¡æ¯è§£æå™¨</h3><p>åœ¨WebMvcAutoConfigurationä¸­è§£æåŒºåŸŸä¿¡æ¯localeResolver</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.mvc&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;locale&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">LocaleResolver</span> <span class="token function">localeResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getLocaleResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">WebMvcProperties<span class="token punctuation">.</span>LocaleResolver</span><span class="token punctuation">.</span><span class="token constant">FIXED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FixedLocaleResolver</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">AcceptHeaderLocaleResolver</span> localeResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AcceptHeaderLocaleResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    localeResolver<span class="token punctuation">.</span><span class="token function">setDefaultLocale</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> localeResolver<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·å–åŒºåŸŸä¿¡æ¯çš„æ–¹å¼ï¼šé€šè¿‡AcceptHeaderLocaleResolverï¼Œæ ¹æ®è¯·æ±‚å¤´çš„Accept-Languageï¼šzh_CN/ en_USè·å–</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Locale</span> defaultLocale <span class="token operator">=</span> <span class="token function">getDefaultLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultLocale <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Accept-Language&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> defaultLocale<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Locale</span> requestLocale <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Locale</span><span class="token punctuation">&gt;</span></span> supportedLocales <span class="token operator">=</span> <span class="token function">getSupportedLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>supportedLocales<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> supportedLocales<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>requestLocale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> requestLocale<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Locale</span> supportedLocale <span class="token operator">=</span> <span class="token function">findSupportedLocale</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> supportedLocales<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>supportedLocale <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> supportedLocale<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>defaultLocale <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> defaultLocale <span class="token operator">:</span> requestLocale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è‡ªå®šä¹‰å›½é™…åŒ–" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å›½é™…åŒ–" aria-hidden="true">#</a> è‡ªå®šä¹‰å›½é™…åŒ–</h3><p>å‰ç«¯è®¾ç½®ï¼šthymeleafçš„(xxx)è¡¨ç¤º?xxx</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-sm<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/index(l=&#39;zh_CN&#39;)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¸­æ–‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-sm<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/index(l=&#39;en_US&#39;)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>English<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡ªå®šä¹‰åˆ›å»ºä¸€ä¸ªåˆ¤åˆ«å‰ç«¯ä¼ å…¥çš„å‚æ•°ï¼šè¦å®ç°LocaleResolveræ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLocale</span> <span class="token keyword">implements</span> <span class="token class-name">LocaleResolver</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> l <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;l&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Locale</span> locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> s <span class="token operator">=</span> l<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            locale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> locale<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è‡ªå®šä¹‰çš„MVCä¸­å®ç°è¿™ä¸ªå›½é™…åŒ–ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">LocaleResolver</span> <span class="token function">localeResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#æ‹¦æˆªå™¨" aria-hidden="true">#</a> æ‹¦æˆªå™¨</h2><p>ä»¥æ‹¦æˆªç™»å½•ä¸ºä¾‹</p><p>é¦–å…ˆæŠŠç™»å½•åæ”¾å…¥åˆ°sessionä¸­ï¼šsession.setAttribute</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/login&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span>
                    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span>
                    <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">.</span><span class="token function">contentEquals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;redirect:/main&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”¨æˆ·åå¯†ç é”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨å†Œä¸€ä¸ªæ‹¦æˆªå™¨ï¼š<strong>HandlerInterceptor</strong></p><p>å¹¶ä¸”åˆ¤æ–­ï¼Œå¦‚æœç”¨æˆ·åä¸ºç©ºå°±ä¸æ”¾è¡Œï¼Œè½¬å‘åˆ°ç™»å½•é¡µé¢ï¼Œå¹¶æ”¾å…¥æ²¡æœ‰æƒé™çš„ä¿¡æ¯ï¼Œå¦‚æœæˆåŠŸå°±æ”¾è¡Œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginHandlerInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> username <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ²¡æœ‰æƒé™è¯·å…ˆç™»å½•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨SpringMVCä¸­æ³¨å†Œè¿™ä¸ªæ‹¦æˆªå™¨ï¼Œå¹¶<strong>æ‹¦æˆªå“åº”çš„è®¿é—®åœ°å€</strong>ï¼š</p><p>è¿™é‡Œæ‹¦æˆªäº†æ‰€æœ‰çš„åœ°å€ï¼šé™¤äº†/index / /user/loginè¿™ä¸‰ä¸ªåœ°å€</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoginHandlerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">&quot;/index&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/user/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†é˜²æ­¢SpringBootæ‹¦æˆªé™æ€èµ„æºå¯ä»¥åŠ å…¥<strong>addResourceHandlers</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/static/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é”™è¯¯å¤„ç†åŸç†" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯å¤„ç†åŸç†" aria-hidden="true">#</a> é”™è¯¯å¤„ç†åŸç†</h2><p>å¦‚æœè®¿é—®äº†æ²¡æœ‰çš„è·¯å¾„ç½‘é¡µä¼šï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/39-4de874e9.webp" alt="39" tabindex="0" loading="lazy"><figcaption>39</figcaption></figure><p>å…¶ä»–å®¢æˆ·ç«¯ä¼šå‘é€jsonæ•°æ®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-07-18T17:08:27.106+00:00&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
    <span class="token string">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Not Found&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;No message available&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/aaa&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é”™è¯¯å¤„ç†çš„è‡ªåŠ¨é…ç½®ï¼šErrorMvcAutoConfiguration</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">SERVLET</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Load before the main WebMvcAutoConfiguration so that the error View is available</span>
<span class="token annotation punctuation">@AutoConfigureBefore</span><span class="token punctuation">(</span><span class="token class-name">WebMvcAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">ServerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ErrorMvcAutoConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç±»ç»™å®¹å™¨æ·»åŠ äº†ä»¥ä¸‹ç»„ä»¶ï¼š</p><ul><li>DefaultErrorAttributes</li><li>BasicErrorController</li><li>ErrorPageCustomizer</li><li>DefaultErrorViewResolver</li></ul><p>é¦–å…ˆçœ‹<strong>ErrorPageCustomizer</strong>ï¼šçœ‹registerErrorPages -- getRelativePath</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ErrorPageCustomizer</span> <span class="token keyword">implements</span> <span class="token class-name">ErrorPageRegistrar</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerErrorPages</span><span class="token punctuation">(</span><span class="token class-name">ErrorPageRegistry</span> errorPageRegistry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ErrorPage</span> errorPage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorPage</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>dispatcherServletPath<span class="token punctuation">.</span><span class="token function">getRelativePath</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        errorPageRegistry<span class="token punctuation">.</span><span class="token function">addErrorPages</span><span class="token punctuation">(</span>errorPage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªgetPathçš„è·³è½¬ä½ç½®ï¼šå¯çŸ¥ -- ç³»ç»Ÿå‡ºç°é”™è¯¯ï¼Œæ¥åˆ°errorè¯·æ±‚è¿›è¡Œå¤„ç†</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${error.path:/error}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/error&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>BasicErrorController</strong>ï¼šå¤„ç†é»˜è®¤/errorè¯·æ±‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;${server.error.path:${error.path:/error}}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BasicErrorController</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractErrorController</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼šï¼ˆè¿™é‡Œå°±å¯ä»¥è§£é‡Šå¼€å¤´çš„ç°è±¡ï¼‰ï¼Œé€šè¿‡RequestHeader - <strong>acceptåˆ¤æ–­</strong></p><p>äº§ç”ŸHTMLç±»å‹çš„æ•°æ®</p><figure><img src="/Computer-Science-Learn-Notes/assets/40-f49ff34d.webp" alt="40" tabindex="0" loading="lazy"><figcaption>40</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>produces <span class="token operator">=</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">TEXT_HTML_VALUE</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">errorHtml</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HttpStatus</span> status <span class="token operator">=</span> <span class="token function">getStatus</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model <span class="token operator">=</span> <span class="token class-name">Collections</span>
        <span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span><span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token function">getErrorAttributeOptions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">TEXT_HTML</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å»å“ªä¸ªé¡µé¢ä½œä¸ºé”™è¯¯é¡µé¢ï¼ŒåŒ…å«é¡µé¢åœ°å€å’Œé¡µé¢å†…å®¹</span>
    <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token function">resolveErrorView</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> status<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>modelAndView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> modelAndView <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>äº§ç”ŸJSONæ•°æ®</p><figure><img src="data:image/webp;base64,UklGRqYCAABXRUJQVlA4IJoCAABQEwCdASoBAh4APm02l0gkIyIhJldomIANiWkAFtPq9V1FYDLA0gWPHzps4b0x7Av6z/7Xrq+i5+xwjNCgWjnp7FnxLc/lLYOHwxwR4e7XfDtltIWAjzvtv4kBWORFw7LIjcGhZCj0qkLYZapoYjsdsrJImWYcNW69La9tFIV0FCK5yMkLja1B8VPz9hHZBSD/vA/pluav1TtnAYfSc53VVRQAAP7/XcJ9p/8zm/ggeKuqZk7CVwK3VYIgmBSKNlzSy34s/ubLBKFPscEvgYNrxJRirf+H0wOvOWcPlq9JvjPxCU64uFvT9F+mOsfH46s80+G4QPRMOveKi71dUg+7HVPL9+Ha6z8ZLIHq4w7mdEOq3WsfLDPUfNijpvDs6mmPqxtuRjBvGAftyvKn9P7Vv97iZhrhGV8B8pI/BYUn/Ld8RzJCg4XB2Cg+vZyx0p435Vl7SMNu5OgmNLJQ5fJiQZ3utxObaIpvIwH4065D67xJIslXSBedt1+7qAjF96f9vCWr6IdTh44V8k40WxidAAdT76pZL9moLGtS98tLqVC3R/45Opm93Uwrb1QpsfEBxZ+vBCCsnvP9nuku52LEOpIJg4QHWVOBMG4TV3DK+/yb6nu9t2nHByqYQbWJFL1fsP8+6q21wTn2p+sGXImXodSKwKN8u8ae2lYRXN8d/flLG82PgKGmDH9c3/S97pqIImpbuHchXaJl2g8fhPoJVXENXo4EO9+Sofnq65atLXTmxdakNn8qIH+oOAce2IB8foSSGJjs6iLnpuuDngmOdl/mw07hdc36OkIivzgJjHbBBW9s+aTjWH5yHAVkVHAg5zjOmYCjMLV122G9QDZkp2cIGbTZQAxAT/Zcl9a+UskramNbjJAAAAA=" alt="41" tabindex="0" loading="lazy"><figcaption>41</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HttpStatus</span> status <span class="token operator">=</span> <span class="token function">getStatus</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NO_CONTENT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> body <span class="token operator">=</span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token function">getErrorAttributeOptions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”é”™è¯¯é¡µé¢çš„è§£æä»£ç ï¼šerrorHtml -- resolveErrorView(request, response, status, model);</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">ModelAndView</span> <span class="token function">resolveErrorView</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span> status<span class="token punctuation">,</span>
                                        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ErrorViewResolver</span> resolver <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>errorViewResolvers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">resolveErrorView</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> status<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>modelAndView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åçœ‹DefaultErrorViewResolverï¼Œå®ƒé¦–å…ˆå£°æ˜äº†<em>SERIES_VIEWS</em>ï¼Œç”¨äºåˆ¤æ–­çŠ¶æ€ç </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Series</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token constant">SERIES_VIEWS</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Series</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> views <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EnumMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Series</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    views<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Series</span><span class="token punctuation">.</span><span class="token constant">CLIENT_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;4xx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    views<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Series</span><span class="token punctuation">.</span><span class="token constant">SERVER_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;5xx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">SERIES_VIEWS</span> <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span>views<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨é‡Šè§£é‡Šä¸¤ä¸ªæ–¹æ³•ï¼šSpringBootæ˜¯å¦‚ä½•æ‰¾é”™è¯¯é¡µé¢çš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">resolveErrorView</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span> status<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>modelAndView <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">SERIES_VIEWS</span><span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modelAndView <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">SERIES_VIEWS</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token class-name">ModelAndView</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é»˜è®¤Springbootå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªé¡µé¢ error/404</span>
    <span class="token class-name">String</span> errorViewName <span class="token operator">=</span> <span class="token string">&quot;error/&quot;</span> <span class="token operator">+</span> viewName<span class="token punctuation">;</span>
    <span class="token comment">// æ¨¡æ¿å¼•æ“å¯ä»¥è§£æè¿™ä¸ªé¡µé¢åœ°å€å°±ç”¨æ¨¡æ¿å¼•æ“è§£æ</span>
    <span class="token class-name">TemplateAvailabilityProvider</span> provider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>templateAvailabilityProviders<span class="token punctuation">.</span><span class="token function">getProvider</span><span class="token punctuation">(</span>errorViewName<span class="token punctuation">,</span>
                                                                                           <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>provider <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ¨¡æ¿å¼•æ“å¯ç”¨çš„æƒ…å†µä¸‹è¿”å›errorviewnameæŒ‡å®šçš„åœ°å€</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span>errorViewName<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ¨¡æ¿å¼•æ“ä¸å¯ç”¨æ—¶ï¼Œå°±åœ¨é™æ€èµ„æºæ–‡ä»¶ä¸‹æ‰¾errorViewNameé¡µé¢ /error/404.html</span>
    <span class="token keyword">return</span> <span class="token function">resolveResource</span><span class="token punctuation">(</span>errorViewName<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®šåˆ¶é”™è¯¯é¡µé¢å’Œjsoné”™è¯¯æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶é”™è¯¯é¡µé¢å’Œjsoné”™è¯¯æ•°æ®" aria-hidden="true">#</a> å®šåˆ¶é”™è¯¯é¡µé¢å’ŒJSONé”™è¯¯æ•°æ®</h2><p>å®šåˆ¶é”™è¯¯é¡µé¢ ç›´æ¥æŠŠæ–‡ä»¶æ”¾åˆ°erroræ–‡ä»¶å¤¹ä¸‹ï¼Œåå­—ä¸º4xxï¼Œ5xxå³å¯</p><figure><img src="/Computer-Science-Learn-Notes/assets/42-957defed.webp" alt="42" tabindex="0" loading="lazy"><figcaption>42</figcaption></figure><p>å½“å‘ç”Ÿé”™è¯¯é¡µé¢çš„æ—¶å€™å¯ä»¥è·å–é”™è¯¯é¡µé¢çš„ä¿¡æ¯ï¼ˆæœ‰æ¨¡æ¿å¼•æ“æƒ…å†µä¸‹ï¼‰ï¼š timestamp æ—¶é—´æˆ³ status çŠ¶æ€ç  error é”™è¯¯ä¿¡æ¯ exception å¼‚å¸¸å¯¹è±¡ message å¼‚å¸¸æ¶ˆæ¯ errors JSR303 æ•°æ®æ ¡éªŒçš„é”™è¯¯</p><figure><img src="/Computer-Science-Learn-Notes/assets/43-370b7c7c.webp" alt="43" tabindex="0" loading="lazy"><figcaption>43</figcaption></figure><h3 id="å®šåˆ¶ä¸€ä¸ªjsonæ•°æ®" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶ä¸€ä¸ªjsonæ•°æ®" aria-hidden="true">#</a> å®šåˆ¶ä¸€ä¸ªJSONæ•°æ®</h3><p>è¿™ä¸ªé”™è¯¯å¤„ç†å±äºControllerï¼š</p><ul><li><p><strong>@ControllerAdvice</strong> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„@Componentï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»ä¸­è¢«ä»¥ä¸‹ä¸‰ç§æ³¨è§£æ ‡è¯†çš„æ–¹æ³•ï¼š@ExceptionHandlerï¼Œ@InitBinderï¼Œ@ModelAttributeï¼Œå°†ä½œç”¨äºæ‰€æœ‰çš„@Controllerç±»çš„æ¥å£ä¸Š</p></li><li><p>@ResponseBody</p></li><li><p><strong>@ExceptionHandler</strong> (é”™è¯¯ç±».class) ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šè¦å¤„ç†çš„å¼‚å¸¸ç±»å‹</p></li></ul><p>ç¬¬ä¸€ç§å†™æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyExceptionHandler</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">UserNotException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">handlerException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user.notexist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§ï¼šæ³¨æ„ä½¿ç”¨requestå®šåˆ¶çŠ¶æ€ç setAttribute(&quot;javax.servlet.error.status_code&quot;, 500);</p><p>è®¾ç½®ä»¥åSpringBootè‡ªé€‚åº”å°±ä¼šè¿›å…¥é”™è¯¯é¡µé¢ï¼šï¼ˆresource/error/500ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">UserNotException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handlerException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¼ å…¥é”™è¯¯çŠ¶æ€ç </span>
    req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;javax.servlet.error.status_code&quot;</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user.notexist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;forward:/error&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**ã€æ¨èã€‘**ç¬¬ä¸‰ç§ï¼šå“åº”æ˜¯è‡ªé€‚åº”çš„ï¼Œé€šè¿‡ErrorAttributesæ”¹å˜éœ€è¦è¿”å›çš„å†…å®¹</p><p>é¦–å…ˆå®šåˆ¶ä¸€ä¸ªé”™è¯¯æ§åˆ¶ï¼šå®šä¹‰çŠ¶æ€ç ã€é”™è¯¯ä¿¡æ¯ç­‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyExceptionHandler</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">UserNotException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handlerException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä¼ å…¥é”™è¯¯çŠ¶æ€ç </span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;javax.servlet.error.status_code&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user.notexist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//        map.put(&quot;message&quot;, e.getMessage());</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”¨æˆ·ä¸å­˜åœ¨å•¦!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;ext&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;forward:/error&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶ååˆ›å»ºä¸€ä¸ªé”™è¯¯æ•°æ®ä¼ è¾“ä¸­é—´ï¼Œè¿™ä¸ªç±»çš„åŠŸèƒ½å°±æ˜¯æŠŠè‡ªå®šä¹‰çš„é”™è¯¯é¡µé¢çš„æ•°æ®ä¼ ç»™SpringBootï¼Œç„¶åå“åº”åˆ°è‡ªé€‚åº”é¡µé¢ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyErrorAttributes</span> <span class="token keyword">extends</span> <span class="token class-name">DefaultErrorAttributes</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span><span class="token class-name">WebRequest</span> webRequest<span class="token punctuation">,</span> <span class="token class-name">ErrorAttributeOptions</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>webRequest<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;ext&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡³äºç¬¬äºŒä¸ªå‚æ•°scopeæ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼š</p><p>0 - request</p><p>1 - session</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RequestAttributes</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Constant that indicates request scope.
     */</span>
    <span class="token keyword">int</span> <span class="token constant">SCOPE_REQUEST</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * Constant that indicates session scope.
     * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This preferably refers to a locally isolated session, if such
     * a distinction is available.
     * Else, it simply refers to the common session.
     */</span>
    <span class="token keyword">int</span> <span class="token constant">SCOPE_SESSION</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/44-8fd71e02.webp" alt="44" tabindex="0" loading="lazy"><figcaption>44</figcaption></figure><h2 id="åµŒå…¥å¼servlet" tabindex="-1"><a class="header-anchor" href="#åµŒå…¥å¼servlet" aria-hidden="true">#</a> åµŒå…¥å¼Servlet</h2><h3 id="springä¸¤ç§é…ç½®æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#springä¸¤ç§é…ç½®æ–¹å¼" aria-hidden="true">#</a> Springä¸¤ç§é…ç½®æ–¹å¼ï¼š</h3><ul><li>xxxConfigureræ‰©å±•é…ç½®</li><li>xxxCustomizerå®šåˆ¶é…ç½®</li></ul><h3 id="åµŒå…¥å¼servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®" tabindex="-1"><a class="header-anchor" href="#åµŒå…¥å¼servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®" aria-hidden="true">#</a> åµŒå…¥å¼Servletä¸¤ç§ä¿®æ”¹ç›¸å…³é…ç½®</h3><ol><li>é…ç½®æ–‡ä»¶</li></ol><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8083</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>åœ¨åµŒå…¥å¼Servletä¸­ä¿®æ”¹ï¼šåœ¨è‡ªå®šä¹‰çš„SpringMVCé…ç½®</li></ol><p>æ³¨ï¼šSpringBoot2 ä½¿ç”¨çš„æ˜¯<strong>WebServerFactoryCustomizer</strong><code>&lt;ConfigurableWebServerFactory&gt;</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">WebServerFactoryCustomizer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurableWebServerFactory</span><span class="token punctuation">&gt;</span></span> <span class="token function">webServerFactoryCustomizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebServerFactoryCustomizer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurableWebServerFactory</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//            åµŒå…¥å¼servletå®¹å™¨ç›¸å…³çš„é…ç½®</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customize</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableWebServerFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">8083</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ³¨å†Œä¸‰å¤§ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#æ³¨å†Œä¸‰å¤§ç»„ä»¶" aria-hidden="true">#</a> æ³¨å†Œä¸‰å¤§ç»„ä»¶</h3><ul><li>Filter</li><li>Servlet</li><li>Linstener</li></ul><h4 id="å®šåˆ¶servlet" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶servlet" aria-hidden="true">#</a> å®šåˆ¶Servlet</h4><hr><p>åˆ›å»ºä¸€ä¸ªServletï¼Œç»§æ‰¿<strong>HttpServlet</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;Hello MyServlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„é…ç½®ç±»ï¼ŒæŠŠè¿™ä¸ªServletåŠ å…¥åˆ°å®¹å™¨ä¸­ï¼ˆ<strong>ServletRegistrationBean</strong>ã€@Beanï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServerConfig</span> <span class="token punctuation">{</span>
<span class="token comment">//    æ³¨å†Œä¸‰å¤§ç»„ä»¶</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletRegistrationBean</span> <span class="token function">myServelet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ServletRegistrationBean</span> registrationBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;/myservlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> registrationBean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®šåˆ¶filter" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶filter" aria-hidden="true">#</a> å®šåˆ¶Filter</h4><hr><p>å…ˆåˆ›å»ºä¸€ä¸ªè‡ªå·±çš„Filterï¼Œç»§æ‰¿<strong>HttpFilter</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFilter</span> <span class="token keyword">extends</span> <span class="token class-name">HttpFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">MyFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyFilter process....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> chain<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒæ ·æ˜¯åœ¨é…ç½®ç±»å†…æ³¨å†Œï¼Œ<strong>FilterRegistrationBean</strong>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServerConfig</span> <span class="token punctuation">{</span>
<span class="token comment">//    æ³¨å†Œä¸‰å¤§ç»„ä»¶</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterRegistrationBean</span> <span class="token function">myFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FilterRegistrationBean</span> filterRegistrationBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterRegistrationBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterRegistrationBean<span class="token punctuation">.</span><span class="token function">setFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterRegistrationBean<span class="token punctuation">.</span><span class="token function">setUrlPatterns</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> filterRegistrationBean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®šåˆ¶listener" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶listener" aria-hidden="true">#</a> å®šåˆ¶Listener</h4><hr><p>æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œå®ç°æ¥å£<strong>ServletContextListener</strong>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextInitialized</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> sce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;webåº”ç”¨å¯åŠ¨!!!!!!!!!!!!!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> sce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;webé”€æ¯!!!!!!!!!!!!!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŠŠç›‘å¬å™¨æ³¨å†Œåˆ°é…ç½®ç±»ä¸­ï¼Œå¹¶æ”¾å…¥å®¹å™¨<strong>ServletListenerRegistrationBean</strong>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServerConfig</span> <span class="token punctuation">{</span>
<span class="token comment">//    æ³¨å†Œä¸‰å¤§ç»„ä»¶</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletListenerRegistrationBean</span> <span class="token function">myListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ServletListenerRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyListener</span><span class="token punctuation">&gt;</span></span> listener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletListenerRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> listener<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨å…¶ä»–çš„åµŒå…¥å¼å®¹å™¨</p><ul><li>Jettyï¼ˆé•¿è¿æ¥ï¼‰</li><li>Undertowï¼ˆä¸æ”¯æŒJSPï¼‰</li><li>Tomcatï¼ˆé»˜è®¤ï¼‰</li></ul><figure><img src="/Computer-Science-Learn-Notes/assets/45-b0bb43e7.webp" alt="45" tabindex="0" loading="lazy"><figcaption>45</figcaption></figure><p>åˆ‡æ¢å®¹å™¨çš„æ–¹å¼ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/46-1187419d.webp" alt="46" tabindex="0" loading="lazy"><figcaption>46</figcaption></figure><h2 id="æºç åˆ¨æ-åµŒå…¥å¼servletåŸç†" tabindex="-1"><a class="header-anchor" href="#æºç åˆ¨æ-åµŒå…¥å¼servletåŸç†" aria-hidden="true">#</a> æºç åˆ¨æ åµŒå…¥å¼ServletåŸç†</h2><p>WebServerFactoryCustomizeråµŒå…¥å¼Servletçš„è‡ªåŠ¨é…ç½®ç±»ï¼š<strong>ServletWebServerFactoryAutoConfiguration</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span><span class="token constant">HIGHEST_PRECEDENCE</span><span class="token punctuation">)</span>
<span class="token comment">// ä»…åœ¨ç±» ServletRequest å­˜åœ¨äº classpath ä¸Šæ—¶æ‰ç”Ÿæ•ˆ</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">// ä»…åœ¨å½“å‰åº”ç”¨æ˜¯ Servlet Web åº”ç”¨æ—¶æ‰ç”Ÿæ•ˆ</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">SERVLET</span><span class="token punctuation">)</span>
<span class="token comment">// ç¡®ä¿å‰ç¼€ä¸º server çš„é…ç½®å‚æ•°åŠ è½½åˆ° bean ServerProperties</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">// 1. å¯¼å…¥ ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar ä»¥æ³¨å†Œ</span>
<span class="token comment">// BeanPostProcessor : WebServerFactoryCustomizerBeanPostProcessor å’Œ </span>
<span class="token comment">// ErrorPageRegistrarBeanPostProcessor</span>
<span class="token comment">// 2. å¯¼å…¥ EmbeddedTomcat/EmbeddedJetty/EmbeddedUndertow è¿™ä¸‰ä¸ªå±äº</span>
<span class="token comment">// ServletWebServerFactoryConfiguration çš„åµŒå¥—é…ç½®ç±»ï¼Œè¿™ä¸‰ä¸ªé…ç½®ç±»ä¼šåˆ†åˆ«æ£€æµ‹</span>
<span class="token comment">// classpathä¸Šå­˜åœ¨çš„ç±»ï¼Œä»è€Œåˆ¤æ–­å½“å‰åº”ç”¨ä½¿ç”¨çš„æ˜¯ Tomcat/Jetty/Undertow,</span>
<span class="token comment">// ä»è€Œå†³å®šå®šä¹‰å“ªä¸€ä¸ª Servlet WebæœåŠ¡å™¨çš„å·¥å‚ bean :</span>
<span class="token comment">// TomcatServletWebServerFactory/JettyServletWebServerFactory/UndertowServletWebServerFactory</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span>BeanPostProcessorsRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedTomcat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedJetty</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedUndertow</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletWebServerFactoryAutoConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é’ˆå¯¹å½“å‰Servletå®¹å™¨æ˜¯Tomcatæ—¶å®šä¹‰è¯¥ beanï¼Œç”¨äºå®šåˆ¶åŒ– TomcatServletWebServerFactory</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token comment">// ä»…åœ¨ç±» org.apache.catalina.startup.Tomcat å­˜åœ¨äº classpath ä¸Šæ—¶æ‰ç”Ÿæ•ˆ</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;org.apache.catalina.startup.Tomcat&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">TomcatServletWebServerFactoryCustomizer</span> <span class="token function">tomcatServletWebServerFactoryCustomizer</span><span class="token punctuation">(</span>
    <span class="token class-name">ServerProperties</span> serverProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TomcatServletWebServerFactoryCustomizer</span><span class="token punctuation">(</span>serverProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ServletWebServerFactoryConfigurationæ˜¯ä¸€ä¸ªé’ˆå¯¹ServletWebServerFactoryè¿›è¡Œé…ç½®çš„é…ç½®ç±»ã€‚å®ƒé€šè¿‡æ£€æµ‹åº”ç”¨classpathå­˜åœ¨çš„ç±»ï¼Œä»è€Œåˆ¤æ–­å½“å‰åº”ç”¨è¦ä½¿ç”¨å“ªä¸ªServletå®¹å™¨:Tomcat,Jettyè¿˜æ˜¯Undertowã€‚æ£€æµ‹å‡ºæ¥ä¹‹åï¼Œå®šä¹‰ç›¸åº”çš„Servlet WebæœåŠ¡å™¨å·¥å‚ç»„ä»¶bean</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ServletWebServerFactoryConfiguration</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Tomcat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UpgradeProtocol</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">ServletWebServerFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> search <span class="token operator">=</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span><span class="token constant">CURRENT</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddedTomcat</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>   
        
        <span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Server</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Loader</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebAppContext</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">ServletWebServerFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> search <span class="token operator">=</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span><span class="token constant">CURRENT</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddedJetty</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
        
        <span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Undertow</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">SslClientAuthMode</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">ServletWebServerFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> search <span class="token operator">=</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span><span class="token constant">CURRENT</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddedUndertow</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‰ä¸ªå®ç°ç±»éƒ½ç»§æ‰¿è‡ªæŠ½è±¡åŸºç±»AbstractServletWebServerFactoryï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/47-7cbf3d31.webp" alt="47" tabindex="0" loading="lazy"><figcaption>47</figcaption></figure><h4 id="ä»¥tomcatä¸ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä»¥tomcatä¸ºä¾‹" aria-hidden="true">#</a> ä»¥Tomcatä¸ºä¾‹</h4><p>è¿›å…¥TomcatServletWebServerFactoryï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œé…ç½®TomcatåŸºæœ¬ç¯å¢ƒï¼Œè¿”å›ä¸€ä¸ªåµŒå…¥å¼Servletå®¹å™¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">WebServer</span> <span class="token function">getWebServer</span><span class="token punctuation">(</span><span class="token class-name">ServletContextInitializer</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> initializers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>disableMBeanRegistry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Registry</span><span class="token punctuation">.</span><span class="token function">disableRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Tomcat</span> tomcat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">File</span> baseDir <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>baseDirectory <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baseDirectory <span class="token operator">:</span> <span class="token function">createTempDir</span><span class="token punctuation">(</span><span class="token string">&quot;tomcat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tomcat<span class="token punctuation">.</span><span class="token function">setBaseDir</span><span class="token punctuation">(</span>baseDir<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Connector</span> connector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connector</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>protocol<span class="token punctuation">)</span><span class="token punctuation">;</span>
    connector<span class="token punctuation">.</span><span class="token function">setThrowOnFailure</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tomcat<span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addConnector</span><span class="token punctuation">(</span>connector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">customizeConnector</span><span class="token punctuation">(</span>connector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tomcat<span class="token punctuation">.</span><span class="token function">setConnector</span><span class="token punctuation">(</span>connector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tomcat<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAutoDeploy</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">configureEngine</span><span class="token punctuation">(</span>tomcat<span class="token punctuation">.</span><span class="token function">getEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Connector</span> additionalConnector <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>additionalTomcatConnectors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tomcat<span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addConnector</span><span class="token punctuation">(</span>additionalConnector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">prepareContext</span><span class="token punctuation">(</span>tomcat<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> initializers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">getTomcatWebServer</span><span class="token punctuation">(</span>tomcat<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹æœ€åè¿”å›çš„getTomcatWebServerï¼Œåªè¦ç«¯å£å·å¤§äºç­‰äº0å°±è‡ªåŠ¨å¯åŠ¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">TomcatWebServer</span> <span class="token function">getTomcatWebServer</span><span class="token punctuation">(</span><span class="token class-name">Tomcat</span> tomcat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TomcatWebServer</span><span class="token punctuation">(</span>tomcat<span class="token punctuation">,</span> <span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">getShutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿›å…¥TomcatWebServerçš„initializeæ–¹æ³•å°±å¯ä»¥çœ‹åˆ°å¯åŠ¨å®¹å™¨</p><figure><img src="/Computer-Science-Learn-Notes/assets/48-7c2a3887.webp" alt="48" tabindex="0" loading="lazy"><figcaption>48</figcaption></figure><h3 id="é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†" aria-hidden="true">#</a> é…ç½®æ˜¯å¦‚ä½•ä¿®æ”¹åŸç†</h3><p>çœ‹ServletWebServerFactoryAutoConfigurationä¸­ï¼Œåœ¨è‡ªåŠ¨é…ç½®ä¹‹å‰å…ˆå¯¼å…¥äº†BeanPostProcessorsRegistrarï¼ˆåç½®å¤„ç†å™¨ï¼ŒBeanåˆå§‹åŒ–å‰åï¼Œåˆ›å»ºå®Œå¯¹è±¡æ²¡æœ‰èµ‹å€¼çš„é™¤å››å®³å·¥ä½œï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span>BeanPostProcessorsRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>beanFactory <span class="token keyword">instanceof</span> <span class="token class-name">ConfigurableListableBeanFactory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ConfigurableListableBeanFactory</span><span class="token punctuation">)</span> beanFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è§‚å¯Ÿä¸‹é¢çš„ï¼šregisterBeanDefinitionsæ–¹æ³•ä¸­WebServerFactoryCustomizerBeanPostProcessorï¼Œ</p><p>åˆå§‹ä¹‹å‰ï¼Œå¦‚æœå½“å‰åˆå§‹åŒ–çš„ä¸€ä¸ªWebServerFactoryå°±è°ƒç”¨postProcessBeforeInitialization</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessBeforeInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token keyword">instanceof</span> <span class="token class-name">WebServerFactory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">postProcessBeforeInitialization</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">WebServerFactory</span><span class="token punctuation">)</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·å–æ‰€æœ‰çš„å®šåˆ¶å…¶ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªå®šåˆ¶å…¶çš„customizeæ–¹æ³•æ¥ç»™servletå®¹å™¨èµ‹å€¼ï¼ˆç«¯å£...ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">postProcessBeforeInitialization</span><span class="token punctuation">(</span><span class="token class-name">WebServerFactory</span> webServerFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">LambdaSafe</span><span class="token punctuation">.</span><span class="token function">callbacks</span><span class="token punctuation">(</span><span class="token class-name">WebServerFactoryCustomizer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token function">getCustomizers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> webServerFactory<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">withLogger</span><span class="token punctuation">(</span><span class="token class-name">WebServerFactoryCustomizerBeanPostProcessor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token punctuation">(</span>customizer<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> customizer<span class="token punctuation">.</span><span class="token function">customize</span><span class="token punctuation">(</span>webServerFactory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†çœ‹WebServerFactoryCustomizerBeanPostProcessorä¸­çš„Collectionï¼Œè¿™ä¸ªä»å®¹å™¨ä¸­è·å–è¿™ä¸ªç±»å‹çš„ç»„ä»¶ã€‚å®šåˆ¶servletå®¹å™¨ç»„ä»¶</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebServerFactoryCustomizer</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCustomizers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>customizers <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Look up does not include the parent context</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>customizers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">getWebServerFactoryCustomizerBeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>customizers<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">AnnotationAwareOrderComparator</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>customizers <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>customizers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customizers<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å°ç»“-2" tabindex="-1"><a class="header-anchor" href="#å°ç»“-2" aria-hidden="true">#</a> å°ç»“ï¼š</h3><ol><li>æ ¹æ®å¯¼å…¥æƒ…å†µï¼Œæ·»åŠ ç›¸åº”çš„å®¹å™¨å·¥å‚ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span>BeanPostProcessorsRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedTomcat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedJetty</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedUndertow</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>å®¹å™¨ä¸­æŸä¸ªç»„ä»¶åˆ›å»ºå°±ä¼šè§¦å‘<strong>åç½®å¤„ç†å™¨ï¼ˆBeanPostProcessorsRegistrarï¼‰</strong></li></ol><p>åªè¦æ˜¯ConfigurableListableBeanFactoryå°±å·¥ä½œï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>beanFactory <span class="token keyword">instanceof</span> <span class="token class-name">ConfigurableListableBeanFactory</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>è¿™ä¸ªåç½®å¤„ç†å™¨ä»å®¹å™¨ä¸­<strong>è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨ï¼Œç„¶åå®šåˆ¶å±æ€§ï¼ˆç«¯å£..ï¼‰</strong></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebServerFactoryCustomizer</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCustomizers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>customizers <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Look up does not include the parent context</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>customizers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">getWebServerFactoryCustomizerBeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>customizers<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">AnnotationAwareOrderComparator</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>customizers <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>customizers<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customizers<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åµŒå…¥å¼servletè‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#åµŒå…¥å¼servletè‡ªåŠ¨é…ç½®åŸç†" aria-hidden="true">#</a> åµŒå…¥å¼Servletè‡ªåŠ¨é…ç½®åŸç†</h2><p>æ–­ç‚¹å£°æ˜ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/49-f332d08c.webp" alt="49" tabindex="0" loading="lazy"><figcaption>49</figcaption></figure><p>é¦–å…ˆå¯åŠ¨SpringBoot</p><figure><img src="/Computer-Science-Learn-Notes/assets/50-dbd2b4c8.webp" alt="50" tabindex="0" loading="lazy"><figcaption>50</figcaption></figure><p>ç„¶åè°ƒç”¨runæ–¹æ³•ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/51-0bc55f39.webp" alt="51" tabindex="0" loading="lazy"><figcaption>51</figcaption></figure><p>åˆ›å»ºå’Œåˆ·æ–°å®¹å™¨</p><figure><img src="/Computer-Science-Learn-Notes/assets/52-413d0cb6.webp" alt="52" tabindex="0" loading="lazy"><figcaption>52</figcaption></figure><p>æŸ¥çœ‹æ˜¯å¦‚ä½•åˆ›å»ºå®¹å™¨çš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> contextClass <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContextClass<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contextClass <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token constant">SERVLET</span><span class="token operator">:</span>
                    contextClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_SERVLET_WEB_CONTEXT_CLASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token constant">REACTIVE</span><span class="token operator">:</span>
                    contextClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_REACTIVE_WEB_CONTEXT_CLASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token operator">:</span>
                    contextClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_CONTEXT_CLASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯ä¸€ä¸ªWEBå®¹å™¨ï¼š<strong>DEFAULT_SERVLET_WEB_CONTEXT_CLASS</strong>ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ™®é€šå®¹å™¨å°±åˆ›å»ºï¼š<strong>DEFAULT_CONTEXT_CLASS</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>    /**
     * The class name of application context that will be used by default for non-web
     * environments.
     */
    public static final String DEFAULT_CONTEXT_CLASS = &quot;org.springframework.context.&quot;
            + &quot;annotation.AnnotationConfigApplicationContext&quot;;
    /**
     * The class name of application context that will be used by default for web
     * environments.
     */
    public static final String DEFAULT_SERVLET_WEB_CONTEXT_CLASS = &quot;org.springframework.boot.&quot;
            + &quot;web.servlet.context.AnnotationConfigServletWebServerApplicationContext&quot;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»è¦æ˜¯åˆ·æ–°IOCå®¹å™¨</p><figure><img src="/Computer-Science-Learn-Notes/assets/53-4dc89eab.webp" alt="53" tabindex="0" loading="lazy"><figcaption>53</figcaption></figure><p>åˆ·æ–°IOCå®¹å™¨</p><figure><img src="/Computer-Science-Learn-Notes/assets/54-3b8362a4.webp" alt="54" tabindex="0" loading="lazy"><figcaption>54</figcaption></figure><p>ä»¥æ­¤ç±»æ¨</p><figure><img src="/Computer-Science-Learn-Notes/assets/55-8b6ecf46.webp" alt="55" tabindex="0" loading="lazy"><figcaption>55</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/56-7001037b.webp" alt="56" tabindex="0" loading="lazy"><figcaption>56</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/57-709af6e2.webp" alt="57" tabindex="0" loading="lazy"><figcaption>57</figcaption></figure><p>ç„¶åå°±åˆ›å»ºåµŒå…¥å¼çš„servletå®¹å™¨ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/58-0aa6e572.webp" alt="58" tabindex="0" loading="lazy"><figcaption>58</figcaption></figure><p>ç„¶åå°±è·å–åˆ°äº†åµŒå…¥å¼servletå®¹å™¨</p><figure><img src="/Computer-Science-Learn-Notes/assets/59-50e7ed9e.webp" alt="59" tabindex="0" loading="lazy"><figcaption>59</figcaption></figure><p><strong>å°ç»“</strong>ï¼šIOCå®¹å™¨å¯åŠ¨åˆ›å»ºåµŒå…¥å¼çš„servletå®¹å™¨</p><ol><li><p>SpringBootå¯åŠ¨è¿è¡Œrunæ–¹æ³•</p></li><li><p>åˆ·æ–°IOCå®¹å™¨ï¼ˆåˆ›å»ºIOCå®¹å™¨å¯¹è±¡ï¼Œåˆå§‹åŒ–å®¹å™¨ï¼Œåˆ›å»ºæ¯ä¸€ä¸ªç»„ä»¶ï¼‰</p></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">refreshContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åå¼€å§‹åˆ›å»ºwebå®¹å™¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>context <span class="token operator">=</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯webç¯å¢ƒåˆ›å»ºï¼šAnnotationConfigServletWebServerApplicationContext</p><p>å¦åˆ™åˆ›å»ºï¼šAnnotationConfigApplicationContext</p><ol start="3"><li>åˆ·æ–°åˆšæ‰åˆ›å»ºå·çš„IOCå®¹å™¨ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span><span class="token punctuation">)</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li><p>è°ƒç”¨onRefresh()ï¼Œwebçš„IOCå®¹å™¨é‡å†™äº†onRefreshæ–¹æ³•</p></li><li><p>webIOCå®¹å™¨ä¼šåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨</p></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">createWebServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ServletWebServerFactory</span> factory <span class="token operator">=</span> <span class="token function">getWebServerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åä»IOCå®¹å™¨ä¸­è·å–TomcatServletWebServerFactoryç»„ä»¶ï¼›</p><p>åç½®å¤„ç†å™¨ï¼šBeanPostProcessorsRegistrar è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨æ¥å®šåˆ¶Servletçš„ç›¸å…³é…ç½®</p><ol start="7"><li>åµŒå…¥å¼Servletå®¹å™¨åˆ›å»ºå¹¶å¯åŠ¨Tomcat</li></ol><h2 id="æ•´åˆjdbc" tabindex="-1"><a class="header-anchor" href="#æ•´åˆjdbc" aria-hidden="true">#</a> æ•´åˆJDBC</h2><p>YAMLé…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/mybatis_test
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è‡ªåŠ¨é…ç½®åŸç†-2" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨é…ç½®åŸç†-2" aria-hidden="true">#</a> è‡ªåŠ¨é…ç½®åŸç†</h3><p>DataSourceProperties</p><ol><li>DataSourceConfigurationï¼Œæ ¹æ®é…ç½®åˆ›å»ºæ•°æ®æºï¼Œé»˜è®¤ä½¿ç”¨Tomcatè¿æ¥æ± ï¼Œå¯ä»¥ä½¿ç”¨spring.datasource.typeè‡ªå®šä¹‰æ•°æ®æºç±»å‹</li></ol><ul><li>Tomcat</li><li>Hikari</li><li>Dbcp2</li><li>Generic è‡ªå®šä¹‰æ•°æ®æº</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.type&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Generic</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">DataSource</span> <span class="token function">dataSource</span><span class="token punctuation">(</span><span class="token class-name">DataSourceProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä½¿ç”¨DataSourceBuilderåˆ›å»ºæ•°æ®æºï¼Œåˆ©ç”¨åˆ›å»ºå“åº”typeçš„æ•°æ®æºï¼Œå¹¶ä¸”ç»‘å®šç›¸å…³å±æ€§</span>
        <span class="token keyword">return</span> properties<span class="token punctuation">.</span><span class="token function">initializeDataSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>DataSourceAutoConfiguration</p></li><li><p>JdbcTemplateAutoConfiguration</p></li></ol><h2 id="æ•´åˆdruid" tabindex="-1"><a class="header-anchor" href="#æ•´åˆdruid" aria-hidden="true">#</a> æ•´åˆDruid</h2><p>å¯¼å…¥POMï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é¦–å…ˆé…ç½®YAMLï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/mybatis_test
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
    <span class="token comment">#   æ•°æ®æºå…¶ä»–é…ç½®</span>
    <span class="token key atrule">initialSize</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">maxActive</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token key atrule">maxWait</span><span class="token punctuation">:</span> <span class="token number">60000</span>
    <span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation">:</span> <span class="token number">60000</span>
    <span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation">:</span> <span class="token number">300000</span>
    <span class="token key atrule">validationQuery</span><span class="token punctuation">:</span> SELECT 1 FROM DUAL
    <span class="token key atrule">testWhileIdle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">testOnBorrow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">testOnReturn</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">poolPreparedStatements</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">#   é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ&#39;wall&#39;ç”¨äºé˜²ç«å¢™</span>
    <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall<span class="token punctuation">,</span>log4j
    <span class="token key atrule">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token key atrule">useGlobalDataSourceStat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">connectionProperties</span><span class="token punctuation">:</span> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®Druid</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">druid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">//    é…ç½®ç›‘æ§</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletRegistrationBean</span> <span class="token function">statViewServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ServletRegistrationBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StatViewServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;/druid/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> initParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;loginUsername&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;loginPassword&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;allow&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é»˜è®¤æ‰€æœ‰</span>
<span class="token comment">//        initParams.put(&quot;deny&quot;, &quot;&quot;); // æ‹’ç»è®¿é—®</span>
        bean<span class="token punctuation">.</span><span class="token function">setInitParameters</span><span class="token punctuation">(</span>initParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">//    é…ç½®ä¸€ä¸ªwebç›‘æ§çš„filter</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterRegistrationBean</span> <span class="token function">webStatFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FilterRegistrationBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterRegistrationBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebStatFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> initParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;exclusions&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.js,*.css,/druid/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setInitParameters</span><span class="token punctuation">(</span>initParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setUrlPatterns</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå°±å¯ä»¥çœ‹è§æŸ¥è¯¢çš„ä¿¡æ¯ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/60-0ddd7da5.webp" alt="60" tabindex="0" loading="lazy"><figcaption>60</figcaption></figure><p>SpringBoot2 ä½¿ç”¨YAMLç›´æ¥é…ç½®ç›‘æ§å™¨å’Œè®¿é—®åœ°å€ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/mybatis_test
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
    <span class="token comment">#   æ•°æ®æºå…¶ä»–é…ç½®</span>
    <span class="token key atrule">initialSize</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">maxActive</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token key atrule">maxWait</span><span class="token punctuation">:</span> <span class="token number">60000</span>
    <span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation">:</span> <span class="token number">60000</span>
    <span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation">:</span> <span class="token number">300000</span>
    <span class="token key atrule">validationQuery</span><span class="token punctuation">:</span> SELECT 1 FROM DUAL
    <span class="token key atrule">testWhileIdle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">testOnBorrow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">testOnReturn</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">poolPreparedStatements</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">#   é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ&#39;wall&#39;ç”¨äºé˜²ç«å¢™</span>
    <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall<span class="token punctuation">,</span>log4j
    <span class="token key atrule">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token key atrule">useGlobalDataSourceStat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">connectionProperties</span><span class="token punctuation">:</span> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500
    <span class="token key atrule">druid</span><span class="token punctuation">:</span>
      <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall
      <span class="token key atrule">aop-patterns</span><span class="token punctuation">:</span> com.javayh.druid.*
      <span class="token key atrule">web-stat-filter</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">url-pattern</span><span class="token punctuation">:</span> /*
        <span class="token key atrule">exclusions</span><span class="token punctuation">:</span> /druid/*<span class="token punctuation">,</span><span class="token important">*.js</span><span class="token punctuation">,</span><span class="token important">*.gif</span><span class="token punctuation">,</span><span class="token important">*.webp</span><span class="token punctuation">,</span><span class="token important">*.bmp</span><span class="token punctuation">,</span><span class="token important">*.webp</span><span class="token punctuation">,</span><span class="token important">*.css</span><span class="token punctuation">,</span><span class="token important">*.ico</span>
        <span class="token key atrule">session-stat-enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">session-stat-max-count</span><span class="token punctuation">:</span> <span class="token number">10</span>
      <span class="token key atrule">stat-view-servlet</span><span class="token punctuation">:</span>
        <span class="token comment"># æ˜¯å¦å¯ç”¨statViewServleté…ç½®</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token comment"># è®¿é—®ç›‘æ§é¡µé¢</span>
        <span class="token key atrule">url-pattern</span><span class="token punctuation">:</span> <span class="token string">&quot;/druid/*&quot;</span>
        <span class="token comment"># ç¦æ­¢æ‰‹åŠ¨é‡ç½®ç›‘æ§æ•°æ®</span>
        <span class="token key atrule">reset-enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
        <span class="token comment"># è®¾ç½®ç›‘æ§é¡µé¢çš„ç™»é™†å</span>
        <span class="token key atrule">login-username</span><span class="token punctuation">:</span> admin
        <span class="token comment"># è®¾ç½®ç›‘æ§é¡µé¢çš„ç™»é™†å¯†ç </span>
        <span class="token key atrule">login-password</span><span class="token punctuation">:</span> <span class="token number">123</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ•´åˆmybatis" tabindex="-1"><a class="header-anchor" href="#æ•´åˆmybatis" aria-hidden="true">#</a> æ•´åˆMybatis</h2><h3 id="maven" tabindex="-1"><a class="header-anchor" href="#maven" aria-hidden="true">#</a> Maven</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ³¨è§£" aria-hidden="true">#</a> ä½¿ç”¨æ³¨è§£</h3><p>åˆ›å»ºå®ä½“ç±»è¿›è¡Œæµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> dId<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Department</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> departmentName<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨æ³¨è§£**@Mapper**æ ‡æ³¨ä½¿ç”¨Mybatis</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DepartmentMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from department where id = #{id} ;&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Department</span> <span class="token function">getDepById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from department where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteDepById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Options</span><span class="token punctuation">(</span>useGeneratedKeys <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> keyProperty <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into department (department_name) values (#{departmentName});&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update department set department_name=#{departmentName} where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">updateDept</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰Mybatisï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@org.springframework.context.annotation.Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ConfigurationCustomizer</span> <span class="token function">configurationCustomizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ConfigurationCustomizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customize</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> configuration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                configuration<span class="token punctuation">.</span><span class="token function">setMapUnderscoreToCamelCase</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ@Mapperè¿‡å¤šå¯ä»¥åœ¨ä¸»ç±»ä¸­ä½¿ç”¨**@MapperScan**æ‰¹é‡æ‰«ææ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;cn.zhiyucs.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootMybatis01Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootMybatis01Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> ä½¿ç”¨é…ç½®æ–‡ä»¶</h3><p>åˆ›å»ºMybatisç›®å½•ç»“æ„ï¼š</p><figure><img src="data:image/webp;base64,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" alt="61" tabindex="0" loading="lazy"><figcaption>61</figcaption></figure><p>Mybatisä¸»é…ç½®environmentå¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapUnderscoreToCamelCase<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­é…ç½®MyBatisï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">config-location</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis/mybatis<span class="token punctuation">-</span>config.xml
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis/mapper/<span class="token important">*.xml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springbootå¯åŠ¨åŸç†" tabindex="-1"><a class="header-anchor" href="#springbootå¯åŠ¨åŸç†" aria-hidden="true">#</a> SpringBootå¯åŠ¨åŸç†</h2><p>ç¨‹åºå…¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootStartertheoryApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¬¬ä¸€æ­¥-åˆ›å»ºspringapplicationå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ç¬¬ä¸€æ­¥-åˆ›å»ºspringapplicationå¯¹è±¡" aria-hidden="true">#</a> ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºSpringApplicationå¯¹è±¡</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> primarySource<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> primarySource <span class="token punctuation">}</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> primarySources<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥è§‚å¯Ÿå®ƒçš„æ„é€ æ–¹æ³•ï¼šåˆ›å»ºæ–¹æ³•è§ä¸‹é¢</p><p>ä¸»è¦æ˜¯é…ç½®ä¸¤ä¸ªç±»</p><ul><li>ApplicationContextInitializer</li><li>SpringApplicationRunListener</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">ResourceLoader</span> resourceLoader<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> primarySources<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader <span class="token operator">=</span> resourceLoader<span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">,</span> <span class="token string">&quot;PrimarySources must not be null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// é…ç½®source</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>primarySources <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯webåº”ç”¨</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationType <span class="token operator">=</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token function">deduceFromClasspath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ›å»ºåˆå§‹åŒ–æ„é€ å™¨</span>
    <span class="token function">setInitializers</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token punctuation">)</span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContextInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ›å»ºåº”ç”¨ç›‘å¬å™¨</span>
    <span class="token function">setListeners</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token punctuation">)</span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">ApplicationListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ¨æ–­å‡ºmainæ–¹æ³•ç±»</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass <span class="token operator">=</span> <span class="token function">deduceMainpplicationClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†è¿›å…¥ï¼šgetSpringFactoriesInstances</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterTypes<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–ç±»åŠ è½½å™¨</span>
    <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Use names and ensure unique to protect against duplicates</span>
    <span class="token comment">// é€šè¿‡ç±»åŠ è½½å™¨ï¼Œè·å–æŒ‡å®šçš„META-INF/spring.factoriesæ–‡ä»¶ï¼Œè·å–æ–‡ä»¶ä¸­å·¥å‚ç±»çš„å…¨ç±»å</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">loadFactoryNames</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// é€šè¿‡ç±»è·¯å¾„åå°„å¾—åˆ°å·¥å‚å¯¹è±¡ï¼Œæ„é€ æ–¹æ³•</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> <span class="token function">createSpringFactoriesInstances</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> parameterTypes<span class="token punctuation">,</span> classLoader<span class="token punctuation">,</span> args<span class="token punctuation">,</span> names<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">AnnotationAwareOrderComparator</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>instances<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> instances<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡loadFactoryNameså°±å¯ä»¥çŸ¥é“</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">FACTORIES_RESOURCE_LOCATION</span> <span class="token operator">=</span> <span class="token string">&quot;META-INF/spring.factories&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ç¬¬äºŒæ­¥-å¯åŠ¨åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ç¬¬äºŒæ­¥-å¯åŠ¨åº”ç”¨" aria-hidden="true">#</a> ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åº”ç”¨</h3><p>ä¸»ç±»ï¼šConfigurableApplicationContext</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StopWatch</span> stopWatch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StopWatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åº”ç”¨å¯åŠ¨è®¡æ—¶å™¨å¼€å§‹è®¡æ—¶</span>
    stopWatch<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ConfigurableApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SpringBootExceptionReporter</span><span class="token punctuation">&gt;</span></span> exceptionReporters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Headlessæ¨¡å¼é…ç½®ï¼ˆåšAWTï¼Œæš‚æ—¶ä¸ç”¨ç®¡ï¼‰</span>
    <span class="token function">configureHeadlessProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–å¯åŠ¨ç›‘å¬å™¨</span>
    <span class="token class-name">SpringApplicationRunListeners</span> listeners <span class="token operator">=</span> <span class="token function">getRunListeners</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åº”ç”¨å¯åŠ¨ç›‘å¬å™¨å¼€å§‹è®¡æ—¶ï¼ˆå›è°ƒæ‰€æœ‰çš„SpringApplicationRunListeners.starting()ï¼‰</span>
    listeners<span class="token punctuation">.</span><span class="token function">starting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°è£…å‘½ä»¤è¡Œå‚æ•°</span>
        <span class="token class-name">ApplicationArguments</span> applicationArguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultApplicationArguments</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// é…ç½®ç¯å¢ƒæ¨¡å—ï¼ˆç¥¥è§ä¸‹é¢prepareEnvironmentæ–¹æ³•ï¼‰</span>
        <span class="token class-name">ConfigurableEnvironment</span> environment <span class="token operator">=</span> <span class="token function">prepareEnvironment</span><span class="token punctuation">(</span>listeners<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// é…ç½®éœ€è¦å¿½ç•¥çš„bean</span>
        <span class="token function">configureIgnoreBeanInfo</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Banneré…ç½®(æ‰“å°Springçš„å›¾æ ‡)</span>
        <span class="token class-name">Banner</span> printedBanner <span class="token operator">=</span> <span class="token function">printBanner</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</span>
        context <span class="token operator">=</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¼‚å¸¸åˆ†ææŠ¥å‘Š</span>
        exceptionReporters <span class="token operator">=</span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">SpringBootExceptionReporter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
                                                         <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä¸Šä¸‹æ–‡åŸºæœ¬å±æ€§é…ç½®ï¼ˆç¥¥è§ä¸‹é¢prepareContextæ–¹æ³•ï¼‰</span>
        <span class="token function">prepareContext</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> environment<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">,</span> printedBanner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ›´æ–°åº”ç”¨ä¸Šä¸‹æ–‡/åˆ·æ–°IOCå®¹å™¨ï¼ˆç¥¥è§ä¸‹é¢refreshæ–¹æ³•ï¼‰</span>
        <span class="token function">refreshContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä»IOCå®¹å™¨ä¸­è·å–æ‰€æœ‰çš„ApplicationRunnerå’ŒCommandLineRunnerè¿›è¡Œå›è°ƒ</span>
        <span class="token comment">// å…ˆApplicationRunner</span>
        <span class="token function">afterRefresh</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stopWatch<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logStartupInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">StartupInfoLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logStarted</span><span class="token punctuation">(</span><span class="token function">getApplicationLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stopWatch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        listeners<span class="token punctuation">.</span><span class="token function">started</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callRunners</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">handleRunFailure</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ex<span class="token punctuation">,</span> exceptionReporters<span class="token punctuation">,</span> listeners<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        listeners<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">handleRunFailure</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ex<span class="token punctuation">,</span> exceptionReporters<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ•´ä¸ªSpringBootå¯åŠ¨å®Œæˆè¿”å›IOCå®¹å™¨</span>
    <span class="token keyword">return</span> context<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·å–ç›‘å¬å™¨çš„æ–¹æ³•ï¼š<strong>getSpringFactoriesInstances</strong>ï¼Œå¯ä»¥çœ‹å‡ºä¹Ÿæ˜¯ä»<strong>META-INF</strong>è·å–</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">SpringApplicationRunListeners</span> <span class="token function">getRunListeners</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> types <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplicationRunListeners</span><span class="token punctuation">(</span>logger<span class="token punctuation">,</span>
                                             <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">SpringApplicationRunListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> types<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®Listenerç¯å¢ƒï¼š<strong>prepareEnvironment</strong>(listeners, applicationArguments);</p><p>ç¯å¢ƒå®Œæˆåå›è°ƒSpringApplicationRunListeners.environmentPreparedæ–¹æ³•ï¼Œè¡¨ç¤ºç¯å¢ƒå‡†å¤‡å®Œæˆ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">ConfigurableEnvironment</span> <span class="token function">prepareEnvironment</span><span class="token punctuation">(</span><span class="token class-name">SpringApplicationRunListeners</span> listeners<span class="token punctuation">,</span>
                                                   <span class="token class-name">ApplicationArguments</span> applicationArguments<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Create and configure the environment</span>
    <span class="token comment">// åˆ›å»ºé…ç½®ç¯å¢ƒ</span>
    <span class="token class-name">ConfigurableEnvironment</span> environment <span class="token operator">=</span> <span class="token function">getOrCreateEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åŠ è½½å±æ€§æ–‡ä»¶</span>
    <span class="token function">configureEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">.</span><span class="token function">getSourceArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ConfigurationPropertySources</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ç›‘å¬å™¨ç›‘å¬é…ç½®</span>
    listeners<span class="token punctuation">.</span><span class="token function">environmentPrepared</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">bindToSpringApplication</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isCustomEnvironment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EnvironmentConverter</span><span class="token punctuation">(</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">convertEnvironmentIfNecessary</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span>
                                                                                               <span class="token function">deduceEnvironmentClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ConfigurationPropertySources</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> environment<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°æ”¾è¡ŒBanneråå‡ºç°ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/63-66b3ba31.webp" alt="63" tabindex="0" loading="lazy"><figcaption>63</figcaption></figure><p>ç„¶åçœ‹<strong>createApplicationContext</strong>ï¼šå†³å®šåˆ›å»º</p><p>WEBï¼ˆDEFAULT_SERVLET_WEB_CONTEXT_CLASSï¼‰</p><p>è¿˜æ˜¯</p><p>æ™®é€šIOCï¼ˆDEFAULT_CONTEXT_CLASSï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> contextClass <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContextClass<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contextClass <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token constant">SERVLET</span><span class="token operator">:</span>
                    contextClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_SERVLET_WEB_CONTEXT_CLASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token constant">REACTIVE</span><span class="token operator">:</span>
                    contextClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_REACTIVE_WEB_CONTEXT_CLASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token operator">:</span>
                    contextClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_CONTEXT_CLASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>
                <span class="token string">&quot;Unable create a default ApplicationContext, please specify an ApplicationContextClass&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">)</span> <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">instantiateClass</span><span class="token punctuation">(</span>contextClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹<strong>prepareContext</strong>å‡†å¤‡ä¸Šä¸‹æ–‡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">prepareContext</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">,</span> <span class="token class-name">ConfigurableEnvironment</span> environment<span class="token punctuation">,</span>
                            <span class="token class-name">SpringApplicationRunListeners</span> listeners<span class="token punctuation">,</span> <span class="token class-name">ApplicationArguments</span> applicationArguments<span class="token punctuation">,</span> <span class="token class-name">Banner</span> printedBanner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¿å­˜åˆšåˆšçš„environment</span>
    context<span class="token punctuation">.</span><span class="token function">setEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åç½®å¤„ç†å™¨ï¼Œæ³¨å†Œå°ç»„ä»¶</span>
    <span class="token function">postProcessApplicationContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¸»è¦ï¼š</span>
    <span class="token function">applyInitializers</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    listeners<span class="token punctuation">.</span><span class="token function">contextPrepared</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logStartupInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">logStartupInfo</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">logStartupProfileInfo</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Add boot specific singleton beans</span>
    <span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    beanFactory<span class="token punctuation">.</span><span class="token function">registerSingleton</span><span class="token punctuation">(</span><span class="token string">&quot;springApplicationArguments&quot;</span><span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>printedBanner <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        beanFactory<span class="token punctuation">.</span><span class="token function">registerSingleton</span><span class="token punctuation">(</span><span class="token string">&quot;springBootBanner&quot;</span><span class="token punctuation">,</span> printedBanner<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>beanFactory <span class="token keyword">instanceof</span> <span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">)</span> beanFactory<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setAllowBeanDefinitionOverriding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>allowBeanDefinitionOverriding<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lazyInitialization<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">addBeanFactoryPostProcessor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LazyInitializationBeanFactoryPostProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Load the sources</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> sources <span class="token operator">=</span> <span class="token function">getAllSources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>sources<span class="token punctuation">,</span> <span class="token string">&quot;Sources must not be empty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">load</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> sources<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å®Œæˆåå›è°ƒcontextLoaded</span>
    listeners<span class="token punctuation">.</span><span class="token function">contextLoaded</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹å…³é”®çš„applyInitializersï¼Œå›è°ƒä¹‹å‰ä¿å­˜çš„ApplicationContextInitializerçš„initializeï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">applyInitializers</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ApplicationContextInitializer</span> initializer <span class="token operator">:</span> <span class="token function">getInitializers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> requiredType <span class="token operator">=</span> <span class="token class-name">GenericTypeResolver</span><span class="token punctuation">.</span><span class="token function">resolveTypeArgument</span><span class="token punctuation">(</span>initializer<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                                        <span class="token class-name">ApplicationContextInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">isInstanceOf</span><span class="token punctuation">(</span>requiredType<span class="token punctuation">,</span> context<span class="token punctuation">,</span> <span class="token string">&quot;Unable to call initializer.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        initializer<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åçœ‹ listeners.contextPrepared(context); å›è°ƒä¹‹å‰çš„SpringApplicationRunListenerçš„contextPreparedæ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">contextPrepared</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SpringApplicationRunListener</span> listener <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>listeners<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        listener<span class="token punctuation">.</span><span class="token function">contextPrepared</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå¼€å§‹åˆ·æ–°å®¹å™¨<strong>refreshContext(context)</strong>ï¼šï¼ˆé…ç½®ã€ç»„ä»¶ã€è‡ªåŠ¨é…ç½®ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalStateException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> var1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startupShutdownMonitor<span class="token punctuation">;</span>
    <span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>startupShutdownMonitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å‡†å¤‡æ›´æ–°ä¸Šä¸‹æ–‡æ—¶çš„é¢„å¤‡å·¥ä½œï¼š1.åˆå§‹åŒ–PropertySource; 2.éªŒè¯Enrivonmentä¸­å¿…è¦çš„å±æ€§</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prepareRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–ä¸Šä¸‹æ–‡ä¸­çš„BeanFactory</span>
        <span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">obtainFreshBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å¯¹BeanFactoryåšäº›é¢„å¤‡å·¥ä½œ</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prepareBeanFactory</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//å¯¹BeanFactoryè¿›è¡Œé¢„å¤„ç†</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">postProcessBeanFactory</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡Œå®¹å™¨ä¸­çš„BeanFactoryPostProcessor</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">invokeBeanFactoryPostProcessors</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ³¨å†ŒBeanPostProcessor</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">registerBeanPostProcessors</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//åˆå§‹åŒ–MessageSource(å›½é™…åŒ–ç›¸å…³)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initMessageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//åˆå§‹åŒ–å®¹å™¨äº‹ä»¶å¹¿æ’­å™¨(ç”¨æ¥å‘å¸ƒäº‹ä»¶)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initApplicationEventMulticaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//åˆå§‹åŒ–ä¸€äº›ç‰¹æ®Šçš„Bean,ä¸»è¦åšäº†: 1.åˆå§‹åŒ–ThemeSource(è·Ÿå›½é™…åŒ–ç›¸å…³çš„æ¥å£) 2.åˆ›å»ºWebServer</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//å°†æ‰€æœ‰ç›‘å¬å™¨æ³¨å†Œåˆ°å‰ä¸¤æ­¥åˆ›å»ºçš„äº‹ä»¶å¹¿æ’­å™¨ä¸­</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">registerListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//ç»“æŸBeanFactoryçš„åˆå§‹åŒ–å·¥ä½œ(è¿™ä¸€æ­¥ä¸»è¦ç”¨æ¥å°†æ‰€æœ‰çš„å•ä¾‹BeanDefinitionå®ä¾‹åŒ–)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">finishBeanFactoryInitialization</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//ä¸Šä¸‹æ–‡åˆ·æ–°å®Œæ¯•</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">finishRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">BeansException</span> var9<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">isWarnEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Exception encountered during context initialization - cancelling refresh attempt: &quot;</span> <span class="token operator">+</span> var9<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">destroyBeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cancelRefresh</span><span class="token punctuation">(</span>var9<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> var9<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetCommonCaches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°-æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»" tabindex="-1"><a class="header-anchor" href="#åŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°-æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»" aria-hidden="true">#</a> ï¼ˆåŸºäºåŸç†çš„æµ‹è¯•ç¬”è®°ï¼‰æµ‹è¯•å¯åŠ¨çš„å››ä¸ªç±»</h2><p>æµ‹è¯•ç±»ï¼š</p><ul><li>ApplicationContextInitializer</li><li>SpringApplicationRunListener</li><li>ApplicationRunner</li><li>CommandLineRunner</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloApplicationContextInitializer</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextInitializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ApplicationContextInitializer............initialize........&quot;</span> <span class="token operator">+</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloSpringApplicationRunListener</span> <span class="token keyword">implements</span> <span class="token class-name">SpringApplicationRunListener</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">HelloSpringApplicationRunListener</span><span class="token punctuation">(</span><span class="token class-name">SpringApplication</span> application<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">starting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SpringApplicationRunListener......starting.......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">environmentPrepared</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableEnvironment</span> environment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getSystemEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;os.name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SpringApplicationRunListener.........environmentPrepared.............&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextPrepared</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SpringApplicationRunListener.........contextPrepared.............&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextLoaded</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SpringApplicationRunListener.........contextLoaded.............&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">started</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SpringApplicationRunListener.........started.............&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">running</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">failed</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloApplicationRunner</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationRunner</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ApplicationArguments</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ApplicationRunner.........run.........&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloCommandLineRunner</span> <span class="token keyword">implements</span> <span class="token class-name">CommandLineRunner</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;CommandLineRunner............run........&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸»é…ç½®ç±»ä¸­ï¼ˆapplication.propertiesï¼‰é…ç½®å‰ä¸¤ä¸ªç±»ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">org.springframework.context.ApplicationContextInitializer</span><span class="token punctuation">=</span><span class="token value attr-value">\
cn.zhiyucs.listener.HelloApplicationContextInitializer</span>
<span class="token key attr-name">org.springframework.boot.SpringApplicationRunListener</span><span class="token punctuation">=</span><span class="token value attr-value">\
cn.zhiyucs.listener.HelloSpringApplicationRunListener</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘" aria-hidden="true">#</a> è‡ªå®šä¹‰startersã€æš‚æ—¶æ— æ³•ç†è§£ã€‘</h2><p>ç¼–å†™è‡ªåŠ¨é…ç½®ç±»éœ€è¦çš„æ³¨è§£ï¼š</p><ul><li><strong>@Configuration</strong> æŒ‡å®šæ˜¯ä¸€ä¸ªé…ç½®ç±»</li><li><strong>@Conditionalxxx</strong> æŒ‡å®šæ¡ä»¶æˆç«‹çš„æ—¶å€™è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆ</li><li><strong>@AutoConfigureOrder</strong> æŒ‡å®šè‡ªåŠ¨é…ç½®ç±»çš„é¡ºåº</li><li><strong>@AutoConfigureAfter</strong></li><li><strong>@Bean</strong> ç»™å®¹å™¨æ·»åŠ ç»„ä»¶</li><li><strong>@ConfigurationProperties(prefix = &quot;&quot;)</strong> ç»‘å®šç›¸å…³çš„é…ç½®</li><li><strong>@EnableConfigurationProperties</strong> è®©xxxPropertiesç”Ÿæ•ˆåŠ å…¥åˆ°å®¹å™¨ä¸­</li></ul><p>åŠ å…¥åˆ°META-INF-factoriesé‡Œé¢ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># Initializers</span>
<span class="token key attr-name">org.springframework.context.ApplicationContextInitializer</span><span class="token punctuation">=</span><span class="token value attr-value">\
org.springframework.boot.autoconfigure.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¼•å…¥æ¨¡å¼ï¼š</p><p>å¯åŠ¨å™¨ä¾èµ–è‡ªåŠ¨æ¨¡å¼ï¼Œåªéœ€å¼•å…¥starterå³å¯</p><p>æ¨èå‘½åï¼šxxx-spring-boot-starter</p><figure><img src="data:image/webp;base64,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" alt="64" tabindex="0" loading="lazy"><figcaption>64</figcaption></figure><p>åˆ›å»ºä¸€ä¸ªç©ºå·¥ç¨‹</p><p>åˆ›å»ºä¸€ä¸ªmodel</p><figure><img src="/Computer-Science-Learn-Notes/assets/65-08d71494.webp" alt="65" tabindex="0" loading="lazy"><figcaption>65</figcaption></figure><p>åˆ›å»ºä¸€ä¸ªspringbootInitialize</p><figure><img src="/Computer-Science-Learn-Notes/assets/66-5b4188f2.webp" alt="66" tabindex="0" loading="lazy"><figcaption>66</figcaption></figure><h2 id="springbootç¼“å­˜åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#springbootç¼“å­˜åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> SpringBootç¼“å­˜åŸºæœ¬ä½¿ç”¨</h2><p>åº”ç”¨--ç¼“å­˜--æ•°æ®åº“çš„å…³ç³»</p><figure><img src="/Computer-Science-Learn-Notes/assets/67-4dc57f34.webp" alt="67" tabindex="0" loading="lazy"><figcaption>67</figcaption></figure><p>å‡ ä¸ªé‡è¦çš„ç¼“å­˜æ³¨è§£ï¼š</p><table><thead><tr><th>Cache</th><th>ç¼“å­˜æ¥å£ï¼Œå®šä¹‰ç¼“å­˜æ“ä½œã€‚å®ç°æœ‰ï¼šRedisCacheã€EhCacheCacheã€ConcurrentMapCacheç­‰</th></tr></thead><tbody><tr><td>CacheManager</td><td>ç¼“å­˜ç®¡ç†å™¨ï¼Œç®¡ç†å„ç§ç¼“å­˜ï¼ˆCacheï¼‰ç»„ä»¶</td></tr><tr><td>@Cacheable</td><td>ä¸»è¦é’ˆå¯¹æ–¹æ³•é…ç½®ï¼Œèƒ½å¤Ÿæ ¹æ®æ–¹æ³•çš„è¯·æ±‚å‚æ•°å¯¹å…¶ç»“æœè¿›è¡Œç¼“å­˜</td></tr><tr><td>@CacheEvict</td><td>æ¸…ç©ºç¼“å­˜</td></tr><tr><td>@CachePut</td><td>ä¿è¯æ–¹æ³•è¢«è°ƒç”¨ï¼Œåˆå¸Œæœ›ç»“æœè¢«ç¼“å­˜ã€‚</td></tr><tr><td>@EnableCaching</td><td>å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜</td></tr><tr><td>keyGenerator</td><td>ç¼“å­˜æ•°æ®æ—¶keyç”Ÿæˆç­–ç•¥</td></tr><tr><td>serialize</td><td>ç¼“å­˜æ•°æ®æ—¶valueåºåˆ—åŒ–ç­–ç•¥</td></tr></tbody></table><p>ç¼“å­˜çš„spel</p><table><thead><tr><th>åå­—</th><th>ä½ç½®</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>methodName</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„æ–¹æ³•å</td><td>#root.methodName</td></tr><tr><td>method</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„æ–¹æ³•</td><td>#<a href="http://root.method.name" target="_blank" rel="noopener noreferrer">root.method.name<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td>target</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„ç›®æ ‡å¯¹è±¡</td><td>#root.target</td></tr><tr><td>targetClass</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„ç›®æ ‡å¯¹è±¡ç±»</td><td>#root.targetClass</td></tr><tr><td>args</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨</td><td>#root.args[0]</td></tr><tr><td>caches</td><td>root object</td><td>å½“å‰æ–¹æ³•è°ƒç”¨ä½¿ç”¨çš„ç¼“å­˜åˆ—è¡¨ï¼ˆå¦‚@Cacheable(value={&quot;cache1&quot;, &quot;cache2&quot;})ï¼‰ï¼Œåˆ™æœ‰ä¸¤ä¸ªcache</td><td>#root.caches[0].name</td></tr><tr><td><em>argument name</em></td><td>evaluation context</td><td>æ–¹æ³•å‚æ•°çš„åå­—. å¯ä»¥ç›´æ¥ #å‚æ•°å ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ #p0æˆ–#a0 çš„å½¢å¼ï¼Œ0ä»£è¡¨å‚æ•°çš„ç´¢å¼•ï¼›</td><td>#iban ã€ #a0 ã€ #p0</td></tr><tr><td>result</td><td>evaluation context</td><td>æ–¹æ³•æ‰§è¡Œåçš„è¿”å›å€¼ï¼ˆä»…å½“æ–¹æ³•æ‰§è¡Œä¹‹åçš„åˆ¤æ–­æœ‰æ•ˆï¼Œå¦‚â€˜unlessâ€™ï¼Œâ€™cache putâ€™çš„è¡¨è¾¾å¼ â€™cache evictâ€™çš„è¡¨è¾¾å¼beforeInvocation=falseï¼‰</td><td>#result</td></tr></tbody></table><h3 id="åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> åŸºæœ¬ä½¿ç”¨</h3><p>åœ¨ä¸»ç±»å¼€å¯**@EnableCaching**ç¼“å­˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;cn.zhiyucs.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableCaching</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootCache01Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootCache01Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦ç¼“å­˜çš„æ–¹æ³•å¼€å¯**@Cacheable**ï¼šï¼ˆä»‹ç»è§æ³¨é‡Šï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * @Cacheable :å°†æ–¹æ³•ç»“æœæ”¾å…¥ç¼“å­˜ï¼Œä»¥åè¦æœ‰ç›¸åŒçš„æ•°æ®ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œä¸ç”¨è°ƒæ–¹æ³•
     * CacheManager ç®¡ç†å¤šä¸ªcacheç»„ä»¶ï¼Œå¯¹ç¼“å­˜çš„çœŸæ­£CRUDæ“ä½œå†cacheç»„ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªç¼“å­˜éƒ½æœ‰è‡ªå·±å”¯ä¸€çš„åå­—
     * @Cacheableå‡ ä¸ªå±æ€§ï¼š
     *      cacheNames/value: æŒ‡å®šç¼“å­˜ç»„ä»¶çš„åå­—
     *      key: ç¼“å­˜æ•°æ®ä½¿ç”¨çš„keyï¼Œé»˜è®¤æ˜¯ä½¿ç”¨å‚æ•°æ–¹æ³•å‚æ•°çš„å€¼ï¼Œ 1-æ–¹æ³•çš„è¿”å›å€¼
     *      keyGenerator: keyçš„ç”Ÿæˆå™¨ï¼Œå¯ä»¥è‡ªå·±æŒ‡å®škeyçš„ç”Ÿæˆå™¨çš„ç»„ä»¶id
     *          key / keyGenerator äºŒé€‰ä¸€
     *      cacheManager: æŒ‡å®šç¼“å­˜ç®¡ç†å™¨/ç¼“å­˜è§£æå™¨ï¼ˆcacheResolverï¼‰
     *      condition: æŒ‡å®šç¬¦åˆæ¡ä»¶ä¸‹æ‰ç¼“å­˜
     *      unless: å¦å®šç¼“å­˜,å½“unlessæŒ‡å®šçš„æ¡ä»¶ä¸ºtrueï¼Œæ–¹æ³•çš„è¿”å›å€¼å°±ä¸ä¼šè¢«ç¼“å­˜
     *          eg. unless = &quot;#result == null&quot; æ•°æ®ä¸ºç©ºä¸ç¼“å­˜
     *      sync: æ˜¯å¦ä½¿ç”¨å¼‚æ­¥æ¨¡å¼
     * <span class="token keyword">@param</span> <span class="token parameter">id</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;emp&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>condition <span class="token operator">=</span> <span class="token string">&quot;#id&gt;0&quot;</span><span class="token punctuation">,</span>unless <span class="token operator">=</span> <span class="token string">&quot;#result == null&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getEmp</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç¼“å­˜æµ‹è¯•ä¸“ä¸šSOUT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Employee</span> emp <span class="token operator">=</span> employeeMapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> emp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®åº“æ–¹é¢ï¼šå¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå¼€å¯æ‰“å°SQLï¼š</p><p>æ‰“å°SQLï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">logging.level.cn.zhiyucs.mapper</span><span class="token punctuation">=</span><span class="token value attr-value">debug</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‡ ä¸ªå±æ€§ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#å‡ ä¸ªå±æ€§ä»‹ç»" aria-hidden="true">#</a> å‡ ä¸ªå±æ€§ä»‹ç»</h3><p>cacheNames/value: æŒ‡å®šç¼“å­˜ç»„ä»¶çš„åå­—ï¼Œå°†æ–¹æ³•çš„è¿”å›ç»“æœæ”¾åœ¨å“ªä¸ªç¼“å­˜ä¸­ï¼Œæ˜¯æ•°ç»„çš„æ–¹å¼ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ª</p><p>condition #a0&gt;1çš„æ„æ€æ˜¯å½“ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼å¤§äº1æ‰ç”Ÿæ•ˆ</p><p>unless åŒç†ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸º2çš„è¯å°±ä¸ä¼šç¼“å­˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;emp&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>key <span class="token operator">=</span> <span class="token string">&quot;keyGenerator&quot;</span><span class="token punctuation">,</span> condition <span class="token operator">=</span> <span class="token string">&quot;#a0&gt;1&quot;</span><span class="token punctuation">,</span>unless <span class="token operator">=</span> <span class="token string">&quot;#a0==2&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>keyçš„ä¸¤ç§æ–¹æ³•ï¼š</strong></p><ul><li>ç›´æ¥æŒ‡å®šï¼š<strong>key = &quot;#root.methodName+&#39;[&#39;+#id+&#39;]&quot;</strong></li><li>ä½¿ç”¨é…ç½®ç±»æŒ‡å®šï¼š</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCacheConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">KeyGenerator</span> <span class="token function">keyGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">KeyGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;[&quot;</span><span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åç›´æ¥è°ƒç”¨å³å¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code> <span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;emp&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>key <span class="token operator">=</span> <span class="token string">&quot;keyGenerator&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†" aria-hidden="true">#</a> ç¼“å­˜è‡ªåŠ¨é…ç½®åŸç†</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">CacheManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span><span class="token class-name">CacheAspectSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">CacheManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;cacheResolver&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">CacheProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">CouchbaseAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">HazelcastAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">HibernateJpaAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">RedisAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">CacheConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">CacheManagerEntityManagerFactoryDependsOnPostProcessor</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CacheAutoConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç±»ä¸»è¦æ˜¯å¯¼å…¥äº†ï¼šCacheConfigurationImportSelectorï¼Œå¯¼å…¥äº†ç¼“å­˜è¦ç”¨çš„ç»„ä»¶</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">CacheConfigurationImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">ImportSelector</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CacheType</span><span class="token punctuation">[</span><span class="token punctuation">]</span> types <span class="token operator">=</span> <span class="token class-name">CacheType</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> imports <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span>types<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> types<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            imports<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">CacheConfigurations</span><span class="token punctuation">.</span><span class="token function">getConfigurationClass</span><span class="token punctuation">(</span>types<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> imports<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»è¦æ˜¯å¯¼å…¥äº†è¿™å‡ ä¸ªç»„ä»¶ï¼šé»˜è®¤ä½¿ç”¨çš„æ˜¯ -- SimpleCacheConfiguration</p><figure><img src="/Computer-Science-Learn-Notes/assets/68-db54ba9c.webp" alt="68" tabindex="0" loading="lazy"><figcaption>68</figcaption></figure><p><strong>SimpleCacheConfiguration</strong>ï¼šç»™å®¹å™¨ä¸­æ³¨å†Œäº†ä¸€ä¸ªcacheManager</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token class-name">ConcurrentMapCacheManager</span> <span class="token function">cacheManager</span><span class="token punctuation">(</span><span class="token class-name">CacheProperties</span> cacheProperties<span class="token punctuation">,</span>
                                       <span class="token class-name">CacheManagerCustomizers</span> cacheManagerCustomizers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ConcurrentMapCacheManager</span> cacheManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentMapCacheManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> cacheNames <span class="token operator">=</span> cacheProperties<span class="token punctuation">.</span><span class="token function">getCacheNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cacheNames<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cacheManager<span class="token punctuation">.</span><span class="token function">setCacheNames</span><span class="token punctuation">(</span>cacheNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cacheManagerCustomizers<span class="token punctuation">.</span><span class="token function">customize</span><span class="token punctuation">(</span>cacheManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿›å…¥<strong>ConcurrentMapCacheManager</strong></p><p>cacheManagerçš„ä½œç”¨æ˜¯ï¼šé€šè¿‡è¿›å…¥<strong>createConcurrentMapCache</strong>æ–¹æ³•ï¼Œå¯çŸ¥è¿™ä¸ªä¸»è¦æ˜¯åˆ›å»ºäº†<strong>ConcurrentMapCache</strong>ç±»å‹çš„ç¼“å­˜ç»„ä»¶</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">public</span> <span class="token class-name">Cache</span> <span class="token function">getCache</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Cache</span> cache <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cacheMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cache <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dynamic<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cacheMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cache <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cacheMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cache <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cache <span class="token operator">=</span> <span class="token function">createConcurrentMapCache</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>cacheMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> cache<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ConcurrentMapCache</strong>çš„ä½œç”¨æ˜¯æŠŠæ•°æ®ä¿å­˜åœ¨ConcurrentMap&lt;Object, Object&gt;ä¸­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ConcurrentMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> store<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">lookup</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä»¥-cacheableä¸ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä»¥-cacheableä¸ºä¾‹" aria-hidden="true">#</a> ä»¥@Cacheableä¸ºä¾‹</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;emp&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>condition <span class="token operator">=</span> <span class="token string">&quot;#id&gt;0&quot;</span><span class="token punctuation">,</span>unless <span class="token operator">=</span> <span class="token string">&quot;#result == null&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œå…ˆå»æŸ¥è¯¢Cacheï¼ˆç¼“å­˜ç»„ä»¶ï¼‰ï¼ŒæŒ‰ç…§cacheNamesæŒ‡å®šçš„åå­—è·å–ï¼šCacheManagerå…ˆè·å–ç›¸åº”çš„ç¼“å­˜ï¼Œç¬¬ä¸€æ¬¡è·å–ç¼“å­˜ä¼šè‡ªåŠ¨åˆ›å»ºå‡ºæ¥ï¼ˆcreateConcurrentMapCache(name)ï¼‰</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">public</span> <span class="token class-name">Cache</span> <span class="token function">getCache</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/69-16392b10.webp" alt="69" tabindex="0" loading="lazy"><figcaption>69</figcaption></figure><ol start="2"><li>CacheæŸ¥æ‰¾ç¼“å­˜çš„å†…å®¹ï¼Œä½¿ç”¨ä¸€ä¸ªkey -- é»˜è®¤æ˜¯æ–¹æ³•çš„å‚æ•°ï¼Œ</li></ol><p>keyæ˜¯æŒ‰ç…§æŸç§ç­–ç•¥ç”Ÿæˆçš„ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨keyGenneratorç”Ÿæˆ -- é»˜è®¤ä½¿ç”¨çš„æ˜¯SimpleKeyGennerator</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ç”Ÿæˆç­–ç•¥</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">generateKey</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SimpleKey</span><span class="token punctuation">.</span><span class="token constant">EMPTY</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Object</span> param <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>param <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>param<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> param<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleKey</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">generateKey</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">EvaluationContext</span> evaluationContext <span class="token operator">=</span> <span class="token function">createEvaluationContext</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> evaluator<span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>methodKey<span class="token punctuation">,</span> evaluationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>keyGenerator<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>method<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/70-c587d13a.webp" alt="70" tabindex="0" loading="lazy"><figcaption>70</figcaption></figure><p>æŸ¥è¯¢ç¼“å­˜çš„æ–¹æ³•ï¼šï¼ˆAbstractValueAdaptingCache.classï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">public</span> <span class="token class-name">ValueWrapper</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> value <span class="token operator">=</span> <span class="token function">lookup</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">toValueWrapper</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>æ²¡æœ‰æŸ¥åˆ°ç¼“å­˜å°±è°ƒç”¨ç›®æ ‡æ–¹æ³•</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">lookup</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/71-9682300e.webp" alt="71" tabindex="0" loading="lazy"><figcaption>71</figcaption></figure><ol start="4"><li>å°†ç›®æ ‡æ–¹æ³•è¿”å›çš„ç»“æœï¼Œæ”¾è¿›ç¼“å­˜ä¸­</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">toStoreValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/72-98d58161.webp" alt="72" tabindex="0" loading="lazy"><figcaption>72</figcaption></figure><p>ç¬¬äºŒæ¬¡å†è®¿é—®æ—¶ï¼šlookupå’ŒgetCacheéƒ½ä¼šè¢«è®¿é—®åˆ°</p><p>lookupæ‰¾åˆ°ç¼“å­˜åä¼šè½¬åˆ° ValueWrapper get(Object key) å¾—åˆ°å€¼ï¼›</p><h3 id="å°ç»“-3" tabindex="-1"><a class="header-anchor" href="#å°ç»“-3" aria-hidden="true">#</a> å°ç»“ï¼š</h3><h4 id="æ ¸å¿ƒ" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒ" aria-hidden="true">#</a> æ ¸å¿ƒï¼š</h4><ol><li><p>ä½¿ç”¨CacheManagerï¼ˆConcurrentMapCacheManagerï¼‰æŒ‰ç…§åå­—å¾—åˆ°Cacheç»„ä»¶ï¼ˆConcurrentMapCacheï¼‰</p></li><li><p>keyä½¿ç”¨çš„æ˜¯keyGenneratorç”Ÿæˆï¼Œé»˜è®¤æ˜¯SimpleKeyGennerator</p></li><li><p>@Cacheableæ ‡æ³¨çš„æ–¹æ³•æ‰§è¡Œå‰å…ˆæ£€æŸ¥ç¼“å­˜ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œé»˜è®¤æŒ‰ç…§å‚æ•°çš„å€¼ä½œä¸ºkeyå»æŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰å°±è¿è¡Œæ–¹æ³•å¹¶å°†ç»“æœæ”¾å…¥ç¼“å­˜ã€‚ ä»¥åå†æ¥è°ƒç”¨å°±ç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®</p></li><li><p>SimpleKeyGenneratorç”Ÿæˆç­–ç•¥ï¼š</p></li></ol><ul><li>å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œkeyå°±ä½¿ç”¨key = new SimpleKey()</li><li>å¦‚æœæœ‰ä¸€ä¸ªå‚æ•°key=å‚æ•°çš„å€¼</li><li>å¦‚æœæœ‰å¤šä¸ªå‚æ•°key = new SimpleKey(params)</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleKeyGenerator</span> <span class="token keyword">implements</span> <span class="token class-name">KeyGenerator</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">generateKey</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/73-4b4a2e7f.webp" alt="73" tabindex="0" loading="lazy"><figcaption>73</figcaption></figure><h4 id="æ€è·¯æ•´ç†" tabindex="-1"><a class="header-anchor" href="#æ€è·¯æ•´ç†" aria-hidden="true">#</a> æ€è·¯æ•´ç†</h4><p>ConcurrentMapCacheManageré€šè¿‡getCacheè·å–åˆ°nameï¼ˆkeyï¼‰</p><ol><li>ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œæ²¡æœ‰ç¼“å­˜çš„æƒ…å†µ</li></ol><p>createConcurrentMapCache -&gt; lookupæ ¹æ®key(keyæœ‰ç”Ÿæˆç­–ç•¥)æŸ¥æ‰¾ç¼“å­˜çš„æ•°æ® -&gt; è°ƒç”¨ç›®æ ‡æ–¹æ³• -&gt; æŠŠæ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆstoreï¼‰é‡Œ(this.store.put(key, toStoreValue(value)))</p><ol start="2"><li>ç¬¬äºŒæ¬¡è®¿é—®</li></ol><figure><img src="/Computer-Science-Learn-Notes/assets/74-e44e2300.webp" alt="74" tabindex="0" loading="lazy"><figcaption>74</figcaption></figure><p>Cache cache = this.cacheMap.get(name);è°ƒå›ç¼“å­˜çš„æ•°æ®-&gt; è¿”å›æ–¹æ³•</p><h2 id="cacheputçš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#cacheputçš„ä½¿ç”¨" aria-hidden="true">#</a> @CachePutçš„ä½¿ç”¨</h2><p><strong>@CachePut</strong>çš„keyå±æ€§æœ‰ä¸¤ç§å†™æ³•ï¼š</p><ul><li>key = &quot;#<a href="http://employee.id" target="_blank" rel="noopener noreferrer">employee.id<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&quot;</li><li>key = &quot;#<a href="http://result.id" target="_blank" rel="noopener noreferrer">result.id<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&quot;</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * @CachePut æ—¢è°ƒç”¨æ–¹æ³•ï¼Œåˆæ›´æ–°ç¼“å­˜
     * ä¿®æ”¹äº†æ•°æ®åº“çš„æŸä¸ªæ•°æ®ï¼ŒåŒæ—¶æ›´æ–°ç¼“å­˜
     * è¿è¡Œæ—¶æœºï¼š
     *  1. å…ˆè°ƒç”¨ç›®æ ‡æ–¹æ³•
     *  2. å°†ç›®æ ‡æ–¹æ³•çš„ç»“æœç¼“å­˜èµ·æ¥
     */</span>
    <span class="token annotation punctuation">@CachePut</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">&quot;#result.id&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">updateEmp</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
        employeeMapper<span class="token punctuation">.</span><span class="token function">updateEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> employee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†å®ç°åŒæ­¥ç¼“å­˜ï¼Œè¿™é‡Œçš„cacheNameså¯ä»¥å’ŒæŸ¥è¯¢æ–¹æ³•çš„ä¸€æ ·ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°æ›´æ–°çš„åŒæ—¶æ›´æ¢ç¼“å­˜çš„å†…å®¹ï¼Œä»è€Œè¾¾åˆ°æŸ¥è¯¢ä¹ŸåŒæ­¥ç¼“å­˜ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;emp&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getEmp</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/75-6fe56989.webp" alt="75" tabindex="0" loading="lazy"><figcaption>75</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/76-d16103c7.webp" alt="76" tabindex="0" loading="lazy"><figcaption>76</figcaption></figure><h2 id="cacheevict-æ¸…é™¤ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#cacheevict-æ¸…é™¤ç¼“å­˜" aria-hidden="true">#</a> @CacheEvict æ¸…é™¤ç¼“å­˜</h2><p>@CacheEvictè¦æ¸…é™¤nameä¸ºempç¼“å­˜ä¸­keyä¸ºidçš„æ‰€æœ‰æ•°æ®</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * @CacheEvict ç¼“å­˜æ¸…é™¤
     * key æŒ‡å®šè¦æ¸…é™¤çš„æ•°æ®
     * allEntries è¦æ¸…é™¤è¿™ä¸ªç¼“å­˜ä¸­çš„æ‰€æœ‰æ•°æ®
     * beforeInvocation = false ç¼“å­˜çš„æ¸…é™¤æ˜¯å¦åœ¨æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œé»˜è®¤æ—¶åœ¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ
     *      å¦‚æœå‡ºç°å¼‚å¸¸å°±ä¸ä¼šæ¸…é™¤
     */</span>
<span class="token annotation punctuation">@CacheEvict</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>key <span class="token operator">=</span> <span class="token string">&quot;#id&quot;</span><span class="token punctuation">,</span> allEntries <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> beforeInvocation <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteEmp</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deleteEmp:&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//        employeeMapper.deleteEmpById(id);</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cachingå’Œ-cacheconfig" tabindex="-1"><a class="header-anchor" href="#cachingå’Œ-cacheconfig" aria-hidden="true">#</a> @Cachingå’Œ@CacheConfig</h2><h3 id="caching" tabindex="-1"><a class="header-anchor" href="#caching" aria-hidden="true">#</a> @Caching</h3><p>â€‹ <strong>@Caching</strong> è¿™ä¸ªcachingå› ä¸ºä½¿ç”¨äº†**@CachePut**æ‰€ä»¥ç¬¬äºŒæ¬¡è¿˜æ˜¯ä¼šæ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœæ‰§è¡Œäº†é€šè¿‡idå’ŒemailæŸ¥è¯¢å°±åœ¨æ‰§è¡Œäº†è¿™ä¸ªæ–¹æ³•åå°±ç›´æ¥æ‰§è¡Œï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•å·²ç»ç¼“å­˜äº†è¿™ä¸ªå†…å®¹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * @Caching å®šä¹‰å¤æ‚çš„ç¼“å­˜è§„åˆ™
     * <span class="token keyword">@param</span> <span class="token parameter">lastName</span>
     * <span class="token keyword">@return</span>
     */</span>
<span class="token annotation punctuation">@Caching</span><span class="token punctuation">(</span>
    cacheable <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">&quot;#lastName&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    put <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@CachePut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">&quot;#result.id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@CachePut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">&quot;#result.email&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getEmpByLastName</span><span class="token punctuation">(</span><span class="token class-name">String</span> lastName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> employeeMapper<span class="token punctuation">.</span><span class="token function">getEmpByLastName</span><span class="token punctuation">(</span>lastName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cacheconfig" tabindex="-1"><a class="header-anchor" href="#cacheconfig" aria-hidden="true">#</a> @CacheConfig</h3><p>ä½¿ç”¨äº†è¿™ä¸ªç›´æ¥ä¹‹åï¼Œä¹‹åçš„æ‰€æœ‰æ³¨è§£ï¼ˆ@Cacheableã€@CachePutï¼‰å°±ä¸ç”¨å†™å·²ç»åœ¨@CacheConfigä¸­å†™äº†çš„å±æ€§</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@CacheConfig</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">)</span> <span class="token comment">//æŠ½å–ç¼“å­˜çš„å…¬å…±é…ç½®</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeService</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ•´åˆç¼“å­˜ä¸­é—´ä»¶redis" tabindex="-1"><a class="header-anchor" href="#æ•´åˆç¼“å­˜ä¸­é—´ä»¶redis" aria-hidden="true">#</a> æ•´åˆç¼“å­˜ä¸­é—´ä»¶Redis</h2><p>å¯¼åŒ…ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®Redisï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¦æ˜¯æœ‰Redisçš„åœ°æ–¹æ³¨å…¥redisï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token class-name">StringRedisTemplate</span> stringRedisTemplate<span class="token punctuation">;</span> <span class="token comment">// æ“ä½œå­—ç¬¦ä¸²</span>
<span class="token annotation punctuation">@Autowired</span>
<span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span> <span class="token comment">// k-væ“ä½œå¯¹è±¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›´æ¥ä½¿ç”¨Redisç±»å‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ValueOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ops <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> msg <span class="token operator">=</span> ops<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡ªå®šä¹‰Redisç±»å‹ï¼ˆJSONç±»å‹ï¼‰ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRedisConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">empRedisTemplate</span><span class="token punctuation">(</span>
            <span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">UnknownHostException</span> <span class="token punctuation">{</span>
        <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> redisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">setDefaultSerializer</span><span class="token punctuation">(</span>redisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> template<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå°±å¯ä»¥æ³¨å…¥è¿™ä¸ªè‡ªå®šä¹‰çš„ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> employeeRedisTemplate<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Employee</span> emp <span class="token operator">=</span> employeeMapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ValueOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> ops <span class="token operator">=</span> employeeRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ops<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/77-10c4166c.webp" alt="77" tabindex="0" loading="lazy"><figcaption>77</figcaption></figure><h2 id="è‡ªå®šä¹‰rediscachemanager" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰rediscachemanager" aria-hidden="true">#</a> è‡ªå®šä¹‰RedisCacheManager</h2><p>åœ¨é…ç½®ç±»ä¸­ç›´æ¥æ·»åŠ å³å¯ï¼šå®ç°åºåˆ—åŒ–è½¬ä¸ºJSONæ ¼å¼</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * ç¼“å­˜ç®¡ç†å™¨
     */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CacheManager</span> <span class="token function">cacheManager</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆå§‹åŒ–ä¸€ä¸ªRedisCacheWriter</span>
    <span class="token class-name">RedisCacheWriter</span> redisCacheWriter <span class="token operator">=</span> <span class="token class-name">RedisCacheWriter</span><span class="token punctuation">.</span><span class="token function">nonLockingRedisCacheWriter</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è®¾ç½®CacheManagerçš„å€¼åºåˆ—åŒ–æ–¹å¼ä¸ºjsonåºåˆ—åŒ–</span>
    <span class="token class-name">RedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> jsonSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericJackson2JsonRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RedisSerializationContext<span class="token punctuation">.</span>SerializationPair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> pair <span class="token operator">=</span> <span class="token class-name">RedisSerializationContext<span class="token punctuation">.</span>SerializationPair</span>
        <span class="token punctuation">.</span><span class="token function">fromSerializer</span><span class="token punctuation">(</span>jsonSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RedisCacheConfiguration</span> defaultCacheConfig<span class="token operator">=</span> <span class="token class-name">RedisCacheConfiguration</span><span class="token punctuation">.</span><span class="token function">defaultCacheConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">serializeValuesWith</span><span class="token punctuation">(</span>pair<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è®¾ç½®é»˜è®¤è¶…è¿‡æœŸæ—¶é—´æ˜¯30ç§’</span>
    defaultCacheConfig<span class="token punctuation">.</span><span class="token function">entryTtl</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//åˆå§‹åŒ–RedisCacheManager</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RedisCacheManager</span><span class="token punctuation">(</span>redisCacheWriter<span class="token punctuation">,</span> defaultCacheConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/78-1045b17e.webp" alt="78" tabindex="0" loading="lazy"><figcaption>78</figcaption></figure><p>æœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼š</p><p>ç¬¬ä¸€ç§å°±æ˜¯å¸¸ç”¨çš„æ³¨è§£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">&quot;dept&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Department</span> <span class="token function">getDeptById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥è¯¢éƒ¨é—¨&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Department</span> department <span class="token operator">=</span> departmentMapper<span class="token punctuation">.</span><span class="token function">getDeptById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> department<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§æ˜¯æ³¨å…¥CacheManageråå¾—åˆ°ç¼“å­˜ï¼Œè¿›è¡ŒAPIè°ƒç”¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token class-name">CacheManager</span> cacheManager<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">Department</span> <span class="token function">getDeptById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥è¯¢éƒ¨é—¨&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Department</span> department <span class="token operator">=</span> departmentMapper<span class="token punctuation">.</span><span class="token function">getDeptById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Cache</span> dept <span class="token operator">=</span> cacheManager<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token string">&quot;dept&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dept<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> department<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> department<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/79-b03064ed.webp" alt="79" tabindex="0" loading="lazy"><figcaption>79</figcaption></figure><h4 id="æ‰©å±•cachemanagerçš„ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•cachemanagerçš„ç”¨æ³•" aria-hidden="true">#</a> æ‰©å±•CacheManagerçš„ç”¨æ³•</h4><p>åˆ¤æ–­åœ¨Redisä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªnosqlï¼Œå¦‚æœæœ‰å°±ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸æŸ¥æ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰å°±æŸ¥æ•°æ®åº“ç¼“å­˜æ•°æ®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Department</span> <span class="token function">getDeptById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Department</span> dp<span class="token punctuation">;</span>
    <span class="token class-name">Cache</span> dept <span class="token operator">=</span> cacheManager<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token string">&quot;dept&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dp <span class="token operator">=</span> dept<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Department</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dp <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp <span class="token operator">=</span> departmentMapper<span class="token punctuation">.</span><span class="token function">getDeptById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        dept<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> dp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springsecurityçš„ç®€å•ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#springsecurityçš„ç®€å•ä½¿ç”¨" aria-hidden="true">#</a> SpringSecurityçš„ç®€å•ä½¿ç”¨</h2><p>å¯¼åŒ…ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å»ºç«‹ä¸€ä¸ªé…ç½®ç±»ï¼š</p><p>@EnableWebSecurity å¼€å¯å®‰å…¨é…ç½®ï¼Œå®ƒé‡Œé¢æœ‰@Configuration</p><p>ç»§æ‰¿ï¼š WebSecurityConfigurerAdapter</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@EnableWebSecurity
public class MySecurityConfig extends WebSecurityConfigurerAdapter {
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å®šä¹‰æˆæƒè§„åˆ™å’Œå®šä¹‰è®¤è¯è§„åˆ™</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// å®šä¹‰æˆæƒè§„åˆ™
@Override
protected void configure(HttpSecurity http) throws Exception {
    //        super.configure(http);
    // å®šåˆ¶æˆæƒè§„åˆ™
    http.authorizeRequests().antMatchers(&quot;/&quot;).permitAll()
        .antMatchers(&quot;/level1/**&quot;).hasRole(&quot;VIP1&quot;)
        .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;VIP2&quot;)
        .antMatchers(&quot;/level3/**&quot;).hasRole(&quot;VIP3&quot;);
    // å¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»å½•åŠŸèƒ½
    // /loginæ¥åˆ°ç™»å½•é¡µ
    // é‡å®šå‘åˆ°/login/errorç™»å½•å¤±è´¥
    // å¦‚æœæ²¡æœ‰ç™»å½•æƒé™å°±ä¼šæ¥åˆ°ç™»å½•é¡µé¢
    http.formLogin();
    // å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€åŠŸèƒ½
    // è®¿é—®/loginæ³¨é”€ç”¨æˆ·ï¼Œæ¸…ç©ºsession
    // æ³¨é”€æˆåŠŸä¼šè¿”å›/login?logout
    http.logout().logoutSuccessUrl(&quot;/&quot;);
}
// å®šä¹‰è®¤è¯è§„åˆ™
@Override
protected void configure(AuthenticationManagerBuilder auth) throws Exception {
    //super.configure(auth);
    auth.inMemoryAuthentication().passwordEncoder(NoOpPasswordEncoder.getInstance())
        .withUser(&quot;admin&quot;).password(&quot;123&quot;).roles(&quot;VIP1&quot;,&quot;VIP2&quot;)
        .and()
        .withUser(&quot;lisi&quot;).password(&quot;123&quot;).roles(&quot;VIP2&quot;, &quot;VIP3&quot;)
        .and()
        .withUser(&quot;zhiyu&quot;).password(&quot;123&quot;).roles(&quot;VIP1&quot;, &quot;VIP3&quot;);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="thymeleafæ•´åˆspringsecurity" tabindex="-1"><a class="header-anchor" href="#thymeleafæ•´åˆspringsecurity" aria-hidden="true">#</a> Thymeleafæ•´åˆSpringSecurity</h3><p>å¯¼åŒ…ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.thymeleaf.extras<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>thymeleaf-extras-springsecurity5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å‰ç«¯åŠ å…¥é¢å¤–çš„xmlnsï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">xmlns:</span>sec</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org/extras/spring-security<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ¤å®šæ˜¯å¦æˆæƒäº†ï¼š<strong>sec:authorize=&quot;!isAuthenticated()&quot;</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">sec:</span>authorize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!isAuthenticated()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ¸¸å®¢æ‚¨å¥½ï¼Œå¦‚æœæƒ³æŸ¥çœ‹æ­¦æ—ç§˜ç± <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/login}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è¯·ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è·å–æˆæƒåï¼š<strong>sec:authentication=&quot;name&quot;</strong></li><li>è·å–æˆæƒçš„æƒé™åï¼š<strong>sec:authentication=&quot;principal.authorities&quot;</strong></li><li>æ³¨é”€ç™»å½•ï¼š<strong>th:action=&quot;@{/logout}&quot;</strong></li><li>åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™ä¸ªæƒé™ï¼š<strong>sec:authorize=&quot;hasRole(&#39;æƒé™åå­—&#39;)&quot;</strong></li></ul><h3 id="è®°ä½æˆ‘" tabindex="-1"><a class="header-anchor" href="#è®°ä½æˆ‘" aria-hidden="true">#</a> <strong>è®°ä½æˆ‘</strong></h3><p>ç›´æ¥åœ¨æˆæƒè§„åˆ™çš„configureé…ç½®å³å¯</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// å¼€å¯è®°ä½æˆ‘åŠŸèƒ½</span>
<span class="token comment">// ç™»å½•æˆåŠŸå°†cookieå‘ç»™æµè§ˆå™¨ä¿å­˜ï¼Œä»¥åç™»å½•å°±ä¼šå¸¦ä¸Šè¿™ä¸ªcookie(14å¤©)</span>
http<span class="token punctuation">.</span><span class="token function">rememberMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢" aria-hidden="true">#</a> å®šåˆ¶è‡ªå·±çš„ç™»å½•é¡µé¢</h3><p>ç›´æ¥åœ¨æˆæƒè§„åˆ™çš„configureé…ç½®ï¼Œ</p><p>å‰ç«¯ä½¿ç”¨postæ–¹å¼ï¼šå¤„ç†å‡­æ®ï¼Œå¦‚æœæœ‰æ•ˆï¼Œåˆ™å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯</p><p>ä½¿ç”¨getï¼šå¤„ç†ç™»å½•è¡¨æ ¼</p><p>å¦‚æœactionå®šä½åˆ°userlogin/errorï¼Œæ–¹æ³•getï¼šé‡å®šå‘åˆ°æ­¤å¤„ä»¥è¿›è¡Œå¤±è´¥çš„èº«ä»½éªŒè¯å°è¯•</p><p>å¦‚æœactionå®šä½åˆ°userlogin/logoutï¼Œæ–¹æ³•getï¼šæˆåŠŸæ³¨é”€åé‡å®šå‘åˆ°æ­¤å¤„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>http<span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">usernameParameter</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">passwordParameter</span><span class="token punctuation">(</span><span class="token string">&quot;pwd&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">&quot;/userlogin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é»˜è®¤postè¯·æ±‚çš„/loginæ˜¯å¤„ç†ç™»å½•</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/userlogin}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            ç”¨æˆ·å:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
            å¯†ç :<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pwd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> è®°ä½æˆ‘ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç™»é™†<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="shiroçš„ç®€å•ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#shiroçš„ç®€å•ä½¿ç”¨" aria-hidden="true">#</a> Shiroçš„ç®€å•ä½¿ç”¨</h2><p>Shiroçš„åŠŸèƒ½æ¡†æ¶å›¾ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/80-c7357884.webp" alt="80" tabindex="0" loading="lazy"><figcaption>80</figcaption></figure><p>å¯¼åŒ…ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>shiro-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ç¯å¢ƒè®¾ç½®ï¼ˆçœç•¥è·³è½¬ç½‘é¡µçš„controllerï¼‰ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/81-80040e64.webp" alt="81" tabindex="0" loading="lazy"><figcaption>81</figcaption></figure><p>æ³¨ï¼šä½¿ç”¨Thymeleafæ¨¡æ¿çš„æ—¶å€™éœ€è¦ç”¨åˆ°è·³è½¬é¡µé¢@{}æ³¨æ„ï¼Œå¦‚ï¼šth:href=&quot;@{/alogin}&quot;ï¼Œé‡Œé¢å†…å®¹éœ€è¦æ˜¯controllerçš„å†…å®¹</p><h3 id="å¼€å§‹é…ç½®ä¸€ä¸ªshiro" tabindex="-1"><a class="header-anchor" href="#å¼€å§‹é…ç½®ä¸€ä¸ªshiro" aria-hidden="true">#</a> å¼€å§‹é…ç½®ä¸€ä¸ªshiro</h3><p>Shiro æ¶æ„åŒ…å«ä¸‰ä¸ªä¸»è¦çš„ç†å¿µï¼šSubject è®¤è¯ä¸»ä½“ï¼ŒSecurityManager å®‰å…¨ç®¡ç†å™¨å’Œ Realm åŸŸå¯¹è±¡</p><ul><li>ShiroFilterFactoryBean ShiroFilteræ˜¯æ•´ä¸ªShiroçš„å…¥å£ç‚¹ï¼Œç”¨äºæ‹¦æˆªéœ€è¦å®‰å…¨æ§åˆ¶çš„è¯·æ±‚è¿›è¡Œå¤„ç†</li><li>DefaultWebSecurityManager å®‰å…¨ç®¡ç†å™¨</li><li>Realm åŸŸå¯¹è±¡</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShiroConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">ShiroFilterFactoryBean</span> <span class="token function">shiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;securityManager&quot;</span><span class="token punctuation">)</span> <span class="token class-name">DefaultWebSecurityManager</span> securityManager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ShiroFilterFactoryBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setSecurityManager</span><span class="token punctuation">(</span>securityManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½®æ— æƒé™æ—¶è·³è½¬çš„ url;</span>
        shiroFilterFactoryBean<span class="token punctuation">.</span><span class="token function">setUnauthorizedUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/notRole&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token doc-comment comment">/**
         * anon
         * æ— å‚ï¼Œå¼€æ”¾æƒé™ï¼Œå¯ä»¥ç†è§£ä¸ºåŒ¿åç”¨æˆ·æˆ–æ¸¸å®¢
         * authc
         * æ— å‚ï¼Œéœ€è¦è®¤è¯
         * logout
         * æ— å‚ï¼Œæ³¨é”€ï¼Œæ‰§è¡Œåä¼šç›´æ¥è·³è½¬åˆ°shiroFilterFactoryBean.setLoginUrl(); è®¾ç½®çš„ url
         * authcBasic
         * æ— å‚ï¼Œè¡¨ç¤º httpBasic è®¤è¯
         * user
         * æ— å‚ï¼Œè¡¨ç¤ºå¿…é¡»å­˜åœ¨ç”¨æˆ·ï¼Œå½“ç™»å…¥æ“ä½œæ—¶ä¸åšæ£€æŸ¥
         * ssl
         * æ— å‚ï¼Œè¡¨ç¤ºå®‰å…¨çš„URLè¯·æ±‚ï¼Œåè®®ä¸º https
         * perms[user]
         * å‚æ•°å¯å†™å¤šä¸ªï¼Œè¡¨ç¤ºéœ€è¦æŸä¸ªæˆ–æŸäº›æƒé™æ‰èƒ½é€šè¿‡ï¼Œå¤šä¸ªå‚æ•°æ—¶å†™ perms[&quot;user, admin&quot;]ï¼Œå½“æœ‰å¤šä¸ªå‚æ•°æ—¶å¿…é¡»æ¯ä¸ªå‚æ•°éƒ½é€šè¿‡æ‰ç®—é€šè¿‡
         * roles[admin]
         * å‚æ•°å¯å†™å¤šä¸ªï¼Œè¡¨ç¤ºæ˜¯æŸä¸ªæˆ–æŸäº›è§’è‰²æ‰èƒ½é€šè¿‡ï¼Œå¤šä¸ªå‚æ•°æ—¶å†™ roles[&quot;adminï¼Œuser&quot;]ï¼Œå½“æœ‰å¤šä¸ªå‚æ•°æ—¶å¿…é¡»æ¯ä¸ªå‚æ•°éƒ½é€šè¿‡æ‰ç®—é€šè¿‡
         * rest[user]
         * æ ¹æ®è¯·æ±‚çš„æ–¹æ³•ï¼Œç›¸å½“äº perms[user:method]ï¼Œå…¶ä¸­ method ä¸º postï¼Œgetï¼Œdelete ç­‰
         * port[8081]
         * å½“è¯·æ±‚çš„URLç«¯å£ä¸æ˜¯8081æ—¶ï¼Œè·³è½¬åˆ°schemal://serverName:8081?queryString å…¶ä¸­ schmal æ˜¯åè®® http æˆ– https ç­‰ç­‰ï¼ŒserverName æ˜¯ä½ è®¿é—®çš„ Hostï¼Œ8081 æ˜¯ Port ç«¯å£ï¼ŒqueryString æ˜¯ä½ è®¿é—®çš„ URL é‡Œçš„ ? åé¢çš„å‚æ•°
         */</span>
        <span class="token comment">// è®¾ç½®æ‹¦æˆªå™¨</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> filterMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;anon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;/alogin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;perms[user:add]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;/ulogin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;authc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setFilterChainDefinitionMap</span><span class="token punctuation">(</span>filterMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setLoginUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">DefaultWebSecurityManager</span> <span class="token function">securityManager</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;userRealm&quot;</span><span class="token punctuation">)</span> <span class="token class-name">UserRealm</span> userRealm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DefaultWebSecurityManager</span> securityManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultWebSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        securityManager<span class="token punctuation">.</span><span class="token function">setRealm</span><span class="token punctuation">(</span>userRealm<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> securityManager<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">UserRealm</span> <span class="token function">userRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŸŸå¯¹è±¡</strong>çš„åˆ›å»º</p><ul><li>ç»§æ‰¿AuthorizingRealm</li><li>ä¸»è¦åˆ†ä¸ºï¼šæˆæƒå’Œè®¤è¯</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRealm</span> <span class="token keyword">extends</span> <span class="token class-name">AuthorizingRealm</span> <span class="token punctuation">{</span>
    <span class="token comment">// æˆæƒ</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">AuthorizationInfo</span> <span class="token function">doGetAuthorizationInfo</span><span class="token punctuation">(</span><span class="token class-name">PrincipalCollection</span> principals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œäº†æˆæƒ...........&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SimpleAuthorizationInfo</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthorizationInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åªè¦ç™»å½•å°±æœ‰æƒé™</span>
<span class="token comment">//        info.addStringPermission(&quot;user:add&quot;);</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> principals<span class="token punctuation">.</span><span class="token function">getPrimaryPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> role <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getRole</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//éœ€è¦å°† role å°è£…åˆ° Set ä½œä¸º info.setRoles() çš„å‚æ•°</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®è¯¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²</span>
        <span class="token comment">//å°†ç”¨æˆ·å¯¹åº”çš„è§’è‰²å’Œæƒé™ä¿¡æ¯ æ”¾åˆ°æƒé™å™¨ä¸­</span>
        info<span class="token punctuation">.</span><span class="token function">addStringPermissions</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
        info<span class="token punctuation">.</span><span class="token function">setRoles</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> info<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è®¤è¯</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">AuthenticationInfo</span> <span class="token function">doGetAuthenticationInfo</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationToken</span> token<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">{</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œäº†è®¤è¯............&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        ä¸€èˆ¬åœ¨æ•°æ®åº“ä¸­å–è´¦å·å’Œå¯†ç </span>
        <span class="token class-name">UsernamePasswordToken</span> userToken <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">)</span> token<span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> userToken<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getUserByName</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">// SimpleAuthenticationInfoå‚æ•°ï¼š</span>
        <span class="token comment">// principle è®¤è¯å®ä½“ï¼Œå¯ä»¥æ˜¯usernameï¼Œä¹Ÿå¯ä»¥æ˜¯å®ä½“ç±»</span>
        <span class="token comment">// credentials å¯†ç </span>
        <span class="token comment">// realmName å½“å‰realmå¯¹è±¡çš„nameï¼Œç›´æ¥è°ƒç”¨çˆ¶ç±»çš„getNameæ–¹æ³•å³å¯</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthenticationInfo</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨æ§åˆ¶å±‚çš„è¯·æ±‚æŠŠæ•°æ®ä¼ è¾“ç»™Shiroå’Œæ³¨é”€</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/loginAuth&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">loginAuth</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>
                        <span class="token annotation punctuation">@PathParam</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span>
                        <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–å½“å‰ç”¨æˆ·</span>
    <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å°è£…ç”¨æˆ·çš„æ•°æ®</span>
    <span class="token class-name">UsernamePasswordToken</span> token <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ‰§è¡Œç™»å½•çš„æ–¹æ³•</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        subject<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnknownAccountException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”¨æˆ·åé”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IncorrectCredentialsException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¯†ç é”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/logout&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ResultMap</span> <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ³¨é”€</span>
    subject<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> resultMap<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">&quot;æˆåŠŸæ³¨é”€ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ•´åˆshiroå¯åŠ¨å™¨" tabindex="-1"><a class="header-anchor" href="#æ•´åˆshiroå¯åŠ¨å™¨" aria-hidden="true">#</a> æ•´åˆShiroå¯åŠ¨å™¨</h3><p>å¯¼åŒ…ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>shiro-spring-boot-web-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é¡¹ç›®ç»“æ„ï¼šå’Œsecurityæµ‹è¯•çš„æ—¶å€™ä¸€è‡´</p><figure><img src="/Computer-Science-Learn-Notes/assets/82-51429269.webp" alt="82" tabindex="0" loading="lazy"><figcaption>82</figcaption></figure><p>åŒæ ·çš„é…ç½®ç±»ï¼šï¼ˆåŠ å…¥äº†MD5ç›å€¼åŠ å¯†ç®—æ³•ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShiroConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®ç”¨äºåŒ¹é…å¯†ç çš„CredentialsMatcher</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">HashedCredentialsMatcher</span> <span class="token function">credentialsMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">HashedCredentialsMatcher</span> credentialsMatcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashedCredentialsMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è¿™é‡Œæ˜¯ä½¿ç”¨sha256åŠ å¯†</span>
        <span class="token comment">/*credentialsMatcher.setHashAlgorithmName(Sha256Hash.ALGORITHM_NAME);  // æ•£åˆ—ç®—æ³•ï¼Œè¿™é‡Œä½¿ç”¨æ›´å®‰å…¨çš„sha256ç®—æ³•
        credentialsMatcher.setStoredCredentialsHexEncoded(false);  // æ•°æ®åº“å­˜å‚¨çš„å¯†ç å­—æ®µä½¿ç”¨HEXè¿˜æ˜¯BASE64æ–¹å¼åŠ å¯†
        credentialsMatcher.setHashIterations(1024);  // æ•£åˆ—è¿­ä»£æ¬¡æ•°*/</span>
        <span class="token comment">//å¦‚æœMD5å¯†ç åŠ å¯†,å¯ä»¥æ‰“å¼€ä¸‹é¢é…ç½®</span>
        <span class="token comment">//åŠ å¯†ç®—æ³•çš„åç§°</span>
        credentialsMatcher<span class="token punctuation">.</span><span class="token function">setHashAlgorithmName</span><span class="token punctuation">(</span><span class="token string">&quot;MD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é…ç½®åŠ å¯†çš„æ¬¡æ•°</span>
        credentialsMatcher<span class="token punctuation">.</span><span class="token function">setHashIterations</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ˜¯å¦å­˜å‚¨ä¸º16è¿›åˆ¶</span>
        credentialsMatcher<span class="token punctuation">.</span><span class="token function">setStoredCredentialsHexEncoded</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> credentialsMatcher<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// é…ç½®urlè¿‡æ»¤å™¨</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">ShiroFilterChainDefinition</span> <span class="token function">shiroFilterChainDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DefaultShiroFilterChainDefinition</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultShiroFilterChainDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">addPathDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;/level1/**&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;perms[st:vip1]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">addPathDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;/level2/**&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;perms[st:vip2]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">addPathDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;/level3/**&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;perms[st:vip3]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">addPathDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;anon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">addPathDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;anon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> filter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">DefaultWebSecurityManager</span> <span class="token function">securityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DefaultWebSecurityManager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultWebSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        manager<span class="token punctuation">.</span><span class="token function">setRealm</span><span class="token punctuation">(</span><span class="token function">userRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> manager<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// é…ç½®è‡ªå®šä¹‰Realm</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">UserRealm</span> <span class="token function">userRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserRealm</span> userRealm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userRealm<span class="token punctuation">.</span><span class="token function">setCredentialsMatcher</span><span class="token punctuation">(</span><span class="token function">credentialsMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userRealm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¤è¯å’Œæˆæƒï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRealm</span> <span class="token keyword">extends</span> <span class="token class-name">AuthorizingRealm</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>
<span class="token comment">//    æˆæƒ</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">AuthorizationInfo</span> <span class="token function">doGetAuthorizationInfo</span><span class="token punctuation">(</span><span class="token class-name">PrincipalCollection</span> principals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æˆæƒ........................&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SimpleAuthorizationInfo</span> authorizationInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthorizationInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è§’è‰²</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> roles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æƒé™</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> permissions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æµ‹è¯•ç”¨æƒé™</span>
        <span class="token class-name">String</span> role <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getRole</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roles<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        permissions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
        authorizationInfo<span class="token punctuation">.</span><span class="token function">setRoles</span><span class="token punctuation">(</span>roles<span class="token punctuation">)</span><span class="token punctuation">;</span>
        authorizationInfo<span class="token punctuation">.</span><span class="token function">setStringPermissions</span><span class="token punctuation">(</span>permissions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> authorizationInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">//    è®¤è¯</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">AuthenticationInfo</span> <span class="token function">doGetAuthenticationInfo</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationToken</span> token<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è®¤è¯........................&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> token<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getUserByName</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnknownAccountException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token comment">//        MD5ç›å€¼åŠ å¯†ByteSource.Util.bytes(username)</span>
        <span class="token class-name">SimpleAuthenticationInfo</span> authenticationInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthenticationInfo</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ByteSource<span class="token punctuation">.</span>Util</span><span class="token punctuation">.</span><span class="token function">bytes</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> authenticationInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ§åˆ¶å±‚åˆ¤æ–­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/loginAuth&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">loginAuth</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>
                        <span class="token annotation punctuation">@PathParam</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span>
                        <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–å½“å‰ç”¨æˆ·</span>
    <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å°è£…ç”¨æˆ·çš„æ•°æ®</span>
    <span class="token class-name">UsernamePasswordToken</span> token <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ‰§è¡Œç™»å½•çš„æ–¹æ³•</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        subject<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;welcome&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnknownAccountException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”¨æˆ·åé”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token constant">PREFIX</span><span class="token operator">+</span><span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IncorrectCredentialsException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¯†ç é”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token constant">PREFIX</span><span class="token operator">+</span><span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•" aria-hidden="true">#</a> æ‰©å±•ï¼š</h3><h4 id="shiroé»˜è®¤è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#shiroé»˜è®¤è¿‡æ»¤å™¨" aria-hidden="true">#</a> shiroé»˜è®¤è¿‡æ»¤å™¨</h4><ul><li>anon AnonymousFilter æŒ‡å®šurlå¯ä»¥åŒ¿åè®¿é—®</li><li>authc FormAuthenticationFilter æŒ‡å®šurléœ€è¦formè¡¨å•ç™»å½•ï¼Œé»˜è®¤ä¼šä»è¯·æ±‚ä¸­è·å–usernameã€password,rememberMeç­‰å‚æ•°å¹¶å°è¯•ç™»å½•ï¼Œå¦‚æœç™»å½•ä¸äº†å°±ä¼šè·³è½¬åˆ°loginUrlé…ç½®çš„è·¯å¾„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªè¿‡æ»¤å™¨åšé»˜è®¤çš„ç™»å½•é€»è¾‘ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±åœ¨æ§åˆ¶å™¨å†™ç™»å½•é€»è¾‘çš„ï¼Œè‡ªå·±å†™çš„è¯å‡ºé”™è¿”å›çš„ä¿¡æ¯éƒ½å¯ä»¥å®šåˆ¶å˜›ã€‚</li><li>authcBasic BasicHttpAuthenticationFilter æŒ‡å®šurléœ€è¦basicç™»å½•</li><li>logout LogoutFilter ç™»å‡ºè¿‡æ»¤å™¨ï¼Œé…ç½®æŒ‡å®šurlå°±å¯ä»¥å®ç°é€€å‡ºåŠŸèƒ½ï¼Œéå¸¸æ–¹ä¾¿</li><li>noSessionCreation NoSessionCreationFilter ç¦æ­¢åˆ›å»ºä¼šè¯</li><li>perms PermissionsAuthorizationFilter éœ€è¦æŒ‡å®šæƒé™æ‰èƒ½è®¿é—®</li><li>port PortFilter éœ€è¦æŒ‡å®šç«¯å£æ‰èƒ½è®¿é—®</li><li>rest HttpMethodPermissionFilter å°†httpè¯·æ±‚æ–¹æ³•è½¬åŒ–æˆç›¸åº”çš„åŠ¨è¯æ¥æ„é€ ä¸€ä¸ªæƒé™å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªæ„Ÿè§‰æ„ä¹‰ä¸å¤§ï¼Œæœ‰å…´è¶£è‡ªå·±çœ‹æºç çš„æ³¨é‡Š</li><li>roles RolesAuthorizationFilter éœ€è¦æŒ‡å®šè§’è‰²æ‰èƒ½è®¿é—®</li><li>ssl SslFilter éœ€è¦httpsè¯·æ±‚æ‰èƒ½è®¿é—®</li><li>user UserFilter éœ€è¦å·²ç™»å½•æˆ–â€œè®°ä½æˆ‘â€çš„ç”¨æˆ·æ‰èƒ½è®¿é—®</li></ul><h4 id="shiroå¸¸ç”¨çš„æƒé™æ§åˆ¶æ³¨è§£-å¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸Šä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#shiroå¸¸ç”¨çš„æƒé™æ§åˆ¶æ³¨è§£-å¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸Šä½¿ç”¨" aria-hidden="true">#</a> shiroå¸¸ç”¨çš„æƒé™æ§åˆ¶æ³¨è§£ï¼Œå¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸Šä½¿ç”¨</h4><ul><li>@RequiresGuest åªæœ‰æ¸¸å®¢å¯ä»¥è®¿é—®</li><li>@RequiresAuthentication éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®</li><li>@RequiresUser å·²ç™»å½•çš„ç”¨æˆ·æˆ–â€œè®°ä½æˆ‘â€çš„ç”¨æˆ·èƒ½è®¿é—®</li><li>@RequiresRoles å·²ç™»å½•çš„ç”¨æˆ·éœ€å…·æœ‰æŒ‡å®šçš„è§’è‰²æ‰èƒ½è®¿é—®</li><li>@RequiresPermissions å·²ç™»å½•çš„ç”¨æˆ·éœ€å…·æœ‰æŒ‡å®šçš„æƒé™æ‰èƒ½è®¿é—®</li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/edit/main/demo/theme-docs/src/Java/fm/SpringBoot.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 542716863@qq.com">RrOrange</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/Computer-Science-Learn-Notes/Java/fm/Mybatis.html" class="nav-link prev" aria-label="Mybatis"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Mybatis</div></a><a href="/Computer-Science-Learn-Notes/Java/fm/SpringDataJpa.html" class="nav-link next" aria-label="SpringDataJpa"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">SpringDataJpa<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2024 zhiyu1998</div></footer></div><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/Computer-Science-Learn-Notes/assets/app-19823b7d.js" defer></script>
  </body>
</html>
