<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html"><meta property="og:title" content="SpringCloud"><meta property="og:description" content="è§‚çœ‹åœ°å€ï¼šhttps://www.bilibili.com/video/BV18E411x7eT ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼š 1597213385700 SpringCloud æ˜¯å¾®æœåŠ¡ä¸€ç«™å¼æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œå¾®æœåŠ¡å…¨å®¶æ¡¶ã€‚å®ƒæ˜¯å¾®æœåŠ¡å¼€å‘çš„ä¸»æµæŠ€æœ¯æ ˆã€‚å®ƒé‡‡ç”¨äº†åç§°ï¼Œè€Œéæ•°å­—ç‰ˆæœ¬å·ã€‚ springCloud å’Œ springCloud Alibaba ç›®å‰æ˜¯æœ€ä¸»æµçš„..."><meta property="og:type" content="article"><meta property="og:image" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-04-06T15:04:01.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="SpringCloud"><meta property="article:author" content="zhiyu1998"><meta property="article:modified_time" content="2023-04-06T15:04:01.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SpringCloud","image":["https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/"],"dateModified":"2023-04-06T15:04:01.000Z","author":[{"@type":"Person","name":"zhiyu1998","url":"https://github.com/zhiyu1998"}]}</script><link rel="manifest" href="/Computer-Science-Learn-Notes/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>SpringCloud</title><meta name="description" content="è§‚çœ‹åœ°å€ï¼šhttps://www.bilibili.com/video/BV18E411x7eT ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼š 1597213385700 SpringCloud æ˜¯å¾®æœåŠ¡ä¸€ç«™å¼æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œå¾®æœåŠ¡å…¨å®¶æ¡¶ã€‚å®ƒæ˜¯å¾®æœåŠ¡å¼€å‘çš„ä¸»æµæŠ€æœ¯æ ˆã€‚å®ƒé‡‡ç”¨äº†åç§°ï¼Œè€Œéæ•°å­—ç‰ˆæœ¬å·ã€‚ springCloud å’Œ springCloud Alibaba ç›®å‰æ˜¯æœ€ä¸»æµçš„...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/Computer-Science-Learn-Notes/assets/style-a5be085c.css" as="style"><link rel="stylesheet" href="/Computer-Science-Learn-Notes/assets/style-a5be085c.css">
    <link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/app-4cd1d840.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/framework-c8643d23.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/SpringCloud.html-5a75a326.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/SpringCloud.html-9d081aee.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/Computer-Science-Learn-Notes/" class="brand"><img class="logo" src="/Computer-Science-Learn-Notes/logo.svg" alt><!----><!----></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/Computer-Science-Learn-Notes/" class="nav-link" aria-label="ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Computer-Science-Learn-Notes/intro/" class="nav-link" aria-label="å¯¼è¯»"><span class="font-icon icon iconfont icon-discover" style=""></span>å¯¼è¯»<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/issues" rel="noopener noreferrer" target="_blank" aria-label="é—®é¢˜åé¦ˆ" class="nav-link"><span class="font-icon icon iconfont icon-note" style=""></span>é—®é¢˜åé¦ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">æœç´¢</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-build" style=""></span><span class="title">è®¡ç®—æœºåŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-vscode" style=""></span><span class="title">å‰ç«¯</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-timer" style=""></span><span class="title">Golang</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">Java</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-activity" style=""></span><span class="title">åŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-branch" style=""></span><span class="title">å¹¶å‘</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-profile" style=""></span><span class="title">é¢è¯•</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-leaf" style=""></span><span class="title">æ¡†æ¶</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/Spring.html" class="nav-link sidebar-link sidebar-page" aria-label="Spring"><!---->Spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/SpringMVC.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringMVC"><!---->SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/Mybatis.html" class="nav-link sidebar-link sidebar-page" aria-label="Mybatis"><!---->Mybatis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/SpringBoot.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringBoot"><!---->SpringBoot<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/SpringDataJpa.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringDataJpa"><!---->SpringDataJpa<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/fm/SpringSecurity.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringSecurity"><!---->SpringSecurity<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="SpringCloud"><!---->SpringCloud<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#cloudç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Cloudç®€ä»‹"><!---->Cloudç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#çˆ¶å·¥ç¨‹pomé…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="çˆ¶å·¥ç¨‹pomé…ç½®"><!---->çˆ¶å·¥ç¨‹pomé…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„"><!---->ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æä¾›è€…"><!---->æä¾›è€…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#çƒ­éƒ¨ç½²é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="çƒ­éƒ¨ç½²é…ç½®"><!---->çƒ­éƒ¨ç½²é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆè´¹è€…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¶ˆè´¹è€…"><!---->æ¶ˆè´¹è€…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å·¥ç¨‹é‡æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å·¥ç¨‹é‡æ„"><!---->å·¥ç¨‹é‡æ„<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#eureka" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Eureka"><!---->Eureka<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚å¿µå’Œç†è®º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¦‚å¿µå’Œç†è®º"><!---->æ¦‚å¿µå’Œç†è®º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#serveræ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Serveræ¨¡å—"><!---->Serveræ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æä¾›è€…"><!---->æä¾›è€…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆè´¹è€…-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¶ˆè´¹è€…"><!---->æ¶ˆè´¹è€…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#eureka-é›†ç¾¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Eureka é›†ç¾¤"><!---->Eureka é›†ç¾¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…é›†ç¾¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æä¾›è€…é›†ç¾¤"><!---->æä¾›è€…é›†ç¾¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#actuatorä¿¡æ¯é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="actuatorä¿¡æ¯é…ç½®"><!---->actuatorä¿¡æ¯é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡å‘ç°discovery" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡å‘ç°Discovery"><!---->æœåŠ¡å‘ç°Discovery<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶"><!---->Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#zookeeper" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Zookeeper"><!---->Zookeeper<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æä¾›è€…"><!---->æä¾›è€…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆè´¹è€…-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¶ˆè´¹è€…"><!---->æ¶ˆè´¹è€…<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#consul" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Consul"><!---->Consul<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å®‰è£…å¹¶è¿è¡Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®‰è£…å¹¶è¿è¡Œ"><!---->å®‰è£…å¹¶è¿è¡Œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…-3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æä¾›è€…"><!---->æä¾›è€…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆè´¹è€…-3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¶ˆè´¹è€…"><!---->æ¶ˆè´¹è€…<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ€»ç»“"><!---->æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ribbon" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Ribbon"><!---->Ribbon<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç®€ä»‹"><!---->ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è´Ÿè½½å‡è¡¡"><!---->è´Ÿè½½å‡è¡¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#è½®è¯¢ç®—æ³•åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è½®è¯¢ç®—æ³•åŸç†"><!---->è½®è¯¢ç®—æ³•åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#openfeign" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="OpenFeign"><!---->OpenFeign<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¦‚è¿°"><!---->æ¦‚è¿°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨"><!---->ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#è¶…æ—¶æ§åˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¶…æ—¶æ§åˆ¶"><!---->è¶…æ—¶æ§åˆ¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å¼€å¯æ—¥å¿—æ‰“å°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¼€å¯æ—¥å¿—æ‰“å°"><!---->å¼€å¯æ—¥å¿—æ‰“å°<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¦‚è¿°"><!---->æ¦‚è¿°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¡ˆä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¡ˆä¾‹"><!---->æ¡ˆä¾‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¨¡æ‹Ÿé«˜å¹¶å‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¨¡æ‹Ÿé«˜å¹¶å‘"><!---->æ¨¡æ‹Ÿé«˜å¹¶å‘<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡é™çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡é™çº§"><!---->æœåŠ¡é™çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å…¨å±€æœåŠ¡é™çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…¨å±€æœåŠ¡é™çº§"><!---->å…¨å±€æœåŠ¡é™çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡ç†”æ–­" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡ç†”æ–­"><!---->æœåŠ¡ç†”æ–­<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#hystrix-dashboard" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Hystrix DashBoard"><!---->Hystrix DashBoard<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç›‘æ§å®æˆ˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç›‘æ§å®æˆ˜"><!---->ç›‘æ§å®æˆ˜<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#gateway" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Gateway"><!---->Gateway<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç®€ä»‹-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç®€ä»‹"><!---->ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å…¥é—¨é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…¥é—¨é…ç½®"><!---->å…¥é—¨é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#åŠ¨æ€é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åŠ¨æ€é…ç½®"><!---->åŠ¨æ€é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#predicate" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Predicate"><!---->Predicate<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#filter" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Filter"><!---->Filter<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#config" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Config"><!---->Config<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¦‚è¿°"><!---->æ¦‚è¿°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡ç«¯é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡ç«¯é…ç½®"><!---->æœåŠ¡ç«¯é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å®¢æˆ·ç«¯é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®¢æˆ·ç«¯é…ç½®"><!---->å®¢æˆ·ç«¯é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#åŠ¨æ€åˆ·æ–°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åŠ¨æ€åˆ·æ–°"><!---->åŠ¨æ€åˆ·æ–°<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#bus" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Bus"><!---->Bus<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å®‰è£…rabbitmq" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®‰è£…RabbitMQ"><!---->å®‰è£…RabbitMQ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å¹¿æ’­å¼åˆ·æ–°é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¹¿æ’­å¼åˆ·æ–°é…ç½®"><!---->å¹¿æ’­å¼åˆ·æ–°é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å®šç‚¹é€šçŸ¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®šç‚¹é€šçŸ¥"><!---->å®šç‚¹é€šçŸ¥<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#stream" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Stream"><!---->Stream<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°-3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¦‚è¿°"><!---->æ¦‚è¿°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆæ¯ç”Ÿäº§è€…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¶ˆæ¯ç”Ÿäº§è€…"><!---->æ¶ˆæ¯ç”Ÿäº§è€…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆæ¯æ¶ˆè´¹è€…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¶ˆæ¯æ¶ˆè´¹è€…"><!---->æ¶ˆæ¯æ¶ˆè´¹è€…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#é…ç½®åˆ†ç»„æ¶ˆè´¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é…ç½®åˆ†ç»„æ¶ˆè´¹"><!---->é…ç½®åˆ†ç»„æ¶ˆè´¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆæ¯æŒä¹…åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¶ˆæ¯æŒä¹…åŒ–"><!---->æ¶ˆæ¯æŒä¹…åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°-4" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¦‚è¿°"><!---->æ¦‚è¿°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¡ˆä¾‹-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¡ˆä¾‹"><!---->æ¡ˆä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å¤§ç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¤§ç®€ä»‹"><!---->å¤§ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#nacos" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nacos"><!---->Nacos<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ä¸‹è½½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‹è½½"><!---->ä¸‹è½½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡ä¸­å¿ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡ä¸­å¿ƒ"><!---->æœåŠ¡ä¸­å¿ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#é…ç½®ä¸­å¿ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é…ç½®ä¸­å¿ƒ"><!---->é…ç½®ä¸­å¿ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#nacosæŒä¹…åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="NacosæŒä¹…åŒ–"><!---->NacosæŒä¹…åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#é›†ç¾¤æ¶æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é›†ç¾¤æ¶æ„"><!---->é›†ç¾¤æ¶æ„<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#sentinel" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Sentinel"><!---->Sentinel<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ä¸‹è½½-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‹è½½"><!---->ä¸‹è½½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#demo" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Demo"><!---->Demo<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æµæ§è§„åˆ™" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æµæ§è§„åˆ™"><!---->æµæ§è§„åˆ™<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç†”æ–­é™çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç†”æ–­é™çº§"><!---->ç†”æ–­é™çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#çƒ­ç‚¹keyé™æµ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="çƒ­ç‚¹Keyé™æµ"><!---->çƒ­ç‚¹Keyé™æµ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç³»ç»Ÿè§„åˆ™" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç³»ç»Ÿè§„åˆ™"><!---->ç³»ç»Ÿè§„åˆ™<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#sentinelresourceé…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@SentinelResourceé…ç½®"><!---->@SentinelResourceé…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ•´åˆ-openfeign-æœåŠ¡é™çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•´åˆ openfeign æœåŠ¡é™çº§"><!---->æ•´åˆ openfeign æœåŠ¡é™çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å¼‚å¸¸å¿½ç•¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¼‚å¸¸å¿½ç•¥"><!---->å¼‚å¸¸å¿½ç•¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æŒä¹…åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æŒä¹…åŒ–"><!---->æŒä¹…åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#seata" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Seata"><!---->Seata<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ä¸‹è½½å®‰è£…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‹è½½å®‰è£…"><!---->ä¸‹è½½å®‰è£…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#åˆå§‹åŒ–æ“ä½œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆå§‹åŒ–æ“ä½œ"><!---->åˆå§‹åŒ–æ“ä½œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¡ˆä¾‹-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¡ˆä¾‹"><!---->æ¡ˆä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-async" style=""></span><span class="title">è™šæ‹Ÿæœº</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-launch" style=""></span><span class="title">Kotlinç»“åˆSpring</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-object" style=""></span><span class="title">LeetCodeåˆ·é¢˜é¡ºåº</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-repair" style=""></span><span class="title">ç»éªŒæ€»ç»“</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->SpringCloud</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/zhiyu1998" target="_blank" rel="noopener noreferrer">zhiyu1998</a></span><span property="author" content="zhiyu1998"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-04-04T15:12:04.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span class="waline-pageview-count" id="ArtalkPV" data-path="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 60 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT60M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category1" role>Spring</span><span class="page-category-item category4" role>åˆ†å¸ƒå¼</span><meta property="articleSection" content="Spring,åˆ†å¸ƒå¼"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#cloudç®€ä»‹" class="router-link-active router-link-exact-active toc-link level2">Cloudç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#çˆ¶å·¥ç¨‹pomé…ç½®" class="router-link-active router-link-exact-active toc-link level2">çˆ¶å·¥ç¨‹pomé…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…" class="router-link-active router-link-exact-active toc-link level3">æä¾›è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#çƒ­éƒ¨ç½²é…ç½®" class="router-link-active router-link-exact-active toc-link level3">çƒ­éƒ¨ç½²é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆè´¹è€…" class="router-link-active router-link-exact-active toc-link level3">æ¶ˆè´¹è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å·¥ç¨‹é‡æ„" class="router-link-active router-link-exact-active toc-link level3">å·¥ç¨‹é‡æ„</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#eureka" class="router-link-active router-link-exact-active toc-link level2">Eureka</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚å¿µå’Œç†è®º" class="router-link-active router-link-exact-active toc-link level3">æ¦‚å¿µå’Œç†è®º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#serveræ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">Serveræ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…-1" class="router-link-active router-link-exact-active toc-link level3">æä¾›è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆè´¹è€…-1" class="router-link-active router-link-exact-active toc-link level3">æ¶ˆè´¹è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#eureka-é›†ç¾¤" class="router-link-active router-link-exact-active toc-link level3">Eureka é›†ç¾¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…é›†ç¾¤" class="router-link-active router-link-exact-active toc-link level3">æä¾›è€…é›†ç¾¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#actuatorä¿¡æ¯é…ç½®" class="router-link-active router-link-exact-active toc-link level3">actuatorä¿¡æ¯é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡å‘ç°discovery" class="router-link-active router-link-exact-active toc-link level3">æœåŠ¡å‘ç°Discovery</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" class="router-link-active router-link-exact-active toc-link level3">Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#zookeeper" class="router-link-active router-link-exact-active toc-link level2">Zookeeper</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…-2" class="router-link-active router-link-exact-active toc-link level3">æä¾›è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆè´¹è€…-2" class="router-link-active router-link-exact-active toc-link level3">æ¶ˆè´¹è€…</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#consul" class="router-link-active router-link-exact-active toc-link level2">Consul</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å®‰è£…å¹¶è¿è¡Œ" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…å¹¶è¿è¡Œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æä¾›è€…-3" class="router-link-active router-link-exact-active toc-link level3">æä¾›è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆè´¹è€…-3" class="router-link-active router-link-exact-active toc-link level3">æ¶ˆè´¹è€…</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ€»ç»“" class="router-link-active router-link-exact-active toc-link level2">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ribbon" class="router-link-active router-link-exact-active toc-link level2">Ribbon</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level3">ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active toc-link level3">è´Ÿè½½å‡è¡¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#è½®è¯¢ç®—æ³•åŸç†" class="router-link-active router-link-exact-active toc-link level3">è½®è¯¢ç®—æ³•åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#openfeign" class="router-link-active router-link-exact-active toc-link level2">OpenFeign</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°" class="router-link-active router-link-exact-active toc-link level3">æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#è¶…æ—¶æ§åˆ¶" class="router-link-active router-link-exact-active toc-link level3">è¶…æ—¶æ§åˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å¼€å¯æ—¥å¿—æ‰“å°" class="router-link-active router-link-exact-active toc-link level3">å¼€å¯æ—¥å¿—æ‰“å°</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°-1" class="router-link-active router-link-exact-active toc-link level2">æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level2">æ¡ˆä¾‹</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¨¡æ‹Ÿé«˜å¹¶å‘" class="router-link-active router-link-exact-active toc-link level3">æ¨¡æ‹Ÿé«˜å¹¶å‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡é™çº§" class="router-link-active router-link-exact-active toc-link level3">æœåŠ¡é™çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å…¨å±€æœåŠ¡é™çº§" class="router-link-active router-link-exact-active toc-link level3">å…¨å±€æœåŠ¡é™çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡ç†”æ–­" class="router-link-active router-link-exact-active toc-link level3">æœåŠ¡ç†”æ–­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#hystrix-dashboard" class="router-link-active router-link-exact-active toc-link level2">Hystrix DashBoard</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç›‘æ§å®æˆ˜" class="router-link-active router-link-exact-active toc-link level3">ç›‘æ§å®æˆ˜</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#gateway" class="router-link-active router-link-exact-active toc-link level2">Gateway</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç®€ä»‹-1" class="router-link-active router-link-exact-active toc-link level3">ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å…¥é—¨é…ç½®" class="router-link-active router-link-exact-active toc-link level3">å…¥é—¨é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#åŠ¨æ€é…ç½®" class="router-link-active router-link-exact-active toc-link level3">åŠ¨æ€é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#predicate" class="router-link-active router-link-exact-active toc-link level3">Predicate</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#filter" class="router-link-active router-link-exact-active toc-link level3">Filter</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#config" class="router-link-active router-link-exact-active toc-link level2">Config</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°-2" class="router-link-active router-link-exact-active toc-link level3">æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡ç«¯é…ç½®" class="router-link-active router-link-exact-active toc-link level3">æœåŠ¡ç«¯é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å®¢æˆ·ç«¯é…ç½®" class="router-link-active router-link-exact-active toc-link level3">å®¢æˆ·ç«¯é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#åŠ¨æ€åˆ·æ–°" class="router-link-active router-link-exact-active toc-link level3">åŠ¨æ€åˆ·æ–°</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#bus" class="router-link-active router-link-exact-active toc-link level2">Bus</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å®‰è£…rabbitmq" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…RabbitMQ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å¹¿æ’­å¼åˆ·æ–°é…ç½®" class="router-link-active router-link-exact-active toc-link level3">å¹¿æ’­å¼åˆ·æ–°é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å®šç‚¹é€šçŸ¥" class="router-link-active router-link-exact-active toc-link level3">å®šç‚¹é€šçŸ¥</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#stream" class="router-link-active router-link-exact-active toc-link level2">Stream</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°-3" class="router-link-active router-link-exact-active toc-link level3">æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆæ¯ç”Ÿäº§è€…" class="router-link-active router-link-exact-active toc-link level3">æ¶ˆæ¯ç”Ÿäº§è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆæ¯æ¶ˆè´¹è€…" class="router-link-active router-link-exact-active toc-link level3">æ¶ˆæ¯æ¶ˆè´¹è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#é…ç½®åˆ†ç»„æ¶ˆè´¹" class="router-link-active router-link-exact-active toc-link level3">é…ç½®åˆ†ç»„æ¶ˆè´¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¶ˆæ¯æŒä¹…åŒ–" class="router-link-active router-link-exact-active toc-link level3">æ¶ˆæ¯æŒä¹…åŒ–</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¦‚è¿°-4" class="router-link-active router-link-exact-active toc-link level2">æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¡ˆä¾‹-1" class="router-link-active router-link-exact-active toc-link level2">æ¡ˆä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å¤§ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level2">å¤§ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#nacos" class="router-link-active router-link-exact-active toc-link level2">Nacos</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ä¸‹è½½" class="router-link-active router-link-exact-active toc-link level3">ä¸‹è½½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æœåŠ¡ä¸­å¿ƒ" class="router-link-active router-link-exact-active toc-link level3">æœåŠ¡ä¸­å¿ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#é…ç½®ä¸­å¿ƒ" class="router-link-active router-link-exact-active toc-link level3">é…ç½®ä¸­å¿ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#nacosæŒä¹…åŒ–" class="router-link-active router-link-exact-active toc-link level3">NacosæŒä¹…åŒ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#é›†ç¾¤æ¶æ„" class="router-link-active router-link-exact-active toc-link level3">é›†ç¾¤æ¶æ„</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#sentinel" class="router-link-active router-link-exact-active toc-link level2">Sentinel</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ä¸‹è½½-1" class="router-link-active router-link-exact-active toc-link level3">ä¸‹è½½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#demo" class="router-link-active router-link-exact-active toc-link level3">Demo</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æµæ§è§„åˆ™" class="router-link-active router-link-exact-active toc-link level3">æµæ§è§„åˆ™</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç†”æ–­é™çº§" class="router-link-active router-link-exact-active toc-link level3">ç†”æ–­é™çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#çƒ­ç‚¹keyé™æµ" class="router-link-active router-link-exact-active toc-link level3">çƒ­ç‚¹Keyé™æµ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ç³»ç»Ÿè§„åˆ™" class="router-link-active router-link-exact-active toc-link level3">ç³»ç»Ÿè§„åˆ™</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#sentinelresourceé…ç½®" class="router-link-active router-link-exact-active toc-link level3">@SentinelResourceé…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ•´åˆ-openfeign-æœåŠ¡é™çº§" class="router-link-active router-link-exact-active toc-link level3">æ•´åˆ openfeign æœåŠ¡é™çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#å¼‚å¸¸å¿½ç•¥" class="router-link-active router-link-exact-active toc-link level3">å¼‚å¸¸å¿½ç•¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æŒä¹…åŒ–" class="router-link-active router-link-exact-active toc-link level3">æŒä¹…åŒ–</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#seata" class="router-link-active router-link-exact-active toc-link level2">Seata</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#ä¸‹è½½å®‰è£…" class="router-link-active router-link-exact-active toc-link level3">ä¸‹è½½å®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#åˆå§‹åŒ–æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">åˆå§‹åŒ–æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/fm/SpringCloud.html#æ¡ˆä¾‹-2" class="router-link-active router-link-exact-active toc-link level3">æ¡ˆä¾‹</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h1><p>è§‚çœ‹åœ°å€ï¼š<a href="https://www.bilibili.com/video/BV18E411x7eT" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV18E411x7eT<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597213385700-d3b7c7b5.png" alt="1597213385700" tabindex="0" loading="lazy"><figcaption>1597213385700</figcaption></figure><p>SpringCloud æ˜¯å¾®æœåŠ¡ä¸€ç«™å¼æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œå¾®æœåŠ¡å…¨å®¶æ¡¶ã€‚å®ƒæ˜¯å¾®æœåŠ¡å¼€å‘çš„ä¸»æµæŠ€æœ¯æ ˆã€‚å®ƒé‡‡ç”¨äº†åç§°ï¼Œè€Œéæ•°å­—ç‰ˆæœ¬å·ã€‚</p><p>springCloud å’Œ springCloud Alibaba ç›®å‰æ˜¯æœ€ä¸»æµçš„å¾®æœåŠ¡æ¡†æ¶ç»„åˆã€‚</p><p>ç‰ˆæœ¬é€‰æ‹©ï¼š</p><blockquote><p>é€‰ç”¨ springboot å’Œ springCloud ç‰ˆæœ¬æœ‰çº¦æŸï¼Œä¸æŒ‰ç…§å®ƒçš„çº¦æŸä¼šæœ‰å†²çªã€‚</p></blockquote><h2 id="cloudç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#cloudç®€ä»‹" aria-hidden="true">#</a> Cloudç®€ä»‹</h2><figure><img src="/Computer-Science-Learn-Notes/assets/1597213783265-9059da23.png" alt="1597213783265" tabindex="0" loading="lazy"><figcaption>1597213783265</figcaption></figure><p>å‚è€ƒèµ„æ–™ï¼Œå°½é‡å»å®˜ç½‘</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597213855903-073978f8.png" alt="1597213855903" tabindex="0" loading="lazy"><figcaption>1597213855903</figcaption></figure><blockquote><p><a href="https://cloud.spring.io/spring-cloud-static/Hoxton.SR1/reference/htmlsingle/" target="_blank" rel="noopener noreferrer">https://cloud.spring.io/spring-cloud-static/Hoxton.SR1/reference/htmlsingle/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h1 id="å·¥ç¨‹å»ºé€ " tabindex="-1"><a class="header-anchor" href="#å·¥ç¨‹å»ºé€ " aria-hidden="true">#</a> å·¥ç¨‹å»ºé€ </h1><p>å†™ä¸€ä¸ªä¸‹å›¾çš„Hello World</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597225177689-22fe8363.png" alt="1597225177689" tabindex="0" loading="lazy"><figcaption>1597225177689</figcaption></figure><p>æ„å»ºçˆ¶å·¥ç¨‹ï¼Œåé¢çš„é¡¹ç›®æ¨¡å—éƒ½åœ¨æ­¤å·¥ç¨‹ä¸­ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597214225785-ca550cbe.png" alt="1597214225785" tabindex="0" loading="lazy"><figcaption>1597214225785</figcaption></figure><p>è®¾ç½®ç¼–ç ï¼šSettings -&gt; File Encodings</p><p>æ³¨è§£æ¿€æ´»ï¼š<img src="/Computer-Science-Learn-Notes/assets/1597214602636-c9722ba2.png" alt="1597214602636" loading="lazy"></p><p>Javaç‰ˆæœ¬ç¡®å®šï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597214699619-4d155494.png" alt="1597214699619" tabindex="0" loading="lazy"><figcaption>1597214699619</figcaption></figure><h2 id="çˆ¶å·¥ç¨‹pomé…ç½®" tabindex="-1"><a class="header-anchor" href="#çˆ¶å·¥ç¨‹pomé…ç½®" aria-hidden="true">#</a> çˆ¶å·¥ç¨‹pomé…ç½®</h2><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud2020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç¬¬ä¸€æ­¥ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- ç»Ÿä¸€ç®¡ç† jar åŒ…ç‰ˆæœ¬ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>junit.version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>junit.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log4j.version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log4j.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lombok.version</span><span class="token punctuation">&gt;</span></span>1.16.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lombok.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">&gt;</span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>druid.version</span><span class="token punctuation">&gt;</span></span>1.1.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>druid.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mybatis.spring.boot.version</span><span class="token punctuation">&gt;</span></span>1.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mybatis.spring.boot.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- å­å—åŸºç¡€ä¹‹åï¼Œæä¾›ä½œç”¨ï¼šé”å®šç‰ˆæœ¬ + å­moduleä¸ç”¨å†™ groupId å’Œ version --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-project-info-reports-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- ä¸‹é¢ä¸‰ä¸ªåŸºæœ¬æ˜¯å¾®æœåŠ¡æ¶æ„çš„æ ‡é… --&gt;</span>
        <span class="token comment">&lt;!--spring boot 2.2.2--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--spring cloud Hoxton.SR1--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--spring cloud é˜¿é‡Œå·´å·´--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--mysql--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${mysql.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- druid--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${druid.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${mybatis.spring.boot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--junit--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${junit.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--log4j--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${log4j.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fork</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fork</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>addResources</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>addResources</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢é…ç½®çš„è§£é‡Šï¼š</p><blockquote><p>é¦–å…ˆè¦åŠ  <code>&lt;packaging&gt;pom&lt;/packaging&gt;</code> è¿™ä¸ªã€‚</p><p>èšåˆç‰ˆæœ¬ä¾èµ–ï¼ŒdependencyManagement åªå£°æ˜ä¾èµ–ï¼Œå¹¶ä¸å®ç°å¼•å…¥ï¼Œæ‰€ä»¥å­é¡¹ç›®è¿˜éœ€è¦å†™è¦å¼•å…¥çš„ä¾èµ–ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597215801116-99772680.png" alt="1597215801116" tabindex="0" loading="lazy"><figcaption>1597215801116</figcaption></figure></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597215611540-dc9274dd.png" alt="1597215611540" tabindex="0" loading="lazy"><figcaption>1597215611540</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597215639355-5657f756.png" alt="1597215639355" tabindex="0" loading="lazy"><figcaption>1597215639355</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597215666979-29a93ed6.png" alt="1597215666979" tabindex="0" loading="lazy"><figcaption>1597215666979</figcaption></figure><h2 id="ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„" tabindex="-1"><a class="header-anchor" href="#ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„" aria-hidden="true">#</a> ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„</h2><blockquote><ol><li>å»ºæ¨¡å— module</li><li>æ”¹ pom</li><li>å†™yml</li><li>ä¸»å¯åŠ¨</li><li>ä¸šåŠ¡ç±»</li></ol></blockquote><h3 id="æä¾›è€…" tabindex="-1"><a class="header-anchor" href="#æä¾›è€…" aria-hidden="true">#</a> æä¾›è€…</h3><p>cloud-provider-payment8001 å­å·¥ç¨‹çš„pomæ–‡ä»¶ï¼š</p><blockquote><p>è¿™é‡Œé¢çš„ lombok è¿™ä¸ªåŒ…ï¼Œå¼•å…¥ä»¥åï¼Œå®ä½“ç±»ä¸ç”¨å†å†™set å’Œ get</p><p>å¯ä»¥å¦‚ä¸‹å†™å®ä½“ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Payment</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> serial<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud2020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-provider-payment8001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka-client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mysql-connector-java--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--jdbc--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>cloud-provider-payment8001 å­å·¥ç¨‹çš„ymlæ–‡ä»¶ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>provider<span class="token punctuation">-</span>payment8001
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> org.gjt.mm.mysql.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/cloud2020<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf-8&amp;useSSL=false</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mapper/<span class="token important">*.xml</span>
  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.dkf.springcloud.entities  <span class="token comment"># æ‰€æœ‰Entity åˆ«åç±»æ‰€åœ¨åŒ…</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>cloud-provider-payment8001 å­å·¥ç¨‹çš„ä¸»å¯åŠ¨ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢çš„å¸¸è§„æ“ä½œï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597217986370-a8d14eef.png" alt="1597217986370" tabindex="0" loading="lazy"><figcaption>1597217986370</figcaption></figure><p>mybatisçš„mapperæ–‡ä»¶å’Œserviceå±‚ä»£ç ä¸å†™äº†ï¼Œä¸‹é¢è®°å½•ä¸€ä¸ªç‰¹æ®Šçš„Entityç±»ï¼Œå’ŒController</p><p>CommonResult:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * å¦‚æœå‰åç«¯åˆ†ç¦»ï¼Œè¿™ä¸ªæ˜¯æä¾›ç»™å‰ç«¯ä¿¡æ¯å’Œæ•°æ®çš„ç±»
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span>
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> code<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> messgae<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">T</span> data<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æŸ¥è¯¢ä¸ºç©ºçš„æ—¶å€™ä½¿ç”¨çš„æ„é€ å™¨
     * <span class="token keyword">@param</span> <span class="token parameter">code</span>
     * <span class="token keyword">@param</span> <span class="token parameter">messgae</span>
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> messgae<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> messgae<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Controllerï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">CommonResult</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">Payment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">PaymentService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>   <span class="token comment">//å¿…é¡»æ˜¯è¿™ä¸ªæ³¨è§£ï¼Œå› ä¸ºæ˜¯æ¨¡æ‹Ÿå‰åç«¯åˆ†ç¦»çš„restfulé£æ ¼çš„è¯·æ±‚ï¼Œè¦æ±‚æ¯ä¸ªæ–¹æ³•è¿”å› json</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentService</span> paymentService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/create&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//	    æ³¨æ„è¿™é‡Œçš„ @RequestBody  æ˜¯å¿…é¡»è¦å†™çš„ï¼Œè™½ç„¶ MVCå¯ä»¥è‡ªåŠ¨å°è£…å‚æ•°æˆä¸ºå¯¹è±¡ï¼Œ</span>
    <span class="token comment">//      ä½†æ˜¯å½“æ¶ˆè´¹è€…é¡¹ç›®è°ƒç”¨ï¼Œå®ƒä¼ å‚æ˜¯ payment æ•´ä¸ªå®ä¾‹å¯¹è±¡ä¼ è¿‡æ¥çš„ï¼Œ å³Jsonæ•°æ®ï¼Œå› æ­¤éœ€è¦å†™è¿™ä¸ªæ³¨è§£</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Payment</span> payment<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>payment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;****æ’å…¥ç»“æœï¼š&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&quot;æ’å…¥æ•°æ®åº“æˆåŠŸ&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">,</span> <span class="token string">&quot;æ’å…¥æ•°æ®åº“å¤±è´¥&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">getPaymentById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Payment</span> result <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">getPaymentById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;****æŸ¥è¯¢ç»“æœï¼š&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">,</span> <span class="token string">&quot;æ²¡æœ‰å¯¹åº”idçš„è®°å½•&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ä½†ç¼–è¯‘æœ‰ä¸ªåˆ«åœ°æ–¹ä¼šæŠ¥é”™ï¼Œå¯åŠ¨ä¹Ÿä¼šæŠ¥é”™ï¼Œä½†æ˜¯æµ‹è¯•ä¸¤ä¸ªæ¥å£éƒ½æ˜¯æ²¡é—®é¢˜çš„ï¼Œæ¨æµ‹å¯åŠ¨æŠ¥é”™æ˜¯å› ä¸ºå¼•å…¥äº†ä¸‹é¢æ‰ä¼šå¼•å…¥çš„jaråŒ…ï¼Œç›®å‰ä¸å½±å“ã€‚</p><h3 id="çƒ­éƒ¨ç½²é…ç½®" tabindex="-1"><a class="header-anchor" href="#çƒ­éƒ¨ç½²é…ç½®" aria-hidden="true">#</a> çƒ­éƒ¨ç½²é…ç½®</h3><ol><li>å…·ä½“æ¨¡å—é‡Œæ·»åŠ JaråŒ…åˆ°å·¥ç¨‹ä¸­ï¼Œä¸Šé¢çš„pomæ–‡ä»¶å·²ç»æ·»åŠ ä¸Šäº†</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>æ·»åŠ plusåˆ°çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­ï¼šä¸ŠiæŒ‰ä¹Ÿå·²ç»æ·»åŠ å¥½äº†</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fork</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fork</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>addResources</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>addResources</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li><figure><img src="/Computer-Science-Learn-Notes/assets/1597222225568-dfcf7bc0.png" alt="1597222225568" tabindex="0" loading="lazy"><figcaption>1597222225568</figcaption></figure></li><li><p>shift + ctrl + alt + / å››ä¸ªæŒ‰é”®ä¸€å—æŒ‰ï¼Œé€‰æ‹©Regé¡¹ï¼š</p></li></ol><figure><img src="/Computer-Science-Learn-Notes/assets/1597222341651-704681f5.png" alt="1597222341651" tabindex="0" loading="lazy"><figcaption>1597222341651</figcaption></figure><h3 id="æ¶ˆè´¹è€…" tabindex="-1"><a class="header-anchor" href="#æ¶ˆè´¹è€…" aria-hidden="true">#</a> æ¶ˆè´¹è€…</h3><blockquote><p>æ¶ˆè´¹è€…ç°åœ¨åªæ¨¡æ‹Ÿè°ƒç”¨æä¾›è€…çš„Controlleræ–¹æ³•ï¼Œæ²¡æœ‰æŒä¹…å±‚é…ç½®ï¼Œåªæœ‰Controllerå’Œå®ä½“ç±»</p><p>å½“ç„¶ä¹Ÿè¦é…ç½®ä¸»å¯åŠ¨ç±»å’Œå¯åŠ¨ç«¯å£</p></blockquote><p>pomæ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud2020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-customer-order80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--&lt;dependency&gt;&amp;lt;!&amp;ndash; å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity &amp;ndash;&amp;gt;--&gt;</span>            <span class="token comment">&lt;!--&lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt;--&gt;</span>            <span class="token comment">&lt;!--&lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt;--&gt;</span>            <span class="token comment">&lt;!--&lt;version&gt;${project.version}&lt;/version&gt;--&gt;</span>        <span class="token comment">&lt;!--&lt;/dependency&gt;--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŠŠCommonResult å’Œ Payment ä¸¤ä¸ª å®ä½“ç±»ä¹Ÿåˆ›å»ºå‡ºæ¥</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597224961560-9ac6a896.png" alt="1597224961560" tabindex="0" loading="lazy"><figcaption>1597224961560</figcaption></figure><p>ApplicationContextConfig å†…å®¹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configurationpublic</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Controller ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">CommonResult</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">Payment</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@Slf4jpublic</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>    <span class="token comment">//è¿œç¨‹è°ƒç”¨çš„ åœ°å€    public static final String PAYMENY_URL = &quot;http://localhost:8001&quot;;    @Resource    private RestTemplate restTemplate;    @PostMapping(&quot;customer/payment/create&quot;)    public CommonResult&lt;Payment&gt; create (Payment payment){        /**        param1 è¯·æ±‚åœ°å€ï¼Œparam2 è¯·æ±‚å‚æ•°ï¼Œ param3 è¿”å›ç±»å‹        */        return restTemplate.postForObject(PAYMENY_URL + &quot;/payment/create&quot;, payment, CommonResult.class);    }    @GetMapping(&quot;customer/payment/{id}&quot;)    public CommonResult&lt;Payment&gt; getPaymentById(@PathVariable(&quot;id&quot;)Long id){        return restTemplate.getForObject(PAYMENY_URL + &quot;/payment/&quot; + id, CommonResult.class);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœ runDashboard æ§åˆ¶å°æ²¡æœ‰å‡ºæ¥ï¼Œå³ä¸Šè§’æœç´¢ å³å¯</p><h3 id="å·¥ç¨‹é‡æ„" tabindex="-1"><a class="header-anchor" href="#å·¥ç¨‹é‡æ„" aria-hidden="true">#</a> å·¥ç¨‹é‡æ„</h3><blockquote><p>ä¸Šé¢ ä¸¤ä¸ªå­é¡¹ç›®ï¼Œæœ‰å¤šæ¬¡é‡å¤çš„ å¯¼å…¥ jarï¼Œå’Œé‡å¤çš„ Entity å®ä½“ç±»ã€‚å¯ä»¥æŠŠ å¤šä½™çš„éƒ¨åˆ†ï¼ŒåŠ å…¥åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ä¸­ï¼Œå°†è¿™ä¸ªæ¨¡å—æ‰“åŒ…ï¼Œå¹¶æä¾›ç»™éœ€è¦ä½¿ç”¨çš„ module</p></blockquote><ol><li>æ–°å»ºä¸€ä¸ª cloud-dkf-commons å­æ¨¡å—</li><li>å°† entities åŒ…é‡Œé¢çš„å®ä½“ç±»æ”¾åˆ°è¿™ä¸ªå­æ¨¡å—ä¸­ï¼Œä¹Ÿå°† pom æ–‡ä»¶ä¸­ï¼Œé‡å¤å¯¼å…¥çš„ jaråŒ…æ”¾åˆ°è¿™ä¸ªæ–°å»ºçš„ æ¨¡å—çš„ pom æ–‡ä»¶ä¸­ã€‚å¦‚ä¸‹ï¼š</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud2020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- è¿™ä¸ªæ˜¯æ–°æ·»åŠ çš„ï¼Œä¹‹å‰æ²¡ç”¨åˆ°ï¼Œåé¢ä¼šç”¨åˆ° --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--  		å…³äºè¿™ä¸ªhutool æ˜¯ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·åŒ…ï¼Œå®˜ç½‘ï¼šhttps://hutool.cn/	--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å°†æ­¤é¡¹ç›®æ‰“åŒ… install åˆ° mavenä»“åº“ã€‚</p><ol start="3"><li>å°† æä¾›è€… å’Œ æ¶ˆè´¹è€… ä¸¤ä¸ªé¡¹ç›®ä¸­çš„ entities åŒ…åˆ é™¤ï¼Œå¹¶åˆ é™¤æ‰åŠ å…¥åˆ° cloud-api-commons æ¨¡å—çš„ ä¾èµ–é…ç½®ã€‚</li><li>å°† æ‰“åŒ…åˆ° maven ä»“åº“çš„ cloud-api-commons æ¨¡å—ï¼Œå¼•å…¥åˆ° æä¾›è€… å’Œ æ¶ˆè´¹è€…çš„ pom æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å®Œæˆï¼</p><h1 id="æœåŠ¡æ³¨å†Œä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡æ³¨å†Œä¸­å¿ƒ" aria-hidden="true">#</a> æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h1><blockquote><p>å¦‚æœæ˜¯ä¸Šé¢åªæœ‰ä¸¤ä¸ªå¾®æœåŠ¡ï¼Œé€šè¿‡ RestTemplate ï¼Œæ˜¯å¯ä»¥ç›¸äº’è°ƒç”¨çš„ï¼Œä½†æ˜¯å½“å¾®æœåŠ¡é¡¹ç›®çš„æ•°é‡å¢å¤§ï¼Œå°±éœ€è¦æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚ç›®å‰æ²¡æœ‰å­¦ä¹ æœåŠ¡è°ƒç”¨ç›¸å…³æŠ€æœ¯ï¼Œä½¿ç”¨ SpringCloud è‡ªå¸¦çš„ RestTemplate æ¥å®ç°RPC</p></blockquote><h2 id="eureka" tabindex="-1"><a class="header-anchor" href="#eureka" aria-hidden="true">#</a> Eureka</h2><blockquote><p>å®˜æ–¹åœæ›´ä¸åœç”¨ï¼Œä»¥åå¯èƒ½ç”¨çš„è¶Šæ¥è¶Šå°‘ã€‚</p></blockquote><h3 id="æ¦‚å¿µå’Œç†è®º" tabindex="-1"><a class="header-anchor" href="#æ¦‚å¿µå’Œç†è®º" aria-hidden="true">#</a> æ¦‚å¿µå’Œç†è®º</h3><blockquote><p>å®ƒæ˜¯ç”¨æ¥æœåŠ¡æ²»ç†ï¼Œä»¥åŠæœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼ŒæœåŠ¡æ³¨å†Œå¦‚ä¸‹å›¾ï¼š</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597291856582-16943a8c.png" alt="1597291856582" tabindex="0" loading="lazy"><figcaption>1597291856582</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597291942982-c8481fb7.png" alt="1597291942982" tabindex="0" loading="lazy"><figcaption>1597291942982</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597291981643-43093002.png" alt="1597291981643" tabindex="0" loading="lazy"><figcaption>1597291981643</figcaption></figure><p>ç‰ˆæœ¬è¯´æ˜ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597292154107-e91c79f0.png" alt="1597292154107" tabindex="0" loading="lazy"><figcaption>1597292154107</figcaption></figure><h3 id="serveræ¨¡å—" tabindex="-1"><a class="header-anchor" href="#serveræ¨¡å—" aria-hidden="true">#</a> Serveræ¨¡å—</h3><blockquote><p>server æ¨¡å—ä½¿ç”¨ 7001ç«¯å£ï¼Œä¸‹é¢æ˜¯pomæ–‡ä»¶éœ€è¦çš„ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-eureka-server7001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><blockquote><p>ä¸‹é¢é…ç½® yml æ–‡ä»¶ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server:port</span><span class="token punctuation">:</span> <span class="token key atrule">7001eureka:instance</span><span class="token punctuation">:</span> <span class="token key atrule">hostname</span><span class="token punctuation">:</span> localhost  <span class="token comment"># eureka æœåŠ¡å™¨çš„å®ä¾‹åç§°client: # false ä»£è¡¨ä¸å‘æœåŠ¡æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ï¼Œå› ä¸ºå®ƒæœ¬èº«å°±æ˜¯æœåŠ¡ä¸­å¿ƒ register-with-eureka: false # false ä»£è¡¨è‡ªå·±å°±æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œè‡ªå·±çš„ä½œç”¨å°±æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡ fetch-registry: false service-url:   # è®¾ç½®ä¸ Eureka Server äº¤äº’çš„åœ°å€ï¼ŒæŸ¥è¯¢æœåŠ¡ å’Œ æ³¨å†ŒæœåŠ¡éƒ½ä¾èµ–è¿™ä¸ªåœ°å€   defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ€åå†™ä¸»å¯åŠ¨ç±»ï¼Œå¦‚æœå¯åŠ¨æŠ¥é”™ï¼Œè¯´æ²¡æœ‰é…ç½® DataSource ï¼Œå°±åœ¨ ä¸»å¯åŠ¨ç±»çš„æ³¨è§£åŠ ä¸Š è¿™æ ·çš„é…ç½®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// exclude ï¼šå¯åŠ¨æ—¶ä¸å¯ç”¨ DataSourceçš„è‡ªåŠ¨é…ç½®æ£€æŸ¥@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)@EnableEurekaServer   // è¡¨ç¤ºå®ƒæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒpublic class EurekaServerMain7001 { public static void main(String[] args){     SpringApplication.run(EurekaServerMain7001.class, args); }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æµ‹è¯•ï¼Œè®¿é—® 7001 ç«¯å£</p><h3 id="æä¾›è€…-1" tabindex="-1"><a class="header-anchor" href="#æä¾›è€…-1" aria-hidden="true">#</a> æä¾›è€…</h3><blockquote><p>è¿™é‡Œçš„æä¾›è€…ï¼Œè¿˜æ˜¯ä½¿ç”¨ ä¸Šé¢çš„ cloud-provider-payment8001 æ¨¡å—ï¼Œåšå¦‚ä¸‹ä¿®æ”¹ï¼š</p></blockquote><ol><li>åœ¨ pom æ–‡ä»¶çš„åŸºç¡€ä¸Šå¼•å…¥ eureka çš„clientåŒ…ï¼Œpom çš„å…¨éƒ¨ä¾èµ–å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-provider-payment8001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--eureka-client--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--mysql-connector-java--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--jdbc--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä¸»å¯åŠ¨ç±» åŠ ä¸Šæ³¨è§£ ï¼š @EnableEurekaClient</li><li>yml æ–‡ä»¶æ·»åŠ å…³äº Eureka çš„é…ç½®ï¼š</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>  <span class="token key atrule">client</span><span class="token punctuation">:</span>	<span class="token comment"># æ³¨å†Œè¿› Eureka çš„æœåŠ¡ä¸­å¿ƒ    register-with-eureka: true    # æ£€ç´¢ æœåŠ¡ä¸­å¿ƒ çš„å…¶å®ƒæœåŠ¡    fetch-registry: true    service-url:      # è®¾ç½®ä¸ Eureka Server äº¤äº’çš„åœ°å€      defaultZone: http://localhost:7001/eureka/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åº”ç”¨åç§°ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597294710656-d790cc35.png" alt="1597294710656" tabindex="0" loading="lazy"><figcaption>1597294710656</figcaption></figure><h3 id="æ¶ˆè´¹è€…-1" tabindex="-1"><a class="header-anchor" href="#æ¶ˆè´¹è€…-1" aria-hidden="true">#</a> æ¶ˆè´¹è€…</h3><blockquote><p>è¿™é‡Œçš„æ¶ˆè´¹è€… ä¹Ÿæ˜¯ä¸Šé¢ çš„ cloud-customer-order80 æ¨¡å—</p></blockquote><ol><li>ä¿®æ”¹ pom æ–‡ä»¶ï¼ŒåŠ å…¥Eureka çš„æœ‰å…³ä¾èµ–ï¼Œ å…¨éƒ¨ pom ä¾èµ–å¦‚ä¸‹ï¼š</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-customer-order80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä¸»å¯åŠ¨ç±» åŠ ä¸Šæ³¨è§£ ï¼š @EnableEurekaClient</li><li>yml æ–‡ä»¶å¿…é¡»æ·»åŠ çš„å†…å®¹ï¼š</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>  <span class="token key atrule">client</span><span class="token punctuation">:</span>    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token key atrule">true    fetch-registry</span><span class="token punctuation">:</span> <span class="token key atrule">true    service-url</span><span class="token punctuation">:</span>      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> <span class="token key atrule">http://localhost:7001/eureka/spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>order<span class="token punctuation">-</span>service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="eureka-é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#eureka-é›†ç¾¤" aria-hidden="true">#</a> Eureka é›†ç¾¤</h3><blockquote><p>Eureka é›†ç¾¤çš„åŸç†ï¼Œå°±æ˜¯ ç›¸äº’æ³¨å†Œï¼Œäº’ç›¸å®ˆæœ›</p><p>æ¨¡æ‹Ÿå¤šä¸ª Eureka Server åœ¨ä¸åŒæœºå™¨ä¸Š ï¼š è¿›å…¥C:\Windows\System32\drivers\etc\hosts æ·»åŠ å¦‚ä¸‹ï¼š</p><p>127.0.0.1 <a href="http://eureka7001.com" target="_blank" rel="noopener noreferrer">eureka7001.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>127.0.0.1 eureka <a href="http://7002.com" target="_blank" rel="noopener noreferrer">7002.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>ç°åœ¨åˆ›å»º cloud-eureka-server7002 ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ª Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œpom æ–‡ä»¶å’Œ ä¸»å¯åŠ¨ç±»ï¼Œä¸ç¬¬ä¸€ä¸ªServerä¸€è‡´ã€‚</p><p>ç°åœ¨ä¿®æ”¹è¿™ä¸¤ä¸ª Server çš„ yml é…ç½®ï¼š</p><p>7001 ç«¯å£çš„Server ymlæ–‡ä»¶ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">7001eureka</span><span class="token punctuation">:</span>  <span class="token key atrule">instance</span><span class="token punctuation">:</span>    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7001.com  <span class="token comment"># eureka æœåŠ¡å™¨çš„å®ä¾‹åœ°å€  client:    register-with-eureka: false    fetch-registry: false    service-url:    ## ä¸€å®šè¦æ³¨æ„è¿™é‡Œçš„åœ°å€ï¼Œè¿™æ˜¯æ­å»ºé›†ç¾¤çš„å…³é”®      defaultZone: http://eureka7002.com:7002/eureka/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>7002 ç«¯å£çš„Server ymlæ–‡ä»¶ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">7002eureka</span><span class="token punctuation">:</span>  <span class="token key atrule">instance</span><span class="token punctuation">:</span>    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7002.com  <span class="token comment"># eureka æœåŠ¡å™¨çš„å®ä¾‹åœ°å€  client:    register-with-eureka: false    fetch-registry: false    service-url:    ## ä¸€å®šè¦æ³¨æ„è¿™é‡Œçš„åœ°å€ è¿™æ˜¯æ­å»ºé›†ç¾¤çš„å…³é”®      defaultZone: http://eureka7001.com:7001/eureka/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>eureka.instance.hostname æ‰æ˜¯å¯åŠ¨ä»¥å æœ¬ Server çš„æ³¨å†Œåœ°å€ï¼Œè€Œ service-url æ˜¯ map ç±»å‹ï¼Œåªè¦ä¿è¯ key:value æ ¼å¼å°±è¡Œï¼Œå®ƒä»£è¡¨ æœ¬Server æŒ‡å‘äº†é‚£äº› å…¶å®ƒServer ã€‚åˆ©ç”¨è¿™ä¸ªï¼Œå°±å¯ä»¥å®ç°Eureka Server ç›¸äº’ä¹‹é—´çš„æ³¨å†Œï¼Œä»è€Œå®ç°é›†ç¾¤çš„æ­å»ºã€‚</p></blockquote><p>å°† æä¾›è€… å’Œ æ¶ˆè´¹è€… æ³¨å†Œè¿›ä¸¤ä¸ªEureka Server ä¸­ï¼Œä¸‹é¢æ˜¯ æ¶ˆè´¹è€…å’Œæä¾›è€…çš„ yml æ–‡ä»¶å…³äºEurekaçš„é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>  <span class="token key atrule">client</span><span class="token punctuation">:</span>    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token key atrule">true    fetch-registry</span><span class="token punctuation">:</span> <span class="token key atrule">true    service-url</span><span class="token punctuation">:</span>      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ—è¡¨å½¢å¼è¿›è¡ŒServerä¹‹é—´çš„å…³è”æ³¨å†Œã€‚</p></blockquote><h3 id="æä¾›è€…é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#æä¾›è€…é›†ç¾¤" aria-hidden="true">#</a> æä¾›è€…é›†ç¾¤</h3><blockquote><p>ä¸ºæä¾›è€…ï¼Œå³ cloud-provider-payment8001 æ¨¡å—åˆ›å»ºé›†ç¾¤ï¼Œæ–°å»ºæ¨¡å—ä¸º cloud-provider-payment8002</p><p>æœ€ç»ˆå®ç°ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597301105015-46252f4c.png" alt="1597301105015" tabindex="0" loading="lazy"><figcaption>1597301105015</figcaption></figure><p>æ³¨æ„åœ¨ Controller è¿”å›ä¸åŒçš„æ¶ˆæ¯ï¼Œä»è€ŒåŒºåˆ†è€…ä¸¤ä¸ªæä¾›è€…çš„å·¥ä½œçŠ¶æ€ã€‚</p></blockquote><p>å…¶ä½™é…ç½®éƒ½ä¸€è‡´ï¼Œéœ€è¦é…ç½®é›†ç¾¤çš„é…ç½®å¦‚ä¸‹ï¼š</p><p>é…ç½®åŒºåˆ«ï¼šåªè¦ä¿è¯æ¶ˆè´¹è€…é¡¹ç›®å¯¹æœåŠ¡æ³¨å†Œä¸­å¿ƒæä¾›çš„åç§°ä¸€è‡´ï¼Œå³å®Œæˆé›†ç¾¤ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>  <span class="token comment"># ç«¯å£å·ä¸ä¸€æ ·spring:  application:    name: cloud-provider-service  # è¿™æ¬¡é‡ç‚¹æ˜¯è¿™é‡Œï¼Œä¸¤ä¸ªè¦å†™çš„ä¸€æ ·ï¼Œè¿™æ˜¯è¿™ä¸ªé›†ç¾¤çš„å…³é”®  datasource:    type: com.alibaba.druid.pool.DruidDataSource    driver-class-name: org.gjt.mm.mysql.Driver    url: jdbc:mysql://localhost:3306/cloud2020?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false    username: root    password: 123456mybatis:  mapper-locations: classpath:mapper/*.xml  type-aliases-package: com.dkf.springcloud.entities  eureka:  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¶ˆè´¹è€…çš„é…ç½®</p><blockquote><p>å°±æ˜¯æ¶ˆè´¹è€…å¦‚ä½•è®¿é—® ç”±è¿™ä¸¤ä¸ªæä¾›è€…ç»„æˆçš„é›†ç¾¤ï¼Ÿ</p></blockquote><p>Eureka Server ä¸Šçš„æä¾›è€…çš„æœåŠ¡åç§°å¦‚ä¸‹ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597299306196-90a4a42b.png" alt="1597299306196" tabindex="0" loading="lazy"><figcaption>1597299306196</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@Slf4jpublic</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>							    <span class="token comment">// é‡ç‚¹æ˜¯è¿™é‡Œï¼Œæ”¹æˆ æä¾›è€…åœ¨Eureka ä¸Šçš„åç§°ï¼Œè€Œä¸”æ— éœ€å†™ç«¯å£å·	    public static final String PAYMENY_URL = &quot;http://CLOUD-PROVIDER-SERVICE&quot;;    @Resource    private RestTemplate restTemplate;    @PostMapping(&quot;customer/payment/create&quot;)    public CommonResult&lt;Payment&gt; create (Payment payment){        return restTemplate.postForObject(PAYMENY_URL + &quot;/payment/create&quot;, payment, CommonResult.class);    }    @GetMapping(&quot;customer/payment/{id}&quot;)    public CommonResult&lt;Payment&gt; getPaymentById(@PathVariable(&quot;id&quot;)Long id){        return restTemplate.getForObject(PAYMENY_URL + &quot;/payment/&quot; + id, CommonResult.class);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿˜æœ‰ï¼Œæ¶ˆè´¹è€…é‡Œé¢å¯¹RestTemplateé…ç½®çš„configæ–‡ä»¶ï¼Œéœ€è¦æ›´æ”¹æˆå¦‚ä¸‹ï¼šï¼ˆå°±æ˜¯åŠ ä¸€ä¸ªæ³¨è§£ @LoadBalancedï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">LoadBalanced</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configurationpublic</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@LoadBalanced</span>  <span class="token comment">//è¿™ä¸ªæ³¨è§£ï¼Œå°±èµ‹äºˆäº†RestTemplate è´Ÿè½½å‡è¡¡çš„èƒ½åŠ›    public RestTemplate getRestTemplate(){        return new RestTemplate();    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æµ‹è¯•ï¼Œå®Œæˆï¼</p><h3 id="actuatorä¿¡æ¯é…ç½®" tabindex="-1"><a class="header-anchor" href="#actuatorä¿¡æ¯é…ç½®" aria-hidden="true">#</a> actuatorä¿¡æ¯é…ç½®</h3><p>ä¿®æ”¹ åœ¨Eureka æ³¨å†Œä¸­å¿ƒæ˜¾ç¤ºçš„ ä¸»æœºåï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597301247809-43fa38ad.png" alt="1597301247809" tabindex="0" loading="lazy"><figcaption>1597301247809</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597301299700-f8f719cb.png" alt="1597301299700" tabindex="0" loading="lazy"><figcaption>1597301299700</figcaption></figure><p>æ˜¾ç¤ºå¾®æœåŠ¡æ‰€åœ¨ çš„ä¸»æœºåœ°å€ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597301356051-09793931.png" alt="1597301356051" tabindex="0" loading="lazy"><figcaption>1597301356051</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597301396971-6c84c7f5.png" alt="1597301396971" tabindex="0" loading="lazy"><figcaption>1597301396971</figcaption></figure><h3 id="æœåŠ¡å‘ç°discovery" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å‘ç°discovery" aria-hidden="true">#</a> æœåŠ¡å‘ç°Discovery</h3><blockquote><p>å¯¹äºæ³¨å†Œè¿›eurekaé‡Œé¢çš„å¾®æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡æœåŠ¡å‘ç°æ¥è·å¾—è¯¥æœåŠ¡çš„ä¿¡æ¯</p></blockquote><ol><li>åœ¨ä¸»å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ï¼š@EnableDiscoveryClient</li><li>åœ¨ Controller é‡Œé¢æ‰“å°ä¿¡æ¯ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">DiscoveryClient</span> discoveryClient<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/customer/discovery&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">discovery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> services <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> service<span class="token operator">:</span> services<span class="token punctuation">)</span><span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;*****service: &quot;</span> <span class="token operator">+</span> service<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;CLOUD-ORDER-SERVICE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">ServiceInstance</span> serviceInstance<span class="token operator">:</span>instances<span class="token punctuation">)</span><span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>serviceInstance<span class="token punctuation">.</span><span class="token function">getServiceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> serviceInstance<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> serviceInstance<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> serviceInstance<span class="token punctuation">.</span><span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>discoveryClient<span class="token punctuation">;</span>    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" aria-hidden="true">#</a> Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597302605610-bd4d3ec2.png" alt="1597302605610" tabindex="0" loading="lazy"><figcaption>1597302605610</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597302314591-1687f515.png" alt="1597302314591" tabindex="0" loading="lazy"><figcaption>1597302314591</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597302449686-0e4fe07e.png" alt="1597302449686" tabindex="0" loading="lazy"><figcaption>1597302449686</figcaption></figure><p>ç¦æ­¢è‡ªæˆ‘ä¿æŠ¤:</p><blockquote><p>åœ¨ Eureka Server çš„æ¨¡å—ä¸­çš„ yml æ–‡ä»¶è¿›è¡Œé…ç½®ï¼š</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597302719594-65821caf.png" alt="1597302719594" tabindex="0" loading="lazy"><figcaption>1597302719594</figcaption></figure><p>ä¿®æ”¹ Eureka Client æ¨¡å—çš„ å¿ƒè·³é—´éš”æ—¶é—´ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597302855396-3315bd35.png" alt="1597302855396" tabindex="0" loading="lazy"><figcaption>1597302855396</figcaption></figure><h2 id="zookeeper" tabindex="-1"><a class="header-anchor" href="#zookeeper" aria-hidden="true">#</a> Zookeeper</h2><blockquote><p>springCloud æ•´åˆ zookeeper</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597303059965-25e94aca.png" alt="1597303059965" tabindex="0" loading="lazy"><figcaption>1597303059965</figcaption></figure><h3 id="æä¾›è€…-2" tabindex="-1"><a class="header-anchor" href="#æä¾›è€…-2" aria-hidden="true">#</a> æä¾›è€…</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªæä¾›è€…ï¼Œå’Œä¹‹å‰çš„ä¸€æ ·å³å¯ï¼Œä½¿ç”¨ 8004ç«¯å£</p></blockquote><p>pomæ–‡ä»¶å¦‚ä¸‹ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-provider-payment8004<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--springcloud æ•´åˆ zookeeper ç»„ä»¶--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zookeeper-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--mysql-connector-java--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--jdbc--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableDiscoveryClient</span>	<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8004</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8004</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Controller æ‰“å°ä¿¡æ¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@Slf4jpublic</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">PaymentService</span> paymentService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/zk&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentzk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">&quot;springcloud with zookeeper :&quot;</span> <span class="token operator">+</span> serverPort <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>***å¦‚æœ zookeeper çš„ç‰ˆæœ¬å’Œå¯¼å…¥çš„jaråŒ…ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯åŠ¨å°±ä¼šæŠ¥é”™ï¼Œç”±jaråŒ…å†²çªçš„é—®é¢˜ã€‚</p><p>è§£å†³è¿™ç§å†²çªï¼Œéœ€è¦åœ¨ pom æ–‡ä»¶ä¸­ï¼Œæ’é™¤æ‰å¼•èµ·å†²çªçš„jaråŒ…ï¼Œæ·»åŠ å’ŒæœåŠ¡å™¨zookeeperç‰ˆæœ¬ä¸€è‡´çš„ jar åŒ…ï¼Œ</p><p>ä½†æ˜¯æ–°å¯¼å…¥çš„ zookeeper jaråŒ… åˆæœ‰ slf4j å†²çªé—®é¢˜ï¼Œäºæ˜¯å†æ¬¡æ’é™¤å¼•èµ·å†²çªçš„jaråŒ…</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--springcloud æ•´åˆ zookeeper ç»„ä»¶--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zookeeper-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- æ’é™¤ä¸zookeeperç‰ˆæœ¬ä¸ä¸€è‡´åˆ°å¯¼è‡´ å†²çªçš„ jaråŒ… --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- æ·»åŠ å¯¹åº”ç‰ˆæœ¬çš„jaråŒ… --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- æ’é™¤å’Œ slf4j å†²çªçš„ jaråŒ… --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ymlæ–‡ä»¶ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">8004spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">cloud-provider-service  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">zookeeper</span><span class="token punctuation">:</span>      <span class="token key atrule">connect-string</span><span class="token punctuation">:</span> 192.168.40.100<span class="token punctuation">:</span><span class="token number">2181</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åŠ¨æµ‹è¯•ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597306855233-2f367179.png" alt="1597306855233" tabindex="0" loading="lazy"><figcaption>1597306855233</figcaption></figure><h3 id="æ¶ˆè´¹è€…-2" tabindex="-1"><a class="header-anchor" href="#æ¶ˆè´¹è€…-2" aria-hidden="true">#</a> æ¶ˆè´¹è€…</h3><blockquote><p>åˆ›å»ºæµ‹è¯•zookeeperä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„ æ¶ˆè´¹è€… æ¨¡å— cloud-customerzk-order80</p><p>ä¸»å¯åŠ¨ç±»ã€pomæ–‡ä»¶ã€ymlæ–‡ä»¶å’Œæä¾›è€…çš„ç±»ä¼¼</p></blockquote><p>configç±»ï¼Œæ³¨å…¥ RestTemplate</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootConfigurationpublic</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@LoadBalanced</span>    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controllerå±‚ä¹Ÿæ˜¯å’Œä¹‹å‰ç±»ä¼¼ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@Slf4jpublic</span> <span class="token keyword">class</span> <span class="token class-name">CustomerZkController</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">INVOKE_URL</span><span class="token operator">=</span><span class="token string">&quot;http://cloud-provider-service&quot;</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/customer/payment/zk&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">String</span> result <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token constant">INVOKE_URL</span> <span class="token operator">+</span> <span class="token string">&quot;/payment/zk&quot;</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…³äº zookeeper çš„é›†ç¾¤æ­å»ºï¼Œç›®å‰ä½¿ç”¨è¾ƒå°‘ï¼Œè€Œä¸”åœ¨ yml æ–‡ä»¶ä¸­çš„é…ç½®ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œä»¥åˆ—è¡¨å½¢å¼å†™å…¥ zookeeper çš„å¤šä¸ªåœ°å€å³å¯ï¼Œè€Œä¸”zookeeper é›†ç¾¤ï¼Œåœ¨ hadoopçš„ç¬”è®°ä¸­ä¹Ÿæœ‰è®°å½•ã€‚æ€»è€Œè¨€ä¹‹ï¼Œåªè¦é…åˆzookeeperé›†ç¾¤ï¼Œä»¥åŠymlæ–‡ä»¶çš„é…ç½®å°±èƒ½å®Œæˆé›†ç¾¤æ­å»º</p><h2 id="consul" tabindex="-1"><a class="header-anchor" href="#consul" aria-hidden="true">#</a> Consul</h2><blockquote><p>consulä¹Ÿæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„ä¸€ä¸ªå®ç°ï¼Œæ˜¯ç”±goè¯­è¨€å†™çš„ã€‚å®˜ç½‘åœ°å€ï¼š <a href="https://www.consul.io/intro" target="_blank" rel="noopener noreferrer">https://www.consul.io/intro<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä¸­æ–‡åœ°å€ï¼š <a href="https://www.springcloud.cc/spring-cloud-consul.html" target="_blank" rel="noopener noreferrer">https://www.springcloud.cc/spring-cloud-consul.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>åŠŸèƒ½ï¼š<img src="/Computer-Science-Learn-Notes/assets/1597380885054-d35c7382.png" alt="1597380885054" loading="lazy"></p></blockquote><h3 id="å®‰è£…å¹¶è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#å®‰è£…å¹¶è¿è¡Œ" aria-hidden="true">#</a> å®‰è£…å¹¶è¿è¡Œ</h3><blockquote><p>ä¸‹è½½åœ°å€ï¼š<a href="https://www.consul.io/downloads.html" target="_blank" rel="noopener noreferrer">https://www.consul.io/downloads.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æ‰“å¼€ä¸‹è½½çš„å‹ç¼©åŒ…ï¼Œåªæœ‰ä¸€ä¸ªexeæ–‡ä»¶ï¼Œå®é™…ä¸Šæ˜¯ä¸ç”¨å®‰è£…çš„ï¼Œåœ¨exeæ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰“å¼€dosçª—å£ä½¿ç”¨å³å¯ã€‚</p><p>ä½¿ç”¨å¼€å‘æ¨¡å¼å¯åŠ¨ï¼šconsul agent -dev</p><p>è®¿é—®8500ç«¯å£ï¼Œå³å¯è®¿é—®é¦–é¡µ</p></blockquote><h3 id="æä¾›è€…-3" tabindex="-1"><a class="header-anchor" href="#æä¾›è€…-3" aria-hidden="true">#</a> æä¾›è€…</h3><blockquote><p>æ–°å»ºæä¾›è€…æ¨¡å—ï¼šcloud-providerconsul-service8006</p></blockquote><p>pom æ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-providerconsul-service8006<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--springcloud consul server--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springbootæ•´åˆWebç»„ä»¶ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ—¥å¸¸é€šç”¨jaråŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>yml æ–‡ä»¶ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">8006spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">consul-provider-service  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">consul</span><span class="token punctuation">:</span>      <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token key atrule">localhost      port</span><span class="token punctuation">:</span> <span class="token key atrule">8500      discovery</span><span class="token punctuation">:</span>    <span class="token comment"># æŒ‡å®šæ³¨å†Œå¯¹å¤–æš´éœ²çš„æœåŠ¡åç§°        service-name: ${spring.application.name}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableDiscoveryClientpublic</span> <span class="token keyword">class</span> <span class="token class-name">ConsulProviderMain8006</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConsulProviderMain8006</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controllerä¹Ÿæ˜¯ç®€å•çš„å†™ä¸€ä¸‹å°±è¡Œã€‚</p><h3 id="æ¶ˆè´¹è€…-3" tabindex="-1"><a class="header-anchor" href="#æ¶ˆè´¹è€…-3" aria-hidden="true">#</a> æ¶ˆè´¹è€…</h3><blockquote><p>æ–°å»º ä¸€ä¸ª åœ¨82ç«¯å£çš„ æ¶ˆè´¹è€…æ¨¡å—ã€‚pomå’Œymlå’Œæä¾›è€…çš„ç±»ä¼¼ï¼Œä¸»å¯åŠ¨ç±»ä¸ç”¨è¯´ï¼Œè®°å¾—æ³¨å…¥RestTemplate</p></blockquote><p>controllerå±‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestControllerpublic</span> <span class="token keyword">class</span> <span class="token class-name">CustomerConsulController</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">INVOKE_URL</span><span class="token operator">=</span><span class="token string">&quot;http://consul-provider-service&quot;</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/customer/payment/consul&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">String</span> result <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token constant">INVOKE_URL</span> <span class="token operator">+</span> <span class="token string">&quot;/payment/consul&quot;</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><figure><img src="/Computer-Science-Learn-Notes/assets/1597384290665-9bf76624.png" alt="1597384290665" tabindex="0" loading="lazy"><figcaption>1597384290665</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597384344513-d45733ca.png" alt="1597384344513" tabindex="0" loading="lazy"><figcaption>1597384344513</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597384362750-8c32be61.png" alt="1597384362750" tabindex="0" loading="lazy"><figcaption>1597384362750</figcaption></figure><p>AP:</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597384508291-8e7b2bae.png" alt="1597384508291" tabindex="0" loading="lazy"><figcaption>1597384508291</figcaption></figure><p>CPï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597384554249-0fd315a5.png" alt="1597384554249" tabindex="0" loading="lazy"><figcaption>1597384554249</figcaption></figure><h1 id="æœåŠ¡è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡è°ƒç”¨" aria-hidden="true">#</a> æœåŠ¡è°ƒç”¨</h1><blockquote><p>éƒ½æ˜¯ä½¿ç”¨åœ¨ clientç«¯ï¼Œå³æœ‰ â€æ¶ˆè´¹è€…â€œ éœ€æ±‚çš„æ¨¡å—ä¸­ã€‚</p></blockquote><h2 id="ribbon" tabindex="-1"><a class="header-anchor" href="#ribbon" aria-hidden="true">#</a> Ribbon</h2><blockquote><p>æˆ‘ä»¬è¿™é‡Œæå‰å¯åŠ¨å¥½ä¹‹å‰åœ¨æ­å»ºçš„ eureka Server é›†ç¾¤ï¼ˆ5ä¸ªæ¨¡å—ï¼‰</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597384873709-ccc3f718.png" alt="1597384873709" tabindex="0" loading="lazy"><figcaption>1597384873709</figcaption></figure></blockquote><h3 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹" aria-hidden="true">#</a> ç®€ä»‹</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597384916817-9b4fc52a.png" alt="1597384916817" tabindex="0" loading="lazy"><figcaption>1597384916817</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597385089429-3e304e87.png" alt="1597385089429" tabindex="0" loading="lazy"><figcaption>1597385089429</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597385250463-fa95368e.png" alt="1597385250463" tabindex="0" loading="lazy"><figcaption>1597385250463</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597385267753-225172e4.png" alt="1597385267753" tabindex="0" loading="lazy"><figcaption>1597385267753</figcaption></figure><p>ä¸Šé¢åœ¨eurekaæ—¶ï¼Œç¡®å®å®ç°äº†è´Ÿè½½å‡è¡¡æœºåˆ¶ï¼Œé‚£æ˜¯å› ä¸º eureka-clientåŒ…é‡Œé¢è‡ªå¸¦ç€ribbonï¼š</p><blockquote><p>ä¸€å¥è¯ï¼ŒRibbon å°±æ˜¯ è´Ÿè½½å‡è¡¡ + RestTemplate è°ƒç”¨ã€‚å®é™…ä¸Šä¸æ­¢eurekaçš„jaråŒ…æœ‰ï¼Œzookeeperçš„jaråŒ…ï¼Œè¿˜æœ‰consulçš„jaråŒ…éƒ½åŒ…å«äº†ä»–ï¼Œå°±æ˜¯ä¸Šé¢ä½¿ç”¨çš„æœåŠ¡è°ƒç”¨ã€‚</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597385486515-b04bf5cc.png" alt="1597385486515" tabindex="0" loading="lazy"><figcaption>1597385486515</figcaption></figure><p>å¦‚æœè‡ªå·±æ·»åŠ ï¼Œåœ¨ æ¨¡å—çš„ pom æ–‡ä»¶ä¸­å¼•å…¥ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-ribbon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯¹äºRestTemplate çš„ä¸€äº›è¯´æ˜ï¼š</p><blockquote><p>æœ‰ä¸¤ç§è¯·æ±‚æ–¹å¼ï¼špostå’Œget ,è¿˜æœ‰ä¸¤ç§è¿”å›ç±»å‹ï¼šobject å’Œ Entity</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597385762892-ddb83bbd.png" alt="1597385762892" tabindex="0" loading="lazy"><figcaption>1597385762892</figcaption></figure><p>RestTemplate çš„ ForEntity ç›¸æ¯” ForObjectç‰¹æ®Šçš„åœ°æ–¹:</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597385959115-310b06b3.png" alt="1597385959115" tabindex="0" loading="lazy"><figcaption>1597385959115</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597385892918-1483da27.png" alt="1597385892918" tabindex="0" loading="lazy"><figcaption>1597385892918</figcaption></figure><p>å°±æ˜¯ å¦‚æœä½¿ç”¨ ForObject å¾—åˆ°çš„å°±æ˜¯æä¾›è€…è¿”å›çš„å¯¹è±¡ï¼Œè€Œå¦‚æœè¦ä½¿ç”¨ ForEntity å¾—åˆ°æ—¶ ResponstEntityå¯¹è±¡ï¼Œä½¿ç”¨getBody()æ‰èƒ½å¾—åˆ°æä¾›è€…è¿”å›çš„æ•°æ®ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token comment">//ä½¿ç”¨forEnriryç¤ºä¾‹ï¼š	@GetMapping(&quot;customer/payment/forEntity/{id}&quot;)    public CommonResult&lt;Payment&gt; getPaymentById2(@PathVariable(&quot;id&quot;)Long id){                ResponseEntity&lt;CommonResult&gt; entity = restTemplate.getForEntity(PAYMENY_URL + &quot;/payment/&quot; + id, CommonResult.class);                if(entity.getStatusCode().is2xxSuccessful()){            return entity.getBody();        }else{            return new CommonResult&lt;&gt;(444, &quot;æ“ä½œå¤±è´¥&quot;);        }    }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> è´Ÿè½½å‡è¡¡</h3><p>Ribbon è´Ÿè½½å‡è¡¡è§„åˆ™ç±»å‹ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597386516205-39595a08.png" alt="1597386516205" tabindex="0" loading="lazy"><figcaption>1597386516205</figcaption></figure><p>é…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597386638507-d2aea401.png" alt="1597386638507" tabindex="0" loading="lazy"><figcaption>1597386638507</figcaption></figure><blockquote><p>æ³¨æ„ä¸Šé¢è¯´çš„ï¼Œè€ŒSpringbootä¸»å¯åŠ¨ç±»ä¸Šçš„ @SpringBootApplication æ³¨è§£ï¼Œç›¸å½“äºåŠ äº†@ComponentScanæ³¨è§£ï¼Œä¼šè‡ªåŠ¨æ‰«æå½“å‰åŒ…åŠå­åŒ…ï¼Œæ‰€ä»¥æ³¨æ„ä¸è¦æ”¾åœ¨SpringBootä¸»å¯åŠ¨ç±»çš„åŒ…å†…ã€‚</p></blockquote><p>åˆ›å»ºåŒ…ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597386816245-fc2dc1f6.png" alt="1597386816245" tabindex="0" loading="lazy"><figcaption>1597386816245</figcaption></figure><p>åœ¨è¿™ä¸ªåŒ…ä¸‹æ–°å»º MySelfRuleç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>myrule</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">IRule</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">RandomRule</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configurationpublic</span> <span class="token keyword">class</span> <span class="token class-name">MySelfRule</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">IRule</span> <span class="token function">myrule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RandomRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è´Ÿè½½å‡è¡¡è§„åˆ™å®šä¹‰ä¸ºéšæœº    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶ååœ¨ä¸»å¯åŠ¨ç±»ä¸Šæ·»åŠ å¦‚ä¸‹æ³¨è§£ @RibbonClientï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>myrule<span class="token punctuation">.</span></span><span class="token class-name">MySelfRule</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>ribbon<span class="token punctuation">.</span></span><span class="token class-name">RibbonClient</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableEurekaClient</span><span class="token annotation punctuation">@EnableDiscoveryClient</span>	   <span class="token comment">//æŒ‡å®šè¯¥è´Ÿè½½å‡è¡¡è§„åˆ™å¯¹å“ªä¸ªæä¾›è€…æœåŠ¡ä½¿ç”¨    åŠ è½½è‡ªå®šä¹‰è§„åˆ™çš„é…ç½®ç±»@RibbonClient(name=&quot;CLOUD-PROVIDER-SERVICE&quot;, configuration = MySelfRule.class)public class OrderMain80 {    public static void main(String[] args){        SpringApplication.run(OrderMain80.class, args);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="è½®è¯¢ç®—æ³•åŸç†" tabindex="-1"><a class="header-anchor" href="#è½®è¯¢ç®—æ³•åŸç†" aria-hidden="true">#</a> è½®è¯¢ç®—æ³•åŸç†</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597387609476-884f2cdd.png" alt="1597387609476" tabindex="0" loading="lazy"><figcaption>1597387609476</figcaption></figure><h2 id="openfeign" tabindex="-1"><a class="header-anchor" href="#openfeign" aria-hidden="true">#</a> OpenFeign</h2><h3 id="æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°" aria-hidden="true">#</a> æ¦‚è¿°</h3><blockquote><p>è¿™é‡Œå’Œä¹‹å‰å­¦çš„dubboå¾ˆåƒï¼Œä¾‹å¦‚æ¶ˆè´¹è€…çš„controller å¯ä»¥è°ƒç”¨æä¾›è€…çš„ serviceå±‚æ–¹æ³•ï¼Œä½†æ˜¯ä¸ä¸€æ ·ï¼Œå®ƒè²Œä¼¼åªèƒ½è°ƒç”¨æä¾›è€…çš„ controllerï¼Œå³å†™ä¸€ä¸ªæä¾›è€…é¡¹ç›®çš„controllerçš„æ¥å£ï¼Œæ¶ˆè´¹è€…æ¥è°ƒç”¨è¿™ä¸ªæ¥å£æ–¹æ³•ï¼Œå°±è¿˜æ˜¯ç›¸å½“äºæ˜¯è°ƒç”¨æä¾›è€…çš„ controller ï¼Œå’ŒRestTemplate æ²¡æœ‰æœ¬è´¨åŒºåˆ«</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597389321006-4094c65a.png" alt="1597389321006" tabindex="0" loading="lazy"><figcaption>1597389321006</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597389522738-66e2ea51.png" alt="1597389522738" tabindex="0" loading="lazy"><figcaption>1597389522738</figcaption></figure><h3 id="ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨" aria-hidden="true">#</a> ä½¿ç”¨</h3><blockquote><p>æ–°å»ºä¸€ä¸ªæ¶ˆè´¹è€…å‹Ÿæ¨¡å—ã€‚feignè‡ªå¸¦è´Ÿè½½å‡è¡¡é…ç½®ï¼Œæ‰€ä»¥ä¸ç”¨æ‰‹åŠ¨é…ç½®</p></blockquote><p>pom ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- Open Feign --&gt;</span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- eureka Client --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableFeignClients</span>   <span class="token comment">//å…³é”®æ³¨è§£public class CustomerFeignMain80 {    public static void main(String[] args) {        SpringApplication.run(CustomerFeignMain80.class, args);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ–°å»ºä¸€ä¸ªservice</p><blockquote><p>è¿™ä¸ªserviceè¿˜æ˜¯ customer æ¨¡å—çš„æ¥å£ï¼Œå’Œæä¾›è€…æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä¸éœ€è¦åŒ…ç±»åä¸€è‡´ã€‚å®ƒä½¿ç”¨èµ·æ¥å°±ç›¸å½“äºæ˜¯æ™®é€šçš„serviceã€‚</p><p>æ¨æµ‹å¤§è‡´åŸç†ï¼Œå¯¹äºè¿™ä¸ªservice æ¥å£ï¼Œè¯»å–å®ƒæŸä¸ªæ–¹æ³•çš„æ³¨è§£ï¼ˆGETæˆ–è€…POSTæ³¨è§£ä¸å†™æŠ¥é”™ï¼‰ï¼ŒçŸ¥é“äº†è¯·æ±‚æ–¹å¼å’Œè¯·æ±‚åœ°å€ï¼Œè€ŒæŠ½è±¡æ–¹æ³•ï¼Œåªæ˜¯å¯¹äºæˆ‘ä»¬æ¥è®²ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå¯ä»¥è¿›è¡Œä¼ å‚ç­‰ã€‚</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;CLOUD-PROVIDER-SERVICE&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//æœåŠ¡åç§°ï¼Œè¦å’Œeurekaä¸Šé¢çš„ä¸€è‡´æ‰è¡Œpublic interface PaymentFeignService {    //è¿™ä¸ªå°±æ˜¯provider çš„controllerå±‚çš„æ–¹æ³•å®šä¹‰ã€‚    @GetMapping(value = &quot;/payment/{id}&quot;)    public CommonResult getPaymentById(@PathVariable(&quot;id&quot;)Long id);}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Controllerå±‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//ä½¿ç”¨èµ·æ¥å°±ç›¸å½“äºæ˜¯æ™®é€šçš„serviceã€‚@RestControllerpublic class CustomerFeignController {    @Resource    private PaymentFeignService paymentFeignService;    @GetMapping(&quot;customer/feign/payment/{id}&quot;)    public CommonResult&lt;Payment&gt; getPaymentById(@PathVariable(&quot;id&quot;) Long id){        return paymentFeignService.getPaymentById(id);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="è¶…æ—¶æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#è¶…æ—¶æ§åˆ¶" aria-hidden="true">#</a> è¶…æ—¶æ§åˆ¶</h3><blockquote><p>Openfeigné»˜è®¤è¶…æ—¶ç­‰å¾…ä¸ºä¸€ç§’ï¼Œåœ¨æ¶ˆè´¹è€…é‡Œé¢é…ç½®è¶…æ—¶æ—¶é—´</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597467640971-357cefde.png" alt="1597467640971" tabindex="0" loading="lazy"><figcaption>1597467640971</figcaption></figure><h3 id="å¼€å¯æ—¥å¿—æ‰“å°" tabindex="-1"><a class="header-anchor" href="#å¼€å¯æ—¥å¿—æ‰“å°" aria-hidden="true">#</a> å¼€å¯æ—¥å¿—æ‰“å°</h3><p>é¦–å…ˆå†™ä¸€ä¸ªconfigé…ç½®ç±»ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597468025532-3b063a3c.png" alt="1597468025532" tabindex="0" loading="lazy"><figcaption>1597468025532</figcaption></figure><p>ç„¶ååœ¨ymlæ–‡ä»¶ä¸­å¼€å¯æ—¥å¿—æ‰“å°é…ç½®ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597468071030-b79a693e.png" alt="1597468071030" tabindex="0" loading="lazy"><figcaption>1597468071030</figcaption></figure><h1 id="ä¸­çº§éƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#ä¸­çº§éƒ¨åˆ†" aria-hidden="true">#</a> ä¸­çº§éƒ¨åˆ†</h1><blockquote><p>ä¸»è¦æ˜¯æœåŠ¡é™çº§ã€æœåŠ¡ç†”æ–­ã€æœåŠ¡é™æµçš„å¼€å‘æ€æƒ³å’Œæ¡†æ¶å®ç°</p></blockquote><h1 id="hystrix-æ–­è·¯å™¨" tabindex="-1"><a class="header-anchor" href="#hystrix-æ–­è·¯å™¨" aria-hidden="true">#</a> Hystrix æ–­è·¯å™¨</h1><blockquote><p>å®˜æ–¹åœ°å€ï¼š<a href="https://github.com/Netflix/Hystrix/wiki/How-To-Use" target="_blank" rel="noopener noreferrer">https://github.com/Netflix/Hystrix/wiki/How-To-Use<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h2 id="æ¦‚è¿°-1" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°-1" aria-hidden="true">#</a> æ¦‚è¿°</h2><figure><img src="/Computer-Science-Learn-Notes/assets/1597468299249-63f8eaa7.png" alt="1597468299249" tabindex="0" loading="lazy"><figcaption>1597468299249</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597468336180-f0091723.png" alt="1597468336180" tabindex="0" loading="lazy"><figcaption>1597468336180</figcaption></figure><p>æœåŠ¡é™çº§ï¼š</p><blockquote><p>æœåŠ¡å™¨å¿™ç¢Œæˆ–è€…ç½‘ç»œæ‹¥å µæ—¶ï¼Œä¸è®©å®¢æˆ·ç«¯ç­‰å¾…å¹¶ç«‹åˆ»è¿”å›ä¸€ä¸ªå‹å¥½æç¤ºï¼Œfallback</p><p>å‘ç”Ÿçš„æƒ…å†µï¼š<img src="/Computer-Science-Learn-Notes/assets/1597468904865-a4fd3283.png" alt="1597468904865" loading="lazy"></p></blockquote><p>æœåŠ¡ç†”æ–­ï¼š</p><blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597552633205-83ed5a43.png" alt="1597552633205" tabindex="0" loading="lazy"><figcaption>1597552633205</figcaption></figure></blockquote><p>æœåŠ¡é™æµï¼š</p><blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597468986791-e8ca9f29.png" alt="1597468986791" tabindex="0" loading="lazy"><figcaption>1597468986791</figcaption></figure></blockquote><blockquote><p>å¯è§ï¼Œä¸Šé¢çš„æŠ€æœ¯ä¸è®ºæ˜¯æ¶ˆè´¹è€…è¿˜æ˜¯æä¾›è€…ï¼Œæ ¹æ®çœŸå®ç¯å¢ƒéƒ½æ˜¯å¯ä»¥åŠ å…¥é…ç½®çš„ã€‚</p></blockquote><h2 id="æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹" aria-hidden="true">#</a> æ¡ˆä¾‹</h2><blockquote><p>é¦–å…ˆæ„å»ºä¸€ä¸ªeurekaä½œä¸ºæœåŠ¡ä¸­å¿ƒçš„å•æœºç‰ˆå¾®æœåŠ¡æ¶æ„ ï¼Œè¿™é‡Œä½¿ç”¨ä¹‹å‰eureka Server 7001æ¨¡å—ï¼Œä½œä¸ºæœåŠ¡ä¸­å¿ƒ</p></blockquote><p>æ–°å»º æä¾›è€… cloud-provider-hystrix-payment8001 æ¨¡å—ï¼š</p><p>pom æ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- hystrix --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--eureka-client--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸‹é¢ä¸»å¯åŠ¨ç±»ã€serviceã€å’Œcontrollerä»£ç éƒ½å¾ˆç®€å•æ™®é€šã€‚</p><p>ä¸»å¯åŠ¨ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>exclude <span class="token operator">=</span> <span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@EnableEurekaClientpublic</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8001</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>serviceå±‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Servicepublic</span> <span class="token keyword">class</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>    <span class="token doc-comment comment">/**     * å¯ä»¥æ­£å¸¸è®¿é—®çš„æ–¹æ³•     * @param id     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentinfo_Ok</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">&quot;çº¿ç¨‹æ± ï¼š&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;--paymentInfo_OKï¼Œid:&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token doc-comment comment">/**    è¶…æ—¶è®¿é—®çš„æ–¹æ³•    */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentinfo_Timeout</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">int</span> interTime <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>        <span class="token keyword">try</span><span class="token punctuation">{</span>            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>interTime<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token string">&quot;çº¿ç¨‹æ± ï¼š&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;--paymentInfo_Timeoutï¼Œid:&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;è€—æ—¶&quot;</span> <span class="token operator">+</span> interTime <span class="token operator">+</span> <span class="token string">&quot;ç§’é’Ÿ--&quot;</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controllerå±‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@Slf4jpublic</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">PaymentService</span> paymentService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/hystrix/{id}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;paymentInfo_OKKKKOKKK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> paymentService<span class="token punctuation">.</span><span class="token function">paymentinfo_Ok</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;paymentInfo_timeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> paymentService<span class="token punctuation">.</span><span class="token function">paymentinfo_Timeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="æ¨¡æ‹Ÿé«˜å¹¶å‘" tabindex="-1"><a class="header-anchor" href="#æ¨¡æ‹Ÿé«˜å¹¶å‘" aria-hidden="true">#</a> æ¨¡æ‹Ÿé«˜å¹¶å‘</h3><blockquote><p>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªæ–°ä¸œè¥¿ JMeter å‹åŠ›æµ‹è¯•å™¨</p><p>ä¸‹è½½å‹ç¼©åŒ…ï¼Œè§£å‹ï¼ŒåŒå‡» /bin/ ä¸‹çš„ jmeter.bat å³å¯å¯åŠ¨</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597471683432-34adffa6.png" alt="1597471683432" tabindex="0" loading="lazy"><figcaption>1597471683432</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597471750363-217e4ecf.png" alt="1597471750363" tabindex="0" loading="lazy"><figcaption>1597471750363</figcaption></figure><p>ctrl + S ä¿å­˜ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597472029967-cc75c78c.png" alt="1597472029967" tabindex="0" loading="lazy"><figcaption>1597472029967</figcaption></figure></blockquote><p>ä»æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼Œå½“æ¨¡æ‹Ÿçš„è¶…é•¿è¯·æ±‚è¢«é«˜å¹¶å‘ä»¥åï¼Œè®¿é—®æ™®é€šçš„å°è¯·æ±‚é€Ÿç‡ä¹Ÿä¼šè¢«æ‹‰ä½ã€‚</p><p>æ–°å»ºæ¶ˆè´¹è€… cloud-customer-feign-hystrix-order80 æ¨¡å—ï¼šä»¥feignä¸ºæœåŠ¡è°ƒç”¨ï¼Œeurekaä¸ºæœåŠ¡ä¸­å¿ƒçš„æ¨¡å—ï¼Œymlã€pomç­‰æ–‡ä»¶ä¸å†èµ˜å†™ã€‚</p><p>æµ‹è¯•å¯è§ï¼Œå½“å¯åŠ¨é«˜å¹¶å‘æµ‹è¯•æ—¶ï¼Œæ¶ˆè´¹è€…è®¿é—®ä¹Ÿä¼šå˜å¾—å¾ˆæ…¢ï¼Œç”šè‡³å‡ºç°è¶…æ—¶æŠ¥é”™ã€‚</p><p>è§£å†³æ€è·¯ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597474348167-5a344dc2.png" alt="1597474348167" tabindex="0" loading="lazy"><figcaption>1597474348167</figcaption></figure><h3 id="æœåŠ¡é™çº§" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡é™çº§" aria-hidden="true">#</a> æœåŠ¡é™çº§</h3><blockquote><p>ä¸€èˆ¬æœåŠ¡é™çº§æ”¾åœ¨å®¢æˆ·ç«¯ï¼Œå³ æ¶ˆè´¹è€…ç«¯ ï¼Œä½†æ˜¯æä¾›è€…ç«¯ä¸€æ ·èƒ½ä½¿ç”¨ã€‚</p><p>é¦–å…ˆæä¾›è€…ï¼Œå³8001 å…ˆä»è‡ªèº«æ‰¾é—®é¢˜ï¼Œè®¾ç½®è‡ªèº«è°ƒç”¨è¶…æ—¶çš„å³°å€¼ï¼Œå³°å€¼å†…æ­£å¸¸è¿è¡Œï¼Œè¶…å‡ºå³°å€¼éœ€è¦æœ‰å…œåº•çš„æ–¹æ³•å¤„ç†ï¼Œä½œæœåŠ¡é™çº§fallback</p></blockquote><p>é¦–å…ˆ å¯¹ 8001 çš„serviceè¿›è¡Œé…ç½®ï¼ˆå¯¹å®¹æ˜“è¶…æ—¶çš„æ–¹æ³•è¿›è¡Œé…ç½®) :</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentInfo_timeoutHandler&quot;</span><span class="token punctuation">,</span> commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>            <span class="token comment">//è®¾ç½®å³°å€¼ï¼Œè¶…è¿‡ 3 ç§’ï¼Œå°±ä¼šè°ƒç”¨å…œåº•æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶é—´ä¹Ÿå¯ä»¥ç”±feignæ§åˆ¶            @HystrixProperty(name=&quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;3000&quot;)    })    public String paymentinfo_Timeout(Integer id){        ......ä¼šæ‰§è¡Œ5ç§’.....    }	//å…œåº•æ–¹æ³•ï¼Œæ ¹æ®ä¸Šè¿°é…ç½®ï¼Œç¨‹åºå†…å‘ç”Ÿå¼‚å¸¸ã€æˆ–è€…è¿è¡Œè¶…æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œè¯¥å…œåº•æ–¹æ³•    public String paymentInfo_timeoutHandler(Integer id){        .......    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»æ·»åŠ æ³¨è§£ï¼š @EnableCircuitBreaker</p><p>ç„¶åå¯¹ 80 è¿›è¡ŒæœåŠ¡é™çº§ï¼šå¾ˆæ˜æ˜¾ service å±‚æ˜¯æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹æ¶ˆè´¹è€…ï¼Œåœ¨å®ƒçš„ controller å±‚è¿›è¡Œé™çº§</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	 <span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentInfo_timeoutHandler&quot;</span><span class="token punctuation">,</span> commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>            <span class="token comment">//è®¾ç½®å³°å€¼ï¼Œè¶…è¿‡ 3 ç§’ï¼Œå°±ä¼šè°ƒç”¨å…œåº•æ–¹æ³•            @HystrixProperty(name=&quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;3000&quot;)    })    @GetMapping(&quot;/customer/payment/hystrix/timeout/{id}&quot;)    public String paymentInfo_Timeout(@PathVariable(&quot;id&quot;)Integer id){        log.info(&quot;paymentInfo_timeout&quot;);        return orderService.paymentInfo_Timeout(id);    }	//å…œåº•æ–¹æ³•ï¼Œæ³¨æ„ï¼Œå…œåº•æ–¹æ³•å‚æ•°éšæ„    public String paymentInfo_timeoutHandler(@PathVariable(&quot;id&quot;)Integer id){        log.info(&quot;paymentInfo_timeout--handler&quot;);        return &quot;è®¿é—® payment å¤±è´¥----äººå·¥æŠ¥é”™&quot;;    }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»æ·»åŠ æ³¨è§£ï¼š @EnableCircuitBreaker</p><p>å®Œæˆæµ‹è¯•ï¼ æ³¨æ„ï¼Œæ¶ˆè´¹è€…é™çº§è®¾ç½®çš„è¶…æ—¶æ—¶é—´å’Œæä¾›è€…çš„æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå°±ç®—æä¾›è€…å³°å€¼æ˜¯ 5 ç§’ï¼Œè€Œæ¶ˆè´¹è€…å³°å€¼æ˜¯ 3ç§’ï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…ä¾ç„¶æŠ¥é”™ã€‚å°±æ˜¯æ¯ä¸ªæ¨¡å—åœ¨æœåŠ¡é™çº§ä¸Šï¼Œéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</p><h3 id="å…¨å±€æœåŠ¡é™çº§" tabindex="-1"><a class="header-anchor" href="#å…¨å±€æœåŠ¡é™çº§" aria-hidden="true">#</a> å…¨å±€æœåŠ¡é™çº§</h3><blockquote><p>ä¸Šé¢çš„é™çº§ç­–ç•¥ï¼Œå¾ˆæ˜æ˜¾é€ æˆäº†ä»£ç çš„æ‚ä¹±ï¼Œæå‡äº†è€¦åˆåº¦ï¼Œè€Œä¸”æŒ‰ç…§è¿™æ ·ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½éœ€è¦é…ç½®ä¸€ä¸ªå…œåº•æ–¹æ³•ï¼Œå¾ˆç¹çã€‚ç°åœ¨å°†é™çº§å¤„ç†æ–¹æ³•ï¼ˆå…œåº•æ–¹æ³•ï¼‰åšä¸€ä¸ªå…¨å±€çš„é…ç½®ï¼Œè®¾ç½®å…±æœ‰çš„å…œåº•æ–¹æ³•å’Œç‹¬äº«çš„å…œåº•æ–¹æ³•ã€‚</p></blockquote><p>é—®é¢˜-æ¯ä¸ªæ–¹æ³•é…ç½®ä¸€ä¸ªï¼Œè§£å†³ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@Slf4j</span><span class="token comment">//å…¨å±€é…ç½®é™çº§æ–¹æ³•çš„æ³¨è§£@DefaultProperties(defaultFallback = &quot;paymentInfo_timeoutHandler&quot;)public class OrderController {    .....    // ä¸å†™è‡ªå·±çš„ fallbackMethod å±æ€§ï¼Œå°±ä½¿ç”¨å…¨å±€é»˜è®¤çš„    @HystrixCommand(commandProperties = {            @HystrixProperty(name=&quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;3000&quot;)    })    @GetMapping(&quot;/customer/payment/hystrix/timeout/{id}&quot;)    public String paymentInfo_Timeout(@PathVariable(&quot;id&quot;)Integer id){        ......    }    //å…œåº•æ–¹æ³•    public String paymentInfo_timeoutHandler(){        log.info(&quot;paymentInfo_timeout--handler&quot;);        return &quot;è®¿é—® payment å¤±è´¥----äººå·¥æŠ¥é”™&quot;;    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é—®é¢˜-è·Ÿä¸šåŠ¡é€»è¾‘æ··åˆï¼Œè§£å†³ï¼ˆè§£è€¦ï¼‰ï¼š</p><blockquote><p>åœ¨è¿™ç§æ–¹å¼ä¸€èˆ¬æ˜¯åœ¨å®¢æˆ·ç«¯ï¼Œå³æ¶ˆè´¹è€…ç«¯ï¼Œé¦–å…ˆä¸Šé¢å†controllerä¸­æ·»åŠ çš„ @HystrixCommand å’Œ @DefaultProperties ä¸¤ä¸ªæ³¨è§£å»æ‰ã€‚å°±æ˜¯ä¿æŒåŸæ¥çš„controller</p></blockquote><ol><li>ymlæ–‡ä»¶é…ç½®</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">80spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">cloud-customer-feign-hystrix-serviceeureka</span><span class="token punctuation">:</span>  <span class="token key atrule">client</span><span class="token punctuation">:</span>    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token key atrule">true    fetch-registry</span><span class="token punctuation">:</span> <span class="token key atrule">true    service-url</span><span class="token punctuation">:</span>      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/<span class="token comment"># ç”¨äºæœåŠ¡é™çº§ åœ¨æ³¨è§£@FeignClient ä¸­æ·»åŠ  fallback å±æ€§å€¼feign:  hystrix:    enabled: true  # åœ¨feignä¸­å¼€å¯ hystrix</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä¿®æ”¹service æ¥å£ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>											<span class="token comment">// è¿™é‡Œæ˜¯é‡ç‚¹@FeignClient(value = &quot;CLOUD-PROVIDER-HYSTRIX-PAYMENT&quot;, fallback = OrderFallbackService.class)public interface OrderService {    @GetMapping(&quot;/payment/hystrix/{id}&quot;)    public String paymentInfo_OK(@PathVariable(&quot;id&quot;)Integer id);    @GetMapping(&quot;/payment/hystrix/timeout/{id}&quot;)    public String paymentInfo_Timeout(@PathVariable(&quot;id&quot;)Integer id);}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>fallback æŒ‡å‘çš„ç±»ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span>						<span class="token comment">//æ³¨æ„è¿™é‡Œï¼Œå®ƒå®ç°äº†serviceæ¥å£public class OrderFallbackService implements  OrderService{    @Override    public String paymentInfo_OK(Integer id) {        return &quot;OrderFallbackService --å‘ç”Ÿå¼‚å¸¸&quot;;    }    @Override    public String paymentInfo_Timeout(Integer id) {        return &quot;OrderFallbackService --å‘ç”Ÿå¼‚å¸¸--paymentInfo_Timeout&quot;;    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ–°é—®é¢˜ï¼Œè¿™æ ·é…ç½®å¦‚ä½•è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Ÿ</p><blockquote><p>é¦–å…ˆè¦çŸ¥é“ ä¸‹é¢ä¸¤ä¸ª yml é…ç½®é¡¹ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">hystrix.command.default.execution.timeout.enable</span><span class="token punctuation">=</span><span class="token value attr-value">true    ## é»˜è®¤å€¼## ä¸ºfalseåˆ™è¶…æ—¶æ§åˆ¶æœ‰ribbonæ§åˆ¶ï¼Œä¸ºtrueåˆ™hystrixè¶…æ—¶å’Œribbonè¶…æ—¶éƒ½æ˜¯ç”¨ï¼Œä½†æ˜¯è°å°è°ç”Ÿæ•ˆï¼Œé»˜è®¤ä¸ºtruehystrix.command.default.execution.isolation.thread.timeoutInMilliseconds=1000  ## é»˜è®¤å€¼## ç†”æ–­å™¨çš„è¶…æ—¶æ—¶é•¿é»˜è®¤1ç§’ï¼Œæœ€å¸¸ä¿®æ”¹çš„å‚æ•°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>çœ‹æ‡‚ä»¥åï¼Œæ‰€ä»¥ï¼š</p><p>åªéœ€è¦åœ¨ymlé…ç½®é‡Œé¢é…ç½® Ribbon çš„ è¶…æ—¶æ—¶é•¿å³å¯ã€‚æ³¨æ„ï¼šhystrix é»˜è®¤è‡ªå¸¦ ribbonåŒ…ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">ribbon</span><span class="token punctuation">:</span>	<span class="token key atrule">ReadTimeout</span><span class="token punctuation">:</span> <span class="token key atrule">xxxx	ConnectTimeout</span><span class="token punctuation">:</span> xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><h3 id="æœåŠ¡ç†”æ–­" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç†”æ–­" aria-hidden="true">#</a> æœåŠ¡ç†”æ–­</h3><blockquote><p>å®é™…ä¸ŠæœåŠ¡ç†”æ–­ å’Œ æœåŠ¡é™çº§ æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå°±åƒ java å’Œ javaScript</p><p>æœåŠ¡ç†”æ–­ï¼Œæœ‰ç‚¹è‡ªæˆ‘æ¢å¤çš„å‘³é“</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597552755235-2e4929a4.png" alt="1597552755235" tabindex="0" loading="lazy"><figcaption>1597552755235</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597555271916-c8b3a809.png" alt="1597555271916" tabindex="0" loading="lazy"><figcaption>1597555271916</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597555381295-a54fe746.png" alt="1597555381295" tabindex="0" loading="lazy"><figcaption>1597555381295</figcaption></figure><p>ä»¥ 8001 é¡¹ç›®ä¸ºç¤ºä¾‹ï¼š</p><p>serviceå±‚çš„æ–¹æ³•è®¾ç½®æœåŠ¡ç†”æ–­:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code> 	<span class="token comment">//=====æœåŠ¡ç†”æ–­    @HystrixCommand(fallbackMethod = &quot;paymentCircuitBreaker_fallback&quot;, commandProperties = {            @HystrixProperty(name=&quot;circuitBreaker.enabled&quot;, value=&quot;true&quot;),  // æ˜¯å¦å¼€å¯æ–­è·¯å™¨            @HystrixProperty(name=&quot;circuitBreaker.requestVolumeThreshold&quot;, value=&quot;10&quot;),  //è¯·æ±‚æ¬¡æ•°            @HystrixProperty(name=&quot;circuitBreaker.sleepWindowInMilliseconds&quot;, value=&quot;10000&quot;), // æ—¶é—´çª—å£æœŸ            @HystrixProperty(name=&quot;circuitBreaker.errorThresholdPercentage&quot;, value=&quot;60&quot;),  // å¤±è´¥ç‡è¾¾åˆ°å¤šå°‘åè·³é—¸            //æ•´ä½“æ„æ€ï¼š10ç§’å†… 10æ¬¡è¯·æ±‚ï¼Œæœ‰6æ¬¡å¤±è´¥ï¼Œå°±è·³é—¸    })    public String paymentCircuitBreaker(Integer id){        //æ¨¡æ‹Ÿå‘ç”Ÿå¼‚å¸¸        if(id &lt; 0){            throw new RuntimeException(&quot;*****idï¼Œä¸èƒ½ä¸ºè´Ÿæ•°&quot;);        }        String serialNumber = IdUtil.simpleUUID();        return Thread.currentThread().getName() + &quot;\t&quot; + &quot;è°ƒç”¨æˆåŠŸï¼Œæµæ°´å·ï¼š&quot; + serialNumber;    }    public String paymentCircuitBreaker_fallback(Integer id){        return &quot;id ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œè¯·ç¨åå†è¯•....&quot;;    }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controller:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token comment">//====æœåŠ¡ç†”æ–­    @GetMapping(&quot;/payment/circuit/{id}&quot;)    public String paymentCircuitBreaker(@PathVariable(&quot;id&quot;)Integer id){        return paymentService.paymentCircuitBreaker(id);    }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…³äºè§£è€¦ä»¥åçš„å…¨å±€é…ç½®è¯´æ˜ï¼š</p><p>ä¾‹å¦‚ä¸Šé¢æåˆ°çš„å…¨å±€æœåŠ¡é™çº§ï¼Œå¹¶ä¸”æ˜¯feign+hystrixæ•´åˆï¼Œå³ service å®ç°ç±»çš„æ–¹å¼ï¼Œå¦‚ä½•åšå…¨å±€é…ç½®ï¼Ÿ</p><blockquote><p>ä¸Šé¢æœ‰ åšå…¨å±€é…ç½®æ—¶ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾—çµæ„Ÿï¼Œå³åœ¨ymlæ–‡ä»¶ä¸­ è¿›è¡Œç†”æ–­é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">hystrix:command</span><span class="token punctuation">:</span> <span class="token key atrule">default</span><span class="token punctuation">:</span>   <span class="token key atrule">circuitBreaker</span><span class="token punctuation">:</span>     <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token key atrule">true     requestVolumeThreshold</span><span class="token punctuation">:</span> <span class="token key atrule">10     sleepWindowInMilliseconds</span><span class="token punctuation">:</span> <span class="token key atrule">10000     errorThresholdPercentage</span><span class="token punctuation">:</span> <span class="token number">60</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><h2 id="hystrix-dashboard" tabindex="-1"><a class="header-anchor" href="#hystrix-dashboard" aria-hidden="true">#</a> Hystrix DashBoard</h2><figure><img src="/Computer-Science-Learn-Notes/assets/1597556913055-70425cb6.png" alt="1597556913055" tabindex="0" loading="lazy"><figcaption>1597556913055</figcaption></figure><p>æ–°å»ºæ¨¡å— cloud-hystrix-dashboard9001 ï¼š</p><p>pom æ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- hystrix Dashboard--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix-dashboard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- å¸¸è§„ jar åŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ymlæ–‡ä»¶åªéœ€è¦é…ç½®ç«¯å£å·ï¼Œä¸»å¯åŠ¨ç±»åŠ ä¸Šè¿™æ ·æ³¨è§£ï¼š@EnableHystrixDashboard</p><p>å¯åŠ¨æµ‹è¯•ï¼šè®¿é—® <a href="http://ocalhost:9001/hystrix" target="_blank" rel="noopener noreferrer">http://ocalhost:9001/hystrix<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="ç›‘æ§å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#ç›‘æ§å®æˆ˜" aria-hidden="true">#</a> ç›‘æ§å®æˆ˜</h3><blockquote><p>ä¸‹é¢ä½¿ç”¨ä¸Šé¢ 9001 Hystrix Dashboard é¡¹ç›®ï¼Œæ¥ç›‘æ§ 8001 é¡¹ç›® Hystrix çš„å®æ—¶æƒ…å†µï¼š</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597557620438-f12fcb75.png" alt="1597557620438" tabindex="0" loading="lazy"><figcaption>1597557620438</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Beanpublic</span> <span class="token class-name">ServletRegistrationBean</span> <span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">HystrixMetricsStreamServlet</span> streamServlet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HystrixMetricsStreamServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ServletRegistrationBean</span> servletRegistrationBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span>streamServlet<span class="token punctuation">)</span><span class="token punctuation">;</span>        servletRegistrationBean<span class="token punctuation">.</span><span class="token function">setLoadOnStartup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        servletRegistrationBean<span class="token punctuation">.</span><span class="token function">addUrlMappings</span><span class="token punctuation">(</span><span class="token string">&quot;/hystrix.stream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        servletRegistrationBean<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;HystrixMetricsStreamServlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> servletRegistrationBean<span class="token punctuation">;</span>    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/1597558323714-3dfbc52c.png" alt="1597558323714" tabindex="0" loading="lazy"><figcaption>1597558323714</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597558486510-f084357b.png" alt="1597558486510" tabindex="0" loading="lazy"><figcaption>1597558486510</figcaption></figure><h1 id="æœåŠ¡ç½‘å…³" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç½‘å…³" aria-hidden="true">#</a> æœåŠ¡ç½‘å…³</h1><h2 id="gateway" tabindex="-1"><a class="header-anchor" href="#gateway" aria-hidden="true">#</a> Gateway</h2><blockquote><p>å†…å®¹è¿‡å¤šï¼Œå¼€å‘å¯å‚è€ƒ <a href="https://docs.spring.io/" target="_blank" rel="noopener noreferrer">https://docs.spring.io/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å®˜ç½‘æ–‡æ¡£</p></blockquote><h3 id="ç®€ä»‹-1" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹-1" aria-hidden="true">#</a> ç®€ä»‹</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597559672607-ad83a53e.png" alt="1597559672607" tabindex="0" loading="lazy"><figcaption>1597559672607</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597559733238-d6999ac0.png" alt="1597559733238" tabindex="0" loading="lazy"><figcaption>1597559733238</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597559829633-25319c4a.png" alt="1597559829633" tabindex="0" loading="lazy"><figcaption>1597559829633</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597559787064-76539db6.png" alt="1597559787064" tabindex="0" loading="lazy"><figcaption>1597559787064</figcaption></figure><p>Gatewayç‰¹æ€§ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597559871114-73bb0a36.png" alt="1597559871114" tabindex="0" loading="lazy"><figcaption>1597559871114</figcaption></figure><p>ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597560126904-cb2ad94a.png" alt="1597560126904" tabindex="0" loading="lazy"><figcaption>1597560126904</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597560156913-82f2e27c.png" alt="1597560156913" tabindex="0" loading="lazy"><figcaption>1597560156913</figcaption></figure><h3 id="å…¥é—¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#å…¥é—¨é…ç½®" aria-hidden="true">#</a> å…¥é—¨é…ç½®</h3><p>æ–°å»ºæ¨¡å— cloud-gateway-gateway9527</p><blockquote><p>ç°åœ¨å®ç°ï¼Œé€šè¿‡Gateway (ç½‘å…³) æ¥è®¿é—®å…¶å®ƒé¡¹ç›®ï¼Œè¿™é‡Œé€‰æ‹©ä¹‹å‰8001é¡¹ç›®ï¼Œè¦æ±‚æ³¨å†Œè¿›Eureka Server ã€‚å…¶å®ƒæ²¡è¦æ±‚ã€‚</p></blockquote><p>pomæ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--gateway--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--eureka-client gateWayä½œä¸ºç½‘å…³ï¼Œä¹Ÿè¦æ³¨å†Œè¿›æœåŠ¡ä¸­å¿ƒ--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- gatewayå’Œwebä¸èƒ½åŒæ—¶å­˜åœ¨ï¼Œå³webç›¸å…³jaråŒ…ä¸èƒ½å¯¼å…¥ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ymlæ–‡ä»¶ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">9527spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway  <span class="token comment">## GateWayé…ç½®  cloud:    gateway:      routes:        - id: payment_routh  # è·¯ç”±ID ï¼Œ æ²¡æœ‰å›ºå®šçš„è§„åˆ™ä½†è¦æ±‚å”¯ä¸€ï¼Œå»ºè®®é…åˆæœåŠ¡å          uri: http://localhost:8001  # åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€          predicates:            - Path=/payment/get/**  # æ–­è¨€ï¼Œè·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±        - id: payment_routh2  # è·¯ç”±ID ï¼Œ æ²¡æœ‰å›ºå®šçš„è§„åˆ™ä½†è¦æ±‚å”¯ä¸€ï¼Œå»ºè®®é…åˆæœåŠ¡å          uri: http://localhost:8001  # åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€          predicates:            - Path=/payment/lb/**  # æ–­è¨€ï¼Œè·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±# æ³¨å†Œè¿› eureka Servereureka:  client:    service-url:      defaultZone: http://eureka7001.com:7001/eureka/    register-with-eureka: true    fetch-registry: true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ï¼Œå¾ˆæ™®é€šï¼Œæ²¡æœ‰ç‰¹æ®Šçš„é…ç½®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableEurekaClientpublic</span> <span class="token keyword">class</span> <span class="token class-name">GatewayMain9527</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">GatewayMain9527</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è®¿é—®æµ‹è¯•ï¼š1 å¯åŠ¨eureka Serverï¼Œ2 å¯åŠ¨ 8001 é¡¹ç›®ï¼Œ3 å¯åŠ¨9527ï¼ˆGatewayé¡¹ç›®ï¼‰</p><blockquote><p>å¯è§ï¼Œå½“æˆ‘ä»¬è®¿é—® <a href="http://localhost:9527/payment/get/1" target="_blank" rel="noopener noreferrer">http://localhost:9527/payment/get/1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ—¶ï¼Œå³è®¿é—®ç½‘å…³åœ°å€æ—¶ï¼Œä¼šç»™æˆ‘ä»¬è½¬å‘åˆ° 8001 é¡¹ç›®çš„è¯·æ±‚åœ°å€ï¼Œä»¥æ­¤ä½œå‡ºå“åº”ã€‚</p><p>åŠ å…¥ç½‘å…³å‰ï¼š<a href="http://localhost:8001/payment/get/1" target="_blank" rel="noopener noreferrer">http://localhost:8001/payment/get/1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>åŠ å…¥ç½‘å…³åï¼š<a href="http://localhost:9527/payment/get/1" target="_blank" rel="noopener noreferrer">http://localhost:9527/payment/get/1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>ä¸Šé¢æ˜¯ä»¥ yml æ–‡ä»¶é…ç½®çš„è·¯ç”±ï¼Œä¹Ÿæœ‰ä½¿ç”¨configç±»é…ç½®çš„æ–¹å¼ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597562601072-3de58033.png" alt="1597562601072" tabindex="0" loading="lazy"><figcaption>1597562601072</figcaption></figure><h3 id="åŠ¨æ€é…ç½®" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€é…ç½®" aria-hidden="true">#</a> åŠ¨æ€é…ç½®</h3><blockquote><p>è¿™é‡Œæ‰€è°“çš„åŠ¨æ€é…ç½®å°±æ˜¯åˆ©ç”¨æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œæ¥å®ç° è´Ÿè½½å‡è¡¡ çš„è°ƒç”¨ å¤šä¸ªå¾®æœåŠ¡ã€‚</p><p>æ³¨æ„ï¼Œè¿™æ˜¯GateWay çš„è´Ÿè½½å‡è¡¡</p></blockquote><p>å¯¹ymlè¿›è¡Œé…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">cloud-gateway  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">locator</span><span class="token punctuation">:</span>          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># å¼€å¯ä»æ³¨å†Œä¸­å¿ƒåŠ¨æ€åˆ›å»ºè·¯ç”±çš„åŠŸèƒ½ï¼Œåˆ©ç”¨å¾®æœåŠ¡åè¿›è¡Œè·¯ç”±      routes:        - id: payment_routh  # è·¯ç”±ID ï¼Œ æ²¡æœ‰å›ºå®šçš„è§„åˆ™ä½†è¦æ±‚å”¯ä¸€ï¼Œå»ºè®®é…åˆæœåŠ¡å         # uri: http://localhost:8001  # åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€          uri: lb://CLOUD-PROVIDER-SERVICE          predicates:            - Path=/payment/get/**  # æ–­è¨€ï¼Œè·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±        - id: payment_routh2  # è·¯ç”±ID ï¼Œ æ²¡æœ‰å›ºå®šçš„è§„åˆ™ä½†è¦æ±‚å”¯ä¸€ï¼Œå»ºè®®é…åˆæœåŠ¡å        #  uri: http://localhost:8001  # åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€          uri: lb://CLOUD-PROVIDER-SERVICE          predicates:            - Path=/payment/lb/**  # æ–­è¨€ï¼Œè·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±# uri: lb://CLOUD-PROVIDER-SERVICE  è§£é‡Šï¼šlb å±äºGateWay çš„å…³é”®å­—ï¼Œä»£è¡¨æ˜¯åŠ¨æ€uriï¼Œå³ä»£è¡¨ä½¿ç”¨çš„æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„å¾®æœåŠ¡åï¼Œå®ƒé»˜è®¤å¼€å¯ä½¿ç”¨è´Ÿè½½å‡è¡¡æœºåˆ¶ </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>ä¸‹é¢å¯ä»¥å¼€å¯ 8002 æ¨¡å—ï¼Œå¹¶å°†å®ƒä¸8001åŒå¾®æœåŠ¡åï¼Œæ³¨å†Œåˆ° Eureka Server è¿›è¡Œæµ‹è¯•ã€‚</p></blockquote><h3 id="predicate" tabindex="-1"><a class="header-anchor" href="#predicate" aria-hidden="true">#</a> Predicate</h3><blockquote><p>æ³¨æ„åˆ°ä¸Šé¢ymlé…ç½®ä¸­ï¼Œæœ‰ä¸ªpredicates å±æ€§å€¼ã€‚</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597563769828-173defc3.png" alt="1597563769828" tabindex="0" loading="lazy"><figcaption>1597563769828</figcaption></figure><p>å…·ä½“ä½¿ç”¨ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597563898772-658e68e0.png" alt="1597563898772" tabindex="0" loading="lazy"><figcaption>1597563898772</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597564084571-258d2399.png" alt="1597564084571" tabindex="0" loading="lazy"><figcaption>1597564084571</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597564241670-fc8975e5.png" alt="1597564241670" tabindex="0" loading="lazy"><figcaption>1597564241670</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597564397523-52ce2ef0.png" alt="1597564397523" tabindex="0" loading="lazy"><figcaption>1597564397523</figcaption></figure><blockquote><p>æ”¾çˆ¬è™«æ€è·¯ï¼Œå‰åç«¯åˆ†ç¦»çš„è¯ï¼Œåªé™å®šå‰ç«¯é¡¹ç›®ä¸»æœºè®¿é—®ï¼Œè¿™æ ·å¯ä»¥å±è”½å¤§é‡çˆ¬è™«ã€‚</p><p>ä¾‹å¦‚æˆ‘åŠ ä¸Šï¼š - Host=localhost:** ** ä»£è¡¨å…è®¸ä»»ä½•ç«¯å£</p><p>å°±åªèƒ½æ˜¯ä¸»æœºæ¥è®¿</p></blockquote><p>é…ç½®é”™è¯¯é¡µé¢:</p><blockquote><p>æ³¨æ„ï¼Œspringbooté»˜è®¤/static/error/ ä¸‹é”™è¯¯ä»£ç å‘½åçš„é¡µé¢ä¸ºé”™è¯¯é¡µé¢ï¼Œå³ 404.html</p><p>è€Œä¸”ä¸éœ€è¦å¯¼å…¥é¢å¤–çš„åŒ…ï¼ŒGateway é‡Œé¢éƒ½æœ‰ã€‚</p></blockquote><h3 id="filter" tabindex="-1"><a class="header-anchor" href="#filter" aria-hidden="true">#</a> Filter</h3><blockquote><p>ä¸»è¦æ˜¯é…ç½®å…¨å±€è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œå…¶å®ƒçš„å°é…ç½®å…·ä½“çœ‹å®˜ç½‘å§</p></blockquote><p>è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨é…ç½®ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Componentpublic</span> <span class="token keyword">class</span> <span class="token class-name">GateWayFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------come in MyGlobalFilter : &quot;</span><span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> uname <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;uname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆæ³•æ€§æ£€éªŒ        if(uname == null){            System.out.println(&quot;----ç”¨æˆ·åä¸ºnull,éæ³•ç”¨æˆ·ï¼Œè¯·æ±‚ä¸è¢«æ¥å—&quot;);            //è®¾ç½® response çŠ¶æ€ç    å› ä¸ºåœ¨è¯·æ±‚ä¹‹å‰è¿‡æ»¤çš„ï¼Œsoå°±ç®—æ˜¯è¿”å›NOT_FOUND ä¹Ÿä¸ä¼šè¿”å›é”™è¯¯é¡µé¢            exchange.getResponse().setStatusCode(HttpStatus.NOT_FOUND);            //å®Œæˆè¯·æ±‚è°ƒç”¨            return exchange.getResponse().setComplete();        }        return chain.filter(exchange);    }    //è¿”å›å€¼æ˜¯åŠ è½½é¡ºåºï¼Œä¸€èˆ¬å…¨å±€çš„éƒ½æ˜¯ç¬¬ä¸€ä½åŠ è½½    @Override    public int getOrder() {        return 0;    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="æœåŠ¡é…ç½®" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡é…ç½®" aria-hidden="true">#</a> æœåŠ¡é…ç½®</h1><h2 id="config" tabindex="-1"><a class="header-anchor" href="#config" aria-hidden="true">#</a> Config</h2><blockquote><p>SpringCloud Config åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ</p></blockquote><h3 id="æ¦‚è¿°-2" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°-2" aria-hidden="true">#</a> æ¦‚è¿°</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597643368929-6aca0f61.png" alt="1597643368929" tabindex="0" loading="lazy"><figcaption>1597643368929</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597643414093-7a190af1.png" alt="1597643414093" tabindex="0" loading="lazy"><figcaption>1597643414093</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597643478588-da0fadd7.png" alt="1597643478588" tabindex="0" loading="lazy"><figcaption>1597643478588</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597643504380-e6d2781e.png" alt="1597643504380" tabindex="0" loading="lazy"><figcaption>1597643504380</figcaption></figure><h3 id="æœåŠ¡ç«¯é…ç½®" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯é…ç½®" aria-hidden="true">#</a> æœåŠ¡ç«¯é…ç½®</h3><blockquote><p>é¦–å…ˆåœ¨githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ springcloud-config</p><p>ç„¶åä½¿ç”¨gitå‘½ä»¤å…‹éš†åˆ°æœ¬åœ°ï¼Œå‘½ä»¤ï¼šgit clone <a href="https://github.com/LZXYF/springcloud-config" target="_blank" rel="noopener noreferrer">https://github.com/LZXYF/springcloud-config<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æ³¨æ„ä¸Šé¢çš„æ“ä½œä¸æ˜¯å¿…é¡»çš„ï¼Œåªè¦githubä¸Šæœ‰å°±å¯ä»¥ï¼Œå…‹éš†åˆ°æœ¬åœ°åªæ˜¯ä¿®æ”¹æ–‡ä»¶ã€‚</p></blockquote><p>æ–°å»º cloud-config-center3344 æ¨¡å—ï¼š</p><p>pomæ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- config Server --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-config-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--eureka-client config Serverä¹Ÿè¦æ³¨å†Œè¿›æœåŠ¡ä¸­å¿ƒ--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>yml é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">3344spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>center  <span class="token comment"># æ³¨å†Œè¿›eureka Server çš„å¾®æœåŠ¡å  cloud:    config:      server:        git:          uri: https://github.com/LZXYF/springcloud-config # github ä»“åº“ä½ç½®          ## æœç´¢ç›®å½•          search-paths:            - springcloud-config          # è¯»å–çš„åˆ†æ”¯          label: mastereureka:  client:    service-url:      defaultZone: http://eureka7001.com:7001/eureka/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableConfigServer</span>   <span class="token comment">//å…³é”®æ³¨è§£public class ConfigCenterMain3344 {    public static void main(String[] args) {        SpringApplication.run(ConfigCenterMain3344.class,args);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ·»åŠ æ¨¡æ‹Ÿæ˜ å°„ï¼šã€C:\Windows\System32\drivers\etc\hostsã€‘æ–‡ä»¶ä¸­æ·»åŠ ï¼š 127.0.0.1 <a href="http://config-3344.com" target="_blank" rel="noopener noreferrer">config-3344.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å¯åŠ¨å¾®æœåŠ¡3344ï¼Œè®¿é—®<a href="http://config-3344.com:3344/master/config-dev.yml" target="_blank" rel="noopener noreferrer">http://config-3344.com:3344/master/config-dev.yml<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ–‡ä»¶ï¼ˆæ³¨æ„ï¼Œè¦æå‰åœ¨gitä¸Šå¼„ä¸€ä¸ªè¿™æ–‡ä»¶ï¼‰</p><p>æ–‡ä»¶å‘½åå’Œè®¿é—®çš„è§„åˆ™ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597646186970-44fc9ed6.png" alt="1597646186970" tabindex="0" loading="lazy"><figcaption>1597646186970</figcaption></figure><p>ä¸åŠ åˆ†æ”¯åé»˜è®¤æ˜¯master:</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597646308915-07e722a2.png" alt="1597646308915" tabindex="0" loading="lazy"><figcaption>1597646308915</figcaption></figure><h3 id="å®¢æˆ·ç«¯é…ç½®" tabindex="-1"><a class="header-anchor" href="#å®¢æˆ·ç«¯é…ç½®" aria-hidden="true">#</a> å®¢æˆ·ç«¯é…ç½®</h3><blockquote><p>è¿™é‡Œçš„å®¢æˆ·ç«¯æŒ‡çš„æ˜¯ï¼Œä½¿ç”¨ Config Server ç»Ÿä¸€é…ç½®æ–‡ä»¶çš„é¡¹ç›®ã€‚æ—¢æœ‰ä¹‹å‰è¯´çš„æ¶ˆè´¹è€…ï¼Œåˆæœ‰æä¾›è€…</p></blockquote><p>æ–°å»º cloud-config-client-3355 æ¨¡å—ï¼š</p><p>pomæ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- config Client å’Œ æœåŠ¡ç«¯çš„ä¾èµ–ä¸ä¸€æ · --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--eureka-client config Serverä¹Ÿè¦æ³¨å†Œè¿›æœåŠ¡ä¸­å¿ƒ--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>**** bootstrap.ymlæ–‡ä»¶</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597646809831-d829ddcb.png" alt="1597646809831" tabindex="0" loading="lazy"><figcaption>1597646809831</figcaption></figure><p>å†…å®¹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">3355spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">config-client  cloud</span><span class="token punctuation">:</span>    <span class="token comment"># config å®¢æˆ·ç«¯é…ç½®    config:      label: master # åˆ†æ”¯åç§°      name: config # é…ç½®æ–‡ä»¶åç§°ï¼Œæ–‡ä»¶ä¹Ÿå¯ä»¥æ˜¯client-config-dev.ymlè¿™ç§æ ¼å¼çš„ï¼Œè¿™é‡Œå°±å†™ client-config       profile: dev # ä½¿ç”¨é…ç½®ç¯å¢ƒ      uri: http://config-3344.com:3344  # config Server åœ°å€      # ç»¼åˆä¸Šé¢å››ä¸ª å³è¯»å–é…ç½®æ–‡ä»¶åœ°å€ä¸ºï¼š http://config-3344.com:3344/master/config-dev.ymleureka:  client:    service-url:      defaultZone: http://eureka7001.com:7001/eureka/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ï¼Œæå…¶æ™®é€šï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableEurekaClientpublic</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientMain3355</span>     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConfigClientMain3355</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controllerå±‚ï¼Œæµ‹è¯•è¯»å–é…ç½®ä¿¡æ¯</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestControllerpublic</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${config.info}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/configInfo&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfigInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> configInfo<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åŠ¨æµ‹è¯•å®Œæˆï¼å¦‚æœæŠ¥é”™ï¼Œæ³¨æ„githubä¸Šçš„ yml æ ¼å¼æœ‰æ²¡æœ‰å†™é”™ï¼</p><h3 id="åŠ¨æ€åˆ·æ–°" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€åˆ·æ–°" aria-hidden="true">#</a> åŠ¨æ€åˆ·æ–°</h3><p>é—®é¢˜ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597649646383-6d124e4a.png" alt="1597649646383" tabindex="0" loading="lazy"><figcaption>1597649646383</figcaption></figure><blockquote><p>å°±æ˜¯githubä¸Šé¢é…ç½®æ›´æ–°äº†ï¼Œconfig Server é¡¹ç›®ä¸Šæ˜¯åŠ¨æ€æ›´æ–°çš„ï¼Œä½†æ˜¯ï¼Œclientç«¯çš„é¡¹ç›®ä¸­çš„é…ç½®ï¼Œç›®å‰è¿˜æ˜¯ä¹‹å‰çš„ï¼Œå®ƒä¸èƒ½åŠ¨æ€æ›´æ–°ï¼Œå¿…é¡»é‡å¯æ‰è¡Œã€‚</p></blockquote><p>è§£å†³ï¼š</p><ol><li><p>clientç«¯ä¸€å®šè¦æœ‰å¦‚ä¸‹ä¾èµ–ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597649915331-3f1961d2.png" alt="1597649915331" tabindex="0" loading="lazy"><figcaption>1597649915331</figcaption></figure></li><li><p>client ç«¯å¢åŠ  yml é…ç½®å¦‚ä¸‹ï¼Œå³åœ¨ bootstrap.yml æ–‡ä»¶ä¸­ï¼š</p></li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># æš´éœ²ç›‘æ§ç«¯ç‚¹management:  endpoints:    web:      exposure:        include: &quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>åœ¨controller ä¸Šæ·»åŠ å¦‚ä¸‹æ³¨è§£ï¼š</li></ol><figure><img src="/Computer-Science-Learn-Notes/assets/1597650236798-ee983bd1.png" alt="1597650236798" tabindex="0" loading="lazy"><figcaption>1597650236798</figcaption></figure><blockquote><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œé…ç½®å·²ç»å®Œæˆï¼Œä½†æ˜¯æµ‹è¯•ä»ç„¶ä¸èƒ½åŠ¨æ€åˆ·æ–°ï¼Œéœ€è¦ä¸‹ä¸€æ­¥ã€‚</p></blockquote><ol start="4"><li>å‘ client ç«¯å‘é€ä¸€ä¸ª POST è¯·æ±‚</li></ol><blockquote><p>å¦‚ curl -X POST &quot;<a href="http://localhost:3355/actuator/refresh" target="_blank" rel="noopener noreferrer">http://localhost:3355/actuator/refresh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&quot;</p><p>ä¸¤ä¸ªå¿…é¡»ï¼š1.å¿…é¡»æ˜¯ POST è¯·æ±‚ï¼Œ2.è¯·æ±‚åœ°å€ï¼š<a href="http://localhost:3355/actuator/refresh" target="_blank" rel="noopener noreferrer">http://localhost:3355/actuator/refresh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>æˆåŠŸï¼</p><p>ä½†æ˜¯åˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¦å‘æ¯ä¸ªå¾®æœåŠ¡å‘é€ä¸€æ¬¡POSTè¯·æ±‚ï¼Œå½“å¾®æœåŠ¡æ•°é‡åºå¤§ï¼Œåˆæ˜¯ä¸€ä¸ªæ–°çš„é—®é¢˜ã€‚</p><p>å°±æœ‰ä¸‹é¢çš„æ¶ˆæ¯æ€»çº¿ï¼</p><h1 id="æ¶ˆæ¯æ€»çº¿" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯æ€»çº¿" aria-hidden="true">#</a> æ¶ˆæ¯æ€»çº¿</h1><h2 id="bus" tabindex="-1"><a class="header-anchor" href="#bus" aria-hidden="true">#</a> Bus</h2><figure><img src="/Computer-Science-Learn-Notes/assets/1597651086179-89caa118.png" alt="1597651086179" tabindex="0" loading="lazy"><figcaption>1597651086179</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597651183100-5fbe18b4.png" alt="1597651183100" tabindex="0" loading="lazy"><figcaption>1597651183100</figcaption></figure><h3 id="å®‰è£…rabbitmq" tabindex="-1"><a class="header-anchor" href="#å®‰è£…rabbitmq" aria-hidden="true">#</a> å®‰è£…RabbitMQ</h3><blockquote><p>åœ¨windows ä¸Šå®‰è£…RabbitMQ</p></blockquote><ol><li>å®‰è£…RabbitMQçš„ä¾èµ–ç¯å¢ƒ Erlang ä¸‹è½½åœ°å€ï¼š <a href="http://erlang.org/download/otp_win64_21.3.exe" target="_blank" rel="noopener noreferrer">http://erlang.org/download/otp_win64_21.3.exe<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>å®‰è£…RabbitMQ ä¸‹è½½åœ°å€ï¼š <a href="http://dl.bintray.com/rabbitmq/all/rabbitmq-server/3.7.14/rabbitmq-server-3.7.14.exe" target="_blank" rel="noopener noreferrer">http://dl.bintray.com/rabbitmq/all/rabbitmq-server/3.7.14/rabbitmq-server-3.7.14.exe<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>è¿›å…¥ rabbitMQå®‰è£…ç›®å½•çš„sbinç›®å½•ä¸‹ï¼Œæ‰“å¼€cmdçª—å£ï¼Œæ‰§è¡Œ ã€rabbitmq-plugins enable rabbitmq_managementã€‘</li><li>è®¿é—®ã€<a href="http://localhost:15672/%E3%80%91%EF%BC%8C%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81%E5%92%8C%E8%B4%A6%E5%8F%B7%EF%BC%9A%E9%BB%98%E8%AE%A4%E9%83%BD%E4%B8%BA" target="_blank" rel="noopener noreferrer">http://localhost:15672/ã€‘ï¼Œè¾“å…¥å¯†ç å’Œè´¦å·ï¼šé»˜è®¤éƒ½ä¸º<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> guest</li></ol><h3 id="å¹¿æ’­å¼åˆ·æ–°é…ç½®" tabindex="-1"><a class="header-anchor" href="#å¹¿æ’­å¼åˆ·æ–°é…ç½®" aria-hidden="true">#</a> å¹¿æ’­å¼åˆ·æ–°é…ç½®</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597723463350-ede38ab4.png" alt="1597723463350" tabindex="0" loading="lazy"><figcaption>1597723463350</figcaption></figure><p>è¿˜æ˜¯æŒ‰ç…§ä¹‹å‰çš„ 3344ï¼ˆconfig Serverï¼‰å’Œ 3355ï¼ˆconfig clientï¼‰ä¸¤ä¸ªé¡¹ç›®æ¥å¢è¿›ã€‚</p><p>é¦–å…ˆç»™ config Server å’Œ config client éƒ½æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token comment">&lt;!-- æ·»åŠ rabbitMQçš„æ¶ˆæ¯æ€»çº¿æ”¯æŒåŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-bus-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>config Server çš„ymlæ–‡ä»¶å¢åŠ å¦‚ä¸‹é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># rabbitMqçš„ç›¸å…³é…ç½®rabbitmq:  host: localhost  port: 5672  # è¿™é‡Œæ²¡é”™ï¼Œè™½ç„¶rabbitMQç½‘é¡µæ˜¯ 15672  username: guest  password: guest# rabbitmq çš„ç›¸å…³é…ç½®2 æš´éœ²busåˆ·æ–°é…ç½®çš„ç«¯ç‚¹management:  endpoints:    web:      exposure:        include: &#39;bus-refresh&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>config Client çš„ymlæ–‡ä»¶ä¿®æ”¹æˆå¦‚ä¸‹é…ç½®ï¼šï¼ˆæ³¨æ„å¯¹é½æ–¹å¼ï¼Œå’Œconfig Serverä¸ä¸€æ ·ï¼‰</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">config-client  cloud</span><span class="token punctuation">:</span>    <span class="token comment"># config å®¢æˆ·ç«¯é…ç½®    config:      label: master         # åˆ†æ”¯åç§°      name: client-config       # é…ç½®æ–‡ä»¶åç§°      profile: test      # ä½¿ç”¨é…ç½®ç¯å¢ƒ      uri: http://config-3344.com:3344  # config Server åœ°å€  # ç»¼åˆä¸Šé¢å››ä¸ª å³è¯»å–é…ç½®æ–‡ä»¶åœ°å€ä¸ºï¼š http://config-3344.com:3344/master/config-dev.yml  # rabbitMqçš„ç›¸å…³é…ç½®  rabbitmq:    host: localhost    port: 5672    username: guest    password: guest</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åœ¨githubä¸Šä¿®æ”¹ymlæ–‡ä»¶è¿›è¡Œæµ‹è¯•ï¼Œä¿®æ”¹å®Œæ–‡ä»¶ï¼Œå‘ config server å‘é€ è¯·æ±‚ï¼š</p><p>ã€curl -X POST &quot;<a href="http://localhost:3344/actuator/bus-refresh" target="_blank" rel="noopener noreferrer">http://localhost:3344/actuator/bus-refresh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&quot;ã€‘</p><blockquote><p>æ³¨æ„ï¼Œä¹‹å‰æ˜¯å‘config client ä¸€ä¸ªä¸ªå‘é€è¯·æ±‚ï¼Œä½†æ˜¯è¿™æ¬¡æ˜¯å‘ config Server å‘é€è¯·æ±‚ï¼Œè€Œæ‰€æœ‰çš„config client çš„é…ç½®ä¹Ÿéƒ½å…¨éƒ¨æ›´æ–°ã€‚</p></blockquote><h3 id="å®šç‚¹é€šçŸ¥" tabindex="-1"><a class="header-anchor" href="#å®šç‚¹é€šçŸ¥" aria-hidden="true">#</a> å®šç‚¹é€šçŸ¥</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597725204568-d28072a5.png" alt="1597725204568" tabindex="0" loading="lazy"><figcaption>1597725204568</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597725365978-74350766.png" alt="1597725365978" tabindex="0" loading="lazy"><figcaption>1597725365978</figcaption></figure><h1 id="æ¶ˆæ¯é©±åŠ¨" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯é©±åŠ¨" aria-hidden="true">#</a> æ¶ˆæ¯é©±åŠ¨</h1><h2 id="stream" tabindex="-1"><a class="header-anchor" href="#stream" aria-hidden="true">#</a> Stream</h2><h3 id="æ¦‚è¿°-3" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°-3" aria-hidden="true">#</a> æ¦‚è¿°</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597725567239-20815999.png" alt="1597725567239" tabindex="0" loading="lazy"><figcaption>1597725567239</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597725597884-50b90a59.png" alt="1597725597884" tabindex="0" loading="lazy"><figcaption>1597725597884</figcaption></figure><blockquote><p>å°±åƒ JDBC å½¢æˆä¸€ç§è§„èŒƒï¼Œç»Ÿä¸€ä¸åŒæ•°æ®åº“çš„æ¥å£</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597725703365-81d51c86.png" alt="1597725703365" tabindex="0" loading="lazy"><figcaption>1597725703365</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597726446212-45ef8fad.png" alt="1597726446212" tabindex="0" loading="lazy"><figcaption>1597726446212</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597730581088-4bbe58f3.png" alt="1597730581088" tabindex="0" loading="lazy"><figcaption>1597730581088</figcaption></figure><h3 id="æ¶ˆæ¯ç”Ÿäº§è€…" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯ç”Ÿäº§è€…" aria-hidden="true">#</a> æ¶ˆæ¯ç”Ÿäº§è€…</h3><p>æ–°å»ºæ¨¡å— cloud-stream-rabbitmq-provider8801</p><p>pomä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- stream-rabbit --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-stream-rabbit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--eureka-client ç›®å‰ï¼Œè¿™ä¸ªä¸æ˜¯å¿…é¡»çš„--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>yml é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">8801spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">cloud-stream-provider  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">stream</span><span class="token punctuation">:</span>      <span class="token key atrule">binders</span><span class="token punctuation">:</span> <span class="token comment"># åœ¨æ¬¡é…ç½®è¦ç»‘å®šçš„rabbitMQçš„æœåŠ¡ä¿¡æ¯        defaultRabbit: # è¡¨ç¤ºå®šä¹‰çš„åç§°ï¼Œç”¨äºå’Œbindingæ•´åˆ          type: rabbit  # æ¶ˆæ¯ç»„ä»¶ç±»å‹          environment:  # è®¾ç½®rabbitmqçš„ç›¸å…³ç¯å¢ƒé…ç½®            spring:              rabbitmq:                host: localhost                port: 5672                username: guest                password: guest      bindings:  # æœåŠ¡çš„æ•´åˆå¤„ç†        output:   # è¡¨ç¤ºæ˜¯ç”Ÿäº§è€…ï¼Œå‘rabbitMQå‘é€æ¶ˆæ¯          destination: studyExchange  # è¡¨ç¤ºè¦ä½¿ç”¨çš„Exchangeåç§°          content-type: application/json  # è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡æ˜¯jsonï¼Œæ–‡æœ¬æ˜¯ &quot;text/plain&quot;          binder: defaultRabbit  # è®¾ç½®è¦ç»‘å®šçš„æ¶ˆæ¯æœåŠ¡çš„å…·ä½“é…ç½®eureka:  client:    service-url:      defaultZone: http://eureka7001.com:7001/eureka/  instance:    lease-renewal-interval-in-seconds: 2 # è®¾ç½®å¿ƒè·³æ—¶é—´ï¼Œé»˜è®¤æ˜¯30ç§’    lease-expiration-duration-in-seconds: 5 # æœ€å¤§å¿ƒè·³é—´éš”ä¸èƒ½è¶…è¿‡5ç§’,é»˜è®¤90ç§’    instance-id: send-8801.com # åœ¨ä¿¡æ¯åˆ—è¡¨æ˜¾ç¤ºä¸»æœºåç§°    prefer-ip-address: true # è®¿é—®è·¯å¾„å˜ä¸ºipåœ°å€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»æ²¡ä»€ä¹ˆç‰¹æ®Šçš„æ³¨è§£ã€‚</p><p>ä¸šåŠ¡ç±»ï¼šï¼ˆæ­¤ä¸šåŠ¡ç±»ä¸æ˜¯ä»¥å‰çš„serviceï¼Œè€Œå®è´Ÿè´£æ¨é€æ¶ˆæ¯çš„æœåŠ¡ç±»ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableBinding</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Source</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">MessageChannel</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">MessageBuilder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@EnableBinding</span><span class="token punctuation">(</span><span class="token class-name">Source</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>  <span class="token comment">// ä¸æ˜¯å’Œcontrolleræ‰“äº¤é“çš„service,è€Œæ˜¯å‘é€æ¶ˆæ¯çš„æ¨é€æœåŠ¡ç±»public class IMessageProviderImpl implements IMessageProvider {									     //ä¸Šé¢æ˜¯è‡ªå®šä¹‰çš„æ¥å£    @Resource    private MessageChannel output;    @Override    public String send() {        String serial = UUID.randomUUID().toString();        output.send(MessageBuilder.withPayload(serial).build());        System.out.println(&quot;******serial: &quot; + serial);        return null;    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controller:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestControllerpublic</span> <span class="token keyword">class</span> <span class="token class-name">SendMessageController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">IMessageProvider</span> messageProvider<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/sendMessage&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> messageProvider<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>å¯åŠ¨Eureka Server 7001ï¼Œå†å¯åŠ¨8801ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œçœ‹æ˜¯å¦rabbitMQä¸­æœ‰æˆ‘ä»¬å‘é€çš„æ¶ˆæ¯ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597730112088-a6103142.png" alt="1597730112088" tabindex="0" loading="lazy"><figcaption>1597730112088</figcaption></figure></blockquote><h3 id="æ¶ˆæ¯æ¶ˆè´¹è€…" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯æ¶ˆè´¹è€…" aria-hidden="true">#</a> æ¶ˆæ¯æ¶ˆè´¹è€…</h3><p>æ–°å»ºæ¨¡å— cloud-stream-rabbitmq-consumer8802</p><p>pomä¾èµ–å’Œç”Ÿäº§è€…ä¸€æ ·ã€‚</p><p>ymlé…ç½®: åœ¨ streamçš„é…ç½®ä¸Šï¼Œå’Œç”Ÿäº§è€…åªæœ‰ä¸€å¤„ä¸åŒçš„åœ°æ–¹ï¼Œoutput æ”¹æˆ input</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">8802spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">cloud-stream-provider  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">stream</span><span class="token punctuation">:</span>      <span class="token key atrule">binders</span><span class="token punctuation">:</span> <span class="token comment"># åœ¨æ¬¡é…ç½®è¦ç»‘å®šçš„rabbitMQçš„æœåŠ¡ä¿¡æ¯        defaultRabbit: # è¡¨ç¤ºå®šä¹‰çš„åç§°ï¼Œç”¨äºå’Œbindingæ•´åˆ          type: rabbit  # æ¶ˆæ¯ç»„ä»¶ç±»å‹          environment:  # è®¾ç½®rabbitmqçš„ç›¸å…³ç¯å¢ƒé…ç½®            spring:              rabbitmq:                host: localhost                port: 5672                username: guest                password: guest      bindings:  # æœåŠ¡çš„æ•´åˆå¤„ç†        input:   # è¡¨ç¤ºæ˜¯æ¶ˆè´¹è€…ï¼Œè¿™é‡Œæ˜¯å”¯ä¸€å’Œç”Ÿäº§è€…ä¸åŒçš„åœ°æ–¹ï¼Œå‘rabbitMQå‘é€æ¶ˆæ¯          destination: studyExchange  # è¡¨ç¤ºè¦ä½¿ç”¨çš„Exchangeåç§°          content-type: application/json  # è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡æ˜¯jsonï¼Œæ–‡æœ¬æ˜¯ &quot;text/plain&quot;          binder: defaultRabbit  # è®¾ç½®è¦ç»‘å®šçš„æ¶ˆæ¯æœåŠ¡çš„å…·ä½“é…ç½®eureka:  client:    service-url:      defaultZone: http://eureka7001.com:7001/eureka/  instance:    lease-renewal-interval-in-seconds: 2 # è®¾ç½®å¿ƒè·³æ—¶é—´ï¼Œé»˜è®¤æ˜¯30ç§’    lease-expiration-duration-in-seconds: 5 # æœ€å¤§å¿ƒè·³é—´éš”ä¸èƒ½è¶…è¿‡5ç§’,é»˜è®¤90ç§’    instance-id: receive-8802.com # åœ¨ä¿¡æ¯åˆ—è¡¨æ˜¾ç¤ºä¸»æœºåç§°    prefer-ip-address: true # è®¿é—®è·¯å¾„å˜ä¸ºipåœ°å€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¥æ”¶æ¶ˆæ¯çš„ä¸šåŠ¡ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableBinding</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">StreamListener</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Sink</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Message</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@EnableBinding</span><span class="token punctuation">(</span><span class="token class-name">Sink</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConsumerController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>    <span class="token annotation punctuation">@StreamListener</span><span class="token punctuation">(</span><span class="token class-name">Sink</span><span class="token punctuation">.</span><span class="token constant">INPUT</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆè´¹è€…1å·ï¼Œserverport: &quot;</span> <span class="token operator">+</span> serverPort <span class="token operator">+</span> <span class="token string">&quot;ï¼Œæ¥å—åˆ°çš„æ¶ˆæ¯ï¼š&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="é…ç½®åˆ†ç»„æ¶ˆè´¹" tabindex="-1"><a class="header-anchor" href="#é…ç½®åˆ†ç»„æ¶ˆè´¹" aria-hidden="true">#</a> é…ç½®åˆ†ç»„æ¶ˆè´¹</h3><p>æ–°å»º cloud-stream-rabbitmq-consumer8802 æ¨¡å—ï¼š</p><blockquote><p>8803 å°±æ˜¯ 8802 cloneå‡ºæ¥çš„ã€‚</p></blockquote><p>å½“è¿è¡Œæ—¶ï¼Œä¼šæœ‰ä¸¤ä¸ªé—®é¢˜ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¸¤ä¸ªæ¶ˆè´¹è€…éƒ½æ¥æ”¶åˆ°äº†æ¶ˆæ¯ï¼Œè¿™å±äºé‡å¤æ¶ˆè´¹ã€‚ä¾‹å¦‚ï¼Œæ¶ˆè´¹è€…è¿›è¡Œè®¢å•åˆ›å»ºï¼Œè¿™æ ·å°±åˆ›å»ºäº†ä¸¤ä»½è®¢å•ï¼Œä¼šé€ æˆç³»ç»Ÿé”™è¯¯ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597731525531-d1282993.png" alt="1597731525531" tabindex="0" loading="lazy"><figcaption>1597731525531</figcaption></figure><blockquote><p>Streamé»˜è®¤ä¸åŒçš„å¾®æœåŠ¡æ˜¯ä¸åŒçš„ç»„</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597731630685-48898c0c.png" alt="1597731630685" tabindex="0" loading="lazy"><figcaption>1597731630685</figcaption></figure><p>å¯¹äºé‡å¤æ¶ˆè´¹è¿™ç§é—®é¢˜ï¼Œå¯¼è‡´çš„åŸå› æ˜¯é»˜è®¤æ¯ä¸ªå¾®æœåŠ¡æ˜¯ä¸åŒçš„groupï¼Œç»„æµæ°´å·ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¢«è®¤ä¸ºæ˜¯ä¸åŒç»„ï¼Œä¸¤ä¸ªéƒ½å¯ä»¥æ¶ˆè´¹ã€‚</p><p>è§£å†³çš„åŠæ³•å°±æ˜¯è‡ªå®šä¹‰é…ç½®åˆ†ç»„ï¼š</p><p>æ¶ˆè´¹è€… yml æ–‡ä»¶é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>	<span class="token comment"># 8802 çš„æ¶ˆè´¹è€…	bindings:        input:             destination: studyExchange            content-type: application/json            binder: defaultRabbit            group: dkfA  # è‡ªå®šä¹‰åˆ†ç»„é…ç½®    # 8803 çš„æ¶ˆè´¹è€…	bindings:        input:             destination: studyExchange            content-type: application/json            binder: defaultRabbit            group: dkfB  # è‡ªå®šä¹‰åˆ†ç»„é…ç½®</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/1597732035990-f03dee3e.png" alt="1597732035990" tabindex="0" loading="lazy"><figcaption>1597732035990</figcaption></figure><p>å½“ä¸¤ä¸ªæ¶ˆè´¹è€…é…ç½®çš„ group éƒ½ä¸º dkfA æ—¶ï¼Œå°±å±äºåŒä¸€ç»„ï¼Œå°±ä¸ä¼šè¢«é‡å¤æ¶ˆè´¹ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597732238270-f0f19597.png" alt="1597732238270" tabindex="0" loading="lazy"><figcaption>1597732238270</figcaption></figure><h3 id="æ¶ˆæ¯æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯æŒä¹…åŒ–" aria-hidden="true">#</a> æ¶ˆæ¯æŒä¹…åŒ–</h3><blockquote><p>åŠ ä¸Šgroupé…ç½®ï¼Œå°±å·²ç»å®ç°äº†æ¶ˆæ¯çš„æŒä¹…åŒ–ã€‚</p></blockquote><h1 id="sleuth" tabindex="-1"><a class="header-anchor" href="#sleuth" aria-hidden="true">#</a> Sleuth</h1><blockquote><p>åˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ªï¼Œè¶…å¤§å‹ç³»ç»Ÿã€‚éœ€è¦åœ¨å¾®æœåŠ¡æ¨¡å—æå…¶å¤šçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚80è°ƒç”¨8001çš„ï¼Œ8001è°ƒç”¨8002çš„ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªé“¾è·¯ï¼Œå¦‚æœé“¾è·¯ä¸­æŸç¯èŠ‚å‡ºç°äº†æ•…éšœï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Sleuthè¿›è¡Œé“¾è·¯è·Ÿè¸ªï¼Œä»è€Œæ‰¾åˆ°å‡ºç°æ•…éšœçš„ç¯èŠ‚ã€‚</p></blockquote><h2 id="æ¦‚è¿°-4" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°-4" aria-hidden="true">#</a> æ¦‚è¿°</h2><figure><img src="/Computer-Science-Learn-Notes/assets/1597732562780-431b4908.png" alt="1597732562780" tabindex="0" loading="lazy"><figcaption>1597732562780</figcaption></figure><blockquote><p>sleuth è´Ÿè´£è·Ÿè¸ªï¼Œè€Œzipkinè´Ÿè´£å±•ç¤ºã€‚</p><p>zipkin ä¸‹è½½åœ°å€ï¼š <a href="http://dl.bintray.com/openzipkin/maven/io/zipkin/java/zipkin-server/2.12.9/zipkin-server-2.12.9-exec.jar" target="_blank" rel="noopener noreferrer">http://dl.bintray.com/openzipkin/maven/io/zipkin/java/zipkin-server/2.12.9/zipkin-server-2.12.9-exec.jar<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä½¿ç”¨ ã€java -jarã€‘ å‘½ä»¤è¿è¡Œä¸‹è½½çš„jaråŒ…ï¼Œè®¿é—®åœ°å€ï¼šã€ <a href="http://localhost:9411/zipkin/" target="_blank" rel="noopener noreferrer">http://localhost:9411/zipkin/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ã€‘</p></blockquote><h2 id="æ¡ˆä¾‹-1" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-1" aria-hidden="true">#</a> æ¡ˆä¾‹</h2><blockquote><p>ä½¿ç”¨ä¹‹å‰çš„ æä¾›è€…8001 å’Œ æ¶ˆè´¹è€…80</p></blockquote><p>åˆ†åˆ«ç»™ä»–ä»¬å¼•å…¥ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token comment">&lt;!-- å¼•å…¥sleuth + zipkin --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zipkin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ymlå¢åŠ é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">zipkin</span><span class="token punctuation">:</span>    <span class="token key atrule">base-url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9411</span>  <span class="token comment"># zipkin åœ°å€  sleuth:    sampler:      # é‡‡æ ·ç‡å€¼ ä»‹äº0-1ä¹‹é—´ ï¼Œ1è¡¨ç¤ºå…¨éƒ¨é‡‡é›†      probability: 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="é«˜çº§éƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#é«˜çº§éƒ¨åˆ†" aria-hidden="true">#</a> é«˜çº§éƒ¨åˆ†</h1><h1 id="springcloud-alibaba" tabindex="-1"><a class="header-anchor" href="#springcloud-alibaba" aria-hidden="true">#</a> SpringCloud Alibaba</h1><blockquote><p>alibaba çš„ githubä¸Šæœ‰ä¸­æ–‡æ–‡æ¡£</p></blockquote><h2 id="å¤§ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#å¤§ç®€ä»‹" aria-hidden="true">#</a> å¤§ç®€ä»‹</h2><figure><img src="/Computer-Science-Learn-Notes/assets/1597735215211-8c3a0b73.png" alt="1597735215211" tabindex="0" loading="lazy"><figcaption>1597735215211</figcaption></figure><h2 id="nacos" tabindex="-1"><a class="header-anchor" href="#nacos" aria-hidden="true">#</a> Nacos</h2><blockquote><p>Nacos = Eureka + Config + Bus</p></blockquote><blockquote><p>githubåœ°å€ï¼š <a href="https://github.com/alibaba/Nacos" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/Nacos<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Nacos åœ°å€ï¼š <a href="https://nacos.io/zh-cn/" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597755893534-3b5cc1c6.png" alt="1597755893534" tabindex="0" loading="lazy"><figcaption>1597755893534</figcaption></figure><blockquote><p>nacoså¯ä»¥åˆ‡æ¢ AP å’Œ CP ,å¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ‡æ¢æˆCPæ¨¡å¼ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597756097369-23849f85.png" alt="1597756097369" tabindex="0" loading="lazy"><figcaption>1597756097369</figcaption></figure></blockquote><h3 id="ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½" aria-hidden="true">#</a> ä¸‹è½½</h3><blockquote><p>ä¸‹è½½åœ°å€ï¼š <a href="https://github.com/alibaba/nacos/releases/tag/1.1.4" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/nacos/releases/tag/1.1.4<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ç›´æ¥ä¸‹è½½ç½‘å€ï¼š <a href="https://github.com/alibaba/nacos/releases/download/1.1.4/nacos-server-1.1.4.zip" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/nacos/releases/download/1.1.4/nacos-server-1.1.4.zip<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä¸‹è½½å‹ç¼©åŒ…ä»¥åè§£å‹ï¼Œè¿›å…¥binç›®å½•ï¼Œæ‰“å¼€dosçª—å£ï¼Œæ‰§è¡Œstartupå‘½ä»¤å¯åŠ¨å®ƒã€‚</p><p>å¯è®¿é—® ï¼š ã€ <a href="http://192.168.101.105:8848/nacos/index.html%E3%80%91%E5%9C%B0%E5%9D%80%EF%BC%8C%E9%BB%98%E8%AE%A4%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E9%83%BD%E6%98%AFnacos" target="_blank" rel="noopener noreferrer">http://192.168.101.105:8848/nacos/index.htmlã€‘åœ°å€ï¼Œé»˜è®¤è´¦å·å¯†ç éƒ½æ˜¯nacos<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h3 id="æœåŠ¡ä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ä¸­å¿ƒ" aria-hidden="true">#</a> æœåŠ¡ä¸­å¿ƒ</h3><h4 id="æä¾›è€…-4" tabindex="-1"><a class="header-anchor" href="#æä¾›è€…-4" aria-hidden="true">#</a> æä¾›è€…</h4><p>æ–°å»ºæ¨¡å— cloudalibaba-provider-payment9001</p><p>pomä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springcloud alibaba nacos ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springbootæ•´åˆWebç»„ä»¶ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ—¥å¸¸é€šç”¨jaråŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>yml é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">9001spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">nacos-provider  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> <span class="token key atrule">localhost:8848management</span><span class="token punctuation">:</span>  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>    <span class="token key atrule">web</span><span class="token punctuation">:</span>      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»æ²¡æœ‰ç‰¹æ®Šçš„æ³¨è§£ã€‚</p><p>Nacos è‡ªå¸¦è´Ÿè½½å‡è¡¡æœºåˆ¶ï¼Œä¸‹é¢åˆ›å»ºç¬¬äºŒä¸ªæä¾›è€…ã€‚</p><p>æ–°å»º cloudalibaba-provider-payment9003 æä¾›è€…æ¨¡å—ï¼Œclone 9001 å°±å¯ä»¥</p><h4 id="æ¶ˆè´¹è€…-4" tabindex="-1"><a class="header-anchor" href="#æ¶ˆè´¹è€…-4" aria-hidden="true">#</a> æ¶ˆè´¹è€…</h4><p>æ–°å»ºæ¶ˆè´¹è€… æ¨¡å—ï¼š cloudalibaba-customer-order80</p><p>pomä¾èµ–å’Œä¸»å¯åŠ¨ç±»æ²¡æœ‰å¥½è¯´çš„ï¼Œå’Œæä¾›è€…ä¸€è‡´ï¼Œymlä¾èµ–ä¹Ÿæ˜¯ç±»ä¼¼é…ç½®ï¼Œä½œä¸ºæ¶ˆè´¹è€…æ³¨å†Œè¿›nacosæœåŠ¡ä¸­å¿ƒã€‚</p><p>nacosåº•å±‚ä¹Ÿæ˜¯ribbonï¼Œæ³¨å…¥ReatTemplate</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configurationpublic</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@LoadBalanced</span>    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controller :</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestControllerpublic</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>    <span class="token comment">//åœ¨ymlé‡Œé¢å†™çš„æä¾›è€…æœåŠ¡è·¯å¾„ï¼Œ  å€¼ä¸ºï¼šhttp://nacos-provider    @Value(&quot;${service-url.nacos-user-service}&quot;)    private String nacos_user_service;    @Resource    private RestTemplate restTemplate;    @GetMapping(&quot;customer/nacos/{id}&quot;)    public String orderId(@PathVariable(&quot;id&quot;)Integer id){        return restTemplate.getForObject(nacos_user_service + &quot;/payment/nacos/&quot; + id, String.class);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="é…ç½®ä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#é…ç½®ä¸­å¿ƒ" aria-hidden="true">#</a> é…ç½®ä¸­å¿ƒ</h3><blockquote><p>nacos è¿˜å¯ä»¥ä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒï¼Œä¸‹é¢æ˜¯æ¡ˆä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œä»nacosä¸Šè¯»å–é…ç½®ä¿¡æ¯ã€‚</p><p>nacos ä½œä¸ºé…ç½®ä¸­å¿ƒï¼Œä¸éœ€è¦åƒspringcloud config ä¸€æ ·åšä¸€ä¸ªServerç«¯æ¨¡å—ã€‚</p></blockquote><p>æ–°å»ºæ¨¡å— cloudalibaba-nacos-config3377</p><p>pomä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- ä»¥ nacos åšæœåŠ¡é…ç½®ä¸­å¿ƒçš„ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springcloud alibaba nacos ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springbootæ•´åˆWebç»„ä»¶ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ—¥å¸¸é€šç”¨jaråŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ä¹Ÿæ˜¯æå…¶æ™®é€šï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableDiscoveryClientpublic</span> <span class="token keyword">class</span> <span class="token class-name">CloudAlibabaConfigMain3377</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">CloudAlibabaConfigMain3377</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>***bootstrap.yml é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">3377spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">nacos-config-client  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>  <span class="token comment"># nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒ      config:        server-addr: localhost:8848 # nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒ        file-extension: yaml # æŒ‡å®šyaml æ ¼å¼çš„é…ç½®</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controller å±‚è¿›è¡Œè¯»å–é…ç½®æµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RefreshScope</span>  <span class="token comment">//æ”¯æŒNacosçš„åŠ¨æ€åˆ·æ–°public class ConfigClientController {    @Value(&quot;${config.info}&quot;)    private String configInfo;    @GetMapping(&quot;configclient/getconfiginfo&quot;)    public String getConfigInfo(){        return configInfo;    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>ä¸‹é¢åœ¨ Nacos ä¸­æ·»åŠ é…ç½®æ–‡ä»¶ï¼Œéœ€è¦éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597757341383-b18deb6d.png" alt="1597757341383" tabindex="0" loading="lazy"><figcaption>1597757341383</figcaption></figure><blockquote><p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°é‡è¦çš„ä¸€ç‚¹ï¼Œé…ç½®æ–‡ä»¶çš„åç§°ç¬¬äºŒé¡¹ï¼Œspring.profiles.active æ˜¯ä¾æ®å½“å‰ç¯å¢ƒçš„profileå±æ€§å€¼çš„ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå€¼å¦‚æœæ˜¯ devï¼Œå³å¼€å‘ç¯å¢ƒï¼Œå®ƒå°±ä¼šè¯»å– dev çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æœæ˜¯testï¼Œæµ‹è¯•ç¯å¢ƒï¼Œå®ƒå°±ä¼šè¯»å–testçš„é…ç½®ä¿¡æ¯ï¼Œå°±æ˜¯ä» spring.profile.active å€¼è·å–å½“å‰åº”è¯¥è¯»å–å“ªä¸ªç¯å¢ƒä¸‹çš„é…ç½®ä¿¡æ¯ã€‚</p></blockquote><p>æ‰€ä»¥è¦é…ç½®spring.profiles.activeï¼Œæ–°å»ºapplication.ymlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev <span class="token comment"># è¡¨ç¤ºå¼€å‘ç¯å¢ƒ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç»¼åˆä»¥ä¸Šè¯´æ˜ï¼Œå’Œä¸‹é¢çš„æˆªå›¾ï¼ŒNacos çš„dataidï¼ˆç±»ä¼¼æ–‡ä»¶åï¼‰åº”ä¸ºï¼š nacos-config-client-dev.yaml (å¿…é¡»æ˜¯yaml)</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597757775084-fd4e3027.png" alt="1597757775084" tabindex="0" loading="lazy"><figcaption>1597757775084</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597757747480-0e521a1b.png" alt="1597757747480" tabindex="0" loading="lazy"><figcaption>1597757747480</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597758227367-b69ef51c.png" alt="1597758227367" tabindex="0" loading="lazy"><figcaption>1597758227367</figcaption></figure><p>å½“ä¿®æ”¹é…ç½®å€¼ï¼Œä¼šå‘ç° 3377 ä¸Šä¹Ÿå·²ç»ä¿®æ”¹ï¼ŒNacosè‡ªå¸¦è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ï¼</p><p>å…¶å®ƒè¯´æ˜ï¼š</p><blockquote><p>Nacos çš„ Group ,é»˜è®¤åˆ›å»ºçš„é…ç½®æ–‡ä»¶ï¼Œéƒ½æ˜¯åœ¨DEFAULT_GROUPä¸­ï¼Œå¯ä»¥åœ¨åˆ›å»ºé…ç½®æ–‡ä»¶æ—¶ï¼Œç»™æ–‡ä»¶æŒ‡å®šåˆ†ç»„ã€‚</p><p>yml é…ç½®å¦‚ä¸‹ï¼Œå½“ä¿®æ”¹å¼€å‘ç¯å¢ƒæ—¶ï¼Œåªä¼šä»åŒä¸€groupä¸­è¿›è¡Œåˆ‡æ¢ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597807821441-c6d7981d.png" alt="1597807821441" tabindex="0" loading="lazy"><figcaption>1597807821441</figcaption></figure><p>Nacos çš„namespace ,é»˜è®¤çš„å‘½åç©ºé—´æ˜¯public ,è¿™ä¸ªæ˜¯ä¸å…è®¸åˆ é™¤çš„ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ï¼Œä¼šè‡ªåŠ¨ç»™åˆ›å»ºçš„å‘½åç©ºé—´ä¸€ä¸ªæµæ°´å·ã€‚</p><p>åœ¨ymlé…ç½®ä¸­ï¼ŒæŒ‡å®šå‘½åç©ºé—´ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597808181104-f3591b7f.png" alt="1597808181104" tabindex="0" loading="lazy"><figcaption>1597808181104</figcaption></figure><p>æœ€åï¼Œdataidã€groupã€namespace ä¸‰è€…å…³ç³»å¦‚ä¸‹ï¼šï¼ˆä¸åŒçš„dataidï¼Œæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¸åŒçš„groupæ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œä¸åŒçš„namespaceä¹Ÿæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼‰</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597808385154-d2de652b.png" alt="1597808385154" tabindex="0" loading="lazy"><figcaption>1597808385154</figcaption></figure></blockquote><h3 id="nacosæŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#nacosæŒä¹…åŒ–" aria-hidden="true">#</a> NacosæŒä¹…åŒ–</h3><blockquote><p>ä¸Šé¢åªæ˜¯å°æ‰“å°é—¹ï¼Œä¸‹é¢æ‰æ˜¯çœŸæ­£çš„é«˜çº§æ“ä½œã€‚</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597808678658-92e0dc14.png" alt="1597808678658" tabindex="0" loading="lazy"><figcaption>1597808678658</figcaption></figure><blockquote><p>æ­å»ºé›†ç¾¤å¿…é¡»æŒä¹…åŒ–ï¼Œä¸ç„¶å¤šå°æœºå™¨ä¸Šçš„nacosçš„é…ç½®ä¿¡æ¯ä¸åŒï¼Œé€ æˆç³»ç»Ÿé”™ä¹±ã€‚å®ƒä¸åŒäºå•ä¸ªspringcloud configï¼Œæ²¡æœ‰é›†ç¾¤ä¸€è¯´ï¼Œè€Œä¸”æ•°æ®ä¿å­˜åœ¨githubä¸Šï¼Œä¹Ÿä¸åŒäºeurekaï¼Œé…ç½®é›†ç¾¤å°±å®Œäº‹äº†ï¼Œæ²¡æœ‰éœ€è¦ä¿å­˜çš„é…ç½®ä¿¡æ¯ã€‚</p><p>Nacosé»˜è®¤ä½¿ç”¨å®ƒè‡ªå¸¦çš„åµŒå…¥å¼æ•°æ®åº“derby:</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597809107487-a5d41921.png" alt="1597809107487" tabindex="0" loading="lazy"><figcaption>1597809107487</figcaption></figure></blockquote><p>NacosæŒä¹…åŒ–é…ç½®ï¼š</p><blockquote><p>åœ¨ nacosçš„ confç›®å½•ä¸‹ï¼Œæœ‰ä¸ªnacos-mysql.sql çš„sqlæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºã€nacos_configã€‘çš„æ•°æ®åº“ï¼Œæ‰§è¡Œé‡Œé¢å†…å®¹ï¼Œåœ¨nacos_configæ•°æ®åº“é‡Œé¢åˆ›å»ºæ•°æ®è¡¨ã€‚</p><p>æ‰¾åˆ°conf/application.properties æ–‡ä»¶ï¼Œå°¾éƒ¨è¿½åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.datasource.platform</span><span class="token punctuation">=</span><span class="token value attr-value">mysqldb.num=1db.url.0=jdbc:mysql://localhost:3306/nacos_config?characterEncoding=utf-8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=truedb.user=rootdb.password=123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é‡å¯nacosï¼Œå³å®ŒæˆæŒä¹…åŒ–é…ç½®ã€‚</p></blockquote><h3 id="é›†ç¾¤æ¶æ„" tabindex="-1"><a class="header-anchor" href="#é›†ç¾¤æ¶æ„" aria-hidden="true">#</a> é›†ç¾¤æ¶æ„</h3><blockquote><p>ç°åœ¨è¿›è¡Œä¼ä¸šä¸­çœŸæ­£éœ€è¦çš„nacosé›†ç¾¤é…ç½®ï¼Œè€Œä¸æ˜¯ä¸Šé¢çš„å•æœºæ¨¡å¼ï¼Œéœ€è¦å‡†å¤‡å¦‚ä¸‹ï¼š</p><p>ä¸€å°linuxè™šæ‹Ÿæœºï¼šnginxæœåŠ¡å™¨ï¼Œ3ä¸ªnacosæœåŠ¡ï¼Œä¸€ä¸ªmysqlæ•°æ®åº“ã€‚</p><p>nginxçš„å®‰è£…å‚è€ƒä¹‹å‰å­¦ï¼Œä½¿ç”¨ ContOs7 è‡³å°‘éœ€è¦å®‰è£…gccåº“ï¼Œä¸ç„¶æ— æ³•ç¼–è¯‘å®‰è£…ã€yum install gccã€‘</p><p>nacosä¸‹è½½linuxç‰ˆæœ¬çš„ tar.gz åŒ…ï¼š<a href="https://github.com/alibaba/nacos/releases/download/1.1.4/nacos-server-1.1.4.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/nacos/releases/download/1.1.4/nacos-server-1.1.4.tar.gz<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>mysql rootç”¨æˆ·å¯†ç ä¸º Dkf!!2020</p></blockquote><p>Nacosé›†ç¾¤é…ç½®</p><ol><li><p>é¦–å…ˆå¯¹ nacos è¿›è¡ŒæŒä¹…åŒ–æ“ä½œï¼Œæ“ä½œå¦‚ä¸Šé¢ä¸€è‡´ã€‚</p></li><li><p>ä¿®æ”¹ nacos/conf ä¸‹çš„clusteræ–‡ä»¶ï¼Œæœ€å¥½å…ˆå¤åˆ¶ä¸€ä»½ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹:</p><figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAAB/CAYAAABmDre4AAAMUklEQVR4nO2dv4sjyRXHv2vuP7iwE6EZB4vvNqnMiq7xMBjuxP0BpeAC2YyDYXGitLJDybFMMoESQyk1nLXmzDCgjQrjQGDuDAu3M0JJB5df3g66pf7d6m61StLq+xkeNKOnrletft3167168Tf8wwc5eT589hP+8vANfvzxR3zxxRetnffdu3d49epVa+c7Z35zaAMIORfobIRYgs5GiCXobIRY4gUHSD4OPnz206FNIFv45NAGkHb47f8+P7QJZAsvAPDNRogF2GcjxBJ0NkIsQWcjxBJ0NkIsQWcjxBJ0NkIsQWcjxBLlziY1PKMg0sdJJWjPg5b7MfA8yiLnQKmzicsusHzCInVcDwFlPBiVdVNCzg0/X4SvjOdrmT6uK8F3jRINvkuhfFSS+odQvvE83ysU7cscvawjSl8XnUPLekZuLQs+hPS1MVEZRvtKNnDwivXSSvrarPWMr/kwoWyXgg+k9j2jfJE+zkh48xW+9dp8sxWVFZThaRnZKKSvtAoeDK2WtX6IGF+JdVmBg/LtTSmTwj5bO/01W7zERQdYPb+PbFxMoQYK0z2VuJrcQq0LWyjcTlboXH2VM4BESEChs7286GD1/D5zfJxM8TBfoTOcwfMMjNZQUuz1xl8+JR89i6cl0LnAyz2WSU6bjLNpz4PneRi7CG/e+LHBsQ4qTgc9OE4fo9EjHtHFcDzDjOP25IjIONvAceD0J1hhjpHjwBnNgdUEfceB4/SiptNRssB0qqAGPfQnK8C9xr7crXuZfOqIyy6wesYxv//JYcltRoqvrtCZP2CKNvprCzwtsef+jITSCnJTgMBXV5293vyd4V30lhcKd8MOVo9vj7hfS46BzKiJ1OuRteL5Nam3TA3ERajYMHn9of8qZQmZLMPootHTXcvi0D+lsRzcgBOTbVMdFEq+cCEyIZagsxFiCWbXIsQSfLMRYgk6GyGWoLMRYgk6GyGWaCEtwokgNbxw3afnefC4bpJYxkJahCNhOoDjOHAcB6P5oY0h50iJswXrC+cP09QxIaQJWWcTCsbz4HkzDDuAO04f681KeiEVjFk3zQx0Ov5G6mxYTuZ/AlLpsMxAjJax5mqQ5cqYUMdoqI3++jxhJiwlocvsqcjWehHSkPy1XNvSIkgd5ugIF+CGqQHSawaFMplFvIn0AVL5WqXSGZj4YuX4d8KUBFr68VQIdVMVSF2yGLpivSiUBpL/gVBmc0PGjwMRKYeIfSeTq2Stq3K/kytSZ1fZy2y5kdPkOHGhPWXOVqdeFEo9aZgWIcr5ESc/NcACqjfC3B1i2JljNEj3+wSUNolmpDd2i8wCkCq3e7lpcu6eqqBOvQipR2abX+152Nzq7gzeMH68wqQfRWt3hrHPN+QM9cnr8JxdXAogGtIUUGaGISYY9RWm6/9LDW/ctEq7U7lehNQg42wDxwkGSWYXuHcGmEoN7+YZ/Z6KDfu/x/MKwL2DzIsqg4Qeu1hN+rjFHWYzjSdnEGa9Ct4k81HM0RBOM2BZuzLdpCeHqQoea0Rr16kXIfVomBZhAXU/hzvWsVQEwSieVvHJYgFlxnDnI/TUAgt1i8nKxXgzOR7c3O51NFkupMbdsNOoMlVTFbx/DvOTZAYZq9aLkPrkOlvURyuZX5sO0B894/ou6mvdXQMPbyNdqWepflrYf+sMcaeCt5C6HWHeHWK2OcczbhvOOs8n97hY2zO7wnLSRy8nQ9FC3WIy72I8C6ca4kP7FepFSFMOPkqzuzBVAeX4hQuRCbEEnY0QSzAtAiGW4JuNEEvQ2QixBJ2NEEvQ2QixRPFmiEJCG1OSQkBAahMtHjY6s51U4hyeB88Y6OyyjUpstweA2B7PJhKxcy3EqoXpFkxeWTJWVs71qUqVulcpqxV7hIRK/+7p39SmzomRnYATytdG+1KIwnCUYAMK7cswfkxI5Zt4PNk67EWrjQ5EfijMVqlgTxRms46NE75UOmZPFFuXjnlrPhkeba6RqZMIr0cYFyekTsbbtVn3KmW1Yo/wlU7uVS6kTl1DmzonJ+UK+T9wSfxYLOhT5TjVrrFhpc5fet78WLXSQNItIpTxjZK5e4Znz7v73uKldd9S1j7sqXMNbeocq+zUZ0vHjwGIxZdNoaztnCgQLPC3uD+aULgbLnGv8mIKQnsScXELvH3cx77bVcqqZ49QprBpTJqzk7Old9/cTrCwuX2nCEJ1lk8vE302k1ipH6zoh3u96asIqXDjrjB5U3eRsYC6GwKTN8j/5tqeRdin0zkRBm1Rpaz92SOkxthFaTIomzrHTENnm+JhDnSGrzc/mpBBSEtZRLPUQaDo7Z7eeO7NNR5ug3R1Tv8RGI6zK/onwFW42n82vsJydFt/62L5umY9urhcH+494rtKWeU6C9WD4zi5ERMAYkmhPMzGXcxH/Wz8n02dE6Hxm2066GMUC1O5uwbuJ6vCrXWFMhi7c4wSQajtsnp8EwWhLhRuJ8lmktQGs6tn3PfXDnkPjGc1m0tBMOz8vmI9poPkXuT73He7Sllt2LNQ6IU5OPujR3TzrqFNnRNhh2bkAtNBb5P4tDdQwEV+0KdQBrPhEqP+oKDZ1Q65fcjNk1vi2u1gfh+LCl9M8WbSrB8VpPWL0vx1hrNYmr8gKLZ+M7sJVcranz2LafahdkidY6bFSW2Jazc7SBE4GjDpDxKpD9olaNbm3kxVnty1mnZTDMIHTCB9TFbAatKHs0n3sECQIyh+1n31V6uUZdMeUkazoVapotyKENG8W2povOpcTqC7fSi62B6dmPfLyxu5nh5Iz/vlna+qPYVD6DXmtXaue8vzbMX2SF/F502xnl+N69rUOTnJ++c66Wla4s4kfKnN5jOTujDF58g65fYbroo90aSnFyZs1ZlzJW32POMbLXPn5nZ2trQ9Rhc+dFqve0FZbdgjpPK1SV7D9HW2qXNKwng2QizBhciEWILORogl6GyEWILORogl6GyEWILORogl6GyEWIJpEZgWoTkldT+IzgmQne1mWoSKcm5pESrW/SA6JyHlCkyLUCznnBahrO6H0DkFYVqExkWecVqE0rofQOdEYFoEpkWoyba629Y5HZgWgWkR6qVFqFJ3mzonBNMiMC1CDXuq1N2mzmnBtAhMi1Cb8rrb1zkVmBYBYFqEymVVqbtNndOiubNJFZugFpB6DBdz3Mfa15Gj9bb2i3ZNDDp9mCf6kMEoVvxmChzSvVExHYnXww4wf8j8eDvb82aClXuzyU0v5GsMOys8vs1eCBtl2bSH5FPgbBI6XGkwdgG44/BVHnt9T9/i4fpu84q/wSTVTAxvZHQwnK2bAl72PJWoYs8A/RFwsy5rdoXlpJ/o5E8HfYyWV5t+pje7QXc+Qn8fiQgXCrejJa7Gs2Aw5qbaQydLhbpXKas1e0hTmBaBEEtwITIhlqCzEWIJOhshlqCzEWKJTw5tACGNqTK092LvVlSGbzZCLEFnI8QSTIvAtAj1bFEmtUAhuI7xc9nUOTWyUaVMi1BRzi8tQpVIe2s6Vf72EHG9g5QrMC1C+c1wbmkR6GzNhWkRGhd5xmkRSCOYFoFpEerTGWK2rR9uU+dEYFoEpkWolxbh6RGTUX8TZ9a/X8Idz5AYt7Gpc2I06ifk7jxa0sZeD06kdxytK7X7kDF7pDa52/zW67cE34kGVfL6Pmmd6v2UpnUvL2s/9iTs2nKeveicT5+NaRHONS1C5uzPq61vbJs6xwrTIgBMi7CjBS8vOluvs02dY6ZB0wU+pPK1XDedRDTvlm6mVJzLqbphfLE9OjHvt55Dywx/5zQj88638wb2Nea1dq57y/NsxfZIX8XnTcPzJOcqLeqcWDOywNnCmzAjcWfK6bOJKufIOuX2G66KPdGPEXxmfJ05V9JmzzO+0bKkj7mDs6XtMbrwodN63QvKasMeIbVvTMwOozcObF3nxJyNaRHI6VLlzuWqf0LODzobIZagsxFiCfbZCLEE32yEWILORogl6GyEWILORogl6GyEWILORogl6GyEWILORoglcpzt9+h8+wFfz318Pf+AP3z7J3z6u+CTT7/8AZ9/addAQj4WsitIvvwBX//1j4Vf+OW7F/j3P/dsFSEfITlvtp/xy3c9fO++wPduD//9+7/wa/jJr//5M36moxHSCK6NJMQSHCAhxBJ0NkIsQWcjxBJ0NkIsQWcjxBJ0NkIsQWcjxBJ0NkIs8X9vxMHMGWFYDgAAAABJRU5ErkJggg==" alt="1597812518508" tabindex="0" loading="lazy"><figcaption>1597812518508</figcaption></figure></li><li><p>æ¨¡æ‹Ÿä¸‰å°nacosæœåŠ¡ï¼Œç¼–è¾‘nacosçš„startupå¯åŠ¨è„šæœ¬ï¼Œä½¿ä»–èƒ½å¤Ÿæ”¯æŒä¸åŒçš„ç«¯å£å¯åŠ¨å¤šæ¬¡ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597812716080-128a72b2.png" alt="1597812716080" tabindex="0" loading="lazy"><figcaption>1597812716080</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597812799242-3db56ec6.png" alt="1597812799242" tabindex="0" loading="lazy"><figcaption>1597812799242</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597813020494-a3fe1871.png" alt="1597813020494" tabindex="0" loading="lazy"><figcaption>1597813020494</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597815675706-a4ed3284.png" alt="1597815675706" tabindex="0" loading="lazy"><figcaption>1597815675706</figcaption></figure></li><li><p>nginxé…ç½®è´Ÿè½½å‡è¡¡ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597813917440-c5669f21.png" alt="1597813917440" tabindex="0" loading="lazy"><figcaption>1597813917440</figcaption></figure></li><li><p>æµ‹è¯•å®Œæˆï¼</p></li></ol><p>ä½¿ç”¨ 9003 æ¨¡å—æ³¨å†Œè¿›Nacos Server å¹¶è·å–å®ƒä¸Šé¢é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ï¼Œè¿›è¡Œæµ‹è¯•ã€‚</p><h2 id="sentinel" tabindex="-1"><a class="header-anchor" href="#sentinel" aria-hidden="true">#</a> Sentinel</h2><blockquote><p>sentinelåœ¨ springcloud Alibaba ä¸­çš„ä½œç”¨æ˜¯å®ç°ç†”æ–­å’Œé™æµ</p></blockquote><h3 id="ä¸‹è½½-1" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½-1" aria-hidden="true">#</a> ä¸‹è½½</h3><blockquote><p>ä¸‹è½½åœ°å€ï¼š <a href="https://github.com/alibaba/Sentinel/releases/download/1.7.1/sentinel-dashboard-1.7.1.jar" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/Sentinel/releases/download/1.7.1/sentinel-dashboard-1.7.1.jar<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä¸‹è½½jaråŒ…ä»¥åï¼Œä½¿ç”¨ã€java -jarã€‘å‘½ä»¤å¯åŠ¨å³å¯ã€‚</p><p>å®ƒä½¿ç”¨ 8080 ç«¯å£ï¼Œç”¨æˆ·åå’Œå¯†ç éƒ½ä¸º ï¼š sentinel</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597817544663-e11b518d.png" alt="1597817544663" tabindex="0" loading="lazy"><figcaption>1597817544663</figcaption></figure><h3 id="demo" tabindex="-1"><a class="header-anchor" href="#demo" aria-hidden="true">#</a> Demo</h3><blockquote><p>æ–°å»ºæ¨¡å— cloudalibaba-sentinel-service8401 ï¼Œä½¿ç”¨nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œæ¥æµ‹è¯•Sentinelçš„åŠŸèƒ½ã€‚</p></blockquote><p>pomä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- åç»­åšSentinelçš„æŒä¹…åŒ–ä¼šç”¨åˆ°çš„ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- sentinel  --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springcloud alibaba nacos ä¾èµ–,Nacos Server æœåŠ¡æ³¨å†Œä¸­å¿ƒ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springbootæ•´åˆWebç»„ä»¶ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ—¥å¸¸é€šç”¨jaråŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>yml é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">8401spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">cloudalibaba-sentinel-service  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token comment"># æœåŠ¡æ³¨å†Œä¸­å¿ƒ        server-addr: localhost:8848    sentinel:      transport:        # é…ç½® Sentinel Dashboard çš„åœ°å€        dashboard: localhost:8080        # é»˜è®¤8719 ï¼Œå¦‚æœç«¯å£è¢«å ç”¨ï¼Œç«¯å£å·ä¼šè‡ªåŠ¨ +1ï¼Œæä¾›ç»™ sentinel çš„ç›‘æ§ç«¯å£        port: 8719management:  endpoints:    web:      exposure:        include: &#39;*&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å†™ä¸€ä¸ªç®€å•çš„ä¸»å¯åŠ¨ç±»ï¼Œå†å†™ä¸€ä¸ªç®€å•çš„controlleræµ‹è¯•sentinelçš„ç›‘æ§ã€‚</p><h3 id="æµæ§è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#æµæ§è§„åˆ™" aria-hidden="true">#</a> æµæ§è§„åˆ™</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597819388174-e2555e88.png" alt="1597819388174" tabindex="0" loading="lazy"><figcaption>1597819388174</figcaption></figure><p>æµæ§æ¨¡å¼--ç›´æ¥ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597819546992-0365d7e1.png" alt="1597819546992" tabindex="0" loading="lazy"><figcaption>1597819546992</figcaption></figure><blockquote><p>é™æµè¡¨ç°ï¼šå½“è¶…è¿‡é˜€å€¼ï¼Œå°±ä¼šè¢«é™çº§ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597819613273-8714d1ef.png" alt="1597819613273" tabindex="0" loading="lazy"><figcaption>1597819613273</figcaption></figure></blockquote><p>æµæ§æ¨¡å¼--å…³è”ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597819976569-b87efddd.png" alt="1597819976569" tabindex="0" loading="lazy"><figcaption>1597819976569</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597820015308-5416728c.png" alt="1597820015308" tabindex="0" loading="lazy"><figcaption>1597820015308</figcaption></figure><p>æµæ§æ•ˆæœ--é¢„çƒ­ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597820393038-161acdcf.png" alt="1597820393038" tabindex="0" loading="lazy"><figcaption>1597820393038</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597820534168-223c7f85.png" alt="1597820534168" tabindex="0" loading="lazy"><figcaption>1597820534168</figcaption></figure><p>æµæ§æ•ˆæœ--æ’é˜Ÿç­‰å¾…ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597820662461-d7283105.png" alt="1597820662461" tabindex="0" loading="lazy"><figcaption>1597820662461</figcaption></figure><h3 id="ç†”æ–­é™çº§" tabindex="-1"><a class="header-anchor" href="#ç†”æ–­é™çº§" aria-hidden="true">#</a> ç†”æ–­é™çº§</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597820926895-be9bcc1a.png" alt="1597820926895" tabindex="0" loading="lazy"><figcaption>1597820926895</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597820943934-1805dcef.png" alt="1597820943934" tabindex="0" loading="lazy"><figcaption>1597820943934</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597820987861-aa713dd0.png" alt="1597820987861" tabindex="0" loading="lazy"><figcaption>1597820987861</figcaption></figure><p>é™çº§ç­–ç•¥--RT:</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597821156100-5eb367bf.png" alt="1597821156100" tabindex="0" loading="lazy"><figcaption>1597821156100</figcaption></figure><p>é™çº§ç­–ç•¥--å¼‚å¸¸æ¯”ä¾‹ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597821313361-072f18f4.png" alt="1597821313361" tabindex="0" loading="lazy"><figcaption>1597821313361</figcaption></figure><p>é™çº§æµ‹å½•--å¼‚å¸¸æ•°ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597821525073-ecab8e73.png" alt="1597821525073" tabindex="0" loading="lazy"><figcaption>1597821525073</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597821548056-df38405d.png" alt="1597821548056" tabindex="0" loading="lazy"><figcaption>1597821548056</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597821618735-47893574.png" alt="1597821618735" tabindex="0" loading="lazy"><figcaption>1597821618735</figcaption></figure><h3 id="çƒ­ç‚¹keyé™æµ" tabindex="-1"><a class="header-anchor" href="#çƒ­ç‚¹keyé™æµ" aria-hidden="true">#</a> çƒ­ç‚¹Keyé™æµ</h3><figure><img src="/Computer-Science-Learn-Notes/assets/1597821753416-75a7b162.png" alt="1597821753416" tabindex="0" loading="lazy"><figcaption>1597821753416</figcaption></figure><p>controllerå±‚å†™ä¸€ä¸ªdemo:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testhotkey&quot;</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;testhotkey&quot;</span><span class="token punctuation">,</span> blockHandler <span class="token operator">=</span> <span class="token string">&quot;deal_testhotkey&quot;</span><span class="token punctuation">)</span>    <span class="token comment">//è¿™ä¸ªvalueæ˜¯éšæ„çš„å€¼ï¼Œå¹¶ä¸å’Œè¯·æ±‚è·¯å¾„å¿…é¡»ä¸€è‡´    //åœ¨å¡«å†™çƒ­ç‚¹é™æµçš„ èµ„æºå è¿™ä¸€é¡¹æ—¶ï¼Œå¯ä»¥å¡« /testhotkey æˆ–è€…æ˜¯ @SentinelResourceçš„valueçš„å€¼    public String testHotKey(            @RequestParam(value=&quot;p1&quot;, required = false) String p1,            @RequestParam(value = &quot;p2&quot;, required = false) String p2    ){        return &quot;testHotKey__success&quot;;    }	//ç±»ä¼¼Hystrix çš„å…œåº•æ–¹æ³•    public String deal_testhotkey(String p1, String p2, BlockException e){        return &quot;testhotkey__fail&quot;;     }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/1597822501876-7ac11eee.png" alt="1597822501876" tabindex="0" loading="lazy"><figcaption>1597822501876</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597822772165-9744b670.png" alt="1597822772165" tabindex="0" loading="lazy"><figcaption>1597822772165</figcaption></figure><p>è¯´æ˜ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597822972448-6fae11c2.png" alt="1597822972448" tabindex="0" loading="lazy"><figcaption>1597822972448</figcaption></figure><h3 id="ç³»ç»Ÿè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#ç³»ç»Ÿè§„åˆ™" aria-hidden="true">#</a> ç³»ç»Ÿè§„åˆ™</h3><blockquote><p>ä¸€èˆ¬é…ç½®åœ¨ç½‘å…³æˆ–è€…å…¥å£åº”ç”¨ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªä¸œè¥¿æœ‰ç‚¹å±é™©ï¼Œä¸ä½†å€¼ä¸åˆé€‚ï¼Œå°±ç›¸å½“äºç³»ç»Ÿç˜«ç—ªã€‚</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597900777242-4fe25009.png" alt="1597900777242" tabindex="0" loading="lazy"><figcaption>1597900777242</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597900843477-c48cd178.png" alt="1597900843477" tabindex="0" loading="lazy"><figcaption>1597900843477</figcaption></figure><h3 id="sentinelresourceé…ç½®" tabindex="-1"><a class="header-anchor" href="#sentinelresourceé…ç½®" aria-hidden="true">#</a> @SentinelResourceé…ç½®</h3><blockquote><p>@SentinelResource æ³¨è§£ï¼Œä¸»è¦æ˜¯æŒ‡å®šèµ„æºåï¼ˆä¹Ÿå¯ä»¥ç”¨è¯·æ±‚è·¯å¾„ä½œä¸ºèµ„æºåï¼‰ï¼Œå’ŒæŒ‡å®šé™çº§å¤„ç†æ–¹æ³•çš„ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>csp<span class="token punctuation">.</span>sentinel<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">SentinelResource</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>csp<span class="token punctuation">.</span>sentinel<span class="token punctuation">.</span>slots<span class="token punctuation">.</span>block<span class="token punctuation">.</span></span><span class="token class-name">BlockException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">CommonResult</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">Payment</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestControllerpublic</span> <span class="token keyword">class</span> <span class="token class-name">RateLimitController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/byResource&quot;</span><span class="token punctuation">)</span>						<span class="token comment">//å¤„ç†é™çº§çš„æ–¹æ³•å    @SentinelResource(value = &quot;byResource&quot;, blockHandler = &quot;handleException&quot;)    public CommonResult byResource(){        return new CommonResult(200, &quot;æŒ‰ç…§èµ„æºåé™æµæµ‹è¯•0K&quot;, new Payment(2020L,&quot;serial001&quot;));    }    //é™çº§æ–¹æ³•    public CommonResult handleException(BlockException e){        return new CommonResult(444, e.getClass().getCanonicalName() + &quot;\t æœåŠ¡ä¸å¯ç”¨&quot;);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/1597901945492-efb7ec1e.png" alt="1597901945492" tabindex="0" loading="lazy"><figcaption>1597901945492</figcaption></figure><p>å¾ˆæ˜æ˜¾ï¼Œä¸Šé¢è™½ç„¶è‡ªå®šä¹‰äº†å…œåº•æ–¹æ³•ï¼Œä½†æ˜¯è€¦åˆåº¦å¤ªé«˜ï¼Œä¸‹é¢è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h4 id="è‡ªå®šä¹‰å…¨å±€blockhandlerå¤„ç†ç±»" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å…¨å±€blockhandlerå¤„ç†ç±»" aria-hidden="true">#</a> è‡ªå®šä¹‰å…¨å±€BlockHandlerå¤„ç†ç±»</h4><p>å†™ä¸€ä¸ª CustomerBlockHandler è‡ªå®šä¹‰é™æµå¤„ç†ç±»ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597903188558-463df1db.png" alt="1597903188558" tabindex="0" loading="lazy"><figcaption>1597903188558</figcaption></figure><h3 id="æ•´åˆ-openfeign-æœåŠ¡é™çº§" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ-openfeign-æœåŠ¡é™çº§" aria-hidden="true">#</a> æ•´åˆ openfeign æœåŠ¡é™çº§</h3><h4 id="å‰å¥" tabindex="-1"><a class="header-anchor" href="#å‰å¥" aria-hidden="true">#</a> å‰å¥</h4><blockquote><p>ä¹‹å‰æœ‰ open-feign å’Œ hystrix çš„æ•´åˆï¼Œç°åœ¨æ¥å®ç°sentinel æ•´åˆ ribbon + open-feign + fallback è¿›è¡ŒæœåŠ¡ç†”æ–­ã€‚</p><p>æ–°å»ºä¸‰ä¸ªæ¨¡å—ï¼Œä¸¤ä¸ªæä¾›è€… 9004ã€9005ï¼Œå’Œä¸€ä¸ªæ¶ˆè´¹è€… 84</p><p>ç›®çš„ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597905761214-7a39d3ce.png" alt="1597905761214" tabindex="0" loading="lazy"><figcaption>1597905761214</figcaption></figure><p>ä¸Šé¢ä½¿ç”¨sentinelæœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œå°±æ˜¯sentinelï¼Œå¯¹ç¨‹åºå†…éƒ¨å¼‚å¸¸ï¼ˆå„ç§å¼‚å¸¸ï¼ŒåŒ…æ‹¬è¶…æ—¶ï¼‰è¿™ç§æ•æ‰ï¼Œæ˜¾å¾—å¾ˆä¹åŠ›ï¼Œå®ƒä¸»è¦æ˜¯é’ˆå¯¹æµé‡æ§åˆ¶ï¼Œç³»ç»Ÿååé‡ï¼Œæˆ–è€…æ˜¯å¼‚å¸¸æ¯”ä¾‹è¿™ç§ï¼Œä¼šå‘ç”Ÿé™çº§æˆ–ç†”æ–­ï¼Œä½†æ˜¯å½“ç¨‹åºå†…éƒ¨å‘ç”Ÿå¼‚å¸¸ï¼Œç›´æ¥è¿”å›ç»™ç”¨æˆ·é”™è¯¯é¡µé¢ï¼Œæ ¹æœ¬ä¸ä¼šè§¦å‘å¼‚å¸¸æ¯”ä¾‹è¿™ç§é™çº§ã€‚æ‰€ä»¥æ‰éœ€è¦æ•´åˆopen-feign æ¥è§£å†³ç¨‹åºå†…éƒ¨å¼‚å¸¸æ—¶ï¼Œé…ç½®ç›¸åº”çš„å…œåº•æ–¹æ³•</p></blockquote><p>-----------------------------------------------------------ä¸¤ä¸ªæä¾›è€…æ¨¡å—ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š</p><p>pomä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springcloud alibaba nacos ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>                <span class="token comment">&lt;!-- springbootæ•´åˆWebç»„ä»¶ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ—¥å¸¸é€šç”¨jaråŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ymlé…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9005</span>  <span class="token comment"># / 9004spring:  application:    name: nacos-payment-provider  cloud:    nacos:      discovery:        server-addr: localhost:8848management:  endpoints:    web:      exposure:        include: &#39;*&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»åªæ˜¯å¯åŠ¨ï¼Œæ²¡æœ‰å…¶å®ƒæ³¨è§£ã€‚</p><p>controller :</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>sprIngcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">CommonResult</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">Payment</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestControllerpublic</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>    <span class="token comment">//æ¨¡æ‹ŸsqlæŸ¥è¯¢    public static HashMap&lt;Long, Payment&gt; hashMap = new HashMap&lt;&gt;();    static {        hashMap.put(1L, new Payment(1L, &quot;xcxcxcxcxcxcxcxcxcxcxcxcxc11111111&quot;));        hashMap.put(2L, new Payment(2L, &quot;xcxcxcxcggggggggg2222222222222222&quot;));        hashMap.put(3L, new Payment(3L, &quot;xcxcxcxccxxcxcfafdgdgdsgdsgds33333&quot;));    }    @GetMapping(&quot;/payment/get/{id}&quot;)    public CommonResult paymentSql(@PathVariable(&quot;id&quot;)Long id){        Payment payment = hashMap.get(id);        CommonResult result = new CommonResult(200, &quot;from mysql, server port : &quot; + serverPort + &quot; ,æŸ¥è¯¢æˆåŠŸ&quot;, payment);        return result;    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>---------------------------------------------------------------------------------æ¶ˆè´¹è€…ï¼š</p><p>pomä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- åç»­åšSentinelçš„æŒä¹…åŒ–ä¼šç”¨åˆ°çš„ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- sentinel  --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springcloud alibaba nacos ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springbootæ•´åˆWebç»„ä»¶ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ—¥å¸¸é€šç”¨jaråŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ymlé…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">84spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> <span class="token key atrule">localhost:8848    sentinel</span><span class="token punctuation">:</span>      <span class="token key atrule">transport</span><span class="token punctuation">:</span>        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> <span class="token key atrule">localhost:8080        port</span><span class="token punctuation">:</span> <span class="token key atrule">8719  application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>order<span class="token punctuation">-</span>consumer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ä¸ç”¨è¯´äº†ã€‚</p><p>configç±»é‡Œé¢æ³¨å…¥ Resttemplateï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configurationpublic</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@LoadBalanced</span>    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controller å±‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestControllerpublic</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">PAYMENT_URL</span><span class="token operator">=</span><span class="token string">&quot;http://nacos-payment-provider&quot;</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consutomer/payment/get/{id}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">getPayment</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">&gt;=</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;éæ³•å‚æ•°å¼‚å¸¸...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token constant">PAYMENT_URL</span> <span class="token operator">+</span> <span class="token string">&quot;/payment/get/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢åªå®ç°äº† ä»¥nacos ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œæ¶ˆè´¹è€…ä½¿ç”¨ribbon å®ç°è´Ÿè½½å‡è¡¡è°ƒç”¨æä¾›è€…çš„æ•ˆæœã€‚</p><h4 id="æ­£å¼" tabindex="-1"><a class="header-anchor" href="#æ­£å¼" aria-hidden="true">#</a> æ­£å¼</h4><p>åªé…ç½® fallback:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consutomer/payment/get/{id}&quot;</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;fallback&quot;</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token string">&quot;handleFallback&quot;</span><span class="token punctuation">)</span> <span class="token comment">//fallbackåªå¤„ç†ä¸šåŠ¡å¼‚å¸¸    public CommonResult getPayment(@PathVariable(&quot;id&quot;)Long id){        if(id &gt;= 4){            throw new IllegalArgumentException(&quot;éæ³•å‚æ•°å¼‚å¸¸...&quot;);        }else {            return restTemplate.getForObject(PAYMENT_URL + &quot;/payment/get/&quot; + id, CommonResult.class);        }    }    //å…œåº•æ–¹æ³•    public CommonResult handleFallback(@PathVariable(&quot;id&quot;)Long id, Throwable e){        return new CommonResult(414, &quot;---éæ³•å‚æ•°å¼‚å¸¸--&quot;, e);    }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>ä¸šåŠ¡å¼‚å¸¸ä¼šè¢« fallback å¤„ç†ï¼Œè¿”å›æˆ‘ä»¬è‡ªå®šä¹‰çš„æç¤ºä¿¡æ¯ï¼Œè€Œå¦‚æœç»™å®ƒåŠ ä¸Šæµæ§ï¼Œå¹¶è§¦å‘é˜ˆå€¼ï¼Œåªèƒ½è¿”å›sentinelé»˜è®¤çš„æç¤ºä¿¡æ¯ã€‚</p></blockquote><p>åªé…ç½®blockHandler:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token comment">//@SentinelResource(value = &quot;fallback&quot;, fallback = &quot;handleFallback&quot;) //fallbackåªå¤„ç†ä¸šåŠ¡å¼‚å¸¸    @GetMapping(&quot;/consutomer/payment/get/{id}&quot;)    @SentinelResource(value = &quot;fallback&quot;, blockHandler = &quot;handleblockHandler&quot;)    public CommonResult getPayment(@PathVariable(&quot;id&quot;)Long id){        if(id &gt;= 4){            throw new IllegalArgumentException(&quot;éæ³•å‚æ•°å¼‚å¸¸...&quot;);        }else {            return restTemplate.getForObject(PAYMENT_URL + &quot;/payment/get/&quot; + id, CommonResult.class);        }    }//    //====fallback//    public CommonResult handleFallback(@PathVariable(&quot;id&quot;)Long id, Throwable e){//        return new CommonResult(414, &quot;---éæ³•å‚æ•°å¼‚å¸¸--&quot;, e);//    }    //====blockHandler                                       blockHandlerçš„æ–¹æ³•å¿…é¡»æœ‰è¿™ä¸ªå‚æ•°    public CommonResult handleblockHandler(@PathVariable(&quot;id&quot;)Long id, BlockException e){        return new CommonResult(414, &quot;---éæ³•å‚æ•°å¼‚å¸¸--&quot;, e);    }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>è¿™æ—¶å€™çš„æ•ˆæœå°±æ˜¯ï¼Œè¿è¡Œå¼‚å¸¸ç›´æ¥æŠ¥é”™é”™è¯¯é¡µé¢ã€‚åœ¨sentinelä¸Šæ·»åŠ ä¸€ä¸ªé™çº§è§„åˆ™ï¼Œè®¾ç½®2så†…è§¦å‘å¼‚å¸¸2æ¬¡ï¼Œè§¦å‘é˜ˆå€¼ä»¥åï¼Œè¿”å›çš„æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ blockhanlder æ–¹æ³•è¿”å›çš„å†…å®¹ã€‚</p></blockquote><p>ä¸¤è€…éƒ½é…ç½®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token comment">//@SentinelResource(value = &quot;fallback&quot;, fallback = &quot;handleFallback&quot;) //fallbackåªå¤„ç†ä¸šåŠ¡å¼‚å¸¸    @GetMapping(&quot;/consutomer/payment/get/{id}&quot;)    @SentinelResource(value = &quot;fallback&quot;, blockHandler = &quot;handleblockHandler&quot;, fallback = &quot;handleFallback&quot;)    public CommonResult getPayment(@PathVariable(&quot;id&quot;)Long id){        if(id &gt;= 4){            throw new IllegalArgumentException(&quot;éæ³•å‚æ•°å¼‚å¸¸...&quot;);        }else {            return restTemplate.getForObject(PAYMENT_URL + &quot;/payment/get/&quot; + id, CommonResult.class);        }    }    //====fallback    public CommonResult handleFallback(@PathVariable(&quot;id&quot;)Long id, Throwable e){        return new CommonResult(414, &quot;---éæ³•å‚æ•°å¼‚å¸¸--form fallbackçš„æç¤º&quot;, e);    }    //====blockHandler                                       blockHandlerçš„æ–¹æ³•å¿…é¡»æœ‰è¿™ä¸ªå‚æ•°    public CommonResult handleblockHandler(@PathVariable(&quot;id&quot;)Long id, BlockException e){        return new CommonResult(414, &quot;---éæ³•å‚æ•°å¼‚å¸¸--&quot;, e);    }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>æ˜æ˜¾ä¸¤è€…éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå¯ä»¥åŒæ—¶é…ç½®ã€‚</p></blockquote><h4 id="å…¨å±€é™çº§" tabindex="-1"><a class="header-anchor" href="#å…¨å±€é™çº§" aria-hidden="true">#</a> å…¨å±€é™çº§</h4><blockquote><p>ä¸Šé¢æ˜¯å•ä¸ªè¿›è¡Œ fallback å’Œ blockhandler çš„æµ‹è¯•ï¼Œä¸‹é¢æ˜¯æ•´åˆ openfeign å®ç°æŠŠé™çº§æ–¹æ³•è§£è€¦ã€‚å’ŒHystrix å‡ ä¹ä¸€æ‘¸ä¸€æ ·ï¼</p></blockquote><p>è¿˜æ˜¯ä½¿ç”¨ä¸Šé¢ 84 è¿™ä¸ªæ¶ˆè´¹è€…åšæµ‹è¯•ï¼š</p><ol><li>å…ˆæ·»åŠ open-feignä¾èµ–ï¼š</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>yml è¿½åŠ å¦‚ä¸‹é…ç½®ï¼š</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># æ¿€æ´»Sentinelå¯¹Feignçš„æ”¯æŒfeign:  sentinel:    enabled: true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>ä¸»å¯åŠ¨ç±»æ·»åŠ æ³¨è§£ ï¼š @EnableFeignClients æ¿€æ´»open-feign</li><li>service :</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;nacos-payment-provider&quot;</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token class-name">PaymentServiceImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/get/{id}&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">paymentSql</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>service å®ç°ç±»ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Componentpublic</span> <span class="token keyword">class</span> <span class="token class-name">PaymentServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">paymentSql</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">414</span><span class="token punctuation">,</span> <span class="token string">&quot;open-feign æ•´åˆ sentinel å®ç°çš„å…¨å±€æœåŠ¡é™çº§ç­–ç•¥&quot;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="6"><li>controller å±‚ä»£ç æ²¡ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œå’Œæ™®é€šè°ƒç”¨service ä¸€æ ·å³å¯ã€‚</li><li>æµ‹è¯•ï¼Œå…³é—­æä¾›è€…çš„é¡¹ç›®ï¼Œä¼šè§¦å‘ service å®ç°ç±»çš„æ–¹æ³•ã€‚</li><li>æ€»ç»“: è¿™ç§å…¨å±€ç†”æ–­ï¼Œæ˜¯é’ˆå¯¹ â€œè®¿é—®æä¾›è€…â€ è¿™ä¸ªè¿‡ç¨‹çš„ï¼Œåªæœ‰è®¿é—®æä¾›è€…è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸æ‰ä¼šè§¦å‘é™çº§ï¼Œä¹Ÿå°±æ˜¯è¿™äº›é™çº§ï¼Œæ˜¯ç»™serviceæ¥å£ä¸Šè¿™äº›æä¾›è€…çš„æ–¹æ³•åŠ çš„ï¼Œä»¥ä¿è¯åœ¨è¿œç¨‹è°ƒç”¨æ—¶èƒ½é¡ºåˆ©è¿›è¡Œã€‚è€Œä¸”è¿™æ˜æ˜¾æ˜¯ fallback ï¼Œè€Œä¸æ˜¯ blockHandlerï¼Œæ³¨æ„åŒºåˆ†ã€‚</li></ol><blockquote><p>fallback å’Œ blockHandler è‚¤æµ…çš„åŒºåˆ«ï¼š</p><p>F ï¼š ä¸éœ€è¦æŒ‡å®šè§„åˆ™ï¼Œç¨‹åºå†…éƒ¨å¼‚å¸¸å‡å¯è§¦å‘ï¼ˆè¶…æ—¶å¼‚å¸¸éœ€è¦é…ç½®è¶…æ—¶æ—¶é—´ï¼‰</p><p>B : é…ä¸Šä¹Ÿæ²¡ç”¨ï¼Œå¿…é¡»å» Sentinel ä¸ŠæŒ‡å®šè§„åˆ™æ‰ä¼šè¢«è§¦å‘ã€‚</p></blockquote><h3 id="å¼‚å¸¸å¿½ç•¥" tabindex="-1"><a class="header-anchor" href="#å¼‚å¸¸å¿½ç•¥" aria-hidden="true">#</a> å¼‚å¸¸å¿½ç•¥</h3><blockquote><p>è¿™æ˜¯ @SentinelResource æ³¨è§£çš„ä¸€ä¸ªå€¼ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597909285814-2ca12556.png" alt="1597909285814" tabindex="0" loading="lazy"><figcaption>1597909285814</figcaption></figure></blockquote><h3 id="æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#æŒä¹…åŒ–" aria-hidden="true">#</a> æŒä¹…åŒ–</h3><blockquote><p>ç›®å‰çš„sentinel å½“é‡å¯ä»¥åï¼Œæ•°æ®éƒ½ä¼šä¸¢å¤±ï¼Œå’Œ nacos ç±»ä¼¼åŸç†ã€‚éœ€è¦æŒä¹…åŒ–ã€‚å®ƒå¯ä»¥è¢«æŒä¹…åŒ–åˆ° nacos çš„æ•°æ®åº“ä¸­ã€‚</p></blockquote><ol><li>pomä¾èµ–ï¼š</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ymlé…ç½®ï¼š</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>      <span class="token key atrule">datasource</span><span class="token punctuation">:</span>        <span class="token key atrule">ds1</span><span class="token punctuation">:</span>            <span class="token key atrule">nacos</span><span class="token punctuation">:</span>            <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> <span class="token key atrule">localhost:8848            dataId</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>            group<span class="token punctuation">:</span> <span class="token key atrule">DEFAULT_GROUP            data-type</span><span class="token punctuation">:</span> <span class="token key atrule">json            rule-type</span><span class="token punctuation">:</span> flow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>å»nacosä¸Šåˆ›å»ºä¸€ä¸ªdataid ,åå­—å’Œymlé…ç½®çš„ä¸€è‡´ï¼Œjsonæ ¼å¼ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li></ol><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">[</span>    <span class="token punctuation">{</span>        <span class="token property">&quot;resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/testA&quot;</span><span class="token punctuation">,</span>        <span class="token property">&quot;limitApp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>        <span class="token property">&quot;grade&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">&quot;strategy&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">&quot;controlBehavior&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">&quot;clusterMode&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/1597913169207-df7f583a.png" alt="1597913169207" tabindex="0" loading="lazy"><figcaption>1597913169207</figcaption></figure><ol start="4"><li>å¯åŠ¨åº”ç”¨ï¼Œå‘ç°å­˜åœ¨ å…³äº /testA è¯·æ±‚è·¯å¾„çš„æµæ§è§„åˆ™ã€‚</li><li>æ€»ç»“: å°±æ˜¯åœ¨ sentinel å¯åŠ¨çš„æ—¶å€™ï¼Œå» nacos ä¸Šè¯»å–ç›¸å…³è§„åˆ™é…ç½®ä¿¡æ¯ï¼Œå®é™…ä¸Šå®ƒè§„åˆ™çš„æŒä¹…åŒ–ï¼Œå°±æ˜¯ç¬¬ä¸‰æ­¥ï¼Œç²˜è´´åˆ°nacosä¸Šä¿å­˜ä¸‹æ¥ï¼Œå°±ç®—ä»¥ååœ¨ sentinel ä¸Šé¢ä¿®æ”¹äº†ï¼Œé‡å¯åº”ç”¨ä»¥åä¹Ÿæ˜¯æ— æ•ˆçš„ã€‚</li></ol><h2 id="seata" tabindex="-1"><a class="header-anchor" href="#seata" aria-hidden="true">#</a> Seata</h2><blockquote><p>Seate å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</p><p>å¾®æœåŠ¡æ¨¡å—ï¼Œè¿æ¥å¤šä¸ªæ•°æ®åº“ï¼Œå¤šä¸ªæ•°æ®æºï¼Œè€Œæ•°æ®åº“ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§éœ€è¦è¢«ä¿è¯ã€‚</p><p>å®˜ç½‘ï¼š <a href="http://seata.io/zh-cn/" target="_blank" rel="noopener noreferrer">http://seata.io/zh-cn/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>Seataæœ¯è¯­ï¼š ä¸€ + ä¸‰</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597982738615-955d07c0.png" alt="1597982738615" tabindex="0" loading="lazy"><figcaption>1597982738615</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597982788659-ac56995e.png" alt="1597982788659" tabindex="0" loading="lazy"><figcaption>1597982788659</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597982858545-13f24963.png" alt="1597982858545" tabindex="0" loading="lazy"><figcaption>1597982858545</figcaption></figure><h3 id="ä¸‹è½½å®‰è£…" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½å®‰è£…" aria-hidden="true">#</a> ä¸‹è½½å®‰è£…</h3><blockquote><p>ä¸‹è½½åœ°å€ ï¼š <a href="https://github.com/seata/seata/releases/download/v1.0.0/seata-server-1.0.0.zip" target="_blank" rel="noopener noreferrer">https://github.com/seata/seata/releases/download/v1.0.0/seata-server-1.0.0.zip<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597984908755-682e6e24.png" alt="1597984908755" tabindex="0" loading="lazy"><figcaption>1597984908755</figcaption></figure><h3 id="åˆå§‹åŒ–æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–æ“ä½œ" aria-hidden="true">#</a> åˆå§‹åŒ–æ“ä½œ</h3><ol><li>ä¿®æ”¹ conf/file.conf æ–‡ä»¶ï¼š</li></ol><blockquote><p>ä¸»è¦ä¿®æ”¹è‡ªå®šä¹‰äº‹åŠ¡ç»„åç§° + äº‹åŠ¡æ—¥å¿—å­˜å‚¨æ¨¡å¼ä¸ºdb + æ•°æ®åº“è¿æ¥ä¿¡æ¯</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597990431346-f0374944.png" alt="1597990431346" tabindex="0" loading="lazy"><figcaption>1597990431346</figcaption></figure></blockquote><ol start="2"><li><p>åˆ›å»ºåå’Œ file.conf æŒ‡å®šä¸€è‡´çš„æ•°æ®åº“ã€‚</p></li><li><p>åœ¨æ–°å»ºçš„æ•°æ®åº“é‡Œé¢åˆ›å»ºæ•°æ®è¡¨ï¼Œdb_store.sqlæ–‡ä»¶åœ¨ conf ç›®å½•ä¸‹ï¼ˆ1.0.0æœ‰å‘ï¼Œæ²¡æœ‰sqlæ–‡ä»¶ï¼Œä¸‹è½½0.9.0çš„ï¼Œä½¿ç”¨å®ƒçš„sqlæ–‡ä»¶å³å¯ï¼‰</p></li><li><p>ä¿®æ”¹ conf/registry.conf æ–‡ä»¶å†…å®¹ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597986227251-d8fbee64.png" alt="1597986227251" tabindex="0" loading="lazy"><figcaption>1597986227251</figcaption></figure></li><li><p>å…ˆå¯åŠ¨ nacos Server æœåŠ¡ï¼Œå†å¯åŠ¨seata Server ã€‚</p></li><li><p>å¯åŠ¨ Seata Server æŠ¥é”™ï¼Œåœ¨binç›®å½•åˆ›å»º /logs/seata_gc.log æ–‡ä»¶ã€‚å†æ¬¡åŒå‡» batæ–‡ä»¶å¯åŠ¨ã€‚</p></li></ol><h3 id="æ¡ˆä¾‹-2" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-2" aria-hidden="true">#</a> æ¡ˆä¾‹</h3><h4 id="æ•°æ®åº“å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“å‡†å¤‡" aria-hidden="true">#</a> æ•°æ®åº“å‡†å¤‡</h4><figure><img src="/Computer-Science-Learn-Notes/assets/1597987564813-def993af.png" alt="1597987564813" tabindex="0" loading="lazy"><figcaption>1597987564813</figcaption></figure><p>åˆ›å»ºä¸‰ä¸ªæ•°æ®åº“ï¼š <img src="/Computer-Science-Learn-Notes/assets/1597987722338-d713ed26.png" alt="1597987722338" loading="lazy"></p><p>æ¯ä¸ªæ•°æ®åº“åˆ›å»ºæ•°æ®è¡¨ï¼š</p><p>order åº“ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597988061545-272e3ea0.png" alt="1597988061545" tabindex="0" loading="lazy"><figcaption>1597988061545</figcaption></figure><p>account åº“ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597988768251-3faa496f.png" alt="1597988768251" tabindex="0" loading="lazy"><figcaption>1597988768251</figcaption></figure><p>storage åº“ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597988262441-d7a54d0f.png" alt="1597988262441" tabindex="0" loading="lazy"><figcaption>1597988262441</figcaption></figure><p>ä¸‰ä¸ªæ•°æ®åº“éƒ½åˆ›å»ºä¸€ä¸ªå›æ»šæ—¥å¿—è¡¨ï¼Œseata/conf/ æœ‰ç›¸åº”çš„sqlæ–‡ä»¶ï¼ˆ1.0.0æ²¡æœ‰ï¼Œä¾ç„¶ä½¿ç”¨0.9.0ä¸­çš„ï¼‰ã€‚</p><p>æœ€ç»ˆæ•ˆæœï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597989003349-d0a4b1c3.png" alt="1597989003349" tabindex="0" loading="lazy"><figcaption>1597989003349</figcaption></figure><h4 id="å¼€å‘" tabindex="-1"><a class="header-anchor" href="#å¼€å‘" aria-hidden="true">#</a> å¼€å‘</h4><blockquote><p>å®ç° ä¸‹è®¢å•-&gt; å‡åº“å­˜ -&gt; æ‰£ä½™é¢ -&gt; æ”¹ï¼ˆè®¢å•ï¼‰çŠ¶æ€</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸‹é¢åšäº† seata ä¸ mybatis çš„æ•´åˆï¼Œæ‰€ä»¥æ³¨æ„ä¸€ä¸‹ï¼Œå’Œä»¥å¾€çš„mybatisçš„ä½¿ç”¨ä¸å¤ªä¸€æ ·ã€‚</p></blockquote><p>æ–°å»ºæ¨¡å— cloudalibaba-seata-order2001 ï¼š</p><p>pomä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- seata --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>seata-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>seata-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springcloud alibaba nacos ä¾èµ–,Nacos Server æœåŠ¡æ³¨å†Œä¸­å¿ƒ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- open feign æœåŠ¡è°ƒç”¨ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- springbootæ•´åˆWebç»„ä»¶ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æŒä¹…å±‚æ”¯æŒ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--mysql-connector-java--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--jdbc--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- mybatis --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ—¥å¸¸é€šç”¨jaråŒ… --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.dkf.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ymlé…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">2001spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">seata-order-service  cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">alibaba</span><span class="token punctuation">:</span>      <span class="token key atrule">seata</span><span class="token punctuation">:</span>        <span class="token comment"># è‡ªå®šä¹‰äº‹åŠ¡ç»„ï¼Œéœ€è¦å’Œå½“æ—¶åœ¨ seata/conf/file.conf ä¸­çš„ä¸€è‡´        tx-service-group: dkf_tx_group    nacos:      discovery:        server-addr: localhost:8848  datasource:    driver-class-name: com.mysql.jdbc.Driver    url: jdbc:mysql://localhost:3306/seata_order    username: root    password: 123456# æ³¨æ„ï¼Œè¿™æ˜¯è‡ªå®šä¹‰çš„ï¼ŒåŸæ¥çš„æ˜¯mapper_locationsmybatis:  mapperLocations: classpath:mapper/*.xmllogging:  level:    io:      seata: info</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å°† seata/conf/ ä¸‹çš„ file.conf å’Œ registry.cong ä¸¤ä¸ªæ–‡ä»¶æ‹·è´åˆ° resource ç›®å½•ä¸‹ã€‚</p><p>åˆ›å»º domain å®ä½“ç±» ï¼š Order å’Œ CommonResult<code>&lt;T&gt;</code> ä¸¤ä¸ªå®ä½“ç±»ã€‚</p><p>dao :</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dkf<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">Order</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Param</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Mapperpublic</span> <span class="token keyword">class</span> <span class="token class-name">OrderDao</span> <span class="token punctuation">{</span>    <span class="token comment">//åˆ›å»ºè®¢å•    public void create(Order order);    //ä¿®æ”¹è®¢å•çŠ¶æ€    public void update(@Param(&quot;userId&quot;) Long userId, @Param(&quot;status&quot;) Integer status);}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Mapperæ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.dkf.springcloud.dao.OrderDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- ä»¥å¤‡åé¢ä¼šç”¨åˆ° --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BaseResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.dkf.springcloud.domain.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BIGINT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BIGINT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>product_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>productId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BIGINT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INTEGER<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DECIMAL<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INTEGER<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>        insert into t_order(id, user_id, product_id, count, money, status)        values (null, #{userId},#{productId},#{count},#{money},0)    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>        update t_order set status = 1 where user_id=#{userId} and status=#{status}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»ºservice ï¼š</p><blockquote><p>æ³¨æ„ï¼Œçº¢æ¡†æ ‡è®°çš„æ˜¯é€šè¿‡ open-feign è¿œç¨‹è°ƒç”¨å¾®æœåŠ¡çš„service</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/1597992817318-004b69f0.png" alt="1597992817318" tabindex="0" loading="lazy"><figcaption>1597992817318</figcaption></figure><p>serviceImpl :</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@Slf4jpublic</span> <span class="token keyword">class</span> <span class="token class-name">OrderServiceImpl</span>  <span class="token keyword">implements</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">OrderDao</span> orderDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">StorageService</span> storageService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">AccountService</span> accountService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;--------ã€‹ å¼€å§‹åˆ›å»ºè®¢å•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        orderDao<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨åº“å­˜ï¼Œåšæ‰£å‡---Count-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        storageService<span class="token punctuation">.</span><span class="token function">decrease</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getProductId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> order<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨åº“å­˜ï¼Œåº“å­˜æ‰£å‡å®Œæˆï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨è´¦æˆ·ï¼Œè´¦æˆ·æ‰£å‡---money-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        accountService<span class="token punctuation">.</span><span class="token function">decrease</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>order<span class="token punctuation">.</span><span class="token function">getMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨è´¦æˆ·ï¼Œè´¦æˆ·æ‰£å‡å®Œæˆ!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œä»0åˆ°1        log.info(&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œstart&quot;);        orderDao.update(order.getUserId(),0);        log.info(&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œend&quot;);        log.info(&quot;--è®¢å•ç»“æŸ--&quot;);    }    @Override    public void update(Long userId, Integer status) {    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>config ï¼ˆç‰¹æ®Šç‚¹ï¼‰:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//ä¸‹é¢æ˜¯ä¸¤ä¸ªé…ç½®ç±»ï¼Œè¿™ä¸ªæ˜¯å’Œmybatisæ•´åˆéœ€è¦çš„é…ç½®@Configuration@MapperScan({&quot;com.dkf.springcloud.alibaba.dao&quot;})public class MybatisConfig {}//è¿™ä¸ªæ˜¯é…ç½®ä½¿ç”¨ seata ç®¡ç†æ•°æ®æºï¼Œæ‰€ä»¥å¿…é¡»é…ç½®package com.dkf.springcloud.config;import com.alibaba.druid.pool.DruidDataSource;import io.seata.rm.datasource.DataSourceProxy;import org.apache.ibatis.session.SqlSessionFactory;import org.mybatis.spring.SqlSessionFactoryBean;import org.mybatis.spring.transaction.SpringManagedTransactionFactory;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.core.io.support.PathMatchingResourcePatternResolver;import javax.sql.DataSource;@Configurationpublic class DataSourceProxyConfig {    @Value(&quot;${mybatis.mapperLocations}&quot;)    private String mapperLocations;    @Bean    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)    public DataSource druidDataSource(){        return new DruidDataSource();    }    @Bean    public DataSourceProxy dataSourceProxy(DataSource dataSource){        return new DataSourceProxy(dataSource);    }    @Bean    public SqlSessionFactory sqlSessionFactoryBean(DataSourceProxy dataSourceProxy) throws Exception {        SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();        sqlSessionFactoryBean.setDataSource(dataSourceProxy);        sqlSessionFactoryBean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(mapperLocations));        sqlSessionFactoryBean.setTransactionFactory(new SpringManagedTransactionFactory());        return sqlSessionFactoryBean.getObject();    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸»å¯åŠ¨ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//è¿™é‡Œå¿…é¡»æ’é™¤æ•°æ®æºè‡ªåŠ¨é…ç½®ï¼Œå› ä¸ºå†™äº†é…ç½®ç±»ï¼Œè®© seata ç®¡ç†æ•°æ®æº@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)@EnableFeignClients@EnableDiscoveryClientpublic class SeataOrderMain2001 {    public static void main(String[] args) {        SpringApplication.run(SeataOrderMain2001.class,args);    }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>controller å±‚è°ƒç”¨ orderService æ–¹æ³•å³å¯ã€‚</p><p>å…ˆå¯åŠ¨ nacos --ã€‹ å†å¯åŠ¨ seata --&gt; å†å¯åŠ¨æ­¤orderæœåŠ¡ï¼Œæµ‹è¯•ï¼Œå¯ä»¥å¯åŠ¨ã€‚</p><p>ä»¿ç…§ä¸Šé¢ åˆ›å»º cloudalibaba-seata-storage2002 å’Œ cloudalibaba-seata-account2003 ä¸¤ä¸ªæ¨¡å—ï¼Œå”¯ä¸€å¤§çš„åŒºåˆ«å°±æ˜¯è¿™ä¸¤ä¸ªä¸éœ€è¦å¯¼å…¥ open-feign è¿œç¨‹è°ƒç”¨å…¶å®ƒæ¨¡å—ã€‚</p><p>æ“ï¼Œç´¯æ­»è€å­å•¦ï¼Œæµ‹è¯•å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼</p><h4 id="seataä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#seataä½¿ç”¨" aria-hidden="true">#</a> Seataä½¿ç”¨</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token annotation punctuation">@Override</span>	<span class="token comment">//åªéœ€è¦åœ¨ä¸šåŠ¡ç±»çš„æ–¹æ³•ä¸ŠåŠ ä¸Šè¯¥æ³¨è§£ï¼Œnameå€¼è‡ªå®šä¹‰å”¯ä¸€å³å¯ã€‚    @GlobalTransactional(name = &quot;dkf-create-order&quot;, rollbackFor = Exception.class)    public void create(Order order) {        log.info(&quot;--------ã€‹ å¼€å§‹åˆ›å»ºè®¢å•&quot;);        orderDao.create(order);        log.info(&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨åº“å­˜ï¼Œåšæ‰£å‡---Count-&quot;);        storageService.decrease(order.getProductId(), order.getCount());        log.info(&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨åº“å­˜ï¼Œåº“å­˜æ‰£å‡å®Œæˆï¼ï¼&quot;);        log.info(&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨è´¦æˆ·ï¼Œè´¦æˆ·æ‰£å‡---money-&quot;);        accountService.decrease(order.getUserId(),order.getMoney());        log.info(&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨è´¦æˆ·ï¼Œè´¦æˆ·æ‰£å‡å®Œæˆ!!&quot;);        //ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œä»0åˆ°1        log.info(&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œstart&quot;);        orderDao.update(order.getUserId(),0);        log.info(&quot;--------ã€‹ è®¢å•å¾®æœåŠ¡ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œend&quot;);        log.info(&quot;--è®¢å•ç»“æŸ--&quot;);    }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/Computer-Science-Learn-Notes/assets/1597998982271-b5a0e39e.png" alt="1597998982271" tabindex="0" loading="lazy"><figcaption>1597998982271</figcaption></figure><p>åŸç†ä¸‰ä¸ªé˜¶æ®µï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/1597999156669-4986d759.png" alt="1597999156669" tabindex="0" loading="lazy"><figcaption>1597999156669</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597999227092-60d5134b.png" alt="1597999227092" tabindex="0" loading="lazy"><figcaption>1597999227092</figcaption></figure><figure><img src="/Computer-Science-Learn-Notes/assets/1597999292492-2456aa80.png" alt="1597999292492" tabindex="0" loading="lazy"><figcaption>1597999292492</figcaption></figure></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/edit/main/demo/theme-docs/src/Java/fm/SpringCloud.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 542716863@qq.com">RrOrange</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/Computer-Science-Learn-Notes/Java/fm/SpringSecurity.html" class="nav-link prev" aria-label="SpringSecurity"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->SpringSecurity</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2023 zhiyu1998</div></footer></div><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/Computer-Science-Learn-Notes/assets/app-4cd1d840.js" defer></script>
  </body>
</html>
