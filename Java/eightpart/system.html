<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/Java/eightpart/system.html"><meta property="og:title" content="æ“ä½œç³»ç»Ÿ"><meta property="og:description" content="ğŸ’»æ“ä½œç³»ç»Ÿ ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ã€‚ åç¨‹ä¸æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç®¡ç†ï¼Œè€Œæ˜¯å®Œå…¨ç”±ç”¨æˆ·ç¨‹åºæ‰€æ§åˆ¶ï¼Œè¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œä¸ä¼šåƒçº¿ç¨‹åˆ‡æ¢é‚£æ ·æ¶ˆè€—èµ„æºã€‚ åç¨‹å¯ä»¥ç†è§£ä¸ºå¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°ã€‚å®ƒæ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚åç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›æ¥çš„æ—¶å€™ï¼Œæ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆï¼Œç›´æ¥æ“ä½œ..."><meta property="og:type" content="article"><meta property="og:image" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-04-04T17:31:51.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="æ“ä½œç³»ç»Ÿ"><meta property="article:author" content="zhiyu1998"><meta property="article:modified_time" content="2023-04-04T17:31:51.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"æ“ä½œç³»ç»Ÿ","image":["https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/"],"dateModified":"2023-04-04T17:31:51.000Z","author":[{"@type":"Person","name":"zhiyu1998"}]}</script><link rel="manifest" href="/Computer-Science-Learn-Notes/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>æ“ä½œç³»ç»Ÿ</title><meta name="description" content="ğŸ’»æ“ä½œç³»ç»Ÿ ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ã€‚ åç¨‹ä¸æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç®¡ç†ï¼Œè€Œæ˜¯å®Œå…¨ç”±ç”¨æˆ·ç¨‹åºæ‰€æ§åˆ¶ï¼Œè¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œä¸ä¼šåƒçº¿ç¨‹åˆ‡æ¢é‚£æ ·æ¶ˆè€—èµ„æºã€‚ åç¨‹å¯ä»¥ç†è§£ä¸ºå¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°ã€‚å®ƒæ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚åç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›æ¥çš„æ—¶å€™ï¼Œæ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆï¼Œç›´æ¥æ“ä½œ...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/Computer-Science-Learn-Notes/assets/style-1866b779.css" as="style"><link rel="stylesheet" href="/Computer-Science-Learn-Notes/assets/style-1866b779.css">
    <link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/app-66c72b60.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/framework-afce0fe7.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/system.html-7b8bb171.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/system.html-fdd3c39f.js"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-27ae749c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/slides.html-0f261d40.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/datastruct.html-814f91bc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/learnInProblem.html-e2624bd5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-0c8d2f60.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/disable.html-ff8b473a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/encrypt.html-9fbca9c6.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/markdown.html-55bc9907.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/page.html-0e7ead7d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/personal_tech.html-3bc8c638.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/rent_house.html-23504880.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/basic.html-2311c034.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/concurrent.html-ada5aaea.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/concurrency.html-e7bc6f0b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/datastruct.html-881ce9de.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/distribution.html-d27d659c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/foundation.html-bf4e15fb.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/giant.html-42c6a59e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/intelligenceQuestion.html-bd2292b3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/intro.html-fffd0865.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/messageQueue.html-278edcbd.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/mysql.html-f5b0f716.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/netty.html-c94bbb94.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/network.html-05853173.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/redis.html-34355bf8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/spring.html-5502b472.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/think.html-7aaeaa58.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/virtualMachine.html-3e875324.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/Mybatis.html-49e400d9.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/Spring.html-e43fb86b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringBoot.html-6059d383.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringCloud.html-76a4f205.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringDataJpa.html-7952c7e4.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringMVC.html-9cedf7ca.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringSecurity.html-477b5769.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/kotlin.html-434e1c2b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/leetcode.html-6e6af564.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/react.html-e22168ca.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/typescript.html-73dbe6d5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/vue.html-b29ea4f2.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/1.ç®€ä»‹.html-1e536036.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10.å¯¹è±¡çš„å®ä¾‹åŒ–å†…å­˜å¸ƒå±€ä¸è®¿é—®å®šä½.html-733d51ee.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/11.ç›´æ¥å†…å­˜.html-cd6f6114.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/12.æ‰§è¡Œå¼•æ“.html-24baab50.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/13.StringTable.html-1bd92712.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/14.åƒåœ¾å›æ”¶æ¦‚è¿°.html-effe5d94.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/15.åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•.html-b029208d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/16.åƒåœ¾å›æ”¶ç›¸å…³æ¦‚å¿µ.html-9a13bda3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/17-åƒåœ¾å›æ”¶å™¨.html-a8ddf178.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/2.ç±»åŠ è½½å­ç³»ç»Ÿ.html-345d10bb.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/3.è¿è¡Œæ—¶æ•°æ®åŒº.html-157299af.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/4.ç¨‹åºè®¡æ•°å™¨ï¼ˆPCå¯„å­˜å™¨ï¼‰.html-5efab972.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/5.è™šæ‹Ÿæœºæ ˆ.html-83dc9801.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/6.æœ¬åœ°æ–¹æ³•æ¥å£.html-effcee7e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/7.æœ¬åœ°æ–¹æ³•æ ˆ.html-aa08dac1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/8.å †.html-2be9fba4.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/9.æ–¹æ³•åŒº.html-9a92dbe7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/03-æ•°ç»„ä¸­é‡å¤çš„æ•°å­—.html-4aecb229.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/04-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾.html-33c8a326.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/05-æ›¿æ¢ç©ºæ ¼.html-731ec847.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/09-ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—.html-64aa068b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10-I.æ–æ³¢é‚£å¥‘æ•°åˆ—.html-21f0bbc7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10-IIé’è›™è·³å°é˜¶é—®é¢˜.html-5936af63.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/11-æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—.html-8ecdda63.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/12-çŸ©é˜µä¸­çš„è·¯å¾„.html-9b2fd662.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/13-æœºå™¨äººçš„è¿åŠ¨èŒƒå›´.html-32d9b38a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/14-å‰ªç»³å­.html-e21a6ec0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/15-äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°.html-97ba661d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/16-æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹.html-e2b3eebc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/17-æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°.html-0f115655.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/18-åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹.html-a1ceedab.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/22-é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹.html-459571cf.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/24-åè½¬é“¾è¡¨.html-92de2c0d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/25-åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨.html-56752d60.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/26-æ ‘çš„å­ç»“æ„.html-1319ff49.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/27-äºŒå‰æ ‘çš„é•œåƒ.html-d20c02c1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/28-å¯¹ç§°çš„äºŒå‰æ ‘.html-187d456e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/58-II å·¦æ—‹è½¬å­—ç¬¦ä¸².html-713e6be0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/å¸¸ç”¨æ–¹æ³•å°è£…åˆé›†.html-af0be8af.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/404.html-75fcb8ce.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-039ed2dc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-c13a7958.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-986cbfb0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-58c0e762.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-dc2c74b8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-a146e343.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-297716ff.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-f08ea5cf.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-cf1c7cba.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-4187abed.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-6de5662b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-90d0a7cf.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-c6c0348e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-50cf6287.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-9bd6aad5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-d4518628.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-2016f3b0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-ba00b820.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/slides.html-a991af2c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/datastruct.html-7308e003.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/learnInProblem.html-7f04200b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-c34e5275.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/disable.html-d972dbc6.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/encrypt.html-4170437a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/markdown.html-61862a67.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/page.html-67d96e22.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/personal_tech.html-5568dee3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/rent_house.html-1e0dd4dc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/basic.html-18911cb1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/concurrent.html-2c57d1b2.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/concurrency.html-afad628e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/datastruct.html-6bc5abf5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/distribution.html-37fe1b25.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/foundation.html-85a0e08b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/giant.html-3eed9986.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/intelligenceQuestion.html-482d99cd.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/intro.html-34111fe3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/messageQueue.html-f1cfd3be.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/mysql.html-4788adf8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/netty.html-58c97bb7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/network.html-264ac01e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/redis.html-3db37bdc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/spring.html-a9a42659.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/think.html-cb5d858e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/virtualMachine.html-c1769886.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/Mybatis.html-3af6d6d4.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/Spring.html-e163eccb.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringBoot.html-56483b76.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringCloud.html-03730661.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringDataJpa.html-41f35d61.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringMVC.html-83890e3a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringSecurity.html-62b13e45.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/kotlin.html-b2e2dd46.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/leetcode.html-f644d859.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/react.html-594c07f5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/typescript.html-7057d002.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/vue.html-bc78c79b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/1.ç®€ä»‹.html-50b9c060.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10.å¯¹è±¡çš„å®ä¾‹åŒ–å†…å­˜å¸ƒå±€ä¸è®¿é—®å®šä½.html-8c7802a5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/11.ç›´æ¥å†…å­˜.html-d0d37dbd.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/12.æ‰§è¡Œå¼•æ“.html-e00ef777.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/13.StringTable.html-8bba02d8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/14.åƒåœ¾å›æ”¶æ¦‚è¿°.html-93107bc9.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/15.åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•.html-8b7d348d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/16.åƒåœ¾å›æ”¶ç›¸å…³æ¦‚å¿µ.html-3633af62.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/17-åƒåœ¾å›æ”¶å™¨.html-d2c56119.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/2.ç±»åŠ è½½å­ç³»ç»Ÿ.html-7d72d57f.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/3.è¿è¡Œæ—¶æ•°æ®åŒº.html-3d6a37b7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/4.ç¨‹åºè®¡æ•°å™¨ï¼ˆPCå¯„å­˜å™¨ï¼‰.html-95dde1b1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/5.è™šæ‹Ÿæœºæ ˆ.html-dc56806b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/6.æœ¬åœ°æ–¹æ³•æ¥å£.html-7fc16965.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/7.æœ¬åœ°æ–¹æ³•æ ˆ.html-6cad103e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/8.å †.html-f69bf86e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/9.æ–¹æ³•åŒº.html-ef3b6e04.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/03-æ•°ç»„ä¸­é‡å¤çš„æ•°å­—.html-567f5361.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/04-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾.html-6e6af06d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/05-æ›¿æ¢ç©ºæ ¼.html-202212eb.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/09-ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—.html-19d03253.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10-I.æ–æ³¢é‚£å¥‘æ•°åˆ—.html-b6e27af0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10-IIé’è›™è·³å°é˜¶é—®é¢˜.html-10ebe3d1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/11-æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—.html-f82a7837.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/12-çŸ©é˜µä¸­çš„è·¯å¾„.html-324f8453.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/13-æœºå™¨äººçš„è¿åŠ¨èŒƒå›´.html-dad3810f.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/14-å‰ªç»³å­.html-c23774d2.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/15-äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°.html-14fb859b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/16-æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹.html-64f6fe8a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/17-æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°.html-8531c65c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/18-åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹.html-3aeace11.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/22-é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹.html-2517eeed.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/24-åè½¬é“¾è¡¨.html-6a3f1b99.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/25-åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨.html-702f2779.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/26-æ ‘çš„å­ç»“æ„.html-4d99c9a3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/27-äºŒå‰æ ‘çš„é•œåƒ.html-85287fc8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/28-å¯¹ç§°çš„äºŒå‰æ ‘.html-3aeebb13.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/58-II å·¦æ—‹è½¬å­—ç¬¦ä¸².html-a6dd23e1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/å¸¸ç”¨æ–¹æ³•å°è£…åˆé›†.html-f4b05f8b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/404.html-982c42ec.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-7186d5f7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-eaa10b62.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-1fbfb2e6.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-1271cf68.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-96bcade0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-90e31230.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-a1738b34.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-81d7f46f.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-95691e99.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-a6d8def1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-040d812d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-44563782.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-e775c7d3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-fca388e5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-8663824d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-c6c6d33d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-b144c1dd.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/waline-meta-a31b78ed.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/component-0be4b3d2.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/mermaid.core-73a383b6.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/VuePlayground-f22e6317.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/photoswipe.esm-36cd6c3c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index-70769223.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SearchResult-7cf681a0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/Computer-Science-Learn-Notes/" class="brand"><img class="logo" src="/Computer-Science-Learn-Notes/logo.svg" alt><!----><!----></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/Computer-Science-Learn-Notes/" class="nav-link" aria-label="ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Computer-Science-Learn-Notes/intro/" class="nav-link" aria-label="å¯¼è¯»"><span class="font-icon icon iconfont icon-discover" style=""></span>å¯¼è¯»<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/issues" rel="noopener noreferrer" target="_blank" aria-label="é—®é¢˜åé¦ˆ" class="nav-link"><span class="font-icon icon iconfont icon-note" style=""></span>é—®é¢˜åé¦ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">æœç´¢</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-vscode" style=""></span><span class="title">å‰ç«¯</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-timer" style=""></span><span class="title">Golang</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-build" style=""></span><span class="title">è®¡ç®—æœºåŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">JavaåŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-branch" style=""></span><span class="title">Javaå¹¶å‘</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-profile" style=""></span><span class="title">Javaé¢è¯•</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/foundation.html" class="nav-link sidebar-link sidebar-page" aria-label="JavaåŸºç¡€"><!---->JavaåŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/intro.html" class="nav-link sidebar-link sidebar-page" aria-label="å‰è¨€"><!---->å‰è¨€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/concurrency.html" class="nav-link sidebar-link sidebar-page" aria-label="Javaå¹¶å‘"><!---->Javaå¹¶å‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/virtualMachine.html" class="nav-link sidebar-link sidebar-page" aria-label="JVM"><!---->JVM<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/spring.html" class="nav-link sidebar-link sidebar-page" aria-label="Springç³»åˆ—"><!---->Springç³»åˆ—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/mysql.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQL"><!---->MySQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/redis.html" class="nav-link sidebar-link sidebar-page" aria-label="redis"><!---->redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html" class="nav-link sidebar-link sidebar-page" aria-label="åˆ†å¸ƒå¼"><!---->åˆ†å¸ƒå¼<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/messageQueue.html" class="nav-link sidebar-link sidebar-page" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><!---->æ¶ˆæ¯é˜Ÿåˆ—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/netty.html" class="nav-link sidebar-link sidebar-page" aria-label="Netty"><!---->Netty<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/network.html" class="nav-link sidebar-link sidebar-page" aria-label="è®¡ç®—æœºç½‘ç»œ"><!---->è®¡ç®—æœºç½‘ç»œ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="æ“ä½œç³»ç»Ÿ"><!---->æ“ä½œç³»ç»Ÿ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#ğŸ’»æ“ä½œç³»ç»Ÿ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ğŸ’»æ“ä½œç³»ç»Ÿ"><!---->ğŸ’»æ“ä½œç³»ç»Ÿ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#ä»€ä¹ˆæ˜¯åç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ"><!---->ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"><!---->è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€?"><!---->è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼"><!---->è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼"><!---->çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•"><!---->è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#ä»€ä¹ˆæ˜¯æ­»é”" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»€ä¹ˆæ˜¯æ­»é”"><!---->ä»€ä¹ˆæ˜¯æ­»é”<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#æ­»é”çš„å››ä¸ªæ¡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­»é”çš„å››ä¸ªæ¡ä»¶"><!---->æ­»é”çš„å››ä¸ªæ¡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#é›¶æ‹·è´æ·±å…¥æµ…å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="â­é›¶æ‹·è´æ·±å…¥æµ…å‡º"><!---->â­é›¶æ‹·è´æ·±å…¥æµ…å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹"><!---->åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#ğŸ’«i-o-å¤šè·¯å¤ç”¨-select-poll-epoll" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ğŸ’«I/O å¤šè·¯å¤ç”¨ï¼šselect/poll/epoll"><!---->ğŸ’«I/O å¤šè·¯å¤ç”¨ï¼šselect/poll/epoll<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/datastruct.html" class="nav-link sidebar-link sidebar-page" aria-label="æ•°æ®ç»“æ„"><!---->æ•°æ®ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/intelligenceQuestion.html" class="nav-link sidebar-link sidebar-page" aria-label="æ™ºåŠ›é¢˜"><!---->æ™ºåŠ›é¢˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/giant.html" class="nav-link sidebar-link sidebar-page" aria-label="2022å¤§å‚å…«è‚¡æ–‡"><!---->2022å¤§å‚å…«è‚¡æ–‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/think.html" class="nav-link sidebar-link sidebar-page" aria-label="åŸºäºé¢è¯•é¢˜çš„ä¸€äº›æ€è€ƒ"><!---->åŸºäºé¢è¯•é¢˜çš„ä¸€äº›æ€è€ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-leaf" style=""></span><span class="title">Javaæ¡†æ¶</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-async" style=""></span><span class="title">Javaè™šæ‹Ÿæœº</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-launch" style=""></span><span class="title">Kotlinç»“åˆSpring</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-object" style=""></span><span class="title">LeetCodeåˆ·é¢˜é¡ºåº</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-repair" style=""></span><span class="title">ç»éªŒæ€»ç»“</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->æ“ä½œç³»ç»Ÿ</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">zhiyu1998</span></span><span property="author" content="zhiyu1998"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-04-04T15:12:04.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span class="waline-pageview-count" id="ArtalkPV" data-path="/Computer-Science-Learn-Notes/Java/eightpart/system.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 44 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT44M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#ğŸ’»æ“ä½œç³»ç»Ÿ" class="router-link-active router-link-exact-active toc-link level2">ğŸ’»æ“ä½œç³»ç»Ÿ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#ä»€ä¹ˆæ˜¯åç¨‹" class="router-link-active router-link-exact-active toc-link level3">ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" class="router-link-active router-link-exact-active toc-link level3">è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€" class="router-link-active router-link-exact-active toc-link level3">è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•" class="router-link-active router-link-exact-active toc-link level3">è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#ä»€ä¹ˆæ˜¯æ­»é”" class="router-link-active router-link-exact-active toc-link level3">ä»€ä¹ˆæ˜¯æ­»é”</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#æ­»é”çš„å››ä¸ªæ¡ä»¶" class="router-link-active router-link-exact-active toc-link level3">æ­»é”çš„å››ä¸ªæ¡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#é›¶æ‹·è´æ·±å…¥æµ…å‡º" class="router-link-active router-link-exact-active toc-link level3">â­é›¶æ‹·è´æ·±å…¥æµ…å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹" class="router-link-active router-link-exact-active toc-link level3">åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/system.html#ğŸ’«i-o-å¤šè·¯å¤ç”¨-select-poll-epoll" class="router-link-active router-link-exact-active toc-link level3">ğŸ’«I/O å¤šè·¯å¤ç”¨ï¼šselect/poll/epoll</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="ğŸ’»æ“ä½œç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#ğŸ’»æ“ä½œç³»ç»Ÿ" aria-hidden="true">#</a> ğŸ’»æ“ä½œç³»ç»Ÿ</h2><h3 id="ä»€ä¹ˆæ˜¯åç¨‹" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯åç¨‹" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ</h3><p>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ã€‚</p><p>åç¨‹ä¸æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç®¡ç†ï¼Œè€Œæ˜¯å®Œå…¨ç”±ç”¨æˆ·ç¨‹åºæ‰€æ§åˆ¶ï¼Œè¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œä¸ä¼šåƒçº¿ç¨‹åˆ‡æ¢é‚£æ ·æ¶ˆè€—èµ„æºã€‚</p><p>åç¨‹å¯ä»¥ç†è§£ä¸ºå¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°ã€‚å®ƒæ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚åç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›æ¥çš„æ—¶å€™ï¼Œæ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆï¼Œç›´æ¥æ“ä½œæ ˆåˆ™åŸºæœ¬æ²¡æœ‰å†…æ ¸åˆ‡æ¢çš„å¼€é”€ï¼Œå¯ä»¥ä¸åŠ é”çš„è®¿é—®å…¨å±€å˜é‡ï¼Œæ‰€ä»¥ä¸Šä¸‹æ–‡çš„åˆ‡æ¢éå¸¸å¿«ã€‚</p><h3 id="è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" aria-hidden="true">#</a> è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</h3><p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong>: å¥½çš„ï¼æˆ‘æ˜ç™½äº†ï¼é‚£ä½ å†è¯´ä¸€ä¸‹ï¼š <strong>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</strong>ã€‚</p><p>ğŸ™‹ <strong>æˆ‘ï¼š</strong> å¥½çš„ï¼ ä¸‹å›¾æ˜¯ Java å†…å­˜åŒºåŸŸï¼Œæˆ‘ä»¬ä» JVM çš„è§’åº¦æ¥è¯´ä¸€ä¸‹çº¿ç¨‹å’Œè¿›ç¨‹ä¹‹é—´çš„å…³ç³»å§ï¼</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220404173153591-d4c5ab0c.png" alt="image-20220626201137158" tabindex="0" loading="lazy"><figcaption>image-20220626201137158</figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼šä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„<strong>å †</strong>å’Œ**æ–¹æ³•åŒº (JDK1.8 ä¹‹åçš„å…ƒç©ºé—´)*<em>èµ„æºï¼Œä½†æ˜¯æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„*<em>ç¨‹åºè®¡æ•°å™¨</em></em>ã€<strong>è™šæ‹Ÿæœºæ ˆ</strong> å’Œ <strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong>ã€‚</p><p><strong>æ€»ç»“ï¼š</strong> çº¿ç¨‹æ˜¯è¿›ç¨‹åˆ’åˆ†æˆçš„æ›´å°çš„è¿è¡Œå•ä½,ä¸€ä¸ªè¿›ç¨‹åœ¨å…¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥äº§ç”Ÿå¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹å’Œè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äºåŸºæœ¬ä¸Šå„è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œå„çº¿ç¨‹åˆ™ä¸ä¸€å®šï¼Œå› ä¸ºåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹ææœ‰å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚çº¿ç¨‹æ‰§è¡Œå¼€é”€å°ï¼Œä½†ä¸åˆ©äºèµ„æºçš„ç®¡ç†å’Œä¿æŠ¤ï¼›è€Œè¿›ç¨‹æ­£ç›¸åã€‚</p><h3 id="è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€" aria-hidden="true">#</a> è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€?</h3><p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong> ï¼š é‚£ä½ å†è¯´è¯´<strong>è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€?</strong></p><p>ğŸ™‹ <strong>æˆ‘</strong> ï¼šæˆ‘ä»¬ä¸€èˆ¬æŠŠè¿›ç¨‹å¤§è‡´åˆ†ä¸º 5 ç§çŠ¶æ€ï¼Œè¿™ä¸€ç‚¹å’Œçº¿ç¨‹å¾ˆåƒï¼</p><ul><li><strong>åˆ›å»ºçŠ¶æ€(new)</strong> ï¼šè¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºï¼Œå°šæœªåˆ°å°±ç»ªçŠ¶æ€ã€‚</li><li><strong>å°±ç»ªçŠ¶æ€(ready)</strong> ï¼šè¿›ç¨‹å·²å¤„äºå‡†å¤‡è¿è¡ŒçŠ¶æ€ï¼Œå³è¿›ç¨‹è·å¾—äº†é™¤äº†å¤„ç†å™¨ä¹‹å¤–çš„ä¸€åˆ‡æ‰€éœ€èµ„æºï¼Œä¸€æ—¦å¾—åˆ°å¤„ç†å™¨èµ„æº(å¤„ç†å™¨åˆ†é…çš„æ—¶é—´ç‰‡)å³å¯è¿è¡Œã€‚</li><li><strong>è¿è¡ŒçŠ¶æ€(running)</strong> ï¼šè¿›ç¨‹æ­£åœ¨å¤„ç†å™¨ä¸Šä¸Šè¿è¡Œ(å•æ ¸ CPU ä¸‹ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€)ã€‚</li><li><strong>é˜»å¡çŠ¶æ€(waiting)</strong> ï¼šåˆç§°ä¸ºç­‰å¾…çŠ¶æ€ï¼Œè¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸€äº‹ä»¶è€Œæš‚åœè¿è¡Œå¦‚ç­‰å¾…æŸèµ„æºä¸ºå¯ç”¨æˆ–ç­‰å¾… IO æ“ä½œå®Œæˆã€‚å³ä½¿å¤„ç†å™¨ç©ºé—²ï¼Œè¯¥è¿›ç¨‹ä¹Ÿä¸èƒ½è¿è¡Œã€‚</li><li><strong>ç»“æŸçŠ¶æ€(terminated)</strong> ï¼šè¿›ç¨‹æ­£åœ¨ä»ç³»ç»Ÿä¸­æ¶ˆå¤±ã€‚å¯èƒ½æ˜¯è¿›ç¨‹æ­£å¸¸ç»“æŸæˆ–å…¶ä»–åŸå› ä¸­æ–­é€€å‡ºè¿è¡Œã€‚</li></ul><h3 id="è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼" aria-hidden="true">#</a> è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼</h3><p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong> ï¼š<strong>è¿›ç¨‹é—´çš„é€šä¿¡å¸¸è§çš„çš„æœ‰å“ªå‡ ç§æ–¹å¼å‘¢?</strong></p><p>ğŸ™‹ <strong>æˆ‘</strong> ï¼šå¤§æ¦‚æœ‰ 7 ç§å¸¸è§çš„è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼ã€‚</p><blockquote><p>ä¸‹é¢è¿™éƒ¨åˆ†æ€»ç»“å‚è€ƒäº†:<a href="https://www.jianshu.com/p/c1015f5ffa74" target="_blank" rel="noopener noreferrer">ã€Šè¿›ç¨‹é—´é€šä¿¡ IPC (InterProcess Communication)ã€‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>è¿™ç¯‡æ–‡ç« ï¼Œæ¨èé˜…è¯»ï¼Œæ€»ç»“çš„éå¸¸ä¸é”™ã€‚</p></blockquote><ol><li><strong>ç®¡é“/åŒ¿åç®¡é“(Pipes)</strong> ï¼šç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„çˆ¶å­è¿›ç¨‹é—´æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</li><li><strong>æœ‰åç®¡é“(Names Pipes)</strong> : åŒ¿åç®¡é“ç”±äºæ²¡æœ‰åå­—ï¼Œåªèƒ½ç”¨äºäº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œæå‡ºäº†æœ‰åç®¡é“ã€‚æœ‰åç®¡é“ä¸¥æ ¼éµå¾ª<strong>å…ˆè¿›å…ˆå‡º(first in first out)</strong>ã€‚æœ‰åç®¡é“ä»¥ç£ç›˜æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨ï¼Œå¯ä»¥å®ç°æœ¬æœºä»»æ„ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ã€‚</li><li><strong>ä¿¡å·(Signal)</strong> ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿï¼›</li><li><strong>æ¶ˆæ¯é˜Ÿåˆ—(Message Queuing)</strong> ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨,å…·æœ‰ç‰¹å®šçš„æ ¼å¼,å­˜æ”¾åœ¨å†…å­˜ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚ç®¡é“å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„é€šä¿¡æ•°æ®éƒ½æ˜¯å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚ä¸ç®¡é“ï¼ˆæ— åç®¡é“ï¼šåªå­˜åœ¨äºå†…å­˜ä¸­çš„æ–‡ä»¶ï¼›å‘½åç®¡é“ï¼šå­˜åœ¨äºå®é™…çš„ç£ç›˜ä»‹è´¨æˆ–è€…æ–‡ä»¶ç³»ç»Ÿï¼‰ä¸åŒçš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—å­˜æ”¾åœ¨å†…æ ¸ä¸­ï¼Œåªæœ‰åœ¨å†…æ ¸é‡å¯(å³ï¼Œæ“ä½œç³»ç»Ÿé‡å¯)æˆ–è€…æ˜¾å¼åœ°åˆ é™¤ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œè¯¥æ¶ˆæ¯é˜Ÿåˆ—æ‰ä¼šè¢«çœŸæ­£çš„åˆ é™¤ã€‚æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å®ç°æ¶ˆæ¯çš„éšæœºæŸ¥è¯¢,æ¶ˆæ¯ä¸ä¸€å®šè¦ä»¥å…ˆè¿›å…ˆå‡ºçš„æ¬¡åºè¯»å–,ä¹Ÿå¯ä»¥æŒ‰æ¶ˆæ¯çš„ç±»å‹è¯»å–.æ¯” FIFO æ›´æœ‰ä¼˜åŠ¿ã€‚<strong>æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­— èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹ã€‚</strong></li><li><strong>ä¿¡å·é‡(Semaphores)</strong> ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºå¤šè¿›ç¨‹å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼Œä¿¡å·é‡çš„æ„å›¾åœ¨äºè¿›ç¨‹é—´åŒæ­¥ã€‚è¿™ç§é€šä¿¡æ–¹å¼ä¸»è¦ç”¨äºè§£å†³ä¸åŒæ­¥ç›¸å…³çš„é—®é¢˜å¹¶é¿å…ç«äº‰æ¡ä»¶ã€‚</li><li><strong>å…±äº«å†…å­˜(Shared memory)</strong> ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹å¯ä»¥åŠæ—¶çœ‹åˆ°å¯¹æ–¹è¿›ç¨‹ä¸­å¯¹å…±äº«å†…å­˜ä¸­æ•°æ®çš„æ›´æ–°ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¾é æŸç§åŒæ­¥æ“ä½œï¼Œå¦‚äº’æ–¥é”å’Œä¿¡å·é‡ç­‰ã€‚å¯ä»¥è¯´è¿™æ˜¯æœ€æœ‰ç”¨çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ã€‚</li><li><strong>å¥—æ¥å­—(Sockets)</strong> : æ­¤æ–¹æ³•ä¸»è¦ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚å¥—æ¥å­—æ˜¯æ”¯æŒ TCP/IP çš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸åŒä¸»æœºä¹‹é—´çš„è¿›ç¨‹è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹ï¼Œç®€å•çš„è¯´å°±æ˜¯é€šä¿¡çš„ä¸¤æ–¹çš„ä¸€ç§çº¦å®šï¼Œç”¨å¥—æ¥å­—ä¸­çš„ç›¸å…³å‡½æ•°æ¥å®Œæˆé€šä¿¡è¿‡ç¨‹ã€‚</li></ol><h3 id="çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼" aria-hidden="true">#</a> çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼</h3><p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong> ï¼š<strong>é‚£çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼æœ‰å“ªäº›å‘¢?</strong></p><p>ğŸ™‹ <strong>æˆ‘</strong> ï¼šçº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚æ“ä½œç³»ç»Ÿä¸€èˆ¬æœ‰ä¸‹é¢ä¸‰ç§çº¿ç¨‹åŒæ­¥çš„æ–¹å¼ï¼š</p><ol><li><strong>äº’æ–¥é‡(Mutex)</strong>ï¼šé‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ï¼Œåªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ã€‚å› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯å…¬å…±èµ„æºä¸ä¼šè¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ã€‚æ¯”å¦‚ Java ä¸­çš„ synchronized å…³é”®è¯å’Œå„ç§ Lock éƒ½æ˜¯è¿™ç§æœºåˆ¶ã€‚</li><li><strong>ä¿¡å·é‡(Semaphore)</strong> ï¼šå®ƒå…è®¸åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦æ§åˆ¶åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ã€‚</li><li><strong>äº‹ä»¶(Event)</strong> :Wait/Notifyï¼šé€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒå¤šçº¿ç¨‹åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿çš„å®ç°å¤šçº¿ç¨‹ä¼˜å…ˆçº§çš„æ¯”è¾ƒæ“ä½œ</li></ol><h3 id="è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•" aria-hidden="true">#</a> è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•</h3><p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong> ï¼š<strong>ä½ çŸ¥é“æ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•æœ‰å“ªäº›å—?</strong></p><p>ğŸ™‹ <strong>æˆ‘</strong> ï¼šå—¯å—¯ï¼è¿™ä¸ªæˆ‘ä»¬å¤§å­¦çš„æ—¶å€™å­¦è¿‡ï¼Œæ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„çŸ¥è¯†ç‚¹ï¼</p><p>ä¸ºäº†ç¡®å®šé¦–å…ˆæ‰§è¡Œå“ªä¸ªè¿›ç¨‹ä»¥åŠæœ€åæ‰§è¡Œå“ªä¸ªè¿›ç¨‹ä»¥å®ç°æœ€å¤§ CPU åˆ©ç”¨ç‡ï¼Œè®¡ç®—æœºç§‘å­¦å®¶å·²ç»å®šä¹‰äº†ä¸€äº›ç®—æ³•ï¼Œå®ƒä»¬æ˜¯ï¼š</p><ul><li><strong>å…ˆåˆ°å…ˆæœåŠ¡(FCFS)è°ƒåº¦ç®—æ³•</strong> : ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªæœ€å…ˆè¿›å…¥è¯¥é˜Ÿåˆ—çš„è¿›ç¨‹ä¸ºä¹‹åˆ†é…èµ„æºï¼Œä½¿å®ƒç«‹å³æ‰§è¡Œå¹¶ä¸€ç›´æ‰§è¡Œåˆ°å®Œæˆæˆ–å‘ç”ŸæŸäº‹ä»¶è€Œè¢«é˜»å¡æ”¾å¼ƒå ç”¨ CPU æ—¶å†é‡æ–°è°ƒåº¦ã€‚</li><li><strong>çŸ­ä½œä¸šä¼˜å…ˆ(SJF)çš„è°ƒåº¦ç®—æ³•</strong> : ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ä¸ºä¹‹åˆ†é…èµ„æºï¼Œä½¿å®ƒç«‹å³æ‰§è¡Œå¹¶ä¸€ç›´æ‰§è¡Œåˆ°å®Œæˆæˆ–å‘ç”ŸæŸäº‹ä»¶è€Œè¢«é˜»å¡æ”¾å¼ƒå ç”¨ CPU æ—¶å†é‡æ–°è°ƒåº¦ã€‚</li><li><strong>æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•</strong> : æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦æ˜¯ä¸€ç§æœ€å¤è€ï¼Œæœ€ç®€å•ï¼Œæœ€å…¬å¹³ä¸”ä½¿ç”¨æœ€å¹¿çš„ç®—æ³•ï¼Œåˆç§° RR(Round robin)è°ƒåº¦ã€‚æ¯ä¸ªè¿›ç¨‹è¢«åˆ†é…ä¸€ä¸ªæ—¶é—´æ®µï¼Œç§°ä½œå®ƒçš„æ—¶é—´ç‰‡ï¼Œå³è¯¥è¿›ç¨‹å…è®¸è¿è¡Œçš„æ—¶é—´ã€‚</li><li><strong>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•</strong> ï¼šå‰é¢ä»‹ç»çš„å‡ ç§è¿›ç¨‹è°ƒåº¦çš„ç®—æ³•éƒ½æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚å¦‚<strong>çŸ­è¿›ç¨‹ä¼˜å…ˆçš„è°ƒåº¦ç®—æ³•ï¼Œä»…ç…§é¡¾äº†çŸ­è¿›ç¨‹è€Œå¿½ç•¥äº†é•¿è¿›ç¨‹</strong> ã€‚å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•æ—¢èƒ½ä½¿é«˜ä¼˜å…ˆçº§çš„ä½œä¸šå¾—åˆ°å“åº”åˆèƒ½ä½¿çŸ­ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰è¿…é€Ÿå®Œæˆã€‚ï¼Œå› è€Œå®ƒæ˜¯ç›®å‰<strong>è¢«å…¬è®¤çš„ä¸€ç§è¾ƒå¥½çš„è¿›ç¨‹è°ƒåº¦ç®—æ³•</strong>ï¼ŒUNIX æ“ä½œç³»ç»Ÿé‡‡å–çš„ä¾¿æ˜¯è¿™ç§è°ƒåº¦ç®—æ³•ã€‚</li><li><strong>ä¼˜å…ˆçº§è°ƒåº¦</strong> ï¼š ä¸ºæ¯ä¸ªæµç¨‹åˆ†é…ä¼˜å…ˆçº§ï¼Œé¦–å…ˆæ‰§è¡Œå…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹ï¼Œä¾æ­¤ç±»æ¨ã€‚å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„è¿›ç¨‹ä»¥ FCFS æ–¹å¼æ‰§è¡Œã€‚å¯ä»¥æ ¹æ®å†…å­˜è¦æ±‚ï¼Œæ—¶é—´è¦æ±‚æˆ–ä»»ä½•å…¶ä»–èµ„æºè¦æ±‚æ¥ç¡®å®šä¼˜å…ˆçº§ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯æ­»é”" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯æ­»é”" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯æ­»é”</h3><p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong> ï¼š<strong>ä½ çŸ¥é“ä»€ä¹ˆæ˜¯æ­»é”å—?</strong></p><p>ğŸ™‹ <strong>æˆ‘</strong> ï¼šæ­»é”æè¿°çš„æ˜¯è¿™æ ·ä¸€ç§æƒ…å†µï¼šå¤šä¸ªè¿›ç¨‹/çº¿ç¨‹åŒæ—¶è¢«é˜»å¡ï¼Œå®ƒä»¬ä¸­çš„ä¸€ä¸ªæˆ–è€…å…¨éƒ¨éƒ½åœ¨ç­‰å¾…æŸä¸ªèµ„æºè¢«é‡Šæ”¾ã€‚ç”±äºè¿›ç¨‹/çº¿ç¨‹è¢«æ— é™æœŸåœ°é˜»å¡ï¼Œå› æ­¤ç¨‹åºä¸å¯èƒ½æ­£å¸¸ç»ˆæ­¢ã€‚</p><h3 id="æ­»é”çš„å››ä¸ªæ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ­»é”çš„å››ä¸ªæ¡ä»¶" aria-hidden="true">#</a> æ­»é”çš„å››ä¸ªæ¡ä»¶</h3><p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong> ï¼š<strong>äº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ?</strong></p><p>ğŸ™‹ <strong>æˆ‘</strong> ï¼šå¦‚æœç³»ç»Ÿä¸­ä»¥ä¸‹å››ä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼Œé‚£ä¹ˆå°±èƒ½å¼•èµ·æ­»é”ï¼š</p><ul><li><strong>äº’æ–¥</strong>ï¼šèµ„æºå¿…é¡»å¤„äºéå…±äº«æ¨¡å¼ï¼Œå³ä¸€æ¬¡åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœå¦ä¸€è¿›ç¨‹ç”³è¯·è¯¥èµ„æºï¼Œé‚£ä¹ˆå¿…é¡»ç­‰å¾…ç›´åˆ°è¯¥èµ„æºè¢«é‡Šæ”¾ä¸ºæ­¢ã€‚</li><li><strong>å æœ‰å¹¶ç­‰å¾…</strong>ï¼šä¸€ä¸ªè¿›ç¨‹è‡³å°‘åº”è¯¥å æœ‰ä¸€ä¸ªèµ„æºï¼Œå¹¶ç­‰å¾…å¦ä¸€èµ„æºï¼Œè€Œè¯¥èµ„æºè¢«å…¶ä»–è¿›ç¨‹æ‰€å æœ‰ã€‚</li><li><strong>éæŠ¢å </strong>ï¼šèµ„æºä¸èƒ½è¢«æŠ¢å ã€‚åªèƒ½åœ¨æŒæœ‰èµ„æºçš„è¿›ç¨‹å®Œæˆä»»åŠ¡åï¼Œè¯¥èµ„æºæ‰ä¼šè¢«é‡Šæ”¾ã€‚</li><li><strong>å¾ªç¯ç­‰å¾…</strong>ï¼šæœ‰ä¸€ç»„ç­‰å¾…è¿›ç¨‹ <code>{P0, P1,..., Pn}</code>ï¼Œ <code>P0</code> ç­‰å¾…çš„èµ„æºè¢« <code>P1</code> å æœ‰ï¼Œ<code>P1</code> ç­‰å¾…çš„èµ„æºè¢« <code>P2</code> å æœ‰ï¼Œ......ï¼Œ<code>Pn-1</code> ç­‰å¾…çš„èµ„æºè¢« <code>Pn</code> å æœ‰ï¼Œ<code>Pn</code> ç­‰å¾…çš„èµ„æºè¢« <code>P0</code> å æœ‰ã€‚</li></ul><h3 id="é›¶æ‹·è´æ·±å…¥æµ…å‡º" tabindex="-1"><a class="header-anchor" href="#é›¶æ‹·è´æ·±å…¥æµ…å‡º" aria-hidden="true">#</a> â­é›¶æ‹·è´æ·±å…¥æµ…å‡º</h3><h4 id="dma" tabindex="-1"><a class="header-anchor" href="#dma" aria-hidden="true">#</a> DMA</h4><p>åœ¨æ²¡æœ‰ DMA æŠ€æœ¯å‰ï¼ŒI/O çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>CPU å‘å‡ºå¯¹åº”çš„æŒ‡ä»¤ç»™ç£ç›˜æ§åˆ¶å™¨ï¼Œç„¶åè¿”å›ï¼›</li><li>ç£ç›˜æ§åˆ¶å™¨æ”¶åˆ°æŒ‡ä»¤åï¼Œäºæ˜¯å°±å¼€å§‹å‡†å¤‡æ•°æ®ï¼Œä¼šæŠŠæ•°æ®æ”¾å…¥åˆ°ç£ç›˜æ§åˆ¶å™¨çš„å†…éƒ¨ç¼“å†²åŒºä¸­ï¼Œç„¶åäº§ç”Ÿä¸€ä¸ª<strong>ä¸­æ–­</strong>ï¼›</li><li>CPU æ”¶åˆ°ä¸­æ–­ä¿¡å·åï¼Œåœä¸‹æ‰‹å¤´çš„å·¥ä½œï¼Œæ¥ç€æŠŠç£ç›˜æ§åˆ¶å™¨çš„ç¼“å†²åŒºçš„æ•°æ®ä¸€æ¬¡ä¸€ä¸ªå­—èŠ‚åœ°è¯»è¿›è‡ªå·±çš„å¯„å­˜å™¨ï¼Œç„¶åå†æŠŠå¯„å­˜å™¨é‡Œçš„æ•°æ®å†™å…¥åˆ°å†…å­˜ï¼Œè€Œåœ¨æ•°æ®ä¼ è¾“çš„æœŸé—´ CPU æ˜¯æ— æ³•æ‰§è¡Œå…¶ä»–ä»»åŠ¡çš„ã€‚</li></ul><p>ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œæˆ‘ç”»äº†ä¸€å‰¯å›¾ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220627104731025-6c3df5c6.png" alt="image-20220702132804386" tabindex="0" loading="lazy"><figcaption>image-20220702132804386</figcaption></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªæ•°æ®çš„ä¼ è¾“è¿‡ç¨‹ï¼Œéƒ½è¦éœ€è¦ CPU äº²è‡ªå‚ä¸æ¬è¿æ•°æ®çš„è¿‡ç¨‹ï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ï¼ŒCPU æ˜¯ä¸èƒ½åšå…¶ä»–äº‹æƒ…çš„ã€‚</p><p>ç®€å•çš„æ¬è¿å‡ ä¸ªå­—ç¬¦æ•°æ®é‚£æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ç”¨åƒå…†ç½‘å¡æˆ–è€…ç¡¬ç›˜ä¼ è¾“å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œéƒ½ç”¨ CPU æ¥æ¬è¿çš„è¯ï¼Œè‚¯å®šå¿™ä¸è¿‡æ¥ã€‚</p><p>è®¡ç®—æœºç§‘å­¦å®¶ä»¬å‘ç°äº†äº‹æƒ…çš„ä¸¥é‡æ€§åï¼Œäºæ˜¯å°±å‘æ˜äº† DMA æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯<strong>ç›´æ¥å†…å­˜è®¿é—®ï¼ˆ*Direct Memory Access*ï¼‰</strong> æŠ€æœ¯ã€‚</p><p>ä»€ä¹ˆæ˜¯ DMA æŠ€æœ¯ï¼Ÿç®€å•ç†è§£å°±æ˜¯ï¼Œ<strong>åœ¨è¿›è¡Œ I/O è®¾å¤‡å’Œå†…å­˜çš„æ•°æ®ä¼ è¾“çš„æ—¶å€™ï¼Œæ•°æ®æ¬è¿çš„å·¥ä½œå…¨éƒ¨äº¤ç»™ DMA æ§åˆ¶å™¨ï¼Œè€Œ CPU ä¸å†å‚ä¸ä»»ä½•ä¸æ•°æ®æ¬è¿ç›¸å…³çš„äº‹æƒ…ï¼Œè¿™æ · CPU å°±å¯ä»¥å»å¤„ç†åˆ«çš„äº‹åŠ¡</strong>ã€‚</p><p>é‚£ä½¿ç”¨ DMA æ§åˆ¶å™¨è¿›è¡Œæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220627104743508-8d639a80.png" alt="image-20220702132824828" tabindex="0" loading="lazy"><figcaption>image-20220702132824828</figcaption></figure><p>å…·ä½“è¿‡ç¨‹ï¼š</p><ul><li>ç”¨æˆ·è¿›ç¨‹è°ƒç”¨ read æ–¹æ³•ï¼Œå‘æ“ä½œç³»ç»Ÿå‘å‡º I/O è¯·æ±‚ï¼Œè¯·æ±‚è¯»å–æ•°æ®åˆ°è‡ªå·±çš„å†…å­˜ç¼“å†²åŒºä¸­ï¼Œè¿›ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼›</li><li>æ“ä½œç³»ç»Ÿæ”¶åˆ°è¯·æ±‚åï¼Œè¿›ä¸€æ­¥å°† I/O è¯·æ±‚å‘é€ DMAï¼Œç„¶åè®© CPU æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼›</li><li>DMA è¿›ä¸€æ­¥å°† I/O è¯·æ±‚å‘é€ç»™ç£ç›˜ï¼›</li><li>ç£ç›˜æ”¶åˆ° DMA çš„ I/O è¯·æ±‚ï¼ŒæŠŠæ•°æ®ä»ç£ç›˜è¯»å–åˆ°ç£ç›˜æ§åˆ¶å™¨çš„ç¼“å†²åŒºä¸­ï¼Œå½“ç£ç›˜æ§åˆ¶å™¨çš„ç¼“å†²åŒºè¢«è¯»æ»¡åï¼Œå‘ DMA å‘èµ·ä¸­æ–­ä¿¡å·ï¼Œå‘ŠçŸ¥è‡ªå·±ç¼“å†²åŒºå·²æ»¡ï¼›</li><li><strong>DMA æ”¶åˆ°ç£ç›˜çš„ä¿¡å·ï¼Œå°†ç£ç›˜æ§åˆ¶å™¨ç¼“å†²åŒºä¸­çš„æ•°æ®æ‹·è´åˆ°å†…æ ¸ç¼“å†²åŒºä¸­ï¼Œæ­¤æ—¶ä¸å ç”¨ CPUï¼ŒCPU å¯ä»¥æ‰§è¡Œå…¶ä»–ä»»åŠ¡</strong>ï¼›</li><li>å½“ DMA è¯»å–äº†è¶³å¤Ÿå¤šçš„æ•°æ®ï¼Œå°±ä¼šå‘é€ä¸­æ–­ä¿¡å·ç»™ CPUï¼›</li><li>CPU æ”¶åˆ° DMA çš„ä¿¡å·ï¼ŒçŸ¥é“æ•°æ®å·²ç»å‡†å¤‡å¥½ï¼Œäºæ˜¯å°†æ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼Œç³»ç»Ÿè°ƒç”¨è¿”å›ï¼›</li></ul><p>å¯ä»¥çœ‹åˆ°ï¼Œ æ•´ä¸ªæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ï¼ŒCPU ä¸å†å‚ä¸æ•°æ®æ¬è¿çš„å·¥ä½œï¼Œè€Œæ˜¯å…¨ç¨‹ç”± DMA å®Œæˆï¼Œä½†æ˜¯ CPU åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå› ä¸ºä¼ è¾“ä»€ä¹ˆæ•°æ®ï¼Œä»å“ªé‡Œä¼ è¾“åˆ°å“ªé‡Œï¼Œéƒ½éœ€è¦ CPU æ¥å‘Šè¯‰ DMA æ§åˆ¶å™¨ã€‚</p><p>æ—©æœŸ DMA åªå­˜åœ¨åœ¨ä¸»æ¿ä¸Šï¼Œå¦‚ä»Šç”±äº I/O è®¾å¤‡è¶Šæ¥è¶Šå¤šï¼Œæ•°æ®ä¼ è¾“çš„éœ€æ±‚ä¹Ÿä¸å°½ç›¸åŒï¼Œæ‰€ä»¥æ¯ä¸ª I/O è®¾å¤‡é‡Œé¢éƒ½æœ‰è‡ªå·±çš„ DMA æ§åˆ¶å™¨</p><h4 id="å¦‚ä½•å®ç°é›¶æ‹·è´" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®ç°é›¶æ‹·è´" aria-hidden="true">#</a> å¦‚ä½•å®ç°é›¶æ‹·è´ï¼Ÿ</h4><p>é›¶æ‹·è´æŠ€æœ¯å®ç°çš„æ–¹å¼é€šå¸¸æœ‰ 2 ç§ï¼š</p><ul><li>mmap + write</li><li>sendfile</li></ul><p>ä¸‹é¢å°±è°ˆä¸€è°ˆï¼Œå®ƒä»¬æ˜¯å¦‚ä½•å‡å°‘ã€Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€å’Œã€Œæ•°æ®æ‹·è´ã€çš„æ¬¡æ•°ã€‚</p><h4 id="mmap-write" tabindex="-1"><a class="header-anchor" href="#mmap-write" aria-hidden="true">#</a> mmap + write</h4><p>åœ¨å‰é¢æˆ‘ä»¬çŸ¥é“ï¼Œ<code>read()</code> ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹ä¸­ä¼šæŠŠå†…æ ¸ç¼“å†²åŒºçš„æ•°æ®æ‹·è´åˆ°ç”¨æˆ·çš„ç¼“å†²åŒºé‡Œï¼Œäºæ˜¯ä¸ºäº†å‡å°‘è¿™ä¸€æ­¥å¼€é”€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>mmap()</code> æ›¿æ¢ <code>read()</code> ç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>buf <span class="token operator">=</span> <span class="token function">mmap</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">write</span><span class="token punctuation">(</span>sockfd<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>mmap()</code> ç³»ç»Ÿè°ƒç”¨å‡½æ•°ä¼šç›´æ¥æŠŠå†…æ ¸ç¼“å†²åŒºé‡Œçš„æ•°æ®ã€Œ<strong>æ˜ å°„</strong>ã€åˆ°ç”¨æˆ·ç©ºé—´ï¼Œè¿™æ ·ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¸ç”¨æˆ·ç©ºé—´å°±ä¸éœ€è¦å†è¿›è¡Œä»»ä½•çš„æ•°æ®æ‹·è´æ“ä½œã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220702133239391-a19542a1.png" alt="image-20220702133239391" tabindex="0" loading="lazy"><figcaption>image-20220702133239391</figcaption></figure><p>å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>åº”ç”¨è¿›ç¨‹è°ƒç”¨äº† <code>mmap()</code> åï¼ŒDMA ä¼šæŠŠç£ç›˜çš„æ•°æ®æ‹·è´åˆ°å†…æ ¸çš„ç¼“å†²åŒºé‡Œã€‚æ¥ç€ï¼Œåº”ç”¨è¿›ç¨‹è·Ÿæ“ä½œç³»ç»Ÿå†…æ ¸ã€Œå…±äº«ã€è¿™ä¸ªç¼“å†²åŒºï¼›</li><li>åº”ç”¨è¿›ç¨‹å†è°ƒç”¨ <code>write()</code>ï¼Œæ“ä½œç³»ç»Ÿç›´æ¥å°†å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®æ‹·è´åˆ° socket ç¼“å†²åŒºä¸­ï¼Œè¿™ä¸€åˆ‡éƒ½å‘ç”Ÿåœ¨å†…æ ¸æ€ï¼Œç”± CPU æ¥æ¬è¿æ•°æ®ï¼›</li><li>æœ€åï¼ŒæŠŠå†…æ ¸çš„ socket ç¼“å†²åŒºé‡Œçš„æ•°æ®ï¼Œæ‹·è´åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ç”± DMA æ¬è¿çš„ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œé€šè¿‡ä½¿ç”¨ <code>mmap()</code> æ¥ä»£æ›¿ <code>read()</code>ï¼Œ å¯ä»¥å‡å°‘ä¸€æ¬¡æ•°æ®æ‹·è´çš„è¿‡ç¨‹ã€‚</p><p>ä½†è¿™è¿˜ä¸æ˜¯æœ€ç†æƒ³çš„é›¶æ‹·è´ï¼Œå› ä¸ºä»ç„¶éœ€è¦é€šè¿‡ CPU æŠŠå†…æ ¸ç¼“å†²åŒºçš„æ•°æ®æ‹·è´åˆ° socket ç¼“å†²åŒºé‡Œï¼Œè€Œä¸”ä»ç„¶éœ€è¦ 4 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå› ä¸ºç³»ç»Ÿè°ƒç”¨è¿˜æ˜¯ 2 æ¬¡ã€‚</p><h4 id="sendfile" tabindex="-1"><a class="header-anchor" href="#sendfile" aria-hidden="true">#</a> sendfile</h4><p>åœ¨ Linux å†…æ ¸ç‰ˆæœ¬ 2.1 ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªä¸“é—¨å‘é€æ–‡ä»¶çš„ç³»ç»Ÿè°ƒç”¨å‡½æ•° <code>sendfile()</code>ï¼Œå‡½æ•°å½¢å¼å¦‚ä¸‹ï¼š</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/socket.h&gt;</span></span>
<span class="token class-name">ssize_t</span> <span class="token function">sendfile</span><span class="token punctuation">(</span><span class="token keyword">int</span> out_fd<span class="token punctuation">,</span> <span class="token keyword">int</span> in_fd<span class="token punctuation">,</span> <span class="token class-name">off_t</span> <span class="token operator">*</span>offset<span class="token punctuation">,</span> <span class="token class-name">size_t</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ƒçš„å‰ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç›®çš„ç«¯å’Œæºç«¯çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œåé¢ä¸¤ä¸ªå‚æ•°æ˜¯æºç«¯çš„åç§»é‡å’Œå¤åˆ¶æ•°æ®çš„é•¿åº¦ï¼Œè¿”å›å€¼æ˜¯å®é™…å¤åˆ¶æ•°æ®çš„é•¿åº¦ã€‚</p><p>é¦–å…ˆï¼Œå®ƒå¯ä»¥æ›¿ä»£å‰é¢çš„ <code>read()</code> å’Œ <code>write()</code> è¿™ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨ï¼Œä¹Ÿå°±å‡å°‘äº† 2 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚</p><p>å…¶æ¬¡ï¼Œè¯¥ç³»ç»Ÿè°ƒç”¨ï¼Œå¯ä»¥ç›´æ¥æŠŠå†…æ ¸ç¼“å†²åŒºé‡Œçš„æ•°æ®æ‹·è´åˆ° socket ç¼“å†²åŒºé‡Œï¼Œä¸å†æ‹·è´åˆ°ç”¨æˆ·æ€ï¼Œè¿™æ ·å°±åªæœ‰ 2 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå’Œ 3 æ¬¡æ•°æ®æ‹·è´ã€‚å¦‚ä¸‹å›¾ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220702133308560-b3110c13.png" alt="image-20220702133308560" tabindex="0" loading="lazy"><figcaption>image-20220702133308560</figcaption></figure><p>ä½†æ˜¯è¿™è¿˜ä¸æ˜¯çœŸæ­£çš„é›¶æ‹·è´æŠ€æœ¯ï¼Œå¦‚æœç½‘å¡æ”¯æŒ SG-DMAï¼ˆ<em>The Scatter-Gather Direct Memory Access</em>ï¼‰æŠ€æœ¯ï¼ˆå’Œæ™®é€šçš„ DMA æœ‰æ‰€ä¸åŒï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å‡å°‘é€šè¿‡ CPU æŠŠå†…æ ¸ç¼“å†²åŒºé‡Œçš„æ•°æ®æ‹·è´åˆ° socket ç¼“å†²åŒºçš„è¿‡ç¨‹ã€‚</p><p>ä½ å¯ä»¥åœ¨ä½ çš„ Linux ç³»ç»Ÿé€šè¿‡ä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼ŒæŸ¥çœ‹ç½‘å¡æ˜¯å¦æ”¯æŒ scatter-gather ç‰¹æ€§ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">ethtool</span> <span class="token parameter variable">-k</span> eth0 <span class="token operator">|</span> <span class="token function">grep</span> scatter-gather
scatter-gather: on
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>äºæ˜¯ï¼Œä» Linux å†…æ ¸ <code>2.4</code> ç‰ˆæœ¬å¼€å§‹èµ·ï¼Œå¯¹äºæ”¯æŒç½‘å¡æ”¯æŒ SG-DMA æŠ€æœ¯çš„æƒ…å†µä¸‹ï¼Œ <code>sendfile()</code> ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹å‘ç”Ÿäº†ç‚¹å˜åŒ–ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡ DMA å°†ç£ç›˜ä¸Šçš„æ•°æ®æ‹·è´åˆ°å†…æ ¸ç¼“å†²åŒºé‡Œï¼›</li><li>ç¬¬äºŒæ­¥ï¼Œç¼“å†²åŒºæè¿°ç¬¦å’Œæ•°æ®é•¿åº¦ä¼ åˆ° socket ç¼“å†²åŒºï¼Œè¿™æ ·ç½‘å¡çš„ SG-DMA æ§åˆ¶å™¨å°±å¯ä»¥ç›´æ¥å°†å†…æ ¸ç¼“å­˜ä¸­çš„æ•°æ®æ‹·è´åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œï¼Œæ­¤è¿‡ç¨‹ä¸éœ€è¦å°†æ•°æ®ä»æ“ä½œç³»ç»Ÿå†…æ ¸ç¼“å†²åŒºæ‹·è´åˆ° socket ç¼“å†²åŒºä¸­ï¼Œè¿™æ ·å°±å‡å°‘äº†ä¸€æ¬¡æ•°æ®æ‹·è´ï¼›</li></ul><p>æ‰€ä»¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹‹ä¸­ï¼Œåªè¿›è¡Œäº† 2 æ¬¡æ•°æ®æ‹·è´ï¼Œå¦‚ä¸‹å›¾ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220702133318801-84e28b99.png" alt="image-20220702133318801" tabindex="0" loading="lazy"><figcaption>image-20220702133318801</figcaption></figure><p>è¿™å°±æ˜¯æ‰€è°“çš„<strong>é›¶æ‹·è´ï¼ˆ*Zero-copy*ï¼‰æŠ€æœ¯ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨å†…å­˜å±‚é¢å»æ‹·è´æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´å…¨ç¨‹æ²¡æœ‰é€šè¿‡ CPU æ¥æ¬è¿æ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é€šè¿‡ DMA æ¥è¿›è¡Œä¼ è¾“çš„ã€‚</strong>ã€‚</p><p>é›¶æ‹·è´æŠ€æœ¯çš„æ–‡ä»¶ä¼ è¾“æ–¹å¼ç›¸æ¯”ä¼ ç»Ÿæ–‡ä»¶ä¼ è¾“çš„æ–¹å¼ï¼Œå‡å°‘äº† 2 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´æ¬¡æ•°ï¼Œ<strong>åªéœ€è¦ 2 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´æ¬¡æ•°ï¼Œå°±å¯ä»¥å®Œæˆæ–‡ä»¶çš„ä¼ è¾“ï¼Œè€Œä¸” 2 æ¬¡çš„æ•°æ®æ‹·è´è¿‡ç¨‹ï¼Œéƒ½ä¸éœ€è¦é€šè¿‡ CPUï¼Œ2 æ¬¡éƒ½æ˜¯ç”± DMA æ¥æ¬è¿ã€‚</strong></p><p>æ‰€ä»¥ï¼Œæ€»ä½“æ¥çœ‹ï¼Œ<strong>é›¶æ‹·è´æŠ€æœ¯å¯ä»¥æŠŠæ–‡ä»¶ä¼ è¾“çš„æ€§èƒ½æé«˜è‡³å°‘ä¸€å€ä»¥ä¸Š</strong></p><h4 id="ä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯çš„é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯çš„é¡¹ç›®" aria-hidden="true">#</a> ä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯çš„é¡¹ç›®</h4><p>äº‹å®ä¸Šï¼ŒKafka è¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œå°±åˆ©ç”¨äº†ã€Œé›¶æ‹·è´ã€æŠ€æœ¯ï¼Œä»è€Œå¤§å¹…æå‡äº† I/O çš„ååç‡ï¼Œè¿™ä¹Ÿæ˜¯ Kafka åœ¨å¤„ç†æµ·é‡æ•°æ®ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«çš„åŸå› ä¹‹ä¸€ã€‚</p><p>å¦‚æœä½ è¿½æº¯ Kafka æ–‡ä»¶ä¼ è¾“çš„ä»£ç ï¼Œä½ ä¼šå‘ç°ï¼Œæœ€ç»ˆå®ƒè°ƒç”¨äº† Java NIO åº“é‡Œçš„ <code>transferTo</code> æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Overridepublic</span> 
<span class="token keyword">long</span> <span class="token function">transferFrom</span><span class="token punctuation">(</span><span class="token class-name">FileChannel</span> fileChannel<span class="token punctuation">,</span> <span class="token keyword">long</span> position<span class="token punctuation">,</span> <span class="token keyword">long</span> count<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> fileChannel<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> count<span class="token punctuation">,</span> socketChannel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ Linux ç³»ç»Ÿæ”¯æŒ <code>sendfile()</code> ç³»ç»Ÿè°ƒç”¨ï¼Œé‚£ä¹ˆ <code>transferTo()</code> å®é™…ä¸Šæœ€åå°±ä¼šä½¿ç”¨åˆ° <code>sendfile()</code> ç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚</p><p>æ›¾ç»æœ‰å¤§ä½¬ä¸“é—¨å†™è¿‡ç¨‹åºæµ‹è¯•è¿‡ï¼Œåœ¨åŒæ ·çš„ç¡¬ä»¶æ¡ä»¶ä¸‹ï¼Œä¼ ç»Ÿæ–‡ä»¶ä¼ è¾“å’Œé›¶æ‹·æ‹·è´æ–‡ä»¶ä¼ è¾“çš„æ€§èƒ½å·®å¼‚ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™å¼ æµ‹è¯•æ•°æ®å›¾ï¼Œä½¿ç”¨äº†é›¶æ‹·è´èƒ½å¤Ÿç¼©çŸ­ <code>65%</code> çš„æ—¶é—´ï¼Œå¤§å¹…åº¦æå‡äº†æœºå™¨ä¼ è¾“æ•°æ®çš„ååé‡ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220702133411785-03d68437.png" alt="image-20220702133411785" tabindex="0" loading="lazy"><figcaption>image-20220702133411785</figcaption></figure><p>å¦å¤–ï¼ŒNginx ä¹Ÿæ”¯æŒé›¶æ‹·è´æŠ€æœ¯ï¼Œä¸€èˆ¬é»˜è®¤æ˜¯å¼€å¯é›¶æ‹·è´æŠ€æœ¯ï¼Œè¿™æ ·æœ‰åˆ©äºæé«˜æ–‡ä»¶ä¼ è¾“çš„æ•ˆç‡ï¼Œæ˜¯å¦å¼€å¯é›¶æ‹·è´æŠ€æœ¯çš„é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http {
...
    sendfile on
...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sendfile é…ç½®çš„å…·ä½“æ„æ€:</p><ul><li>è®¾ç½®ä¸º on è¡¨ç¤ºï¼Œä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯æ¥ä¼ è¾“æ–‡ä»¶ï¼šsendfile ï¼Œè¿™æ ·åªéœ€è¦ 2 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå’Œ 2 æ¬¡æ•°æ®æ‹·è´ã€‚</li><li>è®¾ç½®ä¸º off è¡¨ç¤ºï¼Œä½¿ç”¨ä¼ ç»Ÿçš„æ–‡ä»¶ä¼ è¾“æŠ€æœ¯ï¼šread + writeï¼Œè¿™æ—¶å°±éœ€è¦ 4 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå’Œ 4 æ¬¡æ•°æ®æ‹·è´ã€‚</li></ul><p>å½“ç„¶ï¼Œè¦ä½¿ç”¨ sendfileï¼ŒLinux å†…æ ¸ç‰ˆæœ¬å¿…é¡»è¦ 2.1 ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚</p><h4 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h4><p>æ—©æœŸ I/O æ“ä½œï¼Œå†…å­˜ä¸ç£ç›˜çš„æ•°æ®ä¼ è¾“çš„å·¥ä½œéƒ½æ˜¯ç”± CPU å®Œæˆçš„ï¼Œè€Œæ­¤æ—¶ CPU ä¸èƒ½æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œä¼šç‰¹åˆ«æµªè´¹ CPU èµ„æºã€‚</p><p>äºæ˜¯ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒDMA æŠ€æœ¯å°±å‡ºç°äº†ï¼Œæ¯ä¸ª I/O è®¾å¤‡éƒ½æœ‰è‡ªå·±çš„ DMA æ§åˆ¶å™¨ï¼Œé€šè¿‡è¿™ä¸ª DMA æ§åˆ¶å™¨ï¼ŒCPU åªéœ€è¦å‘Šè¯‰ DMA æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬è¦ä¼ è¾“ä»€ä¹ˆæ•°æ®ï¼Œä»å“ªé‡Œæ¥ï¼Œåˆ°å“ªé‡Œå»ï¼Œå°±å¯ä»¥æ”¾å¿ƒç¦»å¼€äº†ã€‚åç»­çš„å®é™…æ•°æ®ä¼ è¾“å·¥ä½œï¼Œéƒ½ä¼šç”± DMA æ§åˆ¶å™¨æ¥å®Œæˆï¼ŒCPU ä¸éœ€è¦å‚ä¸æ•°æ®ä¼ è¾“çš„å·¥ä½œã€‚</p><p>ä¼ ç»Ÿ IO çš„å·¥ä½œæ–¹å¼ï¼Œä»ç¡¬ç›˜è¯»å–æ•°æ®ï¼Œç„¶åå†é€šè¿‡ç½‘å¡å‘å¤–å‘é€ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ 4 ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå’Œ 4 æ¬¡æ•°æ®æ‹·è´ï¼Œå…¶ä¸­ 2 æ¬¡æ•°æ®æ‹·è´å‘ç”Ÿåœ¨å†…å­˜é‡Œçš„ç¼“å†²åŒºå’Œå¯¹åº”çš„ç¡¬ä»¶è®¾å¤‡ä¹‹é—´ï¼Œè¿™ä¸ªæ˜¯ç”± DMA å®Œæˆï¼Œå¦å¤– 2 æ¬¡åˆ™å‘ç”Ÿåœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€ä¹‹é—´ï¼Œè¿™ä¸ªæ•°æ®æ¬ç§»å·¥ä½œæ˜¯ç”± CPU å®Œæˆçš„ã€‚</p><p>ä¸ºäº†æé«˜æ–‡ä»¶ä¼ è¾“çš„æ€§èƒ½ï¼Œäºæ˜¯å°±å‡ºç°äº†é›¶æ‹·è´æŠ€æœ¯ï¼Œå®ƒé€šè¿‡ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨ï¼ˆ<code>sendfile</code> æ–¹æ³•ï¼‰åˆå¹¶äº†ç£ç›˜è¯»å–ä¸ç½‘ç»œå‘é€ä¸¤ä¸ªæ“ä½œï¼Œé™ä½äº†ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ã€‚å¦å¤–ï¼Œæ‹·è´æ•°æ®éƒ½æ˜¯å‘ç”Ÿåœ¨å†…æ ¸ä¸­çš„ï¼Œå¤©ç„¶å°±é™ä½äº†æ•°æ®æ‹·è´çš„æ¬¡æ•°ã€‚</p><p>Kafka å’Œ Nginx éƒ½æœ‰å®ç°é›¶æ‹·è´æŠ€æœ¯ï¼Œè¿™å°†å¤§å¤§æé«˜æ–‡ä»¶ä¼ è¾“çš„æ€§èƒ½ã€‚</p><p>é›¶æ‹·è´æŠ€æœ¯æ˜¯åŸºäº PageCache çš„ï¼ŒPageCache ä¼šç¼“å­˜æœ€è¿‘è®¿é—®çš„æ•°æ®ï¼Œæå‡äº†è®¿é—®ç¼“å­˜æ•°æ®çš„æ€§èƒ½ï¼ŒåŒæ—¶ï¼Œä¸ºäº†è§£å†³æœºæ¢°ç¡¬ç›˜å¯»å€æ…¢çš„é—®é¢˜ï¼Œå®ƒè¿˜ååŠ© I/O è°ƒåº¦ç®—æ³•å®ç°äº† IO åˆå¹¶ä¸é¢„è¯»ï¼Œè¿™ä¹Ÿæ˜¯é¡ºåºè¯»æ¯”éšæœºè¯»æ€§èƒ½å¥½çš„åŸå› ã€‚è¿™äº›ä¼˜åŠ¿ï¼Œè¿›ä¸€æ­¥æå‡äº†é›¶æ‹·è´çš„æ€§èƒ½ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé›¶æ‹·è´æŠ€æœ¯æ˜¯ä¸å…è®¸è¿›ç¨‹å¯¹æ–‡ä»¶å†…å®¹ä½œè¿›ä¸€æ­¥çš„åŠ å·¥çš„ï¼Œæ¯”å¦‚å‹ç¼©æ•°æ®å†å‘é€ã€‚</p><p>å¦å¤–ï¼Œå½“ä¼ è¾“å¤§æ–‡ä»¶æ—¶ï¼Œä¸èƒ½ä½¿ç”¨é›¶æ‹·è´ï¼Œå› ä¸ºå¯èƒ½ç”±äº PageCache è¢«å¤§æ–‡ä»¶å æ®ï¼Œè€Œå¯¼è‡´ã€Œçƒ­ç‚¹ã€å°æ–‡ä»¶æ— æ³•åˆ©ç”¨åˆ° PageCacheï¼Œå¹¶ä¸”å¤§æ–‡ä»¶çš„ç¼“å­˜å‘½ä¸­ç‡ä¸é«˜ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨ã€Œå¼‚æ­¥ IO + ç›´æ¥ IO ã€çš„æ–¹å¼ã€‚</p><p>åœ¨ Nginx é‡Œï¼Œå¯ä»¥é€šè¿‡é…ç½®ï¼Œè®¾å®šä¸€ä¸ªæ–‡ä»¶å¤§å°é˜ˆå€¼ï¼Œé’ˆå¯¹å¤§æ–‡ä»¶ä½¿ç”¨å¼‚æ­¥ IO å’Œç›´æ¥ IOï¼Œè€Œå¯¹å°æ–‡ä»¶ä½¿ç”¨é›¶æ‹·è´ã€‚</p><h3 id="åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹" aria-hidden="true">#</a> åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹</h3><h4 id="åƒµå°¸è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#åƒµå°¸è¿›ç¨‹" aria-hidden="true">#</a> åƒµå°¸è¿›ç¨‹</h4><p>ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸåï¼Œå®ƒçš„çˆ¶è¿›ç¨‹å¹¶æ²¡æœ‰ç­‰å¾…å®ƒï¼ˆè°ƒç”¨waitæˆ–è€…waitpidï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå­è¿›ç¨‹å°†æˆä¸ºä¸€ä¸ªåƒµå°¸è¿›ç¨‹ã€‚åƒµå°¸è¿›ç¨‹æ˜¯ä¸€ä¸ªå·²ç»æ­»äº¡çš„è¿›ç¨‹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£è¢«é”€æ¯ã€‚å®ƒå·²ç»æ”¾å¼ƒäº†å‡ ä¹æ‰€æœ‰å†…å­˜ç©ºé—´ï¼Œæ²¡æœ‰ä»»ä½•å¯æ‰§è¡Œä»£ç ï¼Œä¹Ÿä¸èƒ½è¢«è°ƒåº¦ï¼Œä»…ä»…åœ¨è¿›ç¨‹è¡¨ä¸­ä¿ç•™ä¸€ä¸ªä½ç½®ï¼Œè®°è½½è¯¥è¿›ç¨‹çš„è¿›ç¨‹IDã€ç»ˆæ­¢çŠ¶æ€ä»¥åŠèµ„æºåˆ©ç”¨ä¿¡æ¯(CPUæ—¶é—´ï¼Œå†…å­˜ä½¿ç”¨é‡ç­‰ç­‰)ä¾›çˆ¶è¿›ç¨‹æ”¶é›†ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œåƒµå°¸è¿›ç¨‹ä¸å†å æœ‰ä»»ä½•å†…å­˜ç©ºé—´ã€‚è¿™ä¸ªåƒµå°¸è¿›ç¨‹å¯èƒ½ä¼šä¸€ç›´ç•™åœ¨ç³»ç»Ÿä¸­ç›´åˆ°ç³»ç»Ÿé‡å¯ã€‚</p><blockquote><p>ã€Šç™¾åº¦ç™¾ç§‘ã€‹è§£é‡Šï¼šåƒµå°¸è¿›ç¨‹æ˜¯å½“å­è¿›ç¨‹æ¯”çˆ¶è¿›ç¨‹å…ˆç»“æŸï¼Œè€Œçˆ¶è¿›ç¨‹åˆæ²¡æœ‰å›æ”¶å­è¿›ç¨‹ï¼Œé‡Šæ”¾å­è¿›ç¨‹å ç”¨çš„èµ„æºï¼Œæ­¤æ—¶å­è¿›ç¨‹å°†æˆä¸ºä¸€ä¸ªåƒµå°¸è¿›ç¨‹ã€‚å¦‚æœçˆ¶è¿›ç¨‹å…ˆé€€å‡º ï¼Œå­è¿›ç¨‹è¢«initæ¥ç®¡ï¼Œå­è¿›ç¨‹é€€å‡ºåinitä¼šå›æ”¶å…¶å ç”¨çš„ç›¸å…³èµ„æº</p></blockquote><p>å±å®³ï¼šå ç”¨è¿›ç¨‹å·ï¼Œè€Œç³»ç»Ÿæ‰€èƒ½ä½¿ç”¨çš„è¿›ç¨‹å·æ˜¯æœ‰é™çš„ï¼›å ç”¨å†…å­˜ã€‚</p><p>ä»¥ä¸‹æƒ…å†µä¸ä¼šäº§ç”Ÿåƒµå°¸è¿›ç¨‹ï¼š</p><ul><li>è¯¥è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å…ˆç»“æŸäº†ã€‚æ¯ä¸ªè¿›ç¨‹ç»“æŸçš„æ—¶å€™ï¼Œç³»ç»Ÿéƒ½ä¼šæ‰«ææ˜¯å¦å­˜åœ¨å­è¿›ç¨‹ï¼Œå¦‚æœæœ‰åˆ™ç”¨Initè¿›ç¨‹æ¥ç®¡ï¼Œæˆä¸ºè¯¥è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ï¼Œå¹¶ä¸”ä¼šè°ƒç”¨waitç­‰å¾…å…¶ç»“æŸã€‚</li><li>çˆ¶è¿›ç¨‹è°ƒç”¨waitæˆ–è€…waitpidç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼ˆéœ€è¦æ¯éš”ä¸€æ®µæ—¶é—´æŸ¥è¯¢å­è¿›ç¨‹æ˜¯å¦ç»“æŸï¼‰ã€‚waitç³»ç»Ÿè°ƒç”¨ä¼šä½¿çˆ¶è¿›ç¨‹æš‚åœæ‰§è¡Œï¼Œç›´åˆ°å®ƒçš„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸä¸ºæ­¢ã€‚waitpidåˆ™å¯ä»¥åŠ å…¥ <code>WNOHANG</code>(wait-no-hang)é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰å‘ç°ç»“æŸçš„å­è¿›ç¨‹ï¼Œå°±ä¼šç«‹å³è¿”å›ï¼Œä¸ä¼šå°†è°ƒç”¨waitpidçš„è¿›ç¨‹é˜»å¡ã€‚åŒæ—¶ï¼Œwaitpidè¿˜å¯ä»¥é€‰æ‹©æ˜¯ç­‰å¾…ä»»ä¸€å­è¿›ç¨‹ï¼ˆåŒwaitï¼‰ï¼Œè¿˜æ˜¯ç­‰å¾…æŒ‡å®špidçš„å­è¿›ç¨‹ï¼Œè¿˜æ˜¯ç­‰å¾…åŒä¸€è¿›ç¨‹ç»„ä¸‹çš„ä»»ä¸€å­è¿›ç¨‹ï¼Œè¿˜æ˜¯ç­‰å¾…ç»„IDç­‰äºpidçš„ä»»ä¸€å­è¿›ç¨‹ï¼›</li><li>å­è¿›ç¨‹ç»“æŸæ—¶ï¼Œç³»ç»Ÿä¼šäº§ç”Ÿ <code>SIGCHLD</code>(signal-child)ä¿¡å·ï¼Œå¯ä»¥æ³¨å†Œä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­è°ƒç”¨waitpidï¼Œç­‰å¾…æ‰€æœ‰ç»“æŸçš„å­è¿›ç¨‹ï¼ˆæ³¨æ„ï¼šä¸€èˆ¬éƒ½éœ€è¦å¾ªç¯è°ƒç”¨waitpidï¼Œå› ä¸ºåœ¨ä¿¡å·å¤„ç†å‡½æ•°å¼€å§‹æ‰§è¡Œä¹‹å‰ï¼Œå¯èƒ½å·²ç»æœ‰å¤šä¸ªå­è¿›ç¨‹ç»“æŸäº†ï¼Œè€Œä¿¡å·å¤„ç†å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥è¦å¾ªç¯è°ƒç”¨å°†æ‰€æœ‰ç»“æŸçš„å­è¿›ç¨‹å›æ”¶ï¼‰ï¼›</li><li>ä¹Ÿå¯ä»¥ç”¨ <code>signal(SIGCLD, SIG_IGN)</code>(signal-ignore)é€šçŸ¥å†…æ ¸ï¼Œè¡¨ç¤ºå¿½ç•¥ <code>SIGCHLD</code>ä¿¡å·ï¼Œé‚£ä¹ˆå­è¿›ç¨‹ç»“æŸåï¼Œå†…æ ¸ä¼šè¿›è¡Œå›æ”¶ã€‚</li></ul><h4 id="å­¤å„¿è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#å­¤å„¿è¿›ç¨‹" aria-hidden="true">#</a> å­¤å„¿è¿›ç¨‹</h4><blockquote><p>ç™¾åº¦ç™¾ç§‘ï¼šåœ¨æ“ä½œç³»ç»Ÿé¢†åŸŸä¸­ï¼Œå­¤å„¿è¿›ç¨‹æŒ‡çš„<strong>æ˜¯åœ¨å…¶çˆ¶è¿›ç¨‹æ‰§è¡Œå®Œæˆæˆ–è¢«ç»ˆæ­¢åä»ç»§ç»­è¿è¡Œçš„ä¸€ç±»è¿›ç¨‹</strong>ã€‚è¿™äº›å­¤å„¿è¿›ç¨‹å°†è¢«initè¿›ç¨‹ (è¿›ç¨‹å·ä¸º1)æ‰€æ”¶å…»ï¼Œå¹¶ç”±initè¿›ç¨‹å¯¹å®ƒä»¬å®ŒæˆçŠ¶æ€æ”¶é›†å·¥ä½œã€‚</p></blockquote><p>ä¸€ä¸ªçˆ¶è¿›ç¨‹å·²ç»ç»“æŸäº†ï¼Œä½†æ˜¯å®ƒçš„å­è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œé‚£ä¹ˆè¿™äº›å­è¿›ç¨‹å°†æˆä¸ºå­¤å„¿è¿›ç¨‹ã€‚å­¤å„¿è¿›ç¨‹ä¼šè¢«Initï¼ˆè¿›ç¨‹IDä¸º1ï¼‰æ¥ç®¡ï¼Œå½“è¿™äº›å­¤å„¿è¿›ç¨‹ç»“æŸæ—¶ç”±Initå®ŒæˆçŠ¶æ€æ”¶é›†å·¥ä½œã€‚</p><h3 id="ğŸ’«i-o-å¤šè·¯å¤ç”¨-select-poll-epoll" tabindex="-1"><a class="header-anchor" href="#ğŸ’«i-o-å¤šè·¯å¤ç”¨-select-poll-epoll" aria-hidden="true">#</a> ğŸ’«I/O å¤šè·¯å¤ç”¨ï¼šselect/poll/epoll</h3><h4 id="æœ€åŸºæœ¬çš„-socket-æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#æœ€åŸºæœ¬çš„-socket-æ¨¡å‹" aria-hidden="true">#</a> æœ€åŸºæœ¬çš„ Socket æ¨¡å‹</h4><p>è¦æƒ³å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨èƒ½åœ¨ç½‘ç»œä¸­é€šä¿¡ï¼Œé‚£å¿…é¡»å¾—ä½¿ç”¨ Socket ç¼–ç¨‹ï¼Œå®ƒæ˜¯è¿›ç¨‹é—´é€šä¿¡é‡Œæ¯”è¾ƒç‰¹åˆ«çš„æ–¹å¼ï¼Œç‰¹åˆ«ä¹‹å¤„åœ¨äºå®ƒæ˜¯å¯ä»¥è·¨ä¸»æœºé—´é€šä¿¡ã€‚</p><p>Socket çš„ä¸­æ–‡åå«ä½œæ’å£ï¼Œå’‹ä¸€çœ‹è¿˜æŒºè¿·æƒ‘çš„ã€‚äº‹å®ä¸Šï¼ŒåŒæ–¹è¦è¿›è¡Œç½‘ç»œé€šä¿¡å‰ï¼Œå„è‡ªå¾—åˆ›å»ºä¸€ä¸ª Socketï¼Œè¿™ç›¸å½“äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¼€äº†ä¸€ä¸ªâ€œå£å­â€ï¼ŒåŒæ–¹è¯»å–å’Œå‘é€æ•°æ®çš„æ—¶å€™ï¼Œéƒ½é€šè¿‡è¿™ä¸ªâ€œå£å­â€ã€‚è¿™æ ·ä¸€çœ‹ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å¾ˆåƒå¼„äº†ä¸€æ ¹ç½‘çº¿ï¼Œä¸€å¤´æ’åœ¨å®¢æˆ·ç«¯ï¼Œä¸€å¤´æ’åœ¨æœåŠ¡ç«¯ï¼Œç„¶åè¿›è¡Œé€šä¿¡ã€‚</p><p>åˆ›å»º Socket çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šç½‘ç»œå±‚ä½¿ç”¨çš„æ˜¯ IPv4 è¿˜æ˜¯ IPv6ï¼Œä¼ è¾“å±‚ä½¿ç”¨çš„æ˜¯ TCP è¿˜æ˜¯ UDPã€‚</p><p>UDP çš„ Socket ç¼–ç¨‹ç›¸å¯¹ç®€å•äº›ï¼Œè¿™é‡Œæˆ‘ä»¬åªä»‹ç»åŸºäº TCP çš„ Socket ç¼–ç¨‹ã€‚</p><p>æœåŠ¡å™¨çš„ç¨‹åºè¦å…ˆè·‘èµ·æ¥ï¼Œç„¶åç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥å’Œæ•°æ®ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœåŠ¡ç«¯çš„ Socket ç¼–ç¨‹è¿‡ç¨‹æ˜¯æ€æ ·çš„ã€‚</p><p>æœåŠ¡ç«¯é¦–å…ˆè°ƒç”¨ <code>socket()</code> å‡½æ•°ï¼Œåˆ›å»ºç½‘ç»œåè®®ä¸º IPv4ï¼Œä»¥åŠä¼ è¾“åè®®ä¸º TCP çš„ Socket ï¼Œæ¥ç€è°ƒç”¨ <code>bind()</code> å‡½æ•°ï¼Œç»™è¿™ä¸ª Socket ç»‘å®šä¸€ä¸ª <strong>IP åœ°å€å’Œç«¯å£</strong>ï¼Œç»‘å®šè¿™ä¸¤ä¸ªçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ç»‘å®šç«¯å£çš„ç›®çš„ï¼šå½“å†…æ ¸æ”¶åˆ° TCP æŠ¥æ–‡ï¼Œé€šè¿‡ TCP å¤´é‡Œé¢çš„ç«¯å£å·ï¼Œæ¥æ‰¾åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œç„¶åæŠŠæ•°æ®ä¼ é€’ç»™æˆ‘ä»¬ã€‚</li><li>ç»‘å®š IP åœ°å€çš„ç›®çš„ï¼šä¸€å°æœºå™¨æ˜¯å¯ä»¥æœ‰å¤šä¸ªç½‘å¡çš„ï¼Œæ¯ä¸ªç½‘å¡éƒ½æœ‰å¯¹åº”çš„ IP åœ°å€ï¼Œå½“ç»‘å®šä¸€ä¸ªç½‘å¡æ—¶ï¼Œå†…æ ¸åœ¨æ”¶åˆ°è¯¥ç½‘å¡ä¸Šçš„åŒ…ï¼Œæ‰ä¼šå‘ç»™æˆ‘ä»¬ï¼›</li></ul><p>ç»‘å®šå®Œ IP åœ°å€å’Œç«¯å£åï¼Œå°±å¯ä»¥è°ƒç”¨ <code>listen()</code> å‡½æ•°è¿›è¡Œç›‘å¬ï¼Œæ­¤æ—¶å¯¹åº” TCP çŠ¶æ€å›¾ä¸­çš„ <code>listen</code>ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ¤å®šæœåŠ¡å™¨ä¸­ä¸€ä¸ªç½‘ç»œç¨‹åºæœ‰æ²¡æœ‰å¯åŠ¨ï¼Œå¯ä»¥é€šè¿‡ <code>netstat</code> å‘½ä»¤æŸ¥çœ‹å¯¹åº”çš„ç«¯å£å·æ˜¯å¦æœ‰è¢«ç›‘å¬ã€‚</p><p>æœåŠ¡ç«¯è¿›å…¥äº†ç›‘å¬çŠ¶æ€åï¼Œé€šè¿‡è°ƒç”¨ <code>accept()</code> å‡½æ•°ï¼Œæ¥ä»å†…æ ¸è·å–å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šé˜»å¡ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥çš„åˆ°æ¥ã€‚</p><p>é‚£å®¢æˆ·ç«¯æ˜¯æ€ä¹ˆå‘èµ·è¿æ¥çš„å‘¢ï¼Ÿå®¢æˆ·ç«¯åœ¨åˆ›å»ºå¥½ Socket åï¼Œè°ƒç”¨ <code>connect()</code> å‡½æ•°å‘èµ·è¿æ¥ï¼Œè¯¥å‡½æ•°çš„å‚æ•°è¦æŒ‡æ˜æœåŠ¡ç«¯çš„ IP åœ°å€å’Œç«¯å£å·ï¼Œç„¶åä¸‡ä¼—æœŸå¾…çš„ TCP ä¸‰æ¬¡æ¡æ‰‹å°±å¼€å§‹äº†ã€‚</p><p>åœ¨ TCP è¿æ¥çš„è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨çš„å†…æ ¸å®é™…ä¸Šä¸ºæ¯ä¸ª Socket ç»´æŠ¤äº†ä¸¤ä¸ªé˜Ÿåˆ—ï¼š</p><ul><li>ä¸€ä¸ªæ˜¯è¿˜æ²¡å®Œå…¨å»ºç«‹è¿æ¥çš„é˜Ÿåˆ—ï¼Œç§°ä¸º <strong>TCP åŠè¿æ¥é˜Ÿåˆ—</strong>ï¼Œè¿™ä¸ªé˜Ÿåˆ—éƒ½æ˜¯æ²¡æœ‰å®Œæˆä¸‰æ¬¡æ¡æ‰‹çš„è¿æ¥ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äº <code>syn_rcvd</code> çš„çŠ¶æ€ï¼›</li><li>ä¸€ä¸ªæ˜¯ä¸€ä»¶å»ºç«‹è¿æ¥çš„é˜Ÿåˆ—ï¼Œç§°ä¸º <strong>TCP å…¨è¿æ¥é˜Ÿåˆ—</strong>ï¼Œè¿™ä¸ªé˜Ÿåˆ—éƒ½æ˜¯å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹çš„è¿æ¥ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äº <code>established</code> çŠ¶æ€ï¼›</li></ul><p>å½“ TCP å…¨è¿æ¥é˜Ÿåˆ—ä¸ä¸ºç©ºåï¼ŒæœåŠ¡ç«¯çš„ <code>accept()</code> å‡½æ•°ï¼Œå°±ä¼šä»å†…æ ¸ä¸­çš„ TCP å…¨è¿æ¥é˜Ÿåˆ—é‡Œæ‹¿å‡ºä¸€ä¸ªå·²ç»å®Œæˆè¿æ¥çš„ Socket è¿”å›åº”ç”¨ç¨‹åºï¼Œåç»­æ•°æ®ä¼ è¾“éƒ½ç”¨è¿™ä¸ª Socketã€‚</p><p>æ³¨æ„ï¼Œç›‘å¬çš„ Socket å’ŒçœŸæ­£ç”¨æ¥ä¼ æ•°æ®çš„ Socket æ˜¯ä¸¤ä¸ªï¼š</p><ul><li>ä¸€ä¸ªå«ä½œ<strong>ç›‘å¬ Socket</strong>ï¼›</li><li>ä¸€ä¸ªå«ä½œ<strong>å·²è¿æ¥ Socket</strong>ï¼›</li></ul><p>è¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å°±å¼€å§‹ç›¸äº’ä¼ è¾“æ•°æ®äº†ï¼ŒåŒæ–¹éƒ½å¯ä»¥é€šè¿‡ <code>read()</code> å’Œ <code>write()</code> å‡½æ•°æ¥è¯»å†™æ•°æ®ã€‚</p><p>è‡³æ­¤ï¼Œ TCP åè®®çš„ Socket ç¨‹åºçš„è°ƒç”¨è¿‡ç¨‹å°±ç»“æŸäº†ï¼Œæ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220731143809167-e631d60a.png" alt="image-20220731143809167" tabindex="0" loading="lazy"><figcaption>image-20220731143809167</figcaption></figure><p>çœ‹åˆ°è¿™ï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰è§‰å¾—è¯»å†™ Socket çš„æ–¹å¼ï¼Œå¥½åƒè¯»å†™æ–‡ä»¶ä¸€æ ·ã€‚</p><p>æ˜¯çš„ï¼ŒåŸºäº Linux ä¸€åˆ‡çš†æ–‡ä»¶çš„ç†å¿µï¼Œåœ¨å†…æ ¸ä¸­ Socket ä¹Ÿæ˜¯ä»¥ã€Œæ–‡ä»¶ã€çš„å½¢å¼å­˜åœ¨çš„ï¼Œä¹Ÿæ˜¯æœ‰å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><blockquote><p>PS : ä¸‹é¢ä¼šè¯´åˆ°å†…æ ¸é‡Œçš„æ•°æ®ç»“æ„ï¼Œä¸æ„Ÿå…´è¶£çš„å¯ä»¥è·³è¿‡è¿™ä¸€éƒ¨åˆ†ï¼Œä¸ä¼šå¯¹åç»­çš„å†…å®¹æœ‰å½±å“ã€‚</p></blockquote><p>æ–‡ä»¶æè¿°ç¬¦çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªæ•°æ®ç»“æ„ <code>task_struct</code>ï¼Œè¯¥ç»“æ„ä½“é‡Œæœ‰ä¸€ä¸ªæŒ‡å‘ã€Œæ–‡ä»¶æè¿°ç¬¦æ•°ç»„ã€çš„æˆå‘˜æŒ‡é’ˆã€‚è¯¥æ•°ç»„é‡Œåˆ—å‡ºè¿™ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ã€‚æ•°ç»„çš„ä¸‹æ ‡æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè€Œæ•°ç»„çš„å†…å®¹æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å†…æ ¸ä¸­æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶çš„åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´å†…æ ¸å¯ä»¥é€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ‰¾åˆ°å¯¹åº”æ‰“å¼€çš„æ–‡ä»¶ã€‚</p><p>ç„¶åæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ª inodeï¼ŒSocket æ–‡ä»¶çš„ inode æŒ‡å‘äº†å†…æ ¸ä¸­çš„ Socket ç»“æ„ï¼Œåœ¨è¿™ä¸ªç»“æ„ä½“é‡Œæœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œåˆ†åˆ«æ˜¯<strong>å‘é€é˜Ÿåˆ—</strong>å’Œ<strong>æ¥æ”¶é˜Ÿåˆ—</strong>ï¼Œè¿™ä¸ªä¸¤ä¸ªé˜Ÿåˆ—é‡Œé¢ä¿å­˜çš„æ˜¯ä¸€ä¸ªä¸ª <code>struct sk_buff</code>ï¼Œç”¨é“¾è¡¨çš„ç»„ç»‡å½¢å¼ä¸²èµ·æ¥ã€‚</p><p>sk_buff å¯ä»¥è¡¨ç¤ºå„ä¸ªå±‚çš„æ•°æ®åŒ…ï¼Œåœ¨åº”ç”¨å±‚æ•°æ®åŒ…å« dataï¼Œåœ¨ TCP å±‚æˆ‘ä»¬ç§°ä¸º segmentï¼Œåœ¨ IP å±‚æˆ‘ä»¬å« packetï¼Œåœ¨æ•°æ®é“¾è·¯å±‚ç§°ä¸º frameã€‚</p><p>ä½ å¯èƒ½ä¼šå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆå…¨éƒ¨æ•°æ®åŒ…åªç”¨ä¸€ä¸ªç»“æ„ä½“æ¥æè¿°å‘¢ï¼Ÿåè®®æ ˆé‡‡ç”¨çš„æ˜¯åˆ†å±‚ç»“æ„ï¼Œä¸Šå±‚å‘ä¸‹å±‚ä¼ é€’æ•°æ®æ—¶éœ€è¦å¢åŠ åŒ…å¤´ï¼Œä¸‹å±‚å‘ä¸Šå±‚æ•°æ®æ—¶åˆéœ€è¦å»æ‰åŒ…å¤´ï¼Œå¦‚æœæ¯ä¸€å±‚éƒ½ç”¨ä¸€ä¸ªç»“æ„ä½“ï¼Œé‚£åœ¨å±‚ä¹‹é—´ä¼ é€’æ•°æ®çš„æ—¶å€™ï¼Œå°±è¦å‘ç”Ÿå¤šæ¬¡æ‹·è´ï¼Œè¿™å°†å¤§å¤§é™ä½ CPU æ•ˆç‡ã€‚</p><p>äºæ˜¯ï¼Œä¸ºäº†åœ¨å±‚çº§ä¹‹é—´ä¼ é€’æ•°æ®æ—¶ï¼Œä¸å‘ç”Ÿæ‹·è´ï¼Œåªç”¨ sk_buff ä¸€ä¸ªç»“æ„ä½“æ¥æè¿°æ‰€æœ‰çš„ç½‘ç»œåŒ…ï¼Œé‚£å®ƒæ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿæ˜¯é€šè¿‡è°ƒæ•´ sk_buff ä¸­ <code>data</code> çš„æŒ‡é’ˆï¼Œæ¯”å¦‚ï¼š</p><ul><li>å½“æ¥æ”¶æŠ¥æ–‡æ—¶ï¼Œä»ç½‘å¡é©±åŠ¨å¼€å§‹ï¼Œé€šè¿‡åè®®æ ˆå±‚å±‚å¾€ä¸Šä¼ é€æ•°æ®æŠ¥ï¼Œé€šè¿‡å¢åŠ  skb-&gt;data çš„å€¼ï¼Œæ¥é€æ­¥å‰¥ç¦»åè®®é¦–éƒ¨ã€‚</li><li>å½“è¦å‘é€æŠ¥æ–‡æ—¶ï¼Œåˆ›å»º sk_buff ç»“æ„ä½“ï¼Œæ•°æ®ç¼“å­˜åŒºçš„å¤´éƒ¨é¢„ç•™è¶³å¤Ÿçš„ç©ºé—´ï¼Œç”¨æ¥å¡«å……å„å±‚é¦–éƒ¨ï¼Œåœ¨ç»è¿‡å„ä¸‹å±‚åè®®æ—¶ï¼Œé€šè¿‡å‡å°‘ skb-&gt;data çš„å€¼æ¥å¢åŠ åè®®é¦–éƒ¨ã€‚</li></ul><p>ä½ å¯ä»¥ä»ä¸‹é¢è¿™å¼ å›¾çœ‹åˆ°ï¼Œå½“å‘é€æŠ¥æ–‡æ—¶ï¼Œdata æŒ‡é’ˆçš„ç§»åŠ¨è¿‡ç¨‹ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220717161851452-e198dbc6.png" alt="image-20220717161851452" tabindex="0" loading="lazy"><figcaption>image-20220717161851452</figcaption></figure><h4 id="å¦‚ä½•æœåŠ¡æ›´å¤šçš„ç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•æœåŠ¡æ›´å¤šçš„ç”¨æˆ·" aria-hidden="true">#</a> å¦‚ä½•æœåŠ¡æ›´å¤šçš„ç”¨æˆ·ï¼Ÿ</h4><p>å‰é¢æåˆ°çš„ TCP Socket è°ƒç”¨æµç¨‹æ˜¯æœ€ç®€å•ã€æœ€åŸºæœ¬çš„ï¼Œå®ƒåŸºæœ¬åªèƒ½ä¸€å¯¹ä¸€é€šä¿¡ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯åŒæ­¥é˜»å¡çš„æ–¹å¼ï¼Œå½“æœåŠ¡ç«¯åœ¨è¿˜æ²¡å¤„ç†å®Œä¸€ä¸ªå®¢æˆ·ç«¯çš„ç½‘ç»œ I/O æ—¶ï¼Œæˆ–è€… è¯»å†™æ“ä½œå‘ç”Ÿé˜»å¡æ—¶ï¼Œå…¶ä»–å®¢æˆ·ç«¯æ˜¯æ— æ³•ä¸æœåŠ¡ç«¯è¿æ¥çš„ã€‚</p><p>å¯å¦‚æœæˆ‘ä»¬æœåŠ¡å™¨åªèƒ½æœåŠ¡ä¸€ä¸ªå®¢æˆ·ï¼Œé‚£è¿™æ ·å°±å¤ªæµªè´¹èµ„æºäº†ï¼Œäºæ˜¯æˆ‘ä»¬è¦æ”¹è¿›è¿™ä¸ªç½‘ç»œ I/O æ¨¡å‹ï¼Œä»¥æ”¯æŒæ›´å¤šçš„å®¢æˆ·ç«¯ã€‚</p><p>åœ¨æ”¹è¿›ç½‘ç»œ I/O æ¨¡å‹å‰ï¼Œæˆ‘å…ˆæ¥æä¸€ä¸ªé—®é¢˜ï¼Œä½ çŸ¥é“æœåŠ¡å™¨å•æœºç†è®ºæœ€å¤§èƒ½è¿æ¥å¤šå°‘ä¸ªå®¢æˆ·ç«¯ï¼Ÿ</p><p>ç›¸ä¿¡ä½ çŸ¥é“ TCP è¿æ¥æ˜¯ç”±å››å…ƒç»„å”¯ä¸€ç¡®è®¤çš„ï¼Œè¿™ä¸ªå››å…ƒç»„å°±æ˜¯ï¼š<strong>æœ¬æœºIP, æœ¬æœºç«¯å£, å¯¹ç«¯IP, å¯¹ç«¯ç«¯å£</strong>ã€‚</p><p>æœåŠ¡å™¨ä½œä¸ºæœåŠ¡æ–¹ï¼Œé€šå¸¸ä¼šåœ¨æœ¬åœ°å›ºå®šç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ã€‚å› æ­¤æœåŠ¡å™¨çš„æœ¬åœ° IP å’Œç«¯å£æ˜¯å›ºå®šçš„ï¼Œäºæ˜¯å¯¹äºæœåŠ¡ç«¯ TCP è¿æ¥çš„å››å…ƒç»„åªæœ‰å¯¹ç«¯ IP å’Œç«¯å£æ˜¯ä¼šå˜åŒ–çš„ï¼Œæ‰€ä»¥<strong>æœ€å¤§ TCP è¿æ¥æ•° = å®¢æˆ·ç«¯ IP æ•°Ã—å®¢æˆ·ç«¯ç«¯å£æ•°</strong>ã€‚</p><p>å¯¹äº IPv4ï¼Œå®¢æˆ·ç«¯çš„ IP æ•°æœ€å¤šä¸º 2 çš„ 32 æ¬¡æ–¹ï¼Œå®¢æˆ·ç«¯çš„ç«¯å£æ•°æœ€å¤šä¸º 2 çš„ 16 æ¬¡æ–¹ï¼Œä¹Ÿå°±æ˜¯<strong>æœåŠ¡ç«¯å•æœºæœ€å¤§ TCP è¿æ¥æ•°çº¦ä¸º 2 çš„ 48 æ¬¡æ–¹</strong>ã€‚</p><p>è¿™ä¸ªç†è®ºå€¼ç›¸å½“â€œä¸°æ»¡â€ï¼Œä½†æ˜¯æœåŠ¡å™¨è‚¯å®šæ‰¿è½½ä¸äº†é‚£ä¹ˆå¤§çš„è¿æ¥æ•°ï¼Œä¸»è¦ä¼šå—ä¸¤ä¸ªæ–¹é¢çš„é™åˆ¶ï¼š</p><ul><li><strong>æ–‡ä»¶æè¿°ç¬¦</strong>ï¼ŒSocket å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå°±ä¼šå¯¹åº”ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚åœ¨ Linux ä¸‹ï¼Œå•ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ•°æ˜¯æœ‰é™åˆ¶çš„ï¼Œæ²¡æœ‰ç»è¿‡ä¿®æ”¹çš„å€¼ä¸€èˆ¬éƒ½æ˜¯ 1024ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ ulimit å¢å¤§æ–‡ä»¶æè¿°ç¬¦çš„æ•°ç›®ï¼›</li><li><strong>ç³»ç»Ÿå†…å­˜</strong>ï¼Œæ¯ä¸ª TCP è¿æ¥åœ¨å†…æ ¸ä¸­éƒ½æœ‰å¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œæ„å‘³ç€æ¯ä¸ªè¿æ¥éƒ½æ˜¯ä¼šå ç”¨ä¸€å®šå†…å­˜çš„ï¼›</li></ul><p>é‚£å¦‚æœæœåŠ¡å™¨çš„å†…å­˜åªæœ‰ 2 GBï¼Œç½‘å¡æ˜¯åƒå…†çš„ï¼Œèƒ½æ”¯æŒå¹¶å‘ 1 ä¸‡è¯·æ±‚å—ï¼Ÿ</p><p>å¹¶å‘ 1 ä¸‡è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯ç»å…¸çš„ C10K é—®é¢˜ ï¼ŒC æ˜¯ Client å•è¯é¦–å­—æ¯ç¼©å†™ï¼ŒC10K å°±æ˜¯å•æœºåŒæ—¶å¤„ç† 1 ä¸‡ä¸ªè¯·æ±‚çš„é—®é¢˜ã€‚</p><p>ä»ç¡¬ä»¶èµ„æºè§’åº¦çœ‹ï¼Œå¯¹äº 2GB å†…å­˜åƒå…†ç½‘å¡çš„æœåŠ¡å™¨ï¼Œå¦‚æœæ¯ä¸ªè¯·æ±‚å¤„ç†å ç”¨ä¸åˆ° 200KB çš„å†…å­˜å’Œ 100Kbit çš„ç½‘ç»œå¸¦å®½å°±å¯ä»¥æ»¡è¶³å¹¶å‘ 1 ä¸‡ä¸ªè¯·æ±‚ã€‚</p><p>ä¸è¿‡ï¼Œè¦æƒ³çœŸæ­£å®ç° C10K çš„æœåŠ¡å™¨ï¼Œè¦è€ƒè™‘çš„åœ°æ–¹åœ¨äºæœåŠ¡å™¨çš„ç½‘ç»œ I/O æ¨¡å‹ï¼Œæ•ˆç‡ä½çš„æ¨¡å‹ï¼Œä¼šåŠ é‡ç³»ç»Ÿå¼€é”€ï¼Œä»è€Œä¼šç¦» C10K çš„ç›®æ ‡è¶Šæ¥è¶Šè¿œã€‚</p><h4 id="å¤šè¿›ç¨‹æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#å¤šè¿›ç¨‹æ¨¡å‹" aria-hidden="true">#</a> å¤šè¿›ç¨‹æ¨¡å‹</h4><p>åŸºäºæœ€åŸå§‹çš„é˜»å¡ç½‘ç»œ I/Oï¼Œ å¦‚æœæœåŠ¡å™¨è¦æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯ï¼Œå…¶ä¸­æ¯”è¾ƒä¼ ç»Ÿçš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨<strong>å¤šè¿›ç¨‹æ¨¡å‹</strong>ï¼Œä¹Ÿå°±æ˜¯ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ†é…ä¸€ä¸ªè¿›ç¨‹æ¥å¤„ç†è¯·æ±‚ã€‚</p><p>æœåŠ¡å™¨çš„ä¸»è¿›ç¨‹è´Ÿè´£ç›‘å¬å®¢æˆ·çš„è¿æ¥ï¼Œä¸€æ—¦ä¸å®¢æˆ·ç«¯è¿æ¥å®Œæˆï¼Œaccept() å‡½æ•°å°±ä¼šè¿”å›ä¸€ä¸ªã€Œå·²è¿æ¥ Socketã€ï¼Œè¿™æ—¶å°±é€šè¿‡ <code>fork()</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå®é™…ä¸Šå°±æŠŠçˆ¶è¿›ç¨‹æ‰€æœ‰ç›¸å…³çš„ä¸œè¥¿éƒ½<strong>å¤åˆ¶</strong>ä¸€ä»½ï¼ŒåŒ…æ‹¬æ–‡ä»¶æè¿°ç¬¦ã€å†…å­˜åœ°å€ç©ºé—´ã€ç¨‹åºè®¡æ•°å™¨ã€æ‰§è¡Œçš„ä»£ç ç­‰ã€‚</p><p>è¿™ä¸¤ä¸ªè¿›ç¨‹åˆšå¤åˆ¶å®Œçš„æ—¶å€™ï¼Œå‡ ä¹ä¸€æ‘¸ä¸€æ ·ã€‚ä¸è¿‡ï¼Œä¼šæ ¹æ®<strong>è¿”å›å€¼</strong>æ¥åŒºåˆ†æ˜¯çˆ¶è¿›ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ï¼Œå¦‚æœè¿”å›å€¼æ˜¯ 0ï¼Œåˆ™æ˜¯å­è¿›ç¨‹ï¼›å¦‚æœè¿”å›å€¼æ˜¯å…¶ä»–çš„æ•´æ•°ï¼Œå°±æ˜¯çˆ¶è¿›ç¨‹ã€‚</p><p>æ­£å› ä¸ºå­è¿›ç¨‹ä¼š<strong>å¤åˆ¶çˆ¶è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦</strong>ï¼Œäºæ˜¯å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€Œå·²è¿æ¥ Socket ã€å’Œå®¢æˆ·ç«¯é€šä¿¡äº†ï¼Œ</p><p>å¯ä»¥å‘ç°ï¼Œå­è¿›ç¨‹ä¸éœ€è¦å…³å¿ƒã€Œç›‘å¬ Socketã€ï¼Œåªéœ€è¦å…³å¿ƒã€Œå·²è¿æ¥ Socketã€ï¼›çˆ¶è¿›ç¨‹åˆ™ç›¸åï¼Œå°†å®¢æˆ·æœåŠ¡äº¤ç»™å­è¿›ç¨‹æ¥å¤„ç†ï¼Œå› æ­¤çˆ¶è¿›ç¨‹ä¸éœ€è¦å…³å¿ƒã€Œå·²è¿æ¥ Socketã€ï¼Œåªéœ€è¦å…³å¿ƒã€Œç›‘å¬ Socketã€ã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾æè¿°äº†ä»è¿æ¥è¯·æ±‚åˆ°è¿æ¥å»ºç«‹ï¼Œçˆ¶è¿›ç¨‹åˆ›å»ºç”Ÿå­è¿›ç¨‹ä¸ºå®¢æˆ·æœåŠ¡ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220717163910297-723746bc.png" alt="image-20220717163910297" tabindex="0" loading="lazy"><figcaption>image-20220717163910297</figcaption></figure><p>å¦å¤–ï¼Œå½“ã€Œå­è¿›ç¨‹ã€é€€å‡ºæ—¶ï¼Œå®é™…ä¸Šå†…æ ¸é‡Œè¿˜ä¼šä¿ç•™è¯¥è¿›ç¨‹çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿæ˜¯ä¼šå ç”¨å†…å­˜çš„ï¼Œå¦‚æœä¸åšå¥½â€œå›æ”¶â€å·¥ä½œï¼Œå°±ä¼šå˜æˆ<strong>åƒµå°¸è¿›ç¨‹</strong>ï¼Œéšç€åƒµå°¸è¿›ç¨‹è¶Šå¤šï¼Œä¼šæ…¢æ…¢è€—å°½æˆ‘ä»¬çš„ç³»ç»Ÿèµ„æºã€‚</p><blockquote><p>ä¸€ä¸ªå­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦åœ¨å­è¿›ç¨‹é€€å‡ºæ—¶ä¸ä¼šé‡Šæ”¾ï¼Œåªæœ‰å½“çˆ¶è¿›ç¨‹é€šè¿‡ wait() æˆ– waitpid() è·å–äº†å­è¿›ç¨‹ä¿¡æ¯åæ‰ä¼šé‡Šæ”¾ã€‚å¦‚æœå­è¿›ç¨‹é€€å‡ºï¼Œè€Œçˆ¶è¿›ç¨‹å¹¶æ²¡æœ‰è°ƒç”¨ wait() æˆ– waitpid()ï¼Œé‚£ä¹ˆå­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦ä»ç„¶ä¿å­˜åœ¨ç³»ç»Ÿä¸­ï¼Œè¿™ç§è¿›ç¨‹ç§°ä¹‹ä¸ºåƒµå°¸è¿›ç¨‹ã€‚</p></blockquote><p>å› æ­¤ï¼Œçˆ¶è¿›ç¨‹è¦â€œå–„åâ€å¥½è‡ªå·±çš„å­©å­ï¼Œæ€ä¹ˆå–„åå‘¢ï¼Ÿé‚£ä¹ˆæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥åœ¨å­è¿›ç¨‹é€€å‡ºåå›æ”¶èµ„æºï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨ <code>wait()</code> å’Œ <code>waitpid()</code> å‡½æ•°ã€‚</p><p>è¿™ç§ç”¨å¤šä¸ªè¿›ç¨‹æ¥åº”ä»˜å¤šä¸ªå®¢æˆ·ç«¯çš„æ–¹å¼ï¼Œåœ¨åº”å¯¹ 100 ä¸ªå®¢æˆ·ç«¯è¿˜æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å½“å®¢æˆ·ç«¯æ•°é‡é«˜è¾¾ä¸€ä¸‡æ—¶ï¼Œè‚¯å®šæ‰›ä¸ä½çš„ï¼Œå› ä¸ºæ¯äº§ç”Ÿä¸€ä¸ªè¿›ç¨‹ï¼Œå¿…ä¼šå æ®ä¸€å®šçš„ç³»ç»Ÿèµ„æºï¼Œè€Œä¸”è¿›ç¨‹é—´ä¸Šä¸‹æ–‡åˆ‡æ¢çš„â€œåŒ…è¢±â€æ˜¯å¾ˆé‡çš„ï¼Œæ€§èƒ½ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚</p><p>è¿›ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸ä»…åŒ…å«äº†è™šæ‹Ÿå†…å­˜ã€æ ˆã€å…¨å±€å˜é‡ç­‰ç”¨æˆ·ç©ºé—´çš„èµ„æºï¼Œè¿˜åŒ…æ‹¬äº†å†…æ ¸å †æ ˆã€å¯„å­˜å™¨ç­‰å†…æ ¸ç©ºé—´çš„èµ„æºã€‚</p><h4 id="å¤šçº¿ç¨‹æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#å¤šçº¿ç¨‹æ¨¡å‹" aria-hidden="true">#</a> å¤šçº¿ç¨‹æ¨¡å‹</h4><p>æ—¢ç„¶è¿›ç¨‹é—´ä¸Šä¸‹æ–‡åˆ‡æ¢çš„â€œåŒ…è¢±â€å¾ˆé‡ï¼Œé‚£æˆ‘ä»¬å°±æä¸ªæ¯”è¾ƒè½»é‡çº§çš„æ¨¡å‹æ¥åº”å¯¹å¤šç”¨æˆ·çš„è¯·æ±‚ â€”â€” <strong>å¤šçº¿ç¨‹æ¨¡å‹</strong>ã€‚</p><p>çº¿ç¨‹æ˜¯è¿è¡Œåœ¨è¿›ç¨‹ä¸­çš„ä¸€ä¸ªâ€œé€»è¾‘æµâ€ï¼Œå•è¿›ç¨‹ä¸­å¯ä»¥è¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼ŒåŒè¿›ç¨‹é‡Œçš„çº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹çš„éƒ¨åˆ†èµ„æºçš„ï¼Œæ¯”å¦‚æ–‡ä»¶æè¿°ç¬¦åˆ—è¡¨ã€è¿›ç¨‹ç©ºé—´ã€ä»£ç ã€å…¨å±€æ•°æ®ã€å †ã€å…±äº«åº“ç­‰ï¼Œè¿™äº›å…±äº«äº›èµ„æºåœ¨ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶æ˜¯ä¸éœ€è¦åˆ‡æ¢ï¼Œè€Œåªéœ€è¦åˆ‡æ¢çº¿ç¨‹çš„ç§æœ‰æ•°æ®ã€å¯„å­˜å™¨ç­‰ä¸å…±äº«çš„æ•°æ®ï¼Œå› æ­¤åŒä¸€ä¸ªè¿›ç¨‹ä¸‹çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€è¦æ¯”è¿›ç¨‹å°å¾—å¤šã€‚</p><p>å½“æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ TCP å®Œæˆè¿æ¥åï¼Œé€šè¿‡ <code>pthread_create()</code> å‡½æ•°åˆ›å»ºçº¿ç¨‹ï¼Œç„¶åå°†ã€Œå·²è¿æ¥ Socketã€çš„æ–‡ä»¶æè¿°ç¬¦ä¼ é€’ç»™çº¿ç¨‹å‡½æ•°ï¼Œæ¥ç€åœ¨çº¿ç¨‹é‡Œå’Œå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ï¼Œä»è€Œè¾¾åˆ°å¹¶å‘å¤„ç†çš„ç›®çš„ã€‚</p><p>å¦‚æœæ¯æ¥ä¸€ä¸ªè¿æ¥å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹è¿è¡Œå®Œåï¼Œè¿˜å¾—æ“ä½œç³»ç»Ÿè¿˜å¾—é”€æ¯çº¿ç¨‹ï¼Œè™½è¯´çº¿ç¨‹åˆ‡æ¢çš„ä¸Šå†™æ–‡å¼€é”€ä¸å¤§ï¼Œä½†æ˜¯å¦‚æœé¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼Œç³»ç»Ÿå¼€é”€ä¹Ÿæ˜¯ä¸å°çš„ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>çº¿ç¨‹æ± </strong>çš„æ–¹å¼æ¥é¿å…çº¿ç¨‹çš„é¢‘ç¹åˆ›å»ºå’Œé”€æ¯ï¼Œæ‰€è°“çš„çº¿ç¨‹æ± ï¼Œå°±æ˜¯æå‰åˆ›å»ºè‹¥å¹²ä¸ªçº¿ç¨‹ï¼Œè¿™æ ·å½“ç”±æ–°è¿æ¥å»ºç«‹æ—¶ï¼Œå°†è¿™ä¸ªå·²è¿æ¥çš„ Socket æ”¾å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œç„¶åçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹è´Ÿè´£ä»é˜Ÿåˆ—ä¸­å–å‡ºå·²è¿æ¥ Socket è¿›ç¨‹å¤„ç†ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220717163933495-92b2f3d9.png" alt="image-20220717163933495" tabindex="0" loading="lazy"><figcaption>image-20220717163933495</figcaption></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªé˜Ÿåˆ—æ˜¯å…¨å±€çš„ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæ“ä½œï¼Œä¸ºäº†é¿å…å¤šçº¿ç¨‹ç«äº‰ï¼Œçº¿ç¨‹åœ¨æ“ä½œè¿™ä¸ªé˜Ÿåˆ—å‰è¦åŠ é”ã€‚</p><p>ä¸Šé¢åŸºäºè¿›ç¨‹æˆ–è€…çº¿ç¨‹æ¨¡å‹çš„ï¼Œå…¶å®è¿˜æ˜¯æœ‰é—®é¢˜çš„ã€‚æ–°åˆ°æ¥ä¸€ä¸ª TCP è¿æ¥ï¼Œå°±éœ€è¦åˆ†é…ä¸€ä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹ï¼Œé‚£ä¹ˆå¦‚æœè¦è¾¾åˆ° C10Kï¼Œæ„å‘³ç€è¦ä¸€å°æœºå™¨ç»´æŠ¤ 1 ä¸‡ä¸ªè¿æ¥ï¼Œç›¸å½“äºè¦ç»´æŠ¤ 1 ä¸‡ä¸ªè¿›ç¨‹/çº¿ç¨‹ï¼Œæ“ä½œç³»ç»Ÿå°±ç®—æ­»æ‰›ä¹Ÿæ˜¯æ‰›ä¸ä½çš„ã€‚</p><h4 id="i-o-å¤šè·¯å¤ç”¨" tabindex="-1"><a class="header-anchor" href="#i-o-å¤šè·¯å¤ç”¨" aria-hidden="true">#</a> I/O å¤šè·¯å¤ç”¨</h4><p>æ—¢ç„¶ä¸ºæ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªè¿›ç¨‹/çº¿ç¨‹çš„æ–¹å¼ä¸åˆé€‚ï¼Œé‚£æœ‰æ²¡æœ‰å¯èƒ½åªä½¿ç”¨ä¸€ä¸ªè¿›ç¨‹æ¥ç»´æŠ¤å¤šä¸ª Socket å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œé‚£å°±æ˜¯ <strong>I/O å¤šè·¯å¤ç”¨</strong>æŠ€æœ¯ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220717165055763-460c4ac9.png" alt="image-20220717165055763" tabindex="0" loading="lazy"><figcaption>image-20220717165055763</figcaption></figure><p>ä¸€ä¸ªè¿›ç¨‹è™½ç„¶ä»»ä¸€æ—¶åˆ»åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å¤„ç†æ¯ä¸ªè¯·æ±‚çš„äº‹ä»¶æ—¶ï¼Œè€—æ—¶æ§åˆ¶åœ¨ 1 æ¯«ç§’ä»¥å†…ï¼Œè¿™æ · 1 ç§’å†…å°±å¯ä»¥å¤„ç†ä¸Šåƒä¸ªè¯·æ±‚ï¼ŒæŠŠæ—¶é—´æ‹‰é•¿æ¥çœ‹ï¼Œå¤šä¸ªè¯·æ±‚å¤ç”¨äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™å°±æ˜¯å¤šè·¯å¤ç”¨ï¼Œè¿™ç§æ€æƒ³å¾ˆç±»ä¼¼ä¸€ä¸ª CPU å¹¶å‘å¤šä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥ä¹Ÿå«åšæ—¶åˆ†å¤šè·¯å¤ç”¨ã€‚</p><p>æˆ‘ä»¬ç†Ÿæ‚‰çš„ select/poll/epoll å†…æ ¸æä¾›ç»™ç”¨æˆ·æ€çš„å¤šè·¯å¤ç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œ<strong>è¿›ç¨‹å¯ä»¥é€šè¿‡ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨å‡½æ•°ä»å†…æ ¸ä¸­è·å–å¤šä¸ªäº‹ä»¶</strong>ã€‚</p><p>select/poll/epoll æ˜¯å¦‚ä½•è·å–ç½‘ç»œäº‹ä»¶çš„å‘¢ï¼Ÿåœ¨è·å–äº‹ä»¶æ—¶ï¼Œå…ˆæŠŠæ‰€æœ‰è¿æ¥ï¼ˆæ–‡ä»¶æè¿°ç¬¦ï¼‰ä¼ ç»™å†…æ ¸ï¼Œå†ç”±å†…æ ¸è¿”å›äº§ç”Ÿäº†äº‹ä»¶çš„è¿æ¥ï¼Œç„¶ååœ¨ç”¨æˆ·æ€ä¸­å†å¤„ç†è¿™äº›è¿æ¥å¯¹åº”çš„è¯·æ±‚å³å¯ã€‚</p><p>select/poll/epoll è¿™æ˜¯ä¸‰ä¸ªå¤šè·¯å¤ç”¨æ¥å£ï¼Œéƒ½èƒ½å®ç° C10K å—ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†åˆ«è¯´è¯´å®ƒä»¬ã€‚</p><h4 id="select-poll" tabindex="-1"><a class="header-anchor" href="#select-poll" aria-hidden="true">#</a> select/poll</h4><p>select å®ç°å¤šè·¯å¤ç”¨çš„æ–¹å¼æ˜¯ï¼Œå°†å·²è¿æ¥çš„ Socket éƒ½æ”¾åˆ°ä¸€ä¸ª<strong>æ–‡ä»¶æè¿°ç¬¦é›†åˆ</strong>ï¼Œç„¶åè°ƒç”¨ select å‡½æ•°å°†æ–‡ä»¶æè¿°ç¬¦é›†åˆ<strong>æ‹·è´</strong>åˆ°å†…æ ¸é‡Œï¼Œè®©å†…æ ¸æ¥æ£€æŸ¥æ˜¯å¦æœ‰ç½‘ç»œäº‹ä»¶äº§ç”Ÿï¼Œæ£€æŸ¥çš„æ–¹å¼å¾ˆç²—æš´ï¼Œå°±æ˜¯é€šè¿‡<strong>éå†</strong>æ–‡ä»¶æè¿°ç¬¦é›†åˆçš„æ–¹å¼ï¼Œå½“æ£€æŸ¥åˆ°æœ‰äº‹ä»¶äº§ç”Ÿåï¼Œå°†æ­¤ Socket æ ‡è®°ä¸ºå¯è¯»æˆ–å¯å†™ï¼Œ æ¥ç€å†æŠŠæ•´ä¸ªæ–‡ä»¶æè¿°ç¬¦é›†åˆ<strong>æ‹·è´</strong>å›ç”¨æˆ·æ€é‡Œï¼Œç„¶åç”¨æˆ·æ€è¿˜éœ€è¦å†é€šè¿‡<strong>éå†</strong>çš„æ–¹æ³•æ‰¾åˆ°å¯è¯»æˆ–å¯å†™çš„ Socketï¼Œç„¶åå†å¯¹å…¶å¤„ç†ã€‚</p><p>æ‰€ä»¥ï¼Œå¯¹äº select è¿™ç§æ–¹å¼ï¼Œéœ€è¦è¿›è¡Œ <strong>2 æ¬¡ã€Œéå†ã€æ–‡ä»¶æè¿°ç¬¦é›†åˆ</strong>ï¼Œä¸€æ¬¡æ˜¯åœ¨å†…æ ¸æ€é‡Œï¼Œä¸€ä¸ªæ¬¡æ˜¯åœ¨ç”¨æˆ·æ€é‡Œ ï¼Œè€Œä¸”è¿˜ä¼šå‘ç”Ÿ <strong>2 æ¬¡ã€Œæ‹·è´ã€æ–‡ä»¶æè¿°ç¬¦é›†åˆ</strong>ï¼Œå…ˆä»ç”¨æˆ·ç©ºé—´ä¼ å…¥å†…æ ¸ç©ºé—´ï¼Œç”±å†…æ ¸ä¿®æ”¹åï¼Œå†ä¼ å‡ºåˆ°ç”¨æˆ·ç©ºé—´ä¸­ã€‚</p><p>select ä½¿ç”¨å›ºå®šé•¿åº¦çš„ BitsMapï¼Œè¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œè€Œä¸”æ‰€æ”¯æŒçš„æ–‡ä»¶æè¿°ç¬¦çš„ä¸ªæ•°æ˜¯æœ‰é™åˆ¶çš„ï¼Œåœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”±å†…æ ¸ä¸­çš„ FD_SETSIZE é™åˆ¶ï¼Œ é»˜è®¤æœ€å¤§å€¼ä¸º <code>1024</code>ï¼Œåªèƒ½ç›‘å¬ 0~1023 çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>poll ä¸å†ç”¨ BitsMap æ¥å­˜å‚¨æ‰€å…³æ³¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå–è€Œä»£ä¹‹ç”¨åŠ¨æ€æ•°ç»„ï¼Œä»¥é“¾è¡¨å½¢å¼æ¥ç»„ç»‡ï¼Œçªç ´äº† select çš„æ–‡ä»¶æè¿°ç¬¦ä¸ªæ•°é™åˆ¶ï¼Œå½“ç„¶è¿˜ä¼šå—åˆ°ç³»ç»Ÿæ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚</p><p>ä½†æ˜¯ poll å’Œ select å¹¶æ²¡æœ‰å¤ªå¤§çš„æœ¬è´¨åŒºåˆ«ï¼Œ<strong>éƒ½æ˜¯ä½¿ç”¨ã€Œçº¿æ€§ç»“æ„ã€å­˜å‚¨è¿›ç¨‹å…³æ³¨çš„ Socket é›†åˆï¼Œå› æ­¤éƒ½éœ€è¦éå†æ–‡ä»¶æè¿°ç¬¦é›†åˆæ¥æ‰¾åˆ°å¯è¯»æˆ–å¯å†™çš„ Socketï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œè€Œä¸”ä¹Ÿéœ€è¦åœ¨ç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´æ‹·è´æ–‡ä»¶æè¿°ç¬¦é›†åˆ</strong>ï¼Œè¿™ç§æ–¹å¼éšç€å¹¶å‘æ•°ä¸Šæ¥ï¼Œæ€§èƒ½çš„æŸè€—ä¼šå‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚</p><h4 id="epoll" tabindex="-1"><a class="header-anchor" href="#epoll" aria-hidden="true">#</a> epoll</h4><p>å…ˆå¤ä¹ ä¸‹ epoll çš„ç”¨æ³•ã€‚å¦‚ä¸‹çš„ä»£ç ä¸­ï¼Œå…ˆç”¨epoll_create åˆ›å»ºä¸€ä¸ª epollå¯¹è±¡ epfdï¼Œå†é€šè¿‡ epoll_ctl å°†éœ€è¦ç›‘è§†çš„ socket æ·»åŠ åˆ°epfdä¸­ï¼Œæœ€åè°ƒç”¨ epoll_wait ç­‰å¾…æ•°æ®ã€‚</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token function">socket</span><span class="token punctuation">(</span>AF_INET<span class="token punctuation">,</span> SOCK_STREAM<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bind</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">listen</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token keyword">int</span> epfd <span class="token operator">=</span> <span class="token function">epoll_create</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">epoll_ctl</span><span class="token punctuation">(</span>epfd<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å°†æ‰€æœ‰éœ€è¦ç›‘å¬çš„socketæ·»åŠ åˆ°epfdä¸­</span>

<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">epoll_wait</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>æ¥æ”¶åˆ°æ•°æ®çš„socket<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//å¤„ç†</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>epoll é€šè¿‡ä¸¤ä¸ªæ–¹é¢ï¼Œå¾ˆå¥½è§£å†³äº† select/poll çš„é—®é¢˜ã€‚</p><p><em>ç¬¬ä¸€ç‚¹</em>ï¼Œepoll åœ¨å†…æ ¸é‡Œä½¿ç”¨<strong>çº¢é»‘æ ‘æ¥è·Ÿè¸ªè¿›ç¨‹æ‰€æœ‰å¾…æ£€æµ‹çš„æ–‡ä»¶æè¿°å­—</strong>ï¼ŒæŠŠéœ€è¦ç›‘æ§çš„ socket é€šè¿‡ <code>epoll_ctl()</code> å‡½æ•°åŠ å…¥å†…æ ¸ä¸­çš„çº¢é»‘æ ‘é‡Œï¼Œçº¢é»‘æ ‘æ˜¯ä¸ªé«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå¢åˆ æ”¹ä¸€èˆ¬æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(logn)</code>ã€‚è€Œ select/poll å†…æ ¸é‡Œæ²¡æœ‰ç±»ä¼¼ epoll çº¢é»‘æ ‘è¿™ç§ä¿å­˜æ‰€æœ‰å¾…æ£€æµ‹çš„ socket çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥ select/poll æ¯æ¬¡æ“ä½œæ—¶éƒ½ä¼ å…¥æ•´ä¸ª socket é›†åˆç»™å†…æ ¸ï¼Œè€Œ epoll å› ä¸ºåœ¨å†…æ ¸ç»´æŠ¤äº†çº¢é»‘æ ‘ï¼Œå¯ä»¥ä¿å­˜æ‰€æœ‰å¾…æ£€æµ‹çš„ socket ï¼Œæ‰€ä»¥åªéœ€è¦ä¼ å…¥ä¸€ä¸ªå¾…æ£€æµ‹çš„ socketï¼Œå‡å°‘äº†å†…æ ¸å’Œç”¨æˆ·ç©ºé—´å¤§é‡çš„æ•°æ®æ‹·è´å’Œå†…å­˜åˆ†é…ã€‚</p><p><em>ç¬¬äºŒç‚¹</em>ï¼Œ epoll ä½¿ç”¨<strong>äº‹ä»¶é©±åŠ¨</strong>çš„æœºåˆ¶ï¼Œå†…æ ¸é‡Œ<strong>ç»´æŠ¤äº†ä¸€ä¸ªé“¾è¡¨æ¥è®°å½•å°±ç»ªäº‹ä»¶</strong>ï¼Œå½“æŸä¸ª socket æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé€šè¿‡<strong>å›è°ƒå‡½æ•°</strong>å†…æ ¸ä¼šå°†å…¶åŠ å…¥åˆ°è¿™ä¸ªå°±ç»ªäº‹ä»¶åˆ—è¡¨ä¸­ï¼Œå½“ç”¨æˆ·è°ƒç”¨ <code>epoll_wait()</code> å‡½æ•°æ—¶ï¼Œåªä¼šè¿”å›æœ‰äº‹ä»¶å‘ç”Ÿçš„æ–‡ä»¶æè¿°ç¬¦çš„ä¸ªæ•°ï¼Œä¸éœ€è¦åƒ select/poll é‚£æ ·è½®è¯¢æ‰«ææ•´ä¸ª socket é›†åˆï¼Œå¤§å¤§æé«˜äº†æ£€æµ‹çš„æ•ˆç‡ã€‚</p><p>ä»ä¸‹å›¾ä½ å¯ä»¥çœ‹åˆ° epoll ç›¸å…³çš„æ¥å£ä½œç”¨ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220717165140152-095d4b3b.png" alt="image-20220717165140152" tabindex="0" loading="lazy"><figcaption>image-20220717165140152</figcaption></figure><p>epoll çš„æ–¹å¼å³ä½¿ç›‘å¬çš„ Socket æ•°é‡è¶Šå¤šçš„æ—¶å€™ï¼Œæ•ˆç‡ä¸ä¼šå¤§å¹…åº¦é™ä½ï¼Œèƒ½å¤ŸåŒæ—¶ç›‘å¬çš„ Socket çš„æ•°ç›®ä¹Ÿéå¸¸çš„å¤šäº†ï¼Œä¸Šé™å°±ä¸ºç³»ç»Ÿå®šä¹‰çš„è¿›ç¨‹æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦ä¸ªæ•°ã€‚å› è€Œï¼Œ<strong>epoll è¢«ç§°ä¸ºè§£å†³ C10K é—®é¢˜çš„åˆ©å™¨</strong>ã€‚</p><p>æ’ä¸ªé¢˜å¤–è¯ï¼Œç½‘ä¸Šæ–‡ç« ä¸å°‘è¯´ï¼Œ<code>epoll_wait</code> è¿”å›æ—¶ï¼Œå¯¹äºå°±ç»ªçš„äº‹ä»¶ï¼Œepoll ä½¿ç”¨çš„æ˜¯å…±äº«å†…å­˜çš„æ–¹å¼ï¼Œå³ç”¨æˆ·æ€å’Œå†…æ ¸æ€éƒ½æŒ‡å‘äº†å°±ç»ªé“¾è¡¨ï¼Œæ‰€ä»¥å°±é¿å…äº†å†…å­˜æ‹·è´æ¶ˆè€—ã€‚</p><p>è¿™æ˜¯é”™çš„ï¼çœ‹è¿‡ epoll å†…æ ¸æºç çš„éƒ½çŸ¥é“ï¼Œ<strong>å‹æ ¹å°±æ²¡æœ‰ä½¿ç”¨å…±äº«å†…å­˜è¿™ä¸ªç©æ„</strong>ã€‚ä½ å¯ä»¥ä»ä¸‹é¢è¿™ä»½ä»£ç çœ‹åˆ°ï¼Œ epoll_wait å®ç°çš„å†…æ ¸ä»£ç ä¸­è°ƒç”¨äº† <code>__put_user</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯å°†æ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220717165148621-b0f31e3b.png" alt="image-20220717165148621" tabindex="0" loading="lazy"><figcaption>image-20220717165148621</figcaption></figure><h5 id="è¾¹ç¼˜è§¦å‘å’Œæ°´å¹³è§¦å‘" tabindex="-1"><a class="header-anchor" href="#è¾¹ç¼˜è§¦å‘å’Œæ°´å¹³è§¦å‘" aria-hidden="true">#</a> è¾¹ç¼˜è§¦å‘å’Œæ°´å¹³è§¦å‘</h5><p>è¿™ä¸¤ä¸ªæœ¯è¯­è¿˜æŒºæŠ½è±¡çš„ï¼Œå…¶å®å®ƒä»¬çš„åŒºåˆ«è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ã€‚</p><ul><li>ä½¿ç”¨è¾¹ç¼˜è§¦å‘æ¨¡å¼æ—¶ï¼Œå½“è¢«ç›‘æ§çš„ Socket æè¿°ç¬¦ä¸Šæœ‰å¯è¯»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ<strong>æœåŠ¡å™¨ç«¯åªä¼šä» epoll_wait ä¸­è‹é†’ä¸€æ¬¡</strong>ï¼Œå³ä½¿è¿›ç¨‹æ²¡æœ‰è°ƒç”¨ read å‡½æ•°ä»å†…æ ¸è¯»å–æ•°æ®ï¼Œä¹Ÿä¾ç„¶åªè‹é†’ä¸€æ¬¡ï¼Œå› æ­¤æˆ‘ä»¬ç¨‹åºè¦ä¿è¯ä¸€æ¬¡æ€§å°†å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®è¯»å–å®Œï¼›</li><li>ä½¿ç”¨æ°´å¹³è§¦å‘æ¨¡å¼æ—¶ï¼Œå½“è¢«ç›‘æ§çš„ Socket ä¸Šæœ‰å¯è¯»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ<strong>æœåŠ¡å™¨ç«¯ä¸æ–­åœ°ä» epoll_wait ä¸­è‹é†’ï¼Œç›´åˆ°å†…æ ¸ç¼“å†²åŒºæ•°æ®è¢« read å‡½æ•°è¯»å®Œæ‰ç»“æŸ</strong>ï¼Œç›®çš„æ˜¯å‘Šè¯‰æˆ‘ä»¬æœ‰æ•°æ®éœ€è¦è¯»å–ï¼›</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼Œä½ çš„å¿«é€’è¢«æ”¾åˆ°äº†ä¸€ä¸ªå¿«é€’ç®±é‡Œï¼Œå¦‚æœå¿«é€’ç®±åªä¼šé€šè¿‡çŸ­ä¿¡é€šçŸ¥ä½ ä¸€æ¬¡ï¼Œå³ä½¿ä½ ä¸€ç›´æ²¡æœ‰å»å–ï¼Œå®ƒä¹Ÿä¸ä¼šå†å‘é€ç¬¬äºŒæ¡çŸ­ä¿¡æé†’ä½ ï¼Œè¿™ä¸ªæ–¹å¼å°±æ˜¯è¾¹ç¼˜è§¦å‘ï¼›å¦‚æœå¿«é€’ç®±å‘ç°ä½ çš„å¿«é€’æ²¡æœ‰è¢«å–å‡ºï¼Œå®ƒå°±ä¼šä¸åœåœ°å‘çŸ­ä¿¡é€šçŸ¥ä½ ï¼Œç›´åˆ°ä½ å–å‡ºäº†å¿«é€’ï¼Œå®ƒæ‰æ¶ˆåœï¼Œè¿™ä¸ªå°±æ˜¯æ°´å¹³è§¦å‘çš„æ–¹å¼ã€‚</p><p>è¿™å°±æ˜¯ä¸¤è€…çš„åŒºåˆ«ï¼Œæ°´å¹³è§¦å‘çš„æ„æ€æ˜¯åªè¦æ»¡è¶³äº‹ä»¶çš„æ¡ä»¶ï¼Œæ¯”å¦‚å†…æ ¸ä¸­æœ‰æ•°æ®éœ€è¦è¯»ï¼Œå°±ä¸€ç›´ä¸æ–­åœ°æŠŠè¿™ä¸ªäº‹ä»¶ä¼ é€’ç»™ç”¨æˆ·ï¼›è€Œè¾¹ç¼˜è§¦å‘çš„æ„æ€æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡æ»¡è¶³æ¡ä»¶çš„æ—¶å€™æ‰è§¦å‘ï¼Œä¹‹åå°±ä¸ä¼šå†ä¼ é€’åŒæ ·çš„äº‹ä»¶äº†ã€‚</p><p>å¦‚æœä½¿ç”¨æ°´å¹³è§¦å‘æ¨¡å¼ï¼Œå½“å†…æ ¸é€šçŸ¥æ–‡ä»¶æè¿°ç¬¦å¯è¯»å†™æ—¶ï¼Œæ¥ä¸‹æ¥è¿˜å¯ä»¥ç»§ç»­å»æ£€æµ‹å®ƒçš„çŠ¶æ€ï¼Œçœ‹å®ƒæ˜¯å¦ä¾ç„¶å¯è¯»æˆ–å¯å†™ã€‚æ‰€ä»¥åœ¨æ”¶åˆ°é€šçŸ¥åï¼Œæ²¡å¿…è¦ä¸€æ¬¡æ‰§è¡Œå°½å¯èƒ½å¤šçš„è¯»å†™æ“ä½œã€‚</p><p>å¦‚æœä½¿ç”¨è¾¹ç¼˜è§¦å‘æ¨¡å¼ï¼ŒI/O äº‹ä»¶å‘ç”Ÿæ—¶åªä¼šé€šçŸ¥ä¸€æ¬¡ï¼Œè€Œä¸”æˆ‘ä»¬ä¸çŸ¥é“åˆ°åº•èƒ½è¯»å†™å¤šå°‘æ•°æ®ï¼Œæ‰€ä»¥åœ¨æ”¶åˆ°é€šçŸ¥ååº”å°½å¯èƒ½åœ°è¯»å†™æ•°æ®ï¼Œä»¥å…é”™å¤±è¯»å†™çš„æœºä¼šã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¼š<strong>å¾ªç¯</strong>ä»æ–‡ä»¶æè¿°ç¬¦è¯»å†™æ•°æ®ï¼Œé‚£ä¹ˆå¦‚æœæ–‡ä»¶æè¿°ç¬¦æ˜¯é˜»å¡çš„ï¼Œæ²¡æœ‰æ•°æ®å¯è¯»å†™æ—¶ï¼Œè¿›ç¨‹ä¼šé˜»å¡åœ¨è¯»å†™å‡½æ•°é‚£é‡Œï¼Œç¨‹åºå°±æ²¡åŠæ³•ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚æ‰€ä»¥ï¼Œ<strong>è¾¹ç¼˜è§¦å‘æ¨¡å¼ä¸€èˆ¬å’Œéé˜»å¡ I/O æ­é…ä½¿ç”¨</strong>ï¼Œç¨‹åºä¼šä¸€ç›´æ‰§è¡Œ I/O æ“ä½œï¼Œç›´åˆ°ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ <code>read</code> å’Œ <code>write</code>ï¼‰è¿”å›é”™è¯¯ï¼Œé”™è¯¯ç±»å‹ä¸º <code>EAGAIN</code> æˆ– <code>EWOULDBLOCK</code>ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¾¹ç¼˜è§¦å‘çš„æ•ˆç‡æ¯”æ°´å¹³è§¦å‘çš„æ•ˆç‡è¦é«˜ï¼Œå› ä¸ºè¾¹ç¼˜è§¦å‘å¯ä»¥å‡å°‘ epoll_wait çš„ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ï¼Œç³»ç»Ÿè°ƒç”¨ä¹Ÿæ˜¯æœ‰ä¸€å®šçš„å¼€é”€çš„çš„ï¼Œæ¯•ç«Ÿä¹Ÿå­˜åœ¨ä¸Šä¸‹æ–‡çš„åˆ‡æ¢ã€‚</p><p>select/poll åªæœ‰æ°´å¹³è§¦å‘æ¨¡å¼ï¼Œepoll é»˜è®¤çš„è§¦å‘æ¨¡å¼æ˜¯æ°´å¹³è§¦å‘ï¼Œä½†æ˜¯å¯ä»¥æ ¹æ®åº”ç”¨åœºæ™¯è®¾ç½®ä¸ºè¾¹ç¼˜è§¦å‘æ¨¡å¼ã€‚</p><p>å¦å¤–ï¼Œä½¿ç”¨ I/O å¤šè·¯å¤ç”¨æ—¶ï¼Œæœ€å¥½æ­é…éé˜»å¡ I/O ä¸€èµ·ä½¿ç”¨ï¼ŒLinux æ‰‹å†Œå…³äº select çš„å†…å®¹ä¸­æœ‰å¦‚ä¸‹è¯´æ˜ï¼š</p><blockquote><p>Under Linux, select() may report a socket file descriptor as &quot;ready for reading&quot;, while nevertheless a subsequent read blocks. This could for example happen when data has arrived but upon examination has wrong checksum and is discarded. There may be other circumstances in which a file descriptor is spuriously reported as ready. Thus it may be safer to use O_NONBLOCK on sockets that should not block.</p></blockquote><p>æˆ‘è°·æ­Œç¿»è¯‘çš„ç»“æœï¼š</p><blockquote><p>åœ¨Linuxä¸‹ï¼Œselect() å¯èƒ½ä¼šå°†ä¸€ä¸ª socket æ–‡ä»¶æè¿°ç¬¦æŠ¥å‘Šä¸º &quot;å‡†å¤‡è¯»å–&quot;ï¼Œè€Œåç»­çš„è¯»å–å—å´æ²¡æœ‰ã€‚ä¾‹å¦‚ï¼Œå½“æ•°æ®å·²ç»åˆ°è¾¾ï¼Œä½†ç»æ£€æŸ¥åå‘ç°æœ‰é”™è¯¯çš„æ ¡éªŒå’Œè€Œè¢«ä¸¢å¼ƒæ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ä¹Ÿæœ‰å¯èƒ½åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œæ–‡ä»¶æè¿°ç¬¦è¢«é”™è¯¯åœ°æŠ¥å‘Šä¸ºå°±ç»ªã€‚å› æ­¤ï¼Œåœ¨ä¸åº”è¯¥é˜»å¡çš„ socket ä¸Šä½¿ç”¨ O_NONBLOCK å¯èƒ½æ›´å®‰å…¨ã€‚</p></blockquote><p>ç®€å•ç‚¹ç†è§£ï¼Œå°±æ˜¯<strong>å¤šè·¯å¤ç”¨ API è¿”å›çš„äº‹ä»¶å¹¶ä¸ä¸€å®šå¯è¯»å†™çš„</strong>ï¼Œå¦‚æœä½¿ç”¨é˜»å¡ I/Oï¼Œ é‚£ä¹ˆåœ¨è°ƒç”¨ read/write æ—¶åˆ™ä¼šå‘ç”Ÿç¨‹åºé˜»å¡ï¼Œå› æ­¤æœ€å¥½æ­é…éé˜»å¡ I/Oï¼Œä»¥ä¾¿åº”å¯¹æå°‘æ•°çš„ç‰¹æ®Šæƒ…å†µã€‚</p><h4 id="æ€»ç»“-1" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-1" aria-hidden="true">#</a> æ€»ç»“</h4><p>æœ€åŸºç¡€çš„ TCP çš„ Socket ç¼–ç¨‹ï¼Œå®ƒæ˜¯é˜»å¡ I/O æ¨¡å‹ï¼ŒåŸºæœ¬ä¸Šåªèƒ½ä¸€å¯¹ä¸€é€šä¿¡ï¼Œé‚£ä¸ºäº†æœåŠ¡æ›´å¤šçš„å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬éœ€è¦æ”¹è¿›ç½‘ç»œ I/O æ¨¡å‹ã€‚</p><p>æ¯”è¾ƒä¼ ç»Ÿçš„æ–¹å¼æ˜¯ä½¿ç”¨å¤šè¿›ç¨‹/çº¿ç¨‹æ¨¡å‹ï¼Œæ¯æ¥ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼Œå°±åˆ†é…ä¸€ä¸ªè¿›ç¨‹/çº¿ç¨‹ï¼Œç„¶ååç»­çš„è¯»å†™éƒ½åœ¨å¯¹åº”çš„è¿›ç¨‹/çº¿ç¨‹ï¼Œè¿™ç§æ–¹å¼å¤„ç† 100 ä¸ªå®¢æˆ·ç«¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯å½“å®¢æˆ·ç«¯å¢å¤§åˆ° 10000 ä¸ªæ—¶ï¼Œ10000 ä¸ªè¿›ç¨‹/çº¿ç¨‹çš„è°ƒåº¦ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ä»¥åŠå®ƒä»¬å ç”¨çš„å†…å­˜ï¼Œéƒ½ä¼šæˆä¸ºç“¶é¢ˆã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œå°±å‡ºç°äº† I/O çš„å¤šè·¯å¤ç”¨ï¼Œå¯ä»¥åªåœ¨ä¸€ä¸ªè¿›ç¨‹é‡Œå¤„ç†å¤šä¸ªæ–‡ä»¶çš„ I/Oï¼ŒLinux ä¸‹æœ‰ä¸‰ç§æä¾› I/O å¤šè·¯å¤ç”¨çš„ APIï¼Œåˆ†åˆ«æ˜¯ï¼š selectã€pollã€epollã€‚</p><p>select å’Œ poll å¹¶æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œå®ƒä»¬å†…éƒ¨éƒ½æ˜¯ä½¿ç”¨ã€Œçº¿æ€§ç»“æ„ã€æ¥å­˜å‚¨è¿›ç¨‹å…³æ³¨çš„ Socket é›†åˆã€‚</p><p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦æŠŠå…³æ³¨çš„ Socket é›†åˆé€šè¿‡ select/poll ç³»ç»Ÿè°ƒç”¨ä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œç„¶åç”±å†…æ ¸æ£€æµ‹äº‹ä»¶ï¼Œå½“æœ‰ç½‘ç»œäº‹ä»¶äº§ç”Ÿæ—¶ï¼Œå†…æ ¸éœ€è¦éå†è¿›ç¨‹å…³æ³¨ Socket é›†åˆï¼Œæ‰¾åˆ°å¯¹åº”çš„ Socketï¼Œå¹¶è®¾ç½®å…¶çŠ¶æ€ä¸ºå¯è¯»/å¯å†™ï¼Œç„¶åæŠŠæ•´ä¸ª Socket é›†åˆä»å†…æ ¸æ€æ‹·è´åˆ°ç”¨æˆ·æ€ï¼Œç”¨æˆ·æ€è¿˜è¦ç»§ç»­éå†æ•´ä¸ª Socket é›†åˆæ‰¾åˆ°å¯è¯»/å¯å†™çš„ Socketï¼Œç„¶åå¯¹å…¶å¤„ç†ã€‚</p><p>å¾ˆæ˜æ˜¾å‘ç°ï¼Œselect å’Œ poll çš„ç¼ºé™·åœ¨äºï¼Œå½“å®¢æˆ·ç«¯è¶Šå¤šï¼Œä¹Ÿå°±æ˜¯ Socket é›†åˆè¶Šå¤§ï¼ŒSocket é›†åˆçš„éå†å’Œæ‹·è´ä¼šå¸¦æ¥å¾ˆå¤§çš„å¼€é”€ï¼Œå› æ­¤ä¹Ÿå¾ˆéš¾åº”å¯¹ C10Kã€‚</p><p>epoll æ˜¯è§£å†³ C10K é—®é¢˜çš„åˆ©å™¨ï¼Œé€šè¿‡ä¸¤ä¸ªæ–¹é¢è§£å†³äº† select/poll çš„é—®é¢˜ã€‚</p><ul><li>epoll åœ¨å†…æ ¸é‡Œä½¿ç”¨ã€Œçº¢é»‘æ ‘ã€æ¥å…³æ³¨è¿›ç¨‹æ‰€æœ‰å¾…æ£€æµ‹çš„ Socketï¼Œçº¢é»‘æ ‘æ˜¯ä¸ªé«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå¢åˆ æ”¹ä¸€èˆ¬æ—¶é—´å¤æ‚åº¦æ˜¯ O(logn)ï¼Œé€šè¿‡å¯¹è¿™æ£µé»‘çº¢æ ‘çš„ç®¡ç†ï¼Œä¸éœ€è¦åƒ select/poll åœ¨æ¯æ¬¡æ“ä½œæ—¶éƒ½ä¼ å…¥æ•´ä¸ª Socket é›†åˆï¼Œå‡å°‘äº†å†…æ ¸å’Œç”¨æˆ·ç©ºé—´å¤§é‡çš„æ•°æ®æ‹·è´å’Œå†…å­˜åˆ†é…ã€‚</li><li>epoll ä½¿ç”¨äº‹ä»¶é©±åŠ¨çš„æœºåˆ¶ï¼Œå†…æ ¸é‡Œç»´æŠ¤äº†ä¸€ä¸ªã€Œé“¾è¡¨ã€æ¥è®°å½•å°±ç»ªäº‹ä»¶ï¼Œåªå°†æœ‰äº‹ä»¶å‘ç”Ÿçš„ Socket é›†åˆä¼ é€’ç»™åº”ç”¨ç¨‹åºï¼Œä¸éœ€è¦åƒ select/poll é‚£æ ·è½®è¯¢æ‰«ææ•´ä¸ªé›†åˆï¼ˆåŒ…å«æœ‰å’Œæ— äº‹ä»¶çš„ Socket ï¼‰ï¼Œå¤§å¤§æé«˜äº†æ£€æµ‹çš„æ•ˆç‡ã€‚</li></ul><p>è€Œä¸”ï¼Œepoll æ”¯æŒè¾¹ç¼˜è§¦å‘å’Œæ°´å¹³è§¦å‘çš„æ–¹å¼ï¼Œè€Œ select/poll åªæ”¯æŒæ°´å¹³è§¦å‘ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œè¾¹ç¼˜è§¦å‘çš„æ–¹å¼ä¼šæ¯”æ°´å¹³è§¦å‘çš„æ•ˆç‡é«˜ã€‚</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/edit/main/demo/theme-docs/src/Java/eightpart/system.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 542716863@qq.com">RrOrange</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/Computer-Science-Learn-Notes/Java/eightpart/network.html" class="nav-link prev" aria-label="è®¡ç®—æœºç½‘ç»œ"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->è®¡ç®—æœºç½‘ç»œ</div></a><a href="/Computer-Science-Learn-Notes/Java/eightpart/datastruct.html" class="nav-link next" aria-label="æ•°æ®ç»“æ„"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">æ•°æ®ç»“æ„<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2023 zhiyu1998</div></footer></div><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/Computer-Science-Learn-Notes/assets/app-66c72b60.js" defer></script>
  </body>
</html>
