<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/Java/eightpart/distribution.html"><meta property="og:title" content="åˆ†å¸ƒå¼"><meta property="og:description" content="ğŸ”— åˆ†å¸ƒå¼ ç†è®ºåŸºç¡€ CAPç†è®º CAP ç†è®º/å®šç†èµ·æºäº 2000å¹´ï¼Œç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡çš„Eric Breweræ•™æˆåœ¨åˆ†å¸ƒå¼è®¡ç®—åŸç†ç ”è®¨ä¼šï¼ˆPODCï¼‰ä¸Šæå‡ºï¼Œå› æ­¤ CAPå®šç†åˆè¢«ç§°ä½œ å¸ƒé²å°”å®šç†ï¼ˆBrewerâ€™s theoremï¼‰ 2å¹´åï¼Œéº»çœç†å·¥å­¦é™¢çš„Seth Gilbertå’ŒNancy Lynch å‘è¡¨äº†å¸ƒé²å°”çŒœæƒ³çš„è¯æ˜ï¼ŒCAPç†è®ºæ­£å¼æˆä¸ºåˆ†..."><meta property="og:type" content="article"><meta property="og:image" content="https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-04-04T17:31:51.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="åˆ†å¸ƒå¼"><meta property="article:author" content="zhiyu1998"><meta property="article:modified_time" content="2023-04-04T17:31:51.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"åˆ†å¸ƒå¼","image":["https://zhiyu1998.github.io/Computer-Science-Learn-Notes/Computer-Science-Learn-Notes/"],"dateModified":"2023-04-04T17:31:51.000Z","author":[{"@type":"Person","name":"zhiyu1998"}]}</script><link rel="manifest" href="/Computer-Science-Learn-Notes/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>åˆ†å¸ƒå¼</title><meta name="description" content="ğŸ”— åˆ†å¸ƒå¼ ç†è®ºåŸºç¡€ CAPç†è®º CAP ç†è®º/å®šç†èµ·æºäº 2000å¹´ï¼Œç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡çš„Eric Breweræ•™æˆåœ¨åˆ†å¸ƒå¼è®¡ç®—åŸç†ç ”è®¨ä¼šï¼ˆPODCï¼‰ä¸Šæå‡ºï¼Œå› æ­¤ CAPå®šç†åˆè¢«ç§°ä½œ å¸ƒé²å°”å®šç†ï¼ˆBrewerâ€™s theoremï¼‰ 2å¹´åï¼Œéº»çœç†å·¥å­¦é™¢çš„Seth Gilbertå’ŒNancy Lynch å‘è¡¨äº†å¸ƒé²å°”çŒœæƒ³çš„è¯æ˜ï¼ŒCAPç†è®ºæ­£å¼æˆä¸ºåˆ†...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/Computer-Science-Learn-Notes/assets/style-1866b779.css" as="style"><link rel="stylesheet" href="/Computer-Science-Learn-Notes/assets/style-1866b779.css">
    <link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/app-66c72b60.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/framework-afce0fe7.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/distribution.html-d27d659c.js"><link rel="modulepreload" href="/Computer-Science-Learn-Notes/assets/distribution.html-37fe1b25.js"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-27ae749c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/slides.html-0f261d40.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/datastruct.html-814f91bc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/learnInProblem.html-e2624bd5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-0c8d2f60.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/disable.html-ff8b473a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/encrypt.html-9fbca9c6.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/markdown.html-55bc9907.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/page.html-0e7ead7d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/personal_tech.html-3bc8c638.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/rent_house.html-23504880.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/basic.html-2311c034.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/concurrent.html-ada5aaea.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/concurrency.html-e7bc6f0b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/datastruct.html-881ce9de.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/foundation.html-bf4e15fb.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/giant.html-42c6a59e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/intelligenceQuestion.html-bd2292b3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/intro.html-fffd0865.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/messageQueue.html-278edcbd.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/mysql.html-f5b0f716.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/netty.html-c94bbb94.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/network.html-05853173.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/redis.html-34355bf8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/spring.html-5502b472.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/system.html-7b8bb171.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/think.html-7aaeaa58.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/virtualMachine.html-3e875324.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/Mybatis.html-49e400d9.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/Spring.html-e43fb86b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringBoot.html-6059d383.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringCloud.html-76a4f205.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringDataJpa.html-7952c7e4.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringMVC.html-9cedf7ca.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringSecurity.html-477b5769.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/kotlin.html-434e1c2b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/leetcode.html-6e6af564.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/react.html-e22168ca.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/typescript.html-73dbe6d5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/vue.html-b29ea4f2.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/1.ç®€ä»‹.html-1e536036.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10.å¯¹è±¡çš„å®ä¾‹åŒ–å†…å­˜å¸ƒå±€ä¸è®¿é—®å®šä½.html-733d51ee.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/11.ç›´æ¥å†…å­˜.html-cd6f6114.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/12.æ‰§è¡Œå¼•æ“.html-24baab50.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/13.StringTable.html-1bd92712.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/14.åƒåœ¾å›æ”¶æ¦‚è¿°.html-effe5d94.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/15.åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•.html-b029208d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/16.åƒåœ¾å›æ”¶ç›¸å…³æ¦‚å¿µ.html-9a13bda3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/17-åƒåœ¾å›æ”¶å™¨.html-a8ddf178.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/2.ç±»åŠ è½½å­ç³»ç»Ÿ.html-345d10bb.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/3.è¿è¡Œæ—¶æ•°æ®åŒº.html-157299af.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/4.ç¨‹åºè®¡æ•°å™¨ï¼ˆPCå¯„å­˜å™¨ï¼‰.html-5efab972.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/5.è™šæ‹Ÿæœºæ ˆ.html-83dc9801.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/6.æœ¬åœ°æ–¹æ³•æ¥å£.html-effcee7e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/7.æœ¬åœ°æ–¹æ³•æ ˆ.html-aa08dac1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/8.å †.html-2be9fba4.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/9.æ–¹æ³•åŒº.html-9a92dbe7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/03-æ•°ç»„ä¸­é‡å¤çš„æ•°å­—.html-4aecb229.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/04-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾.html-33c8a326.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/05-æ›¿æ¢ç©ºæ ¼.html-731ec847.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/09-ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—.html-64aa068b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10-I.æ–æ³¢é‚£å¥‘æ•°åˆ—.html-21f0bbc7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10-IIé’è›™è·³å°é˜¶é—®é¢˜.html-5936af63.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/11-æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—.html-8ecdda63.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/12-çŸ©é˜µä¸­çš„è·¯å¾„.html-9b2fd662.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/13-æœºå™¨äººçš„è¿åŠ¨èŒƒå›´.html-32d9b38a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/14-å‰ªç»³å­.html-e21a6ec0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/15-äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°.html-97ba661d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/16-æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹.html-e2b3eebc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/17-æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°.html-0f115655.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/18-åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹.html-a1ceedab.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/22-é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹.html-459571cf.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/24-åè½¬é“¾è¡¨.html-92de2c0d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/25-åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨.html-56752d60.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/26-æ ‘çš„å­ç»“æ„.html-1319ff49.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/27-äºŒå‰æ ‘çš„é•œåƒ.html-d20c02c1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/28-å¯¹ç§°çš„äºŒå‰æ ‘.html-187d456e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/58-II å·¦æ—‹è½¬å­—ç¬¦ä¸².html-713e6be0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/å¸¸ç”¨æ–¹æ³•å°è£…åˆé›†.html-af0be8af.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/404.html-75fcb8ce.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-039ed2dc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-c13a7958.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-986cbfb0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-58c0e762.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-dc2c74b8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-a146e343.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-297716ff.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-f08ea5cf.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-cf1c7cba.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-4187abed.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-6de5662b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-90d0a7cf.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-c6c0348e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-50cf6287.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-9bd6aad5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-d4518628.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-2016f3b0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-ba00b820.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/slides.html-a991af2c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/datastruct.html-7308e003.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/learnInProblem.html-7f04200b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-c34e5275.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/disable.html-d972dbc6.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/encrypt.html-4170437a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/markdown.html-61862a67.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/page.html-67d96e22.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/personal_tech.html-5568dee3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/rent_house.html-1e0dd4dc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/basic.html-18911cb1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/concurrent.html-2c57d1b2.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/concurrency.html-afad628e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/datastruct.html-6bc5abf5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/foundation.html-85a0e08b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/giant.html-3eed9986.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/intelligenceQuestion.html-482d99cd.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/intro.html-34111fe3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/messageQueue.html-f1cfd3be.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/mysql.html-4788adf8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/netty.html-58c97bb7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/network.html-264ac01e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/redis.html-3db37bdc.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/spring.html-a9a42659.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/system.html-fdd3c39f.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/think.html-cb5d858e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/virtualMachine.html-c1769886.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/Mybatis.html-3af6d6d4.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/Spring.html-e163eccb.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringBoot.html-56483b76.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringCloud.html-03730661.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringDataJpa.html-41f35d61.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringMVC.html-83890e3a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SpringSecurity.html-62b13e45.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/kotlin.html-b2e2dd46.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/leetcode.html-f644d859.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/react.html-594c07f5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/typescript.html-7057d002.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/vue.html-bc78c79b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/1.ç®€ä»‹.html-50b9c060.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10.å¯¹è±¡çš„å®ä¾‹åŒ–å†…å­˜å¸ƒå±€ä¸è®¿é—®å®šä½.html-8c7802a5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/11.ç›´æ¥å†…å­˜.html-d0d37dbd.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/12.æ‰§è¡Œå¼•æ“.html-e00ef777.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/13.StringTable.html-8bba02d8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/14.åƒåœ¾å›æ”¶æ¦‚è¿°.html-93107bc9.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/15.åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•.html-8b7d348d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/16.åƒåœ¾å›æ”¶ç›¸å…³æ¦‚å¿µ.html-3633af62.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/17-åƒåœ¾å›æ”¶å™¨.html-d2c56119.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/2.ç±»åŠ è½½å­ç³»ç»Ÿ.html-7d72d57f.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/3.è¿è¡Œæ—¶æ•°æ®åŒº.html-3d6a37b7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/4.ç¨‹åºè®¡æ•°å™¨ï¼ˆPCå¯„å­˜å™¨ï¼‰.html-95dde1b1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/5.è™šæ‹Ÿæœºæ ˆ.html-dc56806b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/6.æœ¬åœ°æ–¹æ³•æ¥å£.html-7fc16965.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/7.æœ¬åœ°æ–¹æ³•æ ˆ.html-6cad103e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/8.å †.html-f69bf86e.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/9.æ–¹æ³•åŒº.html-ef3b6e04.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/03-æ•°ç»„ä¸­é‡å¤çš„æ•°å­—.html-567f5361.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/04-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾.html-6e6af06d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/05-æ›¿æ¢ç©ºæ ¼.html-202212eb.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/09-ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—.html-19d03253.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10-I.æ–æ³¢é‚£å¥‘æ•°åˆ—.html-b6e27af0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/10-IIé’è›™è·³å°é˜¶é—®é¢˜.html-10ebe3d1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/11-æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—.html-f82a7837.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/12-çŸ©é˜µä¸­çš„è·¯å¾„.html-324f8453.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/13-æœºå™¨äººçš„è¿åŠ¨èŒƒå›´.html-dad3810f.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/14-å‰ªç»³å­.html-c23774d2.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/15-äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°.html-14fb859b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/16-æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹.html-64f6fe8a.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/17-æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°.html-8531c65c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/18-åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹.html-3aeace11.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/22-é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹.html-2517eeed.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/24-åè½¬é“¾è¡¨.html-6a3f1b99.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/25-åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨.html-702f2779.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/26-æ ‘çš„å­ç»“æ„.html-4d99c9a3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/27-äºŒå‰æ ‘çš„é•œåƒ.html-85287fc8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/28-å¯¹ç§°çš„äºŒå‰æ ‘.html-3aeebb13.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/58-II å·¦æ—‹è½¬å­—ç¬¦ä¸².html-a6dd23e1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/å¸¸ç”¨æ–¹æ³•å°è£…åˆé›†.html-f4b05f8b.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/404.html-982c42ec.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-7186d5f7.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-eaa10b62.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-1fbfb2e6.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-1271cf68.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-96bcade0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-90e31230.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-a1738b34.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-81d7f46f.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-95691e99.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-a6d8def1.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-040d812d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-44563782.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-e775c7d3.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-fca388e5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-8663824d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-c6c6d33d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index.html-b144c1dd.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/waline-meta-a31b78ed.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/component-0be4b3d2.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/mermaid.core-73a383b6.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/VuePlayground-f22e6317.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/photoswipe.esm-36cd6c3c.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/index-70769223.js" as="script"><link rel="prefetch" href="/Computer-Science-Learn-Notes/assets/SearchResult-7cf681a0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/Computer-Science-Learn-Notes/" class="brand"><img class="logo" src="/Computer-Science-Learn-Notes/logo.svg" alt><!----><!----></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/Computer-Science-Learn-Notes/" class="nav-link" aria-label="ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Computer-Science-Learn-Notes/intro/" class="nav-link" aria-label="å¯¼è¯»"><span class="font-icon icon iconfont icon-discover" style=""></span>å¯¼è¯»<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/issues" rel="noopener noreferrer" target="_blank" aria-label="é—®é¢˜åé¦ˆ" class="nav-link"><span class="font-icon icon iconfont icon-note" style=""></span>é—®é¢˜åé¦ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">æœç´¢</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-vscode" style=""></span><span class="title">å‰ç«¯</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-timer" style=""></span><span class="title">Golang</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-build" style=""></span><span class="title">è®¡ç®—æœºåŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">JavaåŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-branch" style=""></span><span class="title">Javaå¹¶å‘</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-profile" style=""></span><span class="title">Javaé¢è¯•</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/foundation.html" class="nav-link sidebar-link sidebar-page" aria-label="JavaåŸºç¡€"><!---->JavaåŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/intro.html" class="nav-link sidebar-link sidebar-page" aria-label="å‰è¨€"><!---->å‰è¨€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/concurrency.html" class="nav-link sidebar-link sidebar-page" aria-label="Javaå¹¶å‘"><!---->Javaå¹¶å‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/virtualMachine.html" class="nav-link sidebar-link sidebar-page" aria-label="JVM"><!---->JVM<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/spring.html" class="nav-link sidebar-link sidebar-page" aria-label="Springç³»åˆ—"><!---->Springç³»åˆ—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/mysql.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQL"><!---->MySQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/redis.html" class="nav-link sidebar-link sidebar-page" aria-label="redis"><!---->redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="åˆ†å¸ƒå¼"><!---->åˆ†å¸ƒå¼<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#ğŸ”—-åˆ†å¸ƒå¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ğŸ”— åˆ†å¸ƒå¼"><!---->ğŸ”— åˆ†å¸ƒå¼<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#ç†è®ºåŸºç¡€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç†è®ºåŸºç¡€"><!---->ç†è®ºåŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#äº†è§£rpcå—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº†è§£RPCå—ï¼Ÿ"><!---->äº†è§£RPCå—ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#æœ‰å“ªäº›å¸¸è§çš„-rpc-æ¡†æ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœ‰å“ªäº›å¸¸è§çš„ RPC æ¡†æ¶ï¼Ÿ"><!---->æœ‰å“ªäº›å¸¸è§çš„ RPC æ¡†æ¶ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡å—ï¼Ÿ"><!---->äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡å—ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#å¸¸è§ä¿è¯å¹‚ç­‰çš„æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¸¸è§ä¿è¯å¹‚ç­‰çš„æ–¹å¼"><!---->å¸¸è§ä¿è¯å¹‚ç­‰çš„æ–¹å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#åˆ†å¸ƒå¼ç³»ç»Ÿæ¥å£-å¦‚ä½•é¿å…è¡¨å•çš„é‡å¤æäº¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ†å¸ƒå¼ç³»ç»Ÿæ¥å£ï¼Œå¦‚ä½•é¿å…è¡¨å•çš„é‡å¤æäº¤ï¼Ÿ"><!---->åˆ†å¸ƒå¼ç³»ç»Ÿæ¥å£ï¼Œå¦‚ä½•é¿å…è¡¨å•çš„é‡å¤æäº¤ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#æœ‰å‡ ç§ç”Ÿæˆå”¯ä¸€idçš„æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœ‰å‡ ç§ç”Ÿæˆå”¯ä¸€IDçš„æ–¹å¼ï¼Ÿ"><!---->æœ‰å‡ ç§ç”Ÿæˆå”¯ä¸€IDçš„æ–¹å¼ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#å•ç‚¹ç™»å½•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å•ç‚¹ç™»å½•"><!---->å•ç‚¹ç™»å½•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#dubboé¢è¯•æ±‡æ€»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Dubboé¢è¯•æ±‡æ€»"><!---->Dubboé¢è¯•æ±‡æ€»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/messageQueue.html" class="nav-link sidebar-link sidebar-page" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><!---->æ¶ˆæ¯é˜Ÿåˆ—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/netty.html" class="nav-link sidebar-link sidebar-page" aria-label="Netty"><!---->Netty<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/network.html" class="nav-link sidebar-link sidebar-page" aria-label="è®¡ç®—æœºç½‘ç»œ"><!---->è®¡ç®—æœºç½‘ç»œ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/system.html" class="nav-link sidebar-link sidebar-page" aria-label="æ“ä½œç³»ç»Ÿ"><!---->æ“ä½œç³»ç»Ÿ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/datastruct.html" class="nav-link sidebar-link sidebar-page" aria-label="æ•°æ®ç»“æ„"><!---->æ•°æ®ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/intelligenceQuestion.html" class="nav-link sidebar-link sidebar-page" aria-label="æ™ºåŠ›é¢˜"><!---->æ™ºåŠ›é¢˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/giant.html" class="nav-link sidebar-link sidebar-page" aria-label="2022å¤§å‚å…«è‚¡æ–‡"><!---->2022å¤§å‚å…«è‚¡æ–‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Computer-Science-Learn-Notes/Java/eightpart/think.html" class="nav-link sidebar-link sidebar-page" aria-label="åŸºäºé¢è¯•é¢˜çš„ä¸€äº›æ€è€ƒ"><!---->åŸºäºé¢è¯•é¢˜çš„ä¸€äº›æ€è€ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-leaf" style=""></span><span class="title">Javaæ¡†æ¶</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-async" style=""></span><span class="title">Javaè™šæ‹Ÿæœº</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-launch" style=""></span><span class="title">Kotlinç»“åˆSpring</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-object" style=""></span><span class="title">LeetCodeåˆ·é¢˜é¡ºåº</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-repair" style=""></span><span class="title">ç»éªŒæ€»ç»“</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->åˆ†å¸ƒå¼</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">zhiyu1998</span></span><span property="author" content="zhiyu1998"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-04-04T15:12:04.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span class="waline-pageview-count" id="ArtalkPV" data-path="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 68 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT68M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#ğŸ”—-åˆ†å¸ƒå¼" class="router-link-active router-link-exact-active toc-link level2">ğŸ”— åˆ†å¸ƒå¼</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#ç†è®ºåŸºç¡€" class="router-link-active router-link-exact-active toc-link level3">ç†è®ºåŸºç¡€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#äº†è§£rpcå—" class="router-link-active router-link-exact-active toc-link level3">äº†è§£RPCå—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#æœ‰å“ªäº›å¸¸è§çš„-rpc-æ¡†æ¶" class="router-link-active router-link-exact-active toc-link level3">æœ‰å“ªäº›å¸¸è§çš„ RPC æ¡†æ¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡å—" class="router-link-active router-link-exact-active toc-link level3">äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#å¸¸è§ä¿è¯å¹‚ç­‰çš„æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">å¸¸è§ä¿è¯å¹‚ç­‰çš„æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#åˆ†å¸ƒå¼ç³»ç»Ÿæ¥å£-å¦‚ä½•é¿å…è¡¨å•çš„é‡å¤æäº¤" class="router-link-active router-link-exact-active toc-link level3">åˆ†å¸ƒå¼ç³»ç»Ÿæ¥å£ï¼Œå¦‚ä½•é¿å…è¡¨å•çš„é‡å¤æäº¤ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#æœ‰å‡ ç§ç”Ÿæˆå”¯ä¸€idçš„æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">æœ‰å‡ ç§ç”Ÿæˆå”¯ä¸€IDçš„æ–¹å¼ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#å•ç‚¹ç™»å½•" class="router-link-active router-link-exact-active toc-link level3">å•ç‚¹ç™»å½•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Computer-Science-Learn-Notes/Java/eightpart/distribution.html#dubboé¢è¯•æ±‡æ€»" class="router-link-active router-link-exact-active toc-link level3">Dubboé¢è¯•æ±‡æ€»</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="ğŸ”—-åˆ†å¸ƒå¼" tabindex="-1"><a class="header-anchor" href="#ğŸ”—-åˆ†å¸ƒå¼" aria-hidden="true">#</a> ğŸ”— åˆ†å¸ƒå¼</h2><h3 id="ç†è®ºåŸºç¡€" tabindex="-1"><a class="header-anchor" href="#ç†è®ºåŸºç¡€" aria-hidden="true">#</a> ç†è®ºåŸºç¡€</h3><h4 id="capç†è®º" tabindex="-1"><a class="header-anchor" href="#capç†è®º" aria-hidden="true">#</a> CAPç†è®º</h4><p>CAP ç†è®º/å®šç†èµ·æºäº 2000å¹´ï¼Œç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡çš„Eric Breweræ•™æˆåœ¨åˆ†å¸ƒå¼è®¡ç®—åŸç†ç ”è®¨ä¼šï¼ˆPODCï¼‰ä¸Šæå‡ºï¼Œå› æ­¤ CAPå®šç†åˆè¢«ç§°ä½œ <strong>å¸ƒé²å°”å®šç†ï¼ˆBrewerâ€™s theoremï¼‰</strong></p><p>2å¹´åï¼Œéº»çœç†å·¥å­¦é™¢çš„Seth Gilbertå’ŒNancy Lynch å‘è¡¨äº†å¸ƒé²å°”çŒœæƒ³çš„è¯æ˜ï¼ŒCAPç†è®ºæ­£å¼æˆä¸ºåˆ†å¸ƒå¼é¢†åŸŸçš„å®šç†ã€‚</p><h5 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹" aria-hidden="true">#</a> ç®€ä»‹</h5><p><strong>CAP</strong> ä¹Ÿå°±æ˜¯ <strong>Consistencyï¼ˆä¸€è‡´æ€§ï¼‰</strong>ã€<strong>Availabilityï¼ˆå¯ç”¨æ€§ï¼‰</strong>ã€<strong>Partition Toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰</strong> è¿™ä¸‰ä¸ªå•è¯é¦–å­—æ¯ç»„åˆã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220615221901423-cddc9eda.png" alt="image-20220726125103940" tabindex="0" loading="lazy"><figcaption>image-20220726125103940</figcaption></figure><p>CAP ç†è®ºçš„æå‡ºè€…å¸ƒé²å°”åœ¨æå‡º CAP çŒœæƒ³çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰è¯¦ç»†å®šä¹‰ <strong>Consistency</strong>ã€<strong>Availability</strong>ã€<strong>Partition Tolerance</strong> ä¸‰ä¸ªå•è¯çš„æ˜ç¡®å®šä¹‰ã€‚</p><p>å› æ­¤ï¼Œå¯¹äº CAP çš„æ°‘é—´è§£è¯»æœ‰å¾ˆå¤šï¼Œä¸€èˆ¬æ¯”è¾ƒè¢«å¤§å®¶æ¨èçš„æ˜¯ä¸‹é¢ ğŸ‘‡ è¿™ç§ç‰ˆæœ¬çš„è§£è¯»ã€‚</p><p>åœ¨ç†è®ºè®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒCAP å®šç†ï¼ˆCAP theoremï¼‰æŒ‡å‡ºå¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œå½“è®¾è®¡è¯»å†™æ“ä½œæ—¶ï¼Œåªèƒ½åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ç‚¹ä¸­çš„ä¸¤ä¸ªï¼š</p><ul><li><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong> : æ‰€æœ‰èŠ‚ç‚¹è®¿é—®åŒä¸€ä»½æœ€æ–°çš„æ•°æ®å‰¯æœ¬</li><li><strong>å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰</strong>: éæ•…éšœçš„èŠ‚ç‚¹åœ¨åˆç†çš„æ—¶é—´å†…è¿”å›åˆç†çš„å“åº”ï¼ˆä¸æ˜¯é”™è¯¯æˆ–è€…è¶…æ—¶çš„å“åº”ï¼‰ã€‚</li><li><strong>åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰</strong> : åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°ç½‘ç»œåˆ†åŒºçš„æ—¶å€™ï¼Œä»ç„¶èƒ½å¤Ÿå¯¹å¤–æä¾›æœåŠ¡ã€‚</li></ul><h5 id="ç½‘ç»œåˆ†åŒº" tabindex="-1"><a class="header-anchor" href="#ç½‘ç»œåˆ†åŒº" aria-hidden="true">#</a> ç½‘ç»œåˆ†åŒº</h5><blockquote><p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªèŠ‚ç‚¹ä¹‹å‰çš„ç½‘ç»œæœ¬æ¥æ˜¯è¿é€šçš„ï¼Œä½†æ˜¯å› ä¸ºæŸäº›æ•…éšœï¼ˆæ¯”å¦‚éƒ¨åˆ†èŠ‚ç‚¹ç½‘ç»œå‡ºäº†é—®é¢˜ï¼‰æŸäº›èŠ‚ç‚¹ä¹‹é—´ä¸è¿é€šäº†ï¼Œæ•´ä¸ªç½‘ç»œå°±åˆ†æˆäº†å‡ å—åŒºåŸŸï¼Œè¿™å°±å«ç½‘ç»œåˆ†åŒºã€‚</p></blockquote><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726132654526-f9e15513.png" alt="image-20220726132654526" tabindex="0" loading="lazy"><figcaption>image-20220726132654526</figcaption></figure><h5 id="ä¸æ˜¯æ‰€è°“çš„-3-é€‰-2" tabindex="-1"><a class="header-anchor" href="#ä¸æ˜¯æ‰€è°“çš„-3-é€‰-2" aria-hidden="true">#</a> ä¸æ˜¯æ‰€è°“çš„â€œ3 é€‰ 2â€</h5><p>å¤§éƒ¨åˆ†äººè§£é‡Šè¿™ä¸€å®šå¾‹æ—¶ï¼Œå¸¸å¸¸ç®€å•çš„è¡¨è¿°ä¸ºï¼šâ€œä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€åˆ†åŒºå®¹å¿æ€§ä¸‰è€…ä½ åªèƒ½åŒæ—¶è¾¾åˆ°å…¶ä¸­ä¸¤ä¸ªï¼Œä¸å¯èƒ½åŒæ—¶è¾¾åˆ°â€ã€‚å®é™…ä¸Šè¿™æ˜¯ä¸€ä¸ªéå¸¸å…·æœ‰è¯¯å¯¼æ€§è´¨çš„è¯´æ³•ï¼Œè€Œä¸”åœ¨ CAP ç†è®ºè¯ç”Ÿ 12 å¹´ä¹‹åï¼ŒCAP ä¹‹çˆ¶ä¹Ÿåœ¨ 2012 å¹´é‡å†™äº†ä¹‹å‰çš„è®ºæ–‡ã€‚</p><blockquote><p><strong>å½“å‘ç”Ÿç½‘ç»œåˆ†åŒºçš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬è¦ç»§ç»­æœåŠ¡ï¼Œé‚£ä¹ˆå¼ºä¸€è‡´æ€§å’Œå¯ç”¨æ€§åªèƒ½ 2 é€‰ 1ã€‚ä¹Ÿå°±æ˜¯è¯´å½“ç½‘ç»œåˆ†åŒºä¹‹å P æ˜¯å‰æï¼Œå†³å®šäº† P ä¹‹åæ‰æœ‰ C å’Œ A çš„é€‰æ‹©ã€‚ä¹Ÿå°±æ˜¯è¯´åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰æˆ‘ä»¬æ˜¯å¿…é¡»è¦å®ç°çš„ã€‚</strong></p><p>ç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼šCAP ç†è®ºä¸­åˆ†åŒºå®¹é”™æ€§ P æ˜¯ä¸€å®šè¦æ»¡è¶³çš„ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œåªèƒ½æ»¡è¶³å¯ç”¨æ€§ A æˆ–è€…ä¸€è‡´æ€§ Cã€‚</p></blockquote><p>å› æ­¤ï¼Œ<strong>åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºä¸Šä¸å¯èƒ½é€‰æ‹© CA æ¶æ„ï¼Œåªèƒ½é€‰æ‹© CP æˆ–è€… AP æ¶æ„ã€‚</strong> æ¯”å¦‚ ZooKeeperã€HBase å°±æ˜¯ CP æ¶æ„ï¼ŒCassandraã€Eureka å°±æ˜¯ AP æ¶æ„ï¼ŒNacos ä¸ä»…æ”¯æŒ CP æ¶æ„ä¹Ÿæ”¯æŒ AP æ¶æ„ã€‚</p><p><strong>ä¸ºå•¥ä¸å¯èƒ½é€‰æ‹© CA æ¶æ„å‘¢ï¼Ÿ</strong> ä¸¾ä¸ªä¾‹å­ï¼šè‹¥ç³»ç»Ÿå‡ºç°â€œåˆ†åŒºâ€ï¼Œç³»ç»Ÿä¸­çš„æŸä¸ªèŠ‚ç‚¹åœ¨è¿›è¡Œå†™æ“ä½œã€‚ä¸ºäº†ä¿è¯ Cï¼Œ å¿…é¡»è¦ç¦æ­¢å…¶ä»–èŠ‚ç‚¹çš„è¯»å†™æ“ä½œï¼Œè¿™å°±å’Œ A å‘ç”Ÿå†²çªäº†ã€‚å¦‚æœä¸ºäº†ä¿è¯ Aï¼Œå…¶ä»–èŠ‚ç‚¹çš„è¯»å†™æ“ä½œæ­£å¸¸çš„è¯ï¼Œé‚£å°±å’Œ C å‘ç”Ÿå†²çªäº†ã€‚</p><p><strong>é€‰æ‹© CP è¿˜æ˜¯ AP çš„å…³é”®åœ¨äºå½“å‰çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ²¡æœ‰å®šè®ºï¼Œæ¯”å¦‚å¯¹äºéœ€è¦ç¡®ä¿å¼ºä¸€è‡´æ€§çš„åœºæ™¯å¦‚é“¶è¡Œä¸€èˆ¬ä¼šé€‰æ‹©ä¿è¯ CP ã€‚</strong></p><p>å¦å¤–ï¼Œéœ€è¦è¡¥å……è¯´æ˜çš„ä¸€ç‚¹æ˜¯ï¼š <strong>å¦‚æœç½‘ç»œåˆ†åŒºæ­£å¸¸çš„è¯ï¼ˆç³»ç»Ÿåœ¨ç»å¤§éƒ¨åˆ†æ—¶å€™æ‰€å¤„çš„çŠ¶æ€ï¼‰ï¼Œä¹Ÿå°±è¯´ä¸éœ€è¦ä¿è¯ P çš„æ—¶å€™ï¼ŒC å’Œ A èƒ½å¤ŸåŒæ—¶ä¿è¯ã€‚</strong></p><h5 id="cap-å®é™…åº”ç”¨æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#cap-å®é™…åº”ç”¨æ¡ˆä¾‹" aria-hidden="true">#</a> CAP å®é™…åº”ç”¨æ¡ˆä¾‹</h5><p>æˆ‘è¿™é‡Œä»¥æ³¨å†Œä¸­å¿ƒæ¥æ¢è®¨ä¸€ä¸‹ CAP çš„å®é™…åº”ç”¨ã€‚è€ƒè™‘åˆ°å¾ˆå¤šå°ä¼™ä¼´ä¸çŸ¥é“æ³¨å†Œä¸­å¿ƒæ˜¯å¹²å˜›çš„ï¼Œè¿™é‡Œç®€å•ä»¥ Dubbo ä¸ºä¾‹è¯´ä¸€è¯´ã€‚</p><p>ä¸‹å›¾æ˜¯ Dubbo çš„æ¶æ„å›¾ã€‚<strong>æ³¨å†Œä¸­å¿ƒ Registry åœ¨å…¶ä¸­æ‰®æ¼”äº†ä»€ä¹ˆè§’è‰²å‘¢ï¼Ÿæä¾›äº†ä»€ä¹ˆæœåŠ¡å‘¢ï¼Ÿ</strong></p><p>æ³¨å†Œä¸­å¿ƒè´Ÿè´£æœåŠ¡åœ°å€çš„æ³¨å†Œä¸æŸ¥æ‰¾ï¼Œç›¸å½“äºç›®å½•æœåŠ¡ï¼ŒæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…åªåœ¨å¯åŠ¨æ—¶ä¸æ³¨å†Œä¸­å¿ƒäº¤äº’ï¼Œæ³¨å†Œä¸­å¿ƒä¸è½¬å‘è¯·æ±‚ï¼Œå‹åŠ›è¾ƒå°ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726132721865-da1f2ca9.png" alt="image-20220726132721865" tabindex="0" loading="lazy"><figcaption>image-20220726132721865</figcaption></figure><p>å¸¸è§çš„å¯ä»¥ä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„ç»„ä»¶æœ‰ï¼šZooKeeperã€Eurekaã€Nacos...ã€‚</p><ol><li><strong>ZooKeeper ä¿è¯çš„æ˜¯ CPã€‚</strong> ä»»ä½•æ—¶åˆ»å¯¹ ZooKeeper çš„è¯»è¯·æ±‚éƒ½èƒ½å¾—åˆ°ä¸€è‡´æ€§çš„ç»“æœï¼Œä½†æ˜¯ï¼Œ ZooKeeper ä¸ä¿è¯æ¯æ¬¡è¯·æ±‚çš„å¯ç”¨æ€§æ¯”å¦‚åœ¨ Leader é€‰ä¸¾è¿‡ç¨‹ä¸­æˆ–è€…åŠæ•°ä»¥ä¸Šçš„æœºå™¨ä¸å¯ç”¨çš„æ—¶å€™æœåŠ¡å°±æ˜¯ä¸å¯ç”¨çš„ã€‚</li><li><strong>Eureka ä¿è¯çš„åˆ™æ˜¯ APã€‚</strong> Eureka åœ¨è®¾è®¡çš„æ—¶å€™å°±æ˜¯ä¼˜å…ˆä¿è¯ A ï¼ˆå¯ç”¨æ€§ï¼‰ã€‚åœ¨ Eureka ä¸­ä¸å­˜åœ¨ä»€ä¹ˆ Leader èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€æ ·çš„ã€å¹³ç­‰çš„ã€‚å› æ­¤ Eureka ä¸ä¼šåƒ ZooKeeper é‚£æ ·å‡ºç°é€‰ä¸¾è¿‡ç¨‹ä¸­æˆ–è€…åŠæ•°ä»¥ä¸Šçš„æœºå™¨ä¸å¯ç”¨çš„æ—¶å€™æœåŠ¡å°±æ˜¯ä¸å¯ç”¨çš„æƒ…å†µã€‚ Eureka ä¿è¯å³ä½¿å¤§éƒ¨åˆ†èŠ‚ç‚¹æŒ‚æ‰ä¹Ÿä¸ä¼šå½±å“æ­£å¸¸æä¾›æœåŠ¡ï¼Œåªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¯ç”¨çš„å°±è¡Œäº†ã€‚åªä¸è¿‡è¿™ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®å¯èƒ½å¹¶ä¸æ˜¯æœ€æ–°çš„ã€‚</li><li><strong>Nacos ä¸ä»…æ”¯æŒ CP ä¹Ÿæ”¯æŒ APã€‚</strong></li></ol><h4 id="baseç†è®º" tabindex="-1"><a class="header-anchor" href="#baseç†è®º" aria-hidden="true">#</a> Baseç†è®º</h4><p><a href="https://dl.acm.org/doi/10.1145/1394127.1394128" target="_blank" rel="noopener noreferrer">BASE ç†è®º<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>èµ·æºäº 2008 å¹´ï¼Œ ç”±eBayçš„æ¶æ„å¸ˆDan Pritchettåœ¨ACMä¸Šå‘è¡¨ã€‚</p><h5 id="ç®€ä»‹-1" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹-1" aria-hidden="true">#</a> ç®€ä»‹</h5><p><strong>BASE</strong> æ˜¯ <strong>Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰</strong> ã€<strong>Soft-stateï¼ˆè½¯çŠ¶æ€ï¼‰</strong> å’Œ <strong>Eventually Consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</strong> ä¸‰ä¸ªçŸ­è¯­çš„ç¼©å†™ã€‚BASE ç†è®ºæ˜¯å¯¹ CAP ä¸­ä¸€è‡´æ€§ C å’Œå¯ç”¨æ€§ A æƒè¡¡çš„ç»“æœï¼Œå…¶æ¥æºäºå¯¹å¤§è§„æ¨¡äº’è”ç½‘ç³»ç»Ÿåˆ†å¸ƒå¼å®è·µçš„æ€»ç»“ï¼Œæ˜¯åŸºäº CAP å®šç†é€æ­¥æ¼”åŒ–è€Œæ¥çš„ï¼Œå®ƒå¤§å¤§é™ä½äº†æˆ‘ä»¬å¯¹ç³»ç»Ÿçš„è¦æ±‚ã€‚</p><h5 id="base-ç†è®ºçš„æ ¸å¿ƒæ€æƒ³" tabindex="-1"><a class="header-anchor" href="#base-ç†è®ºçš„æ ¸å¿ƒæ€æƒ³" aria-hidden="true">#</a> BASE ç†è®ºçš„æ ¸å¿ƒæ€æƒ³</h5><p>å³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼Œä½†æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡‡ç”¨é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯ç‰ºç‰²æ•°æ®çš„ä¸€è‡´æ€§æ¥æ»¡è¶³ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ï¼Œç³»ç»Ÿä¸­ä¸€éƒ¨åˆ†æ•°æ®ä¸å¯ç”¨æˆ–è€…ä¸ä¸€è‡´æ—¶ï¼Œä»éœ€è¦ä¿æŒç³»ç»Ÿæ•´ä½“â€œä¸»è¦å¯ç”¨â€ã€‚</p></blockquote><p><strong>BASE ç†è®ºæœ¬è´¨ä¸Šæ˜¯å¯¹ CAP çš„å»¶ä¼¸å’Œè¡¥å……ï¼Œæ›´å…·ä½“åœ°è¯´ï¼Œæ˜¯å¯¹ CAP ä¸­ AP æ–¹æ¡ˆçš„ä¸€ä¸ªè¡¥å……ã€‚</strong></p><p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è¯´å‘¢ï¼Ÿ</strong></p><p>CAP ç†è®ºè¿™èŠ‚æˆ‘ä»¬ä¹Ÿè¯´è¿‡äº†ï¼š</p><blockquote><p>å¦‚æœç³»ç»Ÿæ²¡æœ‰å‘ç”Ÿâ€œåˆ†åŒºâ€çš„è¯ï¼ŒèŠ‚ç‚¹é—´çš„ç½‘ç»œè¿æ¥é€šä¿¡æ­£å¸¸çš„è¯ï¼Œä¹Ÿå°±ä¸å­˜åœ¨ P äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŒæ—¶ä¿è¯ C å’Œ A äº†ã€‚å› æ­¤ï¼Œ<strong>å¦‚æœç³»ç»Ÿå‘ç”Ÿâ€œåˆ†åŒºâ€ï¼Œæˆ‘ä»¬è¦è€ƒè™‘é€‰æ‹© CP è¿˜æ˜¯ APã€‚å¦‚æœç³»ç»Ÿæ²¡æœ‰å‘ç”Ÿâ€œåˆ†åŒºâ€çš„è¯ï¼Œæˆ‘ä»¬è¦æ€è€ƒå¦‚ä½•ä¿è¯ CA ã€‚</strong></p></blockquote><p>å› æ­¤ï¼ŒAP æ–¹æ¡ˆåªæ˜¯åœ¨ç³»ç»Ÿå‘ç”Ÿåˆ†åŒºçš„æ—¶å€™æ”¾å¼ƒä¸€è‡´æ€§ï¼Œè€Œä¸æ˜¯æ°¸è¿œæ”¾å¼ƒä¸€è‡´æ€§ã€‚åœ¨åˆ†åŒºæ•…éšœæ¢å¤åï¼Œç³»ç»Ÿåº”è¯¥è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚è¿™ä¸€ç‚¹å…¶å®å°±æ˜¯ BASE ç†è®ºå»¶ä¼¸çš„åœ°æ–¹ã€‚</p><h5 id="base-ç†è®ºä¸‰è¦ç´ " tabindex="-1"><a class="header-anchor" href="#base-ç†è®ºä¸‰è¦ç´ " aria-hidden="true">#</a> BASE ç†è®ºä¸‰è¦ç´ </h5><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726133418075-f2eec3c6.png" alt="image-20220726133418075" tabindex="0" loading="lazy"><figcaption>image-20220726133418075</figcaption></figure><h5 id="åŸºæœ¬å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬å¯ç”¨" aria-hidden="true">#</a> åŸºæœ¬å¯ç”¨</h5><p>åŸºæœ¬å¯ç”¨æ˜¯æŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°ä¸å¯é¢„çŸ¥æ•…éšœçš„æ—¶å€™ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ã€‚ä½†æ˜¯ï¼Œè¿™ç»ä¸ç­‰ä»·äºç³»ç»Ÿä¸å¯ç”¨ã€‚</p><p><strong>ä»€ä¹ˆå«å…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§å‘¢ï¼Ÿ</strong></p><ul><li><strong>å“åº”æ—¶é—´ä¸Šçš„æŸå¤±</strong>: æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚éœ€è¦ 0.5s è¿”å›ç»“æœï¼Œä½†æ˜¯ç”±äºç³»ç»Ÿå‡ºç°æ•…éšœï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚çš„æ—¶é—´å˜ä¸º 3 sã€‚</li><li><strong>ç³»ç»ŸåŠŸèƒ½ä¸Šçš„æŸå¤±</strong>ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç³»ç»Ÿçš„å…¨éƒ¨åŠŸèƒ½ï¼Œä½†æ˜¯ç”±äºç³»ç»Ÿè®¿é—®é‡çªç„¶å‰§å¢ï¼Œç³»ç»Ÿçš„éƒ¨åˆ†éæ ¸å¿ƒåŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚</li></ul><h5 id="è½¯çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#è½¯çŠ¶æ€" aria-hidden="true">#</a> è½¯çŠ¶æ€</h5><p>è½¯çŠ¶æ€æŒ‡å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼ˆ<strong>CAP ç†è®ºä¸­çš„æ•°æ®ä¸ä¸€è‡´</strong>ï¼‰ï¼Œå¹¶è®¤ä¸ºè¯¥ä¸­é—´çŠ¶æ€çš„å­˜åœ¨ä¸ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§ï¼Œå³å…è®¸ç³»ç»Ÿåœ¨ä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥çš„è¿‡ç¨‹å­˜åœ¨å»¶æ—¶ã€‚</p><h5 id="æœ€ç»ˆä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#æœ€ç»ˆä¸€è‡´æ€§" aria-hidden="true">#</a> æœ€ç»ˆä¸€è‡´æ€§</h5><p>æœ€ç»ˆä¸€è‡´æ€§å¼ºè°ƒçš„æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ•°æ®å‰¯æœ¬ï¼Œåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŒæ­¥åï¼Œæœ€ç»ˆèƒ½å¤Ÿè¾¾åˆ°ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œæœ€ç»ˆä¸€è‡´æ€§çš„æœ¬è´¨æ˜¯éœ€è¦ç³»ç»Ÿä¿è¯æœ€ç»ˆæ•°æ®èƒ½å¤Ÿè¾¾åˆ°ä¸€è‡´ï¼Œè€Œä¸éœ€è¦å®æ—¶ä¿è¯ç³»ç»Ÿæ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚</p><blockquote><p>åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„ 3 ç§çº§åˆ«ï¼š</p><ol><li><strong>å¼ºä¸€è‡´æ€§</strong> ï¼šç³»ç»Ÿå†™å…¥äº†ä»€ä¹ˆï¼Œè¯»å‡ºæ¥çš„å°±æ˜¯ä»€ä¹ˆã€‚</li><li><strong>å¼±ä¸€è‡´æ€§</strong> ï¼šä¸ä¸€å®šå¯ä»¥è¯»å–åˆ°æœ€æ–°å†™å…¥çš„å€¼ï¼Œä¹Ÿä¸ä¿è¯å¤šå°‘æ—¶é—´ä¹‹åè¯»å–åˆ°çš„æ•°æ®æ˜¯æœ€æ–°çš„ï¼Œåªæ˜¯ä¼šå°½é‡ä¿è¯æŸä¸ªæ—¶åˆ»è¾¾åˆ°æ•°æ®ä¸€è‡´çš„çŠ¶æ€ã€‚</li><li><strong>æœ€ç»ˆä¸€è‡´æ€§</strong> ï¼šå¼±ä¸€è‡´æ€§çš„å‡çº§ç‰ˆï¼Œç³»ç»Ÿä¼šä¿è¯åœ¨ä¸€å®šæ—¶é—´å†…è¾¾åˆ°æ•°æ®ä¸€è‡´çš„çŠ¶æ€ã€‚</li></ol><p><strong>ä¸šç•Œæ¯”è¾ƒæ¨å´‡æ˜¯æœ€ç»ˆä¸€è‡´æ€§çº§åˆ«ï¼Œä½†æ˜¯æŸäº›å¯¹æ•°æ®ä¸€è‡´è¦æ±‚ååˆ†ä¸¥æ ¼çš„åœºæ™¯æ¯”å¦‚é“¶è¡Œè½¬è´¦è¿˜æ˜¯è¦ä¿è¯å¼ºä¸€è‡´æ€§ã€‚</strong></p></blockquote><p>é‚£å®ç°æœ€ç»ˆä¸€è‡´æ€§çš„å…·ä½“æ–¹å¼æ˜¯ä»€ä¹ˆå‘¢? <a href="http://gk.link/a/10rZM" target="_blank" rel="noopener noreferrer">ã€Šåˆ†å¸ƒå¼åè®®ä¸ç®—æ³•å®æˆ˜ã€‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸­æ˜¯è¿™æ ·ä»‹ç»ï¼š</p><blockquote><ul><li><strong>è¯»æ—¶ä¿®å¤</strong> : åœ¨è¯»å–æ•°æ®æ—¶ï¼Œæ£€æµ‹æ•°æ®çš„ä¸ä¸€è‡´ï¼Œè¿›è¡Œä¿®å¤ã€‚æ¯”å¦‚ Cassandra çš„ Read Repair å®ç°ï¼Œå…·ä½“æ¥è¯´ï¼Œåœ¨å‘ Cassandra ç³»ç»ŸæŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœæ£€æµ‹åˆ°ä¸åŒèŠ‚ç‚¹ çš„å‰¯æœ¬æ•°æ®ä¸ä¸€è‡´ï¼Œç³»ç»Ÿå°±è‡ªåŠ¨ä¿®å¤æ•°æ®ã€‚</li><li><strong>å†™æ—¶ä¿®å¤</strong> : åœ¨å†™å…¥æ•°æ®ï¼Œæ£€æµ‹æ•°æ®çš„ä¸ä¸€è‡´æ—¶ï¼Œè¿›è¡Œä¿®å¤ã€‚æ¯”å¦‚ Cassandra çš„ Hinted Handoff å®ç°ã€‚å…·ä½“æ¥è¯´ï¼ŒCassandra é›†ç¾¤çš„èŠ‚ç‚¹ä¹‹é—´è¿œç¨‹å†™æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœå†™å¤±è´¥ å°±å°†æ•°æ®ç¼“å­˜ä¸‹æ¥ï¼Œç„¶åå®šæ—¶é‡ä¼ ï¼Œä¿®å¤æ•°æ®çš„ä¸ä¸€è‡´æ€§ã€‚</li><li><strong>å¼‚æ­¥ä¿®å¤</strong> : è¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œé€šè¿‡å®šæ—¶å¯¹è´¦æ£€æµ‹å‰¯æœ¬æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¹¶ä¿®å¤ã€‚</li></ul></blockquote><p>æ¯”è¾ƒæ¨è <strong>å†™æ—¶ä¿®å¤</strong>ï¼Œè¿™ç§æ–¹å¼å¯¹æ€§èƒ½æ¶ˆè€—æ¯”è¾ƒä½ã€‚</p><h4 id="paxos-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#paxos-ç®—æ³•" aria-hidden="true">#</a> Paxos ç®—æ³•</h4><p>Paxos ç®—æ³•æ˜¯ Leslie Lamportï¼ˆ<a href="https://zh.wikipedia.org/wiki/%E8%8E%B1%E6%96%AF%E5%88%A9%C2%B7%E5%85%B0%E4%BC%AF%E7%89%B9" target="_blank" rel="noopener noreferrer">è±æ–¯åˆ©Â·å…°ä¼¯ç‰¹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼‰åœ¨ <strong>1990</strong> å¹´æå‡ºäº†ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿ <strong>å…±è¯†</strong> ç®—æ³•ã€‚è¿™ä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªè¢«è¯æ˜å®Œå¤‡çš„å…±è¯†ç®—æ³•ï¼ˆå‰ææ˜¯ä¸å­˜åœ¨æ‹œå åº­å°†å†›é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ¶æ„èŠ‚ç‚¹ï¼‰ã€‚</p><p>ä¸ºäº†ä»‹ç» Paxos ç®—æ³•ï¼Œå…°ä¼¯ç‰¹ä¸“é—¨å†™äº†ä¸€ç¯‡å¹½é»˜é£è¶£çš„è®ºæ–‡ã€‚åœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œä»–è™šæ‹Ÿäº†ä¸€ä¸ªå«åš Paxos çš„å¸Œè…ŠåŸé‚¦æ¥æ›´å½¢è±¡åŒ–åœ°ä»‹ç» Paxos ç®—æ³•ã€‚</p><p>ä¸è¿‡ï¼Œå®¡ç¨¿äººå¹¶ä¸è®¤å¯è¿™ç¯‡è®ºæ–‡çš„å¹½é»˜ã€‚äºæ˜¯ï¼Œä»–ä»¬å°±ç»™å…°ä¼¯ç‰¹è¯´ï¼šâ€œå¦‚æœä½ æƒ³è¦æˆåŠŸå‘è¡¨è¿™ç¯‡è®ºæ–‡çš„è¯ï¼Œå¿…é¡»åˆ é™¤æ‰€æœ‰ Paxos ç›¸å…³çš„æ•…äº‹èƒŒæ™¯â€ã€‚å…°ä¼¯ç‰¹ä¸€å¬å°±ä¸å¼€å¿ƒäº†ï¼šâ€œæˆ‘å‡­ä»€ä¹ˆä¿®æ”¹å•Šï¼Œä½ ä»¬è¿™äº›å®¡ç¨¿äººå°±æ˜¯ç¼ºä¹å¹½é»˜ç»†èƒï¼Œå‘ä¸äº†å°±ä¸å‘äº†å‘—ï¼â€ã€‚</p><p>äºæ˜¯ä¹ï¼Œæå‡º Paxos ç®—æ³•çš„é‚£ç¯‡è®ºæ–‡åœ¨å½“æ—¶å¹¶æ²¡æœ‰è¢«æˆåŠŸå‘è¡¨ã€‚</p><p>ç›´åˆ° 1998 å¹´ï¼Œç³»ç»Ÿç ”ç©¶ä¸­å¿ƒ (Systems Research Centerï¼ŒSRCï¼‰çš„ä¸¤ä¸ªæŠ€æœ¯ç ”ç©¶å‘˜éœ€è¦æ‰¾ä¸€äº›åˆé€‚çš„åˆ†å¸ƒå¼ç®—æ³•æ¥æœåŠ¡ä»–ä»¬æ­£åœ¨æ„å»ºçš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒPaxos ç®—æ³•åˆšå¥½å¯ä»¥è§£å†³ä»–ä»¬çš„éƒ¨åˆ†éœ€æ±‚ã€‚å› æ­¤ï¼Œå…°ä¼¯ç‰¹å°±æŠŠè®ºæ–‡å‘ç»™äº†ä»–ä»¬ã€‚åœ¨çœ‹äº†è®ºæ–‡ä¹‹åï¼Œè¿™ä¿©å¤§ä½¬è§‰å¾—è®ºæ–‡è¿˜æ˜¯æŒºä¸é”™çš„ã€‚äºæ˜¯ï¼Œå…°ä¼¯ç‰¹åœ¨ <strong>1998</strong> å¹´é‡æ–°å‘è¡¨è®ºæ–‡ <a href="http://lamport.azurewebsites.net/pubs/lamport-paxos.pdf" target="_blank" rel="noopener noreferrer">ã€ŠThe Part-Time Parliamentã€‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><p>è®ºæ–‡å‘è¡¨ä¹‹åï¼Œå„è·¯å­¦è€…ç›´å‘¼çœ‹ä¸æ‡‚ï¼Œè¨€è¯­ä¸­è¿˜ç•¥æ˜¾è°ƒä¾ƒä¹‹æ„ã€‚è¿™è°å¿å¾—äº†ï¼Œåœ¨ <strong>2001</strong> å¹´çš„æ—¶å€™ï¼Œå…°ä¼¯ç‰¹ä¸“é—¨åˆå†™äº†ä¸€ç¯‡ <a href="http://lamport.azurewebsites.net/pubs/paxos-simple.pdf" target="_blank" rel="noopener noreferrer">ã€ŠPaxos Made Simpleã€‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>çš„è®ºæ–‡æ¥ç®€åŒ–å¯¹ Paxos çš„ä»‹ç»ï¼Œä¸»è¦è®²è¿°ä¸¤é˜¶æ®µå…±è¯†åè®®éƒ¨åˆ†ï¼Œé¡ºä¾¿è¿˜ä¸å¿˜å˜²è®½ä¸€ä¸‹è¿™ç¾¤å­¦è€…ã€‚</p><p>ã€ŠPaxos Made Simpleã€‹è¿™ç¯‡è®ºæ–‡å°± 14 é¡µï¼Œç›¸æ¯”äº ã€ŠThe Part-Time Parliamentã€‹çš„33 é¡µç²¾ç®€äº†ä¸å°‘ã€‚æœ€å…³é”®çš„æ˜¯è¿™ç¯‡è®ºæ–‡çš„æ‘˜è¦å°±ä¸€å¥è¯ï¼š</p><blockquote><p>The Paxos algorithm, when presented in plain English, is very simple.</p></blockquote><p>ç¿»è¯‘è¿‡æ¥çš„æ„æ€å¤§æ¦‚å°±æ˜¯ï¼šå½“æˆ‘ç”¨æ— ä¿®é¥°çš„è‹±æ–‡æ¥æè¿°æ—¶ï¼ŒPaxos ç®—æ³•çœŸå¿ƒç®€å•ï¼</p><p>æœ‰æ²¡æœ‰æ„Ÿè§‰åˆ°æ¥è‡ªå…°ä¼¯ç‰¹å¤§ä½¬æ»¡æ»¡åœ°å˜²è®½çš„å‘³é“ï¼Ÿ</p><p>å…°ä¼¯ç‰¹å½“æ—¶æå‡ºçš„ Paxos ç®—æ³•ä¸»è¦åŒ…å« 2 ä¸ªéƒ¨åˆ†:</p><ul><li><strong>Basic Paxos ç®—æ³•</strong> ï¼š æè¿°çš„æ˜¯å¤šèŠ‚ç‚¹ä¹‹é—´å¦‚ä½•å°±æŸä¸ªå€¼(ææ¡ˆ Value)è¾¾æˆå…±è¯†ã€‚</li><li><strong>Multi-Paxos æ€æƒ³</strong> ï¼š æè¿°çš„æ˜¯æ‰§è¡Œå¤šä¸ª Basic Paxos å®ä¾‹ï¼Œå°±ä¸€ç³»åˆ—å€¼è¾¾æˆå…±è¯†ã€‚Multi-Paxos è¯´ç™½äº†å°±æ˜¯æ‰§è¡Œå¤šæ¬¡ Basic Paxos ï¼Œæ ¸å¿ƒè¿˜æ˜¯ Basic Paxos ã€‚</li></ul><p>ç”±äº Paxos ç®—æ³•åœ¨å›½é™…ä¸Šè¢«å…¬è®¤çš„éå¸¸éš¾ä»¥ç†è§£å’Œå®ç°ï¼Œå› æ­¤ä¸æ–­æœ‰äººå°è¯•ç®€åŒ–è¿™ä¸€ç®—æ³•ã€‚åˆ°äº†2013 å¹´æ‰è¯ç”Ÿäº†ä¸€ä¸ªæ¯” Paxos ç®—æ³•æ›´æ˜“ç†è§£å’Œå®ç°çš„å…±è¯†ç®—æ³•â€”<a href="https://javaguide.cn/distributed-system/theorem&amp;algorithm&amp;protocol/raft-algorithm.html" target="_blank" rel="noopener noreferrer">Raft ç®—æ³•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ã€‚æ›´å…·ä½“ç‚¹æ¥è¯´ï¼ŒRaft æ˜¯Multi-Paxosçš„ä¸€ä¸ªå˜ç§ï¼Œå…¶ç®€åŒ–äº† Multi-Paxos çš„æ€æƒ³ï¼Œå˜å¾—æ›´å®¹æ˜“è¢«ç†è§£ä»¥åŠå·¥ç¨‹å®ç°ã€‚</p><p>é’ˆå¯¹æ²¡æœ‰æ¶æ„èŠ‚ç‚¹çš„æƒ…å†µï¼Œé™¤äº† Raft ç®—æ³•ä¹‹å¤–ï¼Œå½“å‰æœ€å¸¸ç”¨çš„ä¸€äº›å…±è¯†ç®—æ³•æ¯”å¦‚ ZAB åè®®ã€ Fast Paxos ç®—æ³•éƒ½æ˜¯åŸºäº Paxos ç®—æ³•æ”¹è¿›çš„ã€‚</p><p>é’ˆå¯¹å­˜åœ¨æ¶æ„èŠ‚ç‚¹çš„æƒ…å†µï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯å·¥ä½œé‡è¯æ˜ï¼ˆPOWï¼ŒProof-of-Workï¼‰ã€æƒç›Šè¯æ˜ï¼ˆPoSï¼ŒProof-of-Stake ï¼‰ç­‰å…±è¯†ç®—æ³•ã€‚è¿™ç±»å…±è¯†ç®—æ³•æœ€å…¸å‹çš„åº”ç”¨å°±æ˜¯åŒºå—é“¾ï¼Œå°±æ¯”å¦‚è¯´å‰æ®µæ—¶é—´ä»¥å¤ªåŠå®˜æ–¹å®£å¸ƒå…¶å…±è¯†æœºåˆ¶æ­£åœ¨ä»å·¥ä½œé‡è¯æ˜(PoW)è½¬å˜ä¸ºæƒç›Šè¯æ˜(PoS)ã€‚</p><p>åŒºå—é“¾ç³»ç»Ÿä½¿ç”¨çš„å…±è¯†ç®—æ³•éœ€è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯ <strong>æ‹œå åº­å°†å†›é—®é¢˜</strong> ï¼Œè¿™å’Œæˆ‘ä»¬æ—¥å¸¸æ¥è§¦åˆ°çš„ ZooKeeperã€Etcdã€Consul ç­‰åˆ†å¸ƒå¼ä¸­é—´ä»¶ä¸å¤ªä¸€æ ·ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥å¯¹ Paxos ç®—æ³•çš„å®šä¹‰åšä¸€ä¸ªæ€»ç»“ï¼š</p><ul><li>Paxos ç®—æ³•æ˜¯å…°ä¼¯ç‰¹åœ¨ <strong>1990</strong> å¹´æå‡ºäº†ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿå…±è¯†ç®—æ³•ã€‚</li><li>å…°ä¼¯ç‰¹å½“æ—¶æå‡ºçš„ Paxos ç®—æ³•ä¸»è¦åŒ…å« 2 ä¸ªéƒ¨åˆ†:Basic Paxos ç®—æ³•å’ŒMulti-Paxos æ€æƒ³ã€‚</li><li>Raft ç®—æ³•ã€ZAB åè®®ã€ Fast Paxos ç®—æ³•éƒ½æ˜¯åŸºäº Paxos ç®—æ³•æ”¹è¿›è€Œæ¥ã€‚</li></ul><h5 id="ä¸€è‡´æ€§-consistency-ä¸å…±è¯†-consensus" tabindex="-1"><a class="header-anchor" href="#ä¸€è‡´æ€§-consistency-ä¸å…±è¯†-consensus" aria-hidden="true">#</a> ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ä¸å…±è¯†ï¼ˆConsensusï¼‰</h5><p>å¾ˆå¤šäººä¼šè¯¯æŠŠ Paxos çœ‹ä½œæ˜¯ä¸€è‡´æ€§ç®—æ³•ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„è¯¯åŒºã€‚</p><p>âš ï¸æ³¨æ„ï¼š<strong>Paxos ä¸æ˜¯ä¸€è‡´æ€§ç®—æ³•è€Œæ˜¯å…±è¯†ç®—æ³•ï¼Œä¸€è‡´æ€§å’Œå…±è¯†å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚</strong></p><h5 id="basic-paxos-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#basic-paxos-ç®—æ³•" aria-hidden="true">#</a> Basic Paxos ç®—æ³•</h5><p>Basic Paxos ä¸­å­˜åœ¨ 3 ä¸ªé‡è¦çš„è§’è‰²ï¼š</p><ol><li><strong>æè®®è€…ï¼ˆProposerï¼‰</strong>ï¼šä¹Ÿå¯ä»¥å«åšåè°ƒè€…ï¼ˆcoordinatorï¼‰ï¼Œæè®®è€…è´Ÿè´£æ¥å—å®¢æˆ·ç«¯å‘èµ·çš„æè®®ï¼Œç„¶åå°è¯•è®©æ¥å—è€…æ¥å—è¯¥æè®®ï¼ŒåŒæ—¶ä¿è¯å³ä½¿å¤šä¸ªæè®®è€…çš„æè®®ä¹‹é—´äº§ç”Ÿäº†å†²çªï¼Œé‚£ä¹ˆç®—æ³•éƒ½èƒ½è¿›è¡Œä¸‹å»ï¼›</li><li><strong>æ¥å—è€…ï¼ˆAcceptorï¼‰</strong>ï¼šä¹Ÿå¯ä»¥å«åšæŠ•ç¥¨å‘˜ï¼ˆvoterï¼‰ï¼Œè´Ÿè´£å¯¹æè®®è€…çš„æè®®æŠ•ç¥¨ï¼ŒåŒæ—¶éœ€è¦è®°ä½è‡ªå·±çš„æŠ•ç¥¨å†å²ï¼›</li><li><strong>å­¦ä¹ è€…ï¼ˆLearnerï¼‰</strong>ï¼šå¦‚æœæœ‰è¶…è¿‡åŠæ•°æ¥å—è€…å°±æŸä¸ªæè®®è¾¾æˆäº†å…±è¯†ï¼Œé‚£ä¹ˆå­¦ä¹ è€…å°±éœ€è¦æ¥å—è¿™ä¸ªæè®®ï¼Œå¹¶å°±è¯¥æè®®ä½œå‡ºè¿ç®—ï¼Œç„¶åå°†è¿ç®—ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726133642419-e0cb7143.png" alt="image-20220726133642419" tabindex="0" loading="lazy"><figcaption>image-20220726133642419</figcaption></figure><h5 id="multi-paxos-æ€æƒ³" tabindex="-1"><a class="header-anchor" href="#multi-paxos-æ€æƒ³" aria-hidden="true">#</a> Multi Paxos æ€æƒ³</h5><p>å› ä¸ºå…°ä¼¯ç‰¹æåˆ°çš„ Multi-Paxos æ€æƒ³ï¼Œç¼ºå°‘ä»£ç å®ç°çš„å¿…è¦ç»†èŠ‚(æ¯”å¦‚æ€ä¹ˆé€‰ä¸¾é¢†å¯¼è€…)ï¼Œæ‰€ä»¥åœ¨ç†è§£ä¸Šæ¯”è¾ƒéš¾ã€‚</p><p>âš ï¸<strong>æ³¨æ„</strong> ï¼š Multi-Paxos åªæ˜¯ä¸€ç§æ€æƒ³ï¼Œè¿™ç§æ€æƒ³çš„æ ¸å¿ƒå°±æ˜¯é€šè¿‡å¤šä¸ª Basic Paxos å®ä¾‹å°±ä¸€ç³»åˆ—å€¼è¾¾æˆå…±è¯†ã€‚</p><p>äºŒé˜¶æ®µæäº¤æ˜¯è¾¾æˆå…±è¯†å¸¸ç”¨çš„æ–¹å¼ï¼ŒBasic Paxos å°±æ˜¯é€šè¿‡äºŒé˜¶æ®µæäº¤çš„æ–¹å¼æ¥è¾¾æˆå…±è¯†ã€‚Basic Paxos è¿˜æ”¯æŒå®¹é”™ï¼Œå°‘äºä¸€èˆ¬çš„èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶ï¼Œé›†ç¾¤ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚</p><h4 id="raft-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#raft-ç®—æ³•" aria-hidden="true">#</a> Raft ç®—æ³•</h4><p>å½“ä»Šçš„æ•°æ®ä¸­å¿ƒå’Œåº”ç”¨ç¨‹åºåœ¨é«˜åº¦åŠ¨æ€çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œä¸ºäº†åº”å¯¹é«˜åº¦åŠ¨æ€çš„ç¯å¢ƒï¼Œå®ƒä»¬é€šè¿‡é¢å¤–çš„æœåŠ¡å™¨è¿›è¡Œæ¨ªå‘æ‰©å±•ï¼Œå¹¶ä¸”æ ¹æ®éœ€æ±‚è¿›è¡Œæ‰©å±•å’Œæ”¶ç¼©ã€‚åŒæ—¶ï¼ŒæœåŠ¡å™¨å’Œç½‘ç»œæ•…éšœä¹Ÿå¾ˆå¸¸è§ã€‚</p><p>å› æ­¤ï¼Œç³»ç»Ÿå¿…é¡»åœ¨æ­£å¸¸æ“ä½œæœŸé—´å¤„ç†æœåŠ¡å™¨çš„ä¸Šä¸‹çº¿ã€‚å®ƒä»¬å¿…é¡»å¯¹å˜æ•…åšå‡ºååº”å¹¶åœ¨å‡ ç§’é’Ÿå†…è‡ªåŠ¨é€‚åº”ï¼›å¯¹å®¢æˆ·æ¥è¯´çš„è¯ï¼Œæ˜æ˜¾çš„ä¸­æ–­é€šå¸¸æ˜¯ä¸å¯æ¥å—çš„ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œåˆ†å¸ƒå¼å…±è¯†å¯ä»¥å¸®åŠ©åº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚</p><h5 id="æ‹œå åº­å°†å†›" tabindex="-1"><a class="header-anchor" href="#æ‹œå åº­å°†å†›" aria-hidden="true">#</a> æ‹œå åº­å°†å†›</h5><p>åœ¨ä»‹ç»å…±è¯†ç®—æ³•ä¹‹å‰ï¼Œå…ˆä»‹ç»ä¸€ä¸ªç®€åŒ–ç‰ˆæ‹œå åº­å°†å†›çš„ä¾‹å­æ¥å¸®åŠ©ç†è§£å…±è¯†ç®—æ³•ã€‚</p><blockquote><p>å‡è®¾å¤šä½æ‹œå åº­å°†å†›ä¸­æ²¡æœ‰å›å†›ï¼Œä¿¡ä½¿çš„ä¿¡æ¯å¯é ä½†æœ‰å¯èƒ½è¢«æš—æ€çš„æƒ…å†µä¸‹ï¼Œå°†å†›ä»¬å¦‚ä½•è¾¾æˆæ˜¯å¦è¦è¿›æ”»çš„ä¸€è‡´æ€§å†³å®šï¼Ÿ</p></blockquote><p>è§£å†³æ–¹æ¡ˆå¤§è‡´å¯ä»¥ç†è§£æˆï¼šå…ˆåœ¨æ‰€æœ‰çš„å°†å†›ä¸­é€‰å‡ºä¸€ä¸ªå¤§å°†å†›ï¼Œç”¨æ¥åšå‡ºæ‰€æœ‰çš„å†³å®šã€‚</p><p>ä¸¾ä¾‹å¦‚ä¸‹ï¼šå‡å¦‚ç°åœ¨ä¸€å…±æœ‰ 3 ä¸ªå°†å†› Aï¼ŒB å’Œ Cï¼Œæ¯ä¸ªå°†å†›éƒ½æœ‰ä¸€ä¸ªéšæœºæ—¶é—´çš„å€’è®¡æ—¶å™¨ï¼Œå€’è®¡æ—¶ä¸€ç»“æŸï¼Œè¿™ä¸ªå°†å†›å°±æŠŠè‡ªå·±å½“æˆå¤§å°†å†›å€™é€‰äººï¼Œç„¶åæ´¾ä¿¡ä½¿ä¼ é€’é€‰ä¸¾æŠ•ç¥¨çš„ä¿¡æ¯ç»™å°†å†› B å’Œ Cï¼Œå¦‚æœå°†å†› B å’Œ C è¿˜æ²¡æœ‰æŠŠè‡ªå·±å½“ä½œå€™é€‰äººï¼ˆè‡ªå·±çš„å€’è®¡æ—¶è¿˜æ²¡æœ‰ç»“æŸï¼‰ï¼Œå¹¶ä¸”æ²¡æœ‰æŠŠé€‰ä¸¾ç¥¨æŠ•ç»™å…¶ä»–äººï¼Œå®ƒä»¬å°±ä¼šæŠŠç¥¨æŠ•ç»™å°†å†› Aï¼Œä¿¡ä½¿å›åˆ°å°†å†› A æ—¶ï¼Œå°†å†› A çŸ¥é“è‡ªå·±æ”¶åˆ°äº†è¶³å¤Ÿçš„ç¥¨æ•°ï¼Œæˆä¸ºå¤§å°†å†›ã€‚åœ¨æœ‰äº†å¤§å°†å†›ä¹‹åï¼Œæ˜¯å¦éœ€è¦è¿›æ”»å°±ç”±å¤§å°†å†› A å†³å®šï¼Œç„¶åå†å»æ´¾ä¿¡ä½¿é€šçŸ¥å¦å¤–ä¸¤ä¸ªå°†å†›ï¼Œè‡ªå·±å·²ç»æˆä¸ºäº†å¤§å°†å†›ã€‚å¦‚æœä¸€æ®µæ—¶é—´è¿˜æ²¡æ”¶åˆ°å°†å†› B å’Œ C çš„å›å¤ï¼ˆä¿¡ä½¿å¯èƒ½ä¼šè¢«æš—æ€ï¼‰ï¼Œé‚£å°±å†é‡æ´¾ä¸€ä¸ªä¿¡ä½¿ï¼Œç›´åˆ°æ”¶åˆ°å›å¤ã€‚</p><h5 id="å…±è¯†ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#å…±è¯†ç®—æ³•" aria-hidden="true">#</a> å…±è¯†ç®—æ³•</h5><p>å…±è¯†æ˜¯å¯å®¹é”™ç³»ç»Ÿä¸­çš„ä¸€ä¸ªåŸºæœ¬é—®é¢˜ï¼šå³ä½¿é¢å¯¹æ•…éšœï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥åœ¨å…±äº«çŠ¶æ€ä¸Šè¾¾æˆä¸€è‡´ã€‚</p><p>å…±è¯†ç®—æ³•å…è®¸ä¸€ç»„èŠ‚ç‚¹åƒä¸€ä¸ªæ•´ä½“ä¸€æ ·ä¸€èµ·å·¥ä½œï¼Œå³ä½¿å…¶ä¸­çš„ä¸€äº›èŠ‚ç‚¹å‡ºç°æ•…éšœä¹Ÿèƒ½å¤Ÿç»§ç»­å·¥ä½œä¸‹å»ï¼Œå…¶æ­£ç¡®æ€§ä¸»è¦æ˜¯æºäºå¤åˆ¶çŠ¶æ€æœºçš„æ€§è´¨ï¼šä¸€ç»„<code>Server</code>çš„çŠ¶æ€æœºè®¡ç®—ç›¸åŒçŠ¶æ€çš„å‰¯æœ¬ï¼Œå³ä½¿æœ‰ä¸€éƒ¨åˆ†çš„<code>Server</code>å®•æœºäº†å®ƒä»¬ä»ç„¶èƒ½å¤Ÿç»§ç»­è¿è¡Œã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726134912102-b909b3cb.png" alt="image-20220726134912102" tabindex="0" loading="lazy"><figcaption>image-20220726134912102</figcaption></figure><p>ä¸€èˆ¬é€šè¿‡ä½¿ç”¨å¤åˆ¶æ—¥å¿—æ¥å®ç°å¤åˆ¶çŠ¶æ€æœºã€‚æ¯ä¸ª<code>Server</code>å­˜å‚¨ç€ä¸€ä»½åŒ…æ‹¬å‘½ä»¤åºåˆ—çš„æ—¥å¿—æ–‡ä»¶ï¼ŒçŠ¶æ€æœºä¼šæŒ‰é¡ºåºæ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚å› ä¸ºæ¯ä¸ªæ—¥å¿—åŒ…å«ç›¸åŒçš„å‘½ä»¤ï¼Œå¹¶ä¸”é¡ºåºä¹Ÿç›¸åŒï¼Œæ‰€ä»¥æ¯ä¸ªçŠ¶æ€æœºå¤„ç†ç›¸åŒçš„å‘½ä»¤åºåˆ—ã€‚ç”±äºçŠ¶æ€æœºæ˜¯ç¡®å®šæ€§çš„ï¼Œæ‰€ä»¥å¤„ç†ç›¸åŒçš„çŠ¶æ€ï¼Œå¾—åˆ°ç›¸åŒçš„è¾“å‡ºã€‚</p><p>å› æ­¤å…±è¯†ç®—æ³•çš„å·¥ä½œå°±æ˜¯ä¿æŒå¤åˆ¶æ—¥å¿—çš„ä¸€è‡´æ€§ã€‚æœåŠ¡å™¨ä¸Šçš„å…±è¯†æ¨¡å—ä»å®¢æˆ·ç«¯æ¥æ”¶å‘½ä»¤å¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ—¥å¿—ä¸­ã€‚å®ƒä¸å…¶ä»–æœåŠ¡å™¨ä¸Šçš„å…±è¯†æ¨¡å—é€šä¿¡ï¼Œä»¥ç¡®ä¿å³ä½¿æŸäº›æœåŠ¡å™¨å‘ç”Ÿæ•…éšœã€‚æ¯ä¸ªæ—¥å¿—æœ€ç»ˆåŒ…å«ç›¸åŒé¡ºåºçš„è¯·æ±‚ã€‚ä¸€æ—¦å‘½ä»¤è¢«æ­£ç¡®åœ°å¤åˆ¶ï¼Œå®ƒä»¬å°±è¢«ç§°ä¸ºå·²æäº¤ã€‚æ¯ä¸ªæœåŠ¡å™¨çš„çŠ¶æ€æœºæŒ‰ç…§æ—¥å¿—é¡ºåºå¤„ç†å·²æäº¤çš„å‘½ä»¤ï¼Œå¹¶å°†è¾“å‡ºè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå› æ­¤ï¼Œè¿™äº›æœåŠ¡å™¨å½¢æˆäº†ä¸€ä¸ªå•ä¸€çš„ã€é«˜åº¦å¯é çš„çŠ¶æ€æœºã€‚</p><p>é€‚ç”¨äºå®é™…ç³»ç»Ÿçš„å…±è¯†ç®—æ³•é€šå¸¸å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>å®‰å…¨ã€‚ç¡®ä¿åœ¨éæ‹œå åº­æ¡ä»¶ï¼ˆä¹Ÿå°±æ˜¯ä¸Šæ–‡ä¸­æåˆ°çš„ç®€æ˜“ç‰ˆæ‹œå åº­ï¼‰ä¸‹çš„å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬ç½‘ç»œå»¶è¿Ÿã€åˆ†åŒºã€åŒ…ä¸¢å¤±ã€å¤åˆ¶å’Œé‡æ–°æ’åºã€‚</li><li>é«˜å¯ç”¨ã€‚åªè¦å¤§å¤šæ•°æœåŠ¡å™¨éƒ½æ˜¯å¯æ“ä½œçš„ï¼Œå¹¶ä¸”å¯ä»¥ç›¸äº’é€šä¿¡ï¼Œä¹Ÿå¯ä»¥ä¸å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ï¼Œé‚£ä¹ˆè¿™äº›æœåŠ¡å™¨å°±å¯ä»¥çœ‹ä½œå®Œå…¨åŠŸèƒ½å¯ç”¨çš„ã€‚å› æ­¤ï¼Œä¸€ä¸ªå…¸å‹çš„ç”±äº”å°æœåŠ¡å™¨ç»„æˆçš„é›†ç¾¤å¯ä»¥å®¹å¿ä»»ä½•ä¸¤å°æœåŠ¡å™¨ç«¯æ•…éšœã€‚å‡è®¾æœåŠ¡å™¨å› åœæ­¢è€Œå‘ç”Ÿæ•…éšœï¼›å®ƒä»¬ç¨åå¯èƒ½ä¼šä»ç¨³å®šå­˜å‚¨ä¸Šçš„çŠ¶æ€ä¸­æ¢å¤å¹¶é‡æ–°åŠ å…¥é›†ç¾¤ã€‚</li><li>ä¸€è‡´æ€§ä¸ä¾èµ–æ—¶åºã€‚é”™è¯¯çš„æ—¶é’Ÿå’Œæç«¯çš„æ¶ˆæ¯å»¶è¿Ÿï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ä¹Ÿåªä¼šé€ æˆå¯ç”¨æ€§é—®é¢˜ï¼Œè€Œä¸ä¼šäº§ç”Ÿä¸€è‡´æ€§é—®é¢˜ã€‚</li><li>åœ¨é›†ç¾¤ä¸­å¤§å¤šæ•°æœåŠ¡å™¨å“åº”ï¼Œå‘½ä»¤å°±å¯ä»¥å®Œæˆï¼Œä¸ä¼šè¢«å°‘æ•°è¿è¡Œç¼“æ…¢çš„æœåŠ¡å™¨æ¥å½±å“æ•´ä½“ç³»ç»Ÿæ€§èƒ½ã€‚</li></ul><h5 id="èŠ‚ç‚¹ç±»å‹" tabindex="-1"><a class="header-anchor" href="#èŠ‚ç‚¹ç±»å‹" aria-hidden="true">#</a> èŠ‚ç‚¹ç±»å‹</h5><p>ä¸€ä¸ª Raft é›†ç¾¤åŒ…æ‹¬è‹¥å¹²æœåŠ¡å™¨ï¼Œä»¥å…¸å‹çš„ 5 æœåŠ¡å™¨é›†ç¾¤ä¸¾ä¾‹ã€‚åœ¨ä»»æ„çš„æ—¶é—´ï¼Œæ¯ä¸ªæœåŠ¡å™¨ä¸€å®šä¼šå¤„äºä»¥ä¸‹ä¸‰ä¸ªçŠ¶æ€ä¸­çš„ä¸€ä¸ªï¼š</p><ul><li><code>Leader</code>ï¼šè´Ÿè´£å‘èµ·å¿ƒè·³ï¼Œå“åº”å®¢æˆ·ç«¯ï¼Œåˆ›å»ºæ—¥å¿—ï¼ŒåŒæ­¥æ—¥å¿—ã€‚</li><li><code>Candidate</code>ï¼šLeader é€‰ä¸¾è¿‡ç¨‹ä¸­çš„ä¸´æ—¶è§’è‰²ï¼Œç”± Follower è½¬åŒ–è€Œæ¥ï¼Œå‘èµ·æŠ•ç¥¨å‚ä¸ç«é€‰ã€‚</li><li><code>Follower</code>ï¼šæ¥å— Leader çš„å¿ƒè·³å’Œæ—¥å¿—åŒæ­¥æ•°æ®ï¼ŒæŠ•ç¥¨ç»™ Candidateã€‚</li></ul><p>åœ¨æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€ä¸ªæœåŠ¡å™¨æ˜¯ Leaderï¼Œå‰©ä¸‹çš„æœåŠ¡å™¨æ˜¯ Followerã€‚Follower æ˜¯è¢«åŠ¨çš„ï¼Œå®ƒä»¬ä¸ä¼šå‘é€ä»»ä½•è¯·æ±‚ï¼Œåªæ˜¯å“åº”æ¥è‡ª Leader å’Œ Candidate çš„è¯·æ±‚ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726134943719-b46dfbe7.png" alt="image-20220726134943719" tabindex="0" loading="lazy"><figcaption>image-20220726134943719</figcaption></figure><h5 id="ä»»æœŸ" tabindex="-1"><a class="header-anchor" href="#ä»»æœŸ" aria-hidden="true">#</a> ä»»æœŸ</h5><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726134951395-2496d6b7.png" alt="image-20220726134951395" tabindex="0" loading="lazy"><figcaption>image-20220726134951395</figcaption></figure><p>å¦‚å›¾ 3 æ‰€ç¤ºï¼Œraft ç®—æ³•å°†æ—¶é—´åˆ’åˆ†ä¸ºä»»æ„é•¿åº¦çš„ä»»æœŸï¼ˆtermï¼‰ï¼Œä»»æœŸç”¨è¿ç»­çš„æ•°å­—è¡¨ç¤ºï¼Œçœ‹ä½œå½“å‰ term å·ã€‚æ¯ä¸€ä¸ªä»»æœŸçš„å¼€å§‹éƒ½æ˜¯ä¸€æ¬¡é€‰ä¸¾ï¼Œåœ¨é€‰ä¸¾å¼€å§‹æ—¶ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª Candidate ä¼šå°è¯•æˆä¸º Leaderã€‚å¦‚æœä¸€ä¸ª Candidate èµ¢å¾—äº†é€‰ä¸¾ï¼Œå®ƒå°±ä¼šåœ¨è¯¥ä»»æœŸå†…æ‹…ä»» Leaderã€‚å¦‚æœæ²¡æœ‰é€‰å‡º Leaderï¼Œå°†ä¼šå¼€å¯å¦ä¸€ä¸ªä»»æœŸï¼Œå¹¶ç«‹åˆ»å¼€å§‹ä¸‹ä¸€æ¬¡é€‰ä¸¾ã€‚raft ç®—æ³•ä¿è¯åœ¨ç»™å®šçš„ä¸€ä¸ªä»»æœŸæœ€å°‘è¦æœ‰ä¸€ä¸ª Leaderã€‚</p><p>æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå­˜å‚¨å½“å‰çš„ term å·ï¼Œå½“æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œé€šä¿¡æ—¶ä¼šäº¤æ¢å½“å‰çš„ term å·ï¼›å¦‚æœæœ‰æœåŠ¡å™¨å‘ç°è‡ªå·±çš„ term å·æ¯”å…¶ä»–äººå°ï¼Œé‚£ä¹ˆä»–ä¼šæ›´æ–°åˆ°è¾ƒå¤§çš„ term å€¼ã€‚å¦‚æœä¸€ä¸ª Candidate æˆ–è€… Leader å‘ç°è‡ªå·±çš„ term è¿‡æœŸäº†ï¼Œä»–ä¼šç«‹å³é€€å›æˆ Followerã€‚å¦‚æœä¸€å°æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚çš„ term å·æ˜¯è¿‡æœŸçš„ï¼Œé‚£ä¹ˆå®ƒä¼šæ‹’ç»æ­¤æ¬¡è¯·æ±‚ã€‚</p><h5 id="æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—" aria-hidden="true">#</a> æ—¥å¿—</h5><ul><li><code>entry</code>ï¼šæ¯ä¸€ä¸ªäº‹ä»¶æˆä¸º entryï¼Œåªæœ‰ Leader å¯ä»¥åˆ›å»º entryã€‚entry çš„å†…å®¹ä¸º<code>&lt;term,index,cmd&gt;</code>å…¶ä¸­ cmd æ˜¯å¯ä»¥åº”ç”¨åˆ°çŠ¶æ€æœºçš„æ“ä½œã€‚</li><li><code>log</code>ï¼šç”± entry æ„æˆçš„æ•°ç»„ï¼Œæ¯ä¸€ä¸ª entry éƒ½æœ‰ä¸€ä¸ªè¡¨æ˜è‡ªå·±åœ¨ log ä¸­çš„ indexã€‚åªæœ‰ Leader æ‰å¯ä»¥æ”¹å˜å…¶ä»–èŠ‚ç‚¹çš„ logã€‚entry æ€»æ˜¯å…ˆè¢« Leader æ·»åŠ åˆ°è‡ªå·±çš„ log æ•°ç»„ä¸­ï¼Œç„¶åå†å‘èµ·å…±è¯†è¯·æ±‚ï¼Œè·å¾—åŒæ„åæ‰ä¼šè¢« Leader æäº¤ç»™çŠ¶æ€æœºã€‚Follower åªèƒ½ä» Leader è·å–æ–°æ—¥å¿—å’Œå½“å‰çš„ commitIndexï¼Œç„¶åæŠŠå¯¹åº”çš„ entry åº”ç”¨åˆ°è‡ªå·±çš„çŠ¶æ€æœºä¸­ã€‚</li></ul><h5 id="é¢†å¯¼äººé€‰ä¸¾" tabindex="-1"><a class="header-anchor" href="#é¢†å¯¼äººé€‰ä¸¾" aria-hidden="true">#</a> é¢†å¯¼äººé€‰ä¸¾</h5><p>raft ä½¿ç”¨å¿ƒè·³æœºåˆ¶æ¥è§¦å‘ Leader çš„é€‰ä¸¾ã€‚</p><p>å¦‚æœä¸€å°æœåŠ¡å™¨èƒ½å¤Ÿæ”¶åˆ°æ¥è‡ª Leader æˆ–è€… Candidate çš„æœ‰æ•ˆä¿¡æ¯ï¼Œé‚£ä¹ˆå®ƒä¼šä¸€ç›´ä¿æŒä¸º Follower çŠ¶æ€ï¼Œå¹¶ä¸”åˆ·æ–°è‡ªå·±çš„ electionElapsedï¼Œé‡æ–°è®¡æ—¶ã€‚</p><p>Leader ä¼šå‘æ‰€æœ‰çš„ Follower å‘¨æœŸæ€§å‘é€å¿ƒè·³æ¥ä¿è¯è‡ªå·±çš„ Leader åœ°ä½ã€‚å¦‚æœä¸€ä¸ª Follower åœ¨ä¸€ä¸ªå‘¨æœŸå†…æ²¡æœ‰æ”¶åˆ°å¿ƒè·³ä¿¡æ¯ï¼Œå°±å«åšé€‰ä¸¾è¶…æ—¶ï¼Œç„¶åå®ƒå°±ä¼šè®¤ä¸ºæ­¤æ—¶æ²¡æœ‰å¯ç”¨çš„ Leaderï¼Œå¹¶ä¸”å¼€å§‹è¿›è¡Œä¸€æ¬¡é€‰ä¸¾ä»¥é€‰å‡ºä¸€ä¸ªæ–°çš„ Leaderã€‚</p><p>ä¸ºäº†å¼€å§‹æ–°çš„é€‰ä¸¾ï¼ŒFollower ä¼šè‡ªå¢è‡ªå·±çš„ term å·å¹¶ä¸”è½¬æ¢çŠ¶æ€ä¸º Candidateã€‚ç„¶åä»–ä¼šå‘æ‰€æœ‰èŠ‚ç‚¹å‘èµ· RequestVoteRPC è¯·æ±‚ï¼Œ Candidate çš„çŠ¶æ€ä¼šæŒç»­åˆ°ä»¥ä¸‹æƒ…å†µå‘ç”Ÿï¼š</p><ul><li>èµ¢å¾—é€‰ä¸¾</li><li>å…¶ä»–èŠ‚ç‚¹èµ¢å¾—é€‰ä¸¾</li><li>ä¸€è½®é€‰ä¸¾ç»“æŸï¼Œæ— äººèƒœå‡º</li></ul><p>èµ¢å¾—é€‰ä¸¾çš„æ¡ä»¶æ˜¯ï¼šä¸€ä¸ª Candidate åœ¨ä¸€ä¸ªä»»æœŸå†…æ”¶åˆ°äº†æ¥è‡ªé›†ç¾¤å†…çš„å¤šæ•°é€‰ç¥¨<code>ï¼ˆN/2+1ï¼‰</code>ï¼Œå°±å¯ä»¥æˆä¸º Leaderã€‚</p><p>åœ¨ Candidate ç­‰å¾…é€‰ç¥¨çš„æ—¶å€™ï¼Œå®ƒå¯èƒ½æ”¶åˆ°å…¶ä»–èŠ‚ç‚¹å£°æ˜è‡ªå·±æ˜¯ Leader çš„å¿ƒè·³ï¼Œæ­¤æ—¶æœ‰ä¸¤ç§æƒ…å†µï¼š</p><ul><li>è¯¥ Leader çš„ term å·å¤§äºç­‰äºè‡ªå·±çš„ term å·ï¼Œè¯´æ˜å¯¹æ–¹å·²ç»æˆä¸º Leaderï¼Œåˆ™è‡ªå·±å›é€€ä¸º Followerã€‚</li><li>è¯¥ Leader çš„ term å·å°äºè‡ªå·±çš„ term å·ï¼Œé‚£ä¹ˆä¼šæ‹’ç»è¯¥è¯·æ±‚å¹¶è®©è¯¥èŠ‚ç‚¹æ›´æ–° termã€‚</li></ul><p>ç”±äºå¯èƒ½åŒä¸€æ—¶åˆ»å‡ºç°å¤šä¸ª Candidateï¼Œå¯¼è‡´æ²¡æœ‰ Candidate è·å¾—å¤§å¤šæ•°é€‰ç¥¨ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–æ‰‹æ®µæ¥é‡æ–°åˆ†é…é€‰ç¥¨çš„è¯ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæ— é™é‡å¤ä¸‹å»ã€‚</p><p>raft ä½¿ç”¨äº†éšæœºçš„é€‰ä¸¾è¶…æ—¶æ—¶é—´æ¥é¿å…ä¸Šè¿°æƒ…å†µã€‚æ¯ä¸€ä¸ª Candidate åœ¨å‘èµ·é€‰ä¸¾åï¼Œéƒ½ä¼šéšæœºåŒ–ä¸€ä¸ªæ–°çš„æšä¸¾è¶…æ—¶æ—¶é—´ï¼Œè¿™ç§æœºåˆ¶ä½¿å¾—å„ä¸ªæœåŠ¡å™¨èƒ½å¤Ÿåˆ†æ•£å¼€æ¥ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹åªæœ‰ä¸€ä¸ªæœåŠ¡å™¨ä¼šç‡å…ˆè¶…æ—¶ï¼›å®ƒä¼šåœ¨å…¶ä»–æœåŠ¡å™¨è¶…æ—¶ä¹‹å‰èµ¢å¾—é€‰ä¸¾ã€‚</p><h5 id="æ—¥å¿—å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—å¤åˆ¶" aria-hidden="true">#</a> æ—¥å¿—å¤åˆ¶</h5><p>ä¸€æ—¦é€‰å‡ºäº† Leaderï¼Œå®ƒå°±å¼€å§‹æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚æ¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½åŒ…å«ä¸€æ¡éœ€è¦è¢«å¤åˆ¶çŠ¶æ€æœºï¼ˆ<code>Replicated State Mechine</code>ï¼‰æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><p>Leader æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œä¼šç”Ÿæˆä¸€ä¸ª entryï¼ŒåŒ…å«<code>&lt;index,term,cmd&gt;</code>ï¼Œå†å°†è¿™ä¸ª entry æ·»åŠ åˆ°è‡ªå·±çš„æ—¥å¿—æœ«å°¾åï¼Œå‘æ‰€æœ‰çš„èŠ‚ç‚¹å¹¿æ’­è¯¥ entryï¼Œè¦æ±‚å…¶ä»–æœåŠ¡å™¨å¤åˆ¶è¿™æ¡ entryã€‚</p><p>å¦‚æœ Follower æ¥å—è¯¥ entryï¼Œåˆ™ä¼šå°† entry æ·»åŠ åˆ°è‡ªå·±çš„æ—¥å¿—åé¢ï¼ŒåŒæ—¶è¿”å›ç»™ Leader åŒæ„ã€‚</p><p>å¦‚æœ Leader æ”¶åˆ°äº†å¤šæ•°çš„æˆåŠŸå“åº”ï¼ŒLeader ä¼šå°†è¿™ä¸ª entry åº”ç”¨åˆ°è‡ªå·±çš„çŠ¶æ€æœºä¸­ï¼Œä¹‹åå¯ä»¥æˆä¸ºè¿™ä¸ª entry æ˜¯ committed çš„ï¼Œå¹¶ä¸”å‘å®¢æˆ·ç«¯è¿”å›æ‰§è¡Œç»“æœã€‚</p><p>raft ä¿è¯ä»¥ä¸‹ä¸¤ä¸ªæ€§è´¨ï¼š</p><ul><li>åœ¨ä¸¤ä¸ªæ—¥å¿—é‡Œï¼Œæœ‰ä¸¤ä¸ª entry æ‹¥æœ‰ç›¸åŒçš„ index å’Œ termï¼Œé‚£ä¹ˆå®ƒä»¬ä¸€å®šæœ‰ç›¸åŒçš„ cmd</li><li>åœ¨ä¸¤ä¸ªæ—¥å¿—é‡Œï¼Œæœ‰ä¸¤ä¸ª entry æ‹¥æœ‰ç›¸åŒçš„ index å’Œ termï¼Œé‚£ä¹ˆå®ƒä»¬å‰é¢çš„ entry ä¹Ÿä¸€å®šç›¸åŒ</li></ul><p>é€šè¿‡â€œä»…æœ‰ Leader å¯ä»¥ç”Ÿå­˜ entryâ€æ¥ä¿è¯ç¬¬ä¸€ä¸ªæ€§è´¨ï¼Œç¬¬äºŒä¸ªæ€§è´¨éœ€è¦ä¸€è‡´æ€§æ£€æŸ¥æ¥è¿›è¡Œä¿è¯ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒLeader å’Œ Follower çš„æ—¥å¿—ä¿æŒä¸€è‡´ï¼Œç„¶åï¼ŒLeader çš„å´©æºƒä¼šå¯¼è‡´æ—¥å¿—ä¸ä¸€æ ·ï¼Œè¿™æ ·ä¸€è‡´æ€§æ£€æŸ¥ä¼šäº§ç”Ÿå¤±è´¥ã€‚Leader é€šè¿‡å¼ºåˆ¶ Follower å¤åˆ¶è‡ªå·±çš„æ—¥å¿—æ¥å¤„ç†æ—¥å¿—çš„ä¸ä¸€è‡´ã€‚è¿™å°±æ„å‘³ç€ï¼Œåœ¨ Follower ä¸Šçš„å†²çªæ—¥å¿—ä¼šè¢«é¢†å¯¼è€…çš„æ—¥å¿—è¦†ç›–ã€‚</p><p>ä¸ºäº†ä½¿å¾— Follower çš„æ—¥å¿—å’Œè‡ªå·±çš„æ—¥å¿—ä¸€è‡´ï¼ŒLeader éœ€è¦æ‰¾åˆ° Follower ä¸å®ƒæ—¥å¿—ä¸€è‡´çš„åœ°æ–¹ï¼Œç„¶ååˆ é™¤ Follower åœ¨è¯¥ä½ç½®ä¹‹åçš„æ—¥å¿—ï¼Œæ¥ç€æŠŠè¿™ä¹‹åçš„æ—¥å¿—å‘é€ç»™ Followerã€‚</p><p><code>Leader</code> ç»™æ¯ä¸€ä¸ª<code>Follower</code> ç»´æŠ¤äº†ä¸€ä¸ª <code>nextIndex</code>ï¼Œå®ƒè¡¨ç¤º <code>Leader</code> å°†è¦å‘é€ç»™è¯¥è¿½éšè€…çš„ä¸‹ä¸€æ¡æ—¥å¿—æ¡ç›®çš„ç´¢å¼•ã€‚å½“ä¸€ä¸ª <code>Leader</code> å¼€å§‹æŒæƒæ—¶ï¼Œå®ƒä¼šå°† <code>nextIndex</code> åˆå§‹åŒ–ä¸ºå®ƒçš„æœ€æ–°çš„æ—¥å¿—æ¡ç›®ç´¢å¼•æ•°+1ã€‚å¦‚æœä¸€ä¸ª <code>Follower</code> çš„æ—¥å¿—å’Œ <code>Leader</code> çš„ä¸ä¸€è‡´ï¼Œ<code>AppendEntries</code> ä¸€è‡´æ€§æ£€æŸ¥ä¼šåœ¨ä¸‹ä¸€æ¬¡ <code>AppendEntries RPC</code> æ—¶è¿”å›å¤±è´¥ã€‚åœ¨å¤±è´¥ä¹‹åï¼Œ<code>Leader</code> ä¼šå°† <code>nextIndex</code> é€’å‡ç„¶åé‡è¯• <code>AppendEntries RPC</code>ã€‚æœ€ç»ˆ <code>nextIndex</code> ä¼šè¾¾åˆ°ä¸€ä¸ª <code>Leader</code> å’Œ <code>Follower</code> æ—¥å¿—ä¸€è‡´çš„åœ°æ–¹ã€‚è¿™æ—¶ï¼Œ<code>AppendEntries</code> ä¼šè¿”å›æˆåŠŸï¼Œ<code>Follower</code> ä¸­å†²çªçš„æ—¥å¿—æ¡ç›®éƒ½è¢«ç§»é™¤äº†ï¼Œå¹¶ä¸”æ·»åŠ æ‰€ç¼ºå°‘çš„ä¸Šäº† <code>Leader</code> çš„æ—¥å¿—æ¡ç›®ã€‚ä¸€æ—¦ <code>AppendEntries</code> è¿”å›æˆåŠŸï¼Œ<code>Follower</code> å’Œ <code>Leader</code> çš„æ—¥å¿—å°±ä¸€è‡´äº†ï¼Œè¿™æ ·çš„çŠ¶æ€ä¼šä¿æŒåˆ°è¯¥ä»»æœŸç»“æŸã€‚</p><h5 id="é€‰ä¸¾é™åˆ¶" tabindex="-1"><a class="header-anchor" href="#é€‰ä¸¾é™åˆ¶" aria-hidden="true">#</a> é€‰ä¸¾é™åˆ¶</h5><p>Leader éœ€è¦ä¿è¯è‡ªå·±å­˜å‚¨å…¨éƒ¨å·²ç»æäº¤çš„æ—¥å¿—æ¡ç›®ã€‚è¿™æ ·æ‰å¯ä»¥ä½¿æ—¥å¿—æ¡ç›®åªæœ‰ä¸€ä¸ªæµå‘ï¼šä» Leader æµå‘ Followerï¼ŒLeader æ°¸è¿œä¸ä¼šè¦†ç›–å·²ç»å­˜åœ¨çš„æ—¥å¿—æ¡ç›®ã€‚</p><p>æ¯ä¸ª Candidate å‘é€ RequestVoteRPC æ—¶ï¼Œéƒ½ä¼šå¸¦ä¸Šæœ€åä¸€ä¸ª entry çš„ä¿¡æ¯ã€‚æ‰€æœ‰èŠ‚ç‚¹æ”¶åˆ°æŠ•ç¥¨ä¿¡æ¯æ—¶ï¼Œä¼šå¯¹è¯¥ entry è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå‘ç°è‡ªå·±çš„æ›´æ–°ï¼Œåˆ™æ‹’ç»æŠ•ç¥¨ç»™è¯¥ Candidateã€‚</p><p>åˆ¤æ–­æ—¥å¿—æ–°æ—§çš„æ–¹å¼ï¼šå¦‚æœä¸¤ä¸ªæ—¥å¿—çš„ term ä¸åŒï¼Œterm å¤§çš„æ›´æ–°ï¼›å¦‚æœ term ç›¸åŒï¼Œæ›´é•¿çš„ index æ›´æ–°ã€‚</p><h5 id="èŠ‚ç‚¹å´©æºƒ" tabindex="-1"><a class="header-anchor" href="#èŠ‚ç‚¹å´©æºƒ" aria-hidden="true">#</a> èŠ‚ç‚¹å´©æºƒ</h5><p>å¦‚æœ Leader å´©æºƒï¼Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹åœ¨ electionTimeout æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ° Leader çš„å¿ƒè·³ä¿¡æ¯å°±ä¼šè§¦å‘æ–°ä¸€è½®çš„é€‰ä¸»ï¼Œåœ¨é€‰ä¸»æœŸé—´æ•´ä¸ªé›†ç¾¤å¯¹å¤–æ˜¯ä¸å¯ç”¨çš„ã€‚</p><p>å¦‚æœ Follower å’Œ Candidate å´©æºƒï¼Œå¤„ç†æ–¹å¼ä¼šç®€å•å¾ˆå¤šã€‚ä¹‹åå‘é€ç»™å®ƒçš„ RequestVoteRPC å’Œ AppendEntriesRPC ä¼šå¤±è´¥ã€‚ç”±äº raft çš„æ‰€æœ‰è¯·æ±‚éƒ½æ˜¯å¹‚ç­‰çš„ï¼Œæ‰€ä»¥å¤±è´¥çš„è¯ä¼šæ— é™çš„é‡è¯•ã€‚å¦‚æœå´©æºƒæ¢å¤åï¼Œå°±å¯ä»¥æ”¶åˆ°æ–°çš„è¯·æ±‚ï¼Œç„¶åé€‰æ‹©è¿½åŠ æˆ–è€…æ‹’ç» entryã€‚</p><h5 id="æ—¶é—´ä¸å¯ç”¨æ€§" tabindex="-1"><a class="header-anchor" href="#æ—¶é—´ä¸å¯ç”¨æ€§" aria-hidden="true">#</a> æ—¶é—´ä¸å¯ç”¨æ€§</h5><p>raft çš„è¦æ±‚ä¹‹ä¸€å°±æ˜¯å®‰å…¨æ€§ä¸ä¾èµ–äºæ—¶é—´ï¼šç³»ç»Ÿä¸èƒ½ä»…ä»…å› ä¸ºä¸€äº›äº‹ä»¶å‘ç”Ÿçš„æ¯”é¢„æƒ³çš„å¿«ä¸€äº›æˆ–è€…æ…¢ä¸€äº›å°±äº§ç”Ÿé”™è¯¯ã€‚ä¸ºäº†ä¿è¯ä¸Šè¿°è¦æ±‚ï¼Œæœ€å¥½èƒ½æ»¡è¶³ä»¥ä¸‹çš„æ—¶é—´æ¡ä»¶ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>broadcastTime &lt;&lt; electionTimeout &lt;&lt; MTBF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>broadcastTime</code>ï¼šå‘å…¶ä»–èŠ‚ç‚¹å¹¶å‘å‘é€æ¶ˆæ¯çš„å¹³å‡å“åº”æ—¶é—´ï¼›</li><li><code>electionTimeout</code>ï¼šé€‰ä¸¾è¶…æ—¶æ—¶é—´ï¼›</li><li><code>MTBF(mean time between failures)</code>ï¼šå•å°æœºå™¨çš„å¹³å‡å¥åº·æ—¶é—´ï¼›</li></ul><p><code>broadcastTime</code>åº”è¯¥æ¯”<code>electionTimeout</code>å°ä¸€ä¸ªæ•°é‡çº§ï¼Œä¸ºçš„æ˜¯ä½¿<code>Leader</code>èƒ½å¤ŸæŒç»­å‘é€å¿ƒè·³ä¿¡æ¯ï¼ˆheartbeatï¼‰æ¥é˜»æ­¢<code>Follower</code>å¼€å§‹é€‰ä¸¾ï¼›</p><p><code>electionTimeout</code>ä¹Ÿè¦æ¯”<code>MTBF</code>å°å‡ ä¸ªæ•°é‡çº§ï¼Œä¸ºçš„æ˜¯ä½¿å¾—ç³»ç»Ÿç¨³å®šè¿è¡Œã€‚å½“<code>Leader</code>å´©æºƒæ—¶ï¼Œå¤§çº¦ä¼šåœ¨æ•´ä¸ª<code>electionTimeout</code>çš„æ—¶é—´å†…ä¸å¯ç”¨ï¼›æˆ‘ä»¬å¸Œæœ›è¿™ç§æƒ…å†µä»…å å…¨éƒ¨æ—¶é—´çš„å¾ˆå°ä¸€éƒ¨åˆ†ã€‚</p><p>ç”±äº<code>broadcastTime</code>å’Œ<code>MTBF</code>æ˜¯ç”±ç³»ç»Ÿå†³å®šçš„å±æ€§ï¼Œå› æ­¤éœ€è¦å†³å®š<code>electionTimeout</code>çš„æ—¶é—´ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒbroadcastTime ä¸€èˆ¬ä¸º <code>0.5ï½20ms</code>ï¼ŒelectionTimeout å¯ä»¥è®¾ç½®ä¸º <code>10ï½500ms</code>ï¼ŒMTBF ä¸€èˆ¬ä¸ºä¸€ä¸¤ä¸ªæœˆã€‚</p><h3 id="äº†è§£rpcå—" tabindex="-1"><a class="header-anchor" href="#äº†è§£rpcå—" aria-hidden="true">#</a> äº†è§£RPCå—ï¼Ÿ</h3><p>ä¸€è¨€è”½ä¹‹ï¼š<strong>RPC ï¼ˆRemote Procedure Callï¼‰çš„å‡ºç°å°±æ˜¯ä¸ºäº†è®©ä½ è°ƒç”¨è¿œç¨‹æ–¹æ³•åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•ã€‚</strong></p><p>ä¸ºäº†èƒ½å¤Ÿå¸®åŠ©å°ä¼™ä¼´ä»¬ç†è§£ RPC åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ª RPCçš„ æ ¸å¿ƒåŠŸèƒ½çœ‹ä½œæ˜¯ä¸‹é¢ğŸ‘‡ 6 ä¸ªéƒ¨åˆ†å®ç°çš„ï¼š</p><ol><li><strong>å®¢æˆ·ç«¯ï¼ˆæœåŠ¡æ¶ˆè´¹ç«¯ï¼‰</strong> ï¼šè°ƒç”¨è¿œç¨‹æ–¹æ³•çš„ä¸€ç«¯ã€‚</li><li><strong>å®¢æˆ·ç«¯ Stubï¼ˆæ¡©ï¼‰</strong> ï¼š è¿™å…¶å®å°±æ˜¯ä¸€ä»£ç†ç±»ã€‚ä»£ç†ç±»ä¸»è¦åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠä½ è°ƒç”¨æ–¹æ³•ã€ç±»ã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯ä¼ é€’åˆ°æœåŠ¡ç«¯ã€‚</li><li><strong>ç½‘ç»œä¼ è¾“</strong> ï¼š ç½‘ç»œä¼ è¾“å°±æ˜¯ä½ è¦æŠŠä½ è°ƒç”¨çš„æ–¹æ³•çš„ä¿¡æ¯æ¯”å¦‚è¯´å‚æ•°å•Šè¿™äº›ä¸œè¥¿ä¼ è¾“åˆ°æœåŠ¡ç«¯ï¼Œç„¶åæœåŠ¡ç«¯æ‰§è¡Œå®Œä¹‹åå†æŠŠè¿”å›ç»“æœé€šè¿‡ç½‘ç»œä¼ è¾“ç»™ä½ ä¼ è¾“å›æ¥ã€‚ç½‘ç»œä¼ è¾“çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§æ¯”å¦‚æœ€è¿‘åŸºæœ¬çš„ Socketæˆ–è€…æ€§èƒ½ä»¥åŠå°è£…æ›´åŠ ä¼˜ç§€çš„ Nettyï¼ˆæ¨èï¼‰ã€‚</li><li><strong>æœåŠ¡ç«¯ Stubï¼ˆæ¡©ï¼‰</strong> ï¼šè¿™ä¸ªæ¡©å°±ä¸æ˜¯ä»£ç†ç±»äº†ã€‚æˆ‘è§‰å¾—ç†è§£ä¸ºæ¡©å®é™…ä¸å¤ªå¥½ï¼Œå¤§å®¶æ³¨æ„ä¸€ä¸‹å°±å¥½ã€‚è¿™é‡Œçš„æœåŠ¡ç«¯ Stub å®é™…æŒ‡çš„å°±æ˜¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ‰§è¡Œæ–¹æ³•çš„è¯·æ±‚åï¼Œå»æŒ‡å®šå¯¹åº”çš„æ–¹æ³•ç„¶åè¿”å›ç»“æœç»™å®¢æˆ·ç«¯çš„ç±»ã€‚</li><li><strong>æœåŠ¡ç«¯ï¼ˆæœåŠ¡æä¾›ç«¯ï¼‰</strong> ï¼šæä¾›è¿œç¨‹æ–¹æ³•çš„ä¸€ç«¯ã€‚</li></ol><p>å…·ä½“åŸç†å›¾å¦‚ä¸‹ï¼Œåé¢æˆ‘ä¼šä¸²èµ·æ¥å°†æ•´ä¸ªRPCçš„è¿‡ç¨‹ç»™å¤§å®¶è¯´ä¸€ä¸‹ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220602105047295-7ee41cbc.png" alt="image-20220609151233412" tabindex="0" loading="lazy"><figcaption>image-20220609151233412</figcaption></figure><ol><li>æœåŠ¡æ¶ˆè´¹ç«¯ï¼ˆclientï¼‰ä»¥æœ¬åœ°è°ƒç”¨çš„æ–¹å¼è°ƒç”¨è¿œç¨‹æœåŠ¡ï¼›</li><li>å®¢æˆ·ç«¯ Stubï¼ˆclient stubï¼‰ æ¥æ”¶åˆ°è°ƒç”¨åè´Ÿè´£å°†æ–¹æ³•ã€å‚æ•°ç­‰ç»„è£…æˆèƒ½å¤Ÿè¿›è¡Œç½‘ç»œä¼ è¾“çš„æ¶ˆæ¯ä½“ï¼ˆåºåˆ—åŒ–ï¼‰ï¼š<code>RpcRequest</code>ï¼›</li><li>å®¢æˆ·ç«¯ Stubï¼ˆclient stubï¼‰ æ‰¾åˆ°è¿œç¨‹æœåŠ¡çš„åœ°å€ï¼Œå¹¶å°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡æä¾›ç«¯ï¼›</li><li>æœåŠ¡ç«¯ Stubï¼ˆæ¡©ï¼‰æ”¶åˆ°æ¶ˆæ¯å°†æ¶ˆæ¯ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡: <code>RpcRequest</code>ï¼›</li><li>æœåŠ¡ç«¯ Stubï¼ˆæ¡©ï¼‰æ ¹æ® <code>RpcRequest</code>ä¸­çš„ç±»ã€æ–¹æ³•ã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯è°ƒç”¨æœ¬åœ°çš„æ–¹æ³•ï¼›</li><li>æœåŠ¡ç«¯ Stubï¼ˆæ¡©ï¼‰å¾—åˆ°æ–¹æ³•æ‰§è¡Œç»“æœå¹¶å°†ç»„è£…æˆèƒ½å¤Ÿè¿›è¡Œç½‘ç»œä¼ è¾“çš„æ¶ˆæ¯ä½“ï¼š<code>RpcResponse</code>ï¼ˆåºåˆ—åŒ–ï¼‰å‘é€è‡³æ¶ˆè´¹æ–¹ï¼›</li><li>å®¢æˆ·ç«¯ Stubï¼ˆclient stubï¼‰æ¥æ”¶åˆ°æ¶ˆæ¯å¹¶å°†æ¶ˆæ¯ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡:<code>RpcResponse</code> ï¼Œè¿™æ ·ä¹Ÿå°±å¾—åˆ°äº†æœ€ç»ˆç»“æœã€‚over!</li></ol><p>ç›¸ä¿¡å°ä¼™ä¼´ä»¬çœ‹å®Œä¸Šé¢çš„è®²è§£ä¹‹åï¼Œå·²ç»äº†è§£äº† RPC çš„åŸç†ã€‚</p><p>è™½ç„¶ç¯‡å¹…ä¸å¤šï¼Œä½†æ˜¯åŸºæœ¬æŠŠ RPC æ¡†æ¶çš„æ ¸å¿ƒåŸç†è®²æ¸…æ¥šäº†ï¼å¦å¤–ï¼Œå¯¹äºä¸Šé¢çš„æŠ€æœ¯ç»†èŠ‚ï¼Œæˆ‘ä¼šåœ¨åé¢çš„ç« èŠ‚ä»‹ç»åˆ°ã€‚</p><p><strong>æœ€åï¼Œå¯¹äº RPC çš„åŸç†ï¼Œå¸Œæœ›å°ä¼™ä¼´ä¸å•å•è¦ç†è§£ï¼Œè¿˜è¦èƒ½å¤Ÿè‡ªå·±ç”»å‡ºæ¥å¹¶ä¸”èƒ½å¤Ÿç»™åˆ«äººè®²å‡ºæ¥ã€‚å› ä¸ºï¼Œåœ¨é¢è¯•ä¸­è¿™ä¸ªé—®é¢˜åœ¨é¢è¯•å®˜é—®åˆ° RPC ç›¸å…³å†…å®¹çš„æ—¶å€™åŸºæœ¬éƒ½ä¼šç¢°åˆ°ã€‚</strong></p><h3 id="æœ‰å“ªäº›å¸¸è§çš„-rpc-æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#æœ‰å“ªäº›å¸¸è§çš„-rpc-æ¡†æ¶" aria-hidden="true">#</a> æœ‰å“ªäº›å¸¸è§çš„ RPC æ¡†æ¶ï¼Ÿ</h3><p>æˆ‘ä»¬è¿™é‡Œè¯´çš„ RPC æ¡†æ¶æŒ‡çš„æ˜¯å¯ä»¥è®©å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨æœåŠ¡ç«¯æ–¹æ³•ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•çš„æ¡†æ¶ï¼Œæ¯”å¦‚æˆ‘ä¸‹é¢ä»‹ç»çš„ Dubboã€Motanã€gRPCè¿™äº›ã€‚ å¦‚æœéœ€è¦å’Œ HTTP åè®®æ‰“äº¤é“ï¼Œè§£æå’Œå°è£… HTTP è¯·æ±‚å’Œå“åº”ã€‚è¿™ç±»æ¡†æ¶å¹¶ä¸èƒ½ç®—æ˜¯â€œRPC æ¡†æ¶â€ï¼Œæ¯”å¦‚Feign</p><h4 id="dubbo" tabindex="-1"><a class="header-anchor" href="#dubbo" aria-hidden="true">#</a> Dubbo</h4><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220723235648648-7d469cbe.png" alt="image-20220723235648648" tabindex="0" loading="lazy"><figcaption>image-20220723235648648</figcaption></figure><p>Apache Dubbo æ˜¯ä¸€æ¬¾å¾®æœåŠ¡æ¡†æ¶ï¼Œä¸ºå¤§è§„æ¨¡å¾®æœåŠ¡å®è·µæä¾›é«˜æ€§èƒ½ RPC é€šä¿¡ã€æµé‡æ²»ç†ã€å¯è§‚æµ‹æ€§ç­‰è§£å†³æ–¹æ¡ˆï¼Œ æ¶µç›– Javaã€Golang ç­‰å¤šç§è¯­è¨€ SDK å®ç°ã€‚</p><p>Dubbo æä¾›äº†ä»æœåŠ¡å®šä¹‰ã€æœåŠ¡å‘ç°ã€æœåŠ¡é€šä¿¡åˆ°æµé‡ç®¡æ§ç­‰å‡ ä¹æ‰€æœ‰çš„æœåŠ¡æ²»ç†èƒ½åŠ›ï¼Œæ”¯æŒ Triple åè®®ï¼ˆåŸºäº HTTP/2 ä¹‹ä¸Šå®šä¹‰çš„ä¸‹ä¸€ä»£ RPC é€šä¿¡åè®®ï¼‰ã€åº”ç”¨çº§æœåŠ¡å‘ç°ã€Dubbo Mesh ï¼ˆDubbo3 èµ‹äºˆäº†å¾ˆå¤šäº‘åŸç”Ÿå‹å¥½çš„æ–°ç‰¹æ€§ï¼‰ç­‰ç‰¹æ€§ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220723235657177-bc5cacd9.png" alt="image-20220723235657177" tabindex="0" loading="lazy"><figcaption>image-20220723235657177</figcaption></figure><p>Dubbo æ˜¯ç”±é˜¿é‡Œå¼€æºï¼Œåæ¥åŠ å…¥äº† Apache ã€‚æ­£å¼ç”±äº Dubbo çš„å‡ºç°ï¼Œæ‰ä½¿å¾—è¶Šæ¥è¶Šå¤šçš„å…¬å¸å¼€å§‹ä½¿ç”¨ä»¥åŠæ¥å—åˆ†å¸ƒå¼æ¶æ„ã€‚</p><p>Dubbo ç®—çš„æ˜¯æ¯”è¾ƒä¼˜ç§€çš„å›½äº§å¼€æºé¡¹ç›®äº†ï¼Œå®ƒçš„æºç ä¹Ÿæ˜¯éå¸¸å€¼å¾—å­¦ä¹ å’Œé˜…è¯»çš„ï¼</p><ul><li>Github ï¼š<a href="https://github.com/apache/incubator-dubbo" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-dubbo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>å®˜ç½‘ï¼š<a href="https://dubbo.apache.org/zh/" target="_blank" rel="noopener noreferrer">https://dubbo.apache.org/zh/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h4 id="motan" tabindex="-1"><a class="header-anchor" href="#motan" aria-hidden="true">#</a> Motan</h4><p>Motan æ˜¯æ–°æµªå¾®åšå¼€æºçš„ä¸€æ¬¾ RPC æ¡†æ¶ï¼Œæ®è¯´åœ¨æ–°æµªå¾®åšæ­£æ”¯æ’‘ç€åƒäº¿æ¬¡è°ƒç”¨ã€‚ä¸è¿‡ç¬”è€…å€’æ˜¯å¾ˆå°‘çœ‹åˆ°æœ‰å…¬å¸ä½¿ç”¨ï¼Œè€Œä¸”ç½‘ä¸Šçš„èµ„æ–™ä¹Ÿæ¯”è¾ƒå°‘ã€‚</p><p>å¾ˆå¤šäººå–œæ¬¢æ‹¿ Motan å’Œ Dubbo ä½œæ¯”è¾ƒï¼Œæ¯•ç«Ÿéƒ½æ˜¯å›½å†…å¤§å…¬å¸å¼€æºçš„ã€‚ç¬”è€…åœ¨æŸ¥é˜…äº†å¾ˆå¤šèµ„æ–™ï¼Œä»¥åŠç®€å•æŸ¥çœ‹äº†å…¶æºç ä¹‹åå‘ç°ï¼š<strong>Motan æ›´åƒæ˜¯ä¸€ä¸ªç²¾ç®€ç‰ˆçš„ Dubboï¼Œå¯èƒ½æ˜¯å€Ÿé‰´äº† Dubbo çš„æ€æƒ³ï¼ŒMotan çš„è®¾è®¡æ›´åŠ ç²¾ç®€ï¼ŒåŠŸèƒ½æ›´åŠ çº¯ç²¹ã€‚</strong></p><p>ä¸è¿‡ï¼Œæˆ‘ä¸æ¨èä½ åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ Motanã€‚å¦‚æœä½ è¦æ˜¯å…¬å¸å®é™…ä½¿ç”¨çš„è¯ï¼Œè¿˜æ˜¯æ¨è Dubbo ï¼Œå…¶ç¤¾åŒºæ´»è·ƒåº¦ä»¥åŠç”Ÿæ€éƒ½è¦å¥½å¾ˆå¤šã€‚</p><ul><li>ä» Motan çœ‹ RPC æ¡†æ¶è®¾è®¡ï¼š<a href="http://kriszhang.com/motan-rpc-impl/" target="_blank" rel="noopener noreferrer">http://kriszhang.com/motan-rpc-impl/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Motan ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://github.com/weibocom/motan/wiki/zh_overview" target="_blank" rel="noopener noreferrer">https://github.com/weibocom/motan/wiki/zh_overview<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h4 id="grpc" tabindex="-1"><a class="header-anchor" href="#grpc" aria-hidden="true">#</a> gRPC</h4><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220723235737977-d13ddf1a.png" alt="image-20220723235737977" tabindex="0" loading="lazy"><figcaption>image-20220723235737977</figcaption></figure><p>gRPC æ˜¯ Google å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½ã€é€šç”¨çš„å¼€æº RPC æ¡†æ¶ã€‚å…¶ç”±ä¸»è¦é¢å‘ç§»åŠ¨åº”ç”¨å¼€å‘å¹¶åŸºäº HTTP/2 åè®®æ ‡å‡†è€Œè®¾è®¡ï¼ˆæ”¯æŒåŒå‘æµã€æ¶ˆæ¯å¤´å‹ç¼©ç­‰åŠŸèƒ½ï¼Œæ›´åŠ èŠ‚çœå¸¦å®½ï¼‰ï¼ŒåŸºäº ProtoBuf åºåˆ—åŒ–åè®®å¼€å‘ï¼Œå¹¶ä¸”æ”¯æŒä¼—å¤šå¼€å‘è¯­è¨€ã€‚</p><p><strong>ä½•è°“ ProtoBufï¼Ÿ</strong> <a href="https://github.com/protocolbuffers/protobuf" target="_blank" rel="noopener noreferrer">ProtoBufï¼ˆ Protocol Bufferï¼‰<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æ˜¯ä¸€ç§æ›´åŠ çµæ´»ã€é«˜æ•ˆçš„æ•°æ®æ ¼å¼ï¼Œå¯ç”¨äºé€šè®¯åè®®ã€æ•°æ®å­˜å‚¨ç­‰é¢†åŸŸï¼ŒåŸºæœ¬æ”¯æŒæ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€ä¸”ä¸å¹³å°æ— å…³ã€‚ä¸è¿‡ï¼Œé€šè¿‡ ProtoBuf å®šä¹‰æ¥å£å’Œæ•°æ®ç±»å‹è¿˜æŒºç¹ççš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå°é—®é¢˜ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220723235747598-62ebd59d.png" alt="image-20220723235747598" tabindex="0" loading="lazy"><figcaption>image-20220723235747598</figcaption></figure><p>ä¸å¾—ä¸è¯´ï¼ŒgRPC çš„é€šä¿¡å±‚çš„è®¾è®¡è¿˜æ˜¯éå¸¸ä¼˜ç§€çš„ï¼Œ<a href="https://dubbogo.github.io/" target="_blank" rel="noopener noreferrer">Dubbo-go 3.0<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>çš„é€šä¿¡å±‚æ”¹è¿›ä¸»è¦å€Ÿé‰´äº† gRPCã€‚</p><p>ä¸è¿‡ï¼ŒgRPC çš„è®¾è®¡å¯¼è‡´å…¶å‡ ä¹æ²¡æœ‰æœåŠ¡æ²»ç†èƒ½åŠ›ã€‚å¦‚æœä½ æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜çš„è¯ï¼Œå°±éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶æ¯”å¦‚è…¾è®¯çš„ PolarisMeshï¼ˆåŒ—ææ˜Ÿï¼‰äº†ã€‚</p><ul><li>Githubï¼š<a href="https://github.com/grpc/grpc" target="_blank" rel="noopener noreferrer">https://github.com/grpc/grpc<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>å®˜ç½‘ï¼š<a href="https://grpc.io/" target="_blank" rel="noopener noreferrer">https://grpc.io/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h4 id="thrift" tabindex="-1"><a class="header-anchor" href="#thrift" aria-hidden="true">#</a> Thrift</h4><p>Apache Thrift æ˜¯ Facebook å¼€æºçš„è·¨è¯­è¨€çš„ RPC é€šä¿¡æ¡†æ¶ï¼Œç›®å‰å·²ç»æçŒ®ç»™ Apache åŸºé‡‘ä¼šç®¡ç†ï¼Œç”±äºå…¶è·¨è¯­è¨€ç‰¹æ€§å’Œå‡ºè‰²çš„æ€§èƒ½ï¼Œåœ¨å¾ˆå¤šäº’è”ç½‘å…¬å¸å¾—åˆ°åº”ç”¨ï¼Œæœ‰èƒ½åŠ›çš„å…¬å¸ç”šè‡³ä¼šåŸºäº thrift ç ”å‘ä¸€å¥—åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œå¢åŠ è¯¸å¦‚æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ç­‰åŠŸèƒ½ã€‚</p><p><code>Thrift</code>æ”¯æŒå¤šç§ä¸åŒçš„<strong>ç¼–ç¨‹è¯­è¨€</strong>ï¼ŒåŒ…æ‹¬<code>C++</code>ã€<code>Java</code>ã€<code>Python</code>ã€<code>PHP</code>ã€<code>Ruby</code>ç­‰ï¼ˆç›¸æ¯”äº gRPC æ”¯æŒçš„è¯­è¨€æ›´å¤š ï¼‰ã€‚</p><ul><li>å®˜ç½‘ï¼š<a href="https://thrift.apache.org/" target="_blank" rel="noopener noreferrer">https://thrift.apache.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Thrift ç®€å•ä»‹ç»ï¼š<a href="https://www.jianshu.com/p/8f25d057a5a9" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/8f25d057a5a9<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h4 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h4><p>gRPC å’Œ Thrift è™½ç„¶æ”¯æŒè·¨è¯­è¨€çš„ RPC è°ƒç”¨ï¼Œä½†æ˜¯å®ƒä»¬åªæä¾›äº†æœ€åŸºæœ¬çš„ RPC æ¡†æ¶åŠŸèƒ½ï¼Œç¼ºä¹ä¸€ç³»åˆ—é…å¥—çš„æœåŠ¡åŒ–ç»„ä»¶å’ŒæœåŠ¡æ²»ç†åŠŸèƒ½çš„æ”¯æ’‘ã€‚</p><p>Dubbo ä¸è®ºæ˜¯ä»åŠŸèƒ½å®Œå–„ç¨‹åº¦ã€ç”Ÿæ€ç³»ç»Ÿè¿˜æ˜¯ç¤¾åŒºæ´»è·ƒåº¦æ¥è¯´éƒ½æ˜¯æœ€ä¼˜ç§€çš„ã€‚è€Œä¸”ï¼ŒDubboåœ¨å›½å†…æœ‰å¾ˆå¤šæˆåŠŸçš„æ¡ˆä¾‹æ¯”å¦‚å½“å½“ç½‘ã€æ»´æ»´ç­‰ç­‰ï¼Œæ˜¯ä¸€æ¬¾ç»å¾—èµ·ç”Ÿäº§è€ƒéªŒçš„æˆç†Ÿç¨³å®šçš„ RPC æ¡†æ¶ã€‚æœ€é‡è¦çš„æ˜¯ä½ è¿˜èƒ½æ‰¾åˆ°éå¸¸å¤šçš„ Dubbo å‚è€ƒèµ„æ–™ï¼Œå­¦ä¹ æˆæœ¬ç›¸å¯¹ä¹Ÿè¾ƒä½ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº† Dubbo çš„ç”Ÿæ€ç³»ç»Ÿã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220723235849004-0fee547d.png" alt="image-20220723235849004" tabindex="0" loading="lazy"><figcaption>image-20220723235849004</figcaption></figure><p>Dubbo ä¹Ÿæ˜¯ Spring Cloud Alibaba é‡Œé¢çš„ä¸€ä¸ªç»„ä»¶ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220723235856647-486a9bc5.png" alt="image-20220723235856647" tabindex="0" loading="lazy"><figcaption>image-20220723235856647</figcaption></figure><p>ä½†æ˜¯ï¼ŒDubbo å’Œ Motan ä¸»è¦æ˜¯ç»™ Java è¯­è¨€ä½¿ç”¨ã€‚è™½ç„¶ï¼ŒDubbo å’Œ Motan ç›®å‰ä¹Ÿèƒ½å…¼å®¹éƒ¨åˆ†è¯­è¨€ï¼Œä½†æ˜¯ä¸å¤ªæ¨èã€‚å¦‚æœéœ€è¦è·¨å¤šç§è¯­è¨€è°ƒç”¨çš„è¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ gRPCã€‚</p><p>ç»¼ä¸Šï¼Œå¦‚æœæ˜¯ Java åç«¯æŠ€æœ¯æ ˆï¼Œå¹¶ä¸”ä½ åœ¨çº ç»“é€‰æ‹©å“ªä¸€ç§ RPC æ¡†æ¶çš„è¯ï¼Œæˆ‘æ¨èä½ è€ƒè™‘ä¸€ä¸‹ Dubbo</p><h3 id="äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡å—" tabindex="-1"><a class="header-anchor" href="#äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡å—" aria-hidden="true">#</a> äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡å—ï¼Ÿ</h3><p>æˆ‘æ¥è§¦å’Œäº†è§£åˆ°çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤§æ¦‚åˆ†ä¸ºï¼š</p><ul><li>2pcï¼ˆä¸¤æ®µå¼æäº¤ï¼‰</li><li>3pcï¼ˆä¸‰æ®µå¼æäº¤ï¼‰</li><li>TCCï¼ˆTryã€Confirmã€Cancelï¼‰</li><li>æœ€å¤§åŠªåŠ›é€šçŸ¥</li><li>æ¶ˆæ¯äº‹åŠ¡</li><li>æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆebayç ”å‘å‡ºçš„ï¼‰</li><li>åŠæ¶ˆæ¯/æœ€ç»ˆä¸€è‡´æ€§ï¼ˆRocketMQï¼‰</li></ul><p>è¿™é‡Œæˆ‘å°±ä»‹ç»ä¸‹æœ€ç®€å•çš„<strong>2pcï¼ˆä¸¤æ®µå¼ï¼‰</strong>ï¼Œä»¥åŠå¤§å®¶ä»¥åå¯èƒ½æ¯”è¾ƒå¸¸ç”¨çš„<strong>åŠæ¶ˆæ¯äº‹åŠ¡</strong>ä¹Ÿå°±æ˜¯<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼Œç›®çš„æ˜¯è®©å¤§å®¶ç†è§£ä¸‹åˆ†å¸ƒå¼äº‹åŠ¡é‡Œé¢<strong>æ¶ˆæ¯ä¸­é—´ä»¶çš„ä½œç”¨</strong>ï¼Œåˆ«çš„äº‹åŠ¡éƒ½å¤§åŒå°å¼‚ï¼Œéƒ½æœ‰å¾ˆå¤šä¼˜ç‚¹ã€‚</p><p>å½“ç„¶ä¹Ÿéƒ½æœ‰<strong>ç§ç§å¼Šç«¯</strong>ï¼š</p><p>ä¾‹å¦‚<strong>é•¿æ—¶é—´é”å®šæ•°æ®åº“èµ„æº</strong>ï¼Œå¯¼è‡´ç³»ç»Ÿçš„<strong>å“åº”ä¸å¿«</strong>ï¼Œ<strong>å¹¶å‘ä¸Šä¸å»</strong>ã€‚</p><p>ç½‘ç»œæŠ–åŠ¨å‡ºç°<strong>è„‘è£‚</strong>æƒ…å†µï¼Œå¯¼è‡´äº‹ç‰©å‚ä¸è€…ï¼Œä¸èƒ½å¾ˆå¥½åœ°æ‰§è¡Œåè°ƒè€…çš„æŒ‡ä»¤ï¼Œå¯¼è‡´<strong>æ•°æ®ä¸ä¸€è‡´</strong>ã€‚</p><p><strong>å•ç‚¹æ•…éšœ</strong>ï¼šä¾‹å¦‚äº‹ç‰©åè°ƒè€…ï¼Œåœ¨æŸä¸€æ—¶åˆ»å®•æœºï¼Œè™½ç„¶å¯ä»¥é€šè¿‡é€‰ä¸¾æœºåˆ¶äº§ç”Ÿæ–°çš„Leaderï¼Œä½†æ˜¯è¿™è¿‡ç¨‹ä¸­ï¼Œå¿…ç„¶å‡ºç°é—®é¢˜ï¼Œè€ŒTCCï¼Œåªæœ‰å¼ºæ‚çš„æŠ€æœ¯å›¢é˜Ÿï¼Œæ‰èƒ½æ”¯æŒå¼€å‘ï¼Œ<strong>æˆæœ¬å¤ªé«˜</strong>ã€‚</p><p>ä¸å¤šBBäº†ï¼Œæˆ‘ä»¬å¼€å§‹ä»‹ç»è¿™ä¸ªä¸¤ä¸ªäº‹ç‰©å§ã€‚</p><h4 id="âœ”ï¸2pc-ä¸¤æ®µå¼æäº¤" tabindex="-1"><a class="header-anchor" href="#âœ”ï¸2pc-ä¸¤æ®µå¼æäº¤" aria-hidden="true">#</a> âœ”ï¸2pcï¼ˆä¸¤æ®µå¼æäº¤ï¼‰</h4><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220617144013552-8804476a.png" alt="image-20220617144013552" tabindex="0" loading="lazy"><figcaption>image-20220617144013552</figcaption></figure><p><strong>2pcï¼ˆä¸¤æ®µå¼æäº¤ï¼‰<strong>å¯ä»¥è¯´æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡çš„æœ€å¼€å§‹çš„æ ·å­äº†ï¼Œåƒæäº†</strong>åª’å©†</strong>ï¼Œå°±æ˜¯é€šè¿‡æ¶ˆæ¯ä¸­é—´ä»¶åè°ƒå¤šä¸ªç³»ç»Ÿï¼Œåœ¨ä¸¤ä¸ªç³»ç»Ÿæ“ä½œäº‹åŠ¡çš„æ—¶å€™éƒ½é”å®šèµ„æºä½†æ˜¯ä¸æäº¤äº‹åŠ¡ï¼Œç­‰ä¸¤è€…éƒ½å‡†å¤‡å¥½äº†ï¼Œå‘Šè¯‰æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œç„¶åå†åˆ†åˆ«æäº¤äº‹åŠ¡ã€‚</p><p><strong>ä½†æ˜¯æˆ‘ä¸çŸ¥é“å¤§å®¶çœ‹åˆ°é—®é¢˜æ‰€åœ¨æ²¡æœ‰ï¼Ÿ</strong></p><p>æ˜¯çš„ä½ å¯èƒ½å·²ç»å‘ç°äº†ï¼Œå¦‚æœAç³»ç»Ÿäº‹åŠ¡æäº¤æˆåŠŸäº†ï¼Œä½†æ˜¯Bç³»ç»Ÿåœ¨æäº¤çš„æ—¶å€™ç½‘ç»œæ³¢åŠ¨æˆ–è€…å„ç§åŸå› æäº¤å¤±è´¥äº†ï¼Œå…¶å®è¿˜æ˜¯ä¼šå¤±è´¥çš„ã€‚</p><h4 id="âœ”ï¸3pc" tabindex="-1"><a class="header-anchor" href="#âœ”ï¸3pc" aria-hidden="true">#</a> âœ”ï¸3PC</h4><p>3PC çš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³ 2PC çš„ä¸€äº›é—®é¢˜ï¼Œç›¸æ¯”äº 2PC å®ƒåœ¨<strong>å‚ä¸è€…ä¸­ä¹Ÿå¼•å…¥äº†è¶…æ—¶æœºåˆ¶</strong>ï¼Œå¹¶ä¸”<strong>æ–°å¢äº†ä¸€ä¸ªé˜¶æ®µ</strong>ä½¿å¾—å‚ä¸è€…å¯ä»¥åˆ©ç”¨è¿™ä¸€ä¸ªé˜¶æ®µç»Ÿä¸€å„è‡ªçš„çŠ¶æ€ã€‚</p><p>è®©æˆ‘ä»¬æ¥è¯¦ç»†çœ‹ä¸€ä¸‹ã€‚</p><p>3PC åŒ…å«äº†ä¸‰ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯<strong>å‡†å¤‡é˜¶æ®µã€é¢„æäº¤é˜¶æ®µå’Œæäº¤é˜¶æ®µ</strong>ï¼Œå¯¹åº”çš„è‹±æ–‡å°±æ˜¯ï¼š<code>CanCommitã€PreCommit å’Œ DoCommit</code>ã€‚</p><p>çœ‹èµ·æ¥æ˜¯<strong>æŠŠ 2PC çš„æäº¤é˜¶æ®µå˜æˆäº†é¢„æäº¤é˜¶æ®µå’Œæäº¤é˜¶æ®µ</strong>ï¼Œä½†æ˜¯ 3PC çš„å‡†å¤‡é˜¶æ®µåè°ƒè€…åªæ˜¯è¯¢é—®å‚ä¸è€…çš„è‡ªèº«çŠ¶å†µï¼Œæ¯”å¦‚ä½ ç°åœ¨è¿˜å¥½å—ï¼Ÿè´Ÿè½½é‡ä¸é‡ï¼Ÿè¿™ç±»çš„ã€‚</p><p>è€Œé¢„æäº¤é˜¶æ®µå°±æ˜¯å’Œ 2PC çš„å‡†å¤‡é˜¶æ®µä¸€æ ·ï¼Œé™¤äº†äº‹åŠ¡çš„æäº¤è¯¥åšçš„éƒ½åšäº†ã€‚</p><p>æäº¤é˜¶æ®µå’Œ 2PC çš„ä¸€æ ·ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å›¾ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220725145659669-d95e18b3.png" alt="image-20220725145659669" tabindex="0" loading="lazy"><figcaption>image-20220725145659669</figcaption></figure><p>ä¸ç®¡å“ªä¸€ä¸ªé˜¶æ®µæœ‰å‚ä¸è€…è¿”å›å¤±è´¥éƒ½ä¼šå®£å¸ƒäº‹åŠ¡å¤±è´¥ï¼Œè¿™å’Œ 2PC æ˜¯ä¸€æ ·çš„ï¼ˆå½“ç„¶åˆ°æœ€åçš„æäº¤é˜¶æ®µå’Œ 2PC ä¸€æ ·åªè¦æ˜¯æäº¤è¯·æ±‚å°±åªèƒ½ä¸æ–­é‡è¯•ï¼‰ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ 3PC çš„é˜¶æ®µå˜æ›´æœ‰ä»€ä¹ˆå½±å“ã€‚</p><p>é¦–å…ˆ<strong>å‡†å¤‡é˜¶æ®µçš„å˜æ›´æˆä¸ä¼šç›´æ¥æ‰§è¡Œäº‹åŠ¡</strong>ï¼Œè€Œæ˜¯ä¼šå…ˆå»è¯¢é—®æ­¤æ—¶çš„å‚ä¸è€…æ˜¯å¦æœ‰æ¡ä»¶æ¥è¿™ä¸ªäº‹åŠ¡ï¼Œå› æ­¤<strong>ä¸ä¼šä¸€æ¥å°±å¹²æ´»ç›´æ¥é”èµ„æº</strong>ï¼Œä½¿å¾—åœ¨æŸäº›èµ„æºä¸å¯ç”¨çš„æƒ…å†µä¸‹æ‰€æœ‰å‚ä¸è€…éƒ½é˜»å¡ç€ã€‚</p><p>è€Œ<strong>é¢„æäº¤é˜¶æ®µçš„å¼•å…¥èµ·åˆ°äº†ä¸€ä¸ªç»Ÿä¸€çŠ¶æ€çš„ä½œç”¨</strong>ï¼Œå®ƒåƒä¸€é“æ …æ ï¼Œè¡¨æ˜åœ¨é¢„æäº¤é˜¶æ®µå‰æ‰€æœ‰å‚ä¸è€…å…¶å®è¿˜æœªéƒ½å›åº”ï¼Œåœ¨é¢„å¤„ç†é˜¶æ®µè¡¨æ˜æ‰€æœ‰å‚ä¸è€…éƒ½å·²ç»å›åº”äº†ã€‚</p><p>å‡å¦‚ä½ æ˜¯ä¸€ä½å‚ä¸è€…ï¼Œä½ çŸ¥é“è‡ªå·±è¿›å…¥äº†é¢„æäº¤çŠ¶æ€é‚£ä½ å°±å¯ä»¥æ¨æ–­å‡ºæ¥å…¶ä»–å‚ä¸è€…ä¹Ÿéƒ½è¿›å…¥äº†é¢„æäº¤çŠ¶æ€ã€‚</p><p>ä½†æ˜¯å¤šå¼•å…¥ä¸€ä¸ªé˜¶æ®µä¹Ÿå¤šä¸€ä¸ªäº¤äº’ï¼Œå› æ­¤<strong>æ€§èƒ½ä¼šå·®ä¸€äº›</strong>ï¼Œè€Œä¸”<strong>ç»å¤§éƒ¨åˆ†çš„æƒ…å†µä¸‹èµ„æºåº”è¯¥éƒ½æ˜¯å¯ç”¨çš„</strong>ï¼Œè¿™æ ·ç­‰äºæ¯æ¬¡æ˜çŸ¥å¯ç”¨æ‰§è¡Œè¿˜å¾—è¯¢é—®ä¸€æ¬¡ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹å‚ä¸è€…è¶…æ—¶èƒ½å¸¦æ¥ä»€ä¹ˆæ ·çš„å½±å“ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ 2PC æ˜¯åŒæ­¥é˜»å¡çš„ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»åˆ†æäº†åè°ƒè€…æŒ‚åœ¨äº†æäº¤è¯·æ±‚è¿˜æœªå‘å‡ºå»çš„æ—¶å€™æ˜¯æœ€ä¼¤çš„ï¼Œæ‰€æœ‰å‚ä¸è€…éƒ½å·²ç»é”å®šèµ„æºå¹¶ä¸”é˜»å¡ç­‰å¾…ç€ã€‚</p><p>é‚£ä¹ˆå¼•å…¥äº†è¶…æ—¶æœºåˆ¶ï¼Œå‚ä¸è€…å°±ä¸ä¼šå‚»ç­‰äº†ï¼Œ<strong>å¦‚æœæ˜¯ç­‰å¾…æäº¤å‘½ä»¤è¶…æ—¶ï¼Œé‚£ä¹ˆå‚ä¸è€…å°±ä¼šæäº¤äº‹åŠ¡äº†</strong>ï¼Œå› ä¸ºéƒ½åˆ°äº†è¿™ä¸€é˜¶æ®µäº†å¤§æ¦‚ç‡æ˜¯æäº¤çš„ï¼Œ<strong>å¦‚æœæ˜¯ç­‰å¾…é¢„æäº¤å‘½ä»¤è¶…æ—¶ï¼Œé‚£è¯¥å¹²å•¥å°±å¹²å•¥äº†ï¼Œåæ­£æœ¬æ¥å•¥ä¹Ÿæ²¡å¹²</strong>ã€‚</p><p>ç„¶è€Œè¶…æ—¶æœºåˆ¶ä¹Ÿä¼šå¸¦æ¥æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œæ¯”å¦‚åœ¨ç­‰å¾…æäº¤å‘½ä»¤æ—¶å€™è¶…æ—¶äº†ï¼Œå‚ä¸è€…é»˜è®¤æ‰§è¡Œçš„æ˜¯æäº¤äº‹åŠ¡æ“ä½œï¼Œä½†æ˜¯<strong>æœ‰å¯èƒ½æ‰§è¡Œçš„æ˜¯å›æ»šæ“ä½œï¼Œè¿™æ ·ä¸€æ¥æ•°æ®å°±ä¸ä¸€è‡´äº†</strong>ã€‚</p><p>å½“ç„¶ 3PC åè°ƒè€…è¶…æ—¶è¿˜æ˜¯åœ¨çš„ï¼Œå…·ä½“ä¸åˆ†æäº†å’Œ 2PC æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä»ç»´åŸºç™¾ç§‘ä¸Šçœ‹ï¼Œ3PC çš„å¼•å…¥æ˜¯ä¸ºäº†è§£å†³æäº¤é˜¶æ®µ 2PC åè°ƒè€…å’ŒæŸå‚ä¸è€…éƒ½æŒ‚äº†ä¹‹åæ–°é€‰ä¸¾çš„åè°ƒè€…ä¸çŸ¥é“å½“å‰åº”è¯¥æäº¤è¿˜æ˜¯å›æ»šçš„é—®é¢˜ã€‚</p><p>æ–°åè°ƒè€…æ¥çš„æ—¶å€™å‘ç°æœ‰ä¸€ä¸ªå‚ä¸è€…å¤„äºé¢„æäº¤æˆ–è€…æäº¤é˜¶æ®µï¼Œé‚£ä¹ˆè¡¨æ˜å·²ç»ç»è¿‡äº†æ‰€æœ‰å‚ä¸è€…çš„ç¡®è®¤äº†ï¼Œæ‰€ä»¥æ­¤æ—¶æ‰§è¡Œçš„å°±æ˜¯æäº¤å‘½ä»¤ã€‚</p><p>æ‰€ä»¥è¯´ 3PC å°±æ˜¯é€šè¿‡å¼•å…¥é¢„æäº¤é˜¶æ®µæ¥ä½¿å¾—å‚ä¸è€…ä¹‹é—´çš„çŠ¶æ€å¾—åˆ°ç»Ÿä¸€ï¼Œä¹Ÿå°±æ˜¯ç•™äº†ä¸€ä¸ªé˜¶æ®µè®©å¤§å®¶åŒæ­¥ä¸€ä¸‹ã€‚</p><p>ä½†æ˜¯è¿™ä¹Ÿåªèƒ½è®©åè°ƒè€…çŸ¥é“è¯¥å¦‚æœåšï¼Œä½†ä¸èƒ½ä¿è¯è¿™æ ·åšä¸€å®šå¯¹ï¼Œè¿™å…¶å®å’Œä¸Šé¢ 2PC åˆ†æä¸€è‡´ï¼Œå› ä¸ºæŒ‚äº†çš„å‚ä¸è€…åˆ°åº•æœ‰æ²¡æœ‰æ‰§è¡Œäº‹åŠ¡æ— æ³•æ–­å®šã€‚</p><p>æ‰€ä»¥è¯´ 3PC é€šè¿‡é¢„æäº¤é˜¶æ®µå¯ä»¥å‡å°‘æ•…éšœæ¢å¤æ—¶å€™çš„å¤æ‚æ€§ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ•°æ®ä¸€è‡´ï¼Œé™¤éæŒ‚äº†çš„é‚£ä¸ªå‚ä¸è€…æ¢å¤ã€‚</p><p>è®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼Œ 3PC ç›¸å¯¹äº 2PC åšäº†ä¸€å®šçš„æ”¹è¿›ï¼šå¼•å…¥äº†å‚ä¸è€…è¶…æ—¶æœºåˆ¶ï¼Œå¹¶ä¸”å¢åŠ äº†é¢„æäº¤é˜¶æ®µä½¿å¾—æ•…éšœæ¢å¤ä¹‹ååè°ƒè€…çš„å†³ç­–å¤æ‚åº¦é™ä½ï¼Œä½†æ•´ä½“çš„äº¤äº’è¿‡ç¨‹æ›´é•¿äº†ï¼Œæ€§èƒ½æœ‰æ‰€ä¸‹é™ï¼Œå¹¶ä¸”è¿˜æ˜¯ä¼šå­˜åœ¨æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</p><p>æ‰€ä»¥ 2PC å’Œ 3PC éƒ½ä¸èƒ½ä¿è¯æ•°æ®100%ä¸€è‡´ï¼Œå› æ­¤ä¸€èˆ¬éƒ½éœ€è¦æœ‰å®šæ—¶æ‰«æè¡¥å¿æœºåˆ¶ã€‚</p><p>æˆ‘å†è¯´ä¸‹ 3PC æˆ‘æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„å®ç°ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸º 3PC åªæ˜¯çº¯çš„ç†è®ºä¸Šçš„ä¸œè¥¿ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°ç›¸æ¯”äº 2PC å®ƒæ˜¯åšäº†ä¸€äº›åŠªåŠ›ä½†æ˜¯æ•ˆæœç”šå¾®ï¼Œæ‰€ä»¥åªåšäº†è§£å³å¯ã€‚</p><h4 id="âœ”ï¸tccæŸ”æ€§è¡¥å¿" tabindex="-1"><a class="header-anchor" href="#âœ”ï¸tccæŸ”æ€§è¡¥å¿" aria-hidden="true">#</a> âœ”ï¸TCCæŸ”æ€§è¡¥å¿</h4><ol><li>å¯åŠ¨äº‹åŠ¡ï¼ˆä¸šåŠ¡ç³»ç»Ÿï¼‰</li><li>å°è¯•è°ƒä¸åŒçš„æœåŠ¡ï¼ˆæ¥å£ï¼‰</li><li>äº‹åŠ¡å…·ä½“æˆåŠŸäº†è¿˜æ˜¯å¤±è´¥äº†ä¼šå‘Šè¯‰äº‹åŠ¡åè°ƒå™¨</li><li>ç”±äº‹åŠ¡åè°ƒå™¨æ¥è°ƒç”¨confirmã€cancel</li></ol><p><strong>2PC å’Œ 3PC éƒ½æ˜¯æ•°æ®åº“å±‚é¢çš„ï¼Œè€Œ TCC æ˜¯ä¸šåŠ¡å±‚é¢çš„åˆ†å¸ƒå¼äº‹åŠ¡</strong>ï¼Œå°±åƒæˆ‘å‰é¢è¯´çš„åˆ†å¸ƒå¼äº‹åŠ¡ä¸ä»…ä»…åŒ…æ‹¬æ•°æ®åº“çš„æ“ä½œï¼Œè¿˜åŒ…æ‹¬å‘é€çŸ­ä¿¡ç­‰ï¼Œè¿™æ—¶å€™ TCC å°±æ´¾ä¸Šç”¨åœºäº†ï¼</p><p>TCC æŒ‡çš„æ˜¯<code>Try - Confirm - Cancel</code>ã€‚</p><ul><li>Try æŒ‡çš„æ˜¯é¢„ç•™ï¼Œå³èµ„æºçš„é¢„ç•™å’Œé”å®šï¼Œ<strong>æ³¨æ„æ˜¯é¢„ç•™</strong>ã€‚</li><li>Confirm æŒ‡çš„æ˜¯ç¡®è®¤æ“ä½œï¼Œè¿™ä¸€æ­¥å…¶å®å°±æ˜¯çœŸæ­£çš„æ‰§è¡Œäº†ã€‚</li><li>Cancel æŒ‡çš„æ˜¯æ’¤é”€æ“ä½œï¼Œå¯ä»¥ç†è§£ä¸ºæŠŠé¢„ç•™é˜¶æ®µçš„åŠ¨ä½œæ’¤é”€äº†ã€‚</li></ul><p>å…¶å®ä»æ€æƒ³ä¸Šçœ‹å’Œ 2PC å·®ä¸å¤šï¼Œéƒ½æ˜¯å…ˆè¯•æ¢æ€§çš„æ‰§è¡Œï¼Œå¦‚æœéƒ½å¯ä»¥é‚£å°±çœŸæ­£çš„æ‰§è¡Œï¼Œå¦‚æœä¸è¡Œå°±å›æ»šã€‚</p><p>æ¯”å¦‚è¯´ä¸€ä¸ªäº‹åŠ¡è¦æ‰§è¡ŒAã€Bã€Cä¸‰ä¸ªæ“ä½œï¼Œé‚£ä¹ˆå…ˆå¯¹ä¸‰ä¸ªæ“ä½œæ‰§è¡Œé¢„ç•™åŠ¨ä½œã€‚å¦‚æœéƒ½é¢„ç•™æˆåŠŸäº†é‚£ä¹ˆå°±æ‰§è¡Œç¡®è®¤æ“ä½œï¼Œå¦‚æœæœ‰ä¸€ä¸ªé¢„ç•™å¤±è´¥é‚£å°±éƒ½æ‰§è¡Œæ’¤é”€åŠ¨ä½œã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹æµç¨‹ï¼ŒTCCæ¨¡å‹è¿˜æœ‰ä¸ªäº‹åŠ¡ç®¡ç†è€…çš„è§’è‰²ï¼Œç”¨æ¥è®°å½•TCCå…¨å±€äº‹åŠ¡çŠ¶æ€å¹¶æäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220913115340867-3739867c.png" alt="image-20220913115340867" tabindex="0" loading="lazy"><figcaption>image-20220913115340867</figcaption></figure><p>å¯ä»¥çœ‹åˆ°æµç¨‹è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œéš¾ç‚¹åœ¨äºä¸šåŠ¡ä¸Šçš„å®šä¹‰ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ“ä½œä½ éƒ½éœ€è¦å®šä¹‰ä¸‰ä¸ªåŠ¨ä½œåˆ†åˆ«å¯¹åº”<code>Try - Confirm - Cancel</code>ã€‚</p><p>å› æ­¤ <strong>TCC å¯¹ä¸šåŠ¡çš„ä¾µå…¥è¾ƒå¤§å’Œä¸šåŠ¡ç´§è€¦åˆ</strong>ï¼Œéœ€è¦æ ¹æ®ç‰¹å®šçš„åœºæ™¯å’Œä¸šåŠ¡é€»è¾‘æ¥è®¾è®¡ç›¸åº”çš„æ“ä½œã€‚</p><p>è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œæ’¤é”€å’Œç¡®è®¤æ“ä½œçš„æ‰§è¡Œå¯èƒ½éœ€è¦é‡è¯•ï¼Œå› æ­¤è¿˜éœ€è¦ä¿è¯<strong>æ“ä½œçš„å¹‚ç­‰</strong>ã€‚</p><p>ç›¸å¯¹äº 2PCã€3PC ï¼ŒTCC é€‚ç”¨çš„èŒƒå›´æ›´å¤§ï¼Œä½†æ˜¯å¼€å‘é‡ä¹Ÿæ›´å¤§ï¼Œæ¯•ç«Ÿéƒ½åœ¨ä¸šåŠ¡ä¸Šå®ç°ï¼Œè€Œä¸”æœ‰æ—¶å€™ä½ ä¼šå‘ç°è¿™ä¸‰ä¸ªæ–¹æ³•è¿˜çœŸä¸å¥½å†™ã€‚ä¸è¿‡ä¹Ÿå› ä¸ºæ˜¯åœ¨ä¸šåŠ¡ä¸Šå®ç°çš„ï¼Œæ‰€ä»¥<strong>TCCå¯ä»¥è·¨æ•°æ®åº“ã€è·¨ä¸åŒçš„ä¸šåŠ¡ç³»ç»Ÿæ¥å®ç°äº‹åŠ¡</strong>ã€‚</p><h4 id="äº†è§£-æœ€å¤§åŠªåŠ›é€šçŸ¥" tabindex="-1"><a class="header-anchor" href="#äº†è§£-æœ€å¤§åŠªåŠ›é€šçŸ¥" aria-hidden="true">#</a> ï¼ˆäº†è§£ï¼‰æœ€å¤§åŠªåŠ›é€šçŸ¥</h4><p>å…¶å®æˆ‘è§‰å¾—æœ¬åœ°æ¶ˆæ¯è¡¨ä¹Ÿå¯ä»¥ç®—æœ€å¤§åŠªåŠ›ï¼Œäº‹åŠ¡æ¶ˆæ¯ä¹Ÿå¯ä»¥ç®—æœ€å¤§åŠªåŠ›ã€‚</p><p>å°±æœ¬åœ°æ¶ˆæ¯è¡¨æ¥è¯´ä¼šæœ‰åå°ä»»åŠ¡å®šæ—¶å»æŸ¥çœ‹æœªå®Œæˆçš„æ¶ˆæ¯ï¼Œç„¶åå»è°ƒç”¨å¯¹åº”çš„æœåŠ¡ï¼Œå½“ä¸€ä¸ªæ¶ˆæ¯å¤šæ¬¡è°ƒç”¨éƒ½å¤±è´¥çš„æ—¶å€™å¯ä»¥è®°å½•ä¸‹ç„¶åå¼•å…¥äººå·¥ï¼Œæˆ–è€…ç›´æ¥èˆå¼ƒã€‚è¿™å…¶å®ç®—æ˜¯æœ€å¤§åŠªåŠ›äº†ã€‚</p><p>äº‹åŠ¡æ¶ˆæ¯ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå½“åŠæ¶ˆæ¯è¢«commitäº†ä¹‹åç¡®å®å°±æ˜¯æ™®é€šæ¶ˆæ¯äº†ï¼Œå¦‚æœè®¢é˜…è€…ä¸€ç›´ä¸æ¶ˆè´¹æˆ–è€…æ¶ˆè´¹ä¸äº†åˆ™ä¼šä¸€ç›´é‡è¯•ï¼Œåˆ°æœ€åè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ã€‚å…¶å®è¿™ä¹Ÿç®—æœ€å¤§åŠªåŠ›ã€‚</p><p>æ‰€ä»¥<strong>æœ€å¤§åŠªåŠ›é€šçŸ¥å…¶å®åªæ˜¯è¡¨æ˜äº†ä¸€ç§æŸ”æ€§äº‹åŠ¡çš„æ€æƒ³</strong>ï¼šæˆ‘å·²ç»å°½åŠ›æˆ‘æœ€å¤§çš„åŠªåŠ›æƒ³è¾¾æˆäº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´äº†ã€‚</p><p>é€‚ç”¨äºå¯¹æ—¶é—´ä¸æ•æ„Ÿçš„ä¸šåŠ¡ï¼Œä¾‹å¦‚çŸ­ä¿¡é€šçŸ¥ã€‚</p><h4 id="äº†è§£-æœ¬åœ°æ¶ˆæ¯è¡¨" tabindex="-1"><a class="header-anchor" href="#äº†è§£-æœ¬åœ°æ¶ˆæ¯è¡¨" aria-hidden="true">#</a> ï¼ˆäº†è§£ï¼‰æœ¬åœ°æ¶ˆæ¯è¡¨</h4><p>æœ¬åœ°æ¶ˆæ¯è¡¨å…¶å®å°±æ˜¯åˆ©ç”¨äº† <strong>å„ç³»ç»Ÿæœ¬åœ°çš„äº‹åŠ¡</strong>æ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</p><p>æœ¬åœ°æ¶ˆæ¯è¡¨é¡¾åæ€ä¹‰å°±æ˜¯ä¼šæœ‰ä¸€å¼ å­˜æ”¾æœ¬åœ°æ¶ˆæ¯çš„è¡¨ï¼Œä¸€èˆ¬éƒ½æ˜¯æ”¾åœ¨æ•°æ®åº“ä¸­ï¼Œç„¶ååœ¨æ‰§è¡Œä¸šåŠ¡çš„æ—¶å€™ <strong>å°†ä¸šåŠ¡çš„æ‰§è¡Œå’Œå°†æ¶ˆæ¯æ”¾å…¥æ¶ˆæ¯è¡¨ä¸­çš„æ“ä½œæ”¾åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­</strong>ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ¶ˆæ¯æ”¾å…¥æœ¬åœ°è¡¨ä¸­ä¸šåŠ¡è‚¯å®šæ˜¯æ‰§è¡ŒæˆåŠŸçš„ã€‚</p><p>ç„¶åå†å»è°ƒç”¨ä¸‹ä¸€ä¸ªæ“ä½œï¼Œå¦‚æœä¸‹ä¸€ä¸ªæ“ä½œè°ƒç”¨æˆåŠŸäº†å¥½è¯´ï¼Œæ¶ˆæ¯è¡¨çš„æ¶ˆæ¯çŠ¶æ€å¯ä»¥ç›´æ¥æ”¹æˆå·²æˆåŠŸã€‚</p><p>å¦‚æœè°ƒç”¨å¤±è´¥ä¹Ÿæ²¡äº‹ï¼Œä¼šæœ‰ <strong>åå°ä»»åŠ¡å®šæ—¶å»è¯»å–æœ¬åœ°æ¶ˆæ¯è¡¨</strong>ï¼Œç­›é€‰å‡ºè¿˜æœªæˆåŠŸçš„æ¶ˆæ¯å†è°ƒç”¨å¯¹åº”çš„æœåŠ¡ï¼ŒæœåŠ¡æ›´æ–°æˆåŠŸäº†å†å˜æ›´æ¶ˆæ¯çš„çŠ¶æ€ã€‚</p><p>è¿™æ—¶å€™æœ‰å¯èƒ½æ¶ˆæ¯å¯¹åº”çš„æ“ä½œä¸æˆåŠŸï¼Œå› æ­¤ä¹Ÿéœ€è¦é‡è¯•ï¼Œé‡è¯•å°±å¾—ä¿è¯å¯¹åº”æœåŠ¡çš„æ–¹æ³•æ˜¯å¹‚ç­‰çš„ï¼Œè€Œä¸”ä¸€èˆ¬é‡è¯•ä¼šæœ‰æœ€å¤§æ¬¡æ•°ï¼Œè¶…è¿‡æœ€å¤§æ¬¡æ•°å¯ä»¥è®°å½•ä¸‹æŠ¥è­¦è®©äººå·¥å¤„ç†ã€‚</p><p>å¯ä»¥çœ‹åˆ°æœ¬åœ°æ¶ˆæ¯è¡¨å…¶å®å®ç°çš„æ˜¯<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼Œå®¹å¿äº†æ•°æ®æš‚æ—¶ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><h4 id="æ¶ˆæ¯äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯äº‹åŠ¡" aria-hidden="true">#</a> æ¶ˆæ¯äº‹åŠ¡</h4><p>RocketMQ å°±å¾ˆå¥½çš„æ”¯æŒäº†æ¶ˆæ¯äº‹åŠ¡ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•é€šè¿‡æ¶ˆæ¯å®ç°äº‹åŠ¡ã€‚</p><p>ç¬¬ä¸€æ­¥å…ˆç»™ Broker å‘é€äº‹åŠ¡æ¶ˆæ¯å³åŠæ¶ˆæ¯ï¼Œ<strong>åŠæ¶ˆæ¯ä¸æ˜¯è¯´ä¸€åŠæ¶ˆæ¯ï¼Œè€Œæ˜¯è¿™ä¸ªæ¶ˆæ¯å¯¹æ¶ˆè´¹è€…æ¥è¯´ä¸å¯è§</strong>ï¼Œç„¶å<strong>å‘é€æˆåŠŸåå‘é€æ–¹å†æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</strong>ã€‚</p><p>å†æ ¹æ®<strong>æœ¬åœ°äº‹åŠ¡çš„ç»“æœå‘ Broker å‘é€ Commit æˆ–è€… RollBack å‘½ä»¤</strong>ã€‚</p><p>å¹¶ä¸” RocketMQ çš„å‘é€æ–¹ä¼šæä¾›ä¸€ä¸ª<strong>åæŸ¥äº‹åŠ¡çŠ¶æ€æ¥å£</strong>ï¼Œå¦‚æœä¸€æ®µæ—¶é—´å†…åŠæ¶ˆæ¯æ²¡æœ‰æ”¶åˆ°ä»»ä½•æ“ä½œè¯·æ±‚ï¼Œé‚£ä¹ˆ Broker ä¼šé€šè¿‡åæŸ¥æ¥å£å¾—çŸ¥å‘é€æ–¹äº‹åŠ¡æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œç„¶åæ‰§è¡Œ Commit æˆ–è€… RollBack å‘½ä»¤ã€‚</p><p>å¦‚æœæ˜¯ Commit é‚£ä¹ˆè®¢é˜…æ–¹å°±èƒ½æ”¶åˆ°è¿™æ¡æ¶ˆæ¯ï¼Œç„¶åå†åšå¯¹åº”çš„æ“ä½œï¼Œåšå®Œäº†ä¹‹åå†æ¶ˆè´¹è¿™æ¡æ¶ˆæ¯å³å¯ã€‚</p><p>å¦‚æœæ˜¯ RollBack é‚£ä¹ˆè®¢é˜…æ–¹æ”¶ä¸åˆ°è¿™æ¡æ¶ˆæ¯ï¼Œç­‰äºäº‹åŠ¡å°±æ²¡æ‰§è¡Œè¿‡ã€‚</p><p>å¯ä»¥çœ‹åˆ°é€šè¿‡ RocketMQ è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“å®ç°çš„ï¼ŒRocketMQ æä¾›äº†äº‹åŠ¡æ¶ˆæ¯çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰å¥½äº‹åŠ¡åæŸ¥æ¥å£å³å¯ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220725145800448-734b670e.png" alt="image-20220725145800448" tabindex="0" loading="lazy"><figcaption>image-20220725145800448</figcaption></figure><p>å¯ä»¥çœ‹åˆ°æ¶ˆæ¯äº‹åŠ¡å®ç°çš„ä¹Ÿæ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><h4 id="æœ€ç»ˆä¸€è‡´æ€§-1" tabindex="-1"><a class="header-anchor" href="#æœ€ç»ˆä¸€è‡´æ€§-1" aria-hidden="true">#</a> æœ€ç»ˆä¸€è‡´æ€§</h4><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220617144020576-9389a81a.png" alt="image-20220617144020576" tabindex="0" loading="lazy"><figcaption>image-20220617144020576</figcaption></figure><p>æ•´ä¸ªæµç¨‹ä¸­ï¼Œæˆ‘ä»¬èƒ½ä¿è¯æ˜¯ï¼š</p><ul><li>ä¸šåŠ¡ä¸»åŠ¨æ–¹æœ¬åœ°äº‹åŠ¡æäº¤å¤±è´¥ï¼Œä¸šåŠ¡è¢«åŠ¨æ–¹ä¸ä¼šæ”¶åˆ°æ¶ˆæ¯çš„æŠ•é€’ã€‚</li><li>åªè¦ä¸šåŠ¡ä¸»åŠ¨æ–¹æœ¬åœ°äº‹åŠ¡æ‰§è¡ŒæˆåŠŸï¼Œé‚£ä¹ˆæ¶ˆæ¯æœåŠ¡ä¸€å®šä¼šæŠ•é€’æ¶ˆæ¯ç»™ä¸‹æ¸¸çš„ä¸šåŠ¡è¢«åŠ¨æ–¹ï¼Œå¹¶æœ€ç»ˆä¿è¯ä¸šåŠ¡è¢«åŠ¨æ–¹ä¸€å®šèƒ½æˆåŠŸæ¶ˆè´¹è¯¥æ¶ˆæ¯ï¼ˆæ¶ˆè´¹æˆåŠŸæˆ–å¤±è´¥ï¼Œå³æœ€ç»ˆä¸€å®šä¼šæœ‰ä¸€ä¸ªæœ€ç»ˆæ€ï¼‰ã€‚</li></ul><p>ä¸è¿‡å‘¢æŠ€æœ¯å°±æ˜¯è¿™æ ·ï¼Œ<strong>å„ç§æç«¯çš„æƒ…å†µæˆ‘ä»¬éƒ½éœ€è¦è€ƒè™‘</strong>ï¼Œä¹Ÿå¾ˆéš¾æœ‰å®Œç¾çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥æ‰ä¼šæœ‰è¿™ä¹ˆå¤šçš„æ–¹æ¡ˆ<strong>ä¸‰æ®µå¼</strong>ã€<strong>TCC</strong>ã€<strong>æœ€å¤§åŠªåŠ›é€šçŸ¥</strong>ç­‰ç­‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼Œå¤§å®¶åªéœ€è¦çŸ¥é“ä¸ºå•¥è¦åšï¼Œåšäº†æœ‰å•¥å¥½å¤„ï¼Œæœ‰å•¥åå¤„ï¼Œåœ¨å®é™…å¼€å‘çš„æ—¶å€™éƒ½æ³¨æ„ä¸‹å°±å¥½å¥½äº†ï¼Œ<strong>ç³»ç»Ÿéƒ½æ˜¯æ ¹æ®ä¸šåŠ¡åœºæ™¯è®¾è®¡å‡ºæ¥çš„ï¼Œç¦»å¼€ä¸šåŠ¡çš„æŠ€æœ¯æ²¡æœ‰æ„ä¹‰ï¼Œç¦»å¼€æŠ€æœ¯çš„ä¸šåŠ¡æ²¡æœ‰åº•æ°”</strong>ã€‚</p><p>è¿˜æ˜¯é‚£å¥è¯ï¼š<strong>æ²¡æœ‰æœ€å®Œç¾çš„ç³»ç»Ÿï¼Œåªæœ‰æœ€é€‚åˆçš„ç³»ç»Ÿã€‚</strong></p><h4 id="åˆ†å¸ƒå¼äº‹åŠ¡æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼äº‹åŠ¡æ¯”è¾ƒ" aria-hidden="true">#</a> åˆ†å¸ƒå¼äº‹åŠ¡æ¯”è¾ƒ</h4><ul><li>åŸºäºæ¶ˆæ¯äº‹åŠ¡æ˜¯å¼ºä¸€è‡´æ€§äº‹åŠ¡ï¼ˆä¼šé€ æˆç­‰å¾…ï¼‰ï¼Œä¼šå­˜åœ¨èµ„æºæµªè´¹</li><li>TCCäº‹åŠ¡æ˜¯æŸ”æ€§äº‹åŠ¡ï¼Œåœ¨tryé˜¶æ®µè¦å¯¹èµ„æºåšé¢„ç•™</li><li>TCCäº‹åŠ¡åœ¨ç¡®è®¤æˆ–å–æ¶ˆé˜¶æ®µé‡Šæ”¾èµ„æº</li><li>ä¸åŸºäºæ¶ˆæ¯äº‹åŠ¡ç›¸æ¯”ï¼ŒTCCçš„æ—¶æ•ˆæ€§è¦æ›´å¥½</li></ul><h4 id="åˆ†å¸ƒå¼äº‹åŠ¡æ³¨æ„ç‚¹" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼äº‹åŠ¡æ³¨æ„ç‚¹" aria-hidden="true">#</a> åˆ†å¸ƒå¼äº‹åŠ¡æ³¨æ„ç‚¹</h4><ul><li>ä¸è¦åœ¨åˆ†å¸ƒå¼äº‹åŠ¡æ•è·ä»»ä½•å¼‚å¸¸</li><li>ä½¿ç”¨TCC-Transactionçš„æ—¶å€™ï¼Œconfirmå’Œcancelçš„å¹‚ç­‰æ€§éœ€è¦è‡ªå·±ä»£ç æ”¯æŒ <ul><li>è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆè¦åœ¨confirmå’Œcancelé‡Œæ£€æŸ¥è®¢å•çŠ¶æ€ï¼Œè€Œä¸ç›´æ¥ä¿®æ”¹ä¸ºç»“æŸçŠ¶æ€ ---&gt; ä¿è¯å¹‚ç­‰æ€§</li></ul></li></ul><h4 id="tcc-transactionæ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#tcc-transactionæ¡†æ¶" aria-hidden="true">#</a> TCC-Transactionæ¡†æ¶</h4><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220913170527093-99c35efc.png" alt="image-20220913170527093" tabindex="0" loading="lazy"><figcaption>image-20220913170527093</figcaption></figure><ol><li>ä»€ä¹ˆæ—¶å€™ç”Ÿæˆçš„TRANSACTION_CONTEXTéšå¼å‚æ•°</li><li>å¦‚ä½•åˆ¤æ–­å¤§äº‹åŠ¡ä¸‹æœ‰å“ªäº›å°äº‹åŠ¡</li><li>ä¸ºä»€ä¹ˆè¦æœ‰@Compensableæ³¨è§£</li></ol><h3 id="å¸¸è§ä¿è¯å¹‚ç­‰çš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#å¸¸è§ä¿è¯å¹‚ç­‰çš„æ–¹å¼" aria-hidden="true">#</a> å¸¸è§ä¿è¯å¹‚ç­‰çš„æ–¹å¼</h3><h4 id="ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§</h4><p>å¹‚ç­‰æ˜¯ä¸€ä¸ªæ•°å­¦ä¸è®¡ç®—æœºå­¦æ¦‚å¿µï¼Œåœ¨æ•°å­¦ä¸­æŸä¸€å…ƒè¿ç®—ä¸ºå¹‚ç­‰æ—¶ï¼Œå…¶ä½œç”¨åœ¨ä»»ä¸€å…ƒç´ ä¸¤æ¬¡åä¼šå’Œå…¶ä½œç”¨ä¸€æ¬¡çš„ç»“æœç›¸åŒã€‚</p><p>åœ¨è®¡ç®—æœºä¸­ç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªå¹‚ç­‰æ“ä½œçš„ç‰¹ç‚¹æ˜¯å…¶ä»»æ„å¤šæ¬¡æ‰§è¡Œæ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚å¹‚ç­‰å‡½æ•°æˆ–å¹‚ç­‰æ–¹æ³•æ˜¯æŒ‡å¯ä»¥ä½¿ç”¨ç›¸åŒå‚æ•°é‡å¤æ‰§è¡Œï¼Œå¹¶èƒ½è·å¾—ç›¸åŒç»“æœçš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°ä¸ä¼šå½±å“ç³»ç»ŸçŠ¶æ€ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒé‡å¤æ‰§è¡Œä¼šå¯¹ç³»ç»Ÿé€ æˆæ”¹å˜ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯æ¥å£å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯æ¥å£å¹‚ç­‰æ€§" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯æ¥å£å¹‚ç­‰æ€§</h4><p>åœ¨HTTP/1.1ä¸­ï¼Œå¯¹å¹‚ç­‰æ€§è¿›è¡Œäº†å®šä¹‰ã€‚å®ƒæè¿°äº†ä¸€æ¬¡å’Œå¤šæ¬¡è¯·æ±‚æŸä¸€ä¸ªèµ„æºå¯¹äºèµ„æºæœ¬èº«åº”è¯¥å…·æœ‰åŒæ ·çš„ç»“æœï¼ˆç½‘ç»œè¶…æ—¶ç­‰é—®é¢˜é™¤å¤–ï¼‰ï¼Œå³ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™å¯¹èµ„æºäº§ç”Ÿäº†å‰¯ä½œç”¨ï¼Œä½†æ˜¯ä»¥åçš„å¤šæ¬¡è¯·æ±‚éƒ½ä¸ä¼šå†å¯¹èµ„æºäº§ç”Ÿå‰¯ä½œç”¨ã€‚</p><p>è¿™é‡Œçš„å‰¯ä½œç”¨æ˜¯ä¸ä¼šå¯¹ç»“æœäº§ç”Ÿç ´åæˆ–è€…äº§ç”Ÿä¸å¯é¢„æ–™çš„ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶ä»»æ„å¤šæ¬¡æ‰§è¡Œå¯¹èµ„æºæœ¬èº«æ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚</p><h4 id="ä¸ºä»€ä¹ˆéœ€è¦å®ç°å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦å®ç°å¹‚ç­‰æ€§" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆéœ€è¦å®ç°å¹‚ç­‰æ€§</h4><p>åœ¨æ¥å£è°ƒç”¨æ—¶ä¸€èˆ¬æƒ…å†µä¸‹éƒ½èƒ½æ­£å¸¸è¿”å›ä¿¡æ¯ä¸ä¼šé‡å¤æäº¤ï¼Œä¸è¿‡åœ¨é‡è§ä»¥ä¸‹æƒ…å†µæ—¶å¯ä»¥å°±ä¼šå‡ºç°é—®é¢˜ï¼Œå¦‚ï¼š</p><ul><li><strong>å‰ç«¯é‡å¤æäº¤è¡¨å•ï¼š</strong> åœ¨å¡«å†™ä¸€äº›è¡¨æ ¼æ—¶å€™ï¼Œç”¨æˆ·å¡«å†™å®Œæˆæäº¤ï¼Œå¾ˆå¤šæ—¶å€™ä¼šå› ç½‘ç»œæ³¢åŠ¨æ²¡æœ‰åŠæ—¶å¯¹ç”¨æˆ·åšå‡ºæäº¤æˆåŠŸå“åº”ï¼Œè‡´ä½¿ç”¨æˆ·è®¤ä¸ºæ²¡æœ‰æˆåŠŸæäº¤ï¼Œç„¶åä¸€ç›´ç‚¹æäº¤æŒ‰é’®ï¼Œè¿™æ—¶å°±ä¼šå‘ç”Ÿé‡å¤æäº¤è¡¨å•è¯·æ±‚ã€‚</li><li><strong>ç”¨æˆ·æ¶æ„è¿›è¡Œåˆ·å•ï¼š</strong> ä¾‹å¦‚åœ¨å®ç°ç”¨æˆ·æŠ•ç¥¨è¿™ç§åŠŸèƒ½æ—¶ï¼Œå¦‚æœç”¨æˆ·é’ˆå¯¹ä¸€ä¸ªç”¨æˆ·è¿›è¡Œé‡å¤æäº¤æŠ•ç¥¨ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ¥å£æ¥æ”¶åˆ°ç”¨æˆ·é‡å¤æäº¤çš„æŠ•ç¥¨ä¿¡æ¯ï¼Œè¿™æ ·ä¼šä½¿æŠ•ç¥¨ç»“æœä¸äº‹å®ä¸¥é‡ä¸ç¬¦ã€‚</li><li><strong>æ¥å£è¶…æ—¶é‡å¤æäº¤ï¼š</strong> å¾ˆå¤šæ—¶å€™ HTTP å®¢æˆ·ç«¯å·¥å…·éƒ½é»˜è®¤å¼€å¯è¶…æ—¶é‡è¯•çš„æœºåˆ¶ï¼Œå°¤å…¶æ˜¯ç¬¬ä¸‰æ–¹è°ƒç”¨æ¥å£æ—¶å€™ï¼Œä¸ºäº†é˜²æ­¢ç½‘ç»œæ³¢åŠ¨è¶…æ—¶ç­‰é€ æˆçš„è¯·æ±‚å¤±è´¥ï¼Œéƒ½ä¼šæ·»åŠ é‡è¯•æœºåˆ¶ï¼Œå¯¼è‡´ä¸€ä¸ªè¯·æ±‚æäº¤å¤šæ¬¡ã€‚</li><li><strong>æ¶ˆæ¯è¿›è¡Œé‡å¤æ¶ˆè´¹ï¼š</strong> å½“ä½¿ç”¨ MQ æ¶ˆæ¯ä¸­é—´ä»¶æ—¶å€™ï¼Œå¦‚æœå‘ç”Ÿæ¶ˆæ¯ä¸­é—´ä»¶å‡ºç°é”™è¯¯æœªåŠæ—¶æäº¤æ¶ˆè´¹ä¿¡æ¯ï¼Œå¯¼è‡´å‘ç”Ÿé‡å¤æ¶ˆè´¹ã€‚</li></ul><p>ä½¿ç”¨å¹‚ç­‰æ€§æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºä½¿æ¥å£ä¿è¯ä»»ä½•å¹‚ç­‰æ€§æ“ä½œï¼Œå…å»å› é‡è¯•ç­‰é€ æˆç³»ç»Ÿäº§ç”Ÿçš„æœªçŸ¥çš„é—®é¢˜ã€‚</p><h4 id="å¼•å…¥å¹‚ç­‰æ€§åå¯¹ç³»ç»Ÿçš„å½±å“" tabindex="-1"><a class="header-anchor" href="#å¼•å…¥å¹‚ç­‰æ€§åå¯¹ç³»ç»Ÿçš„å½±å“" aria-hidden="true">#</a> å¼•å…¥å¹‚ç­‰æ€§åå¯¹ç³»ç»Ÿçš„å½±å“</h4><p>å¹‚ç­‰æ€§æ˜¯ä¸ºäº†ç®€åŒ–å®¢æˆ·ç«¯é€»è¾‘å¤„ç†ï¼Œèƒ½æ”¾ç½®é‡å¤æäº¤ç­‰æ“ä½œï¼Œä½†å´å¢åŠ äº†æœåŠ¡ç«¯çš„é€»è¾‘å¤æ‚æ€§å’Œæˆæœ¬ï¼Œå…¶ä¸»è¦æ˜¯ï¼š</p><ul><li>æŠŠå¹¶è¡Œæ‰§è¡Œçš„åŠŸèƒ½æ”¹ä¸ºä¸²è¡Œæ‰§è¡Œï¼Œé™ä½äº†æ‰§è¡Œæ•ˆç‡ã€‚</li><li>å¢åŠ äº†é¢å¤–æ§åˆ¶å¹‚ç­‰çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¤æ‚åŒ–äº†ä¸šåŠ¡åŠŸèƒ½ï¼›</li></ul><p>æ‰€ä»¥åœ¨ä½¿ç”¨æ—¶å€™éœ€è¦è€ƒè™‘æ˜¯å¦å¼•å…¥å¹‚ç­‰æ€§çš„å¿…è¦æ€§ï¼Œæ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯å…·ä½“åˆ†æï¼Œé™¤äº†ä¸šåŠ¡ä¸Šçš„ç‰¹æ®Šè¦æ±‚å¤–ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦å¼•å…¥çš„æ¥å£å¹‚ç­‰æ€§ã€‚</p><h4 id="restful-api-æ¥å£çš„å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#restful-api-æ¥å£çš„å¹‚ç­‰æ€§" aria-hidden="true">#</a> Restful API æ¥å£çš„å¹‚ç­‰æ€§</h4><p>ç°åœ¨æµè¡Œçš„ Restful æ¨èçš„å‡ ç§ HTTP æ¥å£æ–¹æ³•ä¸­ï¼Œåˆ†åˆ«å­˜åœ¨å¹‚ç­‰è¡Œä¸ä¸èƒ½ä¿è¯å¹‚ç­‰çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><ul><li><p>âˆš æ»¡è¶³å¹‚ç­‰</p></li><li><p>x ä¸æ»¡è¶³å¹‚ç­‰</p></li><li><p>- å¯èƒ½æ»¡è¶³ä¹Ÿå¯èƒ½ä¸æ»¡è¶³å¹‚ç­‰ï¼Œæ ¹æ®å®é™…ä¸šåŠ¡é€»è¾‘æœ‰å…³</p></li></ul><table><thead><tr><th style="text-align:center;">æ–¹æ³•ç±»å‹</th><th style="text-align:center;">æ˜¯å¦å¹‚ç­‰</th><th style="text-align:center;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center;">Get</td><td style="text-align:center;">âˆš</td><td style="text-align:center;">Get æ–¹æ³•ç”¨äºè·å–èµ„æºã€‚å…¶ä¸€èˆ¬ä¸ä¼šä¹Ÿä¸åº”å½“å¯¹ç³»ç»Ÿèµ„æºè¿›è¡Œæ”¹å˜ï¼Œæ‰€ä»¥æ˜¯å¹‚ç­‰çš„ã€‚</td></tr><tr><td style="text-align:center;">Post</td><td style="text-align:center;">Ã—</td><td style="text-align:center;">Post æ–¹æ³•ä¸€èˆ¬ç”¨äºåˆ›å»ºæ–°çš„èµ„æºã€‚å…¶æ¯æ¬¡æ‰§è¡Œéƒ½ä¼šæ–°å¢æ•°æ®ï¼Œæ‰€ä»¥ä¸æ˜¯å¹‚ç­‰çš„ã€‚</td></tr><tr><td style="text-align:center;">Put</td><td style="text-align:center;">-</td><td style="text-align:center;">Put æ–¹æ³•ä¸€èˆ¬ç”¨äºä¿®æ”¹èµ„æºã€‚è¯¥æ“ä½œåˆ™åˆ†æƒ…å†µæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯æ»¡è¶³å¹‚ç­‰ï¼Œæ›´æ–°æ“ä½œä¸­ç›´æ¥æ ¹æ®æŸä¸ªå€¼è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿèƒ½ä¿æŒå¹‚ç­‰ã€‚ä¸è¿‡æ‰§è¡Œç´¯åŠ æ“ä½œçš„æ›´æ–°æ˜¯éå¹‚ç­‰ã€‚</td></tr><tr><td style="text-align:center;">Delete</td><td style="text-align:center;">-</td><td style="text-align:center;">Delete æ–¹æ³•ä¸€èˆ¬ç”¨äºåˆ é™¤èµ„æºã€‚è¯¥æ“ä½œåˆ™åˆ†æƒ…å†µæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯æ»¡è¶³å¹‚ç­‰ï¼Œå½“æ ¹æ®å”¯ä¸€å€¼è¿›è¡Œåˆ é™¤æ—¶ï¼Œåˆ é™¤åŒä¸€ä¸ªæ•°æ®å¤šæ¬¡æ‰§è¡Œæ•ˆæœä¸€æ ·ã€‚ä¸è¿‡éœ€è¦æ³¨æ„ï¼Œå¸¦æŸ¥è¯¢æ¡ä»¶çš„åˆ é™¤åˆ™å°±ä¸ä¸€å®šæ»¡è¶³å¹‚ç­‰äº†ã€‚ä¾‹å¦‚åœ¨æ ¹æ®æ¡ä»¶åˆ é™¤ä¸€æ‰¹æ•°æ®åï¼Œè¿™æ—¶å€™æ–°å¢åŠ äº†ä¸€æ¡æ•°æ®ä¹Ÿæ»¡è¶³æ¡ä»¶ï¼Œç„¶ååˆæ‰§è¡Œäº†ä¸€æ¬¡åˆ é™¤ï¼Œé‚£ä¹ˆå°†ä¼šå¯¼è‡´æ–°å¢åŠ çš„è¿™æ¡æ»¡è¶³æ¡ä»¶æ•°æ®ä¹Ÿè¢«åˆ é™¤ã€‚</td></tr></tbody></table><h4 id="å¦‚ä½•å®ç°å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®ç°å¹‚ç­‰æ€§" aria-hidden="true">#</a> å¦‚ä½•å®ç°å¹‚ç­‰æ€§</h4><h5 id="æ–¹æ¡ˆä¸€-æ•°æ®åº“å”¯ä¸€ä¸»é”®" tabindex="-1"><a class="header-anchor" href="#æ–¹æ¡ˆä¸€-æ•°æ®åº“å”¯ä¸€ä¸»é”®" aria-hidden="true">#</a> æ–¹æ¡ˆä¸€ï¼šæ•°æ®åº“å”¯ä¸€ä¸»é”®</h5><p><strong>æ–¹æ¡ˆæè¿°</strong></p><p>æ•°æ®åº“å”¯ä¸€ä¸»é”®çš„å®ç°ä¸»è¦æ˜¯åˆ©ç”¨æ•°æ®åº“ä¸­ä¸»é”®å”¯ä¸€çº¦æŸçš„ç‰¹æ€§ï¼Œä¸€èˆ¬æ¥è¯´å”¯ä¸€ä¸»é”®æ¯”è¾ƒé€‚ç”¨äºâ€œæ’å…¥â€æ—¶çš„å¹‚ç­‰æ€§ï¼Œå…¶èƒ½ä¿è¯ä¸€å¼ è¡¨ä¸­åªèƒ½å­˜åœ¨ä¸€æ¡å¸¦è¯¥å”¯ä¸€ä¸»é”®çš„è®°å½•ã€‚</p><p>ä½¿ç”¨æ•°æ®åº“å”¯ä¸€ä¸»é”®å®Œæˆå¹‚ç­‰æ€§æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥ä¸»é”®ä¸€èˆ¬æ¥è¯´å¹¶ä¸æ˜¯ä½¿ç”¨æ•°æ®åº“ä¸­è‡ªå¢ä¸»é”®ï¼Œè€Œæ˜¯ä½¿ç”¨åˆ†å¸ƒå¼ ID å……å½“ä¸»é”®ï¼ˆå¯ä»¥å‚è€ƒ Java ä¸­åˆ†å¸ƒå¼ ID çš„è®¾è®¡æ–¹æ¡ˆ è¿™ç¯‡æ–‡ç« ï¼‰ï¼Œè¿™æ ·æ‰èƒ½èƒ½ä¿è¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ ID çš„å…¨å±€å”¯ä¸€æ€§ã€‚</p><p><strong>é€‚ç”¨æ“ä½œï¼š</strong></p><ul><li>æ’å…¥æ“ä½œ</li><li>åˆ é™¤æ“ä½œ</li></ul><p><strong>ä½¿ç”¨é™åˆ¶ï¼š</strong></p><ul><li>éœ€è¦ç”Ÿæˆå…¨å±€å”¯ä¸€ä¸»é”® IDï¼›</li></ul><p><strong>ä¸»è¦æµç¨‹ï¼š</strong></p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220725150136872-1625e955.png" alt="image-20220725150136872" tabindex="0" loading="lazy"><figcaption>image-20220725150136872</figcaption></figure><p>ä¸»è¦æµç¨‹ï¼š</p><ul><li>â‘  å®¢æˆ·ç«¯æ‰§è¡Œåˆ›å»ºè¯·æ±‚ï¼Œè°ƒç”¨æœåŠ¡ç«¯æ¥å£ã€‚</li><li>â‘¡ æœåŠ¡ç«¯æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç”Ÿæˆä¸€ä¸ªåˆ†å¸ƒå¼ IDï¼Œå°†è¯¥ ID å……å½“å¾…æ’å…¥æ•°æ®çš„ä¸»é”®ï¼Œç„¶åæ‰§æ•°æ®æ’å…¥æ“ä½œï¼Œè¿è¡Œå¯¹åº”çš„ SQL è¯­å¥ã€‚</li><li>â‘¢ æœåŠ¡ç«¯å°†è¯¥æ¡æ•°æ®æ’å…¥æ•°æ®åº“ä¸­ï¼Œå¦‚æœæ’å…¥æˆåŠŸåˆ™è¡¨ç¤ºæ²¡æœ‰é‡å¤è°ƒç”¨æ¥å£ã€‚å¦‚æœæŠ›å‡ºä¸»é”®é‡å¤å¼‚å¸¸ï¼Œåˆ™è¡¨ç¤ºæ•°æ®åº“ä¸­å·²ç»å­˜åœ¨è¯¥æ¡è®°å½•ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯ã€‚</li></ul><h5 id="æ–¹æ¡ˆäºŒ-æ•°æ®åº“ä¹è§‚é”" tabindex="-1"><a class="header-anchor" href="#æ–¹æ¡ˆäºŒ-æ•°æ®åº“ä¹è§‚é”" aria-hidden="true">#</a> æ–¹æ¡ˆäºŒï¼šæ•°æ®åº“ä¹è§‚é”</h5><p><strong>æ–¹æ¡ˆæè¿°ï¼š</strong></p><p>æ•°æ®åº“ä¹è§‚é”æ–¹æ¡ˆä¸€èˆ¬åªèƒ½é€‚ç”¨äºæ‰§è¡Œâ€œæ›´æ–°æ“ä½œâ€çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æå‰åœ¨å¯¹åº”çš„æ•°æ®è¡¨ä¸­å¤šæ·»åŠ ä¸€ä¸ªå­—æ®µï¼Œå……å½“å½“å‰æ•°æ®çš„ç‰ˆæœ¬æ ‡è¯†ã€‚è¿™æ ·æ¯æ¬¡å¯¹è¯¥æ•°æ®åº“è¯¥è¡¨çš„è¿™æ¡æ•°æ®æ‰§è¡Œæ›´æ–°æ—¶ï¼Œéƒ½ä¼šå°†è¯¥ç‰ˆæœ¬æ ‡è¯†ä½œä¸ºä¸€ä¸ªæ¡ä»¶ï¼Œå€¼ä¸ºä¸Šæ¬¡å¾…æ›´æ–°æ•°æ®ä¸­çš„ç‰ˆæœ¬æ ‡è¯†çš„å€¼ã€‚</p><p><strong>é€‚ç”¨æ“ä½œï¼š</strong></p><ul><li>æ›´æ–°æ“ä½œ</li></ul><p><strong>ä½¿ç”¨é™åˆ¶ï¼š</strong></p><ul><li>éœ€è¦æ•°æ®åº“å¯¹åº”ä¸šåŠ¡è¡¨ä¸­æ·»åŠ é¢å¤–å­—æ®µï¼›</li></ul><p><strong>æè¿°ç¤ºä¾‹ï¼š</strong></p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220725150153331-1721fa84.png" alt="image-20220725150153331" tabindex="0" loading="lazy"><figcaption>image-20220725150153331</figcaption></figure><p>ä¾‹å¦‚ï¼Œå­˜åœ¨å¦‚ä¸‹çš„æ•°æ®è¡¨ä¸­ï¼š</p><table><thead><tr><th style="text-align:left;">id</th><th style="text-align:left;">name</th><th style="text-align:left;">price</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">å°ç±³æ‰‹æœº</td><td style="text-align:left;">1000</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">è‹¹æœæ‰‹æœº</td><td style="text-align:left;">2500</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">åä¸ºæ‰‹æœº</td><td style="text-align:left;">1600</td></tr></tbody></table><p>ä¸ºäº†æ¯æ¬¡æ‰§è¡Œæ›´æ–°æ—¶é˜²æ­¢é‡å¤æ›´æ–°ï¼Œç¡®å®šæ›´æ–°çš„ä¸€å®šæ˜¯è¦æ›´æ–°çš„å†…å®¹ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½ä¼šæ·»åŠ ä¸€ä¸ª version å­—æ®µè®°å½•å½“å‰çš„è®°å½•ç‰ˆæœ¬ï¼Œè¿™æ ·åœ¨æ›´æ–°æ—¶å€™å°†è¯¥å€¼å¸¦ä¸Šï¼Œé‚£ä¹ˆåªè¦æ‰§è¡Œæ›´æ–°æ“ä½œå°±èƒ½ç¡®å®šä¸€å®šæ›´æ–°çš„æ˜¯æŸä¸ªå¯¹åº”ç‰ˆæœ¬ä¸‹çš„ä¿¡æ¯ã€‚</p><table><thead><tr><th style="text-align:left;">id</th><th style="text-align:left;">name</th><th style="text-align:left;">price</th><th style="text-align:left;">version</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">å°ç±³æ‰‹æœº</td><td style="text-align:left;">1000</td><td style="text-align:left;">10</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">è‹¹æœæ‰‹æœº</td><td style="text-align:left;">2500</td><td style="text-align:left;">21</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">åä¸ºæ‰‹æœº</td><td style="text-align:left;">1600</td><td style="text-align:left;">5</td></tr></tbody></table><p>è¿™æ ·æ¯æ¬¡æ‰§è¡Œæ›´æ–°æ—¶å€™ï¼Œéƒ½è¦æŒ‡å®šè¦æ›´æ–°çš„ç‰ˆæœ¬å·ï¼Œå¦‚ä¸‹æ“ä½œå°±èƒ½å‡†ç¡®æ›´æ–° version=5 çš„ä¿¡æ¯ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>UPDATE my_table SET price=price+50,version=version+1 WHERE id=1 AND version=5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢ WHERE åé¢è·Ÿç€æ¡ä»¶ id=1 AND version=5 è¢«æ‰§è¡Œåï¼Œid=1 çš„ version è¢«æ›´æ–°ä¸º 6ï¼Œæ‰€ä»¥å¦‚æœé‡å¤æ‰§è¡Œè¯¥æ¡ SQL è¯­å¥å°†ä¸ç”Ÿæ•ˆï¼Œå› ä¸º id=1 AND version=5 çš„æ•°æ®å·²ç»ä¸å­˜åœ¨ï¼Œè¿™æ ·å°±èƒ½ä¿ä½æ›´æ–°çš„å¹‚ç­‰ï¼Œå¤šæ¬¡æ›´æ–°å¯¹ç»“æœä¸ä¼šäº§ç”Ÿå½±å“ã€‚</p><h5 id="æ–¹æ¡ˆä¸‰-é˜²é‡-token-ä»¤ç‰Œ" tabindex="-1"><a class="header-anchor" href="#æ–¹æ¡ˆä¸‰-é˜²é‡-token-ä»¤ç‰Œ" aria-hidden="true">#</a> æ–¹æ¡ˆä¸‰ï¼šé˜²é‡ Token ä»¤ç‰Œ</h5><p><strong>æ–¹æ¡ˆæè¿°ï¼š</strong></p><p>é’ˆå¯¹å®¢æˆ·ç«¯è¿ç»­ç‚¹å‡»æˆ–è€…è°ƒç”¨æ–¹çš„è¶…æ—¶é‡è¯•ç­‰æƒ…å†µï¼Œä¾‹å¦‚æäº¤è®¢å•ï¼Œæ­¤ç§æ“ä½œå°±å¯ä»¥ç”¨ Token çš„æœºåˆ¶å®ç°é˜²æ­¢é‡å¤æäº¤ã€‚ç®€å•çš„è¯´å°±æ˜¯è°ƒç”¨æ–¹åœ¨è°ƒç”¨æ¥å£çš„æ—¶å€™å…ˆå‘åç«¯è¯·æ±‚ä¸€ä¸ªå…¨å±€ IDï¼ˆTokenï¼‰ï¼Œè¯·æ±‚çš„æ—¶å€™æºå¸¦è¿™ä¸ªå…¨å±€ ID ä¸€èµ·è¯·æ±‚ï¼ˆToken æœ€å¥½å°†å…¶æ”¾åˆ° Headers ä¸­ï¼‰ï¼Œåç«¯éœ€è¦å¯¹è¿™ä¸ª Token ä½œä¸º Keyï¼Œç”¨æˆ·ä¿¡æ¯ä½œä¸º Value åˆ° Redis ä¸­è¿›è¡Œé”®å€¼å†…å®¹æ ¡éªŒï¼Œå¦‚æœ Key å­˜åœ¨ä¸” Value åŒ¹é…å°±æ‰§è¡Œåˆ é™¤å‘½ä»¤ï¼Œç„¶åæ­£å¸¸æ‰§è¡Œåé¢çš„ä¸šåŠ¡é€»è¾‘ã€‚å¦‚æœä¸å­˜åœ¨å¯¹åº”çš„ Key æˆ– Value ä¸åŒ¹é…å°±è¿”å›é‡å¤æ‰§è¡Œçš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™æ ·æ¥ä¿è¯å¹‚ç­‰æ“ä½œã€‚</p><p><strong>é€‚ç”¨æ“ä½œï¼š</strong></p><ul><li>æ’å…¥æ“ä½œ</li><li>æ›´æ–°æ“ä½œ</li><li>åˆ é™¤æ“ä½œ</li></ul><p><strong>ä½¿ç”¨é™åˆ¶ï¼š</strong></p><ul><li>éœ€è¦ç”Ÿæˆå…¨å±€å”¯ä¸€ Token ä¸²ï¼›</li><li>éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶ Redis è¿›è¡Œæ•°æ®æ•ˆéªŒï¼›</li></ul><p><strong>ä¸»è¦æµç¨‹ï¼š</strong></p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220725150246041-fa4cc197.png" alt="image-20220725150246041" tabindex="0" loading="lazy"><figcaption>image-20220725150246041</figcaption></figure><ul><li>â‘  æœåŠ¡ç«¯æä¾›è·å– Token çš„æ¥å£ï¼Œè¯¥ Token å¯ä»¥æ˜¯ä¸€ä¸ªåºåˆ—å·ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ ID æˆ–è€… UUID ä¸²ã€‚</li><li>â‘¡ å®¢æˆ·ç«¯è°ƒç”¨æ¥å£è·å– Tokenï¼Œè¿™æ—¶å€™æœåŠ¡ç«¯ä¼šç”Ÿæˆä¸€ä¸ª Token ä¸²ã€‚</li><li>â‘¢ ç„¶åå°†è¯¥ä¸²å­˜å…¥ Redis æ•°æ®åº“ä¸­ï¼Œä»¥è¯¥ Token ä½œä¸º Redis çš„é”®ï¼ˆæ³¨æ„è®¾ç½®è¿‡æœŸæ—¶é—´ï¼‰ã€‚</li><li>â‘£ å°† Token è¿”å›åˆ°å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ‹¿åˆ°ååº”å­˜åˆ°è¡¨å•éšè—åŸŸä¸­ã€‚</li><li>â‘¤ å®¢æˆ·ç«¯åœ¨æ‰§è¡Œæäº¤è¡¨å•æ—¶ï¼ŒæŠŠ Token å­˜å…¥åˆ° Headers ä¸­ï¼Œæ‰§è¡Œä¸šåŠ¡è¯·æ±‚å¸¦ä¸Šè¯¥ Headersã€‚</li><li>â‘¥ æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åä» Headers ä¸­æ‹¿åˆ° Tokenï¼Œç„¶åæ ¹æ® Token åˆ° Redis ä¸­æŸ¥æ‰¾è¯¥ key æ˜¯å¦å­˜åœ¨ã€‚</li><li>â‘¦ æœåŠ¡ç«¯æ ¹æ® Redis ä¸­æ˜¯å¦å­˜è¯¥ key è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå­˜åœ¨å°±å°†è¯¥ key åˆ é™¤ï¼Œç„¶åæ­£å¸¸æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚å¦‚æœä¸å­˜åœ¨å°±æŠ›å¼‚å¸¸ï¼Œè¿”å›é‡å¤æäº¤çš„é”™è¯¯ä¿¡æ¯ã€‚</li></ul><blockquote><p>æ³¨æ„ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œæ‰§è¡Œ Redis æŸ¥æ‰¾æ•°æ®ä¸åˆ é™¤éœ€è¦ä¿è¯åŸå­æ€§ï¼Œå¦åˆ™å¾ˆå¯èƒ½åœ¨å¹¶å‘ä¸‹æ— æ³•ä¿è¯å¹‚ç­‰æ€§ã€‚å…¶å®ç°æ–¹æ³•å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼é”æˆ–è€…ä½¿ç”¨ Lua è¡¨è¾¾å¼æ¥æ³¨é”€æŸ¥è¯¢ä¸åˆ é™¤æ“ä½œã€‚</p></blockquote><h5 id="æ–¹æ¡ˆå››-ä¸‹æ¸¸ä¼ é€’å”¯ä¸€åºåˆ—å·" tabindex="-1"><a class="header-anchor" href="#æ–¹æ¡ˆå››-ä¸‹æ¸¸ä¼ é€’å”¯ä¸€åºåˆ—å·" aria-hidden="true">#</a> æ–¹æ¡ˆå››:ä¸‹æ¸¸ä¼ é€’å”¯ä¸€åºåˆ—å·</h5><p><strong>æ–¹æ¡ˆæè¿°ï¼š</strong></p><p>æ‰€è°“è¯·æ±‚åºåˆ—å·ï¼Œå…¶å®å°±æ˜¯æ¯æ¬¡å‘æœåŠ¡ç«¯è¯·æ±‚æ—¶å€™é™„å¸¦ä¸€ä¸ªçŸ­æ—¶é—´å†…å”¯ä¸€ä¸é‡å¤çš„åºåˆ—å·ï¼Œè¯¥åºåˆ—å·å¯ä»¥æ˜¯ä¸€ä¸ªæœ‰åº IDï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè®¢å•å·ï¼Œä¸€èˆ¬ç”±ä¸‹æ¸¸ç”Ÿæˆï¼Œåœ¨è°ƒç”¨ä¸Šæ¸¸æœåŠ¡ç«¯æ¥å£æ—¶é™„åŠ è¯¥åºåˆ—å·å’Œç”¨äºè®¤è¯çš„ IDã€‚</p><p>å½“ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä¿¡æ¯åæ‹¿å–è¯¥ åºåˆ—å· å’Œä¸‹æ¸¸ è®¤è¯ID è¿›è¡Œç»„åˆï¼Œå½¢æˆç”¨äºæ“ä½œ Redis çš„ Keyï¼Œç„¶ååˆ° Redis ä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨å¯¹åº”çš„ Key çš„é”®å€¼å¯¹ï¼Œæ ¹æ®å…¶ç»“æœï¼š</p><ul><li>å¦‚æœå­˜åœ¨ï¼Œå°±è¯´æ˜å·²ç»å¯¹è¯¥ä¸‹æ¸¸çš„è¯¥åºåˆ—å·çš„è¯·æ±‚è¿›è¡Œäº†ä¸šåŠ¡å¤„ç†ï¼Œè¿™æ—¶å¯ä»¥ç›´æ¥å“åº”é‡å¤è¯·æ±‚çš„é”™è¯¯ä¿¡æ¯ã€‚</li><li>å¦‚æœä¸å­˜åœ¨ï¼Œå°±ä»¥è¯¥ Key ä½œä¸º Redis çš„é”®ï¼Œä»¥ä¸‹æ¸¸å…³é”®ä¿¡æ¯ä½œä¸ºå­˜å‚¨çš„å€¼ï¼ˆä¾‹å¦‚ä¸‹æ¸¸å•†ä¼ é€’çš„ä¸€äº›ä¸šåŠ¡é€»è¾‘ä¿¡æ¯ï¼‰ï¼Œå°†è¯¥é”®å€¼å¯¹å­˜å‚¨åˆ° Redis ä¸­ ï¼Œç„¶åå†æ­£å¸¸æ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡é€»è¾‘å³å¯ã€‚</li></ul><p><strong>é€‚ç”¨æ“ä½œï¼š</strong></p><ul><li>æ’å…¥æ“ä½œ</li><li>æ›´æ–°æ“ä½œ</li><li>åˆ é™¤æ“ä½œ</li></ul><p><strong>ä½¿ç”¨é™åˆ¶ï¼š</strong></p><ul><li>è¦æ±‚ç¬¬ä¸‰æ–¹ä¼ é€’å”¯ä¸€åºåˆ—å·ï¼›</li><li>éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶ Redis è¿›è¡Œæ•°æ®æ•ˆéªŒï¼›</li></ul><p><strong>ä¸»è¦æµç¨‹ï¼š</strong></p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220725150306807-abf821d1.png" alt="image-20220725150306807" tabindex="0" loading="lazy"><figcaption>image-20220725150306807</figcaption></figure><p>ä¸»è¦æ­¥éª¤ï¼š</p><ul><li>â‘  ä¸‹æ¸¸æœåŠ¡ç”Ÿæˆåˆ†å¸ƒå¼ ID ä½œä¸ºåºåˆ—å·ï¼Œç„¶åæ‰§è¡Œè¯·æ±‚è°ƒç”¨ä¸Šæ¸¸æ¥å£ï¼Œå¹¶é™„å¸¦â€œå”¯ä¸€åºåˆ—å·â€ä¸è¯·æ±‚çš„â€œè®¤è¯å‡­æ®IDâ€ã€‚</li><li>â‘¡ ä¸Šæ¸¸æœåŠ¡è¿›è¡Œå®‰å…¨æ•ˆéªŒï¼Œæ£€æµ‹ä¸‹æ¸¸ä¼ é€’çš„å‚æ•°ä¸­æ˜¯å¦å­˜åœ¨â€œåºåˆ—å·â€å’Œâ€œå‡­æ®IDâ€ã€‚</li><li>â‘¢ ä¸Šæ¸¸æœåŠ¡åˆ° Redis ä¸­æ£€æµ‹æ˜¯å¦å­˜åœ¨å¯¹åº”çš„â€œåºåˆ—å·â€ä¸â€œè®¤è¯IDâ€ç»„æˆçš„ Keyï¼Œå¦‚æœå­˜åœ¨å°±æŠ›å‡ºé‡å¤æ‰§è¡Œçš„å¼‚å¸¸ä¿¡æ¯ï¼Œç„¶åå“åº”ä¸‹æ¸¸å¯¹åº”çš„é”™è¯¯ä¿¡æ¯ã€‚å¦‚æœä¸å­˜åœ¨å°±ä»¥è¯¥â€œåºåˆ—å·â€å’Œâ€œè®¤è¯IDâ€ç»„åˆä½œä¸º Keyï¼Œä»¥ä¸‹æ¸¸å…³é”®ä¿¡æ¯ä½œä¸º Valueï¼Œè¿›è€Œå­˜å‚¨åˆ° Redis ä¸­ï¼Œç„¶åæ­£å¸¸æ‰§è¡Œæ¥æ¥æ¥çš„ä¸šåŠ¡é€»è¾‘ã€‚</li></ul><blockquote><p>ä¸Šé¢æ­¥éª¤ä¸­æ’å…¥æ•°æ®åˆ° Redis ä¸€å®šè¦è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚è¿™æ ·èƒ½ä¿è¯åœ¨è¿™ä¸ªæ—¶é—´èŒƒå›´å†…ï¼Œå¦‚æœé‡å¤è°ƒç”¨æ¥å£ï¼Œåˆ™èƒ½å¤Ÿè¿›è¡Œåˆ¤æ–­è¯†åˆ«ã€‚å¦‚æœä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¾ˆå¯èƒ½å¯¼è‡´æ•°æ®æ— é™é‡çš„å­˜å…¥ Redisï¼Œè‡´ä½¿ Redis ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚</p></blockquote><h3 id="åˆ†å¸ƒå¼ç³»ç»Ÿæ¥å£-å¦‚ä½•é¿å…è¡¨å•çš„é‡å¤æäº¤" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼ç³»ç»Ÿæ¥å£-å¦‚ä½•é¿å…è¡¨å•çš„é‡å¤æäº¤" aria-hidden="true">#</a> åˆ†å¸ƒå¼ç³»ç»Ÿæ¥å£ï¼Œå¦‚ä½•é¿å…è¡¨å•çš„é‡å¤æäº¤ï¼Ÿ</h3><h4 id="å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#å¹‚ç­‰æ€§" aria-hidden="true">#</a> å¹‚ç­‰æ€§</h4><p>**æ•ˆæœï¼š**ç³»ç»Ÿå¯¹æŸæ¥å£çš„å¤šæ¬¡è¯·æ±‚ï¼Œéƒ½åº”è¯¥è¿”å›åŒæ ·çš„ç»“æœï¼ï¼ˆç½‘ç»œè®¿é—®å¤±è´¥çš„åœºæ™¯é™¤å¤–ï¼‰</p><p>**ç›®çš„ï¼š**é¿å…å› ä¸ºå„ç§åŸå› ï¼Œé‡å¤è¯·æ±‚å¯¼è‡´çš„ä¸šåŠ¡é‡å¤å¤„ç†</p><h4 id="é‡å¤è¯·æ±‚åœºæ™¯æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#é‡å¤è¯·æ±‚åœºæ™¯æ¡ˆä¾‹" aria-hidden="true">#</a> é‡å¤è¯·æ±‚åœºæ™¯æ¡ˆä¾‹</h4><p>1ï¼Œå®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚åï¼Œç½‘ç»œå¼‚å¸¸å¯¼è‡´æ”¶åˆ°è¯·æ±‚æ‰§è¡Œé€»è¾‘ä½†æ˜¯æ²¡æœ‰è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯çš„é‡æ–°å‘èµ·è¯·æ±‚</p><p>2ï¼Œå®¢æˆ·ç«¯è¿…é€Ÿç‚¹å‡»æŒ‰é’®æäº¤ï¼Œå¯¼è‡´åŒä¸€é€»è¾‘è¢«å¤šæ¬¡å‘é€åˆ°æœåŠ¡å™¨</p><p><em>ç®€å•æ¥åˆ’åˆ†ï¼Œä¸šåŠ¡é€»è¾‘æ— ééƒ½å¯ä»¥å½’çº³ä¸ºå¢åˆ æ”¹æŸ¥ï¼</em></p><p><strong>å¯¹äºæŸ¥è¯¢</strong>ï¼Œå†…éƒ¨ä¸åŒ…å«å…¶ä»–æ“ä½œï¼Œå±äºåªè¯»æ€§è´¨çš„é‚£ç§ä¸šåŠ¡å¿…ç„¶ç¬¦åˆå¹‚ç­‰æ€§è¦æ±‚çš„ã€‚</p><p><strong>å¯¹äºåˆ é™¤</strong>ï¼Œé‡å¤åšåˆ é™¤è¯·æ±‚è‡³å°‘ä¸ä¼šé€ æˆæ•°æ®æ‚ä¹±ï¼Œä¸è¿‡ä¹Ÿæœ‰äº›åœºæ™¯æ›´å¸Œæœ›é‡å¤ç‚¹å‡»æç¤ºçš„æ˜¯åˆ é™¤æˆåŠŸï¼Œè€Œä¸æ˜¯ç›®æ ‡ä¸å­˜åœ¨çš„æç¤ºã€‚</p><p><strong>å¯¹äºæ–°å¢å’Œä¿®æ”¹</strong>ï¼Œè¿™é‡Œæ˜¯ä»Šå¤©è¦é‡ç‚¹å…³æ³¨çš„éƒ¨åˆ†ï¼šæ–°å¢ï¼Œéœ€è¦é¿å…é‡å¤æ’å…¥ï¼›ä¿®æ”¹ï¼Œé¿å…è¿›è¡Œæ— æ•ˆçš„é‡å¤ä¿®æ”¹ï¼›</p><h4 id="å¹‚ç­‰æ€§çš„å®ç°æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#å¹‚ç­‰æ€§çš„å®ç°æ–¹å¼" aria-hidden="true">#</a> å¹‚ç­‰æ€§çš„å®ç°æ–¹å¼</h4><p>**å®ç°æ–¹æ³•ï¼š**å®¢æˆ·ç«¯åšæŸä¸€è¯·æ±‚çš„æ—¶å€™å¸¦ä¸Šè¯†åˆ«å‚æ•°æ ‡è¯†ï¼ŒæœåŠ¡ç«¯å¯¹æ­¤æ ‡è¯†è¿›è¡Œè¯†åˆ«ï¼Œé‡å¤è¯·æ±‚åˆ™é‡å¤è¿”å›ç¬¬ä¸€æ¬¡çš„ç»“æœå³å¯ã€‚</p><p>**ä¸¾ä¸ªæ —å­ï¼š**æ¯”å¦‚æ·»åŠ è¯·æ±‚çš„è¡¨å•é‡Œï¼Œåœ¨æ‰“å¼€æ·»åŠ è¡¨å•é¡µé¢çš„æ—¶å€™ï¼Œå°±ç”Ÿæˆä¸€ä¸ªAddIdæ ‡è¯†ï¼Œè¿™ä¸ªAddIdè·Ÿç€è¡¨å•ä¸€èµ·æäº¤åˆ°åå°æ¥å£ã€‚</p><p>åå°æ¥å£æ ¹æ®è¿™ä¸ªAddIdï¼ŒæœåŠ¡ç«¯å°±å¯ä»¥è¿›è¡Œç¼“å­˜æ ‡è®°å¹¶è¿›è¡Œè¿‡æ»¤ï¼Œç¼“å­˜å€¼å¯ä»¥æ˜¯AddIdä½œä¸ºç¼“å­˜keyï¼Œè¿”å›å†…å®¹ä½œä¸ºç¼“å­˜Valueï¼Œè¿™æ ·å³ä½¿æ·»åŠ æŒ‰é’®è¢«å¤šæ¬¡ç‚¹ä¸‹ä¹Ÿå¯ä»¥è¯†åˆ«å‡ºæ¥ã€‚</p><p>è¿™ä¸ªAddIdä»€ä¹ˆæ—¶å€™æ›´æ–°å‘¢ï¼Ÿåªæœ‰åœ¨ä¿å­˜æˆåŠŸå¹¶ä¸”æ¸…ç©ºè¡¨å•ä¹‹åï¼Œæ‰å˜æ›´è¿™ä¸ªAddIdæ ‡è¯†ï¼Œä»è€Œå®ç°æ–°æ•°æ®çš„è¡¨å•æäº¤</p><h3 id="æœ‰å‡ ç§ç”Ÿæˆå”¯ä¸€idçš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#æœ‰å‡ ç§ç”Ÿæˆå”¯ä¸€idçš„æ–¹å¼" aria-hidden="true">#</a> æœ‰å‡ ç§ç”Ÿæˆå”¯ä¸€IDçš„æ–¹å¼ï¼Ÿ</h3><p>åœ¨å¤æ‚åˆ†å¸ƒå¼ç³»ç»Ÿå’Œåºå¤§æ•°æ®é‡çš„åœºæ™¯ä¸‹ï¼Œä¸€èˆ¬éœ€è¦å¯¹å¤§é‡æ•°æ®è¿›è¡Œå”¯ä¸€æ ‡è¯†ã€‚</p><p>æ¯”å¦‚ï¼š</p><ul><li>æ•°æ®åº“åˆ†åº“åˆ†è¡¨åéœ€è¦ç”¨ä¸€ä¸ªå”¯ä¸€IDæ¥æ ‡è¯†ä¸€æ¡æ•°æ®ã€‚</li><li>nosqlä¸­çš„æ•°æ®ï¼Œéœ€è¦ä¸€ä¸ªå”¯ä¸€IDä¸å…¶ä»–æ•°æ®æºçš„æ•°æ®è¿›è¡Œå…³è”</li></ul><p>æœ¬æ–‡å¯¹æ¯”å’Œæ€»ç»“äº†å¸¸è§çš„å‡ ç§æ–¹å¼ï¼Œåœ¨åº§åŒå­¦å¯ä»¥è¿›è¡Œå‚è€ƒã€‚</p><p>æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­ç»å¸¸ä½¿ç”¨ksuidç®—æ³•ã€‚å®ƒç®€å•å¯é ï¼Œè¿˜å¯æŒ‰æ—¶é—´æ’åº</p><h4 id="uuid" tabindex="-1"><a class="header-anchor" href="#uuid" aria-hidden="true">#</a> UUID</h4><p><code>UUID ï¼ˆUniversally Unique Identifierï¼‰</code>ï¼Œé€šç”¨å”¯ä¸€è¯†åˆ«ç çš„ç¼©å†™ã€‚UUIDæ˜¯ç”±ä¸€ç»„32ä½æ•°çš„16è¿›åˆ¶æ•°å­—æ‰€æ„æˆï¼Œæ‰€ä»¥UUIDç†è®ºä¸Šçš„æ€»æ•°ä¸º <code>16^32=2^128</code>ï¼Œçº¦ç­‰äº <code>3.4 x 10^38</code>ã€‚ä¹Ÿå°±æ˜¯è¯´è‹¥æ¯çº³ç§’äº§ç”Ÿ1å…†ä¸ªUUIDï¼Œè¦èŠ±100äº¿å¹´æ‰ä¼šå°†æ‰€æœ‰UUIDç”¨å®Œã€‚</p><p>ç”Ÿæˆçš„UUIDæ˜¯ç”± 8-4-4-4-12æ ¼å¼çš„æ•°æ®ç»„æˆï¼Œå…¶ä¸­32ä¸ªå­—ç¬¦å’Œ4ä¸ªè¿å­—ç¬¦&#39; - &#39;ï¼Œä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ä¼šå°†è¿å­—ç¬¦åˆ é™¤ uuid.<code>toString().replaceAll(&quot;-&quot;,&quot;&quot;)</code>ã€‚</p><p>ç›®å‰UUIDçš„äº§ç”Ÿæ–¹å¼æœ‰5ç§ç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬çš„ç®—æ³•ä¸åŒï¼Œåº”ç”¨èŒƒå›´ä¹Ÿä¸åŒã€‚</p><ul><li><code>åŸºäºæ—¶é—´çš„UUID</code> - ç‰ˆæœ¬1ï¼š è¿™ä¸ªä¸€èˆ¬æ˜¯é€šè¿‡å½“å‰æ—¶é—´ï¼Œéšæœºæ•°ï¼Œå’Œæœ¬åœ°Macåœ°å€æ¥è®¡ç®—å‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡ org.apache.logging.log4j.core.utilåŒ…ä¸­çš„ UuidUtil.getTimeBasedUuid()æ¥ä½¿ç”¨æˆ–è€…å…¶ä»–åŒ…ä¸­å·¥å…·ã€‚ç”±äºä½¿ç”¨äº†MACåœ°å€ï¼Œå› æ­¤èƒ½å¤Ÿç¡®ä¿å”¯ä¸€æ€§ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿæš´éœ²äº†MACåœ°å€ï¼Œç§å¯†æ€§ä¸å¤Ÿå¥½ã€‚</li><li><code>DCEå®‰å…¨çš„UUID</code> - ç‰ˆæœ¬2 DCEï¼ˆDistributed Computing Environmentï¼‰å®‰å…¨çš„UUIDå’ŒåŸºäºæ—¶é—´çš„UUIDç®—æ³•ç›¸åŒï¼Œä½†ä¼šæŠŠæ—¶é—´æˆ³çš„å‰4ä½ç½®æ¢ä¸ºPOSIXçš„UIDæˆ–GIDã€‚è¿™ä¸ªç‰ˆæœ¬çš„UUIDåœ¨å®é™…ä¸­è¾ƒå°‘ç”¨åˆ°ã€‚</li><li><code>åŸºäºåå­—çš„UUIDï¼ˆMD5ï¼‰</code>- ç‰ˆæœ¬3 åŸºäºåå­—çš„UUIDé€šè¿‡è®¡ç®—åå­—å’Œåå­—ç©ºé—´çš„MD5æ•£åˆ—å€¼å¾—åˆ°ã€‚è¿™ä¸ªç‰ˆæœ¬çš„UUIDä¿è¯äº†ï¼šç›¸åŒåå­—ç©ºé—´ä¸­ä¸åŒåå­—ç”Ÿæˆçš„UUIDçš„å”¯ä¸€æ€§ï¼›ä¸åŒåå­—ç©ºé—´ä¸­çš„UUIDçš„å”¯ä¸€æ€§ï¼›ç›¸åŒåå­—ç©ºé—´ä¸­ç›¸åŒåå­—çš„UUIDé‡å¤ç”Ÿæˆæ˜¯ç›¸åŒçš„ã€‚</li><li><code>éšæœºUUID</code> - ç‰ˆæœ¬4 æ ¹æ®éšæœºæ•°ï¼Œæˆ–è€…ä¼ªéšæœºæ•°ç”ŸæˆUUIDã€‚è¿™ç§UUIDäº§ç”Ÿé‡å¤çš„æ¦‚ç‡æ˜¯å¯ä»¥è®¡ç®—å‡ºæ¥çš„ï¼Œä½†æ˜¯é‡å¤çš„å¯èƒ½æ€§å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå› æ­¤è¯¥ç‰ˆæœ¬ä¹Ÿæ˜¯è¢«ç»å¸¸ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚JDKä¸­ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªç‰ˆæœ¬ã€‚</li><li><code>åŸºäºåå­—çš„UUIDï¼ˆSHA1ï¼‰</code> - ç‰ˆæœ¬5 å’ŒåŸºäºåå­—çš„UUIDç®—æ³•ç±»ä¼¼ï¼Œåªæ˜¯æ•£åˆ—å€¼è®¡ç®—ä½¿ç”¨SHA1ï¼ˆSecure Hash Algorithm 1ï¼‰ç®—æ³•ã€‚</li></ul><p>ä¸€èˆ¬é€‰ç”¨V4ç‰ˆæœ¬ï¼ŒV1æœ‰æš´éœ²macåœ°å€çš„é£é™©ï¼ŒV2ç‰¹å®šåœºæ™¯æ‰ä¼šç”¨åˆ°ï¼ŒV3ã€V5ç›¸åŒçš„è¾“å…¥å‚æ•°å¾—åˆ°ç›¸åŒçš„UUID</p><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šç®€å•å¯é </li><li>ç¼ºç‚¹ï¼šä¸å¯æ’åºï¼Œä¸åˆ©äºæ£€ç´¢</li></ul><h4 id="mysqlè‡ªå¢id" tabindex="-1"><a class="header-anchor" href="#mysqlè‡ªå¢id" aria-hidden="true">#</a> mysqlè‡ªå¢id</h4><p>é€‚ç”¨mysqlçš„è‡ªå¢idæœºåˆ¶ï¼Œæ»¡è¶³ é€’å¢æ€§ã€å•è°ƒæ€§ã€å”¯ä¸€æ€§ã€‚</p><ul><li>åœ¨å•æœºæƒ…å†µä¸‹ï¼Œå¦‚æœå¹¶å‘é‡é«˜ï¼Œmysqlçš„å‹åŠ›ä¼šå¾ˆå¤§ã€‚</li><li>åˆ†å¸ƒå¼æƒ…å†µä¸‹ï¼Œä¸€èˆ¬éœ€è¦è®¾å®šæ¯å°æœºå™¨åˆå§‹IDï¼Œæ¥é¿å…IDé‡å¤ã€‚è¿™ç§æ–¹å¼æœ‰å±€é™æ€§ï¼Œä¸”æ°´å¹³æ‰©å±•æ–¹æ¡ˆå¤æ‚ï¼Œå®¹æ˜“ å‡ºé—®é¢˜ã€‚</li></ul><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šç®€å•å¯é ï¼Œåœ¨å•æœºã€å¹¶å‘ä¸é«˜ã€æ•°æ®é‡è¾ƒå°çš„æƒ…å†µä¸‹é€‚ç”¨</li><li>ç¼ºç‚¹ï¼šåœ¨åˆ†åº“åˆ†è¡¨ã€é«˜å¹¶å‘åœºæ™¯ä¸‹ä¸é€‚ç”¨</li></ul><h4 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> redis</h4><p>å› ä¸ºRedisæ˜¯å•çº¿ç¨‹ï¼Œå¤©ç”Ÿä¿è¯åŸå­æ€§ï¼Œå¯ä»¥ä½¿ç”¨åŸå­æ“ä½œINCRå’ŒINCRBYæ¥å®ç°</p><p>å•æœºå’Œåˆ†å¸ƒå¼çš„ä¼˜ç¼ºç‚¹ä¸mysqlç±»ä¼¼</p><h4 id="snowflake" tabindex="-1"><a class="header-anchor" href="#snowflake" aria-hidden="true">#</a> snowflake</h4><p>Snowflakeï¼Œé›ªèŠ±ç®—æ³•æ˜¯ç”±Twitterå¼€æºçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œä»¥åˆ’åˆ†å‘½åç©ºé—´çš„æ–¹å¼å°† 64-bitä½åˆ†å‰²æˆå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†ä»£è¡¨ä¸åŒçš„å«ä¹‰ã€‚è€Œ Javaä¸­64bitçš„æ•´æ•°æ˜¯Longç±»å‹ï¼Œæ‰€ä»¥åœ¨ Java ä¸­ SnowFlake ç®—æ³•ç”Ÿæˆçš„ ID å°±æ˜¯ long æ¥å­˜å‚¨çš„ã€‚</p><ul><li><strong>ç¬¬1ä½</strong>å ç”¨1bitï¼Œå…¶å€¼å§‹ç»ˆæ˜¯0ï¼Œå¯çœ‹åšæ˜¯ç¬¦å·ä½ä¸ä½¿ç”¨ã€‚</li><li><strong>ç¬¬2ä½</strong>å¼€å§‹çš„41ä½æ˜¯æ—¶é—´æˆ³ï¼Œ41-bitä½å¯è¡¨ç¤º2^41ä¸ªæ•°ï¼Œæ¯ä¸ªæ•°ä»£è¡¨æ¯«ç§’ï¼Œé‚£ä¹ˆé›ªèŠ±ç®—æ³•å¯ç”¨çš„æ—¶é—´å¹´é™æ˜¯ <code>(1L&lt;&lt;41)/(1000L360024*365)</code>=69 å¹´çš„æ—¶é—´ã€‚</li><li><strong>ä¸­é—´çš„10-bitä½</strong>å¯è¡¨ç¤ºæœºå™¨æ•°ï¼Œå³2^10 = 1024å°æœºå™¨ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸ä¼šéƒ¨ç½²è¿™ä¹ˆå°æœºå™¨ã€‚å¦‚æœæˆ‘ä»¬å¯¹IDCï¼ˆäº’è”ç½‘æ•°æ®ä¸­å¿ƒï¼‰æœ‰éœ€æ±‚ï¼Œè¿˜å¯ä»¥å°† 10-bit åˆ† 5-bit ç»™ IDCï¼Œåˆ†5-bitç»™å·¥ä½œæœºå™¨ã€‚è¿™æ ·å°±å¯ä»¥è¡¨ç¤º32ä¸ªIDCï¼Œæ¯ä¸ªIDCä¸‹å¯ä»¥æœ‰32å°æœºå™¨ï¼Œå…·ä½“çš„åˆ’åˆ†å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚å®šä¹‰ã€‚</li><li><strong>æœ€å12-bitä½</strong>æ˜¯è‡ªå¢åºåˆ—ï¼Œå¯è¡¨ç¤º2^12 = 4096ä¸ªæ•°ã€‚</li></ul><p>è¿™æ ·çš„åˆ’åˆ†ä¹‹åç›¸å½“äº<strong>åœ¨ä¸€æ¯«ç§’ä¸€ä¸ªæ•°æ®ä¸­å¿ƒçš„ä¸€å°æœºå™¨ä¸Šå¯äº§ç”Ÿ4096ä¸ªæœ‰åºçš„ä¸é‡å¤çš„ID</strong>ã€‚ä½†æ˜¯æˆ‘ä»¬ IDC å’Œæœºå™¨æ•°è‚¯å®šä¸æ­¢ä¸€ä¸ªï¼Œæ‰€ä»¥æ¯«ç§’å†…èƒ½ç”Ÿæˆçš„æœ‰åºIDæ•°æ˜¯ç¿»å€çš„ã€‚</p><p>ç®—æ³•ç»“æ„</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220709155254210-ad16b5de.png" alt="image-20220709155254210" tabindex="0" loading="lazy"><figcaption>image-20220709155254210</figcaption></figure><p>ä¼˜åŠ¿ï¼š</p><ul><li>å•æœºå¯åœ¨ä¸€æ¯«ç§’å†…ç”Ÿæˆ4096ä¸ªå”¯ä¸€ID</li><li>å› ä¸ºæœ€é«˜ä½æ˜¯æ—¶é—´æˆ³ï¼Œæ‰€ä»¥snowflakeç”Ÿæˆçš„IDéƒ½æ˜¯æŒ‰æ—¶é—´è¶‹åŠ¿é€’å¢</li><li>å› ä¸ºæœ‰ workerIdæ¥åšåŒºåˆ†ï¼Œæ‰€ä»¥æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå†…ä¸ä¼šäº§ç”Ÿé‡å¤ID</li></ul><p>æœ€å¤§çš„é—®é¢˜ï¼šæ—¶é’Ÿå›æ‹¨</p><p>snowflakeéå¸¸ä¾èµ–ç³»ç»Ÿæ—¶é—´çš„ä¸€è‡´æ€§ï¼Œå¦‚æœå‘ç”Ÿç³»ç»Ÿæ—¶é—´çš„å›è°ƒï¼Œæ”¹å˜ï¼Œå°±å¯èƒ½ä¼šå‘ç”Ÿidçš„é‡å¤</p><p>ä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„å‡ ç§è§£å†³æ–¹æ³•ï¼š</p><ul><li>ç®€å•ç²—æš´ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œè®©ä¸šåŠ¡å±‚å»è§£å†³</li><li>å…³é—­æœåŠ¡å™¨æ—¶é—´åŒæ­¥</li><li>ä¿å­˜è¿‡å»ä¸€å°æ—¶ï¼Œæ¯ä¸ªæ¯«ç§’çš„åºå·ä½¿ç”¨æƒ…å†µã€‚å¦‚æœæ—¶é—´å›é€€åˆ°æŸä¸€æ¯«ç§’ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸€æ¯«ç§’çš„åºå·ï¼Œç»§ç»­ç”ŸæˆID</li><li>ç”ŸæˆIDçš„æ—¶é—´ï¼Œä¸å®æ—¶è·ŸéšæœåŠ¡å™¨æ—¶é—´ï¼Œå½“1æ¯«ç§’å†…çš„åºå·å…¨éƒ¨ç”¨å®Œï¼Œæ‰è·³åˆ°ä¸‹ä¸€æ¯«ç§’ã€‚å¦‚æœç”ŸæˆIDçš„å¹¶å‘é‡ä¸å¤§ï¼Œå°±æœ‰å¾ˆå¤§çš„ä½™é‡æ—¶é—´æ²¡æœ‰ä½¿ç”¨ï¼Œå°±ç®—æ—¶é’Ÿå›é€€äº†ï¼Œä¹Ÿæ˜¯å›é€€åˆ°æ²¡æœ‰è¢«ä½¿ç”¨çš„æ—¶é—´ã€‚</li></ul><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šç”Ÿæˆçš„IDè¶‹åŠ¿é€’å¢ï¼Œç”Ÿæˆæ•ˆç‡é«˜ï¼Œå¯ä¿è¯ä¸é‡å¤</li><li>ç¼ºç‚¹ï¼šæ—¶é’Ÿå›æ‹¨é—®é¢˜å¤„ç†èµ·æ¥å¤æ‚ï¼Œå®¹æ˜“å‡ºç°é—®é¢˜</li></ul><h4 id="ksuid" tabindex="-1"><a class="header-anchor" href="#ksuid" aria-hidden="true">#</a> ksuid</h4><p>ç®—æ³•ç»“æ„</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220709155341400-5702acc2.png" alt="image-20220709155341400" tabindex="0" loading="lazy"><figcaption>image-20220709155341400</figcaption></figure><p>ksuidç”±ä¸¤éƒ¨åˆ†ç»„æˆ</p><ul><li><strong>ç¬¬ä¸€éƒ¨åˆ†</strong></li></ul><p>32ä½çš„ç§’çº§æ—¶é—´æˆ³</p><ul><li><strong>ç¬¬äºŒéƒ¨åˆ†</strong></li></ul><p>128 ä½éšæœºç”Ÿæˆè½½è·</p><p>ä¼˜åŠ¿ï¼š</p><ul><li>å› ä¸ºæœ€é«˜ä½æ˜¯æ—¶é—´æˆ³ï¼Œæ‰€ä»¥snowflakeç”Ÿæˆçš„IDéƒ½æ˜¯æŒ‰æ—¶é—´è¶‹åŠ¿é€’å¢</li><li>è€Œ128ä½çš„å·ç ç©ºé—´ï¼Œåœ¨ä¸€ç§’å†…å‡ºç°éšæœºç¢°æ’çš„æ¦‚ç‡éå¸¸ä¹‹ä½ï¼Œ1/2^128 çº¦ç­‰äºæ˜å¤©é™¨çŸ³æ’åœ°çƒçš„æ¦‚ç‡</li><li>æ²¡æœ‰åºå·åˆ™å¯ä»¥é¿å…snowflakeçš„æ—¶é’Ÿå›æ‹¨é—®é¢˜</li></ul><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šç”Ÿæˆçš„IDè¶‹åŠ¿é€’å¢ï¼Œç”Ÿæˆæ•ˆç‡é«˜ï¼Œæ²¡æœ‰æ—¶é’Ÿå›æ‹¨çš„é—®é¢˜</li><li>ç¼ºç‚¹ï¼šæœ‰éšæœºéƒ¨åˆ†ï¼Œç†è®ºä¸Šå­˜åœ¨éšæœºç¢°æ’çš„å¯èƒ½</li></ul><h4 id="å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–" aria-hidden="true">#</a> å…¶ä»–</h4><p>å¦å¤–è¿˜æœ‰ï¼š</p><ul><li>ç™¾åº¦-UidGenerator</li><li>ç¾å›¢Leaf</li></ul><p>å¯¹æ¯”äº†5ç§è§£å†³æ–¹æ¡ˆã€‚åœ¨æˆ‘çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæˆ‘é€‰æ‹©ç®€å•å¯é çš„ksuidç®—æ³•æ¥ç”Ÿæˆå”¯ä¸€ID</p><h3 id="å•ç‚¹ç™»å½•" tabindex="-1"><a class="header-anchor" href="#å•ç‚¹ç™»å½•" aria-hidden="true">#</a> å•ç‚¹ç™»å½•</h3><p>å•ç‚¹ç™»å½•çš„è‹±æ–‡åå«åšï¼šSingle Sign Onï¼ˆç®€ç§°<strong>SSO</strong>ï¼‰ã€‚</p><p>åœ¨<strong>åˆå­¦/ä»¥å‰</strong>çš„æ—¶å€™ï¼Œä¸€èˆ¬æˆ‘ä»¬å°±<strong>å•ç³»ç»Ÿ</strong>ï¼Œæ‰€æœ‰çš„åŠŸèƒ½éƒ½åœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸Šã€‚</p><h3 id="dubboé¢è¯•æ±‡æ€»" tabindex="-1"><a class="header-anchor" href="#dubboé¢è¯•æ±‡æ€»" aria-hidden="true">#</a> Dubboé¢è¯•æ±‡æ€»</h3><h4 id="ä»€ä¹ˆæ˜¯-dubbo" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-dubbo" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯ Dubbo?</h4><p><a href="https://github.com/apache/dubbo" target="_blank" rel="noopener noreferrer">Apache Dubbo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>|ËˆdÊŒbÉ™ÊŠ| æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æº Java RPC æ¡†æ¶ã€‚</p><p>æ ¹æ® <a href="https://dubbo.apache.org/zh/" target="_blank" rel="noopener noreferrer">Dubbo å®˜æ–¹æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>çš„ä»‹ç»ï¼ŒDubbo æä¾›äº†å…­å¤§æ ¸å¿ƒèƒ½åŠ›</p><ol><li>é¢å‘æ¥å£ä»£ç†çš„é«˜æ€§èƒ½RPCè°ƒç”¨ã€‚</li><li>æ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ã€‚</li><li>æœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚</li><li>é«˜åº¦å¯æ‰©å±•èƒ½åŠ›ã€‚</li><li>è¿è¡ŒæœŸæµé‡è°ƒåº¦ã€‚</li><li>å¯è§†åŒ–çš„æœåŠ¡æ²»ç†ä¸è¿ç»´ã€‚</li></ol><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220602105203619-3c1f0b47.png" alt="image-20220726154002025" tabindex="0" loading="lazy"><figcaption>image-20220726154002025</figcaption></figure><p>ç®€å•æ¥è¯´å°±æ˜¯ï¼š <strong>Dubbo ä¸å…‰å¯ä»¥å¸®åŠ©æˆ‘ä»¬è°ƒç”¨è¿œç¨‹æœåŠ¡ï¼Œè¿˜æä¾›äº†ä¸€äº›å…¶ä»–å¼€ç®±å³ç”¨çš„åŠŸèƒ½æ¯”å¦‚æ™ºèƒ½è´Ÿè½½å‡è¡¡ã€‚</strong></p><h4 id="dubbo-çš„è´Ÿè½½å‡è¡¡ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#dubbo-çš„è´Ÿè½½å‡è¡¡ç­–ç•¥" aria-hidden="true">#</a> Dubbo çš„è´Ÿè½½å‡è¡¡ç­–ç•¥</h4><p>åœ¨é›†ç¾¤è´Ÿè½½å‡è¡¡æ—¶ï¼ŒDubbo æä¾›äº†å¤šç§å‡è¡¡ç­–ç•¥ï¼Œé»˜è®¤ä¸º <code>random</code> éšæœºè°ƒç”¨ã€‚æˆ‘ä»¬è¿˜å¯ä»¥è‡ªè¡Œæ‰©å±•è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆå‚è€ƒDubbo SPIæœºåˆ¶ï¼‰ã€‚</p><p>åœ¨ Dubbo ä¸­ï¼Œæ‰€æœ‰è´Ÿè½½å‡è¡¡å®ç°ç±»å‡ç»§æ‰¿è‡ª <code>AbstractLoadBalance</code>ï¼Œè¯¥ç±»å®ç°äº† <code>LoadBalance</code> æ¥å£ï¼Œå¹¶å°è£…äº†ä¸€äº›å…¬å…±çš„é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractLoadBalance</span> <span class="token keyword">implements</span> <span class="token class-name">LoadBalance</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calculateWarmupWeight</span><span class="token punctuation">(</span><span class="token keyword">int</span> uptime<span class="token punctuation">,</span> <span class="token keyword">int</span> warmup<span class="token punctuation">,</span> <span class="token keyword">int</span> weight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Invoker</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Invoker</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> invokers<span class="token punctuation">,</span> <span class="token class-name">URL</span> url<span class="token punctuation">,</span> <span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Invoker</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">doSelect</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Invoker</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> invokers<span class="token punctuation">,</span> <span class="token class-name">URL</span> url<span class="token punctuation">,</span> <span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token keyword">int</span> <span class="token function">getWeight</span><span class="token punctuation">(</span><span class="token class-name">Invoker</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> invoker<span class="token punctuation">,</span> <span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>AbstractLoadBalance</code> çš„å®ç°ç±»æœ‰ä¸‹é¢è¿™äº›ï¼š</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726154345877-a6b9734d.png" alt="image-20220726154345877" tabindex="0" loading="lazy"><figcaption>image-20220726154345877</figcaption></figure><p>å®˜æ–¹æ–‡æ¡£å¯¹è´Ÿè½½å‡è¡¡è¿™éƒ¨åˆ†çš„ä»‹ç»éå¸¸è¯¦ç»†ï¼Œæ¨èå°ä¼™ä¼´ä»¬çœ‹çœ‹ï¼Œåœ°å€ï¼š<a href="https://dubbo.apache.org/zh/docs/v2.7/dev/source/loadbalance/#m-zhdocsv27devsourceloadbalance" target="_blank" rel="noopener noreferrer">https://dubbo.apache.org/zh/docs/v2.7/dev/source/loadbalance/#m-zhdocsv27devsourceloadbalance<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h5 id="randomloadbalance" tabindex="-1"><a class="header-anchor" href="#randomloadbalance" aria-hidden="true">#</a> RandomLoadBalance</h5><p>æ ¹æ®æƒé‡éšæœºé€‰æ‹©ï¼ˆå¯¹åŠ æƒéšæœºç®—æ³•çš„å®ç°ï¼‰ã€‚è¿™æ˜¯Dubboé»˜è®¤é‡‡ç”¨çš„ä¸€ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚</p><p><code> RandomLoadBalance</code> å…·ä½“çš„å®ç°åŸç†éå¸¸ç®€å•ï¼Œå‡å¦‚æœ‰ä¸¤ä¸ªæä¾›ç›¸åŒæœåŠ¡çš„æœåŠ¡å™¨ S1,S2ï¼ŒS1çš„æƒé‡ä¸º7ï¼ŒS2çš„æƒé‡ä¸º3ã€‚</p><p>æˆ‘ä»¬æŠŠè¿™äº›æƒé‡å€¼åˆ†å¸ƒåœ¨åæ ‡åŒºé—´ä¼šå¾—åˆ°ï¼šS1-&gt;[0, 7) ï¼ŒS2-&gt;[7, 10)ã€‚æˆ‘ä»¬ç”Ÿæˆ[0, 10) ä¹‹é—´çš„éšæœºæ•°ï¼Œéšæœºæ•°è½åˆ°å¯¹åº”çš„åŒºé—´ï¼Œæˆ‘ä»¬å°±é€‰æ‹©å¯¹åº”çš„æœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726154405163-9ca5f047.png" alt="image-20220726154405163" tabindex="0" loading="lazy"><figcaption>image-20220726154405163</figcaption></figure><p><code>RandomLoadBalance</code> çš„æºç éå¸¸ç®€å•ï¼Œç®€å•èŠ±å‡ åˆ†é’Ÿæ—¶é—´çœ‹ä¸€ä¸‹ã€‚</p><blockquote><p>ä»¥ä¸‹æºç æ¥è‡ª Dubbo master åˆ†æ”¯ä¸Šçš„æœ€æ–°çš„ç‰ˆæœ¬ 2.7.9ã€‚</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomLoadBalance</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractLoadBalance</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">NAME</span> <span class="token operator">=</span> <span class="token string">&quot;random&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Invoker</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">doSelect</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Invoker</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> invokers<span class="token punctuation">,</span> <span class="token class-name">URL</span> url<span class="token punctuation">,</span> <span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">int</span> length <span class="token operator">=</span> invokers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> sameWeight <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weights <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span> 
        <span class="token keyword">int</span> totalWeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// ä¸‹é¢è¿™ä¸ªforå¾ªç¯çš„ä¸»è¦ä½œç”¨å°±æ˜¯è®¡ç®—æ‰€æœ‰è¯¥æœåŠ¡çš„æä¾›è€…çš„æƒé‡ä¹‹å’Œ totalWeightï¼ˆï¼‰ï¼Œ</span>
        <span class="token comment">// é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜ä¼šæ£€æµ‹æ¯ä¸ªæœåŠ¡æä¾›è€…çš„æƒé‡æ˜¯å¦ç›¸åŒ</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> weight <span class="token operator">=</span> <span class="token function">getWeight</span><span class="token punctuation">(</span>invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> invocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
            totalWeight <span class="token operator">+=</span> weight<span class="token punctuation">;</span>
            weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> totalWeight<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sameWeight <span class="token operator">&amp;&amp;</span> totalWeight <span class="token operator">!=</span> weight <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                sameWeight <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>totalWeight <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>sameWeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// éšæœºç”Ÿæˆä¸€ä¸ª [0, totalWeight) åŒºé—´å†…çš„æ•°å­—</span>
            <span class="token keyword">int</span> offset <span class="token operator">=</span> <span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>totalWeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ¤æ–­ä¼šè½åœ¨å“ªä¸ªæœåŠ¡æä¾›è€…çš„åŒºé—´</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>offset <span class="token operator">&lt;</span> weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
  
        <span class="token keyword">return</span> invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="leastactiveloadbalance" tabindex="-1"><a class="header-anchor" href="#leastactiveloadbalance" aria-hidden="true">#</a> LeastActiveLoadBalance</h5><p><code>LeastActiveLoadBalance</code> ç›´è¯‘è¿‡æ¥å°±æ˜¯<strong>æœ€å°æ´»è·ƒæ•°è´Ÿè½½å‡è¡¡</strong>ã€‚</p><p>è¿™ä¸ªåå­—èµ·å¾—æœ‰ç‚¹ä¸ç›´è§‚ï¼Œä¸ä»”ç»†çœ‹å®˜æ–¹å¯¹æ´»è·ƒæ•°çš„å®šä¹‰ï¼Œä½ å‹æ ¹ä¸çŸ¥é“è¿™ç©æ„æ˜¯å¹²å˜›çš„ã€‚</p><p>æˆ‘è¿™ä¹ˆè¯´å§ï¼åˆå§‹çŠ¶æ€ä¸‹æ‰€æœ‰æœåŠ¡æä¾›è€…çš„æ´»è·ƒæ•°å‡ä¸º 0ï¼ˆæ¯ä¸ªæœåŠ¡æä¾›è€…çš„ä¸­ç‰¹å®šæ–¹æ³•éƒ½å¯¹åº”ä¸€ä¸ªæ´»è·ƒæ•°ï¼Œæˆ‘åœ¨åé¢çš„æºç ä¸­ä¼šæåˆ°ï¼‰ï¼Œæ¯æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚åï¼Œå¯¹åº”çš„æœåŠ¡æä¾›è€…çš„æ´»è·ƒæ•° +1ï¼Œå½“è¿™ä¸ªè¯·æ±‚å¤„ç†å®Œä¹‹åï¼Œæ´»è·ƒæ•° -1ã€‚</p><p>å› æ­¤ï¼Œ<strong>Dubbo å°±è®¤ä¸ºè°çš„æ´»è·ƒæ•°è¶Šå°‘ï¼Œè°çš„å¤„ç†é€Ÿåº¦å°±è¶Šå¿«ï¼Œæ€§èƒ½ä¹Ÿè¶Šå¥½ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘å°±ä¼˜å…ˆæŠŠè¯·æ±‚ç»™æ´»è·ƒæ•°å°‘çš„æœåŠ¡æä¾›è€…å¤„ç†ã€‚</strong></p><p><strong>å¦‚æœæœ‰å¤šä¸ªæœåŠ¡æä¾›è€…çš„æ´»è·ƒæ•°ç›¸ç­‰æ€ä¹ˆåŠï¼Ÿ</strong></p><p>å¾ˆç®€å•ï¼Œé‚£å°±å†èµ°ä¸€é <code>RandomLoadBalance</code> ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeastActiveLoadBalance</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractLoadBalance</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">NAME</span> <span class="token operator">=</span> <span class="token string">&quot;leastactive&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Invoker</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">doSelect</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Invoker</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> invokers<span class="token punctuation">,</span> <span class="token class-name">URL</span> url<span class="token punctuation">,</span> <span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> length <span class="token operator">=</span> invokers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> leastActive <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> leastCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> leastIndexes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weights <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> totalWeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> firstWeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> sameWeight <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// è¿™ä¸ª for å¾ªç¯çš„ä¸»è¦ä½œç”¨æ˜¯éå† invokers åˆ—è¡¨ï¼Œæ‰¾å‡ºæ´»è·ƒæ•°æœ€å°çš„ Invoker</span>
        <span class="token comment">// å¦‚æœæœ‰å¤šä¸ª Invoker å…·æœ‰ç›¸åŒçš„æœ€å°æ´»è·ƒæ•°ï¼Œè¿˜ä¼šè®°å½•ä¸‹è¿™äº› Invoker åœ¨ invokers é›†åˆä¸­çš„ä¸‹æ ‡ï¼Œå¹¶ç´¯åŠ å®ƒä»¬çš„æƒé‡ï¼Œæ¯”è¾ƒå®ƒä»¬çš„æƒé‡å€¼æ˜¯å¦ç›¸ç­‰</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Invoker</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> invoker <span class="token operator">=</span> invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è·å– invoker å¯¹åº”çš„æ´»è·ƒ(active)æ•°</span>
            <span class="token keyword">int</span> active <span class="token operator">=</span> <span class="token class-name">RpcStatus</span><span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span>invoker<span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> invocation<span class="token punctuation">.</span><span class="token function">getMethodName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> afterWarmup <span class="token operator">=</span> <span class="token function">getWeight</span><span class="token punctuation">(</span>invoker<span class="token punctuation">,</span> invocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
            weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> afterWarmup<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>leastActive <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> active <span class="token operator">&lt;</span> leastActive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                leastActive <span class="token operator">=</span> active<span class="token punctuation">;</span>
                leastCount <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                leastIndexes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
                totalWeight <span class="token operator">=</span> afterWarmup<span class="token punctuation">;</span>
                firstWeight <span class="token operator">=</span> afterWarmup<span class="token punctuation">;</span>
                sameWeight <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>active <span class="token operator">==</span> leastActive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                leastIndexes<span class="token punctuation">[</span>leastCount<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
                totalWeight <span class="token operator">+=</span> afterWarmup<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>sameWeight <span class="token operator">&amp;&amp;</span> afterWarmup <span class="token operator">!=</span> firstWeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    sameWeight <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
       <span class="token comment">// å¦‚æœåªæœ‰ä¸€ä¸ª Invoker å…·æœ‰æœ€å°çš„æ´»è·ƒæ•°ï¼Œæ­¤æ—¶ç›´æ¥è¿”å›è¯¥ Invoker å³å¯</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>leastCount <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>leastIndexes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// å¦‚æœæœ‰å¤šä¸ª Invoker å…·æœ‰ç›¸åŒçš„æœ€å°æ´»è·ƒæ•°ï¼Œä½†å®ƒä»¬ä¹‹é—´çš„æƒé‡ä¸åŒ</span>
        <span class="token comment">// è¿™é‡Œçš„å¤„ç†æ–¹å¼å°±å’Œ  RandomLoadBalance ä¸€è‡´äº†</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sameWeight <span class="token operator">&amp;&amp;</span> totalWeight <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> offsetWeight <span class="token operator">=</span> <span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>totalWeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> leastCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">int</span> leastIndex <span class="token operator">=</span> leastIndexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                offsetWeight <span class="token operator">-=</span> weights<span class="token punctuation">[</span>leastIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>offsetWeight <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>leastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>leastIndexes<span class="token punctuation">[</span><span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>leastCount<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ´»è·ƒæ•°æ˜¯é€šè¿‡ <code>RpcStatus</code> ä¸­çš„ä¸€ä¸ª <code>ConcurrentMap</code> ä¿å­˜çš„ï¼Œæ ¹æ® URL ä»¥åŠæœåŠ¡æä¾›è€…è¢«è°ƒç”¨çš„æ–¹æ³•çš„åç§°ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥è·å–åˆ°å¯¹åº”çš„æ´»è·ƒæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´æœåŠ¡æä¾›è€…ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•çš„æ´»è·ƒæ•°éƒ½æ˜¯äº’ç›¸ç‹¬ç«‹çš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RpcStatus</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ConcurrentMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">ConcurrentMap</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">RpcStatus</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token constant">METHOD_STATISTICS</span> <span class="token operator">=</span>
            <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">ConcurrentMap</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">RpcStatus</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">RpcStatus</span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token class-name">URL</span> url<span class="token punctuation">,</span> <span class="token class-name">String</span> methodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> uri <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">toIdentityString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ConcurrentMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">RpcStatus</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token constant">METHOD_STATISTICS</span><span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> k <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> k <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">RpcStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> active<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="consistenthashloadbalance" tabindex="-1"><a class="header-anchor" href="#consistenthashloadbalance" aria-hidden="true">#</a> ConsistentHashLoadBalance</h5><p><code>ConsistentHashLoadBalance</code> å°ä¼™ä¼´ä»¬åº”è¯¥ä¹Ÿä¸ä¼šé™Œç”Ÿï¼Œåœ¨åˆ†åº“åˆ†è¡¨ã€å„ç§é›†ç¾¤ä¸­å°±ç»å¸¸ä½¿ç”¨è¿™ä¸ªè´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚</p><p><code>ConsistentHashLoadBalance</code> å³<strong>ä¸€è‡´æ€§Hashè´Ÿè½½å‡è¡¡ç­–ç•¥</strong>ã€‚ <code>ConsistentHashLoadBalance</code> ä¸­æ²¡æœ‰æƒé‡çš„æ¦‚å¿µï¼Œå…·ä½“æ˜¯å“ªä¸ªæœåŠ¡æä¾›è€…å¤„ç†è¯·æ±‚æ˜¯ç”±ä½ çš„è¯·æ±‚çš„å‚æ•°å†³å®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸åŒå‚æ•°çš„è¯·æ±‚æ€»æ˜¯å‘åˆ°åŒä¸€ä¸ªæœåŠ¡æä¾›è€…ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726154509626-34ef7a4f.png" alt="image-20220726154509626" tabindex="0" loading="lazy"><figcaption>image-20220726154509626</figcaption></figure><p>å¦å¤–ï¼ŒDubbo ä¸ºäº†é¿å…æ•°æ®å€¾æ–œé—®é¢˜ï¼ˆèŠ‚ç‚¹ä¸å¤Ÿåˆ†æ•£ï¼Œå¤§é‡è¯·æ±‚è½åˆ°åŒä¸€èŠ‚ç‚¹ï¼‰ï¼Œè¿˜å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹çš„æ¦‚å¿µã€‚é€šè¿‡è™šæ‹ŸèŠ‚ç‚¹å¯ä»¥è®©èŠ‚ç‚¹æ›´åŠ åˆ†æ•£ï¼Œæœ‰æ•ˆå‡è¡¡å„ä¸ªèŠ‚ç‚¹çš„è¯·æ±‚é‡ã€‚</p><figure><img src="/Computer-Science-Learn-Notes/assets/image-20220726154517156-1c076f81.png" alt="image-20220726154517156" tabindex="0" loading="lazy"><figcaption>image-20220726154517156</figcaption></figure><p>å®˜æ–¹æœ‰è¯¦ç»†çš„æºç åˆ†æï¼š<a href="https://dubbo.apache.org/zh/docs/v2.7/dev/source/loadbalance/#23-consistenthashloadbalance" target="_blank" rel="noopener noreferrer">https://dubbo.apache.org/zh/docs/v2.7/dev/source/loadbalance/#23-consistenthashloadbalance<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ã€‚</p><h5 id="roundrobinloadbalance" tabindex="-1"><a class="header-anchor" href="#roundrobinloadbalance" aria-hidden="true">#</a> RoundRobinLoadBalance</h5><p>åŠ æƒè½®è¯¢è´Ÿè½½å‡è¡¡ã€‚</p><p>è½®è¯¢å°±æ˜¯æŠŠè¯·æ±‚ä¾æ¬¡åˆ†é…ç»™æ¯ä¸ªæœåŠ¡æä¾›è€…ã€‚åŠ æƒè½®è¯¢å°±æ˜¯åœ¨è½®è¯¢çš„åŸºç¡€ä¸Šï¼Œè®©æ›´å¤šçš„è¯·æ±‚è½åˆ°æƒé‡æ›´å¤§çš„æœåŠ¡æä¾›è€…ä¸Šã€‚æ¯”å¦‚å‡å¦‚æœ‰ä¸¤ä¸ªæä¾›ç›¸åŒæœåŠ¡çš„æœåŠ¡å™¨ S1,S2ï¼ŒS1çš„æƒé‡ä¸º7ï¼ŒS2çš„æƒé‡ä¸º3ã€‚</p><p>å¦‚æœæˆ‘ä»¬æœ‰ 10 æ¬¡è¯·æ±‚ï¼Œé‚£ä¹ˆ 7 æ¬¡ä¼šè¢« S1å¤„ç†ï¼Œ3æ¬¡è¢« S2å¤„ç†ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯ <code>RandomLoadBalance</code> çš„è¯ï¼Œå¾ˆå¯èƒ½å­˜åœ¨10æ¬¡è¯·æ±‚æœ‰9æ¬¡éƒ½è¢« S1 å¤„ç†çš„æƒ…å†µï¼ˆæ¦‚ç‡æ€§é—®é¢˜ï¼‰ã€‚</p><p>Dubbo ä¸­çš„ <code>RoundRobinLoadBalance</code> çš„ä»£ç å®ç°è¢«ä¿®æ”¹é‡å»ºäº†å¥½å‡ æ¬¡ï¼ŒDubbo-2.6.5 ç‰ˆæœ¬çš„ <code>RoundRobinLoadBalance</code> ä¸ºå¹³æ»‘åŠ æƒè½®è¯¢ç®—æ³•ã€‚</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zhiyu1998/Computer-Science-Learn-Notes/edit/main/demo/theme-docs/src/Java/eightpart/distribution.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 542716863@qq.com">RrOrange</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/Computer-Science-Learn-Notes/Java/eightpart/redis.html" class="nav-link prev" aria-label="redis"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->redis</div></a><a href="/Computer-Science-Learn-Notes/Java/eightpart/messageQueue.html" class="nav-link next" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">æ¶ˆæ¯é˜Ÿåˆ—<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2023 zhiyu1998</div></footer></div><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/Computer-Science-Learn-Notes/assets/app-66c72b60.js" defer></script>
  </body>
</html>
